// Generated by Construct, the game and animation creation tool
// Visit: https://www.construct.net

{
    let R = function(t) {
        bn = t;
    }, k = function(t) {
        return t * kn;
    }, F = function(t, s) {
        return Math.abs(t - s) <= Tn * Math.max(1, Math.abs(t), Math.abs(s));
    }, j = function() {
        var t = new bn(4);
        return bn != Float32Array && (t[1] = 0, t[2] = 0), t[0] = 1, t[3] = 1, t;
    }, z = function(t) {
        var s = new bn(4);
        return s[0] = t[0], s[1] = t[1], s[2] = t[2], s[3] = t[3], s;
    }, B = function(t, s) {
        return t[0] = s[0], t[1] = s[1], t[2] = s[2], t[3] = s[3], t;
    }, U = function(t) {
        return t[0] = 1, t[1] = 0, t[2] = 0, t[3] = 1, t;
    }, W = function(t, s, i, e) {
        var n = new bn(4);
        return n[0] = t, n[1] = s, n[2] = i, n[3] = e, n;
    }, Q = function(t, s, i, e, n) {
        return t[0] = s, t[1] = i, t[2] = e, t[3] = n, t;
    }, V = function(t, s) {
        var i;
        return t === s ? (i = s[1], t[1] = s[2], t[2] = i) : (t[0] = s[0], t[1] = s[2], 
        t[2] = s[1], t[3] = s[3]), t;
    }, J = function(t, s) {
        var i = s[0], e = s[1], n = s[2], h = i * (s = s[3]) - n * e;
        return h ? (t[0] = s * (h = 1 / h), t[1] = -e * h, t[2] = -n * h, t[3] = i * h, 
        t) : null;
    }, Y = function(t, s) {
        var i = s[0];
        return t[0] = s[3], t[1] = -s[1], t[2] = -s[2], t[3] = i, t;
    }, H = function(t) {
        return t[0] * t[3] - t[2] * t[1];
    }, t = function(t, s, i) {
        var e = s[0], n = s[1], h = s[2], s = s[3], r = i[0], o = i[1], a = i[2], i = i[3];
        return t[0] = e * r + h * o, t[1] = n * r + s * o, t[2] = e * a + h * i, 
        t[3] = n * a + s * i, t;
    }, q = function(t, s, i) {
        var e = s[0], n = s[1], h = s[2], s = s[3], r = Math.sin(i), i = Math.cos(i);
        return t[0] = e * i + h * r, t[1] = n * i + s * r, t[2] = e * -r + h * i, 
        t[3] = n * -r + s * i, t;
    }, Z = function(t, s, i) {
        var e = s[0], n = s[1], h = s[2], s = s[3], r = i[0], i = i[1];
        return t[0] = e * r, t[1] = n * r, t[2] = h * i, t[3] = s * i, t;
    }, X = function(t, s) {
        var i = Math.sin(s), s = Math.cos(s);
        return t[0] = s, t[1] = i, t[2] = -i, t[3] = s, t;
    }, K = function(t, s) {
        return t[0] = s[0], t[1] = 0, t[2] = 0, t[3] = s[1], t;
    }, $ = function(t) {
        return "mat2(" + t[0] + ", " + t[1] + ", " + t[2] + ", " + t[3] + ")";
    }, tt = function(t) {
        return Math.hypot(t[0], t[1], t[2], t[3]);
    }, st = function(t, s, i, e) {
        return t[2] = e[2] / e[0], i[0] = e[0], i[1] = e[1], i[3] = e[3] - t[2] * i[1], 
        [ t, s, i ];
    }, it = function(t, s, i) {
        return t[0] = s[0] + i[0], t[1] = s[1] + i[1], t[2] = s[2] + i[2], t[3] = s[3] + i[3], 
        t;
    }, s = function(t, s, i) {
        return t[0] = s[0] - i[0], t[1] = s[1] - i[1], t[2] = s[2] - i[2], t[3] = s[3] - i[3], 
        t;
    }, et = function(t, s) {
        return t[0] === s[0] && t[1] === s[1] && t[2] === s[2] && t[3] === s[3];
    }, nt = function(t, s) {
        var i = t[0], e = t[1], n = t[2], t = t[3], h = s[0], r = s[1], o = s[2], s = s[3];
        return Math.abs(i - h) <= Tn * Math.max(1, Math.abs(i), Math.abs(h)) && Math.abs(e - r) <= Tn * Math.max(1, Math.abs(e), Math.abs(r)) && Math.abs(n - o) <= Tn * Math.max(1, Math.abs(n), Math.abs(o)) && Math.abs(t - s) <= Tn * Math.max(1, Math.abs(t), Math.abs(s));
    }, ht = function(t, s, i) {
        return t[0] = s[0] * i, t[1] = s[1] * i, t[2] = s[2] * i, t[3] = s[3] * i, 
        t;
    }, rt = function(t, s, i, e) {
        return t[0] = s[0] + i[0] * e, t[1] = s[1] + i[1] * e, t[2] = s[2] + i[2] * e, 
        t[3] = s[3] + i[3] * e, t;
    }, ot = function() {
        var t = new bn(6);
        return bn != Float32Array && (t[1] = 0, t[2] = 0, t[4] = 0, t[5] = 0), t[0] = 1, 
        t[3] = 1, t;
    }, at = function(t) {
        var s = new bn(6);
        return s[0] = t[0], s[1] = t[1], s[2] = t[2], s[3] = t[3], s[4] = t[4], 
        s[5] = t[5], s;
    }, lt = function(t, s) {
        return t[0] = s[0], t[1] = s[1], t[2] = s[2], t[3] = s[3], t[4] = s[4], 
        t[5] = s[5], t;
    }, ut = function(t) {
        return t[0] = 1, t[1] = 0, t[2] = 0, t[3] = 1, t[4] = 0, t[5] = 0, t;
    }, ct = function(t, s, i, e, n, h) {
        var r = new bn(6);
        return r[0] = t, r[1] = s, r[2] = i, r[3] = e, r[4] = n, r[5] = h, r;
    }, ft = function(t, s, i, e, n, h, r) {
        return t[0] = s, t[1] = i, t[2] = e, t[3] = n, t[4] = h, t[5] = r, t;
    }, dt = function(t, s) {
        var i = s[0], e = s[1], n = s[2], h = s[3], r = s[4], s = s[5], o = i * h - e * n;
        return o ? (t[0] = h * (o = 1 / o), t[1] = -e * o, t[2] = -n * o, t[3] = i * o, 
        t[4] = (n * s - h * r) * o, t[5] = (e * r - i * s) * o, t) : null;
    }, pt = function(t) {
        return t[0] * t[3] - t[1] * t[2];
    }, i = function(t, s, i) {
        var e = s[0], n = s[1], h = s[2], r = s[3], o = s[4], s = s[5], a = i[0], l = i[1], u = i[2], c = i[3], f = i[4], i = i[5];
        return t[0] = e * a + h * l, t[1] = n * a + r * l, t[2] = e * u + h * c, 
        t[3] = n * u + r * c, t[4] = e * f + h * i + o, t[5] = n * f + r * i + s, 
        t;
    }, mt = function(t, s, i) {
        var e = s[0], n = s[1], h = s[2], r = s[3], o = s[4], s = s[5], a = Math.sin(i), i = Math.cos(i);
        return t[0] = e * i + h * a, t[1] = n * i + r * a, t[2] = e * -a + h * i, 
        t[3] = n * -a + r * i, t[4] = o, t[5] = s, t;
    }, gt = function(t, s, i) {
        var e = s[0], n = s[1], h = s[2], r = s[3], o = s[4], s = s[5], a = i[0], i = i[1];
        return t[0] = e * a, t[1] = n * a, t[2] = h * i, t[3] = r * i, t[4] = o, 
        t[5] = s, t;
    }, yt = function(t, s, i) {
        var e = s[0], n = s[1], h = s[2], r = s[3], o = s[4], s = s[5], a = i[0], i = i[1];
        return t[0] = e, t[1] = n, t[2] = h, t[3] = r, t[4] = e * a + h * i + o, 
        t[5] = n * a + r * i + s, t;
    }, Mt = function(t, s) {
        var i = Math.sin(s), s = Math.cos(s);
        return t[0] = s, t[1] = i, t[2] = -i, t[3] = s, t[4] = 0, t[5] = 0, t;
    }, wt = function(t, s) {
        return t[0] = s[0], t[1] = 0, t[2] = 0, t[3] = s[1], t[4] = 0, t[5] = 0, 
        t;
    }, xt = function(t, s) {
        return t[0] = 1, t[1] = 0, t[2] = 0, t[3] = 1, t[4] = s[0], t[5] = s[1], 
        t;
    }, St = function(t) {
        return "mat2d(" + t[0] + ", " + t[1] + ", " + t[2] + ", " + t[3] + ", " + t[4] + ", " + t[5] + ")";
    }, Tt = function(t) {
        return Math.hypot(t[0], t[1], t[2], t[3], t[4], t[5], 1);
    }, bt = function(t, s, i) {
        return t[0] = s[0] + i[0], t[1] = s[1] + i[1], t[2] = s[2] + i[2], t[3] = s[3] + i[3], 
        t[4] = s[4] + i[4], t[5] = s[5] + i[5], t;
    }, e = function(t, s, i) {
        return t[0] = s[0] - i[0], t[1] = s[1] - i[1], t[2] = s[2] - i[2], t[3] = s[3] - i[3], 
        t[4] = s[4] - i[4], t[5] = s[5] - i[5], t;
    }, vt = function(t, s, i) {
        return t[0] = s[0] * i, t[1] = s[1] * i, t[2] = s[2] * i, t[3] = s[3] * i, 
        t[4] = s[4] * i, t[5] = s[5] * i, t;
    }, Ct = function(t, s, i, e) {
        return t[0] = s[0] + i[0] * e, t[1] = s[1] + i[1] * e, t[2] = s[2] + i[2] * e, 
        t[3] = s[3] + i[3] * e, t[4] = s[4] + i[4] * e, t[5] = s[5] + i[5] * e, 
        t;
    }, Gt = function(t, s) {
        return t[0] === s[0] && t[1] === s[1] && t[2] === s[2] && t[3] === s[3] && t[4] === s[4] && t[5] === s[5];
    }, It = function(t, s) {
        var i = t[0], e = t[1], n = t[2], h = t[3], r = t[4], t = t[5], o = s[0], a = s[1], l = s[2], u = s[3], c = s[4], s = s[5];
        return Math.abs(i - o) <= Tn * Math.max(1, Math.abs(i), Math.abs(o)) && Math.abs(e - a) <= Tn * Math.max(1, Math.abs(e), Math.abs(a)) && Math.abs(n - l) <= Tn * Math.max(1, Math.abs(n), Math.abs(l)) && Math.abs(h - u) <= Tn * Math.max(1, Math.abs(h), Math.abs(u)) && Math.abs(r - c) <= Tn * Math.max(1, Math.abs(r), Math.abs(c)) && Math.abs(t - s) <= Tn * Math.max(1, Math.abs(t), Math.abs(s));
    }, n = function() {
        var t = new bn(9);
        return bn != Float32Array && (t[1] = 0, t[2] = 0, t[3] = 0, t[5] = 0, t[6] = 0, 
        t[7] = 0), t[0] = 1, t[4] = 1, t[8] = 1, t;
    }, _t = function(t, s) {
        return t[0] = s[0], t[1] = s[1], t[2] = s[2], t[3] = s[4], t[4] = s[5], 
        t[5] = s[6], t[6] = s[8], t[7] = s[9], t[8] = s[10], t;
    }, Et = function(t) {
        var s = new bn(9);
        return s[0] = t[0], s[1] = t[1], s[2] = t[2], s[3] = t[3], s[4] = t[4], 
        s[5] = t[5], s[6] = t[6], s[7] = t[7], s[8] = t[8], s;
    }, Nt = function(t, s) {
        return t[0] = s[0], t[1] = s[1], t[2] = s[2], t[3] = s[3], t[4] = s[4], 
        t[5] = s[5], t[6] = s[6], t[7] = s[7], t[8] = s[8], t;
    }, Dt = function(t, s, i, e, n, h, r, o, a) {
        var l = new bn(9);
        return l[0] = t, l[1] = s, l[2] = i, l[3] = e, l[4] = n, l[5] = h, l[6] = r, 
        l[7] = o, l[8] = a, l;
    }, At = function(t, s, i, e, n, h, r, o, a, l) {
        return t[0] = s, t[1] = i, t[2] = e, t[3] = n, t[4] = h, t[5] = r, t[6] = o, 
        t[7] = a, t[8] = l, t;
    }, Lt = function(t) {
        return t[0] = 1, t[1] = 0, t[2] = 0, t[3] = 0, t[4] = 1, t[5] = 0, t[6] = 0, 
        t[7] = 0, t[8] = 1, t;
    }, Ot = function(t, s) {
        var i, e, n;
        return t === s ? (i = s[1], e = s[2], n = s[5], t[1] = s[3], t[2] = s[6], 
        t[3] = i, t[5] = s[7], t[6] = e, t[7] = n) : (t[0] = s[0], t[1] = s[3], 
        t[2] = s[6], t[3] = s[1], t[4] = s[4], t[5] = s[7], t[6] = s[2], t[7] = s[5], 
        t[8] = s[8]), t;
    }, Pt = function(t, s) {
        var i = s[0], e = s[1], n = s[2], h = s[3], r = s[4], o = s[5], a = s[6], l = s[7], u = (s = s[8]) * r - o * l, c = -s * h + o * a, f = l * h - r * a, d = i * u + e * c + n * f;
        return d ? (t[0] = u * (d = 1 / d), t[1] = (-s * e + n * l) * d, t[2] = (o * e - n * r) * d, 
        t[3] = c * d, t[4] = (s * i - n * a) * d, t[5] = (-o * i + n * h) * d, t[6] = f * d, 
        t[7] = (-l * i + e * a) * d, t[8] = (r * i - e * h) * d, t) : null;
    }, Rt = function(t, s) {
        var i = s[0], e = s[1], n = s[2], h = s[3], r = s[4], o = s[5], a = s[6], l = s[7], s = s[8];
        return t[0] = r * s - o * l, t[1] = n * l - e * s, t[2] = e * o - n * r, 
        t[3] = o * a - h * s, t[4] = i * s - n * a, t[5] = n * h - i * o, t[6] = h * l - r * a, 
        t[7] = e * a - i * l, t[8] = i * r - e * h, t;
    }, kt = function(t) {
        var s = t[0], i = t[3], e = t[4], n = t[5], h = t[6], r = t[7], o = t[8];
        return s * (o * e - n * r) + t[1] * (-o * i + n * h) + t[2] * (r * i - e * h);
    }, h = function(t, s, i) {
        var e = s[0], n = s[1], h = s[2], r = s[3], o = s[4], a = s[5], l = s[6], u = s[7], s = s[8], c = i[0], f = i[1], d = i[2], p = i[3], m = i[4], g = i[5], y = i[6], M = i[7], i = i[8];
        return t[0] = c * e + f * r + d * l, t[1] = c * n + f * o + d * u, t[2] = c * h + f * a + d * s, 
        t[3] = p * e + m * r + g * l, t[4] = p * n + m * o + g * u, t[5] = p * h + m * a + g * s, 
        t[6] = y * e + M * r + i * l, t[7] = y * n + M * o + i * u, t[8] = y * h + M * a + i * s, 
        t;
    }, Ft = function(t, s, i) {
        var e = s[0], n = s[1], h = s[2], r = s[3], o = s[4], a = s[5], l = s[6], u = s[7], s = s[8], c = i[0], i = i[1];
        return t[0] = e, t[1] = n, t[2] = h, t[3] = r, t[4] = o, t[5] = a, t[6] = c * e + i * r + l, 
        t[7] = c * n + i * o + u, t[8] = c * h + i * a + s, t;
    }, jt = function(t, s, i) {
        var e = s[0], n = s[1], h = s[2], r = s[3], o = s[4], a = s[5], l = s[6], u = s[7], s = s[8], c = Math.sin(i), i = Math.cos(i);
        return t[0] = i * e + c * r, t[1] = i * n + c * o, t[2] = i * h + c * a, 
        t[3] = i * r - c * e, t[4] = i * o - c * n, t[5] = i * a - c * h, t[6] = l, 
        t[7] = u, t[8] = s, t;
    }, zt = function(t, s, i) {
        var e = i[0], i = i[1];
        return t[0] = e * s[0], t[1] = e * s[1], t[2] = e * s[2], t[3] = i * s[3], 
        t[4] = i * s[4], t[5] = i * s[5], t[6] = s[6], t[7] = s[7], t[8] = s[8], 
        t;
    }, Bt = function(t, s) {
        return t[0] = 1, t[1] = 0, t[2] = 0, t[3] = 0, t[4] = 1, t[5] = 0, t[6] = s[0], 
        t[7] = s[1], t[8] = 1, t;
    }, Ut = function(t, s) {
        var i = Math.sin(s), s = Math.cos(s);
        return t[0] = s, t[1] = i, t[2] = 0, t[3] = -i, t[4] = s, t[5] = 0, t[6] = 0, 
        t[7] = 0, t[8] = 1, t;
    }, Wt = function(t, s) {
        return t[0] = s[0], t[1] = 0, t[2] = 0, t[3] = 0, t[4] = s[1], t[5] = 0, 
        t[6] = 0, t[7] = 0, t[8] = 1, t;
    }, Qt = function(t, s) {
        return t[0] = s[0], t[1] = s[1], t[2] = 0, t[3] = s[2], t[4] = s[3], t[5] = 0, 
        t[6] = s[4], t[7] = s[5], t[8] = 1, t;
    }, Vt = function(t, s) {
        var i = s[0], e = s[2], n = e + e, i = i * (l = i + i), h = (r = s[1]) * l, r = r * (u = r + r), o = e * l, a = e * u, l = (s = s[3]) * l, u = s * u, s = s * n;
        return t[0] = 1 - r - (e = e * n), t[3] = h - s, t[6] = o + u, t[1] = h + s, 
        t[4] = 1 - i - e, t[7] = a - l, t[2] = o - u, t[5] = a + l, t[8] = 1 - i - r, 
        t;
    }, Jt = function(t, s) {
        var i = s[0], e = s[1], n = s[2], h = s[3], r = s[4], o = s[5], a = s[6], l = s[7], u = s[8], c = s[9], f = s[10], d = s[11], p = s[12], m = s[13], g = s[14], y = i * o - e * r, M = i * a - n * r, w = i * l - h * r, x = e * a - n * o, S = e * l - h * o, T = n * l - h * a, b = u * m - c * p, v = u * g - f * p, C = c * g - f * m;
        return (d = y * (f = f * (s = s[15]) - d * g) - M * (c = c * s - d * m) + w * C + x * (u = u * s - d * p) - S * v + T * b) ? (t[0] = (o * f - a * c + l * C) * (d = 1 / d), 
        t[1] = (a * u - r * f - l * v) * d, t[2] = (r * c - o * u + l * b) * d, 
        t[3] = (n * c - e * f - h * C) * d, t[4] = (i * f - n * u + h * v) * d, 
        t[5] = (e * u - i * c - h * b) * d, t[6] = (m * T - g * S + s * x) * d, 
        t[7] = (g * w - p * T - s * M) * d, t[8] = (p * S - m * w + s * y) * d, 
        t) : null;
    }, Yt = function(t, s, i) {
        return t[0] = 2 / s, t[1] = 0, t[2] = 0, t[3] = 0, t[4] = -2 / i, t[5] = 0, 
        t[6] = -1, t[7] = 1, t[8] = 1, t;
    }, Ht = function(t) {
        return "mat3(" + t[0] + ", " + t[1] + ", " + t[2] + ", " + t[3] + ", " + t[4] + ", " + t[5] + ", " + t[6] + ", " + t[7] + ", " + t[8] + ")";
    }, qt = function(t) {
        return Math.hypot(t[0], t[1], t[2], t[3], t[4], t[5], t[6], t[7], t[8]);
    }, Zt = function(t, s, i) {
        return t[0] = s[0] + i[0], t[1] = s[1] + i[1], t[2] = s[2] + i[2], t[3] = s[3] + i[3], 
        t[4] = s[4] + i[4], t[5] = s[5] + i[5], t[6] = s[6] + i[6], t[7] = s[7] + i[7], 
        t[8] = s[8] + i[8], t;
    }, r = function(t, s, i) {
        return t[0] = s[0] - i[0], t[1] = s[1] - i[1], t[2] = s[2] - i[2], t[3] = s[3] - i[3], 
        t[4] = s[4] - i[4], t[5] = s[5] - i[5], t[6] = s[6] - i[6], t[7] = s[7] - i[7], 
        t[8] = s[8] - i[8], t;
    }, Xt = function(t, s, i) {
        return t[0] = s[0] * i, t[1] = s[1] * i, t[2] = s[2] * i, t[3] = s[3] * i, 
        t[4] = s[4] * i, t[5] = s[5] * i, t[6] = s[6] * i, t[7] = s[7] * i, t[8] = s[8] * i, 
        t;
    }, Kt = function(t, s, i, e) {
        return t[0] = s[0] + i[0] * e, t[1] = s[1] + i[1] * e, t[2] = s[2] + i[2] * e, 
        t[3] = s[3] + i[3] * e, t[4] = s[4] + i[4] * e, t[5] = s[5] + i[5] * e, 
        t[6] = s[6] + i[6] * e, t[7] = s[7] + i[7] * e, t[8] = s[8] + i[8] * e, 
        t;
    }, $t = function(t, s) {
        return t[0] === s[0] && t[1] === s[1] && t[2] === s[2] && t[3] === s[3] && t[4] === s[4] && t[5] === s[5] && t[6] === s[6] && t[7] === s[7] && t[8] === s[8];
    }, ts = function(t, s) {
        var i = t[0], e = t[1], n = t[2], h = t[3], r = t[4], o = t[5], a = t[6], l = t[7], t = t[8], u = s[0], c = s[1], f = s[2], d = s[3], p = s[4], m = s[5], g = s[6], y = s[7], s = s[8];
        return Math.abs(i - u) <= Tn * Math.max(1, Math.abs(i), Math.abs(u)) && Math.abs(e - c) <= Tn * Math.max(1, Math.abs(e), Math.abs(c)) && Math.abs(n - f) <= Tn * Math.max(1, Math.abs(n), Math.abs(f)) && Math.abs(h - d) <= Tn * Math.max(1, Math.abs(h), Math.abs(d)) && Math.abs(r - p) <= Tn * Math.max(1, Math.abs(r), Math.abs(p)) && Math.abs(o - m) <= Tn * Math.max(1, Math.abs(o), Math.abs(m)) && Math.abs(a - g) <= Tn * Math.max(1, Math.abs(a), Math.abs(g)) && Math.abs(l - y) <= Tn * Math.max(1, Math.abs(l), Math.abs(y)) && Math.abs(t - s) <= Tn * Math.max(1, Math.abs(t), Math.abs(s));
    }, ss = function() {
        var t = new bn(16);
        return bn != Float32Array && (t[1] = 0, t[2] = 0, t[3] = 0, t[4] = 0, t[6] = 0, 
        t[7] = 0, t[8] = 0, t[9] = 0, t[11] = 0, t[12] = 0, t[13] = 0, t[14] = 0), 
        t[0] = 1, t[5] = 1, t[10] = 1, t[15] = 1, t;
    }, is = function(t) {
        var s = new bn(16);
        return s[0] = t[0], s[1] = t[1], s[2] = t[2], s[3] = t[3], s[4] = t[4], 
        s[5] = t[5], s[6] = t[6], s[7] = t[7], s[8] = t[8], s[9] = t[9], s[10] = t[10], 
        s[11] = t[11], s[12] = t[12], s[13] = t[13], s[14] = t[14], s[15] = t[15], 
        s;
    }, es = function(t, s) {
        return t[0] = s[0], t[1] = s[1], t[2] = s[2], t[3] = s[3], t[4] = s[4], 
        t[5] = s[5], t[6] = s[6], t[7] = s[7], t[8] = s[8], t[9] = s[9], t[10] = s[10], 
        t[11] = s[11], t[12] = s[12], t[13] = s[13], t[14] = s[14], t[15] = s[15], 
        t;
    }, ns = function(t, s, i, e, n, h, r, o, a, l, u, c, f, d, p, m) {
        var g = new bn(16);
        return g[0] = t, g[1] = s, g[2] = i, g[3] = e, g[4] = n, g[5] = h, g[6] = r, 
        g[7] = o, g[8] = a, g[9] = l, g[10] = u, g[11] = c, g[12] = f, g[13] = d, 
        g[14] = p, g[15] = m, g;
    }, hs = function(t, s, i, e, n, h, r, o, a, l, u, c, f, d, p, m, g) {
        return t[0] = s, t[1] = i, t[2] = e, t[3] = n, t[4] = h, t[5] = r, t[6] = o, 
        t[7] = a, t[8] = l, t[9] = u, t[10] = c, t[11] = f, t[12] = d, t[13] = p, 
        t[14] = m, t[15] = g, t;
    }, p = function(t) {
        return t[0] = 1, t[1] = 0, t[2] = 0, t[3] = 0, t[4] = 0, t[5] = 1, t[6] = 0, 
        t[7] = 0, t[8] = 0, t[9] = 0, t[10] = 1, t[11] = 0, t[12] = 0, t[13] = 0, 
        t[14] = 0, t[15] = 1, t;
    }, rs = function(t, s) {
        var i, e, n, h, r, o;
        return t === s ? (i = s[1], e = s[2], n = s[3], h = s[6], r = s[7], o = s[11], 
        t[1] = s[4], t[2] = s[8], t[3] = s[12], t[4] = i, t[6] = s[9], t[7] = s[13], 
        t[8] = e, t[9] = h, t[11] = s[14], t[12] = n, t[13] = r, t[14] = o) : (t[0] = s[0], 
        t[1] = s[4], t[2] = s[8], t[3] = s[12], t[4] = s[1], t[5] = s[5], t[6] = s[9], 
        t[7] = s[13], t[8] = s[2], t[9] = s[6], t[10] = s[10], t[11] = s[14], t[12] = s[3], 
        t[13] = s[7], t[14] = s[11], t[15] = s[15]), t;
    }, os = function(t, s) {
        var i = s[0], e = s[1], n = s[2], h = s[3], r = s[4], o = s[5], a = s[6], l = s[7], u = s[8], c = s[9], f = s[10], d = s[11], p = s[12], m = s[13], g = s[14], y = i * o - e * r, M = i * a - n * r, w = i * l - h * r, x = e * a - n * o, S = e * l - h * o, T = n * l - h * a, b = u * m - c * p, v = u * g - f * p, C = u * (s = s[15]) - d * p, G = c * g - f * m, I = c * s - d * m, _ = f * s - d * g, E = y * _ - M * I + w * G + x * C - S * v + T * b;
        return E ? (t[0] = (o * _ - a * I + l * G) * (E = 1 / E), t[1] = (n * I - e * _ - h * G) * E, 
        t[2] = (m * T - g * S + s * x) * E, t[3] = (f * S - c * T - d * x) * E, 
        t[4] = (a * C - r * _ - l * v) * E, t[5] = (i * _ - n * C + h * v) * E, 
        t[6] = (g * w - p * T - s * M) * E, t[7] = (u * T - f * w + d * M) * E, 
        t[8] = (r * I - o * C + l * b) * E, t[9] = (e * C - i * I - h * b) * E, 
        t[10] = (p * S - m * w + s * y) * E, t[11] = (c * w - u * S - d * y) * E, 
        t[12] = (o * v - r * G - a * b) * E, t[13] = (i * G - e * v + n * b) * E, 
        t[14] = (m * M - p * x - g * y) * E, t[15] = (u * x - c * M + f * y) * E, 
        t) : null;
    }, as = function(t, s) {
        var i = s[0], e = s[1], n = s[2], h = s[3], r = s[4], o = s[5], a = s[6], l = s[7], u = s[8], c = s[9], f = s[10], d = s[11], p = s[12], m = s[13], g = s[14], y = i * o - e * r, M = i * a - n * r, w = i * l - h * r, x = e * a - n * o, S = e * l - h * o, T = n * l - h * a, b = u * m - c * p, v = u * g - f * p, C = u * (s = s[15]) - d * p, G = c * g - f * m, I = c * s - d * m, _ = f * s - d * g;
        return t[0] = o * _ - a * I + l * G, t[1] = n * I - e * _ - h * G, t[2] = m * T - g * S + s * x, 
        t[3] = f * S - c * T - d * x, t[4] = a * C - r * _ - l * v, t[5] = i * _ - n * C + h * v, 
        t[6] = g * w - p * T - s * M, t[7] = u * T - f * w + d * M, t[8] = r * I - o * C + l * b, 
        t[9] = e * C - i * I - h * b, t[10] = p * S - m * w + s * y, t[11] = c * w - u * S - d * y, 
        t[12] = o * v - r * G - a * b, t[13] = i * G - e * v + n * b, t[14] = m * M - p * x - g * y, 
        t[15] = u * x - c * M + f * y, t;
    }, ls = function(t) {
        var s = t[0], i = t[1], e = t[2], n = t[4], h = t[5], r = t[6], o = t[8], a = t[9], l = t[10], u = t[12], c = t[13], f = t[14], d = s * h - i * n, p = s * r - e * n, m = i * r - e * h, g = o * c - a * u, y = o * f - l * u, M = a * f - l * c;
        return t[7] * (s * M - i * y + e * g) - t[3] * (n * M - h * y + r * g) + t[15] * (o * m - a * p + l * d) - t[11] * (u * m - c * p + f * d);
    }, o = function(t, s, i) {
        var e = s[0], n = s[1], h = s[2], r = s[3], o = s[4], a = s[5], l = s[6], u = s[7], c = s[8], f = s[9], d = s[10], p = s[11], m = s[12], g = s[13], y = s[14], s = s[15], M = i[0], w = i[1], x = i[2], S = i[3];
        return t[0] = M * e + w * o + x * c + S * m, t[1] = M * n + w * a + x * f + S * g, 
        t[2] = M * h + w * l + x * d + S * y, t[3] = M * r + w * u + x * p + S * s, 
        t[4] = (M = i[4]) * e + (w = i[5]) * o + (x = i[6]) * c + (S = i[7]) * m, 
        t[5] = M * n + w * a + x * f + S * g, t[6] = M * h + w * l + x * d + S * y, 
        t[7] = M * r + w * u + x * p + S * s, t[8] = (M = i[8]) * e + (w = i[9]) * o + (x = i[10]) * c + (S = i[11]) * m, 
        t[9] = M * n + w * a + x * f + S * g, t[10] = M * h + w * l + x * d + S * y, 
        t[11] = M * r + w * u + x * p + S * s, t[12] = (M = i[12]) * e + (w = i[13]) * o + (x = i[14]) * c + (S = i[15]) * m, 
        t[13] = M * n + w * a + x * f + S * g, t[14] = M * h + w * l + x * d + S * y, 
        t[15] = M * r + w * u + x * p + S * s, t;
    }, us = function(t, s, i) {
        var e, n, h, r, o, a, l, u, c, f, d, p, m = i[0], g = i[1], i = i[2];
        return s === t ? (t[12] = s[0] * m + s[4] * g + s[8] * i + s[12], t[13] = s[1] * m + s[5] * g + s[9] * i + s[13], 
        t[14] = s[2] * m + s[6] * g + s[10] * i + s[14], t[15] = s[3] * m + s[7] * g + s[11] * i + s[15]) : (e = s[0], 
        n = s[1], h = s[2], r = s[3], o = s[4], a = s[5], l = s[6], u = s[7], c = s[8], 
        f = s[9], d = s[10], p = s[11], t[0] = e, t[1] = n, t[2] = h, t[3] = r, 
        t[4] = o, t[5] = a, t[6] = l, t[7] = u, t[8] = c, t[9] = f, t[10] = d, t[11] = p, 
        t[12] = e * m + o * g + c * i + s[12], t[13] = n * m + a * g + f * i + s[13], 
        t[14] = h * m + l * g + d * i + s[14], t[15] = r * m + u * g + p * i + s[15]), 
        t;
    }, cs = function(t, s, i) {
        var e = i[0], n = i[1], i = i[2];
        return t[0] = s[0] * e, t[1] = s[1] * e, t[2] = s[2] * e, t[3] = s[3] * e, 
        t[4] = s[4] * n, t[5] = s[5] * n, t[6] = s[6] * n, t[7] = s[7] * n, t[8] = s[8] * i, 
        t[9] = s[9] * i, t[10] = s[10] * i, t[11] = s[11] * i, t[12] = s[12], t[13] = s[13], 
        t[14] = s[14], t[15] = s[15], t;
    }, fs = function(t, s, i, e) {
        var n, h, r, o, a, l, u, c, f, d, p, m, g, y, M, w, x, S, T, b, v = e[0], C = e[1], e = e[2], G = Math.hypot(v, C, e);
        return G < Tn ? null : (v *= G = 1 / G, C *= G, e *= G, G = Math.sin(i), 
        i = Math.cos(i), h = s[0], r = s[1], o = s[2], a = s[3], u = s[5], c = s[6], 
        f = s[7], p = s[9], m = s[10], g = s[11], M = v * C * (n = 1 - i) - e * G, 
        w = C * C * n + i, x = e * C * n + v * G, S = v * e * n + C * G, T = C * e * n - v * G, 
        b = e * e * n + i, t[0] = h * (i = v * v * n + i) + (l = s[4]) * (y = C * v * n + e * G) + (d = s[8]) * (e = e * v * n - C * G), 
        t[1] = r * i + u * y + p * e, t[2] = o * i + c * y + m * e, t[3] = a * i + f * y + g * e, 
        t[4] = h * M + l * w + d * x, t[5] = r * M + u * w + p * x, t[6] = o * M + c * w + m * x, 
        t[7] = a * M + f * w + g * x, t[8] = h * S + l * T + d * b, t[9] = r * S + u * T + p * b, 
        t[10] = o * S + c * T + m * b, t[11] = a * S + f * T + g * b, s !== t && (t[12] = s[12], 
        t[13] = s[13], t[14] = s[14], t[15] = s[15]), t);
    }, ds = function(t, s, i) {
        var e = Math.sin(i), i = Math.cos(i), n = s[4], h = s[5], r = s[6], o = s[7], a = s[8], l = s[9], u = s[10], c = s[11];
        return s !== t && (t[0] = s[0], t[1] = s[1], t[2] = s[2], t[3] = s[3], t[12] = s[12], 
        t[13] = s[13], t[14] = s[14], t[15] = s[15]), t[4] = n * i + a * e, t[5] = h * i + l * e, 
        t[6] = r * i + u * e, t[7] = o * i + c * e, t[8] = a * i - n * e, t[9] = l * i - h * e, 
        t[10] = u * i - r * e, t[11] = c * i - o * e, t;
    }, ps = function(t, s, i) {
        var e = Math.sin(i), i = Math.cos(i), n = s[0], h = s[1], r = s[2], o = s[3], a = s[8], l = s[9], u = s[10], c = s[11];
        return s !== t && (t[4] = s[4], t[5] = s[5], t[6] = s[6], t[7] = s[7], t[12] = s[12], 
        t[13] = s[13], t[14] = s[14], t[15] = s[15]), t[0] = n * i - a * e, t[1] = h * i - l * e, 
        t[2] = r * i - u * e, t[3] = o * i - c * e, t[8] = n * e + a * i, t[9] = h * e + l * i, 
        t[10] = r * e + u * i, t[11] = o * e + c * i, t;
    }, ms = function(t, s, i) {
        var e = Math.sin(i), i = Math.cos(i), n = s[0], h = s[1], r = s[2], o = s[3], a = s[4], l = s[5], u = s[6], c = s[7];
        return s !== t && (t[8] = s[8], t[9] = s[9], t[10] = s[10], t[11] = s[11], 
        t[12] = s[12], t[13] = s[13], t[14] = s[14], t[15] = s[15]), t[0] = n * i + a * e, 
        t[1] = h * i + l * e, t[2] = r * i + u * e, t[3] = o * i + c * e, t[4] = a * i - n * e, 
        t[5] = l * i - h * e, t[6] = u * i - r * e, t[7] = c * i - o * e, t;
    }, gs = function(t, s) {
        return t[0] = 1, t[1] = 0, t[2] = 0, t[3] = 0, t[4] = 0, t[5] = 1, t[6] = 0, 
        t[7] = 0, t[8] = 0, t[9] = 0, t[10] = 1, t[11] = 0, t[12] = s[0], t[13] = s[1], 
        t[14] = s[2], t[15] = 1, t;
    }, ys = function(t, s) {
        return t[0] = s[0], t[1] = 0, t[2] = 0, t[3] = 0, t[4] = 0, t[5] = s[1], 
        t[6] = 0, t[7] = 0, t[8] = 0, t[9] = 0, t[10] = s[2], t[11] = 0, t[12] = 0, 
        t[13] = 0, t[14] = 0, t[15] = 1, t;
    }, Ms = function(t, s, i) {
        var e, n = i[0], h = i[1], i = i[2], r = Math.hypot(n, h, i);
        return r < Tn ? null : (n *= r = 1 / r, h *= r, i *= r, r = Math.sin(s), 
        s = Math.cos(s), t[0] = n * n * (e = 1 - s) + s, t[1] = h * n * e + i * r, 
        t[2] = i * n * e - h * r, t[3] = 0, t[4] = n * h * e - i * r, t[5] = h * h * e + s, 
        t[6] = i * h * e + n * r, t[7] = 0, t[8] = n * i * e + h * r, t[9] = h * i * e - n * r, 
        t[10] = i * i * e + s, t[11] = 0, t[12] = 0, t[13] = 0, t[14] = 0, t[15] = 1, 
        t);
    }, ws = function(t, s) {
        var i = Math.sin(s), s = Math.cos(s);
        return t[0] = 1, t[1] = 0, t[2] = 0, t[3] = 0, t[4] = 0, t[5] = s, t[6] = i, 
        t[7] = 0, t[8] = 0, t[9] = -i, t[10] = s, t[11] = 0, t[12] = 0, t[13] = 0, 
        t[14] = 0, t[15] = 1, t;
    }, xs = function(t, s) {
        var i = Math.sin(s), s = Math.cos(s);
        return t[0] = s, t[1] = 0, t[2] = -i, t[3] = 0, t[4] = 0, t[5] = 1, t[6] = 0, 
        t[7] = 0, t[8] = i, t[9] = 0, t[10] = s, t[11] = 0, t[12] = 0, t[13] = 0, 
        t[14] = 0, t[15] = 1, t;
    }, Ss = function(t, s) {
        var i = Math.sin(s), s = Math.cos(s);
        return t[0] = s, t[1] = i, t[2] = 0, t[3] = 0, t[4] = -i, t[5] = s, t[6] = 0, 
        t[7] = 0, t[8] = 0, t[9] = 0, t[10] = 1, t[11] = 0, t[12] = 0, t[13] = 0, 
        t[14] = 0, t[15] = 1, t;
    }, f = function(t, s, i) {
        var e = s[0], n = s[2], h = n + n, r = e * (u = e + e), o = e * (c = (l = s[1]) + l), e = e * h, a = l * c, l = l * h, u = (s = s[3]) * u, c = s * c, s = s * h;
        return t[0] = 1 - (a + (n = n * h)), t[1] = o + s, t[2] = e - c, t[3] = 0, 
        t[4] = o - s, t[5] = 1 - (r + n), t[6] = l + u, t[7] = 0, t[8] = e + c, 
        t[9] = l - u, t[10] = 1 - (r + a), t[11] = 0, t[12] = i[0], t[13] = i[1], 
        t[14] = i[2], t[15] = 1, t;
    }, Ts = function(t, s) {
        var i = new bn(3), e = -s[0], n = -s[1], h = -s[2], r = s[3], o = s[4], a = s[5], l = s[6], u = s[7], c = e * e + n * n + h * h + r * r;
        return 0 < c ? (i[0] = 2 * (o * r + u * e + a * h - l * n) / c, i[1] = 2 * (a * r + u * n + l * e - o * h) / c, 
        i[2] = 2 * (l * r + u * h + o * n - a * e) / c) : (i[0] = 2 * (o * r + u * e + a * h - l * n), 
        i[1] = 2 * (a * r + u * n + l * e - o * h), i[2] = 2 * (l * r + u * h + o * n - a * e)), 
        f(t, s, i), t;
    }, a = function(t, s) {
        return t[0] = s[12], t[1] = s[13], t[2] = s[14], t;
    }, d = function(t, s) {
        var i = s[0], e = s[4], n = s[5], h = s[6], r = s[8], o = s[9], a = s[10];
        return t[0] = Math.hypot(i, s[1], s[2]), t[1] = Math.hypot(e, n, h), t[2] = Math.hypot(r, o, a), 
        t;
    }, l = function(t, s) {
        var i = new bn(3), e = (d(i, s), 1 / i[0]), n = s[0] * e, h = s[1] * (u = 1 / i[1]), r = s[2] * (i = 1 / i[2]), o = s[4] * e, a = s[5] * u, l = s[6] * i, e = s[8] * e, u = s[9] * u, c = 0;
        return 0 < (i = n + a + (s = s[10] * i)) ? (c = 2 * Math.sqrt(1 + i), t[3] = .25 * c, 
        t[0] = (l - u) / c, t[1] = (e - r) / c, t[2] = (h - o) / c) : a < n && s < n ? (c = 2 * Math.sqrt(1 + n - a - s), 
        t[3] = (l - u) / c, t[0] = .25 * c, t[1] = (h + o) / c, t[2] = (e + r) / c) : s < a ? (c = 2 * Math.sqrt(1 + a - n - s), 
        t[3] = (e - r) / c, t[0] = (h + o) / c, t[1] = .25 * c, t[2] = (l + u) / c) : (c = 2 * Math.sqrt(1 + s - n - a), 
        t[3] = (h - o) / c, t[0] = (e + r) / c, t[1] = (l + u) / c, t[2] = .25 * c), 
        t;
    }, bs = function(t, s, i, e) {
        s[0] = e[12], s[1] = e[13], s[2] = e[14];
        var s = e[0], n = e[1], h = e[2], r = e[4], o = e[5], a = e[6], l = e[8], u = e[9], e = e[10], c = (i[0] = Math.hypot(s, n, h), 
        i[1] = Math.hypot(r, o, a), i[2] = Math.hypot(l, u, e), 1 / i[0]), f = 1 / i[1], s = s * c, n = n * f, h = h * (i = 1 / i[2]), r = r * c, a = a * i, l = l * c, c = u * f, u = e * i, e = 0;
        return 0 < (f = s + (o = o * f) + u) ? (e = 2 * Math.sqrt(1 + f), t[3] = .25 * e, 
        t[0] = (a - c) / e, t[1] = (l - h) / e, t[2] = (n - r) / e) : o < s && u < s ? (e = 2 * Math.sqrt(1 + s - o - u), 
        t[3] = (a - c) / e, t[0] = .25 * e, t[1] = (n + r) / e, t[2] = (l + h) / e) : u < o ? (e = 2 * Math.sqrt(1 + o - s - u), 
        t[3] = (l - h) / e, t[0] = (n + r) / e, t[1] = .25 * e, t[2] = (a + c) / e) : (e = 2 * Math.sqrt(1 + u - s - o), 
        t[3] = (n - r) / e, t[0] = (l + h) / e, t[1] = (a + c) / e, t[2] = .25 * e), 
        t;
    }, vs = function(t, s, i, e) {
        var n = (r = s[0]) * (u = r + r), h = r * (c = (a = s[1]) + a), r = r * (f = (l = s[2]) + l), o = a * c, a = a * f, l = l * f, u = (s = s[3]) * u, c = s * c, s = s * f, f = e[0], d = e[1], e = e[2];
        return t[0] = (1 - (o + l)) * f, t[1] = (h + s) * f, t[2] = (r - c) * f, 
        t[3] = 0, t[4] = (h - s) * d, t[5] = (1 - (n + l)) * d, t[6] = (a + u) * d, 
        t[7] = 0, t[8] = (r + c) * e, t[9] = (a - u) * e, t[10] = (1 - (n + o)) * e, 
        t[11] = 0, t[12] = i[0], t[13] = i[1], t[14] = i[2], t[15] = 1, t;
    }, Cs = function(t, s, i, e, n) {
        var h = (o = s[0]) * (c = o + o), r = o * (f = (l = s[1]) + l), o = o * (d = (u = s[2]) + u), a = l * f, l = l * d, u = u * d, c = (s = s[3]) * c, f = s * f, s = s * d, d = e[0], p = e[1], e = e[2], m = n[0], g = n[1], n = n[2], y = (1 - (a + u)) * d, M = (r + s) * d, d = (o - f) * d, r = (r - s) * p, s = (1 - (h + u)) * p, u = (l + c) * p, p = (o + f) * e, o = (l - c) * e, f = (1 - (h + a)) * e;
        return t[0] = y, t[1] = M, t[2] = d, t[3] = 0, t[4] = r, t[5] = s, t[6] = u, 
        t[7] = 0, t[8] = p, t[9] = o, t[10] = f, t[11] = 0, t[12] = i[0] + m - (y * m + r * g + p * n), 
        t[13] = i[1] + g - (M * m + s * g + o * n), t[14] = i[2] + n - (d * m + u * g + f * n), 
        t[15] = 1, t;
    }, Gs = function(t, s) {
        var i = s[0], e = s[2], n = e + e, i = i * (l = i + i), h = (r = s[1]) * l, r = r * (u = r + r), o = e * l, a = e * u, l = (s = s[3]) * l, u = s * u, s = s * n;
        return t[0] = 1 - r - (e = e * n), t[1] = h + s, t[2] = o - u, t[3] = 0, 
        t[4] = h - s, t[5] = 1 - i - e, t[6] = a + l, t[7] = 0, t[8] = o + u, t[9] = a - l, 
        t[10] = 1 - i - r, t[11] = 0, t[12] = 0, t[13] = 0, t[14] = 0, t[15] = 1, 
        t;
    }, Is = function(t, s, i, e, n, h, r) {
        var o = 1 / (i - s), a = 1 / (n - e), l = 1 / (h - r);
        return t[0] = 2 * h * o, t[1] = 0, t[2] = 0, t[3] = 0, t[4] = 0, t[5] = 2 * h * a, 
        t[6] = 0, t[7] = 0, t[8] = (i + s) * o, t[9] = (n + e) * a, t[10] = (r + h) * l, 
        t[11] = -1, t[12] = 0, t[13] = 0, t[14] = r * h * 2 * l, t[15] = 0, t;
    }, u = function(t, s, i, e, n) {
        return s = 1 / Math.tan(s / 2), t[0] = s / i, t[1] = 0, t[2] = 0, t[3] = 0, 
        t[4] = 0, t[5] = s, t[6] = 0, t[7] = 0, t[8] = 0, t[9] = 0, t[11] = -1, 
        t[12] = 0, t[13] = 0, t[15] = 0, null != n && n !== 1 / 0 ? (t[10] = (n + e) * (i = 1 / (e - n)), 
        t[14] = 2 * n * e * i) : (t[10] = -1, t[14] = -2 * e), t;
    }, _s = function(t, s, i, e, n) {
        return s = 1 / Math.tan(s / 2), t[0] = s / i, t[1] = 0, t[2] = 0, t[3] = 0, 
        t[4] = 0, t[5] = s, t[6] = 0, t[7] = 0, t[8] = 0, t[9] = 0, t[11] = -1, 
        t[12] = 0, t[13] = 0, t[15] = 0, null != n && n !== 1 / 0 ? (t[10] = n * (i = 1 / (e - n)), 
        t[14] = n * e * i) : (t[10] = -1, t[14] = -e), t;
    }, Es = function(t, s, i, e) {
        var n = Math.tan(s.upDegrees * Math.PI / 180), h = Math.tan(s.downDegrees * Math.PI / 180), r = Math.tan(s.leftDegrees * Math.PI / 180), o = 2 / (r + (s = Math.tan(s.rightDegrees * Math.PI / 180))), a = 2 / (n + h);
        return t[0] = o, t[1] = 0, t[2] = 0, t[3] = 0, t[4] = 0, t[5] = a, t[6] = 0, 
        t[7] = 0, t[8] = -(r - s) * o * .5, t[9] = (n - h) * a * .5, t[10] = e / (i - e), 
        t[11] = -1, t[12] = 0, t[13] = 0, t[14] = e * i / (i - e), t[15] = 0, t;
    }, c = function(t, s, i, e, n, h, r) {
        var o = 1 / (s - i), a = 1 / (e - n), l = 1 / (h - r);
        return t[0] = -2 * o, t[1] = 0, t[2] = 0, t[3] = 0, t[4] = 0, t[5] = -2 * a, 
        t[6] = 0, t[7] = 0, t[8] = 0, t[9] = 0, t[10] = 2 * l, t[11] = 0, t[12] = (s + i) * o, 
        t[13] = (n + e) * a, t[14] = (r + h) * l, t[15] = 1, t;
    }, Ns = function(t, s, i, e, n, h, r) {
        var o = 1 / (s - i), a = 1 / (e - n), r = 1 / (h - r);
        return t[0] = -2 * o, t[1] = 0, t[2] = 0, t[3] = 0, t[4] = 0, t[5] = -2 * a, 
        t[6] = 0, t[7] = 0, t[8] = 0, t[9] = 0, t[10] = r, t[11] = 0, t[12] = (s + i) * o, 
        t[13] = (n + e) * a, t[14] = h * r, t[15] = 1, t;
    }, Ds = function(t, s, i, e) {
        var n, h, r, o, a = s[0], l = s[1], s = s[2], u = e[0], c = e[1], e = e[2], f = i[0], d = i[1], i = i[2];
        return Math.abs(a - f) < Tn && Math.abs(l - d) < Tn && Math.abs(s - i) < Tn ? p(t) : (f = a - f, 
        d = l - d, i = s - i, n = c * (i *= o = 1 / Math.hypot(f, d, i)) - e * (d *= o), 
        e = e * (f *= o) - u * i, u = u * d - c * f, (o = Math.hypot(n, e, u)) ? (n *= o = 1 / o, 
        e *= o, u *= o) : u = e = n = 0, c = d * u - i * e, h = i * n - f * u, r = f * e - d * n, 
        (o = Math.hypot(c, h, r)) ? (c *= o = 1 / o, h *= o, r *= o) : r = h = c = 0, 
        t[0] = n, t[1] = c, t[2] = f, t[3] = 0, t[4] = e, t[5] = h, t[6] = d, t[7] = 0, 
        t[8] = u, t[9] = r, t[10] = i, t[11] = 0, t[12] = -(n * a + e * l + u * s), 
        t[13] = -(c * a + h * l + r * s), t[14] = -(f * a + d * l + i * s), t[15] = 1, 
        t);
    }, As = function(t, s, i, e) {
        var n = s[0], h = s[1], s = s[2], r = e[0], o = e[1], e = e[2], a = n - i[0], l = h - i[1], u = a * a + l * l + (i = s - i[2]) * i, c = (0 < u && (a *= u = 1 / Math.sqrt(u), 
        l *= u, i *= u), o * i - e * l);
        return 0 < (u = c * c + (e = e * a - r * i) * e + (r = r * l - o * a) * r) && (c *= u = 1 / Math.sqrt(u), 
        e *= u, r *= u), t[0] = c, t[1] = e, t[2] = r, t[3] = 0, t[4] = l * r - i * e, 
        t[5] = i * c - a * r, t[6] = a * e - l * c, t[7] = 0, t[8] = a, t[9] = l, 
        t[10] = i, t[11] = 0, t[12] = n, t[13] = h, t[14] = s, t[15] = 1, t;
    }, Ls = function(t) {
        return "mat4(" + t[0] + ", " + t[1] + ", " + t[2] + ", " + t[3] + ", " + t[4] + ", " + t[5] + ", " + t[6] + ", " + t[7] + ", " + t[8] + ", " + t[9] + ", " + t[10] + ", " + t[11] + ", " + t[12] + ", " + t[13] + ", " + t[14] + ", " + t[15] + ")";
    }, Os = function(t) {
        return Math.hypot(t[0], t[1], t[2], t[3], t[4], t[5], t[6], t[7], t[8], t[9], t[10], t[11], t[12], t[13], t[14], t[15]);
    }, Ps = function(t, s, i) {
        return t[0] = s[0] + i[0], t[1] = s[1] + i[1], t[2] = s[2] + i[2], t[3] = s[3] + i[3], 
        t[4] = s[4] + i[4], t[5] = s[5] + i[5], t[6] = s[6] + i[6], t[7] = s[7] + i[7], 
        t[8] = s[8] + i[8], t[9] = s[9] + i[9], t[10] = s[10] + i[10], t[11] = s[11] + i[11], 
        t[12] = s[12] + i[12], t[13] = s[13] + i[13], t[14] = s[14] + i[14], t[15] = s[15] + i[15], 
        t;
    }, Rs = function(t, s, i) {
        return t[0] = s[0] - i[0], t[1] = s[1] - i[1], t[2] = s[2] - i[2], t[3] = s[3] - i[3], 
        t[4] = s[4] - i[4], t[5] = s[5] - i[5], t[6] = s[6] - i[6], t[7] = s[7] - i[7], 
        t[8] = s[8] - i[8], t[9] = s[9] - i[9], t[10] = s[10] - i[10], t[11] = s[11] - i[11], 
        t[12] = s[12] - i[12], t[13] = s[13] - i[13], t[14] = s[14] - i[14], t[15] = s[15] - i[15], 
        t;
    }, ks = function(t, s, i) {
        return t[0] = s[0] * i, t[1] = s[1] * i, t[2] = s[2] * i, t[3] = s[3] * i, 
        t[4] = s[4] * i, t[5] = s[5] * i, t[6] = s[6] * i, t[7] = s[7] * i, t[8] = s[8] * i, 
        t[9] = s[9] * i, t[10] = s[10] * i, t[11] = s[11] * i, t[12] = s[12] * i, 
        t[13] = s[13] * i, t[14] = s[14] * i, t[15] = s[15] * i, t;
    }, Fs = function(t, s, i, e) {
        return t[0] = s[0] + i[0] * e, t[1] = s[1] + i[1] * e, t[2] = s[2] + i[2] * e, 
        t[3] = s[3] + i[3] * e, t[4] = s[4] + i[4] * e, t[5] = s[5] + i[5] * e, 
        t[6] = s[6] + i[6] * e, t[7] = s[7] + i[7] * e, t[8] = s[8] + i[8] * e, 
        t[9] = s[9] + i[9] * e, t[10] = s[10] + i[10] * e, t[11] = s[11] + i[11] * e, 
        t[12] = s[12] + i[12] * e, t[13] = s[13] + i[13] * e, t[14] = s[14] + i[14] * e, 
        t[15] = s[15] + i[15] * e, t;
    }, js = function(t, s) {
        return t[0] === s[0] && t[1] === s[1] && t[2] === s[2] && t[3] === s[3] && t[4] === s[4] && t[5] === s[5] && t[6] === s[6] && t[7] === s[7] && t[8] === s[8] && t[9] === s[9] && t[10] === s[10] && t[11] === s[11] && t[12] === s[12] && t[13] === s[13] && t[14] === s[14] && t[15] === s[15];
    }, zs = function(t, s) {
        var i = t[0], e = t[1], n = t[2], h = t[3], r = t[4], o = t[5], a = t[6], l = t[7], u = t[8], c = t[9], f = t[10], d = t[11], p = t[12], m = t[13], g = t[14], t = t[15], y = s[0], M = s[1], w = s[2], x = s[3], S = s[4], T = s[5], b = s[6], v = s[7], C = s[8], G = s[9], I = s[10], _ = s[11], E = s[12], N = s[13], D = s[14], s = s[15];
        return Math.abs(i - y) <= Tn * Math.max(1, Math.abs(i), Math.abs(y)) && Math.abs(e - M) <= Tn * Math.max(1, Math.abs(e), Math.abs(M)) && Math.abs(n - w) <= Tn * Math.max(1, Math.abs(n), Math.abs(w)) && Math.abs(h - x) <= Tn * Math.max(1, Math.abs(h), Math.abs(x)) && Math.abs(r - S) <= Tn * Math.max(1, Math.abs(r), Math.abs(S)) && Math.abs(o - T) <= Tn * Math.max(1, Math.abs(o), Math.abs(T)) && Math.abs(a - b) <= Tn * Math.max(1, Math.abs(a), Math.abs(b)) && Math.abs(l - v) <= Tn * Math.max(1, Math.abs(l), Math.abs(v)) && Math.abs(u - C) <= Tn * Math.max(1, Math.abs(u), Math.abs(C)) && Math.abs(c - G) <= Tn * Math.max(1, Math.abs(c), Math.abs(G)) && Math.abs(f - I) <= Tn * Math.max(1, Math.abs(f), Math.abs(I)) && Math.abs(d - _) <= Tn * Math.max(1, Math.abs(d), Math.abs(_)) && Math.abs(p - E) <= Tn * Math.max(1, Math.abs(p), Math.abs(E)) && Math.abs(m - N) <= Tn * Math.max(1, Math.abs(m), Math.abs(N)) && Math.abs(g - D) <= Tn * Math.max(1, Math.abs(g), Math.abs(D)) && Math.abs(t - s) <= Tn * Math.max(1, Math.abs(t), Math.abs(s));
    }, m = function() {
        var t = new bn(3);
        return bn != Float32Array && (t[0] = 0, t[1] = 0, t[2] = 0), t;
    }, Bs = function(t) {
        var s = new bn(3);
        return s[0] = t[0], s[1] = t[1], s[2] = t[2], s;
    }, Us = function(t) {
        var s = t[0];
        return Math.hypot(s, t[1], t[2]);
    }, g = function(t, s, i) {
        var e = new bn(3);
        return e[0] = t, e[1] = s, e[2] = i, e;
    }, Ws = function(t, s) {
        return t[0] = s[0], t[1] = s[1], t[2] = s[2], t;
    }, Qs = function(t, s, i, e) {
        return t[0] = s, t[1] = i, t[2] = e, t;
    }, Vs = function(t, s, i) {
        return t[0] = s[0] + i[0], t[1] = s[1] + i[1], t[2] = s[2] + i[2], t;
    }, Js = function(t, s, i) {
        return t[0] = s[0] - i[0], t[1] = s[1] - i[1], t[2] = s[2] - i[2], t;
    }, Ys = function(t, s, i) {
        return t[0] = s[0] * i[0], t[1] = s[1] * i[1], t[2] = s[2] * i[2], t;
    }, Hs = function(t, s, i) {
        return t[0] = s[0] / i[0], t[1] = s[1] / i[1], t[2] = s[2] / i[2], t;
    }, qs = function(t, s) {
        return t[0] = Math.ceil(s[0]), t[1] = Math.ceil(s[1]), t[2] = Math.ceil(s[2]), 
        t;
    }, Zs = function(t, s) {
        return t[0] = Math.floor(s[0]), t[1] = Math.floor(s[1]), t[2] = Math.floor(s[2]), 
        t;
    }, Xs = function(t, s, i) {
        return t[0] = Math.min(s[0], i[0]), t[1] = Math.min(s[1], i[1]), t[2] = Math.min(s[2], i[2]), 
        t;
    }, Ks = function(t, s, i) {
        return t[0] = Math.max(s[0], i[0]), t[1] = Math.max(s[1], i[1]), t[2] = Math.max(s[2], i[2]), 
        t;
    }, $s = function(t, s) {
        return t[0] = Math.round(s[0]), t[1] = Math.round(s[1]), t[2] = Math.round(s[2]), 
        t;
    }, ti = function(t, s, i) {
        return t[0] = s[0] * i, t[1] = s[1] * i, t[2] = s[2] * i, t;
    }, si = function(t, s, i, e) {
        return t[0] = s[0] + i[0] * e, t[1] = s[1] + i[1] * e, t[2] = s[2] + i[2] * e, 
        t;
    }, ii = function(t, s) {
        var i = s[0] - t[0];
        return Math.hypot(i, s[1] - t[1], s[2] - t[2]);
    }, ei = function(t, s) {
        var i = s[0] - t[0], e = s[1] - t[1];
        return i * i + e * e + (s = s[2] - t[2]) * s;
    }, ni = function(t) {
        var s = t[0], i = t[1];
        return s * s + i * i + (t = t[2]) * t;
    }, hi = function(t, s) {
        return t[0] = -s[0], t[1] = -s[1], t[2] = -s[2], t;
    }, ri = function(t, s) {
        return t[0] = 1 / s[0], t[1] = 1 / s[1], t[2] = 1 / s[2], t;
    }, y = function(t, s) {
        var i = s[0], e = s[1], n = s[2];
        return 0 < (i = i * i + e * e + n * n) && (i = 1 / Math.sqrt(i)), t[0] = s[0] * i, 
        t[1] = s[1] * i, t[2] = s[2] * i, t;
    }, M = function(t, s) {
        return t[0] * s[0] + t[1] * s[1] + t[2] * s[2];
    }, w = function(t, s, i) {
        var e = s[0], n = s[1], s = s[2], h = i[0], r = i[1], i = i[2];
        return t[0] = n * i - s * r, t[1] = s * h - e * i, t[2] = e * r - n * h, 
        t;
    }, oi = function(t, s, i, e) {
        var n = s[0], h = s[1], s = s[2];
        return t[0] = n + e * (i[0] - n), t[1] = h + e * (i[1] - h), t[2] = s + e * (i[2] - s), 
        t;
    }, ai = function(t, s, i, e) {
        var n = Math.acos(Math.min(Math.max(M(s, i), -1), 1)), h = Math.sin(n), r = Math.sin((1 - e) * n) / h, e = Math.sin(e * n) / h;
        return t[0] = r * s[0] + e * i[0], t[1] = r * s[1] + e * i[1], t[2] = r * s[2] + e * i[2], 
        t;
    }, li = function(t, s, i, e, n, h) {
        var r = h * h, o = r * (2 * h - 3) + 1, a = r * (h - 2) + h, l = r * (h - 1);
        return t[0] = s[0] * o + i[0] * a + e[0] * l + n[0] * (r = r * (3 - 2 * h)), 
        t[1] = s[1] * o + i[1] * a + e[1] * l + n[1] * r, t[2] = s[2] * o + i[2] * a + e[2] * l + n[2] * r, 
        t;
    }, ui = function(t, s, i, e, n, h) {
        var r = 1 - h, o = r * r, a = h * h, l = o * r;
        return t[0] = s[0] * l + i[0] * (o = 3 * h * o) + e[0] * (r = 3 * a * r) + n[0] * (a = a * h), 
        t[1] = s[1] * l + i[1] * o + e[1] * r + n[1] * a, t[2] = s[2] * l + i[2] * o + e[2] * r + n[2] * a, 
        t;
    }, ci = function(t, s) {
        s = s || 1;
        var i = 2 * Pn() * Math.PI, e = 2 * Pn() - 1, n = Math.sqrt(1 - e * e) * s;
        return t[0] = Math.cos(i) * n, t[1] = Math.sin(i) * n, t[2] = e * s, t;
    }, fi = function(t, s, i) {
        var e = s[0], n = s[1], s = s[2], h = i[3] * e + i[7] * n + i[11] * s + i[15];
        return t[0] = (i[0] * e + i[4] * n + i[8] * s + i[12]) / (h = h || 1), t[1] = (i[1] * e + i[5] * n + i[9] * s + i[13]) / h, 
        t[2] = (i[2] * e + i[6] * n + i[10] * s + i[14]) / h, t;
    }, di = function(t, s, i) {
        var e = s[0], n = s[1], s = s[2];
        return t[0] = e * i[0] + n * i[3] + s * i[6], t[1] = e * i[1] + n * i[4] + s * i[7], 
        t[2] = e * i[2] + n * i[5] + s * i[8], t;
    }, pi = function(t, s, i) {
        var e = i[0], n = i[1], h = s[0], r = s[1], o = n * (s = s[2]) - (c = i[2]) * r, a = c * h - e * s, l = e * r - n * h, u = n * l - c * a, c = c * o - e * l, e = e * a - n * o;
        return a *= n = 2 * i[3], l *= n, c *= 2, e *= 2, t[0] = h + (o *= n) + (u *= 2), 
        t[1] = r + a + c, t[2] = s + l + e, t;
    }, mi = function(t, s, i, e) {
        var n = [], h = [];
        return n[0] = s[0] - i[0], n[1] = s[1] - i[1], n[2] = s[2] - i[2], h[0] = n[0], 
        h[1] = n[1] * Math.cos(e) - n[2] * Math.sin(e), h[2] = n[1] * Math.sin(e) + n[2] * Math.cos(e), 
        t[0] = h[0] + i[0], t[1] = h[1] + i[1], t[2] = h[2] + i[2], t;
    }, gi = function(t, s, i, e) {
        var n = [], h = [];
        return n[0] = s[0] - i[0], n[1] = s[1] - i[1], n[2] = s[2] - i[2], h[0] = n[2] * Math.sin(e) + n[0] * Math.cos(e), 
        h[1] = n[1], h[2] = n[2] * Math.cos(e) - n[0] * Math.sin(e), t[0] = h[0] + i[0], 
        t[1] = h[1] + i[1], t[2] = h[2] + i[2], t;
    }, yi = function(t, s, i, e) {
        var n = [], h = [];
        return n[0] = s[0] - i[0], n[1] = s[1] - i[1], n[2] = s[2] - i[2], h[0] = n[0] * Math.cos(e) - n[1] * Math.sin(e), 
        h[1] = n[0] * Math.sin(e) + n[1] * Math.cos(e), h[2] = n[2], t[0] = h[0] + i[0], 
        t[1] = h[1] + i[1], t[2] = h[2] + i[2], t;
    }, Mi = function(t, s) {
        var i = t[0], e = t[1], n = t[2], h = s[0], r = s[1], o = s[2], e = (i = Math.sqrt((i * i + e * e + n * n) * (h * h + r * r + o * o))) && M(t, s) / i;
        return Math.acos(Math.min(Math.max(e, -1), 1));
    }, wi = function(t) {
        return t[0] = 0, t[1] = 0, t[2] = 0, t;
    }, xi = function(t) {
        return "vec3(" + t[0] + ", " + t[1] + ", " + t[2] + ")";
    }, Si = function(t, s) {
        return t[0] === s[0] && t[1] === s[1] && t[2] === s[2];
    }, Ti = function(t, s) {
        var i = t[0], e = t[1], t = t[2], n = s[0], h = s[1], s = s[2];
        return Math.abs(i - n) <= Tn * Math.max(1, Math.abs(i), Math.abs(n)) && Math.abs(e - h) <= Tn * Math.max(1, Math.abs(e), Math.abs(h)) && Math.abs(t - s) <= Tn * Math.max(1, Math.abs(t), Math.abs(s));
    }, x = function() {
        var t = new bn(4);
        return bn != Float32Array && (t[0] = 0, t[1] = 0, t[2] = 0, t[3] = 0), t;
    }, bi = function(t) {
        var s = new bn(4);
        return s[0] = t[0], s[1] = t[1], s[2] = t[2], s[3] = t[3], s;
    }, vi = function(t, s, i, e) {
        var n = new bn(4);
        return n[0] = t, n[1] = s, n[2] = i, n[3] = e, n;
    }, Ci = function(t, s) {
        return t[0] = s[0], t[1] = s[1], t[2] = s[2], t[3] = s[3], t;
    }, Gi = function(t, s, i, e, n) {
        return t[0] = s, t[1] = i, t[2] = e, t[3] = n, t;
    }, Ii = function(t, s, i) {
        return t[0] = s[0] + i[0], t[1] = s[1] + i[1], t[2] = s[2] + i[2], t[3] = s[3] + i[3], 
        t;
    }, _i = function(t, s, i) {
        return t[0] = s[0] - i[0], t[1] = s[1] - i[1], t[2] = s[2] - i[2], t[3] = s[3] - i[3], 
        t;
    }, Ei = function(t, s, i) {
        return t[0] = s[0] * i[0], t[1] = s[1] * i[1], t[2] = s[2] * i[2], t[3] = s[3] * i[3], 
        t;
    }, Ni = function(t, s, i) {
        return t[0] = s[0] / i[0], t[1] = s[1] / i[1], t[2] = s[2] / i[2], t[3] = s[3] / i[3], 
        t;
    }, Di = function(t, s) {
        return t[0] = Math.ceil(s[0]), t[1] = Math.ceil(s[1]), t[2] = Math.ceil(s[2]), 
        t[3] = Math.ceil(s[3]), t;
    }, Ai = function(t, s) {
        return t[0] = Math.floor(s[0]), t[1] = Math.floor(s[1]), t[2] = Math.floor(s[2]), 
        t[3] = Math.floor(s[3]), t;
    }, Li = function(t, s, i) {
        return t[0] = Math.min(s[0], i[0]), t[1] = Math.min(s[1], i[1]), t[2] = Math.min(s[2], i[2]), 
        t[3] = Math.min(s[3], i[3]), t;
    }, Oi = function(t, s, i) {
        return t[0] = Math.max(s[0], i[0]), t[1] = Math.max(s[1], i[1]), t[2] = Math.max(s[2], i[2]), 
        t[3] = Math.max(s[3], i[3]), t;
    }, Pi = function(t, s) {
        return t[0] = Math.round(s[0]), t[1] = Math.round(s[1]), t[2] = Math.round(s[2]), 
        t[3] = Math.round(s[3]), t;
    }, Ri = function(t, s, i) {
        return t[0] = s[0] * i, t[1] = s[1] * i, t[2] = s[2] * i, t[3] = s[3] * i, 
        t;
    }, ki = function(t, s, i, e) {
        return t[0] = s[0] + i[0] * e, t[1] = s[1] + i[1] * e, t[2] = s[2] + i[2] * e, 
        t[3] = s[3] + i[3] * e, t;
    }, Fi = function(t, s) {
        var i = s[0] - t[0];
        return Math.hypot(i, s[1] - t[1], s[2] - t[2], s[3] - t[3]);
    }, ji = function(t, s) {
        var i = s[0] - t[0], e = s[1] - t[1], n = s[2] - t[2];
        return i * i + e * e + n * n + (s = s[3] - t[3]) * s;
    }, S = function(t) {
        var s = t[0];
        return Math.hypot(s, t[1], t[2], t[3]);
    }, T = function(t) {
        var s = t[0], i = t[1], e = t[2];
        return s * s + i * i + e * e + (t = t[3]) * t;
    }, zi = function(t, s) {
        return t[0] = -s[0], t[1] = -s[1], t[2] = -s[2], t[3] = -s[3], t;
    }, Bi = function(t, s) {
        return t[0] = 1 / s[0], t[1] = 1 / s[1], t[2] = 1 / s[2], t[3] = 1 / s[3], 
        t;
    }, Ui = function(t, s) {
        var i = s[0], e = s[1], n = s[2], h = i * i + e * e + n * n + (s = s[3]) * s;
        return 0 < h && (h = 1 / Math.sqrt(h)), t[0] = i * h, t[1] = e * h, t[2] = n * h, 
        t[3] = s * h, t;
    }, b = function(t, s) {
        return t[0] * s[0] + t[1] * s[1] + t[2] * s[2] + t[3] * s[3];
    }, Wi = function(t, s, i, e) {
        var n = i[0] * e[1] - i[1] * e[0], h = i[0] * e[2] - i[2] * e[0], r = i[0] * e[3] - i[3] * e[0], o = i[1] * e[2] - i[2] * e[1], a = i[1] * e[3] - i[3] * e[1], i = i[2] * e[3] - i[3] * e[2], e = s[0], l = s[1], u = s[2], s = s[3];
        return t[0] = l * i - u * a + s * o, t[1] = -e * i + u * r - s * h, t[2] = e * a - l * r + s * n, 
        t[3] = -e * o + l * h - u * n, t;
    }, Qi = function(t, s, i, e) {
        var n = s[0], h = s[1], r = s[2], s = s[3];
        return t[0] = n + e * (i[0] - n), t[1] = h + e * (i[1] - h), t[2] = r + e * (i[2] - r), 
        t[3] = s + e * (i[3] - s), t;
    }, Vi = function(t, s) {
        var i, e, n, h, r, o;
        for (s = s || 1; 1 <= (r = (i = 2 * Pn() - 1) * i + (e = 2 * Pn() - 1) * e); );
        for (;1 <= (o = (n = 2 * Pn() - 1) * n + (h = 2 * Pn() - 1) * h); );
        var a = Math.sqrt((1 - r) / o);
        return t[0] = s * i, t[1] = s * e, t[2] = s * n * a, t[3] = s * h * a, t;
    }, Ji = function(t, s, i) {
        var e = s[0], n = s[1], h = s[2], s = s[3];
        return t[0] = i[0] * e + i[4] * n + i[8] * h + i[12] * s, t[1] = i[1] * e + i[5] * n + i[9] * h + i[13] * s, 
        t[2] = i[2] * e + i[6] * n + i[10] * h + i[14] * s, t[3] = i[3] * e + i[7] * n + i[11] * h + i[15] * s, 
        t;
    }, Yi = function(t, s, i) {
        var e = s[0], n = s[1], h = s[2], r = i[0], o = i[1], a = i[2], l = (i = i[3]) * e + o * h - a * n, u = i * n + a * e - r * h, c = i * h + r * n - o * e;
        return t[0] = l * i + (e = -r * e - o * n - a * h) * -r + u * -a - c * -o, 
        t[1] = u * i + e * -o + c * -r - l * -a, t[2] = c * i + e * -a + l * -o - u * -r, 
        t[3] = s[3], t;
    }, Hi = function(t) {
        return t[0] = 0, t[1] = 0, t[2] = 0, t[3] = 0, t;
    }, qi = function(t) {
        return "vec4(" + t[0] + ", " + t[1] + ", " + t[2] + ", " + t[3] + ")";
    }, Zi = function(t, s) {
        return t[0] === s[0] && t[1] === s[1] && t[2] === s[2] && t[3] === s[3];
    }, Xi = function(t, s) {
        var i = t[0], e = t[1], n = t[2], t = t[3], h = s[0], r = s[1], o = s[2], s = s[3];
        return Math.abs(i - h) <= Tn * Math.max(1, Math.abs(i), Math.abs(h)) && Math.abs(e - r) <= Tn * Math.max(1, Math.abs(e), Math.abs(r)) && Math.abs(n - o) <= Tn * Math.max(1, Math.abs(n), Math.abs(o)) && Math.abs(t - s) <= Tn * Math.max(1, Math.abs(t), Math.abs(s));
    }, v = function() {
        var t = new bn(4);
        return bn != Float32Array && (t[0] = 0, t[1] = 0, t[2] = 0), t[3] = 1, t;
    }, Ki = function(t) {
        return t[0] = 0, t[1] = 0, t[2] = 0, t[3] = 1, t;
    }, C = function(t, s, i) {
        i *= .5;
        var e = Math.sin(i);
        return t[0] = e * s[0], t[1] = e * s[1], t[2] = e * s[2], t[3] = Math.cos(i), 
        t;
    }, $i = function(t, s) {
        var i = 2 * Math.acos(s[3]), e = Math.sin(i / 2);
        return Tn < e ? (t[0] = s[0] / e, t[1] = s[1] / e, t[2] = s[2] / e) : (t[0] = 1, 
        t[1] = 0, t[2] = 0), i;
    }, te = function(t, s) {
        return t = Jn(t, s), Math.acos(2 * t * t - 1);
    }, se = function(t, s, i) {
        var e = s[0], n = s[1], h = s[2], s = s[3], r = i[0], o = i[1], a = i[2], i = i[3];
        return t[0] = e * i + s * r + n * a - h * o, t[1] = n * i + s * o + h * r - e * a, 
        t[2] = h * i + s * a + e * o - n * r, t[3] = s * i - e * r - n * o - h * a, 
        t;
    }, G = function(t, s, i) {
        i *= .5;
        var e = s[0], n = s[1], h = s[2], s = s[3], r = Math.sin(i), i = Math.cos(i);
        return t[0] = e * i + s * r, t[1] = n * i + h * r, t[2] = h * i - n * r, 
        t[3] = s * i - e * r, t;
    }, I = function(t, s, i) {
        i *= .5;
        var e = s[0], n = s[1], h = s[2], s = s[3], r = Math.sin(i), i = Math.cos(i);
        return t[0] = e * i - h * r, t[1] = n * i + s * r, t[2] = h * i + e * r, 
        t[3] = s * i - n * r, t;
    }, _ = function(t, s, i) {
        i *= .5;
        var e = s[0], n = s[1], h = s[2], s = s[3], r = Math.sin(i), i = Math.cos(i);
        return t[0] = e * i + n * r, t[1] = n * i - e * r, t[2] = h * i + s * r, 
        t[3] = s * i - h * r, t;
    }, ie = function(t, s) {
        var i = s[0], e = s[1], s = s[2];
        return t[0] = i, t[1] = e, t[2] = s, t[3] = Math.sqrt(Math.abs(1 - i * i - e * e - s * s)), 
        t;
    }, E = function(t, s) {
        var i = s[0], e = s[1], n = s[2], s = s[3], h = Math.sqrt(i * i + e * e + n * n), s = Math.exp(s), r = 0 < h ? s * Math.sin(h) / h : 0;
        return t[0] = i * r, t[1] = e * r, t[2] = n * r, t[3] = s * Math.cos(h), 
        t;
    }, N = function(t, s) {
        var i = s[0], e = s[1], n = s[2], s = s[3], h = 0 < (h = Math.sqrt(i * i + e * e + n * n)) ? Math.atan2(h, s) / h : 0;
        return t[0] = i * h, t[1] = e * h, t[2] = n * h, t[3] = .5 * Math.log(i * i + e * e + n * n + s * s), 
        t;
    }, ee = function(t, s, i) {
        return N(t, s), Vn(t, t, i), E(t, t), t;
    }, D = function(t, s, i, e) {
        var n, h, r = s[0], o = s[1], a = s[2], s = s[3], l = i[0], u = i[1], c = i[2], f = r * l + o * u + a * c + s * (i = i[3]);
        return f < 0 && (f = -f, l = -l, u = -u, c = -c, i = -i), f = Tn < 1 - f ? (f = Math.acos(f), 
        n = Math.sin(f), h = Math.sin((1 - e) * f) / n, Math.sin(e * f) / n) : (h = 1 - e, 
        e), t[0] = h * r + f * l, t[1] = h * o + f * u, t[2] = h * a + f * c, t[3] = h * s + f * i, 
        t;
    }, ne = function(t) {
        var s = Pn(), i = Pn(), e = Pn(), n = Math.sqrt(1 - s), s = Math.sqrt(s);
        return t[0] = n * Math.sin(2 * Math.PI * i), t[1] = n * Math.cos(2 * Math.PI * i), 
        t[2] = s * Math.sin(2 * Math.PI * e), t[3] = s * Math.cos(2 * Math.PI * e), 
        t;
    }, he = function(t, s) {
        var i = s[0], e = s[1], n = s[2], h = i * i + e * e + n * n + (s = s[3]) * s;
        return t[0] = -i * (h = h ? 1 / h : 0), t[1] = -e * h, t[2] = -n * h, t[3] = s * h, 
        t;
    }, re = function(t, s) {
        return t[0] = -s[0], t[1] = -s[1], t[2] = -s[2], t[3] = s[3], t;
    }, A = function(t, s) {
        var i, e, n, h = s[0] + s[4] + s[8];
        return 0 < h ? (n = Math.sqrt(h + 1), t[3] = .5 * n, t[0] = (s[5] - s[7]) * (n = .5 / n), 
        t[1] = (s[6] - s[2]) * n, t[2] = (s[1] - s[3]) * n) : (i = (1 + (h = s[3 * (h = s[4] > s[0] ? 1 : 0) + h] < s[8] ? 2 : h)) % 3, 
        e = (2 + h) % 3, n = Math.sqrt(s[3 * h + h] - s[3 * i + i] - s[3 * e + e] + 1), 
        t[h] = .5 * n, t[3] = (s[3 * i + e] - s[3 * e + i]) * (n = .5 / n), t[i] = (s[3 * i + h] + s[3 * h + i]) * n, 
        t[e] = (s[3 * e + h] + s[3 * h + e]) * n), t;
    }, oe = function(t, s, i, e) {
        var n = 4 < arguments.length && void 0 !== arguments[4] ? arguments[4] : Rn, h = Math.PI / 360, r = (e *= h, 
        i *= h, Math.sin(s *= h)), o = Math.cos(s), a = Math.sin(i), l = Math.cos(i), u = Math.sin(e), c = Math.cos(e);
        switch (n) {
          case "xyz":
            t[0] = r * l * c + o * a * u, t[1] = o * a * c - r * l * u, t[2] = o * l * u + r * a * c, 
            t[3] = o * l * c - r * a * u;
            break;

          case "xzy":
            t[0] = r * l * c - o * a * u, t[1] = o * a * c - r * l * u, t[2] = o * l * u + r * a * c, 
            t[3] = o * l * c + r * a * u;
            break;

          case "yxz":
            t[0] = r * l * c + o * a * u, t[1] = o * a * c - r * l * u, t[2] = o * l * u - r * a * c, 
            t[3] = o * l * c + r * a * u;
            break;

          case "yzx":
            t[0] = r * l * c + o * a * u, t[1] = o * a * c + r * l * u, t[2] = o * l * u - r * a * c, 
            t[3] = o * l * c - r * a * u;
            break;

          case "zxy":
            t[0] = r * l * c - o * a * u, t[1] = o * a * c + r * l * u, t[2] = o * l * u + r * a * c, 
            t[3] = o * l * c - r * a * u;
            break;

          case "zyx":
            t[0] = r * l * c - o * a * u, t[1] = o * a * c + r * l * u, t[2] = o * l * u - r * a * c, 
            t[3] = o * l * c + r * a * u;
            break;

          default:
            throw new Error("Unknown angle order " + n);
        }
        return t;
    }, ae = function(t) {
        return "quat(" + t[0] + ", " + t[1] + ", " + t[2] + ", " + t[3] + ")";
    }, le = function(t, s) {
        return Math.abs(b(t, s)) >= 1 - Tn;
    }, ue = function() {
        var t = new bn(8);
        return bn != Float32Array && (t[0] = 0, t[1] = 0, t[2] = 0, t[4] = 0, t[5] = 0, 
        t[6] = 0, t[7] = 0), t[3] = 1, t;
    }, ce = function(t) {
        var s = new bn(8);
        return s[0] = t[0], s[1] = t[1], s[2] = t[2], s[3] = t[3], s[4] = t[4], 
        s[5] = t[5], s[6] = t[6], s[7] = t[7], s;
    }, fe = function(t, s, i, e, n, h, r, o) {
        var a = new bn(8);
        return a[0] = t, a[1] = s, a[2] = i, a[3] = e, a[4] = n, a[5] = h, a[6] = r, 
        a[7] = o, a;
    }, de = function(t, s, i, e, n, h, r) {
        var o = new bn(8), n = (o[0] = t, o[1] = s, o[2] = i, o[3] = e, .5 * n), h = .5 * h, r = .5 * r;
        return o[4] = n * e + h * i - r * s, o[5] = h * e + r * t - n * i, o[6] = r * e + n * s - h * t, 
        o[7] = -n * t - h * s - r * i, o;
    }, L = function(t, s, i) {
        var e = .5 * i[0], n = .5 * i[1], i = .5 * i[2], h = s[0], r = s[1], o = s[2], s = s[3];
        return t[0] = h, t[1] = r, t[2] = o, t[3] = s, t[4] = e * s + n * o - i * r, 
        t[5] = n * s + i * h - e * o, t[6] = i * s + e * r - n * h, t[7] = -e * h - n * r - i * o, 
        t;
    }, pe = function(t, s) {
        return t[0] = 0, t[1] = 0, t[2] = 0, t[3] = 1, t[4] = .5 * s[0], t[5] = .5 * s[1], 
        t[6] = .5 * s[2], t[7] = 0, t;
    }, me = function(t, s) {
        return t[0] = s[0], t[1] = s[1], t[2] = s[2], t[3] = s[3], t[4] = 0, t[5] = 0, 
        t[6] = 0, t[7] = 0, t;
    }, ge = function(t, s) {
        var i = v(), e = (l(i, s), new bn(3));
        return a(e, s), L(t, i, e), t;
    }, O = function(t, s) {
        return t[0] = s[0], t[1] = s[1], t[2] = s[2], t[3] = s[3], t[4] = s[4], 
        t[5] = s[5], t[6] = s[6], t[7] = s[7], t;
    }, ye = function(t) {
        return t[0] = 0, t[1] = 0, t[2] = 0, t[3] = 1, t[4] = 0, t[5] = 0, t[6] = 0, 
        t[7] = 0, t;
    }, Me = function(t, s, i, e, n, h, r, o, a) {
        return t[0] = s, t[1] = i, t[2] = e, t[3] = n, t[4] = h, t[5] = r, t[6] = o, 
        t[7] = a, t;
    }, we = function(t, s) {
        return t[0] = s[4], t[1] = s[5], t[2] = s[6], t[3] = s[7], t;
    }, xe = function(t, s) {
        return t[4] = s[0], t[5] = s[1], t[6] = s[2], t[7] = s[3], t;
    }, Se = function(t, s) {
        var i = s[4], e = s[5], n = s[6], h = s[7], r = -s[0], o = -s[1], a = -s[2], s = s[3];
        return t[0] = 2 * (i * s + h * r + e * a - n * o), t[1] = 2 * (e * s + h * o + n * r - i * a), 
        t[2] = 2 * (n * s + h * a + i * o - e * r), t;
    }, Te = function(t, s, i) {
        var e = s[0], n = s[1], h = s[2], r = s[3], o = .5 * i[0], a = .5 * i[1], i = .5 * i[2], l = s[4], u = s[5], c = s[6], s = s[7];
        return t[0] = e, t[1] = n, t[2] = h, t[3] = r, t[4] = r * o + n * i - h * a + l, 
        t[5] = r * a + h * o - e * i + u, t[6] = r * i + e * a - n * o + c, t[7] = -e * o - n * a - h * i + s, 
        t;
    }, be = function(t, s, i) {
        var e = -s[0], n = -s[1], h = -s[2], r = s[3], o = s[4], a = s[5], l = s[6], u = o * r + (d = s[7]) * e + a * h - l * n, c = a * r + d * n + l * e - o * h, f = l * r + d * h + o * n - a * e, d = d * r - o * e - a * n - l * h;
        return G(t, s, i), e = t[0], t[4] = u * (r = t[3]) + d * e + c * (h = t[2]) - f * (n = t[1]), 
        t[5] = c * r + d * n + f * e - u * h, t[6] = f * r + d * h + u * n - c * e, 
        t[7] = d * r - u * e - c * n - f * h, t;
    }, ve = function(t, s, i) {
        var e = -s[0], n = -s[1], h = -s[2], r = s[3], o = s[4], a = s[5], l = s[6], u = o * r + (d = s[7]) * e + a * h - l * n, c = a * r + d * n + l * e - o * h, f = l * r + d * h + o * n - a * e, d = d * r - o * e - a * n - l * h;
        return I(t, s, i), e = t[0], t[4] = u * (r = t[3]) + d * e + c * (h = t[2]) - f * (n = t[1]), 
        t[5] = c * r + d * n + f * e - u * h, t[6] = f * r + d * h + u * n - c * e, 
        t[7] = d * r - u * e - c * n - f * h, t;
    }, Ce = function(t, s, i) {
        var e = -s[0], n = -s[1], h = -s[2], r = s[3], o = s[4], a = s[5], l = s[6], u = o * r + (d = s[7]) * e + a * h - l * n, c = a * r + d * n + l * e - o * h, f = l * r + d * h + o * n - a * e, d = d * r - o * e - a * n - l * h;
        return _(t, s, i), e = t[0], t[4] = u * (r = t[3]) + d * e + c * (h = t[2]) - f * (n = t[1]), 
        t[5] = c * r + d * n + f * e - u * h, t[6] = f * r + d * h + u * n - c * e, 
        t[7] = d * r - u * e - c * n - f * h, t;
    }, Ge = function(t, s, i) {
        var e = i[0], n = i[1], h = i[2], i = i[3], r = s[0], o = s[1], a = s[2], l = s[3];
        return t[0] = r * i + l * e + o * h - a * n, t[1] = o * i + l * n + a * e - r * h, 
        t[2] = a * i + l * h + r * n - o * e, t[3] = l * i - r * e - o * n - a * h, 
        t[4] = (r = s[4]) * i + (l = s[7]) * e + (o = s[5]) * h - (a = s[6]) * n, 
        t[5] = o * i + l * n + a * e - r * h, t[6] = a * i + l * h + r * n - o * e, 
        t[7] = l * i - r * e - o * n - a * h, t;
    }, Ie = function(t, s, i) {
        var e = s[0], n = s[1], h = s[2], s = s[3], r = i[0], o = i[1], a = i[2], l = i[3];
        return t[0] = e * l + s * r + n * a - h * o, t[1] = n * l + s * o + h * r - e * a, 
        t[2] = h * l + s * a + e * o - n * r, t[3] = s * l - e * r - n * o - h * a, 
        t[4] = e * (l = i[7]) + s * (r = i[4]) + n * (a = i[6]) - h * (o = i[5]), 
        t[5] = n * l + s * o + h * r - e * a, t[6] = h * l + s * a + e * o - n * r, 
        t[7] = s * l - e * r - n * o - h * a, t;
    }, _e = function(t, s, i, e) {
        var n, h, r, o, a, l;
        return Math.abs(e) < Tn ? O(t, s) : (l = Math.hypot(i[0], i[1], i[2]), e *= .5, 
        n = (r = Math.sin(e)) * i[0] / l, h = r * i[1] / l, r = r * i[2] / l, i = Math.cos(e), 
        l = s[0], t[0] = l * i + (e = s[3]) * n + (o = s[1]) * r - (a = s[2]) * h, 
        t[1] = o * i + e * h + a * n - l * r, t[2] = a * i + e * r + l * h - o * n, 
        t[3] = e * i - l * n - o * h - a * r, t[4] = (e = s[4]) * i + (l = s[7]) * n + (o = s[5]) * r - (a = s[6]) * h, 
        t[5] = o * i + l * h + a * n - e * r, t[6] = a * i + l * r + e * h - o * n, 
        t[7] = l * i - e * n - o * h - a * r, t);
    }, Ee = function(t, s, i) {
        return t[0] = s[0] + i[0], t[1] = s[1] + i[1], t[2] = s[2] + i[2], t[3] = s[3] + i[3], 
        t[4] = s[4] + i[4], t[5] = s[5] + i[5], t[6] = s[6] + i[6], t[7] = s[7] + i[7], 
        t;
    }, Ne = function(t, s, i) {
        var e = s[0], n = s[1], h = s[2], r = s[3], o = i[4], a = i[5], l = i[6], u = i[7], c = s[4], f = s[5], d = s[6], s = s[7], p = i[0], m = i[1], g = i[2], i = i[3];
        return t[0] = e * i + r * p + n * g - h * m, t[1] = n * i + r * m + h * p - e * g, 
        t[2] = h * i + r * g + e * m - n * p, t[3] = r * i - e * p - n * m - h * g, 
        t[4] = e * u + r * o + n * l - h * a + c * i + s * p + f * g - d * m, t[5] = n * u + r * a + h * o - e * l + f * i + s * m + d * p - c * g, 
        t[6] = h * u + r * l + e * a - n * o + d * i + s * g + c * m - f * p, t[7] = r * u - e * o - n * a - h * l + s * i - c * p - f * m - d * g, 
        t;
    }, De = function(t, s, i) {
        return t[0] = s[0] * i, t[1] = s[1] * i, t[2] = s[2] * i, t[3] = s[3] * i, 
        t[4] = s[4] * i, t[5] = s[5] * i, t[6] = s[6] * i, t[7] = s[7] * i, t;
    }, Ae = function(t, s, i, e) {
        var n = 1 - e;
        return Xn(s, i) < 0 && (e = -e), t[0] = s[0] * n + i[0] * e, t[1] = s[1] * n + i[1] * e, 
        t[2] = s[2] * n + i[2] * e, t[3] = s[3] * n + i[3] * e, t[4] = s[4] * n + i[4] * e, 
        t[5] = s[5] * n + i[5] * e, t[6] = s[6] * n + i[6] * e, t[7] = s[7] * n + i[7] * e, 
        t;
    }, Le = function(t, s) {
        var i = Kn(s);
        return t[0] = -s[0] / i, t[1] = -s[1] / i, t[2] = -s[2] / i, t[3] = s[3] / i, 
        t[4] = -s[4] / i, t[5] = -s[5] / i, t[6] = -s[6] / i, t[7] = s[7] / i, t;
    }, Oe = function(t, s) {
        return t[0] = -s[0], t[1] = -s[1], t[2] = -s[2], t[3] = s[3], t[4] = -s[4], 
        t[5] = -s[5], t[6] = -s[6], t[7] = s[7], t;
    }, Pe = function(t, s) {
        var i, e, n, h, r, o, a, l, u = Kn(s);
        return 0 < u && (u = Math.sqrt(u), l = (i = s[0] / u) * (r = s[4]) + (e = s[1] / u) * (o = s[5]) + (n = s[2] / u) * (a = s[6]) + (h = s[3] / u) * (s = s[7]), 
        t[0] = i, t[1] = e, t[2] = n, t[3] = h, t[4] = (r - i * l) / u, t[5] = (o - e * l) / u, 
        t[6] = (a - n * l) / u, t[7] = (s - h * l) / u), t;
    }, Re = function(t) {
        return "quat2(" + t[0] + ", " + t[1] + ", " + t[2] + ", " + t[3] + ", " + t[4] + ", " + t[5] + ", " + t[6] + ", " + t[7] + ")";
    }, ke = function(t, s) {
        return t[0] === s[0] && t[1] === s[1] && t[2] === s[2] && t[3] === s[3] && t[4] === s[4] && t[5] === s[5] && t[6] === s[6] && t[7] === s[7];
    }, Fe = function(t, s) {
        var i = t[0], e = t[1], n = t[2], h = t[3], r = t[4], o = t[5], a = t[6], t = t[7], l = s[0], u = s[1], c = s[2], f = s[3], d = s[4], p = s[5], m = s[6], s = s[7];
        return Math.abs(i - l) <= Tn * Math.max(1, Math.abs(i), Math.abs(l)) && Math.abs(e - u) <= Tn * Math.max(1, Math.abs(e), Math.abs(u)) && Math.abs(n - c) <= Tn * Math.max(1, Math.abs(n), Math.abs(c)) && Math.abs(h - f) <= Tn * Math.max(1, Math.abs(h), Math.abs(f)) && Math.abs(r - d) <= Tn * Math.max(1, Math.abs(r), Math.abs(d)) && Math.abs(o - p) <= Tn * Math.max(1, Math.abs(o), Math.abs(p)) && Math.abs(a - m) <= Tn * Math.max(1, Math.abs(a), Math.abs(m)) && Math.abs(t - s) <= Tn * Math.max(1, Math.abs(t), Math.abs(s));
    }, P = function() {
        var t = new bn(2);
        return bn != Float32Array && (t[0] = 0, t[1] = 0), t;
    }, je = function(t) {
        var s = new bn(2);
        return s[0] = t[0], s[1] = t[1], s;
    }, ze = function(t, s) {
        var i = new bn(2);
        return i[0] = t, i[1] = s, i;
    }, Be = function(t, s) {
        return t[0] = s[0], t[1] = s[1], t;
    }, Ue = function(t, s, i) {
        return t[0] = s, t[1] = i, t;
    }, We = function(t, s, i) {
        return t[0] = s[0] + i[0], t[1] = s[1] + i[1], t;
    }, Qe = function(t, s, i) {
        return t[0] = s[0] - i[0], t[1] = s[1] - i[1], t;
    }, Ve = function(t, s, i) {
        return t[0] = s[0] * i[0], t[1] = s[1] * i[1], t;
    }, Je = function(t, s, i) {
        return t[0] = s[0] / i[0], t[1] = s[1] / i[1], t;
    }, Ye = function(t, s) {
        return t[0] = Math.ceil(s[0]), t[1] = Math.ceil(s[1]), t;
    }, He = function(t, s) {
        return t[0] = Math.floor(s[0]), t[1] = Math.floor(s[1]), t;
    }, qe = function(t, s, i) {
        return t[0] = Math.min(s[0], i[0]), t[1] = Math.min(s[1], i[1]), t;
    }, Ze = function(t, s, i) {
        return t[0] = Math.max(s[0], i[0]), t[1] = Math.max(s[1], i[1]), t;
    }, Xe = function(t, s) {
        return t[0] = Math.round(s[0]), t[1] = Math.round(s[1]), t;
    }, Ke = function(t, s, i) {
        return t[0] = s[0] * i, t[1] = s[1] * i, t;
    }, $e = function(t, s, i, e) {
        return t[0] = s[0] + i[0] * e, t[1] = s[1] + i[1] * e, t;
    }, tn = function(t, s) {
        var i = s[0] - t[0];
        return Math.hypot(i, s[1] - t[1]);
    }, sn = function(t, s) {
        var i = s[0] - t[0];
        return i * i + (s = s[1] - t[1]) * s;
    }, en = function(t) {
        var s = t[0];
        return Math.hypot(s, t[1]);
    }, nn = function(t) {
        var s = t[0];
        return s * s + (t = t[1]) * t;
    }, hn = function(t, s) {
        return t[0] = -s[0], t[1] = -s[1], t;
    }, rn = function(t, s) {
        return t[0] = 1 / s[0], t[1] = 1 / s[1], t;
    }, on = function(t, s) {
        var i = s[0], e = s[1];
        return 0 < (i = i * i + e * e) && (i = 1 / Math.sqrt(i)), t[0] = s[0] * i, 
        t[1] = s[1] * i, t;
    }, an = function(t, s) {
        return t[0] * s[0] + t[1] * s[1];
    }, ln = function(t, s, i) {
        return s = s[0] * i[1] - s[1] * i[0], t[0] = t[1] = 0, t[2] = s, t;
    }, un = function(t, s, i, e) {
        var n = s[0], s = s[1];
        return t[0] = n + e * (i[0] - n), t[1] = s + e * (i[1] - s), t;
    }, cn = function(t, s) {
        s = s || 1;
        var i = 2 * Pn() * Math.PI;
        return t[0] = Math.cos(i) * s, t[1] = Math.sin(i) * s, t;
    }, fn = function(t, s, i) {
        var e = s[0], s = s[1];
        return t[0] = i[0] * e + i[2] * s, t[1] = i[1] * e + i[3] * s, t;
    }, dn = function(t, s, i) {
        var e = s[0], s = s[1];
        return t[0] = i[0] * e + i[2] * s + i[4], t[1] = i[1] * e + i[3] * s + i[5], 
        t;
    }, pn = function(t, s, i) {
        var e = s[0], s = s[1];
        return t[0] = i[0] * e + i[3] * s + i[6], t[1] = i[1] * e + i[4] * s + i[7], 
        t;
    }, mn = function(t, s, i) {
        var e = s[0], s = s[1];
        return t[0] = i[0] * e + i[4] * s + i[12], t[1] = i[1] * e + i[5] * s + i[13], 
        t;
    }, gn = function(t, s, i, e) {
        var n = s[0] - i[0], s = s[1] - i[1], h = Math.sin(e), e = Math.cos(e);
        return t[0] = n * e - s * h + i[0], t[1] = n * h + s * e + i[1], t;
    }, yn = function(t, s) {
        var i = t[0], t = t[1], e = s[0], s = s[1], n = Math.sqrt((i * i + t * t) * (e * e + s * s));
        return Math.acos(Math.min(Math.max(n && (i * e + t * s) / n, -1), 1));
    }, Mn = function(t) {
        return t[0] = 0, t[1] = 0, t;
    }, wn = function(t) {
        return "vec2(" + t[0] + ", " + t[1] + ")";
    }, xn = function(t, s) {
        return t[0] === s[0] && t[1] === s[1];
    }, Sn = function(t, s) {
        var i = t[0], t = t[1], e = s[0], s = s[1];
        return Math.abs(i - e) <= Tn * Math.max(1, Math.abs(i), Math.abs(e)) && Math.abs(t - s) <= Tn * Math.max(1, Math.abs(t), Math.abs(s));
    };
    n, p, f, a, d, l, m, g, y, M, w, x, b, v, C, G, I, _, E, N, D, A, L, O, P, Tn = 1e-6, 
    bn = "undefined" != typeof Float32Array ? Float32Array : Array, Pn = Math.random, 
    Rn = "zyx", kn = Math.PI / 180, Math.hypot || (Math.hypot = function() {
        for (var t = 0, s = arguments.length; s--; ) t += arguments[s] * arguments[s];
        return Math.sqrt(t);
    }), Fn = {
        __proto__: null,
        EPSILON: Tn,
        get _$ARRAY_TYPE$_() {
            return bn;
        },
        _$RANDOM$_: Pn,
        _$ANGLE_ORDER$_: Rn,
        _$setMatrixArrayType$_: R,
        _$toRadian$_: k,
        equals: F
    }, jn = Object.freeze({
        __proto__: null,
        create: j,
        clone: z,
        _$copy$_: B,
        identity: U,
        _$fromValues$_: W,
        set: Q,
        _$transpose$_: V,
        _$invert$_: J,
        _$adjoint$_: Y,
        _$determinant$_: H,
        multiply: t,
        rotate: q,
        scale: Z,
        _$fromRotation$_: X,
        _$fromScaling$_: K,
        _$str$_: $,
        _$frob$_: tt,
        _$LDU$_: st,
        add: it,
        _$subtract$_: s,
        _$exactEquals$_: et,
        equals: nt,
        _$multiplyScalar$_: ht,
        _$multiplyScalarAndAdd$_: rt,
        mul: t,
        sub: s
    }), zn = Object.freeze({
        __proto__: null,
        create: ot,
        clone: at,
        _$copy$_: lt,
        identity: ut,
        _$fromValues$_: ct,
        set: ft,
        _$invert$_: dt,
        _$determinant$_: pt,
        multiply: i,
        rotate: mt,
        scale: gt,
        translate: yt,
        _$fromRotation$_: Mt,
        _$fromScaling$_: wt,
        _$fromTranslation$_: xt,
        _$str$_: St,
        _$frob$_: Tt,
        add: bt,
        _$subtract$_: e,
        _$multiplyScalar$_: vt,
        _$multiplyScalarAndAdd$_: Ct,
        _$exactEquals$_: Gt,
        equals: It,
        mul: i,
        sub: e
    }), Bn = Object.freeze({
        __proto__: null,
        create: n,
        _$fromMat4$_: _t,
        clone: Et,
        _$copy$_: Nt,
        _$fromValues$_: Dt,
        set: At,
        identity: Lt,
        _$transpose$_: Ot,
        _$invert$_: Pt,
        _$adjoint$_: Rt,
        _$determinant$_: kt,
        multiply: h,
        translate: Ft,
        rotate: jt,
        scale: zt,
        _$fromTranslation$_: Bt,
        _$fromRotation$_: Ut,
        _$fromScaling$_: Wt,
        _$fromMat2d$_: Qt,
        _$fromQuat$_: Vt,
        _$normalFromMat4$_: Jt,
        _$projection$_: Yt,
        _$str$_: Ht,
        _$frob$_: qt,
        add: Zt,
        _$subtract$_: r,
        _$multiplyScalar$_: Xt,
        _$multiplyScalarAndAdd$_: Kt,
        _$exactEquals$_: $t,
        equals: ts,
        mul: h,
        sub: r
    }), vn = Object.freeze({
        __proto__: null,
        create: ss,
        clone: is,
        _$copy$_: es,
        _$fromValues$_: ns,
        set: hs,
        identity: p,
        _$transpose$_: rs,
        _$invert$_: os,
        _$adjoint$_: as,
        _$determinant$_: ls,
        multiply: o,
        translate: us,
        scale: cs,
        rotate: fs,
        _$rotateX$_: ds,
        _$rotateY$_: ps,
        _$rotateZ$_: ms,
        _$fromTranslation$_: gs,
        _$fromScaling$_: ys,
        _$fromRotation$_: Ms,
        _$fromXRotation$_: ws,
        _$fromYRotation$_: xs,
        _$fromZRotation$_: Ss,
        _$fromRotationTranslation$_: f,
        _$fromQuat2$_: Ts,
        _$getTranslation$_: a,
        _$getScaling$_: d,
        _$getRotation$_: l,
        _$decompose$_: bs,
        _$fromRotationTranslationScale$_: vs,
        _$fromRotationTranslationScaleOrigin$_: Cs,
        _$fromQuat$_: Gs,
        _$frustum$_: Is,
        _$perspectiveNO$_: u,
        perspective: u,
        _$perspectiveZO$_: _s,
        _$perspectiveFromFieldOfView$_: Es,
        _$orthoNO$_: c,
        ortho: c,
        _$orthoZO$_: Ns,
        _$lookAt$_: Ds,
        _$targetTo$_: As,
        _$str$_: Ls,
        _$frob$_: Os,
        add: Ps,
        _$subtract$_: Rs,
        _$multiplyScalar$_: ks,
        _$multiplyScalarAndAdd$_: Fs,
        _$exactEquals$_: js,
        equals: zs,
        mul: o,
        sub: Rs
    }), Zn = Js, $n = Ys, Qn = Hs, th = ii, sh = ei, Un = Us, ih = ni, On = m(), 
    Cn = Object.freeze({
        __proto__: null,
        create: m,
        clone: Bs,
        length: Us,
        _$fromValues$_: g,
        _$copy$_: Ws,
        set: Qs,
        add: Vs,
        _$subtract$_: Js,
        multiply: Ys,
        _$divide$_: Hs,
        ceil: qs,
        floor: Zs,
        min: Xs,
        max: Ks,
        round: $s,
        scale: ti,
        _$scaleAndAdd$_: si,
        _$distance$_: ii,
        _$squaredDistance$_: ei,
        _$squaredLength$_: ni,
        _$negate$_: hi,
        inverse: ri,
        normalize: y,
        _$dot$_: M,
        _$cross$_: w,
        _$lerp$_: oi,
        _$slerp$_: ai,
        _$hermite$_: li,
        _$bezier$_: ui,
        random: ci,
        _$transformMat4$_: fi,
        _$transformMat3$_: di,
        _$transformQuat$_: pi,
        _$rotateX$_: mi,
        _$rotateY$_: gi,
        _$rotateZ$_: yi,
        angle: Mi,
        _$zero$_: wi,
        _$str$_: xi,
        _$exactEquals$_: Si,
        equals: Ti,
        sub: Zn,
        mul: $n,
        div: Qn,
        _$dist$_: th,
        _$sqrDist$_: sh,
        _$len$_: Un,
        _$sqrLen$_: ih,
        forEach: function(t, s, i, e, n, h) {
            var r, o;
            for (s = s || 3, i = i || 0, o = e ? Math.min(e * s + i, t.length) : t.length, 
            r = i; r < o; r += s) On[0] = t[r], On[1] = t[r + 1], On[2] = t[r + 2], 
            n(On, On, h), t[r] = On[0], t[r + 1] = On[1], t[r + 2] = On[2];
            return t;
        }
    }), Zn = _i, $n = Ei, Qn = Ni, th = Fi, sh = ji, ih = S, eh = T, Ln = x(), Wn = Object.freeze({
        __proto__: null,
        create: x,
        clone: bi,
        _$fromValues$_: vi,
        _$copy$_: Ci,
        set: Gi,
        add: Ii,
        _$subtract$_: _i,
        multiply: Ei,
        _$divide$_: Ni,
        ceil: Di,
        floor: Ai,
        min: Li,
        max: Oi,
        round: Pi,
        scale: Ri,
        _$scaleAndAdd$_: ki,
        _$distance$_: Fi,
        _$squaredDistance$_: ji,
        length: S,
        _$squaredLength$_: T,
        _$negate$_: zi,
        inverse: Bi,
        normalize: Ui,
        _$dot$_: b,
        _$cross$_: Wi,
        _$lerp$_: Qi,
        random: Vi,
        _$transformMat4$_: Ji,
        _$transformQuat$_: Yi,
        _$zero$_: Hi,
        _$str$_: qi,
        _$exactEquals$_: Zi,
        equals: Xi,
        sub: Zn,
        mul: $n,
        div: Qn,
        _$dist$_: th,
        _$sqrDist$_: sh,
        _$len$_: ih,
        _$sqrLen$_: eh,
        forEach: function(t, s, i, e, n, h) {
            var r, o;
            for (s = s || 4, i = i || 0, o = e ? Math.min(e * s + i, t.length) : t.length, 
            r = i; r < o; r += s) Ln[0] = t[r], Ln[1] = t[r + 1], Ln[2] = t[r + 2], 
            Ln[3] = t[r + 3], n(Ln, Ln, h), t[r] = Ln[0], t[r + 1] = Ln[1], t[r + 2] = Ln[2], 
            t[r + 3] = Ln[3];
            return t;
        }
    }), Zn = bi, $n = vi, Qn = Ci, th = Gi, sh = Ii, ih = se, Vn = Ri, Jn = b, eh = Qi, 
    nh = Yn = S, hh = Hn = T, qn = Ui, rh = Zi, Nn = m(), Dn = g(1, 0, 0), An = g(0, 1, 0), 
    oh = function(t, s, i) {
        var e = M(s, i);
        return e < -.999999 ? (w(Nn, Dn, s), Un(Nn) < 1e-6 && w(Nn, An, s), y(Nn, Nn), 
        C(t, Nn, Math.PI), t) : .999999 < e ? (t[0] = 0, t[1] = 0, t[2] = 0, t[3] = 1, 
        t) : (w(Nn, s, i), t[0] = Nn[0], t[1] = Nn[1], t[2] = Nn[2], t[3] = 1 + e, 
        qn(t, t));
    }, _n = v(), En = v(), ah = function(t, s, i, e, n, h) {
        return D(_n, s, n, h), D(En, i, e, h), D(t, _n, En, 2 * h * (1 - h)), t;
    }, In = n(), Zn = Object.freeze({
        __proto__: null,
        create: v,
        identity: Ki,
        _$setAxisAngle$_: C,
        _$getAxisAngle$_: $i,
        _$getAngle$_: te,
        multiply: se,
        _$rotateX$_: G,
        _$rotateY$_: I,
        _$rotateZ$_: _,
        _$calculateW$_: ie,
        exp: E,
        _$ln$_: N,
        pow: ee,
        _$slerp$_: D,
        random: ne,
        _$invert$_: he,
        _$conjugate$_: re,
        _$fromMat3$_: A,
        _$fromEuler$_: oe,
        _$str$_: ae,
        clone: Zn,
        _$fromValues$_: $n,
        _$copy$_: Qn,
        set: th,
        add: sh,
        mul: ih,
        scale: Vn,
        _$dot$_: Jn,
        _$lerp$_: eh,
        length: Yn,
        _$len$_: nh,
        _$squaredLength$_: Hn,
        _$sqrLen$_: hh,
        normalize: qn,
        _$exactEquals$_: rh,
        equals: le,
        _$rotationTo$_: oh,
        _$sqlerp$_: ah,
        _$setAxes$_: function(t, s, i, e) {
            return In[0] = i[0], In[3] = i[1], In[6] = i[2], In[1] = e[0], In[4] = e[1], 
            In[7] = e[2], In[2] = -s[0], In[5] = -s[1], In[8] = -s[2], qn(t, A(t, In));
        }
    }), Xn = Jn, $n = Kn = Hn, th = Object.freeze({
        __proto__: null,
        create: ue,
        clone: ce,
        _$fromValues$_: fe,
        _$fromRotationTranslationValues$_: de,
        _$fromRotationTranslation$_: L,
        _$fromTranslation$_: pe,
        _$fromRotation$_: me,
        _$fromMat4$_: ge,
        _$copy$_: O,
        identity: ye,
        set: Me,
        _$getReal$_: Qn,
        _$getDual$_: we,
        _$setReal$_: Qn,
        _$setDual$_: xe,
        _$getTranslation$_: Se,
        translate: Te,
        _$rotateX$_: be,
        _$rotateY$_: ve,
        _$rotateZ$_: Ce,
        _$rotateByQuatAppend$_: Ge,
        _$rotateByQuatPrepend$_: Ie,
        _$rotateAroundAxis$_: _e,
        add: Ee,
        multiply: Ne,
        mul: Ne,
        scale: De,
        _$dot$_: Xn,
        _$lerp$_: Ae,
        _$invert$_: Le,
        _$conjugate$_: Oe,
        length: Yn,
        _$len$_: Yn,
        _$squaredLength$_: Kn,
        _$sqrLen$_: $n,
        normalize: Pe,
        _$str$_: Re,
        _$exactEquals$_: ke,
        equals: Fe
    }), sh = en, ih = Qe, eh = Ve, nh = Je, hh = tn, rh = sn, oh = nn, Gn = P(), 
    ah = Object.freeze({
        __proto__: null,
        create: P,
        clone: je,
        _$fromValues$_: ze,
        _$copy$_: Be,
        set: Ue,
        add: We,
        _$subtract$_: Qe,
        multiply: Ve,
        _$divide$_: Je,
        ceil: Ye,
        floor: He,
        min: qe,
        max: Ze,
        round: Xe,
        scale: Ke,
        _$scaleAndAdd$_: $e,
        _$distance$_: tn,
        _$squaredDistance$_: sn,
        length: en,
        _$squaredLength$_: nn,
        _$negate$_: hn,
        inverse: rn,
        normalize: on,
        _$dot$_: an,
        _$cross$_: ln,
        _$lerp$_: un,
        random: cn,
        _$transformMat2$_: fn,
        _$transformMat2d$_: dn,
        _$transformMat3$_: pn,
        _$transformMat4$_: mn,
        rotate: gn,
        angle: yn,
        _$zero$_: Mn,
        _$str$_: wn,
        _$exactEquals$_: xn,
        equals: Sn,
        _$len$_: sh,
        sub: ih,
        mul: eh,
        div: nh,
        _$dist$_: hh,
        _$sqrDist$_: rh,
        _$sqrLen$_: oh,
        forEach: function(t, s, i, e, n, h) {
            var r, o;
            for (s = s || 2, i = i || 0, o = e ? Math.min(e * s + i, t.length) : t.length, 
            r = i; r < o; r += s) Gn[0] = t[r], Gn[1] = t[r + 1], n(Gn, Gn, h), 
            t[r] = Gn[0], t[r + 1] = Gn[1];
            return t;
        }
    }), globalThis._$glMatrix$_ = Fn, globalThis._$glMatrix$_._$mat2$_ = jn, globalThis._$glMatrix$_._$mat2d$_ = zn, 
    globalThis._$glMatrix$_._$mat3$_ = Bn, globalThis._$glMatrix$_._$mat4$_ = vn, 
    globalThis._$glMatrix$_._$quat$_ = Zn, globalThis._$glMatrix$_._$quat2$_ = th, 
    globalThis._$glMatrix$_._$vec2$_ = ah, globalThis._$glMatrix$_._$vec3$_ = Cn, 
    globalThis._$glMatrix$_._$vec4$_ = Wn;
}

var Gn, In, _n, En, Nn, Dn, An, Ln, On, Tn, bn, Pn, Rn, kn, Fn, jn, zn, Bn, vn, Un, Cn, Wn, Qn, Vn, Jn, Yn, Hn, qn, Zn, Xn, Kn, $n, th, sh, ih, eh, nh, hh, rh, oh, ah, O, P, R, k;

{
    let a = function(t, s, i) {
        var e = [ 0, 0 ], n = t[1][1] - t[0][1], h = t[0][0] - t[1][0], t = n * t[0][0] + h * t[0][1], r = s[1][1] - s[0][1], o = s[0][0] - s[1][0], s = r * s[0][0] + o * s[0][1], a = n * o - r * h;
        return m(a, 0, i = i || 0) || (e[0] = (o * t - h * s) / a, e[1] = (n * s - r * t) / a), 
        e;
    }, n = function(t, s, i, e) {
        var n, h = s[0] - t[0], s = s[1] - t[1], r = e[0] - i[0];
        return r * s - (e = e[1] - i[1]) * h != 0 && (n = (r * (t[1] - i[1]) + e * (i[0] - t[0])) / (e * h - r * s), 
        0 <= (t = (h * (i[1] - t[1]) + s * (t[0] - i[0])) / (r * s - e * h))) && t <= 1 && 0 <= n && n <= 1;
    }, o = function(t, s, i) {
        return (s[0] - t[0]) * (i[1] - t[1]) - (i[0] - t[0]) * (s[1] - t[1]);
    }, b = function(t, s, i) {
        return 0 < o(t, s, i);
    }, v = function(t, s, i) {
        return 0 <= o(t, s, i);
    }, C = function(t, s, i) {
        return o(t, s, i) < 0;
    }, G = function(t, s, i) {
        return o(t, s, i) <= 0;
    }, h = function(t, s, i, e) {
        var n, h, r;
        return e ? (r = P, (h = O)[0] = s[0] - t[0], h[1] = s[1] - t[1], r[0] = i[0] - s[0], 
        r[1] = i[1] - s[1], n = h[0] * r[0] + h[1] * r[1], h = Math.sqrt(h[0] * h[0] + h[1] * h[1]), 
        r = Math.sqrt(r[0] * r[0] + r[1] * r[1]), Math.acos(n / (h * r)) < e) : 0 === o(t, s, i);
    }, I = function(t, s) {
        var i = s[0] - t[0];
        return i * i + (s = s[1] - t[1]) * s;
    }, _ = function(t, s) {
        var i = t.length;
        return t[s < 0 ? s % i + i : s % i];
    }, r = function(t) {
        t.length = 0;
    }, E = function(t, s, i, e) {
        for (var n = i; n < e; n++) t.push(s[n]);
    }, t = function(t) {
        for (var s = 0, i = t, e = 1; e < t.length; ++e) (i[e][1] < i[s][1] || i[e][1] === i[s][1] && i[e][0] > i[s][0]) && (s = e);
        return !b(_(t, s - 1), _(t, s), _(t, s + 1)) && (l(t), !0);
    }, l = function(t) {
        for (var s = [], i = t.length, e = 0; e !== i; e++) s.push(t.pop());
        for (e = 0; e !== i; e++) t[e] = s[e];
    }, N = function(t, s) {
        return C(_(t, s - 1), _(t, s), _(t, s + 1));
    }, u = function(t, s, i) {
        var e, n = R, h = k;
        if (v(_(t, s + 1), _(t, s), _(t, i)) && G(_(t, s - 1), _(t, s), _(t, i))) return !1;
        for (var r = I(_(t, s), _(t, i)), o = 0; o !== t.length; ++o) if ((o + 1) % t.length !== s && o !== s && v(_(t, s), _(t, i), _(t, o + 1)) && G(_(t, s), _(t, i), _(t, o)) && (n[0] = _(t, s), 
        n[1] = _(t, i), h[0] = _(t, o), h[1] = _(t, o + 1), e = a(n, h), I(_(t, s), e) < r)) return !1;
        return !0;
    }, D = function(t, s, i) {
        for (var e = 0; e !== t.length; ++e) if (e !== s && e !== i && (e + 1) % t.length !== s && (e + 1) % t.length !== i && n(_(t, s), _(t, i), _(t, e), _(t, e + 1))) return !1;
        return !0;
    }, c = function(t, s, i, e) {
        var n = e || [];
        if (r(n), s < i) for (var h = s; h <= i; h++) n.push(t[h]); else {
            for (h = 0; h <= i; h++) n.push(t[h]);
            for (h = s; h < t.length; h++) n.push(t[h]);
        }
        return n;
    }, f = function(t) {
        for (var s = [], i = [], e = [], n = Number.MAX_VALUE, h = 0; h < t.length; ++h) if (N(t, h)) for (var r = 0; r < t.length; ++r) if (u(t, h, r)) {
            for (var i = f(c(t, h, r, e)), o = f(c(t, r, h, e)), a = 0; a < o.length; a++) i.push(o[a]);
            i.length < n && (n = (s = i).length, s.push([ _(t, h), _(t, r) ]));
        }
        return s;
    }, s = function(t) {
        var s = f(t);
        return 0 < s.length ? d(t, s) : [ t ];
    }, d = function(t, s) {
        if (0 === s.length) return [ t ];
        if (s instanceof Array && s.length && s[0] instanceof Array && 2 === s[0].length && s[0][0] instanceof Array) {
            for (var i = [ t ], e = 0; e < s.length; e++) for (var n = s[e], h = 0; h < i.length; h++) {
                var r = d(i[h], n);
                if (r) {
                    i.splice(h, 1), i.push(r[0], r[1]);
                    break;
                }
            }
            return i;
        }
        return e = t.indexOf((n = s)[0]), h = t.indexOf(n[1]), -1 !== e && -1 !== h && [ c(t, e, h), c(t, h, e) ];
    }, i = function(t) {
        for (var s = t, i = 0; i < s.length - 1; i++) for (var e = 0; e < i - 1; e++) if (n(s[i], s[i + 1], s[e], s[e + 1])) return !1;
        for (i = 1; i < s.length - 2; i++) if (n(s[0], s[s.length - 1], s[i], s[i + 1])) return !1;
        return !0;
    }, A = function(t, s, i, e, n) {
        var h = s[1] - t[1], s = t[0] - s[0], t = h * t[0] + s * t[1], r = e[1] - i[1], e = i[0] - e[0], i = r * i[0] + e * i[1], o = h * e - r * s;
        return m(o, 0, n = n || 0) ? [ 0, 0 ] : [ (e * t - s * i) / o, (h * i - r * t) / o ];
    }, L = function(t, s, i, e, n, h, r) {
        h = h || 100, r = r || 0, n = n || 25, s = void 0 !== s ? s : [], i = i || [], 
        e = e || [];
        var o = [ 0, 0 ], a = [ 0, 0 ], l = [ 0, 0 ], u = 0, c = 0, f = 0, d = 0, p = 0, m = 0, g = 0, y = [], M = [], w = t, x = t;
        if (!(x.length < 3)) if (h < ++r) console.warn("quickDecomp: max level (" + h + ") reached."); else {
            for (var S = 0; S < t.length; ++S) if (N(w, S)) {
                i.push(w[S]);
                for (var u = c = Number.MAX_VALUE, T = 0; T < t.length; ++T) b(_(w, S - 1), _(w, S), _(w, T)) && G(_(w, S - 1), _(w, S), _(w, T - 1)) && (l = A(_(w, S - 1), _(w, S), _(w, T), _(w, T - 1)), 
                C(_(w, S + 1), _(w, S), l)) && (f = I(w[S], l)) < c && (c = f, a = l, 
                m = T), b(_(w, S + 1), _(w, S), _(w, T + 1)) && G(_(w, S + 1), _(w, S), _(w, T)) && (l = A(_(w, S + 1), _(w, S), _(w, T), _(w, T + 1)), 
                b(_(w, S - 1), _(w, S), l)) && (f = I(w[S], l)) < u && (u = f, o = l, 
                p = T);
                if (m === (p + 1) % t.length) l[0] = (a[0] + o[0]) / 2, l[1] = (a[1] + o[1]) / 2, 
                e.push(l), S < p ? (E(y, w, S, p + 1), y.push(l), M.push(l), 0 !== m && E(M, w, m, w.length), 
                E(M, w, 0, S + 1)) : (0 !== S && E(y, w, S, w.length), E(y, w, 0, p + 1), 
                y.push(l), M.push(l), E(M, w, m, S + 1)); else {
                    if (p < m && (p += t.length), d = Number.MAX_VALUE, p < m) return s;
                    for (T = m; T <= p; ++T) v(_(w, S - 1), _(w, S), _(w, T)) && G(_(w, S + 1), _(w, S), _(w, T)) && (f = I(_(w, S), _(w, T))) < d && D(w, S, T) && (d = f, 
                    g = T % t.length);
                    S < g ? (E(y, w, S, g + 1), 0 !== g && E(M, w, g, x.length), 
                    E(M, w, 0, S + 1)) : (0 !== S && E(y, w, S, x.length), E(y, w, 0, g + 1), 
                    E(M, w, g, S + 1));
                }
                return y.length < M.length ? (L(y, s, i, e, n, h, r), L(M, s, i, e, n, h, r)) : (L(M, s, i, e, n, h, r), 
                L(y, s, i, e, n, h, r)), s;
            }
            s.push(t);
        }
        return s;
    }, e = function(t, s) {
        for (var i = 0, e = t.length - 1; 3 < t.length && 0 <= e; --e) h(_(t, e - 1), _(t, e), _(t, e + 1), s) && (t.splice(e % t.length, 1), 
        i++);
        return i;
    }, p = function(t, s) {
        for (var i = t.length - 1; 1 <= i; --i) for (var e = t[i], n = i - 1; 0 <= n; --n) g(e, t[n], s) && t.splice(i, 1);
    }, m = function(t, s, i) {
        return i = i || 0, Math.abs(t - s) <= i;
    }, g = function(t, s, i) {
        return m(t[0], s[0], i) && m(t[1], s[1], i);
    };
    a, n, o, b, v, C, G, h, I, _, r, E, l, N, u, D, c, f, d, A, L, m, g, O = [], 
    P = [], R = [], k = [], self._$polyDecomp$_ = {
        _$decomp$_: s,
        _$quickDecomp$_: L,
        _$isSimple$_: i,
        _$removeCollinearPoints$_: e,
        _$removeDuplicatePoints$_: p,
        _$makeCCW$_: t
    };
}

{
    let t = !1, s = !1, i = "dev", e = Symbol("Construct internal API token"), n = 14, h = self._$C3$_ = class {
        constructor() {
            throw TypeError("static class can't be instantiated");
        }
        static _$_GetInternalAPIToken$_() {
            if (n <= 0) throw new Error("cannot obtain internal API token");
            return --n, e;
        }
        static _$SetReady$_() {
            t = !0;
        }
        static _$IsReady$_() {
            return t;
        }
        static _$SetAppStarted$_() {
            s = !0;
        }
        static _$HasAppStarted$_() {
            return s;
        }
        static _$SetBuildMode$_(t) {
            i = t;
        }
        static _$GetBuildMode$_() {
            return i;
        }
        static _$IsReleaseBuild$_() {
            return "final" === i;
        }
    };
    h.isDebug = !1, h._$isDebugDefend$_ = !1, h.hardwareConcurrency = navigator.hardwareConcurrency || 2, 
    self._$C3X$_ = {};
}

{
    const s = self._$C3$_;
    s._$QueryParser$_ = class {
        constructor(t) {
            this._$_queryString$_ = t, this._$_parameters$_ = new Map(), this._$_Parse$_();
        }
        _$_Parse$_() {
            let t = this._$_queryString$_, s = (t = t.startsWith("?") || t.startsWith("#") ? t.substr(1) : t).split("&");
            for (const i of s) this._$_ParseParameter$_(i);
        }
        _$_ParseParameter$_(t) {
            if (t) if (t.includes("=")) {
                const s = t.indexOf("="), i = decodeURIComponent(t.substring(0, s)), e = decodeURIComponent(t.substring(s + 1));
                this._$_parameters$_.set(i, e);
            } else this._$_parameters$_.set(t, null);
        }
        _$LogAll$_() {
            for (const t of this._$_parameters$_) console.log("[QueryParser] Parameter '" + t[0] + "' = " + (null === t[1] ? "null" : "'" + t[1] + "'"));
        }
        _$Has$_(t) {
            return this._$_parameters$_.has(t);
        }
        _$Get$_(t) {
            const s = this._$_parameters$_.get(t);
            return void 0 === s ? null : s;
        }
        _$ClearHash$_() {
            history.replaceState("", document.title, location.pathname + location.search);
        }
        _$Reparse$_(t) {
            this._$_queryString$_ = t, this._$_parameters$_.clear(), this._$_Parse$_();
        }
    }, s._$QueryString$_ = new s._$QueryParser$_(location.search), s._$LocationHashString$_ = new s._$QueryParser$_(location.hash), 
    s._$QueryString$_._$Has$_("perf") && (s._$isPerformanceProfiling$_ = !0), "dev" !== s._$QueryString$_._$Get$_("mode") && s._$SetBuildMode$_("final");
}

{
    let e = function(t) {
        const s = parseFloat(t), i = B.get(s);
        return i || (13 <= s ? "11" : "NT " + t);
    };
    e;
    const a = self._$C3$_, z = "(unknown)", B = (a._$Platform$_ = {
        _$OS$_: z,
        _$OSVersion$_: z,
        _$Browser$_: z,
        _$BrowserVersion$_: z,
        _$BrowserVersionNumber$_: NaN,
        _$BrowserEngine$_: z,
        _$Context$_: "browser",
        _$IsDesktop$_: !0,
        _$IsMobile$_: !1,
        _$IsAppleOS$_: !1,
        _$IsIpadOS$_: !1,
        _$GetDetailedInfo$_: async () => {}
    }, new Map([ [ 5, "2000" ], [ 5.1, "XP" ], [ 5.2, "XP" ], [ 6, "Vista" ], [ 6.1, "7" ], [ 6.2, "8" ], [ 6.3, "8.1" ], [ 10, "10" ] ])), U = navigator.userAgent, W = navigator.userAgentData;
    if (W && 0 < W.brands.length) {
        let s = function(t) {
            let s = "", i = "", e = "", n = "";
            for (const h of t) {
                const r = Q.get(h.brand), o = (!s && r && (s = r, i = h.version), 
                V.get(h.brand));
                !e && o && (e = o, n = h.version);
            }
            s || "Chromium" !== e || (a._$Platform$_._$Browser$_ = "Chromium", a._$Platform$_._$BrowserVersion$_ = n), 
            a._$Platform$_._$Browser$_ = s || z, a._$Platform$_._$BrowserVersion$_ = i || z, 
            a._$Platform$_._$BrowserEngine$_ = e || z;
        };
        s, a._$Platform$_._$OS$_ = W.platform, a._$Platform$_._$IsMobile$_ = W.mobile, 
        a._$Platform$_._$IsDesktop$_ = !a._$Platform$_._$IsMobile$_;
        const Q = new Map([ [ "Google Chrome", "Chrome" ], [ "Microsoft Edge", "Edge" ], [ "Opera", "Opera" ], [ "Opera GX", "Opera GX" ], [ "Mozilla Firefox", "Firefox" ], [ "Apple Safari", "Safari" ], [ "NW.js", "NW.js" ] ]), V = new Map([ [ "Chromium", "Chromium" ], [ "Gecko", "Gecko" ], [ "WebKit", "WebKit" ] ]);
        s(W.brands);
        let i = !1;
        a._$Platform$_._$GetDetailedInfo$_ = async () => {
            if (!i) try {
                const t = await navigator.userAgentData.getHighEntropyValues([ "platformVersion", "fullVersionList" ]);
                s(t.fullVersionList), "Windows" === a._$Platform$_._$OS$_ ? a._$Platform$_._$OSVersion$_ = e(t.platformVersion) : a._$Platform$_._$OSVersion$_ = t.platformVersion, 
                i = !0;
            } catch (t) {
                console.warn("Failed to get detailed user agent information: ", t);
            }
        };
    } else {
        let t = function(t, s) {
            const i = Array.isArray(t) ? t : [ t ];
            for (const e of i) {
                const n = e.exec(U);
                if (n) {
                    s(n);
                    break;
                }
            }
        };
        t(/windows\s+nt\s+([\d\.]+)/i, t => {
            a._$Platform$_._$OS$_ = "Windows";
            const s = t[1];
            a._$Platform$_._$OSVersion$_ = e(s);
        }), t(/mac\s+os\s+x\s+([\d\._]+)/i, t => {
            a._$Platform$_._$OS$_ = "macOS", a._$Platform$_._$OSVersion$_ = t[1].replace(/_/g, ".");
        }), t(/CrOS/, () => {
            a._$Platform$_._$OS$_ = "Chrome OS";
        }), t(/linux|openbsd|freebsd|netbsd/i, () => {
            a._$Platform$_._$OS$_ = "Linux";
        }), t(/android/i, () => {
            a._$Platform$_._$OS$_ = "Android";
        }), t(/android\s+([\d\.]+)/i, t => {
            a._$Platform$_._$OS$_ = "Android", a._$Platform$_._$OSVersion$_ = t[1];
        }), a._$Platform$_._$OS$_ === z && (t(/(iphone|ipod|ipad)/i, t => {
            a._$Platform$_._$OS$_ = "iOS";
        }), t([ /iphone\s+os\s+([\d\._]+)/i, /ipad[^)]*os\s+([\d\._]+)/i ], t => {
            a._$Platform$_._$OS$_ = "iOS", a._$Platform$_._$OSVersion$_ = t[1].replace(/_/g, ".");
        }));
        const J = /chrome\//i.test(U), Y = /chromium\//i.test(U), H = /edg\//i.test(U), q = /OPR\//.test(U), Z = /nwjs/i.test(U), X = /safari\//i.test(U), K = /webkit/i.test(U), $ = (H || q || t(/chrome\/([\d\.]+)/i, t => {
            a._$Platform$_._$Browser$_ = "Chrome", a._$Platform$_._$BrowserVersion$_ = t[1], 
            a._$Platform$_._$BrowserEngine$_ = "Chromium";
        }), t(/edg\/([\d\.]+)/i, t => {
            a._$Platform$_._$Browser$_ = "Edge", a._$Platform$_._$BrowserVersion$_ = t[1], 
            a._$Platform$_._$BrowserEngine$_ = "Chromium";
        }), t(/OPR\/([\d\.]+)/, t => {
            a._$Platform$_._$Browser$_ = "Opera", a._$Platform$_._$BrowserVersion$_ = t[1], 
            a._$Platform$_._$BrowserEngine$_ = "Chromium";
        }), t(/chromium\/([\d\.]+)/i, t => {
            a._$Platform$_._$Browser$_ = "Chromium", a._$Platform$_._$BrowserVersion$_ = t[1], 
            a._$Platform$_._$BrowserEngine$_ = "Chromium";
        }), t(/nwjs\/[0-9.]+/i, t => {
            a._$Platform$_._$Browser$_ = "NW.js", a._$Platform$_._$BrowserVersion$_ = t[1], 
            a._$Platform$_._$BrowserEngine$_ = "Chromium", a._$Platform$_._$Context$_ = "nwjs";
        }), t(/firefox\/([\d\.]+)/i, t => {
            a._$Platform$_._$Browser$_ = "Firefox", a._$Platform$_._$BrowserVersion$_ = t[1], 
            a._$Platform$_._$BrowserEngine$_ = "Gecko";
        }), !X || J || Y || H || q || Z || (a._$Platform$_._$Browser$_ = "Safari", 
        a._$Platform$_._$BrowserEngine$_ = "WebKit", t(/version\/([\d\.]+)/i, t => {
            a._$Platform$_._$BrowserVersion$_ = t[1];
        }), t(/crios\/([\d\.]+)/i, t => {
            a._$Platform$_._$Browser$_ = "Chrome for iOS", a._$Platform$_._$BrowserVersion$_ = t[1];
        }), t(/fxios\/([\d\.]+)/i, t => {
            a._$Platform$_._$Browser$_ = "Firefox for iOS", a._$Platform$_._$BrowserVersion$_ = t[1];
        }), t(/edgios\/([\d\.]+)/i, t => {
            a._$Platform$_._$Browser$_ = "Edge for iOS", a._$Platform$_._$BrowserVersion$_ = t[1];
        })), a._$Platform$_._$BrowserEngine$_ === z && K && (a._$Platform$_._$BrowserEngine$_ = "WebKit"), 
        "Android" === a._$Platform$_._$OS$_ && "Safari" === a._$Platform$_._$Browser$_ && (a._$Platform$_._$Browser$_ = "Stock"), 
        new Set([ "Windows", "macOS", "Linux", "Chrome OS" ])), tt = $.has(a._$Platform$_._$OS$_) || "nwjs" === a._$Platform$_._$Context$_;
        a._$Platform$_._$IsDesktop$_ = tt, a._$Platform$_._$IsMobile$_ = !tt;
    }
    "Chrome" === a._$Platform$_._$Browser$_ && "browser" === a._$Platform$_._$Context$_ && /wv\)/.test(U) && (a._$Platform$_._$Context$_ = "webview"), 
    "nwjs" !== a._$Platform$_._$Context$_ && "undefined" != typeof window && (window.matchMedia && window.matchMedia("(display-mode: standalone)").matches || navigator.standalone) && (a._$Platform$_._$Context$_ = "webapp"), 
    a._$Platform$_._$BrowserVersionNumber$_ = parseFloat(a._$Platform$_._$BrowserVersion$_);
    const i = "macOS" === a._$Platform$_._$OS$_ && navigator.maxTouchPoints && 2 < navigator.maxTouchPoints;
    i && (a._$Platform$_._$OS$_ = "iOS", a._$Platform$_._$OSVersion$_ = a._$Platform$_._$BrowserVersion$_, 
    a._$Platform$_._$IsDesktop$_ = !1, a._$Platform$_._$IsMobile$_ = !0, a._$Platform$_._$IsIpadOS$_ = !0), 
    a._$Platform$_._$IsAppleOS$_ = "macOS" === a._$Platform$_._$OS$_ || "iOS" === a._$Platform$_._$OS$_;
}

{
    let r = function(i) {
        return new Promise((t, s) => {
            i.onsuccess = () => t(i.result), i.onerror = () => s(i.error);
        });
    }, o = function(i) {
        return new Promise((t, s) => {
            i.oncomplete = () => t(), i.onerror = () => s(i.error), i.onabort = () => s(i.error);
        });
    }, t = function(t, s) {
        return F(t, s);
    }, s = function(t, s) {
        return F(t, s, !0);
    }, a = function(s) {
        e(s);
        let t = et.get(s);
        return t instanceof Promise || (t = (async i => {
            e(i);
            const t = indexedDB.open(i, st);
            return t.addEventListener("upgradeneeded", t => {
                try {
                    const s = t.target.result;
                    s.createObjectStore(it);
                } catch (t) {
                    console.error("Failed to create objectstore for database " + i, t);
                }
            }), r(t);
        })(s), et.set(s, t), t.catch(t => et.delete(s))), t;
    }, e = function(t) {
        if ("string" != typeof t) throw new TypeError("expected string");
    }, h = function(t, n) {
        const s = t.objectStore(it).openCursor();
        return new Promise(i => {
            const e = [];
            s.onsuccess = t => {
                const s = t.target.result;
                if (s) {
                    switch (n) {
                      case "entries":
                        e.push([ s.key, s.value ]);
                        break;

                      case "keys":
                        e.push(s.key);
                        break;

                      case "values":
                        e.push(s.value);
                    }
                    s.continue();
                } else i(e);
            };
        });
    };
    r, o, t, s, a, e, h;
    const st = 2, it = "keyvaluepairs", et = new Map(), nt = "undefined" != typeof IDBObjectStore && "function" == typeof IDBObjectStore.prototype.getAll, ht = "undefined" != typeof IDBObjectStore && "function" == typeof IDBObjectStore.prototype.getAllKeys;
    async function F(s, i, e = !1, n = !0) {
        const t = await a(s);
        try {
            const h = t.transaction([ it ], e ? "readwrite" : "readonly");
            return i(h);
        } catch (t) {
            if (n && "InvalidStateError" === t.name) return et.delete(s), F(s, i, e, !1);
            throw t;
        }
    }
    class rt {
        constructor(t) {
            e(t), this.name = t;
        }
        async ready() {
            await a(this.name);
        }
        set(n, h) {
            return e(n), s(this.name, async t => {
                const s = t.objectStore(it).put(h, n), i = r(s), e = o(t);
                await Promise.all([ e, i ]);
            });
        }
        get(h) {
            return e(h), t(this.name, async t => {
                const s = t.objectStore(it).get(h), i = r(s), e = o(t), [ , n ] = await Promise.all([ e, i ]);
                return n;
            });
        }
        delete(n) {
            return e(n), s(this.name, async t => {
                const s = t.objectStore(it).delete(n), i = r(s), e = o(t);
                await Promise.all([ e, i ]);
            });
        }
        clear() {
            return s(this.name, async t => {
                const s = t.objectStore(it).clear(), i = r(s), e = o(t);
                await Promise.all([ e, i ]);
            });
        }
        keys() {
            return t(this.name, async t => {
                let s;
                if (ht) {
                    const n = t.objectStore(it).getAllKeys();
                    s = r(n);
                } else s = h(t, "keys");
                const i = o(t), [ , e ] = await Promise.all([ i, s ]);
                return e;
            });
        }
        values() {
            return t(this.name, async t => {
                let s;
                if (nt) {
                    const n = t.objectStore(it).getAll();
                    s = r(n);
                } else s = h(t, "values");
                const i = o(t), [ , e ] = await Promise.all([ i, s ]);
                return e;
            });
        }
        entries() {
            return t(this.name, async t => {
                const s = h(t, "entries"), i = o(t), [ , e ] = await Promise.all([ i, s ]);
                return e;
            });
        }
    }
    self._$KVStorageContainer$_ = rt;
}

{
    let i = function(t) {
        throw new Error(`"${t}" is not implemented`);
    }, e = function(t) {
        if ("function" == typeof t) throw new Error("localforage callback API is not implemented; please use the promise API instead");
    }, n = function(e) {
        return "object" == typeof e ? new Promise(s => {
            const {
                port1: t,
                port2: i
            } = new MessageChannel();
            i.onmessage = t => s(t.data), t.postMessage(e);
        }) : Promise.resolve(e);
    };
    i, e, n;
    const ot = self._$KVStorageContainer$_, at = [ /no available storage method found/i, /an attempt was made to break through the security policy of the user agent/i, /the user denied permission to access the database/i, /a mutation operation was attempted on a database that did not allow mutations/i, /idbfactory\.open\(\) called in an invalid security context/i ];
    new WeakMap();
    class lt {
        constructor(t) {
            this._$_inst$_ = t, this._$_isInMemory$_ = !this._$_inst$_, this._$_isInMemory$_ || "undefined" != typeof indexedDB || (this._$_isInMemory$_ = !0, 
            console.warn("Unable to use local storage because IndexedDB API is not available")), 
            this._$_memoryStorage$_ = new Map();
        }
        _$_MaybeSwitchToMemoryFallback$_(t) {
            if (!this._$_isInMemory$_) for (const s of at) if (t && s.test(t.message)) {
                console.error("Unable to use local storage, reverting to in-memory store: ", t, t.message), 
                this._$_isInMemory$_ = !0;
                break;
            }
        }
        async _$_getItemFallback$_(t) {
            const s = this._$_memoryStorage$_.get(t), i = await n(s);
            return void 0 === i ? null : i;
        }
        async _$_setItemFallback$_(t, s) {
            s = await n(s), this._$_memoryStorage$_.set(t, s);
        }
        _$_removeItemFallback$_(t) {
            this._$_memoryStorage$_.delete(t);
        }
        _$_clearFallback$_() {
            this._$_memoryStorage$_.clear();
        }
        _$_keysFallback$_() {
            return Array.from(this._$_memoryStorage$_.keys());
        }
        _$IsInMemory$_() {
            return this._$_isInMemory$_;
        }
        _$GetMemoryStorage$_() {
            return this._$_memoryStorage$_;
        }
        _$SetMemoryStorage$_(t) {
            this._$_memoryStorage$_ = t;
        }
        async getItem(s, t) {
            if (e(t), this._$_isInMemory$_) return this._$_getItemFallback$_(s);
            let i;
            try {
                i = await this._$_inst$_.get(s);
            } catch (t) {
                return this._$_MaybeSwitchToMemoryFallback$_(t), this._$_isInMemory$_ ? this._$_getItemFallback$_(s) : (console.error(`Error reading '${s}' from storage, returning null: `, t), 
                null);
            }
            return void 0 === i ? null : i;
        }
        async setItem(s, i, t) {
            if (e(t), void 0 === i && (i = null), this._$_isInMemory$_) await this._$_setItemFallback$_(s, i); else try {
                await this._$_inst$_.set(s, i);
            } catch (t) {
                if (this._$_MaybeSwitchToMemoryFallback$_(t), !this._$_isInMemory$_) throw t;
                await this._$_setItemFallback$_(s, i);
            }
        }
        async removeItem(s, t) {
            if (e(t), this._$_isInMemory$_) this._$_removeItemFallback$_(s); else try {
                await this._$_inst$_.delete(s);
            } catch (t) {
                this._$_MaybeSwitchToMemoryFallback$_(t), this._$_isInMemory$_ ? this._$_removeItemFallback$_(s) : console.error(`Error removing '${s}' from storage: `, t);
            }
        }
        async clear(t) {
            if (e(t), this._$_isInMemory$_) this._$_clearFallback$_(); else try {
                await this._$_inst$_.clear();
            } catch (t) {
                this._$_MaybeSwitchToMemoryFallback$_(t), this._$_isInMemory$_ ? this._$_clearFallback$_() : console.error("Error clearing storage: ", t);
            }
        }
        async keys(t) {
            if (e(t), this._$_isInMemory$_) return this._$_keysFallback$_();
            let s = [];
            try {
                s = await this._$_inst$_.keys();
            } catch (t) {
                if (this._$_MaybeSwitchToMemoryFallback$_(t), this._$_isInMemory$_) return this._$_keysFallback$_();
                console.error("Error getting storage keys: ", t);
            }
            return s;
        }
        ready(t) {
            return e(t), this._$_isInMemory$_ ? Promise.resolve(!0) : this._$_inst$_.ready();
        }
        _$createInstance$_(t) {
            if (t.forceInMemoryFallback) return new lt(null);
            {
                const s = t.name;
                if ("string" != typeof s) throw new TypeError("invalid store name");
                const i = new ot(s);
                return new lt(i);
            }
        }
        length(t) {
            i("localforage.length()");
        }
        key(t, s) {
            i("localforage.key()");
        }
        iterate(t, s) {
            i("localforage.iterate()");
        }
        _$setDriver$_(t) {
            i("localforage.setDriver()");
        }
        config(t) {
            i("localforage.config()");
        }
        _$defineDriver$_(t) {
            i("localforage.defineDriver()");
        }
        _$driver$_() {
            i("localforage.driver()");
        }
        supports(t) {
            i("localforage.supports()");
        }
        dropInstance() {
            i("localforage.dropInstance()");
        }
    }
    self.localforage = new lt(new ot("localforage"));
}

{
    const e = self._$C3$_;
    if (e._$Supports$_ = {}, e._$Supports$_._$WebAnimations$_ = (() => {
        try {
            if ("undefined" == typeof document) return !1;
            const t = document.createElement("div");
            if (void 0 === t.animate) return !1;
            const s = t.animate([ {
                opacity: "0"
            }, {
                opacity: "1"
            } ], 1e3);
            return void 0 !== s.reverse;
        } catch (t) {
            return !1;
        }
    })(), e._$Supports$_._$DialogElement$_ = "undefined" != typeof HTMLDialogElement, 
    e._$Supports$_._$RequestIdleCallback$_ = !!self.requestIdleCallback, e._$Supports$_.ImageBitmap = !!self.createImageBitmap, 
    e._$Supports$_.ImageBitmapOptions = !1, e._$Supports$_._$ImageBitmapOptionsResize$_ = !1, 
    e._$Supports$_.ImageBitmap) {
        try {
            self.createImageBitmap(new ImageData(32, 32), {
                premultiplyAlpha: "none"
            }).then(() => {
                e._$Supports$_.ImageBitmapOptions = !0;
            }).catch(() => {
                e._$Supports$_.ImageBitmapOptions = !1;
            });
        } catch (t) {
            e._$Supports$_.ImageBitmapOptions = !1;
        }
        try {
            self.createImageBitmap(new ImageData(32, 32), {
                resizeWidth: 10,
                resizeHeight: 10
            }).then(t => {
                e._$Supports$_._$ImageBitmapOptionsResize$_ = 10 === t.width && 10 === t.height;
            }).catch(() => {
                e._$Supports$_._$ImageBitmapOptionsResize$_ = !1;
            });
        } catch (t) {
            e._$Supports$_._$ImageBitmapOptionsResize$_ = !1;
        }
    }
    if (e._$Supports$_._$ClipboardReadText$_ = !(!navigator.clipboard || !navigator.clipboard.readText), 
    e._$Supports$_._$PermissionsQuery$_ = !(!navigator.permissions || !navigator.permissions.query), 
    e._$Supports$_._$ClipboardPermissionsQuery$_ = !1, e._$Supports$_._$PermissionsQuery$_) {
        const ut = {
            name: "clipboard-read"
        };
        navigator.permissions.query(ut).then(() => {
            e._$Supports$_._$ClipboardPermissionsQuery$_ = !0;
        }).catch(() => {
            e._$Supports$_._$ClipboardPermissionsQuery$_ = !1;
        });
    }
    e._$Supports$_._$AsyncClipboardApi$_ = !!(navigator.permissions && navigator.clipboard && self.ClipboardItem), 
    e._$Supports$_._$Proxies$_ = "undefined" != typeof Proxy, e._$Supports$_._$DownloadAttribute$_ = (() => {
        if ("undefined" == typeof document) return !1;
        const t = document.createElement("a");
        return void 0 !== t.download;
    })(), e._$Supports$_._$Fetch$_ = "function" == typeof fetch, e._$Supports$_._$PersistentStorage$_ = !!(self.isSecureContext && "Opera" !== e._$Platform$_._$Browser$_ && navigator.storage && navigator.storage.persist), 
    e._$Supports$_._$StorageQuotaEstimate$_ = !!(self.isSecureContext && navigator.storage && navigator.storage.estimate), 
    e._$Supports$_._$Fullscreen$_ = (() => {
        if ("undefined" == typeof document) return !1;
        if ("iOS" === e._$Platform$_._$OS$_) return !1;
        const t = document.documentElement;
        return !!(t.requestFullscreen || t.msRequestFullscreen || t.mozRequestFullScreen || t.webkitRequestFullscreen);
    })(), e._$Supports$_.ImageDecoder = void 0 !== self.ImageDecoder, e._$Supports$_._$WebCodecs$_ = !!self.VideoEncoder, 
    e._$Supports$_._$NativeFileSystemAPI$_ = !!self.showOpenFilePicker, e._$Supports$_._$QueryLocalFonts$_ = !!self.queryLocalFonts, 
    e._$Supports$_.UserActivation = !!navigator.userActivation, e._$Supports$_._$CanvasToBlobWebP$_ = !1, 
    (async () => {
        let s;
        "undefined" == typeof document ? s = new OffscreenCanvas(32, 32) : ((s = document.createElement("canvas")).width = 32, 
        s.height = 32);
        const t = s.getContext("2d");
        t.fillStyle = "blue", t.fillRect(0, 0, 32, 32);
        let i = null;
        try {
            s.convertToBlob ? i = await s.convertToBlob({
                type: "image/webp",
                quality: 1
            }) : s.toBlob && (i = await new Promise(t => s.toBlob(t, "image/webp", 1))), 
            e._$Supports$_._$CanvasToBlobWebP$_ = i && "image/webp" === i.type;
        } catch (t) {
            e._$Supports$_._$CanvasToBlobWebP$_ = !1;
        }
    })();
}

{
    let e = function(t, i) {
        return t.reduce((t, s) => (0 < i && Array.isArray(s) ? Array.prototype.push.apply(t, e(s, i - 1)) : t.push(s), 
        t), []);
    };
    e;
    const ct = self._$C3$_;
    if (!String.prototype.trimStart) {
        const ft = /^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*/;
        String.prototype.trimStart = function() {
            return this.replace(ft, "");
        };
    }
    if (!String.prototype.trimEnd) {
        const dt = /[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*$/;
        String.prototype.trimEnd = function() {
            return this.replace(dt, "");
        };
    }
    String.prototype.replaceAll || (String.prototype.replaceAll = function(t, s) {
        return this.replace(new RegExp(ct._$EscapeRegex$_(t), "g"), s);
    }), Array.prototype.values || (Array.prototype.values = function*() {
        for (const t of this) yield t;
    }), Array.prototype.flat || (Array.prototype.flat = function(t = 1) {
        return e(this, t);
    }), Array.prototype.at || (Array.prototype.at = function(t) {
        if ((t = Math.trunc(t) || 0) < 0 && (t += this.length), !(t < 0 || t >= this.length)) return this[t];
    }), String.prototype.at || (String.prototype.at = function(t) {
        if ((t = Math.trunc(t) || 0) < 0 && (t += this.length), !(t < 0 || t >= this.length)) return this[t];
    }), RegExp.escape || (RegExp.escape = function(t) {
        return String(t).replace(/[\\^$*+?.()|[\]{}]/g, "\\$&");
    }), Set.prototype.isSubsetOf || (Set.prototype.isSubsetOf = function(t) {
        if (!(t instanceof Set)) throw new TypeError("argument must be a Set");
        for (const s of this) if (!t.has(s)) return !1;
        return !0;
    }), navigator.storage && !navigator.storage.estimate && navigator.webkitTemporaryStorage && navigator.webkitTemporaryStorage.queryUsageAndQuota && (navigator.storage.estimate = function() {
        return new Promise((i, t) => navigator.webkitTemporaryStorage.queryUsageAndQuota((t, s) => i({
            usage: t,
            quota: s
        }), t));
    }), void 0 === self.isSecureContext && (self.isSecureContext = "https:" === location.protocol), 
    void 0 === self.globalThis && (self.globalThis = self);
}

{
    let i = function(t) {
        let s = pt._$GetCallStack$_(), i = "Assertion failure: " + t + "\n\nStack trace:\n" + s;
        console.error(i);
    };
    i;
    const pt = self._$C3$_;
    self.assert = function(t, s) {
        t || i(s);
    };
}

{
    const n = self._$C3$_, mt = self._$C3X$_, gt = (n._$IsNumber$_ = function(t) {
        return "number" == typeof t;
    }, n._$IsFiniteNumber$_ = function(t) {
        return n._$IsNumber$_(t) && isFinite(t);
    }, n._$RequireNumber$_ = function(t) {
        if (!n._$IsNumber$_(t)) throw new TypeError("expected number");
    }, n._$RequireOptionalNumber$_ = function(t) {
        n._$IsNullOrUndefined$_(t);
    }, n._$RequireNumberInRange$_ = function(t, s, i) {
        if (!n._$IsNumber$_(t) || isNaN(t) || t < s || i < t) throw new RangeError("number outside of range");
    }, n._$RequireAllNumber$_ = function(...s) {
        for (let t of s);
    }, n._$RequireFiniteNumber$_ = function(t) {
        if (!n._$IsFiniteNumber$_(t)) throw new TypeError("expected finite number");
    }, n._$RequireOptionalFiniteNumber$_ = function(t) {
        n._$IsNullOrUndefined$_(t);
    }, n._$RequireAllFiniteNumber$_ = function(...s) {
        for (let t of s);
    }, n._$IsString$_ = function(t) {
        return "string" == typeof t;
    }, n._$RequireString$_ = function(t) {
        if (!n._$IsString$_(t)) throw new TypeError("expected string");
    }, n._$RequireOptionalString$_ = function(t) {
        n._$IsNullOrUndefined$_(t);
    }, n._$RequireAllString$_ = function(...s) {
        for (let t of s);
    }, n._$IsSimpleObject$_ = function(t) {
        if ("object" != typeof t || null === t) return !1;
        let s = Object.getPrototypeOf(t);
        return s ? s.constructor === Object : null === s;
    }, n._$RequireSimpleObject$_ = function(t) {
        if (!n._$IsSimpleObject$_(t)) throw new TypeError("expected simple object");
    }, n._$RequireOptionalSimpleObject$_ = function(t) {
        if (!n._$IsNullOrUndefined$_(t) && !n._$IsSimpleObject$_(t)) throw new TypeError("expected simple object");
    }, n._$IsObject$_ = function(t) {
        return "object" == typeof t && null !== t && !Array.isArray(t);
    }, n._$RequireObject$_ = function(t) {
        if (!n._$IsObject$_(t)) throw new TypeError("expected object");
    }, n._$RequireOptionalObject$_ = function(t) {
        n._$IsNullOrUndefined$_(t);
    }, n._$RequireAllObject$_ = function(...s) {
        for (let t of s);
    }, n._$IsFileLike$_ = function(t) {
        return n._$WeakIsInstanceOf$_(t, Blob) && "string" == typeof t.name;
    }, n._$RequireFileLike$_ = function(t) {
        if (!n._$IsFileLike$_(t)) throw new TypeError("expected file");
    }, n._$RequireOptionalFileLike$_ = function(t) {
        n._$IsNullOrUndefined$_(t);
    }, n._$IsArray$_ = function(t) {
        return Array.isArray(t);
    }, n._$RequireArray$_ = function(t) {
        if (!n._$IsArray$_(t)) throw new TypeError("expected array");
    }, n._$RequireOptionalArray$_ = function(t) {
        n._$IsNullOrUndefined$_(t);
    }, n._$RequireAllArray$_ = function(...s) {
        for (let t of s);
    }, n._$Is2DArray$_ = function(t) {
        return !(!n._$IsArray$_(t) || t.length && !n._$IsArray$_(t[0]));
    }, n._$Require2DArray$_ = function(s) {
        if (!n._$Is2DArray$_(s)) throw new TypeError("expected 2d array");
        for (let t of s) if (!n._$IsArray$_(t)) throw new TypeError("expected 2d array");
    }, n._$RequireOptional2DArray$_ = function(t) {
        n._$IsNullOrUndefined$_(t);
    }, n._$IsFunction$_ = function(t) {
        return "function" == typeof t;
    }, n._$RequireFunction$_ = function(t, s) {
        if (!n._$IsFunction$_(t)) throw new TypeError("expected function");
        if (!n._$IsNullOrUndefined$_(s) && t !== s) throw new TypeError("expected same function reference");
    }, n._$RequireOptionalFunction$_ = function(t) {
        n._$IsNullOrUndefined$_(t);
    }, n._$RequireAllFunction$_ = function(...s) {
        for (let t of s);
    }, n._$RequireAnyFunction$_ = function(s, ...i) {
        if (!n._$IsFunction$_(s)) throw new TypeError("expected function");
        if (!i.length) throw new Error("missing comparison functions");
        for (let t of i) if (!n._$IsNullOrUndefined$_(t) && s === t) return;
        throw new TypeError("expected same function reference");
    }, n._$RequireOptionalAllFunction$_ = function(...s) {
        if (!n._$IsNullOrUndefined$_(s)) for (let t of s);
    }, n._$IsInstanceOf$_ = function(t, s) {
        return t instanceof s;
    }, n._$IsInstanceOfAny$_ = function(s, ...i) {
        for (let t of i) if (n._$IsInstanceOf$_(s, t)) return !0;
        return !1;
    }, n._$RequireInstanceOf$_ = function(t, s) {
        if (!n._$IsInstanceOf$_(t, s)) throw new TypeError("unexpected type");
    }, n._$RequireOptionalInstanceOf$_ = function(t, s) {
        n._$IsNullOrUndefined$_(t);
    }, n._$RequireAllInstanceOf$_ = function(t, ...s) {
        for (let t of s);
    }, n._$RequireAnyInstanceOf$_ = function(t, ...s) {
        if (!n._$IsInstanceOfAny$_(t, ...s)) throw new TypeError("unexpected type");
    }, n._$RequireAnyOptionalInstanceOf$_ = function(t, ...s) {
        if (!n._$IsNullOrUndefined$_(t) && !n._$IsInstanceOfAny$_(t, ...s)) throw new TypeError("unexpected type");
    }, n._$IsArrayOf$_ = function(s, i) {
        for (let t of s) if (!n._$IsInstanceOf$_(t, i)) return !1;
        return !0;
    }, n._$IsArrayOfFiniteNumbers$_ = function(s) {
        for (let t of s) if (!n._$IsFiniteNumber$_(t)) return !1;
        return !0;
    }, n._$RequireArrayOf$_ = function(s, t) {
        for (let t of s);
    }, n._$RequireOptionalArrayOf$_ = function(s, t) {
        if (!n._$IsNullOrUndefined$_(s)) for (let t of s);
    }, n._$RequireOptionalArrayOfFunctions$_ = function(s, t) {
        if (!n._$IsNullOrUndefined$_(s)) for (let t of s);
    }, n._$RequireArrayOfAny$_ = function(s) {
        for (let t of s);
    }, n._$RequireOptionalArrayOfAny$_ = function(s) {
        if (!n._$IsNullOrUndefined$_(s)) for (let t of s);
    }, n._$IsDOMNode$_ = function(t, s) {
        return !(n._$IsNullOrUndefined$_(t) || !n._$IsString$_(t.nodeName)) && (!s || n._$equalsNoCase$_(t.nodeName, s));
    }, n._$RequireDOMNode$_ = function(t, s) {
        if (n._$IsNullOrUndefined$_(t) || !n._$IsString$_(t.nodeName)) throw new TypeError("expected DOM node");
        if (s && !n._$equalsNoCase$_(t.nodeName, s)) throw new TypeError(`expected DOM '${s}' node`);
    }, n._$RequireOptionalDOMNode$_ = function(t, s) {
        n._$IsNullOrUndefined$_(t);
    }, n._$IsHTMLElement$_ = function(t, s) {
        return !(n._$IsNullOrUndefined$_(t) || !n._$IsString$_(t.tagName)) && (!s || n._$equalsNoCase$_(t.tagName, s));
    }, n._$RequireHTMLElement$_ = function(t, s) {
        if (n._$IsNullOrUndefined$_(t) || !n._$IsString$_(t.tagName)) throw new TypeError("expected HTML element");
        if (s && !n._$equalsNoCase$_(t.tagName, s)) throw new TypeError(`expected HTML '${s}' element`);
    }, n._$RequireOptionalHTMLElement$_ = function(t, s) {
        n._$IsNullOrUndefined$_(t);
    }, n._$IsDrawable$_ = function(t) {
        return n._$IsHTMLElement$_(t, "img") || n._$IsHTMLElement$_(t, "canvas") || n._$IsHTMLElement$_(t, "video") || "undefined" != typeof OffscreenCanvas && t instanceof OffscreenCanvas || "undefined" != typeof ImageBitmap && t instanceof ImageBitmap;
    }, n._$RequireDrawable$_ = function(t) {
        if (!n._$IsDrawable$_(t)) throw new TypeError("expected drawable");
    }, n._$RequireOptionalDrawable$_ = function(t) {
        n._$IsNullOrUndefined$_(t);
    }, n._$IsDrawableOrImageData$_ = function(t) {
        return t instanceof ImageData || n._$IsDrawable$_(t);
    }, n._$RequireDrawableOrImageData$_ = function(t) {
        if (!n._$IsDrawableOrImageData$_(t)) throw new TypeError("expected drawable or image data");
    }, n._$RequireOptionalDrawableOrImageData$_ = function(t) {
        if (!n._$IsNullOrUndefined$_(t) && !n._$IsDrawableOrImageData$_(t)) throw new TypeError("expected drawable or image data");
    }, n._$IsStringLike$_ = function(t) {
        return "string" == typeof t || n.HtmlString && t instanceof n.HtmlString || t instanceof n._$BBString$_;
    }, n._$RequireStringLike$_ = function(t) {
        if (!n._$IsStringLike$_(t)) throw new TypeError("expected string-like");
    }, n._$RequireOptionalStringLike$_ = function(t) {
        n._$IsNullOrUndefined$_(t);
    }, n._$RequireAllStringLike$_ = function(...s) {
        for (let t of s);
    }, n._$RequireOverride$_ = function() {
        throw new Error("must be overridden");
    }, n._$NotYetImplemented$_ = function() {
        throw new Error("not yet implemented");
    }, n._$IsGeneratorFunction$_ = function(t) {
        return t.constructor === function*() {}.constructor;
    }, n._$RequireGeneratorFunction$_ = function(t) {
        if (!n._$IsGeneratorFunction$_(t)) throw new Error("expected generator function");
    }, n._$IsIterable$_ = function(t) {
        return "function" === t[Symbol.iterator];
    }, n._$RequireIterable$_ = function(t) {
        if (!n._$IsIterable$_(t)) throw new Error("expected iterable");
    }, n._$IsDefined$_ = function(t) {
        return !n._$IsNullOrUndefined$_(t);
    }, n._$IsNullOrUndefined$_ = function(t) {
        return null == t;
    }, n._$AreArrayElementsOfSameType$_ = function(s) {
        let i = s[0].constructor;
        for (let t of s) if (t.constructor !== i) return !1;
        return i;
    }, n._$AreArrayElementsOfType$_ = function(s, i) {
        for (let t of s) if (!(t instanceof i)) return !1;
        return !0;
    }, Object.getPrototypeOf(Uint8Array));
    n._$IsTypedArray$_ = function(t) {
        return n._$IsInstanceOf$_(t, gt);
    }, n._$RequireTypedArray$_ = function(t) {}, n._$WeakRequireTypedArray$_ = function(t) {
        n._$WeakRequireInstanceOf$_(t, gt);
    }, n._$WeakRequireAnyInstanceOf$_ = function(t, ...s) {
        if (!n._$WeakIsAnyInstanceOf$_(t, ...s)) throw new TypeError("unexpected type");
    }, n._$WeakIsAnyInstanceOf$_ = function(t, ...s) {
        for (const i of s) if (n._$WeakIsInstanceOf$_(t, i)) return !0;
        return !1;
    }, n._$WeakRequireInstanceOf$_ = function(t, s) {
        if (!n._$WeakIsInstanceOf$_(t, s)) throw new TypeError("unexpected type");
    }, n._$WeakIsInstanceOf$_ = function(t, s) {
        for (;t = Object.getPrototypeOf(t); ) if (t.constructor.name === s.name) return !0;
        return !1;
    }, mt._$RequireNumber$_ = n._$RequireNumber$_, mt._$RequireOptionalNumber$_ = n._$RequireOptionalNumber$_, 
    mt._$RequireFiniteNumber$_ = n._$RequireFiniteNumber$_, mt._$RequireOptionalFiniteNumber$_ = n._$RequireOptionalFiniteNumber$_, 
    mt._$RequireString$_ = n._$RequireString$_, mt._$RequireOptionalString$_ = n._$RequireOptionalString$_, 
    mt._$RequireObject$_ = n._$RequireObject$_, mt._$RequireOptionalObject$_ = n._$RequireOptionalObject$_, 
    mt._$RequireArray$_ = n._$RequireArray$_, mt._$RequireOptionalArray$_ = n._$RequireOptionalArray$_, 
    mt._$RequireFunction$_ = n._$RequireFunction$_, mt._$RequireOptionalFunction$_ = n._$RequireOptionalFunction$_, 
    mt._$RequireInstanceOf$_ = n._$RequireInstanceOf$_, mt._$RequireOptionalInstanceOf$_ = n._$RequireOptionalInstanceOf$_, 
    mt._$IsNullOrUndefined$_ = n._$IsNullOrUndefined$_;
}

{
    let e = function(t, s) {
        let i = p.getType(t), e = p.getType(s);
        return "null" === i || "null" === e || "undefined" !== i && "undefined" !== e && i === e;
    }, n = function(t) {
        console.warn("[Defence] " + t + " @", p._$GetCallStack$_());
    }, i = function() {
        if (f = -1, 0 < a.size || 0 < l.size) {
            let t = new Set([ ...a.keys() ].map(t => p._$getName$_(t))), s = [ ...t ].join(",");
            console.warn("An object derived from DefendedBase was not protected with debugDefend(). This will disable some checks. See the coding guidelines! Possible affected class names: " + s), 
            a.clear(), l.clear();
        }
    }, h = function(s) {
        let i = new Set();
        for (let t in s) i.add(t);
        return i;
    }, r = function(t, s) {
        let i = h(s), e = d.get(t);
        if (e) {
            let s = [];
            for (let t of e.values()) i.has(t) ? i.delete(t) : s.push(t);
            p._$appendArray$_(s, [ ...i ]), s.length && console.warn(`[Defence] '${p._$getName$_(t)}' constructor creates inconsistent properties: ` + s.join(", "));
        } else d.set(t, i);
    };
    e, n, i, h, r;
    const p = self._$C3$_, yt = new Map();
    p._$ColorLog$_ = function(t, s) {
        console.log("%c" + t, "font-weight: bold; color:" + s);
    }, p._$RafLog$_ = function(t, ...s) {
        yt.has(t) || yt.set(t, -1), -1 === yt.get(t) && yt.set(t, requestAnimationFrame(() => {
            console.log("%c" + t, "font-weight: bold", ...s), yt.set(t, -1);
        }));
    };
    let o, a = (p._$StartMeasure$_ = function(t) {
        performance.mark(t), (o = o || new Map()).has(t) || o.set(t, {
            current: 0,
            total: 0,
            _$average$_: 0,
            _$calls$_: 1,
            toString: function() {
                return `${t} :: current => ${this.current.toPrecision(3)} :: average => ${this._$average$_.toPrecision(3)} :: calls => ` + this._$calls$_;
            }
        });
    }, p._$EndMeasure$_ = function(t) {
        performance.measure("measure-" + t, t);
        const s = performance.getEntriesByName("measure-" + t)[0], i = o.get(t);
        i.current = s.duration, i.total += i.current, i._$average$_ = i.total / i._$calls$_, 
        console.log(i.toString()), i._$calls$_++, performance.clearMarks(t), performance.clearMeasures("measure-" + t);
    }, p._$GetCallStack$_ = function() {
        return new Error().stack;
    }, p._$Debugger$_ = function() {}, p.cast = function(t, s) {
        return t && t instanceof s ? t : null;
    }, p._$getName$_ = function(t) {
        return void 0 === t ? "undefined" : null === t ? "null" : "boolean" == typeof t ? "<boolean>" : p._$IsNumber$_(t) ? "<number>" : p._$IsString$_(t) ? "<string>" : p._$IsArray$_(t) ? "<array>" : "symbol" == typeof t ? "<" + t.toString() + ">" : p._$IsFunction$_(t) ? t.name && "Function" !== t.name ? t.name : "<anonymous function>" : "object" == typeof t ? t.constructor && t.constructor.name && "Object" !== t.constructor.name ? t.constructor.name : "<anonymous object>" : "<unknown>";
    }, p.getType = function(t) {
        return null === t ? "null" : Array.isArray(t) ? "array" : typeof t;
    }, p.range = function*(s, i) {
        if (!isFinite(Math.abs(s - i))) throw new Error("Invalid parameters");
        if (i < s) for (let t = s - 1; t >= i; t--) yield t; else for (let t = s; t < i; t++) yield t;
    }, new Map()), l = new Map(), u = new WeakMap(), c = new WeakMap();
    p._$DefendHandler$_ = {};
    const Mt = new Set([ "then", "splice" ]);
    p._$DefendHandler$_.get = function(t, s) {
        return s in t || "symbol" == typeof s || Mt.has(s) || n(`Accessed missing property '${s}' from defended object '${p._$getName$_(t)}', returning undefined`), 
        c.has(t) && "symbol" != typeof s && !Mt.has(s) && n(`Accessed property '${s}' on a released object '${p._$getName$_(t)}'
Object was originally released at: ${c.get(t)})
Call stack at access: `), t[s];
    }, p._$DefendHandler$_.set = function(t, s, i) {
        return s in t || a.has(t) || n(`Set non-existent property '${s}' to '${i}' on defended object '${p._$getName$_(t)}'`), 
        e(t[s], i) || a.has(t) || n(`Set '${p.getType(t[s])}' property '${s}' to type '${p.getType(i)}' on defended object '${p._$getName$_(t)}'`), 
        c.has(t) && n(`Set property '${s}' on a released object '${p._$getName$_(t)}'
Object was originally released at: ${c.get(t)})
Call stack at access: `), t[s] = i, !0;
    }, p._$DefendHandler$_.deleteProperty = function(t, s) {
        throw new ReferenceError(`Cannot delete property '${s}' from defended object '${p._$getName$_(t)}'`);
    }, p._$DefendHandler$_.defineProperty = function(t, s, i) {
        throw new ReferenceError(`Cannot define property '${s}' on defended object '${p._$getName$_(t)}'`);
    }, p._$DefendHandler$_.enumerate = function(t) {
        throw new ReferenceError(`Cannot enumerate defended object '${p._$getName$_(t)}'`);
    };
    let f = -1, d = (p._$DefendedBase$_ = class {
        constructor() {
            if (p._$isDebugDefend$_ && p._$Supports$_._$Proxies$_) {
                let t = Object.create(new.target.prototype), s = new Proxy(t, p._$DefendHandler$_);
                return a.set(t, s), l.set(s, t), u.set(s, t), -1 === f && (f = requestAnimationFrame(i)), 
                s;
            }
        }
    }, p._$debugDefend$_ = function(s) {
        if (p._$isDebugDefend$_ && p._$Supports$_._$Proxies$_ && s instanceof p._$DefendedBase$_) {
            if (l.has(s)) {
                let t = l.get(s);
                l.delete(s), a.delete(t);
            }
            return s;
        }
        return p.isDebug ? Object.seal(s) : s;
    }, p._$New$_ = function(t, ...s) {
        let i;
        try {
            i = new t(...s);
        } catch (t) {
            throw l.clear(), a.clear(), t;
        }
        return p._$isDebugDefend$_ && r(t, i), p._$debugDefend$_(i);
    }, p._$Release$_ = function(t) {
        let s = u.get(t);
        s && c.set(s, p._$GetCallStack$_());
    }, p._$WasReleased$_ = function(t) {
        let s = u.get(t);
        return !!s && !!c.get(s);
    }, new Map());
    p._$PerfMark$_ = class {
        constructor(t) {
            this._$_name$_ = "", t && this.start(t);
        }
        start(t) {
            p._$isPerformanceProfiling$_ && (this._$_name$_ = t, performance.mark(this._$_name$_ + "-Start"));
        }
        end() {
            p._$isPerformanceProfiling$_ && (performance.mark(this._$_name$_ + "-End"), 
            performance.measure(this._$_name$_, this._$_name$_ + "-Start", this._$_name$_ + "-End"));
        }
        next(t) {
            p._$isPerformanceProfiling$_ && (this.end(), this._$_name$_ = t, performance.mark(this._$_name$_ + "-Start"));
        }
    };
}

{
    let i = function(t) {
        return 0 === t && 1 / t < 0;
    };
    i;
    const y = self._$C3$_, wt = 2 * Math.PI, xt = Math.PI / 180, St = 180 / Math.PI, Tt = (y.wrap = function(t, s, i) {
        t = Math.floor(t), s = Math.floor(s);
        const e = (i = Math.floor(i)) - s;
        if (0 == e) return i;
        if (t < s) {
            const n = i - (s - t) % e;
            return n === i ? 0 : n;
        }
        return s + (t - s) % e;
    }, y._$mapToRange$_ = function(t, s, i, e, n) {
        const h = i - s;
        if (0 == h && 0 === e) return t;
        const r = n - e;
        return (t - s) * r / h + e;
    }, y.normalize = function(t, s, i) {
        return s - i == 0 ? 1 : (t - s) / (i - s);
    }, y._$clamp$_ = function(t, s, i) {
        return t < s ? s : i < t ? i : t;
    }, y._$clampAngle$_ = function(t) {
        return (t %= wt) < 0 && (t += wt), t;
    }, y._$toRadians$_ = function(t) {
        return t * xt;
    }, y._$toDegrees$_ = function(t) {
        return t * St;
    }, y._$hypot2DFast$_ = function(t, s) {
        return Math.sqrt(t * t + s * s);
    }, y._$hypot3DFast$_ = function(t, s, i) {
        return Math.sqrt(t * t + s * s + i * i);
    }, y._$distanceTo$_ = function(t, s, i, e) {
        return y._$hypot2DFast$_(i - t, e - s);
    }, y._$distanceSquared$_ = function(t, s, i, e) {
        const n = i - t, h = e - s;
        return n * n + h * h;
    }, y._$angleTo$_ = function(t, s, i, e) {
        return Math.atan2(e - s, i - t);
    }, y._$angleDiff$_ = function(t, s) {
        if (t === s) return 0;
        let i = Math.sin(t), e = Math.cos(t), n = Math.sin(s), h = Math.cos(s), r = i * n + e * h;
        return 1 <= r ? 0 : r <= -1 ? Math.PI : Math.acos(r);
    }, y._$angleRotate$_ = function(t, s, i) {
        let e = Math.sin(t), n = Math.cos(t), h = Math.sin(s), r = Math.cos(s);
        return Math.acos(e * h + n * r) > i ? 0 < n * h - e * r ? y._$clampAngle$_(t + i) : y._$clampAngle$_(t - i) : y._$clampAngle$_(s);
    }, y._$angleClockwise$_ = function(t, s) {
        let i = Math.sin(t), e = Math.cos(t), n = Math.sin(s), h = Math.cos(s);
        return e * n - i * h <= 0;
    }, y._$angleLerp$_ = function(t, s, i, e = 0) {
        let n = y._$angleDiff$_(t, s), h = wt * e;
        return y._$angleClockwise$_(s, t) ? y._$clampAngle$_(t + (n + h) * i) : y._$clampAngle$_(t - (n + h) * i);
    }, y._$angleLerpClockwise$_ = function(t, s, i, e = 0) {
        const n = y._$angleDiff$_(t, s), h = wt * e;
        return y._$angleClockwise$_(s, t) ? y._$clampAngle$_(t + (n + h) * i) : y._$clampAngle$_(t + (wt - n + h) * i);
    }, y._$angleLerpAntiClockwise$_ = function(t, s, i, e = 0) {
        const n = y._$angleDiff$_(t, s), h = wt * e;
        return y._$angleClockwise$_(s, t) ? y._$clampAngle$_(t - (-wt + n - h) * i) : y._$clampAngle$_(t - (n + h) * i);
    }, y._$angleReflect$_ = function(t, s) {
        const i = y._$angleDiff$_(t, s);
        return y._$angleClockwise$_(t, s) ? y._$clampAngle$_(s - i) : y._$clampAngle$_(s + i);
    }, y._$lerp$_ = function(t, s, i) {
        return t + i * (s - t);
    }, y._$unlerp$_ = function(t, s, i) {
        return t === s ? 0 : (i - t) / (s - t);
    }, y._$relerp$_ = function(t, s, i, e, n) {
        return y._$lerp$_(e, n, y._$unlerp$_(t, s, i));
    }, y._$qarp$_ = function(t, s, i, e) {
        return y._$lerp$_(y._$lerp$_(t, s, e), y._$lerp$_(s, i, e), e);
    }, y._$cubic$_ = function(t, s, i, e, n) {
        return y._$lerp$_(y._$qarp$_(t, s, i, n), y._$qarp$_(s, i, e, n), n);
    }, y._$cosp$_ = function(t, s, i) {
        return (t + s + (t - s) * Math.cos(i * Math.PI)) / 2;
    }, y._$isPOT$_ = function(t) {
        return 0 < t && 0 == (t - 1 & t);
    }, y._$nextHighestPowerOfTwo$_ = function(s) {
        --s;
        for (let t = 1; t < 32; t <<= 1) s |= s >> t;
        return s + 1;
    }, y._$roundToNearestFraction$_ = function(t, s) {
        return Math.round(t * s) / s;
    }, y._$floorToNearestFraction$_ = function(t, s) {
        return Math.floor(t * s) / s;
    }, y._$roundToDp$_ = function(t, s) {
        s = Math.max(Math.floor(s), 0);
        const i = Math.pow(10, s);
        return Math.round(t * i) / i;
    }, y._$countDecimals$_ = function(t) {
        return Math.floor(t) !== t && t.toString().split(".")[1].length || 0;
    }, y.toFixed = function(t, s) {
        let i = t.toFixed(s), e = i.length - 1;
        for (;0 <= e && "0" === i.charAt(e); --e);
        return 0 <= e && "." === i.charAt(e) && --e, e < 0 ? i : i.substr(0, e + 1);
    }, y._$PackRGB$_ = function(t, s, i) {
        return y._$clamp$_(t, 0, 255) | y._$clamp$_(s, 0, 255) << 8 | y._$clamp$_(i, 0, 255) << 16;
    }, 1024), bt = 16384, vt = 8191, Ct = (y._$PackRGBAEx$_ = function(t, s, i, e) {
        return t = y._$clamp$_(Math.floor(1024 * t), -8192, vt), s = y._$clamp$_(Math.floor(1024 * s), -8192, vt), 
        i = y._$clamp$_(Math.floor(1024 * i), -8192, vt), e = y._$clamp$_(Math.floor(1023 * e), 0, 1023), 
        t < 0 && (t += bt), s < 0 && (s += bt), i < 0 && (i += bt), -(t * bt * bt * Tt + s * bt * Tt + i * Tt + e);
    }, y._$PackRGBEx$_ = function(t, s, i) {
        return y._$PackRGBAEx$_(t, s, i, 1);
    }, y._$GetRValue$_ = function(s) {
        if (0 <= s) return (255 & s) / 255;
        {
            let t = Math.floor(-s / (bt * bt * Tt));
            return t > vt && (t -= bt), t / 1024;
        }
    }, y._$GetGValue$_ = function(s) {
        if (0 <= s) return ((65280 & s) >> 8) / 255;
        {
            let t = Math.floor(-s % (bt * bt * Tt) / (bt * Tt));
            return t > vt && (t -= bt), t / 1024;
        }
    }, y._$GetBValue$_ = function(s) {
        if (0 <= s) return ((16711680 & s) >> 16) / 255;
        {
            let t = Math.floor(-s % (bt * Tt) / Tt);
            return t > vt && (t -= bt), t / 1024;
        }
    }, y._$GetAValue$_ = function(t) {
        if (i(t)) return 0;
        if (0 <= t) return 1;
        {
            const s = Math.floor(-t % Tt);
            return s / 1023;
        }
    }, y._$greatestCommonDivisor$_ = function(s, i) {
        for (s = Math.floor(s), i = Math.floor(i); 0 !== i; ) {
            let t = i;
            i = s % i, s = t;
        }
        return s;
    }, [ [ 3, 2 ], [ 4, 3 ], [ 5, 4 ], [ 5, 3 ], [ 6, 5 ], [ 14, 9 ], [ 16, 9 ], [ 16, 10 ], [ 21, 9 ] ]);
    y._$getAspectRatio$_ = function(i, e) {
        if ((i = Math.floor(i)) === (e = Math.floor(e))) return [ 1, 1 ];
        for (let s of Ct) {
            let t = i / s[0] * s[1];
            if (Math.abs(e - t) < 1) return s.slice(0);
            if (t = i / s[1] * s[0], Math.abs(e - t) < 1) return [ s[1], s[0] ];
        }
        let t = y._$greatestCommonDivisor$_(i, e);
        return [ i / t, e / t ];
    }, y._$segmentsIntersect$_ = function(t, s, i, e, n, h, r, o) {
        const a = Math.min(t, i), l = Math.max(t, i), u = Math.min(n, r), c = Math.max(n, r);
        if (l < u || c < a) return !1;
        const f = Math.min(s, e), d = Math.max(s, e), p = Math.min(h, o), m = Math.max(h, o);
        if (d < p || m < f) return !1;
        const g = n - t + r - i, y = h - s + o - e, M = i - t, w = e - s, x = r - n, S = o - h, T = Math.abs(w * x - S * M), b = x * y - S * g;
        if (Math.abs(b) > T) return !1;
        const v = M * y - w * g;
        return Math.abs(v) <= T;
    }, y._$segmentsIntersectPreCalc$_ = function(t, s, i, e, n, h, r, o, a, l, u, c) {
        const f = Math.min(a, u), d = Math.max(a, u);
        if (h < f || d < n) return !1;
        const p = Math.min(l, c), m = Math.max(l, c);
        if (o < p || m < r) return !1;
        const g = a - t + u - i, y = l - s + c - e, M = i - t, w = e - s, x = u - a, S = c - l, T = Math.abs(w * x - S * M), b = x * y - S * g;
        if (Math.abs(b) > T) return !1;
        const v = M * y - w * g;
        return Math.abs(v) <= T;
    }, y._$segmentIntersectsQuad$_ = function(t, s, i, e, n) {
        const h = Math.min(t, i), r = Math.max(t, i), o = Math.min(s, e), a = Math.max(s, e), l = n._$getTlx$_(), u = n._$getTly$_(), c = n._$getTrx$_(), f = n._$getTry$_(), d = n._$getBrx$_(), p = n._$getBry$_(), m = n._$getBlx$_(), g = n._$getBly$_();
        return y._$segmentsIntersectPreCalc$_(t, s, i, e, h, r, o, a, l, u, c, f) || y._$segmentsIntersectPreCalc$_(t, s, i, e, h, r, o, a, c, f, d, p) || y._$segmentsIntersectPreCalc$_(t, s, i, e, h, r, o, a, d, p, m, g) || y._$segmentsIntersectPreCalc$_(t, s, i, e, h, r, o, a, m, g, l, u);
    }, y._$segmentIntersectsAnyN$_ = function(s, i, e, n, h) {
        let r = Math.min(s, e), o = Math.max(s, e), a = Math.min(i, n), l = Math.max(i, n), u = 0;
        for (let t = h.length - 4; u <= t; u += 2) if (y._$segmentsIntersectPreCalc$_(s, i, e, n, r, o, a, l, h[u], h[u + 1], h[u + 2], h[u + 3])) return !0;
        return y._$segmentsIntersectPreCalc$_(s, i, e, n, r, o, a, l, h[u], h[u + 1], h[0], h[1]);
    };
    y._$rayIntersect$_ = function(t, s, i, e, n, h, r, o) {
        const a = i - t, l = e - s, u = r - n, c = o - h, f = a * c - l * u;
        if (0 == f) return 2;
        const d = ((s - e) * (r - t) + a * (o - s)) / f;
        return 0 < d && d < 1 + 1e-6 ? (c * (r - t) + (n - r) * (o - s)) / f : 2;
    }, y._$rayIntersectExtended$_ = function(t, s, i, e, n, h, r, o, a) {
        const l = (r - n) * a, u = (o - h) * a;
        return y._$rayIntersect$_(t, s, i, e, n - l, h - u, r + l, o + u);
    }, y._$isPointInTriangleInclusive$_ = function(t, s, i, e, n, h, r, o) {
        const a = n - i, l = h - e, u = r - i, c = o - e, f = t - i, d = s - e, p = a * a + l * l, m = a * u + l * c, g = a * f + l * d, y = u * u + c * c, M = u * f + c * d, w = 1 / (p * y - m * m), x = (y * g - m * M) * w, S = (p * M - m * g) * w;
        return 0 <= x && 0 <= S && x + S <= 1;
    }, y._$triangleCartesianToBarycentric$_ = function(t, s, i, e, n, h, r, o) {
        const a = n - i, l = h - e, u = r - i, c = o - e, f = t - i, d = s - e, p = a * a + l * l, m = a * u + l * c, g = u * u + c * c, y = f * a + d * l, M = f * u + d * c, w = p * g - m * m, x = (g * y - m * M) / w, S = (p * M - m * y) / w, T = 1 - x - S;
        return [ T, x, S ];
    }, y._$triangleBarycentricToCartesian3d$_ = function(t, s, i, e, n, h, r, o, a, l, u, c) {
        return [ t * e + s * r + i * l, t * n + s * o + i * u, t * h + s * a + i * c ];
    };
}

{
    let l = self._$C3$_, s = null, i = "";
    if ("undefined" != typeof document) {
        const Gt = (s = document).querySelector("base");
        (i = Gt && Gt.hasAttribute("href") ? Gt.getAttribute("href") : "") && !(i = i.startsWith("/") ? i.substr(1) : i).endsWith("/") && (i += "/");
    }
    l._$GetBaseHref$_ = function() {
        return i;
    }, l._$GetBaseURL$_ = function() {
        if (!s) return "";
        const t = s.location;
        return l._$GetPathFromURL$_(t.origin + t.pathname) + i;
    }, l._$GetPathFromURL$_ = function(t) {
        if (!t.length) return t;
        if (t.endsWith("/") || t.endsWith("\\")) return t;
        const s = Math.max(t.lastIndexOf("/"), t.lastIndexOf("\\"));
        return -1 === s ? "" : t.substr(0, s + 1);
    }, l._$GetFilenameFromURL$_ = function(t) {
        if (!t.length) return t;
        if (t.endsWith("/") || t.endsWith("\\")) return "";
        const s = Math.max(t.lastIndexOf("/"), t.lastIndexOf("\\"));
        return -1 === s ? t : t.substr(s + 1);
    }, l._$GetFileExtension$_ = function(t) {
        let s = t.lastIndexOf(".");
        return s < 1 ? "" : t.substr(s);
    }, l._$SetFileExtension$_ = function(t, s) {
        const i = t.lastIndexOf(".");
        return -1 === i ? t + "." + s : t.substr(0, i + 1) + s;
    }, l._$GetFileNamePart$_ = function(t) {
        let s = t.lastIndexOf(".");
        return s < 1 ? t : t.substr(0, s);
    }, l._$NormalizeFileSeparator$_ = function(t) {
        return t.replace(/\\/g, "/");
    }, l._$IsFileExtension$_ = function(t, s) {
        const i = t ? l._$GetFileExtension$_(t).slice(1) : "";
        return s === i;
    }, l._$FileNameEquals$_ = function(t, s) {
        let i, e;
        return l._$IsFileLike$_(t) && (i = l._$GetFileNamePart$_(t.name)), l._$IsString$_(t) && (i = l._$GetFileNamePart$_(t)), 
        l._$IsFileLike$_(s) && (e = l._$GetFileNamePart$_(s.name)), l._$IsString$_(s) && (e = l._$GetFileNamePart$_(s)), 
        i === e;
    }, l._$ParseFilePath$_ = function(t) {
        t = l._$NormalizeFileSeparator$_(t);
        let s = /^\w\:\//.exec(t), i = (s ? (s = s[0], "/" !== (t = t.slice(3))[0] && (t = "/" + t)) : s = "", 
        (t = 1 < (t = t.replace(/\/{2,}/g, "/")).length && "/" === t.slice(-1) ? t.slice(0, -1) : t).lastIndexOf("/") + 1), e = "", n = t, h, r = "";
        0 < i && (e = t.slice(0, i), n = t.slice(i));
        const o = (h = n).lastIndexOf("."), a = (0 < o && (r = n.slice(o), h = n.slice(0, -r.length)), 
        s + e + n);
        return {
            dir: e,
            _$base$_: n,
            name: h,
            root: s,
            ext: r,
            _$full$_: a
        };
    }, l._$Wait$_ = function(i, e) {
        return new Promise((t, s) => {
            self.setTimeout(t, i, e);
        });
    }, l._$swallowException$_ = function(t) {
        try {
            t();
        } catch (t) {
            l.isDebug && console.warn("Swallowed exception: ", t);
        }
    }, l._$noop$_ = function() {}, l._$equalsNoCase$_ = function(t, s) {
        return "string" == typeof t && "string" == typeof s && (t === s || t.normalize().toLowerCase() === s.normalize().toLowerCase());
    }, l._$equalsCase$_ = function(t, s) {
        return "string" == typeof t && "string" == typeof s && (t === s || t.normalize() === s.normalize());
    }, l._$typedArraySet16$_ = function(t, s, i) {
        t[i++] = s[0], t[i++] = s[1], t[i++] = s[2], t[i++] = s[3], t[i++] = s[4], 
        t[i++] = s[5], t[i++] = s[6], t[i++] = s[7], t[i++] = s[8], t[i++] = s[9], 
        t[i++] = s[10], t[i++] = s[11], t[i++] = s[12], t[i++] = s[13], t[i++] = s[14], 
        t[i] = s[15];
    }, l._$truncateArray$_ = function(t, s) {
        t.length = s;
    }, l._$clearArray$_ = function(t) {
        t && 0 !== t.length && l._$truncateArray$_(t, 0);
    }, l._$clear2DArray$_ = function(i) {
        if (i) {
            for (let s = 0; s < i.length; s++) {
                let t = i[s];
                l._$truncateArray$_(t, 0);
            }
            l._$truncateArray$_(i, 0);
        }
    }, l._$extendArray$_ = function(s, i, e) {
        const n = s.length;
        if (!((i |= 0) <= n)) for (let t = n; t < i; ++t) s.push(e);
    }, l._$resizeArray$_ = function(t, s, i) {
        const e = t.length;
        (s |= 0) < e ? l._$truncateArray$_(t, s) : e < s && l._$extendArray$_(t, s, i);
    }, l._$shallowAssignArray$_ = function(t, s) {
        l._$clearArray$_(t), l._$appendArray$_(t, s);
    }, l._$appendArray$_ = function(i, e) {
        if (e.length < 1e4) i.push(...e); else for (let t = 0, s = e.length; t < s; ++t) i.push(e[t]);
    }, l._$arrayRemove$_ = function(i, e) {
        if (!((e = Math.floor(e)) < 0 || e >= i.length)) {
            let s = i.length - 1;
            for (let t = e; t < s; ++t) i[t] = i[t + 1];
            l._$truncateArray$_(i, s);
        }
    }, l._$arrayFindRemove$_ = function(t, s) {
        let i = t.indexOf(s);
        0 <= i && t.splice(i, 1);
    }, l._$arraysEqual$_ = function(s, i) {
        let e = s.length;
        if (i.length !== e) return !1;
        for (let t = 0; t < e; ++t) if (s[t] !== i[t]) return !1;
        return !0;
    }, l._$arrayFilterOut$_ = function(i, e) {
        let n = [], h = 0;
        for (let s = 0, t = i.length; s < t; ++s) {
            let t = i[s];
            e(t) ? n.push(t) : (i[h] = t, ++h);
        }
        return l._$truncateArray$_(i, h), n;
    }, l._$arrayRemoveAllInSet$_ = function(i, e) {
        let t = i.length, n = 0;
        for (let s = 0, t = i.length; s < t; ++s) {
            let t = i[s];
            e.has(t) || (i[n++] = t);
        }
        return l._$truncateArray$_(i, n), t - n;
    }, l._$isArrayIndexInBounds$_ = function(t, s) {
        return t === Math.floor(t) && 0 <= t && t < s.length;
    }, l._$validateArrayIndex$_ = function(t, s) {
        if (!l._$isArrayIndexInBounds$_(t, s)) throw new RangeError("array index out of bounds");
    }, l._$cloneArray$_ = function(t) {
        return t.slice();
    }, l._$deepCloneArray$_ = function(t, i) {
        let e = [];
        for (let s of t) if (l._$IsObject$_(s)) {
            let t = i(s);
            if (!t) throw new Error("missing clone");
            if (t.constructor !== s.constructor) throw new Error("object is not a clone");
            e.push(t);
        } else l._$IsArray$_(s) ? e.push(l._$deepCloneArray$_(s, i)) : e.push(s);
        return e;
    }, l._$clone2DArray$_ = function(s) {
        let i = [];
        for (let t of s) i.push(t.slice());
        return i;
    }, l._$splitStringAndNormalize$_ = function(t, s = " ") {
        return t ? t.split(s).map(t => t.trim()).filter(t => !!t) : [];
    }, l._$filterSet$_ = function(t, s, i) {
        const e = new Set();
        for (const n of t.values()) s(n) && (i ? e.add(i(n)) : e.add(n));
        return e;
    }, l._$mergeSets$_ = function(t, s) {
        return t.union ? t.union(s) : new Set([ ...t, ...s ]);
    }, l._$mergeSetsInPlace$_ = function(t, s) {
        for (const i of s) t.add(i);
        return t;
    }, l.first = function(s) {
        for (let t of s) return t;
        return null;
    }, l.xor = function(t, s) {
        return !t != !s;
    }, l.compare = function(t, s, i) {
        switch (s) {
          case 0:
            return t === i;

          case 1:
            return t !== i;

          case 2:
            return t < i;

          case 3:
            return t <= i;

          case 4:
            return i < t;

          case 5:
            return i <= t;

          default:
            return !1;
        }
    }, l._$hasAnyOwnProperty$_ = function(s) {
        for (let t in s) if (s.hasOwnProperty(t)) return !0;
        return !1;
    }, l._$PromiseAllWithProgress$_ = function(o, a) {
        return o.length ? new Promise((i, e) => {
            let n = [], h = 0, r = !1;
            for (let s = 0, t = o.length; s < t; ++s) n.push(void 0), o[s].then(t => {
                r || (n[s] = t, ++h === o.length ? i(n) : a(h, o.length));
            }).catch(t => {
                r = !0, e(t);
            });
        }) : Promise.resolve([]);
    };
    let e = [], n = (l._$AddLibraryMemoryCallback$_ = function(t) {
        e.push(t);
    }, l._$GetEstimatedLibraryMemoryUsage$_ = function() {
        let i = 0;
        for (let s of e) {
            let t = s();
            i += t;
        }
        return Math.floor(i);
    }, 1), h = new Map(), r = new MessageChannel(), o = (r.port2.onmessage = function(t) {
        const s = t.data, i = h.get(s);
        h.delete(s), i && i(performance.now());
    }, l._$RequestUnlimitedAnimationFrame$_ = function(t) {
        const s = n++;
        return h.set(s, t), r.port1.postMessage(s), s;
    }, l._$CancelUnlimitedAnimationFrame$_ = function(t) {
        h.delete(t);
    }, l._$PostTask$_ = l._$RequestUnlimitedAnimationFrame$_, l._$WaitForNextTask$_ = function() {
        return new Promise(t => l._$PostTask$_(t));
    }, new Set());
    l._$RequestPostAnimationFrame$_ = function(s) {
        const i = self.requestAnimationFrame(async t => {
            await l._$WaitForNextTask$_(), o.has(i) && (o.delete(i), s(t));
        });
        return o.add(i), i;
    }, l._$CancelPostAnimationFrame$_ = function(t) {
        o.has(t) && (self.cancelAnimationFrame(t), o.delete(t));
    };
}

{
    const h = self._$C3$_;
    h._$IsAbsoluteURL$_ = function(t) {
        return /^(?:[a-z\-]+:)?\/\//.test(t) || "data:" === t.substr(0, 5) || "blob:" === t.substr(0, 5);
    }, h._$IsRelativeURL$_ = function(t) {
        return !h._$IsAbsoluteURL$_(t);
    }, h._$ThrowIfNotOk$_ = function(t) {
        if (!t.ok) throw new Error(`fetch '${t.url}' response returned ${t.status} ` + t.statusText);
    }, h._$FetchOk$_ = function(t, s) {
        return fetch(t, s).then(t => (h._$ThrowIfNotOk$_(t), t));
    }, h._$FetchText$_ = function(t) {
        return h._$FetchOk$_(t).then(t => t.text());
    }, h._$FetchJson$_ = function(t) {
        return h._$FetchOk$_(t).then(t => t.json());
    }, h._$FetchBlob$_ = function(t) {
        return h._$FetchOk$_(t).then(t => t.blob());
    }, h._$FetchArrayBuffer$_ = function(t) {
        return h._$FetchOk$_(t).then(t => t.arrayBuffer());
    }, h._$FetchImage$_ = function(e) {
        return new Promise((t, s) => {
            const i = new Image();
            i.onload = () => t(i), i.onerror = t => s(t), i.src = e;
        });
    }, h._$BlobToArrayBuffer$_ = function(e) {
        return "function" == typeof e.arrayBuffer ? e.arrayBuffer() : new Promise((t, s) => {
            const i = new FileReader();
            i.onload = () => t(i.result), i.onerror = () => s(i.error), i.readAsArrayBuffer(e);
        });
    }, h._$BlobToString$_ = function(e) {
        return "function" == typeof e.text ? e.text() : new Promise((t, s) => {
            const i = new FileReader();
            i.onload = () => t(i.result), i.onerror = () => s(i.error), i.readAsText(e);
        });
    }, h._$BlobToJson$_ = function(t) {
        return h._$BlobToString$_(t).then(t => JSON.parse(t));
    }, h._$BlobToImage$_ = async function(t, s) {
        let i = URL.createObjectURL(t);
        try {
            const e = await h._$FetchImage$_(i);
            return URL.revokeObjectURL(i), i = "", s && "function" == typeof e.decode && await e.decode(), 
            e;
        } finally {
            i && URL.revokeObjectURL(i);
        }
    }, h._$CreateCanvas$_ = function(t, s) {
        if ("undefined" == typeof document || "function" != typeof document.createElement) return new OffscreenCanvas(t, s);
        {
            const i = document.createElement("canvas");
            return i.width = t, i.height = s, i;
        }
    }, h._$CanvasToBlob$_ = function(s, i, e) {
        if ("number" != typeof e && (e = 1), i = i || "image/png", e = h._$clamp$_(e, 0, 1), 
        s.convertToBlob) return s.convertToBlob({
            type: i,
            quality: e
        });
        if (s.toBlob) return new Promise(t => s.toBlob(t, i, e));
        throw new Error("could not convert canvas to blob");
    }, h._$DrawableToBlob$_ = function(t, s, i) {
        const e = h._$CreateCanvas$_(t.width, t.height), n = e.getContext("2d");
        return n.drawImage(t, 0, 0), h._$CanvasToBlob$_(e, s, i);
    }, h._$ImageDataToBlob$_ = function(t, s, i) {
        if (h._$Supports$_.ImageBitmapOptions) return createImageBitmap(t, {
            premultiplyAlpha: "none"
        }).then(t => h._$DrawableToBlob$_(t, s, i));
        if (h._$Supports$_.ImageBitmap) return createImageBitmap(t).then(t => h._$DrawableToBlob$_(t, s, i));
        {
            const e = h._$CreateCanvas$_(t.width, t.height), n = e.getContext("2d");
            return n.putImageData(t, 0, 0), h._$CanvasToBlob$_(e, s, i);
        }
    }, h._$CopySet$_ = function(t, s) {
        t.clear();
        for (const i of s) t.add(i);
    }, h._$MapToObject$_ = function(t) {
        const s = Object.create(null);
        for (const [ i, e ] of t.entries()) s[i] = e;
        return s;
    }, h._$ObjectToMap$_ = function(t, s) {
        s.clear();
        for (const [ i, e ] of Object.entries(t)) s.set(i, e);
    }, h._$ToSuperJSON$_ = function s(t) {
        if ("object" != typeof t || null === t) return t;
        if (t instanceof Set) return {
            _c3type_: "set",
            data: [ ...t ].map(t => s(t))
        };
        if (t instanceof Map) return {
            _c3type_: "map",
            data: [ ...t ].map(t => [ t[0], s(t[1]) ])
        };
        {
            const i = Object.create(null);
            for (const [ e, n ] of Object.entries(t)) i[e] = s(n);
            return i;
        }
    }, h._$FromSuperJSON$_ = function s(t) {
        if ("object" == typeof t & null !== t) {
            if ("set" === t._c3type_) return new Set(t.data.map(t => s(t)));
            if ("map" === t._c3type_) return new Map(t.data.map(t => [ t[0], s(t[1]) ]));
            {
                const i = Object.create(null);
                for (const [ e, n ] of Object.entries(t)) i[e] = s(n);
                return i;
            }
        }
        return t;
    }, h._$CSSToCamelCase$_ = function(t) {
        if (t.startsWith("--")) return t;
        let s = "", i = !1, e = 0;
        for (const n of t) "-" === n ? 0 < e && (i = !0) : i ? (s += n.toUpperCase(), 
        i = !1) : s += n, ++e;
        return s;
    }, h._$IsIterator$_ = function(t) {
        return "object" == typeof t && "function" == typeof t.next;
    }, h._$MakeFilledArray$_ = function(s, i) {
        const e = [];
        if ("function" == typeof i) for (let t = 0; t < s; ++t) e.push(i()); else for (let t = 0; t < s; ++t) e.push(i);
        return e;
    };
}

{
    let e = function(t) {
        return 0 === t.length ? "00" : 1 === t.length ? "0" + t : t;
    }, l = function(t, s, i) {
        return i < 0 && (i += 1), 1 < i && --i, i < 1 / 6 ? t + 6 * (s - t) * i : i < .5 ? s : i < 2 / 3 ? t + (s - t) * (2 / 3 - i) * 6 : t;
    };
    e, l;
    const u = self._$C3$_, It = /([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?/i, _t = /([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?,([0-9.])/i;
    u._$Color$_ = class {
        constructor(t, s, i, e) {
            this._$_r$_ = NaN, this._$_g$_ = NaN, this._$_b$_ = NaN, this._$_a$_ = NaN, 
            this._$_r$_ = 0, this._$_g$_ = 0, this._$_b$_ = 0, this._$_a$_ = 0, 
            t instanceof u._$Color$_ ? this.set(t) : this._$setRgba$_(t || 0, s || 0, i || 0, e || 0);
        }
        _$setRgb$_(t, s, i) {
            return this._$_r$_ = +t, this._$_g$_ = +s, this._$_b$_ = +i, this._$clamp$_(), 
            this;
        }
        _$setRgba$_(t, s, i, e) {
            return this._$_r$_ = +t, this._$_g$_ = +s, this._$_b$_ = +i, this._$_a$_ = +e, 
            this._$clamp$_(), this;
        }
        set(t) {
            return this._$_r$_ = t._$_r$_, this._$_g$_ = t._$_g$_, this._$_b$_ = t._$_b$_, 
            this._$_a$_ = t._$_a$_, this;
        }
        _$copy$_(t) {
            return this.set(t);
        }
        add(t) {
            this._$_r$_ += t._$_r$_, this._$_g$_ += t._$_g$_, this._$_b$_ += t._$_b$_, 
            this._$_a$_ += t._$_a$_, this._$clamp$_();
        }
        _$addRgb$_(t, s, i, e = 0) {
            this._$_r$_ += +t, this._$_g$_ += +s, this._$_b$_ += +i, this._$_a$_ += +e, 
            this._$clamp$_();
        }
        _$diff$_(t) {
            this._$setR$_(Math.max(this._$_r$_, t._$_r$_) - Math.min(this._$_r$_, t._$_r$_)), 
            this._$setG$_(Math.max(this._$_g$_, t._$_g$_) - Math.min(this._$_g$_, t._$_g$_)), 
            this._$setB$_(Math.max(this._$_b$_, t._$_b$_) - Math.min(this._$_b$_, t._$_b$_)), 
            this._$setA$_(Math.max(this._$_a$_, t._$_a$_) - Math.min(this._$_a$_, t._$_a$_)), 
            this._$clamp$_();
        }
        _$copyRgb$_(t) {
            this._$_r$_ = t._$_r$_, this._$_g$_ = t._$_g$_, this._$_b$_ = t._$_b$_;
        }
        _$setR$_(t) {
            this._$_r$_ = u._$clamp$_(+t, 0, 1);
        }
        _$getR$_() {
            return this._$_r$_;
        }
        _$setG$_(t) {
            this._$_g$_ = u._$clamp$_(+t, 0, 1);
        }
        _$getG$_() {
            return this._$_g$_;
        }
        _$setB$_(t) {
            this._$_b$_ = u._$clamp$_(+t, 0, 1);
        }
        _$getB$_() {
            return this._$_b$_;
        }
        _$setA$_(t) {
            this._$_a$_ = u._$clamp$_(+t, 0, 1);
        }
        _$getA$_() {
            return this._$_a$_;
        }
        clone() {
            return u._$New$_(u._$Color$_, this._$_r$_, this._$_g$_, this._$_b$_, this._$_a$_);
        }
        toArray() {
            return [ this._$_r$_, this._$_g$_, this._$_b$_, this._$_a$_ ];
        }
        _$toTypedArray$_() {
            return new Float64Array(this.toArray());
        }
        _$writeToTypedArray$_(t, s) {
            t[s++] = this._$_r$_, t[s++] = this._$_g$_, t[s++] = this._$_b$_, t[s] = this._$_a$_;
        }
        _$writeRGBToTypedArray$_(t, s) {
            t[s++] = this._$_r$_, t[s++] = this._$_g$_, t[s] = this._$_b$_;
        }
        equals(t) {
            return this._$_r$_ === t._$_r$_ && this._$_g$_ === t._$_g$_ && this._$_b$_ === t._$_b$_ && this._$_a$_ === t._$_a$_;
        }
        _$equalsIgnoringAlpha$_(t) {
            return this._$_r$_ === t._$_r$_ && this._$_g$_ === t._$_g$_ && this._$_b$_ === t._$_b$_;
        }
        _$equalsRgb$_(t, s, i) {
            return this._$_r$_ === t && this._$_g$_ === s && this._$_b$_ === i;
        }
        _$equalsRgba$_(t, s, i, e) {
            return this._$_r$_ === t && this._$_g$_ === s && this._$_b$_ === i && this._$_a$_ === e;
        }
        _$equalsF32Array$_(t, s) {
            return t[s] === Math.fround(this._$_r$_) && t[s + 1] === Math.fround(this._$_g$_) && t[s + 2] === Math.fround(this._$_b$_) && t[s + 3] === Math.fround(this._$_a$_);
        }
        _$equalsRGBF32Array$_(t, s) {
            return t[s] === Math.fround(this._$_r$_) && t[s + 1] === Math.fround(this._$_g$_) && t[s + 2] === Math.fround(this._$_b$_);
        }
        multiply(t) {
            this._$_r$_ *= t._$_r$_, this._$_g$_ *= t._$_g$_, this._$_b$_ *= t._$_b$_, 
            this._$_a$_ *= t._$_a$_;
        }
        _$multiplyAlpha$_(t) {
            this._$_r$_ *= t, this._$_g$_ *= t, this._$_b$_ *= t, this._$_a$_ *= t;
        }
        _$premultiply$_() {
            return this._$_r$_ *= this._$_a$_, this._$_g$_ *= this._$_a$_, this._$_b$_ *= this._$_a$_, 
            this;
        }
        _$unpremultiply$_() {
            return this._$_r$_ /= this._$_a$_, this._$_g$_ /= this._$_a$_, this._$_b$_ /= this._$_a$_, 
            this;
        }
        _$clamp$_() {
            return this._$_r$_ = u._$clamp$_(this._$_r$_, 0, 1), this._$_g$_ = u._$clamp$_(this._$_g$_, 0, 1), 
            this._$_b$_ = u._$clamp$_(this._$_b$_, 0, 1), this._$_a$_ = u._$clamp$_(this._$_a$_, 0, 1), 
            this;
        }
        _$setFromRgbValue$_(t) {
            this._$_r$_ = u._$GetRValue$_(t), this._$_g$_ = u._$GetGValue$_(t), 
            this._$_b$_ = u._$GetBValue$_(t), this._$_a$_ = u._$GetAValue$_(t);
        }
        _$getCssRgb$_(t, s, i) {
            const e = u._$IsFiniteNumber$_(t) ? t : this._$getR$_(), n = u._$IsFiniteNumber$_(s) ? s : this._$getG$_(), h = u._$IsFiniteNumber$_(i) ? i : this._$getB$_();
            return `rgb(${100 * e}%, ${100 * n}%, ${100 * h}%)`;
        }
        _$getCssRgba$_(t, s, i, e) {
            const n = u._$IsFiniteNumber$_(t) ? t : this._$getR$_(), h = u._$IsFiniteNumber$_(s) ? s : this._$getG$_(), r = u._$IsFiniteNumber$_(i) ? i : this._$getB$_(), o = u._$IsFiniteNumber$_(e) ? e : this._$getA$_();
            return `rgba(${100 * n}%, ${100 * h}%, ${100 * r}%, ${o})`;
        }
        _$toHexString$_() {
            const t = Math.round(255 * this._$getR$_()), s = Math.round(255 * this._$getG$_()), i = Math.round(255 * this._$getB$_());
            return "#" + e(t.toString(16)) + e(s.toString(16)) + e(i.toString(16));
        }
        _$parseHexString$_(t) {
            if ("string" != typeof t) return !1;
            let s, i, e;
            if (3 === (t = "#" === (t = t.trim()).charAt(0) ? t.substr(1) : t).length) s = parseInt(t[0], 16) / 15, 
            i = parseInt(t[1], 16) / 15, e = parseInt(t[2], 16) / 15; else {
                if (6 !== t.length) return !1;
                s = parseInt(t.substr(0, 2), 16) / 255, i = parseInt(t.substr(2, 2), 16) / 255, 
                e = parseInt(t.substr(4, 2), 16) / 255;
            }
            return isFinite(s) && this._$setR$_(s), isFinite(i) && this._$setG$_(i), 
            isFinite(e) && this._$setB$_(e), this._$setA$_(1), !0;
        }
        _$toCommaSeparatedRgb$_() {
            const t = Math.round(255 * this._$getR$_()), s = Math.round(255 * this._$getG$_()), i = Math.round(255 * this._$getB$_());
            return t + `, ${s}, ` + i;
        }
        _$toRgbArray$_() {
            const t = Math.round(255 * this._$getR$_()), s = Math.round(255 * this._$getG$_()), i = Math.round(255 * this._$getB$_());
            return [ t, s, i ];
        }
        _$parseCommaSeparatedRgb$_(t) {
            if ("string" != typeof t) return !1;
            const s = (t = t.replace(/^rgb\(|\)|%/, "")).split(",");
            if (s.length < 3) return !1;
            const i = parseInt(s[0].trim(), 10) / 255, e = parseInt(s[1].trim(), 10) / 255, n = parseInt(s[2].trim(), 10) / 255;
            return isFinite(i) && this._$setR$_(i), isFinite(e) && this._$setG$_(e), 
            isFinite(n) && this._$setB$_(n), this._$setA$_(1), !0;
        }
        _$parseCommaSeparatedPercentageRgb$_(t) {
            if ("string" != typeof t) return !1;
            const s = (t = t.replace(/^rgb\(|\)|%/, "")).split(",");
            if (s.length < 3) return !1;
            const i = parseInt(s[0].trim(), 10) / 100, e = parseInt(s[1].trim(), 10) / 100, n = parseInt(s[2].trim(), 10) / 100;
            return isFinite(i) && this._$setR$_(i), isFinite(e) && this._$setG$_(e), 
            isFinite(n) && this._$setB$_(n), this._$setA$_(1), !0;
        }
        _$parseCommaSeparatedRgba$_(t) {
            if ("string" != typeof t) return !1;
            const s = (t = t.replace(/^rgba\(|\)|%/, "")).split(",");
            if (s.length < 4) return !1;
            const i = parseInt(s[0].trim(), 10) / 255, e = parseInt(s[1].trim(), 10) / 255, n = parseInt(s[2].trim(), 10) / 255, h = parseFloat(s[3].trim());
            return isFinite(i) && this._$setR$_(i), isFinite(e) && this._$setG$_(e), 
            isFinite(n) && this._$setB$_(n), isFinite(h) && this._$setA$_(h), !0;
        }
        _$parseCommaSeparatedPercentageRgba$_(t) {
            if ("string" != typeof t) return !1;
            const s = (t = t.replace(/^rgba\(|\)|%/, "")).split(",");
            if (s.length < 4) return !1;
            const i = parseInt(s[0].trim(), 10) / 100, e = parseInt(s[1].trim(), 10) / 100, n = parseInt(s[2].trim(), 10) / 100, h = parseFloat(s[3].trim());
            return isFinite(i) && this._$setR$_(i), isFinite(e) && this._$setG$_(e), 
            isFinite(n) && this._$setB$_(n), isFinite(h) && this._$setA$_(h), !0;
        }
        _$parseString$_(t) {
            if ("string" != typeof t) return !1;
            if ((t = t.replace(/\s+/, "")).includes(",")) {
                if (t.startsWith("rgb(")) return t.includes("%") ? this._$parseCommaSeparatedPercentageRgb$_(t) : this._$parseCommaSeparatedRgb$_(t);
                if (t.startsWith("rgba(")) return t.includes("%") ? this._$parseCommaSeparatedPercentageRgba$_(t) : this._$parseCommaSeparatedRgba$_(t);
                if (t.startsWith("hsl(") || t.startsWith("hsla(")) return this._$parseHSLString$_(t);
                {
                    const s = t.split(",");
                    return t.includes("%") ? 3 === s.length ? this._$parseCommaSeparatedPercentageRgb$_(t) : 4 === s.length && this._$parseCommaSeparatedPercentageRgba$_(t) : 3 === s.length ? this._$parseCommaSeparatedRgb$_(t) : 4 === s.length && this._$parseCommaSeparatedRgba$_(t);
                }
            }
            return this._$parseHexString$_(t);
        }
        toJSON() {
            return [ this._$_r$_, this._$_g$_, this._$_b$_, this._$_a$_ ];
        }
        _$setFromHSLA$_(t, s, i, e) {
            let n, h, r;
            if (t %= 360, s = u._$clamp$_(s, 0, 100), i = u._$clamp$_(i, 0, 100), 
            e = u._$clamp$_(e, 0, 1), t /= 360, i /= 100, 0 == (s /= 100)) n = h = r = i; else {
                const o = i < .5 ? i * (1 + s) : i + s - i * s, a = 2 * i - o;
                n = l(a, o, t + 1 / 3), h = l(a, o, t), r = l(a, o, t - 1 / 3);
            }
            return this._$setR$_(n), this._$setG$_(h), this._$setB$_(r), this._$setA$_(e), 
            this;
        }
        _$parseHSLString$_(t) {
            const s = t.replace(/ |hsl|hsla|\(|\)|;/gi, ""), i = It.exec(s), e = _t.exec(s);
            return i && 4 === i.length ? (this._$setFromHSLA$_(+i[1], +i[2], +i[3], 1), 
            !0) : !(!e || 5 !== e.length || (this._$setFromHSLA$_(+i[1], +i[2], +i[3], +i[4]), 
            0));
        }
        _$toHSLAString$_() {
            const t = this._$_r$_, s = this._$_g$_, i = this._$_b$_, e = this._$_a$_, n = u._$Color$_._$GetHue$_(t, s, i), h = u._$Color$_._$GetSaturation$_(t, s, i), r = u._$Color$_._$GetLuminosity$_(t, s, i);
            return `hsla(${n}, ${h}%, ${r}%, ${e})`;
        }
        _$toHSLAArray$_() {
            const t = this._$_r$_, s = this._$_g$_, i = this._$_b$_;
            return [ u._$Color$_._$GetHue$_(t, s, i), u._$Color$_._$GetSaturation$_(t, s, i), u._$Color$_._$GetLuminosity$_(t, s, i), this._$_a$_ ];
        }
        _$setFromJSON$_(t) {
            !Array.isArray(t) || t.length < 3 || (this._$_r$_ = t[0], this._$_g$_ = t[1], 
            this._$_b$_ = t[2], this._$_a$_ = 4 <= t.length ? t[3] : 1);
        }
        set r(t) {
            this._$setR$_(t);
        }
        get r() {
            return this._$getR$_();
        }
        set _$g$_(t) {
            this._$setG$_(t);
        }
        get _$g$_() {
            return this._$getG$_();
        }
        set b(t) {
            this._$setB$_(t);
        }
        get b() {
            return this._$getB$_();
        }
        set a(t) {
            this._$setA$_(t);
        }
        get a() {
            return this._$getA$_();
        }
        _$setAtIndex$_(t, s) {
            switch (t) {
              case 0:
                this._$setR$_(s);
                break;

              case 1:
                this._$setG$_(s);
                break;

              case 2:
                this._$setB$_(s);
                break;

              case 3:
                this._$setA$_(s);
                break;

              default:
                throw new RangeError("invalid color index");
            }
        }
        _$getAtIndex$_(t) {
            switch (t) {
              case 0:
                return this._$getR$_();

              case 1:
                return this._$getG$_();

              case 2:
                return this._$getB$_();

              case 3:
                return this._$getA$_();

              default:
                throw new RangeError("invalid color index");
            }
        }
        static _$Equals$_(t, s) {
            let i, e;
            if (Array.isArray(t)) (i = new u._$Color$_())._$setFromJSON$_(t); else {
                if (!(t instanceof u._$Color$_)) throw new Error("unexpected type");
                i = t;
            }
            if (Array.isArray(s)) (e = new u._$Color$_())._$setFromJSON$_(s); else {
                if (!(s instanceof u._$Color$_)) throw new Error("unexpected type");
                e = s;
            }
            return i.equals(e);
        }
        static _$DiffChannel$_(t, s) {
            return u._$clamp$_(Math.max(t, s) - Math.min(t, s), 0, 1);
        }
        static _$Diff$_(t, s) {
            const i = new u._$Color$_();
            return i._$setR$_(Math.max(t._$_r$_, s._$_r$_) - Math.min(t._$_r$_, s._$_r$_)), 
            i._$setG$_(Math.max(t._$_g$_, s._$_g$_) - Math.min(t._$_g$_, s._$_g$_)), 
            i._$setB$_(Math.max(t._$_b$_, s._$_b$_) - Math.min(t._$_b$_, s._$_b$_)), 
            i._$setA$_(Math.max(t._$_a$_, s._$_a$_) - Math.min(t._$_a$_, s._$_a$_)), 
            i;
        }
        static _$DiffNoAlpha$_(t, s) {
            const i = new u._$Color$_(0, 0, 0, 1);
            return i._$setR$_(Math.max(t._$_r$_, s._$_r$_) - Math.min(t._$_r$_, s._$_r$_)), 
            i._$setG$_(Math.max(t._$_g$_, s._$_g$_) - Math.min(t._$_g$_, s._$_g$_)), 
            i._$setB$_(Math.max(t._$_b$_, s._$_b$_) - Math.min(t._$_b$_, s._$_b$_)), 
            i;
        }
        static _$GetHue$_(t, s, i) {
            const e = Math.max(t, s, i), n = Math.min(t, s, i);
            if (e === n) return 0;
            let h = 0;
            switch (e) {
              case t:
                h = (s - i) / (e - n) + (s < i ? 6 : 0);
                break;

              case s:
                h = (i - t) / (e - n) + 2;
                break;

              case i:
                h = (t - s) / (e - n) + 4;
            }
            return Math.round(h / 6 * 360);
        }
        static _$GetSaturation$_(t, s, i) {
            const e = Math.max(t, s, i), n = Math.min(t, s, i);
            if (e === n) return 0;
            const h = (e + n) / 2, r = e - n, o = .5 < h ? r / (2 - e - n) : r / (e + n);
            return Math.round(100 * o);
        }
        static _$GetLuminosity$_(t, s, i) {
            const e = Math.max(t, s, i), n = Math.min(t, s, i), h = (e + n) / 2;
            return e ? Math.round(100 * h) : 0;
        }
    }, u._$Color$_._$White$_ = Object.freeze(u._$New$_(u._$Color$_, 1, 1, 1, 1)), 
    u._$Color$_._$Black$_ = Object.freeze(u._$New$_(u._$Color$_, 0, 0, 0, 1)), u._$Color$_._$TransparentBlack$_ = Object.freeze(u._$New$_(u._$Color$_, 0, 0, 0, 0));
}

{
    const Et = self._$C3$_;
    Et._$Vector2$_ = class {
        constructor(t, s) {
            this._$_x$_ = 0, this._$_y$_ = 0, t instanceof Et._$Vector2$_ ? this._$copy$_(t) : this.set(t || 0, s || 0);
        }
        set(t, s) {
            this._$_x$_ = +t, this._$_y$_ = +s;
        }
        _$copy$_(t) {
            this._$_x$_ = t._$_x$_, this._$_y$_ = t._$_y$_;
        }
        equals(t) {
            return this._$_x$_ === t._$_x$_ && this._$_y$_ === t._$_y$_;
        }
        _$equalsValues$_(t, s) {
            return this._$_x$_ === t && this._$_y$_ === s;
        }
        _$equalsF32Array$_(t, s) {
            return t[s] === Math.fround(this._$_x$_) && t[s + 1] === Math.fround(this._$_y$_);
        }
        _$setX$_(t) {
            this._$_x$_ = +t;
        }
        _$getX$_() {
            return this._$_x$_;
        }
        _$setY$_(t) {
            this._$_y$_ = +t;
        }
        _$getY$_() {
            return this._$_y$_;
        }
        toArray() {
            return [ this._$_x$_, this._$_y$_ ];
        }
        _$toTypedArray$_() {
            return new Float64Array(this.toArray());
        }
        _$writeToTypedArray$_(t, s) {
            t[s++] = this._$_x$_, t[s] = this._$_y$_;
        }
        offset(t, s) {
            this._$_x$_ += +t, this._$_y$_ += +s;
        }
        scale(t, s) {
            this._$_x$_ *= t, this._$_y$_ *= s;
        }
        _$divide$_(t, s) {
            this._$_x$_ /= t, this._$_y$_ /= s;
        }
        round() {
            this._$_x$_ = Math.round(this._$_x$_), this._$_y$_ = Math.round(this._$_y$_);
        }
        floor() {
            this._$_x$_ = Math.floor(this._$_x$_), this._$_y$_ = Math.floor(this._$_y$_);
        }
        ceil() {
            this._$_x$_ = Math.ceil(this._$_x$_), this._$_y$_ = Math.ceil(this._$_y$_);
        }
        angle() {
            return Et._$angleTo$_(0, 0, this._$_x$_, this._$_y$_);
        }
        _$lengthSquared$_() {
            return this._$_x$_ * this._$_x$_ + this._$_y$_ * this._$_y$_;
        }
        length() {
            return Et._$hypot2DFast$_(this._$_x$_, this._$_y$_);
        }
        _$rotatePrecalc$_(t, s) {
            const i = this._$_x$_ * s - this._$_y$_ * t;
            this._$_y$_ = this._$_y$_ * s + this._$_x$_ * t, this._$_x$_ = i;
        }
        rotate(t) {
            0 !== t && this._$rotatePrecalc$_(Math.sin(t), Math.cos(t));
        }
        _$rotateAbout$_(t, s, i) {
            0 === t || s === this._$_x$_ && i === this._$_y$_ || (this._$_x$_ -= s, 
            this._$_y$_ -= i, this._$rotatePrecalc$_(Math.sin(t), Math.cos(t)), 
            this._$_x$_ += +s, this._$_y$_ += +i);
        }
        move(t, s) {
            0 !== s && (this._$_x$_ += Math.cos(t) * s, this._$_y$_ += Math.sin(t) * s);
        }
        normalize() {
            const t = this.length();
            0 !== t && 1 !== t && (this._$_x$_ /= t, this._$_y$_ /= t);
        }
        _$clamp$_(t, s) {
            this._$_x$_ = Et._$clamp$_(this._$_x$_, t, s), this._$_y$_ = Et._$clamp$_(this._$_y$_, t, s);
        }
        _$dot$_(t) {
            return this._$_x$_ * t._$_x$_ + this._$_y$_ * t._$_y$_;
        }
        reverse() {
            this._$_x$_ = -this._$_x$_, this._$_y$_ = -this._$_y$_;
        }
        _$perp$_() {
            let t = this._$_x$_;
            return this._$_x$_ = this._$_y$_, this._$_y$_ = -t, this;
        }
    };
}

{
    const Nt = self._$C3$_;
    Nt.Rect = class {
        constructor(t, s, i, e) {
            this._$_left$_ = NaN, this._$_top$_ = NaN, this._$_right$_ = NaN, this._$_bottom$_ = NaN, 
            this._$_left$_ = 0, this._$_top$_ = 0, this._$_right$_ = 0, this._$_bottom$_ = 0, 
            t instanceof Nt.Rect ? this._$copy$_(t) : this.set(t || 0, s || 0, i || 0, e || 0);
        }
        set(t, s, i, e) {
            this._$_left$_ = +t, this._$_top$_ = +s, this._$_right$_ = +i, this._$_bottom$_ = +e;
        }
        _$setWH$_(t, s, i, e) {
            s = +s, this._$_left$_ = t = +t, this._$_top$_ = s, this._$_right$_ = t + +i, 
            this._$_bottom$_ = s + +e;
        }
        _$copy$_(t) {
            this._$_left$_ = +t._$_left$_, this._$_top$_ = +t._$_top$_, this._$_right$_ = +t._$_right$_, 
            this._$_bottom$_ = +t._$_bottom$_;
        }
        clone() {
            return new Nt.Rect(this._$_left$_, this._$_top$_, this._$_right$_, this._$_bottom$_);
        }
        static _$Merge$_(t, s) {
            const i = new Nt.Rect();
            return i._$setLeft$_(Math.min(t._$_left$_, s._$_left$_)), i._$setTop$_(Math.min(t._$_top$_, s._$_top$_)), 
            i._$setRight$_(Math.max(t._$_right$_, s._$_right$_)), i._$setBottom$_(Math.max(t._$_bottom$_, s._$_bottom$_)), 
            i;
        }
        static _$FromObject$_(t) {
            return new Nt.Rect(t.left, t.top, t.right, t.bottom);
        }
        equals(t) {
            return this._$_left$_ === t._$_left$_ && this._$_top$_ === t._$_top$_ && this._$_right$_ === t._$_right$_ && this._$_bottom$_ === t._$_bottom$_;
        }
        _$equalsWH$_(t, s, i, e) {
            return this._$_left$_ === t && this._$_top$_ === s && this.width() === i && this.height() === e;
        }
        _$equalsF32Array$_(t, s) {
            return t[s] === Math.fround(this._$_left$_) && t[s + 1] === Math.fround(this._$_top$_) && t[s + 2] === Math.fround(this._$_right$_) && t[s + 3] === Math.fround(this._$_bottom$_);
        }
        _$setLeft$_(t) {
            this._$_left$_ = +t;
        }
        _$getLeft$_() {
            return this._$_left$_;
        }
        _$setTop$_(t) {
            this._$_top$_ = +t;
        }
        _$getTop$_() {
            return this._$_top$_;
        }
        _$setRight$_(t) {
            this._$_right$_ = +t;
        }
        _$getRight$_() {
            return this._$_right$_;
        }
        _$setBottom$_(t) {
            this._$_bottom$_ = +t;
        }
        _$getBottom$_() {
            return this._$_bottom$_;
        }
        toArray() {
            return [ this._$_left$_, this._$_top$_, this._$_right$_, this._$_bottom$_ ];
        }
        _$toTypedArray$_() {
            return new Float64Array(this.toArray());
        }
        _$toDOMRect$_() {
            return new DOMRect(this._$_left$_, this._$_top$_, this.width(), this.height());
        }
        static _$fromDOMRect$_(t) {
            return Nt._$New$_(Nt.Rect, t.left, t.top, t.right, t.bottom);
        }
        _$writeToTypedArray$_(t, s) {
            t[s++] = this._$_left$_, t[s++] = this._$_top$_, t[s++] = this._$_right$_, 
            t[s] = this._$_bottom$_;
        }
        _$writeAsQuadToTypedArray$_(t, s) {
            t[s++] = this._$_left$_, t[s++] = this._$_top$_, t[s++] = this._$_right$_, 
            t[s++] = this._$_top$_, t[s++] = this._$_right$_, t[s++] = this._$_bottom$_, 
            t[s++] = this._$_left$_, t[s] = this._$_bottom$_;
        }
        _$writeAsQuadToTypedArray3D$_(t, s, i) {
            t[s++] = this._$_left$_, t[s++] = this._$_top$_, t[s++] = i, t[s++] = this._$_right$_, 
            t[s++] = this._$_top$_, t[s++] = i, t[s++] = this._$_right$_, t[s++] = this._$_bottom$_, 
            t[s++] = i, t[s++] = this._$_left$_, t[s++] = this._$_bottom$_, t[s] = i;
        }
        width() {
            return this._$_right$_ - this._$_left$_;
        }
        height() {
            return this._$_bottom$_ - this._$_top$_;
        }
        _$midX$_() {
            return (this._$_left$_ + this._$_right$_) / 2;
        }
        _$midY$_() {
            return (this._$_top$_ + this._$_bottom$_) / 2;
        }
        offset(t, s) {
            s = +s, this._$_left$_ += t = +t, this._$_top$_ += s, this._$_right$_ += t, 
            this._$_bottom$_ += s;
        }
        offsetLeft(t) {
            this._$_left$_ += +t;
        }
        offsetTop(t) {
            this._$_top$_ += +t;
        }
        _$offsetRight$_(t) {
            this._$_right$_ += +t;
        }
        _$offsetBottom$_(t) {
            this._$_bottom$_ += +t;
        }
        _$toSquare$_(t) {
            if ("x" !== t) throw new Error("invalid axis, only 'x' supported");
            this._$_top$_ < this._$_bottom$_ ? this._$_left$_ < this._$_right$_ ? this._$_bottom$_ = this._$_top$_ + this.width() : this._$_bottom$_ = this._$_top$_ - this.width() : this._$_left$_ < this._$_right$_ ? this._$_bottom$_ = this._$_top$_ - this.width() : this._$_bottom$_ = this._$_top$_ + this.width();
        }
        _$inflate$_(t, s) {
            s = +s, this._$_left$_ -= t = +t, this._$_top$_ -= s, this._$_right$_ += t, 
            this._$_bottom$_ += s;
        }
        _$deflate$_(t, s) {
            s = +s, this._$_left$_ += t = +t, this._$_top$_ += s, this._$_right$_ -= t, 
            this._$_bottom$_ -= s;
        }
        multiply(t, s) {
            this._$_left$_ *= t, this._$_top$_ *= s, this._$_right$_ *= t, this._$_bottom$_ *= s;
        }
        _$divide$_(t, s) {
            this._$_left$_ /= t, this._$_top$_ /= s, this._$_right$_ /= t, this._$_bottom$_ /= s;
        }
        _$mirrorAround$_(t) {
            this._$_left$_ = +t - this._$_left$_, this._$_right$_ = +t - this._$_right$_;
        }
        _$flipAround$_(t) {
            this._$_top$_ = +t - this._$_top$_, this._$_bottom$_ = +t - this._$_bottom$_;
        }
        _$rotate90DegreesAround$_(t, s) {
            const i = this.width(), e = this.height(), n = this._$getLeft$_() + i * t, h = this._$getTop$_() + e * s;
            this._$setWH$_(n - e * s, h - i * t, e, i);
        }
        _$swapLeftRight$_() {
            const t = this._$_left$_;
            this._$_left$_ = this._$_right$_, this._$_right$_ = t;
        }
        _$swapTopBottom$_() {
            const t = this._$_top$_;
            this._$_top$_ = this._$_bottom$_, this._$_bottom$_ = t;
        }
        _$shuntY$_(t) {
            const s = this._$_top$_;
            this._$_top$_ = +t - this._$_bottom$_, this._$_bottom$_ = +t - s;
        }
        round() {
            this._$_left$_ = Math.round(this._$_left$_), this._$_top$_ = Math.round(this._$_top$_), 
            this._$_right$_ = Math.round(this._$_right$_), this._$_bottom$_ = Math.round(this._$_bottom$_);
        }
        _$roundInner$_() {
            this._$_left$_ = Math.ceil(this._$_left$_), this._$_top$_ = Math.ceil(this._$_top$_), 
            this._$_right$_ = Math.floor(this._$_right$_), this._$_bottom$_ = Math.floor(this._$_bottom$_);
        }
        _$roundOuter$_() {
            this._$_left$_ = Math.floor(this._$_left$_), this._$_top$_ = Math.floor(this._$_top$_), 
            this._$_right$_ = Math.ceil(this._$_right$_), this._$_bottom$_ = Math.ceil(this._$_bottom$_);
        }
        floor() {
            this._$_left$_ = Math.floor(this._$_left$_), this._$_top$_ = Math.floor(this._$_top$_), 
            this._$_right$_ = Math.floor(this._$_right$_), this._$_bottom$_ = Math.floor(this._$_bottom$_);
        }
        ceil() {
            this._$_left$_ = Math.ceil(this._$_left$_), this._$_top$_ = Math.ceil(this._$_top$_), 
            this._$_right$_ = Math.ceil(this._$_right$_), this._$_bottom$_ = Math.ceil(this._$_bottom$_);
        }
        _$clamp$_(t, s, i, e) {
            this._$_left$_ = Math.max(this._$_left$_, +t), this._$_top$_ = Math.max(this._$_top$_, +s), 
            this._$_right$_ = Math.min(this._$_right$_, +i), this._$_bottom$_ = Math.min(this._$_bottom$_, +e);
        }
        _$clampBoth$_(t, s, i, e) {
            t = +t, s = +s, i = +i, e = +e, this._$_left$_ = Nt._$clamp$_(this._$_left$_, t, i), 
            this._$_top$_ = Nt._$clamp$_(this._$_top$_, s, e), this._$_right$_ = Nt._$clamp$_(this._$_right$_, t, i), 
            this._$_bottom$_ = Nt._$clamp$_(this._$_bottom$_, s, e);
        }
        normalize() {
            this._$_left$_ > this._$_right$_ && this._$swapLeftRight$_(), this._$_top$_ > this._$_bottom$_ && this._$swapTopBottom$_();
        }
        _$intersectsRect$_(t) {
            return !(t._$_right$_ < this._$_left$_ || t._$_bottom$_ < this._$_top$_ || t._$_left$_ > this._$_right$_ || t._$_top$_ > this._$_bottom$_);
        }
        _$intersectsRectOffset$_(t, s, i) {
            return !(t._$_right$_ + s < this._$_left$_ || t._$_bottom$_ + i < this._$_top$_ || t._$_left$_ + s > this._$_right$_ || t._$_top$_ + i > this._$_bottom$_);
        }
        _$containsPoint$_(t, s) {
            return t >= this._$_left$_ && t <= this._$_right$_ && s >= this._$_top$_ && s <= this._$_bottom$_;
        }
        _$containsRect$_(t) {
            return t._$_left$_ >= this._$_left$_ && t._$_top$_ >= this._$_top$_ && t._$_right$_ <= this._$_right$_ && t._$_bottom$_ <= this._$_bottom$_;
        }
        _$expandToContain$_(t) {
            t._$_left$_ < this._$_left$_ && (this._$_left$_ = +t._$_left$_), t._$_top$_ < this._$_top$_ && (this._$_top$_ = +t._$_top$_), 
            t._$_right$_ > this._$_right$_ && (this._$_right$_ = +t._$_right$_), 
            t._$_bottom$_ > this._$_bottom$_ && (this._$_bottom$_ = +t._$_bottom$_);
        }
        _$lerpInto$_(t) {
            this._$_left$_ = Nt._$lerp$_(t._$_left$_, t._$_right$_, this._$_left$_), 
            this._$_top$_ = Nt._$lerp$_(t._$_top$_, t._$_bottom$_, this._$_top$_), 
            this._$_right$_ = Nt._$lerp$_(t._$_left$_, t._$_right$_, this._$_right$_), 
            this._$_bottom$_ = Nt._$lerp$_(t._$_top$_, t._$_bottom$_, this._$_bottom$_);
        }
    };
}

{
    const Dt = self._$C3$_;
    Dt._$Quad$_ = class {
        constructor(t, s, i, e, n, h, r, o) {
            this._$_tlx$_ = NaN, this._$_tly$_ = NaN, this._$_trx$_ = NaN, this._$_try$_ = NaN, 
            this._$_brx$_ = NaN, this._$_bry$_ = NaN, this._$_blx$_ = NaN, this._$_bly$_ = NaN, 
            this._$_tlx$_ = 0, this._$_tly$_ = 0, this._$_trx$_ = 0, this._$_try$_ = 0, 
            this._$_brx$_ = 0, this._$_bry$_ = 0, this._$_blx$_ = 0, this._$_bly$_ = 0, 
            t instanceof Dt._$Quad$_ ? this._$copy$_(t) : this.set(t || 0, s || 0, i || 0, e || 0, n || 0, h || 0, r || 0, o || 0);
        }
        set(t, s, i, e, n, h, r, o) {
            this._$_tlx$_ = +t, this._$_tly$_ = +s, this._$_trx$_ = +i, this._$_try$_ = +e, 
            this._$_brx$_ = +n, this._$_bry$_ = +h, this._$_blx$_ = +r, this._$_bly$_ = +o;
        }
        _$setRect$_(t, s, i, e) {
            this.set(t, s, i, s, i, e, t, e);
        }
        _$copy$_(t) {
            this._$_tlx$_ = t._$_tlx$_, this._$_tly$_ = t._$_tly$_, this._$_trx$_ = t._$_trx$_, 
            this._$_try$_ = t._$_try$_, this._$_brx$_ = t._$_brx$_, this._$_bry$_ = t._$_bry$_, 
            this._$_blx$_ = t._$_blx$_, this._$_bly$_ = t._$_bly$_;
        }
        equals(t) {
            return this._$_tlx$_ === t._$_tlx$_ && this._$_tly$_ === t._$_tly$_ && this._$_trx$_ === t._$_trx$_ && this._$_try$_ === t._$_try$_ && this._$_brx$_ === t._$_brx$_ && this._$_bry$_ === t._$_bry$_ && this._$_blx$_ === t._$_blx$_ && this._$_bly$_ === t._$_bly$_;
        }
        _$setTlx$_(t) {
            this._$_tlx$_ = +t;
        }
        _$getTlx$_() {
            return this._$_tlx$_;
        }
        _$setTly$_(t) {
            this._$_tly$_ = +t;
        }
        _$getTly$_() {
            return this._$_tly$_;
        }
        _$setTrx$_(t) {
            this._$_trx$_ = +t;
        }
        _$getTrx$_() {
            return this._$_trx$_;
        }
        _$setTry$_(t) {
            this._$_try$_ = +t;
        }
        _$getTry$_() {
            return this._$_try$_;
        }
        _$setBrx$_(t) {
            this._$_brx$_ = +t;
        }
        _$getBrx$_() {
            return this._$_brx$_;
        }
        _$setBry$_(t) {
            this._$_bry$_ = +t;
        }
        _$getBry$_() {
            return this._$_bry$_;
        }
        _$setBlx$_(t) {
            this._$_blx$_ = +t;
        }
        _$getBlx$_() {
            return this._$_blx$_;
        }
        _$setBly$_(t) {
            this._$_bly$_ = +t;
        }
        _$getBly$_() {
            return this._$_bly$_;
        }
        _$toDOMQuad$_() {
            return new DOMQuad(new DOMPoint(this._$_tlx$_, this._$_tly$_), new DOMPoint(this._$_trx$_, this._$_try$_), new DOMPoint(this._$_brx$_, this._$_bry$_), new DOMPoint(this._$_blx$_, this._$_bly$_));
        }
        static _$fromDOMQuad$_(t) {
            return Dt._$New$_(Dt._$Quad$_, t.p1.x, t.p1.y, t.p2.x, t.p2.y, t.p3.x, t.p3.y, t.p4.x, t.p4.y);
        }
        toArray() {
            return [ this._$_tlx$_, this._$_tly$_, this._$_trx$_, this._$_try$_, this._$_brx$_, this._$_bry$_, this._$_blx$_, this._$_bly$_ ];
        }
        _$toTypedArray$_() {
            return new Float64Array(this.toArray());
        }
        _$writeToTypedArray$_(t, s) {
            t[s++] = this._$_tlx$_, t[s++] = this._$_tly$_, t[s++] = this._$_trx$_, 
            t[s++] = this._$_try$_, t[s++] = this._$_brx$_, t[s++] = this._$_bry$_, 
            t[s++] = this._$_blx$_, t[s] = this._$_bly$_;
        }
        _$writeToTypedArray3D$_(t, s, i) {
            t[s++] = this._$_tlx$_, t[s++] = this._$_tly$_, t[s++] = i, t[s++] = this._$_trx$_, 
            t[s++] = this._$_try$_, t[s++] = i, t[s++] = this._$_brx$_, t[s++] = this._$_bry$_, 
            t[s++] = i, t[s++] = this._$_blx$_, t[s++] = this._$_bly$_, t[s] = i;
        }
        offset(t, s) {
            s = +s, this._$_tlx$_ += t = +t, this._$_tly$_ += s, this._$_trx$_ += t, 
            this._$_try$_ += s, this._$_brx$_ += t, this._$_bry$_ += s, this._$_blx$_ += t, 
            this._$_bly$_ += s;
        }
        round() {
            this._$_tlx$_ = Math.round(this._$_tlx$_), this._$_tly$_ = Math.round(this._$_tly$_), 
            this._$_trx$_ = Math.round(this._$_trx$_), this._$_try$_ = Math.round(this._$_try$_), 
            this._$_brx$_ = Math.round(this._$_brx$_), this._$_bry$_ = Math.round(this._$_bry$_), 
            this._$_blx$_ = Math.round(this._$_blx$_), this._$_bly$_ = Math.round(this._$_bly$_);
        }
        floor() {
            this._$_tlx$_ = Math.floor(this._$_tlx$_), this._$_tly$_ = Math.floor(this._$_tly$_), 
            this._$_trx$_ = Math.floor(this._$_trx$_), this._$_try$_ = Math.floor(this._$_try$_), 
            this._$_brx$_ = Math.floor(this._$_brx$_), this._$_bry$_ = Math.floor(this._$_bry$_), 
            this._$_blx$_ = Math.floor(this._$_blx$_), this._$_bly$_ = Math.floor(this._$_bly$_);
        }
        ceil() {
            this._$_tlx$_ = Math.ceil(this._$_tlx$_), this._$_tly$_ = Math.ceil(this._$_tly$_), 
            this._$_trx$_ = Math.ceil(this._$_trx$_), this._$_try$_ = Math.ceil(this._$_try$_), 
            this._$_brx$_ = Math.ceil(this._$_brx$_), this._$_bry$_ = Math.ceil(this._$_bry$_), 
            this._$_blx$_ = Math.ceil(this._$_blx$_), this._$_bly$_ = Math.ceil(this._$_bly$_);
        }
        _$setFromRect$_(t) {
            this._$_tlx$_ = t._$_left$_, this._$_tly$_ = t._$_top$_, this._$_trx$_ = t._$_right$_, 
            this._$_try$_ = t._$_top$_, this._$_brx$_ = t._$_right$_, this._$_bry$_ = t._$_bottom$_, 
            this._$_blx$_ = t._$_left$_, this._$_bly$_ = t._$_bottom$_;
        }
        _$setFromRotatedRect$_(t, s) {
            0 === s ? this._$setFromRect$_(t) : this._$setFromRotatedRectPrecalc$_(t, Math.sin(s), Math.cos(s));
        }
        _$setFromRotatedRectPrecalc$_(t, s, i) {
            const e = t._$_left$_ * s, n = t._$_top$_ * s, h = t._$_right$_ * s, r = t._$_bottom$_ * s, o = t._$_left$_ * i, a = t._$_top$_ * i, l = t._$_right$_ * i, u = t._$_bottom$_ * i;
            this._$_tlx$_ = o - n, this._$_tly$_ = a + e, this._$_trx$_ = l - n, 
            this._$_try$_ = a + h, this._$_brx$_ = l - r, this._$_bry$_ = u + h, 
            this._$_blx$_ = o - r, this._$_bly$_ = u + e;
        }
        _$getBoundingBox$_(t) {
            t.set(Math.min(this._$_tlx$_, this._$_trx$_, this._$_brx$_, this._$_blx$_), Math.min(this._$_tly$_, this._$_try$_, this._$_bry$_, this._$_bly$_), Math.max(this._$_tlx$_, this._$_trx$_, this._$_brx$_, this._$_blx$_), Math.max(this._$_tly$_, this._$_try$_, this._$_bry$_, this._$_bly$_));
        }
        _$containsPoint$_(t, s) {
            let i = this._$_trx$_ - this._$_tlx$_, e = this._$_try$_ - this._$_tly$_, n = this._$_brx$_ - this._$_tlx$_, h = this._$_bry$_ - this._$_tly$_, r = t - this._$_tlx$_, o = s - this._$_tly$_, a = i * i + e * e, l = i * n + e * h, u = i * r + e * o, c = n * n + h * h, f = n * r + h * o, d = 1 / (a * c - l * l), p = (c * u - l * f) * d, m = (a * f - l * u) * d;
            return 0 <= p && 0 < m && p + m < 1 || (m = ((a = (i = this._$_blx$_ - this._$_tlx$_) * i + (e = this._$_bly$_ - this._$_tly$_) * e) * f - (l = i * n + e * h) * (u = i * r + e * o)) * (d = 1 / (a * c - l * l)), 
            0 <= (p = (c * u - l * f) * d) && 0 < m && p + m < 1);
        }
        _$midX$_() {
            return (this._$_tlx$_ + this._$_trx$_ + this._$_brx$_ + this._$_blx$_) / 4;
        }
        _$midY$_() {
            return (this._$_tly$_ + this._$_try$_ + this._$_bry$_ + this._$_bly$_) / 4;
        }
        _$intersectsSegment$_(t, s, i, e) {
            return !(!this._$containsPoint$_(t, s) && !this._$containsPoint$_(i, e)) || Dt._$segmentIntersectsQuad$_(t, s, i, e, this);
        }
        _$intersectsQuad$_(t) {
            let s = t._$midX$_(), i = t._$midY$_();
            if (this._$containsPoint$_(s, i)) return !0;
            if (s = this._$midX$_(), i = this._$midY$_(), t._$containsPoint$_(s, i)) return !0;
            const e = this._$_tlx$_, n = this._$_tly$_, h = this._$_trx$_, r = this._$_try$_, o = this._$_brx$_, a = this._$_bry$_, l = this._$_blx$_, u = this._$_bly$_;
            return Dt._$segmentIntersectsQuad$_(e, n, h, r, t) || Dt._$segmentIntersectsQuad$_(h, r, o, a, t) || Dt._$segmentIntersectsQuad$_(o, a, l, u, t) || Dt._$segmentIntersectsQuad$_(l, u, e, n, t);
        }
        _$rotatePointsAnticlockwise$_() {
            const t = this._$_tlx$_, s = this._$_tly$_;
            this._$_tlx$_ = this._$_trx$_, this._$_tly$_ = this._$_try$_, this._$_trx$_ = this._$_brx$_, 
            this._$_try$_ = this._$_bry$_, this._$_brx$_ = this._$_blx$_, this._$_bry$_ = this._$_bly$_, 
            this._$_blx$_ = t, this._$_bly$_ = s;
        }
        _$mirror$_() {
            this._$_swap$_(0, 2), this._$_swap$_(1, 3), this._$_swap$_(6, 4), this._$_swap$_(7, 5);
        }
        _$flip$_() {
            this._$_swap$_(0, 6), this._$_swap$_(1, 7), this._$_swap$_(2, 4), this._$_swap$_(3, 5);
        }
        _$diag$_() {
            this._$_swap$_(2, 6), this._$_swap$_(3, 7);
        }
        _$_swap$_(t, s) {
            const i = this._$_getAtIndex$_(t);
            this._$_setAtIndex$_(t, this._$_getAtIndex$_(s)), this._$_setAtIndex$_(s, i);
        }
        _$_getAtIndex$_(t) {
            switch (t) {
              case 0:
                return this._$_tlx$_;

              case 1:
                return this._$_tly$_;

              case 2:
                return this._$_trx$_;

              case 3:
                return this._$_try$_;

              case 4:
                return this._$_brx$_;

              case 5:
                return this._$_bry$_;

              case 6:
                return this._$_blx$_;

              case 7:
                return this._$_bly$_;

              default:
                throw new RangeError("invalid quad point index");
            }
        }
        _$_setAtIndex$_(t, s) {
            switch (s = +s, t) {
              case 0:
                this._$_tlx$_ = s;
                break;

              case 1:
                this._$_tly$_ = s;
                break;

              case 2:
                this._$_trx$_ = s;
                break;

              case 3:
                this._$_try$_ = s;
                break;

              case 4:
                this._$_brx$_ = s;
                break;

              case 5:
                this._$_bry$_ = s;
                break;

              case 6:
                this._$_blx$_ = s;
                break;

              case 7:
                this._$_bly$_ = s;
                break;

              default:
                throw new RangeError("invalid quad point index");
            }
        }
    };
}

{
    const At = self._$C3$_, Lt = [ 0, 0, 1, 0, 1, 1, 0, 1 ], Ot = At._$New$_(At._$Quad$_);
    At._$CollisionPoly$_ = class extends At._$DefendedBase$_ {
        constructor(t, s = !0) {
            super(), t = t || Lt, this._$_ptsArr$_ = Float64Array.from(t), this._$_bbox$_ = new At.Rect(), 
            this._$_isBboxChanged$_ = !0, this._$_enabled$_ = s;
        }
        _$Release$_() {}
        _$pointsArr$_() {
            return this._$_ptsArr$_;
        }
        _$pointCount$_() {
            return this._$_ptsArr$_.length / 2;
        }
        _$setPoints$_(t) {
            this._$_ptsArr$_.length === t.length ? this._$_ptsArr$_.set(t) : this._$_ptsArr$_ = Float64Array.from(t), 
            this._$_isBboxChanged$_ = !0;
        }
        _$setDefaultPoints$_() {
            this._$setPoints$_(Lt);
        }
        _$copy$_(t) {
            this._$setPoints$_(t._$_ptsArr$_);
        }
        _$setBboxChanged$_() {
            this._$_isBboxChanged$_ = !0;
        }
        _$_updateBbox$_() {
            if (this._$_isBboxChanged$_) {
                let i = this._$_ptsArr$_, e = i[0], n = i[1], h = e, r = n;
                for (let t = 0, s = i.length; t < s; t += 2) {
                    const o = i[t], a = i[t + 1];
                    o < e && (e = o), o > h && (h = o), a < n && (n = a), a > r && (r = a);
                }
                this._$_bbox$_.set(e, n, h, r), this._$_isBboxChanged$_ = !1;
            }
        }
        _$setFromRect$_(t, s, i) {
            let e = this._$_ptsArr$_;
            8 !== e.length && (e = new Float64Array(8), this._$_ptsArr$_ = e), e[0] = t._$getLeft$_() - s, 
            e[1] = t._$getTop$_() - i, e[2] = t._$getRight$_() - s, e[3] = t._$getTop$_() - i, 
            e[4] = t._$getRight$_() - s, e[5] = t._$getBottom$_() - i, e[6] = t._$getLeft$_() - s, 
            e[7] = t._$getBottom$_() - i, this._$_bbox$_._$copy$_(t), 0 === s && 0 === i || this._$_bbox$_.offset(-s, -i), 
            this._$_isBboxChanged$_ = !1;
        }
        _$setFromQuad$_(t, s, i) {
            Ot._$copy$_(t), Ot.offset(s, i), this._$setPoints$_(Ot.toArray()), this._$_isBboxChanged$_ = !0;
        }
        transform(t, s, i) {
            let e = 0, n = 1;
            0 !== i && (e = Math.sin(i), n = Math.cos(i)), this._$transformPrecalc$_(t, s, e, n);
        }
        _$transformPrecalc$_(i, e, n, h) {
            const r = this._$_ptsArr$_;
            for (let t = 0, s = r.length; t < s; t += 2) {
                const o = t + 1, a = r[t] * i, l = r[o] * e;
                r[t] = a * h - l * n, r[o] = l * h + a * n;
            }
            this._$_isBboxChanged$_ = !0;
        }
        offset(i, e) {
            const n = this._$_ptsArr$_;
            for (let t = 0, s = n.length; t < s; t += 2) n[t] += i, n[t + 1] += e;
        }
        _$containsPoint$_(i, e) {
            const n = this._$_ptsArr$_;
            if (i === n[0] && e === n[1]) return !0;
            this._$_updateBbox$_();
            let t = this._$_bbox$_, h = t._$getLeft$_() - 110, r = t._$getTop$_() - 101, o = t._$getRight$_() + 131, a = t._$getBottom$_() + 120, l = 0, u = 0, c, f, d = 0, p = 0, m, g, y = (c = h < i ? (l = h, 
            i) : (l = i, h), f = r < e ? (u = r, e) : (u = e, r), m = o < i ? (d = o, 
            i) : (d = i, o), g = a < e ? (p = a, e) : (p = e, a), 0), M = 0;
            for (let t = 0, s = n.length; t < s; t += 2) {
                const w = (t + 2) % s, x = n[t], S = n[t + 1], T = n[w], b = n[1 + w];
                At._$segmentsIntersectPreCalc$_(h, r, i, e, l, c, u, f, x, S, T, b) && ++y, 
                At._$segmentsIntersectPreCalc$_(o, a, i, e, d, m, p, g, x, S, T, b) && ++M;
            }
            return y % 2 == 1 || M % 2 == 1;
        }
        _$intersectsPoly$_(t, c, f) {
            const d = t._$_ptsArr$_, p = this._$_ptsArr$_;
            if (this._$containsPoint$_(d[0] + c, d[1] + f)) return !0;
            if (t._$containsPoint$_(p[0] - c, p[1] - f)) return !0;
            for (let s = 0, u = p.length; s < u; s += 2) {
                let t = (s + 2) % u, i = p[s], e = p[s + 1], n = p[t], h = p[1 + t], r = 0, o = 0, a, l;
                a = i < n ? (r = i, n) : (r = n, i), l = e < h ? (o = e, h) : (o = h, 
                e);
                for (let t = 0, s = d.length; t < s; t += 2) {
                    const m = (t + 2) % s, g = d[t] + c, y = d[t + 1] + f, M = d[m] + c, w = d[1 + m] + f;
                    if (At._$segmentsIntersectPreCalc$_(i, e, n, h, r, a, o, l, g, y, M, w)) return !0;
                }
            }
            return !1;
        }
        _$intersectsSegment$_(i, e, n, h, r, o) {
            if (this._$containsPoint$_(n - i, h - e)) return !0;
            if (this._$containsPoint$_(r - i, o - e)) return !0;
            let a = 0, l = 0, u, c;
            u = n < r ? (a = n, r) : (a = r, n), c = h < o ? (l = h, o) : (l = o, 
            h);
            const f = this._$_ptsArr$_;
            for (let t = 0, s = f.length; t < s; t += 2) {
                const d = (t + 2) % s, p = f[t] + i, m = f[t + 1] + e, g = f[d] + i, y = f[1 + d] + e;
                if (At._$segmentsIntersectPreCalc$_(n, h, r, o, a, u, l, c, p, m, g, y)) return !0;
            }
            return !1;
        }
        _$mirror$_(i) {
            const e = this._$_ptsArr$_;
            for (let t = 0, s = e.length; t < s; t += 2) e[t] = 2 * i - e[t];
            this._$_isBboxChanged$_ = !0;
        }
        _$flip$_(i) {
            const e = this._$_ptsArr$_;
            for (let t = 0, s = e.length; t < s; t += 2) {
                const n = t + 1;
                e[n] = 2 * i - e[n];
            }
            this._$_isBboxChanged$_ = !0;
        }
        _$diag$_() {
            const i = this._$_ptsArr$_;
            for (let t = 0, s = i.length; t < s; t += 2) {
                const e = t + 1, n = i[t];
                i[t] = i[e], i[e] = n;
            }
            this._$_isBboxChanged$_ = !0;
        }
        _$GetMidX$_() {
            let i = this._$_ptsArr$_, e = 0;
            for (let t = 0, s = i.length; t < s; t += 2) e += i[t];
            return e / this._$pointCount$_();
        }
        _$GetMidY$_() {
            let i = this._$_ptsArr$_, e = 0;
            for (let t = 0, s = i.length; t < s; t += 2) e += i[t + 1];
            return e / this._$pointCount$_();
        }
        _$GetPointsArray$_() {
            return this._$_ptsArr$_;
        }
        _$GetPointCount$_() {
            return this._$pointCount$_();
        }
        _$IsEnabled$_() {
            return this._$_enabled$_;
        }
    };
}

{
    const Pt = self._$C3$_;
    Pt._$PairMap$_ = class extends Pt._$DefendedBase$_ {
        constructor(t) {
            if (super(), this._$_firstMap$_ = new Map(), t) for (const [ s, i, e ] of t) this.Set(s, i, e);
        }
        _$Release$_() {
            this._$Clear$_(), this._$_firstMap$_ = null;
        }
        _$IsEmpty$_() {
            return 0 === this._$_firstMap$_.size;
        }
        _$Clear$_() {
            const t = this._$_firstMap$_;
            for (const s of t.values()) s.clear();
            t.clear();
        }
        Set(t, s, i) {
            let e = this._$_firstMap$_, n = e.get(t);
            n || (n = new Map(), e.set(t, n)), n.set(s, i);
        }
        _$Get$_(t, s) {
            const i = this._$_firstMap$_.get(t);
            return i && i.get(s);
        }
        _$Has$_(t, s) {
            const i = this._$_firstMap$_.get(t);
            return !!i && i.has(s);
        }
        _$Delete$_(t, s) {
            const i = this._$_firstMap$_, e = i.get(t);
            if (!e) return !1;
            const n = e.delete(s);
            return n && 0 === e.size && i.delete(t), n;
        }
        _$DeleteEither$_(t) {
            const s = this._$_firstMap$_, i = s.get(t);
            i && (i.clear(), s.delete(t));
            for (const [ e, n ] of s.entries()) n.delete(t) && 0 === n.size && s.delete(e);
        }
        _$GetSize$_() {
            let t = 0;
            for (const s of this._$_firstMap$_.values()) t += s.size;
            return t;
        }
        *values() {
            for (const t of this._$_firstMap$_.values()) yield* t.values();
        }
        *_$keyPairs$_() {
            for (const [ t, s ] of this._$_firstMap$_.entries()) for (const i of s.keys()) yield [ t, i ];
        }
        *entries() {
            for (const [ t, s ] of this._$_firstMap$_.entries()) for (const [ i, e ] of s.entries()) yield [ t, i, e ];
        }
    };
}

{
    const Rt = self._$C3$_;
    Rt._$ArraySet$_ = class extends Rt._$DefendedBase$_ {
        constructor() {
            super(), this._$_set$_ = new Set(), this._$_arr$_ = [], this._$_needToRebuildArray$_ = !1;
        }
        _$Release$_() {
            this._$Clear$_();
        }
        _$Clear$_() {
            this._$_set$_.clear(), Rt._$clearArray$_(this._$_arr$_), this._$_needToRebuildArray$_ = !1;
        }
        _$Add$_(t) {
            this._$_set$_.has(t) || (this._$_set$_.add(t), this._$_needToRebuildArray$_) || this._$_arr$_.push(t);
        }
        _$Has$_(t) {
            return this._$_set$_.has(t);
        }
        _$Delete$_(t) {
            this._$_set$_.delete(t) && (this._$_needToRebuildArray$_ = !0);
        }
        _$GetSize$_() {
            return this._$_set$_.size;
        }
        _$IsEmpty$_() {
            return 0 === this._$_set$_.size;
        }
        _$GetArray$_() {
            return this._$_needToRebuildArray$_ && (this._$_RebuildArray$_(), this._$_needToRebuildArray$_ = !1), 
            this._$_arr$_;
        }
        _$_RebuildArray$_() {
            const t = this._$_arr$_;
            Rt._$clearArray$_(t);
            for (const s of this._$_set$_) t.push(s);
        }
    };
}

{
    const kt = self._$C3$_, Ft = new Map(), jt = new Map(), zt = new Map(), Bt = new Map(), Ut = new Map(), Wt = new Map(), Qt = new Map(), Vt = new Map(), Jt = new Map(), Yt = (Jt.set("linear", "noease"), 
    Jt.set("default", "noease"), [ "default", "noease", "easeinquad", "easeoutquad", "easeinoutquad", "easeincubic", "easeoutcubic", "easeinoutcubic", "easeinquart", "easeoutquart", "easeinoutquart", "easeinquint", "easeoutquint", "easeinoutquint", "easeinsine", "easeoutsine", "easeinoutsine", "easeinexpo", "easeoutexpo", "easeinoutexpo", "easeincirc", "easeoutcirc", "easeinoutcirc", "easeinelastic", "easeoutelastic", "easeinoutelastic", "easeinback", "easeoutback", "easeinoutback", "easeinbounce", "easeoutbounce", "easeinoutbounce" ]), Ht = [ "default", "noease", "quad", "cubic", "quart", "quint", "sine", "expo", "circ", "elastic", "back", "bounce" ], qt = new Map([ [ "linear", "noease" ], [ "in-sine", "easeinsine" ], [ "out-sine", "easeoutsine" ], [ "in-out-sine", "easeinoutsine" ], [ "in-elastic", "easeinelastic" ], [ "out-elastic", "easeoutelastic" ], [ "in-out-elastic", "easeinoutelastic" ], [ "in-back", "easeinback" ], [ "out-back", "easeoutback" ], [ "in-out-back", "easeinoutback" ], [ "in-bounce", "easeinbounce" ], [ "out-bounce", "easeoutbounce" ], [ "in-out-bounce", "easeinoutbounce" ], [ "in-cubic", "easeincubic" ], [ "out-cubic", "easeoutcubic" ], [ "in-out-cubic", "easeinoutcubic" ], [ "in-quadratic", "easeinquad" ], [ "out-quadratic", "easeoutquad" ], [ "in-out-quadratic", "easeinoutquad" ], [ "in-quartic", "easeinquart" ], [ "out-quartic", "easeoutquart" ], [ "in-out-quartic", "easeinoutquart" ], [ "in-quintic", "easeinquint" ], [ "out-quintic", "easeoutquint" ], [ "in-out-quintic", "easeinoutquint" ], [ "in-circular", "easeincirc" ], [ "out-circular", "easeoutcirc" ], [ "in-out-circular", "easeinoutcirc" ], [ "in-exponential", "easeinexpo" ], [ "out-exponential", "easeoutexpo" ], [ "in-out-exponential", "easeinoutexpo" ] ]), Zt = (self._$Ease$_ = class ns {
        constructor() {}
        static _$InheritEase$_() {
            return "default";
        }
        static _$DefaultEase$_() {
            return "noease";
        }
        static _$ToInternal$_(t) {
            return qt.get(t);
        }
        static _$GetEditorEaseNames$_(s, ...i) {
            this._$_CreateEaseMap$_();
            let t, e = (s ? (zt.has(s) || zt.set(s, new Map()), [ ...(t = zt.get(s)).keys() ].filter(t => !ns._$GetEditorEaseData$_(t, s) || ns._$GetEditorEaseData$_(t, s).transition.IsForAnyPurpose())) : [ ...(t = Ut).keys() ]).sort();
            return [ ...jt.keys() ].concat(e).filter(t => !i.includes(t));
        }
        static _$GetRuntimeEaseNames$_() {
            this._$_CreateEaseMap$_();
            const t = [ ...Ut.keys() ];
            return t.sort(), [ ...jt.keys() ].concat(t);
        }
        static _$GetCustomRuntimeEaseNames$_() {
            this._$_CreateEaseMap$_();
            const t = [ ...Ut.keys() ];
            return t.sort(), t;
        }
        static _$IsPredefinedTranslatedName$_(t) {
            for (const s of Yt) {
                const i = self.lang("ui.bars.timeline.eases." + s);
                if (i === t) return !0;
            }
            for (const e of Ht) {
                const n = self.lang("ui.bars.timeline.short-eases." + e);
                if (n === t) return !0;
            }
        }
        static _$IsNamePredefined$_(t) {
            return this._$_CreateEaseMap$_(), [ ...jt.keys() ].includes(t);
        }
        static _$_GetEase$_(t) {
            const s = Jt.get(t);
            return s ? Ft.get(s) : ns._$IsNamePredefined$_(t) ? Ft.get(t) : Qt.has(t) ? Qt.get(t) : void 0;
        }
        static _$GetBuiltInTransition$_(t) {
            return this._$_CreateEaseMap$_(), Vt.get(t);
        }
        static _$GetEditorEase$_(t, s) {
            this._$_CreateEaseMap$_();
            const i = ns._$_GetEase$_(t);
            if (i) return i;
            if (s) return zt.get(s).get(t);
            throw new Error("missing ease function");
        }
        static _$GetEditorEaseData$_(t, s) {
            this._$_CreateEaseMap$_();
            const i = Bt.get(s);
            if (i) return i.get(t);
        }
        static _$HasEditorEase$_(t, s) {
            this._$_CreateEaseMap$_();
            const i = ns._$_GetEase$_(t);
            return !!i || !!zt.get(s).get(t);
        }
        static _$GetRuntimeEase$_(t) {
            this._$_CreateEaseMap$_();
            const s = ns._$_GetEase$_(t);
            return s || Ut.get(t);
        }
        static _$GetRuntimeEaseData$_(t) {
            return this._$_CreateEaseMap$_(), Wt.get(t);
        }
        static _$GetEaseFromIndex$_(t) {
            this._$_CreateEaseMap$_();
            const s = this._$GetRuntimeEaseNames$_();
            return s[t];
        }
        static _$GetIndexForEase$_(t, s) {
            this._$_CreateEaseMap$_();
            const i = this._$GetEditorEaseNames$_(s);
            return i.indexOf(t);
        }
        static _$GetIndexForEaseAtRuntime$_(t) {
            return this._$GetIndexForEase$_(t);
        }
        static _$_CreateEaseMap$_() {
            0 === Ft.size && (this._$_AddPredifinedEase$_("default", () => {}), 
            this._$_AddPredifinedEase$_("noease", [ {
                x: 0,
                y: 0,
                sax: .336,
                say: 0,
                eax: 0,
                eay: 0,
                se: !0,
                ee: !1
            }, {
                x: 1,
                y: 1,
                sax: 0,
                say: 0,
                eax: -.336,
                eay: 0,
                se: !1,
                ee: !0
            } ], !0), this._$_AddPredifinedEase$_("easeinsine", [ {
                x: 0,
                y: 0,
                sax: .485,
                say: 0,
                eax: 0,
                eay: 0,
                se: !0,
                ee: !1
            }, {
                x: 1,
                y: 1,
                sax: 0,
                say: 0,
                eax: -.038,
                eay: 0,
                se: !1,
                ee: !0
            } ]), this._$_AddPredifinedEase$_("easeoutsine", [ {
                x: 0,
                y: 0,
                sax: .038,
                say: 0,
                eax: 0,
                eay: 0,
                se: !0,
                ee: !1
            }, {
                x: 1,
                y: 1,
                sax: 0,
                say: 0,
                eax: -.485,
                eay: 0,
                se: !1,
                ee: !0
            } ]), this._$_AddPredifinedEase$_("easeinoutsine", [ {
                x: 0,
                y: 0,
                sax: .336,
                say: 0,
                eax: 0,
                eay: 0,
                se: !0,
                ee: !1
            }, {
                x: 1,
                y: 1,
                sax: 0,
                say: 0,
                eax: -.336,
                eay: 0,
                se: !1,
                ee: !0
            } ]), this._$_AddPredifinedEase$_("easeinelastic", [ {
                x: 0,
                y: 0,
                sax: .018,
                say: 0,
                eax: 0,
                eay: 0,
                se: !0,
                ee: !1
            }, {
                x: .116,
                y: .002,
                sax: .025,
                say: 0,
                eax: -.025,
                eay: 0,
                se: !0,
                ee: !0
            }, {
                x: .266,
                y: -.005,
                sax: .024,
                say: 0,
                eax: -.021,
                eay: 0,
                se: !0,
                ee: !0
            }, {
                x: .416,
                y: .016,
                sax: .024,
                say: 0,
                eax: -.026,
                eay: 0,
                se: !0,
                ee: !0
            }, {
                x: .566,
                y: -.045,
                sax: .061,
                say: 0,
                eax: -.025,
                eay: 0,
                se: !0,
                ee: !0
            }, {
                x: .716,
                y: .132,
                sax: .072,
                say: -.004,
                eax: -.045,
                eay: 0,
                se: !0,
                ee: !0
            }, {
                x: .866,
                y: -.373,
                sax: .06,
                say: 0,
                eax: -.049,
                eay: -.002,
                se: !0,
                ee: !0
            }, {
                x: 1,
                y: 1,
                sax: 0,
                say: 0,
                eax: -.038,
                eay: -.263,
                se: !1,
                ee: !0
            } ]), this._$_AddPredifinedEase$_("easeoutelastic", [ {
                x: 0,
                y: 0,
                sax: .038,
                say: .263,
                eax: 0,
                eay: 0,
                se: !0,
                ee: !1
            }, {
                x: .136,
                y: 1.373,
                sax: .049,
                say: .002,
                eax: -.06,
                eay: 0,
                se: !0,
                ee: !0
            }, {
                x: .286,
                y: .868,
                sax: .045,
                say: 0,
                eax: -.072,
                eay: .004,
                se: !0,
                ee: !0
            }, {
                x: .436,
                y: 1.045,
                sax: .025,
                say: 0,
                eax: -.061,
                eay: 0,
                se: !0,
                ee: !0
            }, {
                x: .586,
                y: .984,
                sax: .026,
                say: 0,
                eax: -.024,
                eay: 0,
                se: !0,
                ee: !0
            }, {
                x: .736,
                y: 1.005,
                sax: .021,
                say: 0,
                eax: -.024,
                eay: 0,
                se: !0,
                ee: !0
            }, {
                x: .886,
                y: .998,
                sax: .025,
                say: 0,
                eax: -.025,
                eay: 0,
                se: !0,
                ee: !0
            }, {
                x: 1,
                y: 1,
                sax: 0,
                say: 0,
                eax: -.018,
                eay: 0,
                se: !1,
                ee: !0
            } ]), this._$_AddPredifinedEase$_("easeinoutelastic", [ {
                x: 0,
                y: 0,
                sax: .025,
                say: 0,
                eax: 0,
                eay: 0,
                se: !0,
                ee: !1
            }, {
                x: .067,
                y: .001,
                sax: .025,
                say: 0,
                eax: -.025,
                eay: 0,
                se: !0,
                ee: !0
            }, {
                x: .18,
                y: -.005,
                sax: .025,
                say: 0,
                eax: -.025,
                eay: 0,
                se: !0,
                ee: !0
            }, {
                x: .292,
                y: .025,
                sax: .053,
                say: 0,
                eax: -.025,
                eay: 0,
                se: !0,
                ee: !0
            }, {
                x: .405,
                y: -.118,
                sax: .069,
                say: 0,
                eax: -.027,
                eay: 0,
                se: !0,
                ee: !0
            }, {
                x: .597,
                y: 1.118,
                sax: .027,
                say: 0,
                eax: -.069,
                eay: 0,
                se: !0,
                ee: !0
            }, {
                x: .71,
                y: .975,
                sax: .025,
                say: 0,
                eax: -.053,
                eay: 0,
                se: !0,
                ee: !0
            }, {
                x: .822,
                y: 1.005,
                sax: .025,
                say: 0,
                eax: -.025,
                eay: 0,
                se: !0,
                ee: !0
            }, {
                x: .935,
                y: .999,
                sax: .025,
                say: 0,
                eax: -.025,
                eay: 0,
                se: !0,
                ee: !0
            }, {
                x: 1,
                y: 1,
                sax: 0,
                say: 0,
                eax: -.025,
                eay: 0,
                se: !1,
                ee: !0
            } ]), this._$_AddPredifinedEase$_("easeinback", [ {
                x: 0,
                y: 0,
                sax: .35,
                say: 0,
                eax: 0,
                eay: 0,
                se: !0,
                ee: !1
            }, {
                x: 1,
                y: 1,
                sax: 0,
                say: 0,
                eax: -.34,
                eay: -1.579,
                se: !1,
                ee: !0
            } ]), this._$_AddPredifinedEase$_("easeoutback", [ {
                x: 0,
                y: 0,
                sax: .34,
                say: 1.579,
                eax: 0,
                eay: 0,
                se: !0,
                ee: !1
            }, {
                x: 1,
                y: 1,
                sax: 0,
                say: 0,
                eax: -.35,
                eay: 0,
                se: !1,
                ee: !0
            } ]), this._$_AddPredifinedEase$_("easeinoutback", [ {
                x: 0,
                y: 0,
                sax: .035,
                say: 0,
                eax: 0,
                eay: 0,
                se: !0,
                ee: !1
            }, {
                x: .242,
                y: -.1,
                sax: .258,
                say: 0,
                eax: -.025,
                eay: 0,
                se: !0,
                ee: !0
            }, {
                x: .76,
                y: 1.1,
                sax: .025,
                say: 0,
                eax: -.26,
                eay: 0,
                se: !0,
                ee: !0
            }, {
                x: 1,
                y: 1,
                sax: 0,
                say: 0,
                eax: -.035,
                eay: 0,
                se: !1,
                ee: !0
            } ]), this._$_AddPredifinedEase$_("easeinbounce", [ {
                x: 0,
                y: 0,
                sax: .033,
                say: .025,
                eax: 0,
                eay: 0,
                se: !0,
                ee: !1
            }, {
                x: .092,
                y: 0,
                sax: .026,
                say: .078,
                eax: -.033,
                eay: .025,
                se: !0,
                ee: !0
            }, {
                x: .274,
                y: 0,
                sax: .097,
                say: .319,
                eax: -.026,
                eay: .078,
                se: !0,
                ee: !0
            }, {
                x: .637,
                y: 0,
                sax: .105,
                say: .625,
                eax: -.097,
                eay: .319,
                se: !0,
                ee: !0
            }, {
                x: 1,
                y: 1,
                sax: 0,
                say: 0,
                eax: -.125,
                eay: -.004,
                se: !1,
                ee: !0
            } ]), this._$_AddPredifinedEase$_("easeoutbounce", [ {
                x: 0,
                y: 0,
                sax: .125,
                say: .004,
                eax: 0,
                eay: 0,
                se: !0,
                ee: !1
            }, {
                x: .365,
                y: 1,
                sax: .097,
                say: -.319,
                eax: -.105,
                eay: -.625,
                se: !0,
                ee: !0
            }, {
                x: .728,
                y: 1,
                sax: .026,
                say: -.078,
                eax: -.097,
                eay: -.319,
                se: !0,
                ee: !0
            }, {
                x: .91,
                y: 1,
                sax: .033,
                say: -.025,
                eax: -.026,
                eay: -.078,
                se: !0,
                ee: !0
            }, {
                x: 1,
                y: 1,
                sax: 0,
                say: 0,
                eax: -.033,
                eay: -.025,
                se: !1,
                ee: !0
            } ]), this._$_AddPredifinedEase$_("easeinoutbounce", [ {
                x: 0,
                y: 0,
                sax: .01,
                say: .006,
                eax: 0,
                eay: 0,
                se: !0,
                ee: !1
            }, {
                x: .046,
                y: 0,
                sax: .021,
                say: .038,
                eax: -.01,
                eay: .006,
                se: !0,
                ee: !0
            }, {
                x: .137,
                y: 0,
                sax: .059,
                say: .158,
                eax: -.021,
                eay: .038,
                se: !0,
                ee: !0
            }, {
                x: .319,
                y: 0,
                sax: .117,
                say: .744,
                eax: -.059,
                eay: .158,
                se: !0,
                ee: !0
            }, {
                x: .683,
                y: 1,
                sax: .059,
                say: -.158,
                eax: -.117,
                eay: -.744,
                se: !0,
                ee: !0
            }, {
                x: .865,
                y: 1,
                sax: .021,
                say: -.038,
                eax: -.059,
                eay: -.158,
                se: !0,
                ee: !0
            }, {
                x: .956,
                y: 1,
                sax: .01,
                say: -.006,
                eax: -.021,
                eay: -.038,
                se: !0,
                ee: !0
            }, {
                x: 1,
                y: 1,
                sax: 0,
                say: 0,
                eax: -.01,
                eay: -.006,
                se: !1,
                ee: !0
            } ]), this._$_AddPredifinedEase$_("easeincubic", [ {
                x: 0,
                y: 0,
                sax: .75,
                say: 0,
                eax: 0,
                eay: 0,
                se: !0,
                ee: !1
            }, {
                x: 1,
                y: 1,
                sax: 0,
                say: 0,
                eax: -.138,
                eay: -.321,
                se: !1,
                ee: !0
            } ]), this._$_AddPredifinedEase$_("easeoutcubic", [ {
                x: 0,
                y: 0,
                sax: .138,
                say: .321,
                eax: 0,
                eay: 0,
                se: !0,
                ee: !1
            }, {
                x: 1,
                y: 1,
                sax: 0,
                say: 0,
                eax: -.75,
                eay: 0,
                se: !1,
                ee: !0
            } ]), this._$_AddPredifinedEase$_("easeinoutcubic", [ {
                x: 0,
                y: 0,
                sax: .285,
                say: 0,
                eax: 0,
                eay: 0,
                se: !0,
                ee: !1
            }, {
                x: .5,
                y: .5,
                sax: .081,
                say: .272,
                eax: -.081,
                eay: -.272,
                se: !0,
                ee: !0
            }, {
                x: 1,
                y: 1,
                sax: 0,
                say: 0,
                eax: -.285,
                eay: 0,
                se: !1,
                ee: !0
            } ]), this._$_AddPredifinedEase$_("easeinquad", [ {
                x: 0,
                y: 0,
                sax: .4,
                say: 0,
                eax: 0,
                eay: 0,
                se: !0,
                ee: !1
            }, {
                x: 1,
                y: 1,
                sax: 0,
                say: 0,
                eax: -.178,
                eay: -.392,
                se: !1,
                ee: !0
            } ]), this._$_AddPredifinedEase$_("easeoutquad", [ {
                x: 0,
                y: 0,
                sax: .178,
                say: .392,
                eax: 0,
                eay: 0,
                se: !0,
                ee: !1
            }, {
                x: 1,
                y: 1,
                sax: 0,
                say: 0,
                eax: -.4,
                eay: 0,
                se: !1,
                ee: !0
            } ]), this._$_AddPredifinedEase$_("easeinoutquad", [ {
                x: 0,
                y: 0,
                sax: .25,
                say: 0,
                eax: 0,
                eay: 0,
                se: !0,
                ee: !1
            }, {
                x: .5,
                y: .5,
                sax: .03,
                say: .065,
                eax: -.03,
                eay: -.065,
                se: !0,
                ee: !0
            }, {
                x: 1,
                y: 1,
                sax: 0,
                say: 0,
                eax: -.25,
                eay: 0,
                se: !1,
                ee: !0
            } ]), this._$_AddPredifinedEase$_("easeinquart", [ {
                x: 0,
                y: 0,
                sax: .25,
                say: 1,
                eax: 0,
                eay: 0,
                se: !0,
                ee: !1
            }, {
                x: 1,
                y: 1,
                sax: 0,
                say: 0,
                eax: -.5,
                eay: 0,
                se: !1,
                ee: !0
            } ]), this._$_AddPredifinedEase$_("easeoutquart", [ {
                x: 0,
                y: 0,
                sax: .5,
                say: 0,
                eax: 0,
                eay: 0,
                se: !0,
                ee: !1
            }, {
                x: 1,
                y: 1,
                sax: 0,
                say: 0,
                eax: -.25,
                eay: -1,
                se: !1,
                ee: !0
            } ]), this._$_AddPredifinedEase$_("easeinoutquart", [ {
                x: 0,
                y: 0,
                sax: .765,
                say: .03,
                eax: 0,
                eay: 0,
                se: !0,
                ee: !1
            }, {
                x: 1,
                y: 1,
                sax: 0,
                say: 0,
                eax: -.765,
                eay: -.03,
                se: !1,
                ee: !0
            } ]), this._$_AddPredifinedEase$_("easeinquint", [ {
                x: 0,
                y: 0,
                sax: .6,
                say: 0,
                eax: 0,
                eay: 0,
                se: !0,
                ee: !1
            }, {
                x: 1,
                y: 1,
                sax: 0,
                say: 0,
                eax: -.2,
                eay: -1,
                se: !1,
                ee: !0
            } ]), this._$_AddPredifinedEase$_("easeoutquint", [ {
                x: 0,
                y: 0,
                sax: .2,
                say: 1,
                eax: 0,
                eay: 0,
                se: !0,
                ee: !1
            }, {
                x: 1,
                y: 1,
                sax: 0,
                say: 0,
                eax: -.6,
                eay: 0,
                se: !1,
                ee: !0
            } ]), this._$_AddPredifinedEase$_("easeinoutquint", [ {
                eax: 0,
                eay: 0,
                ee: !1,
                sax: .84,
                say: 0,
                se: !0,
                x: 0,
                y: 0
            }, {
                eax: -.84,
                eay: 0,
                ee: !0,
                sax: 0,
                say: 0,
                se: !1,
                x: 1,
                y: 1
            } ]), this._$_AddPredifinedEase$_("easeincirc", [ {
                x: 0,
                y: 0,
                sax: .25,
                say: 0,
                eax: 0,
                eay: 0,
                se: !0,
                ee: !1
            }, {
                x: 1,
                y: 1,
                sax: 0,
                say: 0,
                eax: -.024,
                eay: -.808,
                se: !1,
                ee: !0
            } ]), this._$_AddPredifinedEase$_("easeoutcirc", [ {
                x: 0,
                y: 0,
                sax: .024,
                say: .808,
                eax: 0,
                eay: 0,
                se: !0,
                ee: !1
            }, {
                x: 1,
                y: 1,
                sax: 0,
                say: 0,
                eax: -.25,
                eay: 0,
                se: !1,
                ee: !0
            } ]), this._$_AddPredifinedEase$_("easeinoutcirc", [ {
                x: 0,
                y: 0,
                sax: .125,
                say: 0,
                eax: 0,
                eay: 0,
                se: !0,
                ee: !1
            }, {
                x: .5,
                y: .5,
                sax: .02,
                say: .428,
                eax: -.02,
                eay: -.428,
                se: !0,
                ee: !0
            }, {
                x: 1,
                y: 1,
                sax: 0,
                say: 0,
                eax: -.125,
                eay: 0,
                se: !1,
                ee: !0
            } ]), this._$_AddPredifinedEase$_("easeinexpo", [ {
                x: 0,
                y: 0,
                sax: .66,
                say: 0,
                eax: 0,
                eay: 0,
                se: !0,
                ee: !1
            }, {
                x: 1,
                y: 1,
                sax: 0,
                say: 0,
                eax: -.14,
                eay: -1,
                se: !1,
                ee: !0
            } ]), this._$_AddPredifinedEase$_("easeoutexpo", [ {
                x: 0,
                y: 0,
                sax: .14,
                say: 1,
                eax: 0,
                eay: 0,
                se: !0,
                ee: !1
            }, {
                x: 1,
                y: 1,
                sax: 0,
                say: 0,
                eax: -.66,
                eay: 0,
                se: !1,
                ee: !0
            } ]), this._$_AddPredifinedEase$_("easeinoutexpo", [ {
                eax: 0,
                eay: 0,
                ee: !1,
                sax: .345,
                say: 0,
                se: !0,
                x: 0,
                y: 0
            }, {
                eax: -.06,
                eay: -.5,
                ee: !0,
                sax: .06,
                say: .5,
                se: !0,
                x: .5,
                y: .5
            }, {
                eax: -.335,
                eay: 0,
                ee: !0,
                sax: 0,
                say: 0,
                se: !1,
                x: 1,
                y: 1
            } ]), this._$_AddPrivateCustomEase$_("cubicbezier", this._$EaseCubicBezier$_), 
            this._$_AddPrivateCustomEase$_("spline", this._$EaseSpline$_));
        }
        static _$_AddPredifinedEase$_(t, s, i = !1) {
            if ("function" == typeof s) ns._$_AddEase$_(t, s, "predefined"); else {
                if (!kt._$IsArray$_(s)) throw new Error("unexpected arguments");
                if (self.BuiltInTransition) {
                    const n = kt._$New$_(self.BuiltInTransition, t, i);
                    n.SetFromJson(s), ns._$_AddEase$_(t, (t, s, i, e) => n._$Interpolate$_(t, s, i, e), "predefined"), 
                    Vt.set(t, n);
                } else {
                    const h = kt._$New$_(kt._$Transition$_, [ t, s.map(t => [ t.x, t.y, t.sax, t.say, t.eax, t.eay, t.se, t.ee ]) ], !1);
                    h._$MakeLinear$_(i), ns._$_AddEase$_(t, (t, s, i, e) => h._$Interpolate$_(t, s, i, e), "predefined");
                }
            }
        }
        static _$_AddPrivateCustomEase$_(t, s) {
            ns._$_AddEase$_(t, s, "private");
        }
        static _$AddCustomEase$_(t, s, i, e) {
            this._$_CreateEaseMap$_(), ns._$_AddEase$_(t, s, "custom", i, e);
        }
        static _$RemoveCustomEase$_(t, s) {
            if (!this._$IsNamePredefined$_(t) && ![ ...Qt.keys() ].includes(t)) {
                const i = zt.get(s), e = (i && i.delete(t), Bt.get(s));
                e && e.delete(t);
            }
        }
        static _$_AddEase$_(t, s, i, e, n) {
            switch (i) {
              case "predefined":
                Ft.set(t, s), jt.set(t, s);
                break;

              case "custom":
                if (e) {
                    zt.has(e) || zt.set(e, new Map()), Bt.has(e) || Bt.set(e, new Map());
                    const h = zt.get(e), r = (h.set(t, s), Bt.get(e));
                    r.set(t, n);
                } else Ut.set(t, s), Wt.set(t, n);
                break;

              case "private":
                Ft.set(t, s), Qt.set(t, s);
                break;

              default:
                throw new Error("unexpected ease mode");
            }
        }
        static _$NoEase$_(t, s, i, e) {
            return 0 === e ? s : i * t / e + s;
        }
        static _$EaseCubicBezier$_(t, s, i, e, n) {
            const h = s, r = 3 * t * (i - s), o = 3 * t ** 2 * (s + e - 2 * i), a = t ** 3 * (n - s + 3 * i - 3 * e);
            return h + r + o + a;
        }
        static _$EaseSpline$_(t, s, i, e, n, h, r, o, a, l) {
            if (e === n && h === r) return t;
            const u = es(t, s, e, h, o, l), c = Kt(i, n, r, a), f = $t(i, n, r, a), d = ts(i, n, r, a);
            return ss(u, c, f, d);
        }
        static _$GetBezierSamples$_(t, s, i, e) {
            const n = [], h = Kt(t, s, i, e), r = $t(t, s, i, e), o = ts(t, s, i, e);
            for (let t = 0; t < Zt; ++t) {
                const a = ss(t * Xt, h, r, o);
                n.push(a);
            }
            return n;
        }
    }, 11), Xt = 1 / (Zt - 1), Kt = (t, s, i, e) => e - 3 * i + 3 * s - t, $t = (t, s, i, e) => 3 * i - 6 * s + 3 * t, ts = (t, s, i, e) => 3 * (s - t), ss = (t, s, i, e) => ((s * t + i) * t + e) * t, is = (t, s, i, e) => 3 * s * t * t + 2 * i * t + e, es = (r, t, s, i, e, n) => {
        if (1 == r) return 1;
        let o = 0, h = 1, a = n[h], l = Zt - 1;
        for (Zt; h != l && a <= r; ) h++, a = n[h], o += Xt;
        h--;
        let u = (r - (a = n[h])) / (n[h + 1] - a), c = o + u * Xt, f = Kt(t, s, i, e), d = $t(t, s, i, e), p = ts(t, s, i, e), m = is(c, f, d, p);
        if (0 === m) return c;
        if (.01 <= m) {
            for (let t = 0; t < 4; ++t) {
                const g = ss(c, f, d, p) - r, y = is(c, f, d, p);
                c -= g / y;
            }
            return c;
        }
        {
            let s = o, i = o + Xt, e = 0, n, h;
            do {
                c = s + (i - s) / 2;
                let t = ss(c, f, d, p) - r;
                0 < t ? i = c : s = c, n = 1e-7 < Math.abs(t), h = ++e < 10;
            } while (n && h);
            return c;
        }
    };
}

{
    let o = function(t) {
        hs._$IsString$_(t);
    };
    o;
    const hs = self._$C3$_;
    hs._$ProbabilityTable$_ = class {
        constructor(t) {
            this._$_items$_ = [], this._$_name$_ = t || "", this._$_totalWeight$_ = 0;
        }
        _$Release$_() {
            this._$Clear$_(), this._$_items$_ = null;
        }
        _$GetName$_() {
            return this._$_name$_;
        }
        _$Clear$_() {
            hs._$clear2DArray$_(this._$_items$_), this._$_totalWeight$_ = 0;
        }
        _$GetTotalWeight$_() {
            return this._$_totalWeight$_;
        }
        _$Sample$_(t = Math.random() * this._$GetTotalWeight$_()) {
            let s = 0;
            for (const [ i, e ] of this._$_items$_) if (t < (s += i)) return e;
            return 0;
        }
        _$AddItem$_(t, s) {
            o(s), this._$_totalWeight$_ += t, this._$_items$_.push([ t, s ]);
        }
        _$RemoveItem$_(s, i) {
            o(i);
            const e = 0 === s;
            for (let t = 0; t < this._$_items$_.length; t++) {
                const n = this._$_items$_[t], h = e || n[0] === s, r = n[1] === i;
                if (h && r) {
                    this._$_items$_.splice(t, 1), this._$_totalWeight$_ -= n[0];
                    break;
                }
            }
        }
        _$asJSON$_() {
            return JSON.stringify(this._$_items$_);
        }
        static _$fromJSON$_(t, s) {
            const i = new hs._$ProbabilityTable$_(s), e = JSON.parse(t);
            for (const n of e) {
                const h = n[0], r = n[1];
                i._$AddItem$_(h, r);
            }
            return i;
        }
    };
}

{
    let t = self._$C3$_, i = 0;
    t._$ScreenReaderText$_ = class {
        constructor(t, s) {
            this._$_runtime$_ = t, this._$_text$_ = s, this._$_id$_ = i++, this._$_runtime$_._$PostComponentMessageToDOM$_("runtime", "screen-reader-text", {
                type: "create",
                id: this._$_id$_,
                text: this._$_text$_
            });
        }
        _$Release$_() {
            this._$_runtime$_._$PostComponentMessageToDOM$_("runtime", "screen-reader-text", {
                type: "release",
                id: this._$_id$_
            }), this._$_runtime$_ = null, this._$_text$_ = "", this._$_id$_ = -1;
        }
        _$SetText$_(t) {
            this._$_text$_ !== t && (this._$_text$_ = t, this._$_runtime$_._$PostComponentMessageToDOM$_("runtime", "screen-reader-text", {
                type: "update",
                id: this._$_id$_,
                text: this._$_text$_
            }));
        }
    };
}

{
    const rs = self._$C3$_;
    rs.Event = class {
        constructor(t, s) {
            this.type = t, this.cancelable = !!s, this.defaultPrevented = !1, this._$propagationStopped$_ = !1, 
            this._$isAsync$_ = !1;
        }
        preventDefault() {
            if (!this.cancelable) throw new Error(`event '${this.type}' is not cancelable`);
            this.defaultPrevented = !0;
        }
        stopPropagation() {
            if (!this.cancelable) throw new Error(`event '${this.type}' cannot be stopped`);
            if (this._$isAsync$_) throw new Error(`cannot stop async event '${this.type}' propagation`);
            this._$propagationStopped$_ = !0;
        }
    };
}

{
    const os = self._$C3$_;
    os.Event._$Handler$_ = class extends os._$DefendedBase$_ {
        constructor(t) {
            super(), this._$_type$_ = t, this._$_captureListeners$_ = [], this._$_captureListenersSet$_ = new Set(), 
            this._$_listeners$_ = [], this._$_listenersSet$_ = new Set(), this._$_fireDepth$_ = 0, 
            this._$_queueModifyListeners$_ = [];
        }
        _$Release$_() {
            0 < this._$_fireDepth$_ || (os._$clearArray$_(this._$_captureListeners$_), 
            this._$_captureListenersSet$_.clear(), os._$clearArray$_(this._$_listeners$_), 
            this._$_listenersSet$_.clear(), os._$clearArray$_(this._$_queueModifyListeners$_), 
            os._$Release$_(this));
        }
        _$_AddListener$_(t, s) {
            this._$_IsFiring$_() ? this._$_queueModifyListeners$_.push({
                _$op$_: "add",
                _$func$_: t,
                capture: s
            }) : s ? this._$_captureListenersSet$_.has(t) || (this._$_captureListeners$_.push(t), 
            this._$_captureListenersSet$_.add(t)) : this._$_listenersSet$_.has(t) || (this._$_listeners$_.push(t), 
            this._$_listenersSet$_.add(t));
        }
        _$_RemoveListener$_(t, s) {
            this._$_IsFiring$_() ? this._$_queueModifyListeners$_.push({
                _$op$_: "remove",
                _$func$_: t,
                capture: s
            }) : s ? this._$_captureListenersSet$_.has(t) && (this._$_captureListenersSet$_.delete(t), 
            os._$arrayFindRemove$_(this._$_captureListeners$_, t)) : this._$_listenersSet$_.has(t) && (this._$_listenersSet$_.delete(t), 
            os._$arrayFindRemove$_(this._$_listeners$_, t));
        }
        _$_IsEmpty$_() {
            return !this._$_captureListeners$_.length && !this._$_listeners$_.length;
        }
        _$_IsFiring$_() {
            return 0 < this._$_fireDepth$_;
        }
        _$_ProcessQueuedListeners$_() {
            const t = new Set(), s = new Set();
            for (const i of this._$_queueModifyListeners$_) if ("add" === i._$op$_) this._$_AddListener$_(i._$func$_, i.capture), 
            (i.capture ? s : t).delete(i._$func$_); else {
                if ("remove" !== i._$op$_) throw new Error("invalid op");
                (i.capture ? (this._$_captureListenersSet$_.delete(i._$func$_), 
                s) : (this._$_listenersSet$_.delete(i._$func$_), t)).add(i._$func$_);
            }
            os._$arrayRemoveAllInSet$_(this._$_listeners$_, t), os._$arrayRemoveAllInSet$_(this._$_captureListeners$_, s), 
            os._$clearArray$_(this._$_queueModifyListeners$_);
        }
        _$_FireCancellable$_(i) {
            this._$_IncreaseFireDepth$_();
            let e = !1;
            for (let t = 0, s = this._$_captureListeners$_.length; t < s; ++t) if (this._$_captureListeners$_[t](i), 
            i._$propagationStopped$_) {
                e = !0;
                break;
            }
            if (!e) for (let t = 0, s = this._$_listeners$_.length; t < s && (this._$_listeners$_[t](i), 
            !i._$propagationStopped$_); ++t);
            return this._$_DecreaseFireDepth$_(), !i.defaultPrevented;
        }
        _$_FireNonCancellable$_(i) {
            this._$_IncreaseFireDepth$_();
            for (let t = 0, s = this._$_captureListeners$_.length; t < s; ++t) this._$_captureListeners$_[t](i);
            for (let t = 0, s = this._$_listeners$_.length; t < s; ++t) this._$_listeners$_[t](i);
            return this._$_DecreaseFireDepth$_(), !0;
        }
        _$_IncreaseFireDepth$_() {
            this._$_fireDepth$_++;
        }
        _$_DecreaseFireDepth$_() {
            this._$_fireDepth$_--, 0 === this._$_fireDepth$_ && 0 < this._$_queueModifyListeners$_.length && this._$_ProcessQueuedListeners$_();
        }
        _$SetDelayRemoveEventsEnabled$_(t) {
            t ? this._$_IncreaseFireDepth$_() : this._$_DecreaseFireDepth$_();
        }
        _$_FireAsync$_(i) {
            let e = [];
            for (let s = 0, t = this._$_captureListeners$_.length; s < t; ++s) {
                let t = this._$_captureListeners$_[s];
                e.push(os._$Asyncify$_(() => t(i)));
            }
            for (let s = 0, t = this._$_listeners$_.length; s < t; ++s) {
                let t = this._$_listeners$_[s];
                e.push(os._$Asyncify$_(() => t(i)));
            }
            return Promise.all(e).then(() => !i.defaultPrevented);
        }
        _$_FireAndWait_AsyncOptional$_(i) {
            const e = [];
            this._$_IncreaseFireDepth$_();
            for (let t = 0, s = this._$_captureListeners$_.length; t < s; ++t) {
                const n = this._$_captureListeners$_[t](i);
                n instanceof Promise && e.push(n);
            }
            for (let t = 0, s = this._$_listeners$_.length; t < s; ++t) {
                const h = this._$_listeners$_[t](i);
                h instanceof Promise && e.push(h);
            }
            return this._$_DecreaseFireDepth$_(), e.length ? Promise.all(e).then(() => !i.defaultPrevented) : !i.defaultPrevented;
        }
        async _$_FireAndWaitAsync$_(t) {
            return this._$_FireAndWait_AsyncOptional$_(t);
        }
        async _$_FireAndWaitAsyncSequential$_(i) {
            this._$_IncreaseFireDepth$_();
            for (let t = 0, s = this._$_captureListeners$_.length; t < s; ++t) {
                const e = this._$_captureListeners$_[t](i);
                e instanceof Promise && await e;
            }
            for (let t = 0, s = this._$_listeners$_.length; t < s; ++t) {
                const n = this._$_listeners$_[t](i);
                n instanceof Promise && await n;
            }
            return this._$_DecreaseFireDepth$_(), !i.defaultPrevented;
        }
        *_$_FireAsGenerator$_(i) {
            this._$_IncreaseFireDepth$_();
            for (let t = 0, s = this._$_captureListeners$_.length; t < s; ++t) {
                const e = this._$_captureListeners$_[t](i);
                os._$IsIterator$_(e) && (yield* e);
            }
            for (let t = 0, s = this._$_listeners$_.length; t < s; ++t) {
                const n = this._$_listeners$_[t](i);
                os._$IsIterator$_(n) && (yield* n);
            }
            this._$_DecreaseFireDepth$_();
        }
    };
}

{
    const as = self._$C3$_;
    as.Event._$Dispatcher$_ = class extends as._$DefendedBase$_ {
        constructor() {
            super(), this._$_eventHandlers$_ = new Map(), this._$_dispatcherWasReleased$_ = !1;
        }
        _$Release$_() {
            if (this._$_dispatcherWasReleased$_) throw new Error("already released");
            this._$ClearEvents$_(), this._$_dispatcherWasReleased$_ = !0, as._$Release$_(this);
        }
        _$WasReleased$_() {
            return this._$_dispatcherWasReleased$_;
        }
        _$ClearEvents$_() {
            if (this._$_eventHandlers$_) {
                for (let t of this._$_eventHandlers$_.values()) t._$Release$_();
                this._$_eventHandlers$_.clear();
            }
        }
        _$_GetHandlerByType$_(t, s) {
            let i = this._$_eventHandlers$_.get(t);
            return i || (s ? (i = as._$New$_(as.Event._$Handler$_, t), this._$_eventHandlers$_.set(t, i), 
            i) : null);
        }
        _$HasAnyHandlerFor$_(t) {
            return this._$_eventHandlers$_.has(t);
        }
        addEventListener(t, s, i) {
            let e = this._$_GetHandlerByType$_(t, !0);
            e._$_AddListener$_(s, !!i);
        }
        removeEventListener(t, s, i) {
            let e = this._$_GetHandlerByType$_(t, !1);
            e && (e._$_RemoveListener$_(s, !!i), e._$_IsEmpty$_()) && this._$_eventHandlers$_.delete(t);
        }
        dispatchEvent(t) {
            const s = this._$_GetHandlerByType$_(t.type, !1);
            return !s || (t.cancelable ? s._$_FireCancellable$_(t) : s._$_FireNonCancellable$_(t));
        }
        _$dispatchEventAsync$_(t) {
            const s = this._$_GetHandlerByType$_(t.type, !1);
            return s ? (t._$isAsync$_ = !0, s._$_FireAsync$_(t)) : Promise.resolve(!0);
        }
        async _$dispatchEventAndClearAsync$_(t) {
            const s = this._$_GetHandlerByType$_(t.type, !1);
            if (!s) return !0;
            this._$_eventHandlers$_.delete(t.type), t._$isAsync$_ = !0;
            const i = await s._$_FireAsync$_(t);
            return s._$Release$_(), i;
        }
        async _$dispatchEventAndWaitAsync$_(t) {
            const s = this._$_GetHandlerByType$_(t.type, !1);
            return !s || s._$_FireAndWaitAsync$_(t);
        }
        _$dispatchEventAndWait_AsyncOptional$_(t) {
            const s = this._$_GetHandlerByType$_(t.type, !1);
            return !s || s._$_FireAndWait_AsyncOptional$_(t);
        }
        async _$dispatchEventAndWaitAsyncSequential$_(t) {
            const s = this._$_GetHandlerByType$_(t.type, !1);
            return !s || s._$_FireAndWaitAsyncSequential$_(t);
        }
        _$dispatchGeneratorEvent$_(t) {
            const s = this._$_GetHandlerByType$_(t.type, !1);
            if (!s) return null;
            if (t.cancelable) throw new Error("not supported");
            return s._$_FireAsGenerator$_(t);
        }
        _$SetDelayRemoveEventsEnabled$_(t) {
            for (const s of this._$_eventHandlers$_.values()) s._$SetDelayRemoveEventsEnabled$_(t);
        }
    };
}

{
    let h = function(t) {
        c = l && 0 === f ? requestIdleCallback(s, {
            timeout: i
        }) : setTimeout(s, 0 < f ? 1 : t);
    }, s = function(n) {
        if (c = -1, u.length) {
            let i = performance.now(), e = i, t = 0, s;
            for (;r(u.shift()), e = performance.now(), ++t, s = (e - i) / t * 1.1, 
            u.length && (l && 0 === f && void 0 !== n ? s < n.timeRemaining() : e - i + s < o); );
            if (-1 === c && u.length) {
                let t = e - i, s = Math.max(a - t, 4);
                h(s);
            }
        }
    }, r = function(s) {
        let t;
        try {
            t = s._$func$_();
        } catch (t) {
            return void s.reject(t);
        }
        s.resolve(t);
    }, t = (h, s, r, self._$C3$_), o = 12, a = 16, i = 35, l = "undefined" != typeof requestIdleCallback, u = [], c = -1, f = 0, n = t._$QueryString$_._$Has$_("disable-asyncify");
    n && console.warn("[Asyncify] Asyncify has been disabled due to disable-asyncify in the query string. Some work will now be done synchronously."), 
    t._$Asyncify$_ = function(i) {
        let e = null;
        return t.isDebug && (e = t._$GetCallStack$_()), new Promise((t, s) => {
            u.push({
                _$func$_: i,
                resolve: t,
                reject: s,
                stack: e
            }), n ? r(u.pop()) : -1 === c && h(a);
        });
    }, t._$Asyncify$_._$SetHighThroughputMode$_ = function(t) {
        if (t) ++f; else if (--f < 0) throw new Error("already turned off high throughput mode");
    };
}

{
    let t = function() {
        h = -1;
    }, s = function() {
        r = -1, o = -1;
        let i = Date.now();
        for (let s of a) if (s._$_CheckTimeout$_(i)) {
            let t = s._$_GetDeadline$_();
            (-1 === o || t < o) && (o = t);
        } else a.delete(s);
        if (-1 !== o) {
            let t = Math.max(o - i + n, e);
            r = self.setTimeout(s, t);
        }
    }, i = (t, s, self._$C3$_), e = 1e3, n = 100, h = -1, r = (i._$FastGetDateNow$_ = function() {
        return -1 === h && (h = Date.now(), self.setTimeout(t, 16)), h;
    }, -1), o = -1, a = new Set();
    i._$IdleTimeout$_ = class {
        constructor(t, s) {
            this._$_callback$_ = t, this._$_timeout$_ = 1e3 * s, this._$_deadline$_ = 0, 
            this._$_isActive$_ = !1;
        }
        _$Reset$_() {
            let t = i._$FastGetDateNow$_();
            this._$_deadline$_ = t + this._$_timeout$_, this._$_isActive$_ || (a.add(this), 
            this._$_isActive$_ = !0), -1 === r ? (o = this._$_deadline$_, r = self.setTimeout(s, this._$_timeout$_ + n)) : this._$_deadline$_ < o && o > t + e && (self.clearTimeout(r), 
            o = this._$_deadline$_, r = self.setTimeout(s, this._$_timeout$_ + n));
        }
        _$_CheckTimeout$_(t) {
            return !(t >= this._$_deadline$_) || (this._$_callback$_() ? (this._$_deadline$_ = t + this._$_timeout$_, 
            !0) : this._$_isActive$_ = !1);
        }
        _$_GetDeadline$_() {
            return this._$_deadline$_;
        }
        _$Cancel$_() {
            this._$_isActive$_ && (a.delete(this), this._$_isActive$_ = !1, 0 === a.size) && -1 !== r && (self.clearTimeout(r), 
            r = -1, o = -1);
        }
        _$Release$_() {
            this._$Cancel$_(), this._$_callback$_ = null;
        }
    };
}

{
    const ls = self._$C3$_;
    ls._$Disposable$_ = class us {
        constructor(t) {
            this._$_disposed$_ = !1, this._$_disposeAction$_ = t;
        }
        _$Dispose$_() {
            this._$_disposed$_ || (this._$_disposed$_ = !0, this._$_disposeAction$_ && (this._$_disposeAction$_(), 
            this._$_disposeAction$_ = null));
        }
        _$IsDisposed$_() {
            return this._$_disposed$_;
        }
        _$Release$_() {
            this._$Dispose$_();
        }
        static _$Release$_(t) {
            return new us(() => t._$Release$_());
        }
        static _$From$_(s, i, e, n, t) {
            if (null == n) n = !1; else if ("boolean" != typeof n && "object" != typeof n) throw new TypeError("invalid event listener options");
            if (t && (e = e.bind(t)), i.includes(" ")) {
                i = i.split(" ");
                const h = new ls._$CompositeDisposable$_();
                for (let t of i) s.addEventListener(t, e, n), h._$Add$_(ls._$New$_(ls._$Disposable$_, () => s.removeEventListener(t, e, n)));
                return h;
            }
            return s.addEventListener(i, e, n), ls._$New$_(ls._$Disposable$_, () => s.removeEventListener(i, e, n));
        }
    }, ls._$StubDisposable$_ = class extends ls._$Disposable$_ {
        _$SetAction$_(t) {
            this._$_disposeAction$_ = t;
        }
    }, ls._$CompositeDisposable$_ = class extends ls._$Disposable$_ {
        constructor(...s) {
            super(), this._$_disposables$_ = new Set();
            for (let t of s) this._$Add$_(t);
        }
        _$Add$_(...s) {
            if (this._$_disposed$_) throw new Error("already disposed");
            for (let t of s) this._$_disposables$_.add(t);
        }
        _$Remove$_(t) {
            if (this._$_disposed$_) throw new Error("already disposed");
            this._$_disposables$_.delete(t);
        }
        _$RemoveAll$_() {
            if (this._$_disposed$_) throw new Error("already disposed");
            if (this._$_disposables$_) {
                for (let t of this._$_disposables$_) t._$Dispose$_();
                this._$_disposables$_.clear();
            }
        }
        _$IsDisposed$_() {
            return this._$_disposed$_;
        }
        _$Dispose$_() {
            if (this._$_disposed$_) throw new Error("already disposed");
            this._$_disposed$_ = !0;
            for (let t of this._$_disposables$_) t._$Dispose$_();
            this._$_disposables$_.clear(), this._$_disposables$_ = null;
        }
        _$Release$_() {
            this._$Dispose$_();
        }
    };
}

{
    const cs = self._$C3$_;
    cs._$KahanSum$_ = class extends cs._$DefendedBase$_ {
        constructor() {
            super(), this._$_c$_ = 0, this._$_y$_ = 0, this._$_t$_ = 0, this._$_sum$_ = 0;
        }
        _$Add$_(t) {
            this._$_y$_ = (t = +t) - this._$_c$_, this._$_t$_ = this._$_sum$_ + this._$_y$_, 
            this._$_c$_ = this._$_t$_ - this._$_sum$_ - this._$_y$_, this._$_sum$_ = this._$_t$_;
        }
        _$Subtract$_(t) {
            this._$_sum$_ -= +t;
        }
        _$Get$_() {
            return this._$_sum$_;
        }
        _$Reset$_() {
            this._$_c$_ = 0, this._$_y$_ = 0, this._$_t$_ = 0, this._$_sum$_ = 0;
        }
        Set(t) {
            this._$_c$_ = 0, this._$_y$_ = 0, this._$_t$_ = 0, this._$_sum$_ = +t;
        }
        _$Copy$_(t) {
            this._$_c$_ = t._$_c$_, this._$_y$_ = t._$_y$_, this._$_t$_ = t._$_t$_, 
            this._$_sum$_ = t._$_sum$_;
        }
        _$Release$_() {}
    };
}

{
    const fs = self._$C3$_, r = {};
    r._$RBnode$_ = function(t) {
        this._$tree$_ = t, this.right = this._$tree$_._$sentinel$_, this.left = this._$tree$_._$sentinel$_, 
        this.parent = null, this.color = !1, this.key = null;
    }, r._$RedBlackSet$_ = function(t) {
        this.size = 0, this._$sentinel$_ = new r._$RBnode$_(this), this._$sentinel$_.color = !1, 
        this.root = this._$sentinel$_, this.root.parent = this._$sentinel$_, this.compare = t || this._$default_compare$_;
    }, r._$RedBlackSet$_.prototype._$default_compare$_ = function(t, s) {
        return t < s ? -1 : s < t ? 1 : 0;
    }, r._$RedBlackSet$_.prototype.clone = function() {
        var t = new r._$RedBlackSet$_(this.compare);
        return t._$insertAll$_(this), t;
    }, r._$RedBlackSet$_.prototype.clear = function() {
        this.size = 0, this._$sentinel$_ = new r._$RBnode$_(this), this._$sentinel$_.color = !1, 
        this.root = this._$sentinel$_, this.root.parent = this._$sentinel$_;
    }, r._$RedBlackSet$_.prototype._$leftRotate$_ = function(t) {
        var s = t.right;
        t.right = s.left, s.left != this._$sentinel$_ && (s.left.parent = t), s.parent = t.parent, 
        t.parent == this._$sentinel$_ ? this.root = s : t == t.parent.left ? t.parent.left = s : t.parent.right = s, 
        (s.left = t).parent = s;
    }, r._$RedBlackSet$_.prototype._$rightRotate$_ = function(t) {
        var s = t.left;
        t.left = s.right, s.right != this._$sentinel$_ && (s.right.parent = t), 
        s.parent = t.parent, t.parent == this._$sentinel$_ ? this.root = s : t == t.parent.right ? t.parent.right = s : t.parent.left = s, 
        (s.right = t).parent = s;
    }, r._$RedBlackSet$_.prototype._$insert$_ = function(t) {
        if (this.contains(t)) this._$get_$_(t).key = t; else {
            for (var s = new r._$RBnode$_(this), i = (s.key = t, this._$sentinel$_), e = this.root; e != this._$sentinel$_; ) i = e, 
            e = this.compare(s.key, e.key) < 0 ? e.left : e.right;
            (s.parent = i) == this._$sentinel$_ ? this.root = s : this.compare(s.key, i.key) < 0 ? i.left = s : i.right = s, 
            s.left = this._$sentinel$_, s.right = this._$sentinel$_, s.color = !0, 
            this._$insertFixup$_(s), this.size++;
        }
    }, r._$RedBlackSet$_.prototype._$insertFixup$_ = function(t) {
        for (;t != this._$sentinel$_ && t != this.root && 1 == t.parent.color; ) {
            var s;
            t.parent == t.parent.parent.left ? 1 == (s = t.parent.parent.right).color ? (t.parent.color = !1, 
            s.color = !1, t.parent.parent.color = !0, t = t.parent.parent) : (t == t.parent.right && (t = t.parent, 
            this._$leftRotate$_(t)), t.parent.color = !1, t.parent.parent.color = !0, 
            t.parent.parent != this._$sentinel$_ && this._$rightRotate$_(t.parent.parent)) : 1 == (s = t.parent.parent.left).color ? (t.parent.color = !1, 
            s.color = !1, t.parent.parent.color = !0, t = t.parent.parent) : (t == t.parent.left && (t = t.parent, 
            this._$rightRotate$_(t)), t.parent.color = !1, t.parent.parent.color = !0, 
            t.parent.parent != this._$sentinel$_ && this._$leftRotate$_(t.parent.parent));
        }
        this.root.color = !1;
    }, r._$RedBlackSet$_.prototype._$delete_$_ = function(t) {
        var s = t.left == this._$sentinel$_ || t.right == this._$sentinel$_ ? t : this._$successor_$_(t), i = s.left != this._$sentinel$_ ? s.left : s.right;
        i.parent = s.parent, s.parent == this._$sentinel$_ ? this.root = i : s == s.parent.left ? s.parent.left = i : s.parent.right = i, 
        s != t && (t.key = s.key), 0 == s.color && this._$deleteFixup$_(i), this.size--;
    }, r._$RedBlackSet$_.prototype._$deleteFixup$_ = function(t) {
        for (;t != this.root && 0 == t.color; ) {
            var s;
            t = t == t.parent.left ? (1 == (s = t.parent.right).color && (s.color = !1, 
            t.parent.color = !0, this._$leftRotate$_(t.parent), s = t.parent.right), 
            0 == s.left.color && 0 == s.right.color ? (s.color = !0, t.parent) : (0 == s.right.color && (s.left.color = !1, 
            s.color = !0, this._$rightRotate$_(s), s = t.parent.right), s.color = t.parent.color, 
            t.parent.color = !1, s.right.color = !1, this._$leftRotate$_(t.parent), 
            this.root)) : (1 == (s = t.parent.left).color && (s.color = !1, t.parent.color = !0, 
            this._$rightRotate$_(t.parent), s = t.parent.left), 0 == s.right.color && 0 == s.left.color ? (s.color = !0, 
            t.parent) : (0 == s.left.color && (s.right.color = !1, s.color = !0, 
            this._$leftRotate$_(s), s = t.parent.left), s.color = t.parent.color, 
            t.parent.color = !1, s.left.color = !1, this._$rightRotate$_(t.parent), 
            this.root));
        }
        t.color = !1;
    }, r._$RedBlackSet$_.prototype.remove = function(t) {
        var s;
        return (t = this._$get_$_(t)) != this._$sentinel$_ ? (s = t.key, this._$delete_$_(t), 
        s) : null;
    }, r._$RedBlackSet$_.prototype._$removeSwapped$_ = function(t, s) {
        this.remove(s);
    }, r._$RedBlackSet$_.prototype.min = function(t) {
        for (;t.left != this._$sentinel$_; ) t = t.left;
        return t;
    }, r._$RedBlackSet$_.prototype.max = function(t) {
        for (;t.right != this._$sentinel$_; ) t = t.right;
        return t;
    }, r._$RedBlackSet$_.prototype._$successor_$_ = function(t) {
        if (t.right != this._$sentinel$_) return this.min(t.right);
        for (var s = t.parent; s != this._$sentinel$_ && t == s.right; ) s = (t = s).parent;
        return s;
    }, r._$RedBlackSet$_.prototype._$predeccessor_$_ = function(t) {
        if (t.left != this._$sentinel$_) return this.max(t.left);
        for (var s = t.parent; s != this._$sentinel$_ && t == s.left; ) s = (t = s).parent;
        return s;
    }, r._$RedBlackSet$_.prototype._$successor$_ = function(t) {
        if (0 < this.size) {
            var s = this._$get_$_(t);
            if (s == this._$sentinel$_) return null;
            if (s.right != this._$sentinel$_) return this.min(s.right).key;
            for (var i = s.parent; i != this._$sentinel$_ && s == i.right; ) i = (s = i).parent;
            return i != this._$sentinel$_ ? i.key : null;
        }
        return null;
    }, r._$RedBlackSet$_.prototype._$predecessor$_ = function(t) {
        if (0 < this.size) {
            var s = this._$get_$_(t);
            if (s == this._$sentinel$_) return null;
            if (s.left != this._$sentinel$_) return this.max(s.left).key;
            for (var i = s.parent; i != this._$sentinel$_ && s == i.left; ) i = (s = i).parent;
            return i != this._$sentinel$_ ? i.key : null;
        }
        return null;
    }, r._$RedBlackSet$_.prototype._$getMin$_ = function() {
        return this.min(this.root).key;
    }, r._$RedBlackSet$_.prototype._$getMax$_ = function() {
        return this.max(this.root).key;
    }, r._$RedBlackSet$_.prototype._$get_$_ = function(t) {
        for (var s = this.root; s != this._$sentinel$_ && 0 != this.compare(s.key, t); ) s = this.compare(t, s.key) < 0 ? s.left : s.right;
        return s;
    }, r._$RedBlackSet$_.prototype.contains = function(t) {
        return null != this._$get_$_(t).key;
    }, r._$RedBlackSet$_.prototype.getValues = function() {
        var s = [];
        return this.forEach(function(t) {
            s.push(t);
        }), s;
    }, r._$RedBlackSet$_.prototype._$insertAll$_ = function(t) {
        if ("array" == r.typeOf(t)) for (var s = 0; s < t.length; s++) this._$insert$_(t[s]); else if ("function" == r.typeOf(t.forEach)) t.forEach(this._$insert$_, this); else if ("function" == r.typeOf(t.getValues)) for (var i = t.getValues(), s = 0; s < i.length; s++) this._$insert$_(i[s]); else if ("object" == r.typeOf(t)) for (var e in t) this._$insert$_(t[e]);
    }, r._$RedBlackSet$_.prototype._$removeAll$_ = function(t) {
        if ("array" == r.typeOf(t)) for (var s = 0; s < t.length; s++) this.remove(t[s]); else if ("function" == r.typeOf(t.forEach)) t.forEach(this._$removeSwapped$_, this); else if ("function" == r.typeOf(t.getValues)) for (var i = t.getValues(), s = 0; s < i.length; s++) this.remove(i[s]); else if ("object" == r.typeOf(t)) for (var e in t) this.remove(t[e]);
    }, r._$RedBlackSet$_.prototype._$containsAll$_ = function(t) {
        if ("array" == r.typeOf(t)) {
            for (var s = 0; s < t.length; s++) if (!this.contains(t[s])) return !1;
            return !0;
        }
        if ("function" == r.typeOf(t.forEach)) return t.every(this.contains, this);
        if ("function" == r.typeOf(t.getValues)) {
            for (var i = t.getValues(), s = 0; s < i.length; s++) if (!this.contains(i[s])) return !1;
            return !0;
        }
        if ("object" == r.typeOf(t)) {
            for (var e in t) if (!this.contains(t[e])) return !1;
            return !0;
        }
    }, r._$RedBlackSet$_.prototype.range = function(t, s) {
        var i = [];
        return this._$traverseFromTo$_(function(t) {
            i.push(t);
        }, t, s), i;
    }, r._$RedBlackSet$_.prototype._$traverse$_ = function(t, s) {
        if (!this._$isEmpty$_()) for (var i = this.min(this.root); i != this._$sentinel$_; ) {
            if (t.call(s, i.key, this)) return;
            i = this._$successor_$_(i);
        }
    }, r._$RedBlackSet$_.prototype._$traverseFrom$_ = function(t, s, i) {
        if (!this._$isEmpty$_()) for (var e = this._$get_$_(s); e != this._$sentinel$_; ) {
            if (t.call(i, e.key, this)) return;
            e = this._$successor_$_(e);
        }
    }, r._$RedBlackSet$_.prototype._$traverseTo$_ = function(t, s, i) {
        if (!this._$isEmpty$_()) for (var e = this.min(this.root), n = this._$get_$_(s); e != n; ) {
            if (t.call(i, e.key, this)) return;
            e = this._$successor_$_(e);
        }
    }, r._$RedBlackSet$_.prototype._$traverseFromTo$_ = function(t, s, i, e) {
        if (!this._$isEmpty$_()) for (var n = this._$get_$_(s), h = this._$get_$_(i); n != h; ) {
            if (t.call(e, n.key, this)) return;
            n = this._$successor_$_(n);
        }
    }, r._$RedBlackSet$_.prototype._$traverseBackwards$_ = function(t, s) {
        if (!this._$isEmpty$_()) for (var i = this.max(this.root); i != this._$sentinel$_; ) {
            if (t.call(s, i.key, this)) return;
            i = this._$predeccessor_$_(i);
        }
    }, r._$RedBlackSet$_.prototype.forEach = function(t, s) {
        if (!this._$isEmpty$_()) for (var i = this.min(this.root); i != this._$sentinel$_; i = this._$successor_$_(i)) t.call(s, i.key, i.key, this);
    }, r._$RedBlackSet$_.prototype.some = function(t, s) {
        if (!this._$isEmpty$_()) for (var i = this.min(this.root); i != this._$sentinel$_; i = this._$successor_$_(i)) if (t.call(s, i.key, i.key, this)) return !0;
        return !1;
    }, r._$RedBlackSet$_.prototype.every = function(t, s) {
        if (this._$isEmpty$_()) return !1;
        for (var i = this.min(this.root); i != this._$sentinel$_; i = this._$successor_$_(i)) if (!t.call(s, i.key, i.key, this)) return !1;
        return !0;
    }, r._$RedBlackSet$_.prototype.map = function(t, s) {
        var i = [];
        if (!this._$isEmpty$_()) for (var e = this.min(this.root); e != this._$sentinel$_; e = this._$successor_$_(e)) i.push(t.call(s, e.key, e.key, this));
        return i;
    }, r._$RedBlackSet$_.prototype.filter = function(t, s) {
        var i = [];
        if (!this._$isEmpty$_()) for (var e = this.min(this.root); e != this._$sentinel$_; e = this._$successor_$_(e)) t.call(s, e.key, e.key, this) && i.push(e.key);
        return i;
    }, r._$RedBlackSet$_.prototype.getCount = function() {
        return this.size;
    }, r._$RedBlackSet$_.prototype._$isEmpty$_ = function() {
        return 0 == this.size;
    }, r._$RedBlackSet$_.prototype.isSubsetOf = function(t) {
        var s = r.getCount(t);
        if (this.getCount() > s) return !1;
        var i = 0;
        if (this._$isEmpty$_()) return !0;
        for (var e = this.min(this.root); e != this._$sentinel$_; e = this._$successor_$_(e)) r.contains.call(t, t, e.key) && i++;
        return i == this.getCount();
    }, r._$RedBlackSet$_.prototype.intersection = function(t) {
        var s = new r._$RedBlackSet$_(this.compare);
        if (!this._$isEmpty$_()) for (var i = this.min(this.root); i != this._$sentinel$_; i = this._$successor_$_(i)) t.contains.call(t, i.key, i.key, this) && s._$insert$_(i.key);
        return s;
    }, fs._$RedBlackSet$_ = class extends fs._$DefendedBase$_ {
        constructor(t) {
            super(), this._$_rbSet$_ = new r._$RedBlackSet$_(t), this._$_enableQueue$_ = !1, 
            this._$_queueInsert$_ = new Set(), this._$_queueRemove$_ = new Set();
        }
        _$Add$_(t) {
            this._$_enableQueue$_ ? this._$_rbSet$_.contains(t) ? this._$_queueRemove$_.delete(t) : this._$_queueInsert$_.add(t) : this._$_rbSet$_._$insert$_(t);
        }
        _$Remove$_(t) {
            this._$_enableQueue$_ ? this._$_rbSet$_.contains(t) ? this._$_queueRemove$_.add(t) : this._$_queueInsert$_.delete(t) : this._$_rbSet$_.remove(t);
        }
        _$Has$_(t) {
            return this._$_enableQueue$_ ? !!this._$_queueInsert$_.has(t) || !this._$_queueRemove$_.has(t) && this._$_rbSet$_.contains(t) : this._$_rbSet$_.contains(t);
        }
        _$Clear$_() {
            this._$_rbSet$_.clear(), this._$_queueInsert$_.clear(), this._$_queueRemove$_.clear();
        }
        toArray() {
            if (this._$_enableQueue$_) throw new Error("cannot be used in queueing mode");
            return this._$_rbSet$_.getValues();
        }
        _$GetSize$_() {
            return this._$_rbSet$_.getCount() + this._$_queueInsert$_.size - this._$_queueRemove$_.size;
        }
        _$IsEmpty$_() {
            return 0 === this._$GetSize$_();
        }
        _$Front$_() {
            if (this._$IsEmpty$_()) throw new Error("empty set");
            if (this._$_enableQueue$_) throw new Error("cannot be used in queueing mode");
            const t = this._$_rbSet$_, s = t.min(t.root);
            return s.key;
        }
        _$Shift$_() {
            if (this._$IsEmpty$_()) throw new Error("empty set");
            if (this._$_enableQueue$_) throw new Error("cannot be used in queueing mode");
            const t = this._$Front$_();
            return this._$Remove$_(t), t;
        }
        _$SetQueueingEnabled$_(t) {
            if (this._$_enableQueue$_ !== (t = !!t) && !(this._$_enableQueue$_ = t)) {
                for (const s of this._$_queueRemove$_) this._$_rbSet$_.remove(s);
                this._$_queueRemove$_.clear();
                for (const i of this._$_queueInsert$_) this._$_rbSet$_._$insert$_(i);
                this._$_queueInsert$_.clear();
            }
        }
        _$ForEach$_(t) {
            this._$_rbSet$_.forEach(t);
        }
        *values() {
            if (!this._$IsEmpty$_()) {
                const s = this._$_rbSet$_;
                for (let t = s.min(s.root); t != s._$sentinel$_; t = s._$successor_$_(t)) yield t.key;
            }
        }
        [Symbol.iterator]() {
            return this.values();
        }
    };
}

{
    const ds = self._$C3$_;
    ds._$PromiseThrottle$_ = class {
        constructor(t = ds.hardwareConcurrency) {
            this._$_maxParallel$_ = t, this._$_queue$_ = [], this._$_activeCount$_ = 0;
        }
        _$Add$_(i) {
            return new Promise((t, s) => {
                this._$_queue$_.push({
                    _$func$_: i,
                    resolve: t,
                    reject: s
                }), this._$_MaybeStartNext$_();
            });
        }
        _$_FindInQueue$_(i) {
            for (let t = 0, s = this._$_queue$_.length; t < s; ++t) if (this._$_queue$_[t]._$func$_ === i) return t;
            return -1;
        }
        _$RemoveAndResolve$_(t, s) {
            const i = this._$_FindInQueue$_(t);
            if (-1 === i) throw new Error("cannot find promise to resolve");
            this._$_queue$_[i].resolve(s), this._$_queue$_.splice(i, 1);
        }
        _$RemoveAndReject$_(t, s) {
            const i = this._$_FindInQueue$_(t);
            if (-1 === i) throw new Error("cannot find promise to reject");
            this._$_queue$_[i].reject(s), this._$_queue$_.splice(i, 1);
        }
        async _$_MaybeStartNext$_() {
            if (this._$_queue$_.length && !(this._$_activeCount$_ >= this._$_maxParallel$_)) {
                this._$_activeCount$_++;
                const s = this._$_queue$_.shift();
                try {
                    const t = await s._$func$_();
                    s.resolve(t);
                } catch (t) {
                    s.reject(t);
                }
                this._$_activeCount$_--, this._$_MaybeStartNext$_();
            }
        }
        static async _$Batch$_(t, s) {
            let i = [], e = !1, n = [];
            for (;t--; ) n.push((async () => {
                let t;
                for (;t = s.pop(); ) {
                    if (e) return;
                    try {
                        i.push(await t());
                    } catch (t) {
                        throw e = !0, t;
                    }
                }
            })());
            return await Promise.all(n), i;
        }
    };
}

{
    const ps = self._$C3$_;
    ps._$RateLimiter$_ = class {
        constructor(t, s, i) {
            this._$_callback$_ = t, this._$_interval$_ = s, this._$_intervalOnBattery$_ = i || 2 * s, 
            this._$_timerId$_ = -1, this._$_lastCallTime$_ = -1 / 0, this._$_timerCallFunc$_ = () => this._$_OnTimer$_(), 
            this._$_ignoreReset$_ = !1, this._$_canRunImmediate$_ = !1, this._$_callbackArguments$_ = null;
        }
        _$SetCanRunImmediate$_(t) {
            this._$_canRunImmediate$_ = !!t;
        }
        _$_GetInterval$_() {
            return void 0 !== ps.Battery && ps.Battery.IsOnBatteryPower() ? this._$_intervalOnBattery$_ : this._$_interval$_;
        }
        _$Call$_(...e) {
            if (-1 === this._$_timerId$_) {
                this._$_callbackArguments$_ = e;
                let t = ps._$FastGetDateNow$_(), s = t - this._$_lastCallTime$_, i = this._$_GetInterval$_();
                i <= s && this._$_canRunImmediate$_ ? (this._$_lastCallTime$_ = t, 
                this._$_RunCallback$_()) : this._$_timerId$_ = self.setTimeout(this._$_timerCallFunc$_, Math.max(i - s, 4));
            }
        }
        _$_RunCallback$_() {
            this._$_ignoreReset$_ = !0;
            const t = this._$_callbackArguments$_;
            this._$_callbackArguments$_ = null, t ? this._$_callback$_(...t) : this._$_callback$_(), 
            this._$_ignoreReset$_ = !1;
        }
        _$Reset$_() {
            this._$_ignoreReset$_ || (this._$_CancelTimer$_(), this._$_callbackArguments$_ = null, 
            this._$_lastCallTime$_ = ps._$FastGetDateNow$_());
        }
        _$_OnTimer$_() {
            this._$_timerId$_ = -1, this._$_lastCallTime$_ = ps._$FastGetDateNow$_(), 
            this._$_RunCallback$_();
        }
        _$_CancelTimer$_() {
            -1 !== this._$_timerId$_ && (self.clearTimeout(this._$_timerId$_), this._$_timerId$_ = -1);
        }
        _$Release$_() {
            this._$_CancelTimer$_(), this._$_callback$_ = null, this._$_callbackArguments$_ = null, 
            this._$_timerCallFunc$_ = null;
        }
    };
}

{
    const ms = self._$C3$_;
    ms._$SVGRasterManager$_ = class {
        constructor() {
            this._$_images$_ = new Map(), this._$_allowNpotSurfaces$_ = !1, this._$_getBaseSizeCallback$_ = null, 
            this._$_rasterAtSizeCallback$_ = null, this._$_releaseResultCallback$_ = null, 
            this._$_redrawCallback$_ = null;
        }
        _$SetNpotSurfaceAllowed$_(t) {
            this._$_allowNpotSurfaces$_ = !!t;
        }
        _$IsNpotSurfaceAllowed$_() {
            return this._$_allowNpotSurfaces$_;
        }
        _$SetGetBaseSizeCallback$_(t) {
            this._$_getBaseSizeCallback$_ = t;
        }
        _$GetBaseSize$_(t) {
            if (this._$_getBaseSizeCallback$_) return this._$_getBaseSizeCallback$_(t);
            throw new Error("no get base size callback set");
        }
        _$SetRasterAtSizeCallback$_(t) {
            this._$_rasterAtSizeCallback$_ = t;
        }
        _$RasterAtSize$_(t, s, i, e, n, h) {
            if (this._$_rasterAtSizeCallback$_) return this._$_rasterAtSizeCallback$_(t, s, i, e, n, h);
            throw new Error("no raster at size callback set");
        }
        _$SetReleaseResultCallback$_(t) {
            this._$_releaseResultCallback$_ = t;
        }
        _$ReleaseResult$_(t) {
            if (!this._$_releaseResultCallback$_) throw new Error("no release result callback set");
            this._$_releaseResultCallback$_(t);
        }
        _$SetRedrawCallback$_(t) {
            this._$_redrawCallback$_ = t;
        }
        _$Redraw$_() {
            if (!this._$_redrawCallback$_) throw new Error("no redraw callback set");
            this._$_redrawCallback$_();
        }
        _$AddImage$_(t) {
            let s = this._$_images$_.get(t);
            return s || (s = ms._$New$_(ms._$SVGRasterImage$_, this, t), this._$_images$_.set(t, s)), 
            s._$IncReference$_(), s;
        }
        _$_RemoveImage$_(t) {
            this._$_images$_.delete(t._$GetDataSource$_());
        }
        _$OnTexturesChanged$_() {
            for (const t of this._$_images$_.values()) t._$ReleaseRasterizedResult$_(), 
            t._$ForceRasterAgain$_();
        }
    };
}

{
    const gs = self._$C3$_;
    gs._$SVGRasterImage$_ = class {
        constructor(t, s) {
            this._$_manager$_ = t, this._$_dataSource$_ = s, this._$_refCount$_ = 0, 
            this._$_baseWidth$_ = 0, this._$_baseHeight$_ = 0, this._$_getBaseSizePromise$_ = this._$_manager$_._$GetBaseSize$_(s).then(t => {
                this._$_manager$_ && (this._$_baseWidth$_ = t[0], this._$_baseHeight$_ = t[1], 
                this._$_manager$_._$Redraw$_());
            }).catch(t => {
                console.error("[SVG] Error loading SVG: ", t), this._$_hadError$_ = !0, 
                this._$_manager$_ && this._$_manager$_._$Redraw$_();
            }), this._$_rasterSurfaceWidth$_ = 0, this._$_rasterSurfaceHeight$_ = 0, 
            this._$_rasterImageWidth$_ = 0, this._$_rasterImageHeight$_ = 0, this._$_isRasterizing$_ = !1, 
            this._$_rasterizedResult$_ = null, this._$_forceRaster$_ = !1, this._$_hadError$_ = !1;
        }
        _$Release$_() {
            if (this._$_refCount$_ <= 0) throw new Error("already released");
            this._$_refCount$_--, 0 === this._$_refCount$_ && this._$_Release$_();
        }
        _$ReleaseRasterizedResult$_() {
            this._$_rasterizedResult$_ && (this._$_manager$_._$ReleaseResult$_(this._$_rasterizedResult$_), 
            this._$_rasterizedResult$_ = null);
        }
        _$_Release$_() {
            this._$ReleaseRasterizedResult$_(), this._$_manager$_._$_RemoveImage$_(this), 
            this._$_manager$_ = null;
        }
        _$GetDataSource$_() {
            return this._$_dataSource$_;
        }
        _$IncReference$_() {
            this._$_refCount$_++;
        }
        _$HasReferences$_() {
            return 0 < this._$_refCount$_;
        }
        _$GetRasterizedResult$_() {
            return this._$_rasterizedResult$_;
        }
        _$ForceRasterAgain$_() {
            this._$_forceRaster$_ = !0;
        }
        async _$StartRasterForSize$_(e, n, h) {
            if (0 !== n && 0 !== h && !this._$_hadError$_ && !this._$_isRasterizing$_) {
                let t = gs._$nextHighestPowerOfTwo$_(Math.ceil(n)), s = gs._$nextHighestPowerOfTwo$_(Math.ceil(h)), i = Math.max(t, s);
                if (4096 < i) {
                    const r = 4096 / i;
                    n *= r, h *= r, t = Math.min(Math.ceil(t * r), 4096), s = Math.min(Math.ceil(s * r), 4096);
                }
                if (n < t && h < s) {
                    const o = n / h, a = t / s;
                    h = o < a ? (n = s * o, s) : (n = t) / o;
                }
                if (this._$_manager$_._$IsNpotSurfaceAllowed$_() && (t = Math.ceil(n), 
                s = Math.ceil(h)), !(t <= this._$_rasterSurfaceWidth$_ && s <= this._$_rasterSurfaceHeight$_) || this._$_forceRaster$_) {
                    this._$_isRasterizing$_ = !0, this._$_rasterSurfaceWidth$_ = t, 
                    this._$_rasterSurfaceHeight$_ = s;
                    const l = await this._$_manager$_._$RasterAtSize$_(this._$_dataSource$_, e, this._$_rasterSurfaceWidth$_, this._$_rasterSurfaceHeight$_, n, h);
                    this._$_manager$_ && (this._$ReleaseRasterizedResult$_(), this._$_rasterizedResult$_ = l, 
                    this._$_rasterImageWidth$_ = n, this._$_rasterImageHeight$_ = h, 
                    this._$_isRasterizing$_ = !1, this._$_forceRaster$_ = !1, this._$_manager$_._$Redraw$_());
                }
            }
        }
        _$WhenBaseSizeReady$_() {
            return this._$_getBaseSizePromise$_;
        }
        _$GetBaseWidth$_() {
            return this._$_baseWidth$_;
        }
        _$GetBaseHeight$_() {
            return this._$_baseHeight$_;
        }
        _$GetRasterWidth$_() {
            return this._$_rasterImageWidth$_;
        }
        _$GetRasterHeight$_() {
            return this._$_rasterImageHeight$_;
        }
        _$HadError$_() {
            return this._$_hadError$_;
        }
    };
}

{
    let s = function(t) {
        return xs.get(t);
    };
    s;
    const c = self._$C3$_, ys = (c._$UTF8_BOM$_ = "\ufeff", new Set("0123456789")), Ms = (c._$IsNumericChar$_ = function(t) {
        return ys.has(t);
    }, new Set(" \t\n\r\u2028\u2029"));
    c._$IsWhitespaceChar$_ = function(t) {
        return Ms.has(t);
    }, c._$FilterWhitespace$_ = function(t) {
        return [ ...t ].filter(t => !c._$IsWhitespaceChar$_(t)).join("");
    }, c._$IsStringAllWhitespace$_ = function(t) {
        for (const s of t) if (!c._$IsWhitespaceChar$_(s)) return !1;
        return !0;
    }, c._$IsCharArrayAllWhitespace$_ = function(t) {
        for (const s of t) if (!c._$IsWhitespaceChar$_(s)) return !1;
        return !0;
    }, c._$IsUnprintableChar$_ = function(t) {
        return 1 === t.length && t.charCodeAt(0) < 32;
    }, c._$FilterUnprintableChars$_ = function(t) {
        return [ ...t ].filter(t => !c._$IsUnprintableChar$_(t)).join("");
    };
    let i = null;
    try {
        i = new RegExp("\\p{P}(?<=[\\u3000-\\u303F\\uFF00-\\uFFEF])", "u");
    } catch (t) {
        console.warn("Unable to detect CJK punctuation: ", t);
    }
    c._$IsCJKPunctuationChar$_ = function(t) {
        return !c._$IsWhitespaceChar$_(t) && i && i.test(t);
    };
    const ws = new Set("0123456789.+-e"), xs = (c._$IsStringNumber$_ = function(s) {
        if (!(s = s.trim()).length) return !1;
        let t = s.charAt(0);
        if ("-" !== t && !ys.has(t)) return !1;
        for (let t of s) if (!ws.has(t)) return !1;
        return !0;
    }, c._$RemoveTrailingDigits$_ = function(s) {
        let i = s.length;
        for (;0 < i; ) {
            let t = s.charAt(i - 1);
            if (!c._$IsNumericChar$_(t)) break;
            --i;
        }
        return s.substr(0, i);
    }, c._$IncrementNumberAtEndOf$_ = function(t) {
        let s = c._$RemoveTrailingDigits$_(t), i = t.substr(s.length);
        return s + (i ? (parseInt(i, 10) + 1).toString() : "2");
    }, new Map([ [ "&", "&amp;" ], [ "<", "&lt;" ], [ ">", "&gt;" ], [ '"', "&quot;" ], [ "'", "&#39;" ] ])), Ss = /[&<>"']/g, Ts = (c._$EscapeHTML$_ = function(t) {
        return t.replace(Ss, s);
    }, c._$EscapeJS$_ = function(t) {
        let s = c._$ReplaceAll$_(t, "\\", "\\\\");
        return s = c._$ReplaceAll$_(s, '"', '\\"'), s = c._$ReplaceAll$_(s, "\t", "\\t"), 
        s = c._$ReplaceAll$_(s, "\r", ""), c._$ReplaceAll$_(s, "\n", "\\n");
    }, c._$EscapeXML$_ = function(t) {
        let s = c._$ReplaceAll$_(t, "&", "&amp;");
        return s = c._$ReplaceAll$_(s, "<", "&lt;"), s = c._$ReplaceAll$_(s, ">", "&gt;"), 
        c._$ReplaceAll$_(s, '"', "&quot;");
    }, /[-[\]{}()*+?.,\\^$|#\s]/g), bs = (c._$EscapeRegex$_ = function(t) {
        return t.replace(Ts, "\\$&");
    }, c._$CountCharsInString$_ = function(t, s) {
        let i = 0;
        for (const e of t) e === s && ++i;
        return i;
    }, c._$FindAll$_ = function(t, s, i = !1) {
        if (!s) return [];
        i || (t = t.toLowerCase(), s = s.toLowerCase());
        let e = s.length, n = 0, h, r = [];
        for (;-1 < (h = t.indexOf(s, n)); ) r.push(h), n = h + e;
        return r;
    }, c._$ReplaceAll$_ = function(t, s, i) {
        return t.replaceAll(s, () => i);
    }, c._$ReplaceAllCaseInsensitive$_ = function(t, s, i) {
        return t.replace(new RegExp(c._$EscapeRegex$_(s), "gi"), () => i);
    }, c._$SetElementContent$_ = function(t, s) {
        "string" == typeof s ? t.textContent = s : s._$isPlainText$_() ? t.textContent = s.toString() : (t.innerHTML = s._$toHTML$_(), 
        s instanceof c._$BBString$_ && s._$attachLinkHandlers$_(t));
    }, c._$StringLikeEquals$_ = function(t, s) {
        return t instanceof c.HtmlString || t instanceof c._$BBString$_ ? t.equals(s) : s instanceof c.HtmlString || s instanceof c._$BBString$_ ? s.equals(t) : t === s;
    }, c._$StringSubstitute$_ = function(i, ...e) {
        let n = i;
        for (let t = 0, s = e.length; t < s; ++t) {
            const h = `{${t}}`;
            if (!i.includes(h)) throw new Error(`missing placeholder '${h}' in string substitution`);
            n = n.replace(h, e[t].toString());
        }
        return n;
    }, c._$StringSubstituteAllowMissing$_ = function(i, ...e) {
        let n = i, h = -1, r = -1;
        for (let t = 0, s = e.length; t < s; ++t) {
            const o = `{${t}}`;
            i.includes(o) ? (r = t, n = n.replace(o, e[t].toString())) : -1 === h && (h = t);
        }
        if (0 <= h && 0 <= r && h < r) throw new Error(`missing placeholder '${h}' in string substitution`);
        return n;
    }, c._$StringSubstituteMap$_ = function(t, i) {
        let e = t;
        for (let [ t, s ] of Object.entries(i)) e = e.replaceAll(t, s.toString());
        return e;
    }, c._$SortAZ$_ = function(t, s) {
        return s < t ? 1 : t < s ? -1 : 0;
    }, c._$SortAZCaseInsensitive$_ = function(t, s) {
        let i = t.toLowerCase(), e = s.toLowerCase();
        return e < i ? 1 : i < e ? -1 : 0;
    }, new self.Intl.Segmenter()), vs = (c._$SplitGraphemes$_ = function(t) {
        const s = [];
        for (const i of bs.segment(t)) s.push(i.segment);
        return s;
    }, c._$IterateGraphemes$_ = function*(t) {
        for (const s of bs.segment(t)) yield s.segment;
    }, c._$CountGraphemes$_ = function(t) {
        let s = 0;
        for (const i of bs.segment(t)) ++s;
        return s;
    }, 1073741824), Cs = 1024 * vs, Gs = {
        _$approximate$_: !(c._$FormatDataSize$_ = function(s, t) {
            let i = "common." + (t ? "dataRates" : "dataSizes") + ".", e = self.langSub;
            if (s < 1024) return e(i + "bytes", s);
            if (s < 1048576) {
                let t = s / 1024;
                return t = t < 10 ? Math.round(10 * t) / 10 : Math.round(t), e(i + "kilobytes", t);
            }
            if (s < vs) {
                let t = s / 1048576;
                return t = t < 10 ? Math.round(10 * t) / 10 : Math.round(t), e(i + "megabytes", t);
            }
            if (s < Cs) {
                let t = s / vs;
                return t = t < 10 ? Math.round(10 * t) / 10 : Math.round(t), e(i + "gigabytes", t);
            }
            {
                let t = s / Cs;
                return t = t < 10 ? Math.round(10 * t) / 10 : Math.round(t), e(i + "terabytes", t);
            }
        }),
        _$days$_: !0,
        _$hours$_: !0,
        _$minutes$_: !0,
        _$seconds$_: !0
    };
    c._$FormatTime$_ = function(t, s) {
        s = Object.assign({}, Gs, s), c.Lang.PushContext("common.time");
        const i = [], e = self.lang, n = self.langPluralSub;
        if (s._$days$_) {
            const r = Math.floor(t / 86400);
            0 < r && (t -= 24 * r * 3600, i.push(n(".days", null, r)));
        }
        if (s._$hours$_) {
            const o = Math.floor(t / 3600);
            (0 < o || i.length) && (t -= 3600 * o, i.push(n(".hours", null, o)));
        }
        if (s._$minutes$_) {
            const a = Math.floor(t / 60);
            (0 < a || i.length || !s._$seconds$_) && (t -= 60 * a, i.push(n(".minutes", null, a)));
        }
        if (s._$seconds$_) {
            const l = Math.floor(t % 60);
            i.push(n(".seconds", null, l));
        }
        const h = (s._$approximate$_ ? e(".approx-prefix") : "") + i.join(e(".separator"));
        return c.Lang.PopContext(), h;
    }, c._$ZeroPad$_ = function(t, s) {
        let i = t < 0 ? "-" : "", e = (t = Math.abs(t)).toString(), n = s - e.length;
        for (let t = 0; t < n; ++t) i += "0";
        return i + e;
    }, c._$StringToTitleCase$_ = function(t) {
        return t.toLowerCase().replace(/\b\w/g, t => t.toUpperCase());
    }, c._$CompareVersionStrings$_ = function(t, s) {
        let i = t.split(".").map(t => t.trim()), e = s.split(".").map(t => t.trim());
        c._$resizeArray$_(i, 4, "0"), c._$resizeArray$_(e, 4, "0"), i = i.map(t => parseInt(t, 10)), 
        e = e.map(t => parseInt(t, 10));
        for (let t = 0; t < 4; ++t) {
            const n = i[t] - e[t];
            if (0 != n) return n < 0 ? -1 : 1;
        }
        return 0;
    }, c._$CreateGUID$_ = function() {
        return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, t => {
            const s = Math.floor(16 * Math.random()), i = "x" === t ? s : 3 & s | 8;
            return i.toString(16);
        });
    }, c._$StringHammingDistance$_ = function(i, e) {
        if (i.length !== e.length) throw new Error("strings must be same length");
        let n = 0;
        for (let t = 0, s = i.length; t < s; ++t) i.charAt(t) !== e.charAt(t) && ++n;
        return n;
    }, c._$StringLevenshteinDistance$_ = function(t, s) {
        if (0 === t.length) return s.length;
        if (0 === s.length) return t.length;
        let i, e, n, h, r, o;
        for (s.length < t.length && (i = t, t = s, s = i), o = Array(t.length + 1), 
        e = 0; e <= t.length; e++) o[e] = e;
        for (e = 1; e <= s.length; e++) {
            for (h = e, n = 1; n <= t.length; n++) r = s[e - 1] === t[n - 1] ? o[n - 1] : Math.min(o[n - 1] + 1, Math.min(h + 1, o[n] + 1)), 
            o[n - 1] = h, h = r;
            o[t.length] = h;
        }
        return o[t.length];
    };
}

{
    let s = function(t, i, e) {
        const n = o.get(e);
        if (!n) return "class" === e ? i ? "</span>" : `<span class="bbclass${u++}">` : t;
        if ("string" == typeof n) {
            if ("a" === n && 0 === a.length || "abbr" === n && 0 === l.length) return t;
            if ("a" !== n || i) {
                if ("abbr" !== n || i) return "<" + i + n + ">";
                {
                    const h = parseInt(e.substring(3), 10) - 1;
                    if (h < 0 || h >= l.length) throw new Error("invalid bbcode tip substitution");
                    let t = l[h], s = "";
                    if ("string" == typeof t ? s = t : "function" == typeof t && (s = t()), 
                    "string" != typeof s) throw new TypeError("invalid bbcode tip");
                    return `<abbr title="${f._$ReplaceAll$_(s, '"', "&quot;")}">`;
                }
            }
            {
                const s = parseInt(e.substring(1), 10) - 1;
                if (s < 0 || s >= a.length) throw new Error("invalid bbcode link substitution");
                const r = a[s];
                if ("string" == typeof r) return `<a href="${a[s]}">`;
                if ("function" == typeof r) return `<a class="bblink${s}">`;
                throw new TypeError("invalid bbcode link action");
            }
        }
        if (Array.isArray(n)) {
            let t = n[0], s = n[1];
            return i ? "</" + t + ">" : `<${t} class="${s}">`;
        }
    }, f = (s, self._$C3$_), o = new Map([ [ "b", "strong" ], [ "i", "em" ], [ "s", "s" ], [ "u", "u" ], [ "sub", "sub" ], [ "sup", "sup" ], [ "small", "small" ], [ "mark", "mark" ], [ "code", "code" ], [ "a1", "a" ], [ "a2", "a" ], [ "a3", "a" ], [ "a4", "a" ], [ "a5", "a" ], [ "a6", "a" ], [ "a7", "a" ], [ "a8", "a" ], [ "a9", "a" ], [ "tip1", "abbr" ], [ "tip2", "abbr" ], [ "tip3", "abbr" ], [ "tip4", "abbr" ], [ "tip5", "abbr" ], [ "tip6", "abbr" ], [ "tip7", "abbr" ], [ "tip8", "abbr" ], [ "tip9", "abbr" ], [ "bad", [ "span", "bbCodeBad" ] ], [ "good", [ "span", "bbCodeGood" ] ], [ "info", [ "span", "bbCodeInfo" ] ], [ "h1", [ "span", "bbCodeH1" ] ], [ "h2", [ "span", "bbCodeH2" ] ], [ "h3", [ "span", "bbCodeH3" ] ], [ "h4", [ "span", "bbCodeH4" ] ], [ "item", [ "span", "bbCodeItem" ] ] ]), d = new Set([ "icon" ]), i = /\[(\/?)([a-zA-Z0-9]+)\]/g, p = /\[(\/?)([^\[\n]*?)\]/g, a = null, l = null, u = 0, e = /\n/g;
    f._$BBString$_ = class {
        constructor(t, s) {
            if (this._$_bbstr$_ = s && s._$noEscape$_ ? t : f._$EscapeHTML$_(t), 
            this._$_htmlstr$_ = "", this._$_convertLineBreaks$_ = !1, this._$_linkActions$_ = [], 
            this._$_tipList$_ = [], s) {
                if (this._$_convertLineBreaks$_ = !!s.convertLineBreaks, s.links) {
                    if (9 < s.links.length) throw new Error("too many links");
                    this._$_linkActions$_ = s.links;
                }
                if (s.tips) {
                    if (9 < s.tips.length) throw new Error("too many tips");
                    this._$_tipList$_ = s.tips;
                }
            }
            this._$_hasAnyBBtags$_ = this._$_bbstr$_.includes("["), this._$_needsLineBreakConversion$_ = this._$_convertLineBreaks$_ && this._$_bbstr$_.includes("\n"), 
            this._$_isPlain$_ = !this._$_hasAnyBBtags$_ && !this._$_needsLineBreakConversion$_ && !this._$_bbstr$_.includes("&"), 
            this._$_hasParsedFragments$_ = !1, this._$_fragments$_ = [];
        }
        toString() {
            return this._$_bbstr$_;
        }
        valueOf() {
            return this._$_bbstr$_;
        }
        _$isPlainText$_() {
            return this._$_isPlain$_;
        }
        _$toPlainText$_() {
            return this._$_hasAnyBBtags$_ ? this._$_bbstr$_.replace(i, "") : this._$_bbstr$_;
        }
        _$toHTML$_() {
            if (this._$_isPlain$_) return this._$_bbstr$_;
            if (!this._$_htmlstr$_ && this._$_bbstr$_) {
                let t = this._$_bbstr$_;
                this._$_hasAnyBBtags$_ && (u = 0, a = this._$_linkActions$_, l = this._$_tipList$_, 
                t = t.replace(i, s), a = null, l = null), this._$_needsLineBreakConversion$_ && (t = t.replace(e, "<br>")), 
                this._$_htmlstr$_ = t;
            }
            return this._$_htmlstr$_;
        }
        _$attachLinkHandlers$_(i) {
            if (this._$_linkActions$_.length) for (let t = 0, s = this._$_linkActions$_.length; t < s; ++t) {
                const e = this._$_linkActions$_[t];
                if ("function" == typeof e) {
                    const n = i.querySelector(".bblink" + t);
                    if (!n) throw new Error("unable to attach BBString link handler");
                    n.onclick = e;
                }
            }
        }
        equals(t) {
            return t instanceof f.HtmlString ? this._$toHTML$_() === t._$toHTML$_() : t instanceof f._$BBString$_ ? this._$_bbstr$_ === t._$_bbstr$_ : this._$_bbstr$_ === t;
        }
        _$toFragmentList$_() {
            if (!this._$_hasParsedFragments$_) {
                let e = [], t = this._$_bbstr$_, n = [], s = p.lastIndex = 0, i;
                for (;null !== (i = p.exec(t)); ) {
                    const h = i.index;
                    if (!(0 < h && "\\" === t.charAt(h - 1))) {
                        const r = i[0], o = i[1], a = i[2], l = t.substring(s, h);
                        if (s = h + r.length, l && e.push({
                            text: l,
                            _$styles$_: n.slice(0)
                        }), a) if (o) {
                            const u = a.toLowerCase();
                            for (let t = n.length - 1; 0 <= t; --t) if (n[t].tag === u) {
                                n.splice(t, 1);
                                break;
                            }
                        } else {
                            let t = a, s = null, i = a.indexOf("=");
                            if (-1 !== i ? (t = a.substring(0, i).toLowerCase(), 
                            s = a.substring(i + 1)) : t = t.toLowerCase(), d.has(t)) {
                                if ("icon" !== t) throw new Error("unknown self-closing tag " + t);
                                e.push({
                                    icon: s,
                                    _$styles$_: n.slice(0)
                                });
                            } else n.push({
                                tag: t,
                                param: s
                            });
                        }
                    }
                }
                s < t.length && e.push({
                    text: t.substring(s),
                    _$styles$_: n.slice(0)
                });
                for (const c of e) c.text && (c.text = this._$_ProcessBBCodeEscapeSequences$_(c.text));
                this._$_fragments$_ = e.map(t => t.icon ? f._$New$_(f._$IconFragment$_, {
                    icon: t.icon,
                    _$styles$_: t._$styles$_
                }) : f._$New$_(f._$TextFragment$_, {
                    _$chArr$_: f._$SplitGraphemes$_(t.text),
                    _$styles$_: t._$styles$_
                })), this._$_hasParsedFragments$_ = !0;
            }
            return this._$_fragments$_;
        }
        _$_ProcessBBCodeEscapeSequences$_(t) {
            return t = f._$ReplaceAll$_(t, "\\[", "["), f._$ReplaceAll$_(t, "\\\\", "\\");
        }
        static _$StripTags$_(t) {
            return f._$New$_(f._$BBString$_, t, {
                _$noEscape$_: !0
            })._$toPlainText$_();
        }
        static _$StripAnyTags$_(t) {
            return t.replace(p, "");
        }
    };
}

{
    let l = function(t) {
        return "" !== t && "" !== t && M._$IsWhitespaceChar$_(t);
    }, a = function(t) {
        return Is.has(t);
    }, u = function(t) {
        return M._$IsCJKPunctuationChar$_(t) && !a(t);
    }, c = function(t) {
        for (;0 < t.length && l(t.at(-1)); ) t.pop();
    }, y = function(t) {
        return "\n" === t || "\r\n" === t;
    };
    l, a, u, c, y;
    const M = self._$C3$_, Is = new Set("");
    M._$WordWrap$_ = class {
        constructor() {
            this._$_lines$_ = [], this._$_iconSet$_ = null;
        }
        _$GetLines$_() {
            return this._$_lines$_;
        }
        _$GetLineCount$_() {
            return this._$_lines$_.length;
        }
        _$SetIconSet$_(t) {
            this._$_iconSet$_ = t;
        }
        _$_MeasureLine$_(t, s) {
            let i = 0, e = 0, n = 0, h = 0, r = 0;
            for (const o of t) {
                if (-1 === o._$GetWidth$_()) {
                    const a = s(o);
                    o._$SetHeight$_(a.height), o._$SetFontBoundingBoxAscent$_(a.fontBoundingBoxAscent || 0), 
                    o._$SetFontBoundingBoxDescent$_(a.fontBoundingBoxDescent || 0), 
                    o._$SetTopToAlphabeticDistance$_(a._$topToAlphabeticDistance$_ || 0), 
                    o._$IsText$_() ? o._$SetWidth$_(a.width) : o._$IsIcon$_() && o._$CalculateWidthFromHeight$_(this._$_iconSet$_);
                }
                i += o._$GetWidth$_(), e = Math.max(e, o._$GetHeight$_()), n = Math.max(n, o._$GetFontBoundingBoxAscent$_()), 
                h = Math.max(h, o._$GetFontBoundingBoxDescent$_()), r = Math.max(r, o._$GetTopToAlphabeticDistance$_());
            }
            return {
                width: i,
                height: e,
                fontBoundingBoxAscent: n,
                fontBoundingBoxDescent: h,
                _$topToAlphabeticDistance$_: r
            };
        }
        _$_AddLine$_(t, s, i, e, n, h) {
            this._$_lines$_.push(M._$New$_(M._$WordWrap$_._$Line$_, {
                _$fragments$_: t,
                width: s,
                height: i,
                fontBoundingBoxAscent: e,
                fontBoundingBoxDescent: n,
                _$topToAlphabeticDistance$_: h
            }));
        }
        _$WordWrap$_(s, h, r, i, o) {
            if ("string" == typeof s && (s = [ M._$New$_(M._$TextFragment$_, {
                _$chArr$_: M._$SplitGraphemes$_(s)
            }) ]), M._$clearArray$_(this._$_lines$_), !(!s.length || 1 === s.length && s[0]._$IsText$_() && s[0]._$IsEmpty$_() || r < 2)) {
                if (1 === s.length) {
                    const a = s[0];
                    if (a._$IsText$_() && a._$GetLength$_() <= 100 && !a._$HasNewLine$_()) {
                        let {
                            width: t,
                            height: s,
                            fontBoundingBoxAscent: i,
                            fontBoundingBoxDescent: e,
                            _$topToAlphabeticDistance$_: n
                        } = h(a);
                        if (t += o, a._$SetWidth$_(t), a._$SetHeight$_(s), a._$SetFontBoundingBoxAscent$_(i || 0), 
                        a._$SetFontBoundingBoxDescent$_(e || 0), a._$SetTopToAlphabeticDistance$_(n || 0), 
                        t <= r) return void this._$_AddLine$_([ a ], t, s, i, e, n);
                    }
                }
                let t;
                t = "word" === i ? this._$_TokeniseByWord$_(s) : "cjk" === i ? this._$_TokeniseByCJK$_(s) : this._$_TokeniseByChar$_(s), 
                this._$_WrapText$_(t, h, r, o);
            }
        }
        _$_TokeniseByWord$_(t) {
            let s = [], i = [], e = !1;
            for (const n of t) {
                const h = n._$GetStyles$_();
                if (n._$IsIcon$_()) 0 < i.length && s.push(i), s.push([ n ]), i = []; else for (const r of n._$GetCharacterArray$_()) if (y(r)) 0 < i.length && s.push(i), 
                s.push([ M._$New$_(M._$TextFragment$_, {
                    _$chArr$_: [ "\n" ],
                    _$styles$_: h
                }) ]), i = []; else if (0 === i.length) i.push(M._$New$_(M._$TextFragment$_, {
                    _$chArr$_: [ r ],
                    _$styles$_: h
                })), e = l(r); else {
                    const o = l(r);
                    if (o === e) {
                        const a = i.at(-1);
                        a._$GetStyles$_() === h ? a._$_AppendChar$_(r) : i.push(M._$New$_(M._$TextFragment$_, {
                            _$chArr$_: [ r ],
                            _$styles$_: h
                        }));
                    } else s.push(i), i = [ M._$New$_(M._$TextFragment$_, {
                        _$chArr$_: [ r ],
                        _$styles$_: h
                    }) ], e = o;
                }
            }
            return 0 < i.length && s.push(i), s;
        }
        _$_TokeniseByCJK$_(t) {
            let s = [], i = [], e = !1;
            for (const n of t) {
                const h = n._$GetStyles$_();
                if (n._$IsIcon$_()) 0 < i.length && s.push(i), s.push([ n ]), i = []; else for (const r of n._$GetCharacterArray$_()) if (y(r)) 0 < i.length && s.push(i), 
                s.push([ M._$New$_(M._$TextFragment$_, {
                    _$chArr$_: [ "\n" ],
                    _$styles$_: h
                }) ]), i = []; else {
                    if (0 === i.length) i.push(M._$New$_(M._$TextFragment$_, {
                        _$chArr$_: [ r ],
                        _$styles$_: h
                    })); else if (e || u(r)) {
                        const o = i.at(-1);
                        o._$GetStyles$_() === h ? o._$_AppendChar$_(r) : i.push(M._$New$_(M._$TextFragment$_, {
                            _$chArr$_: [ r ],
                            _$styles$_: h
                        }));
                    } else s.push(i), i = [ M._$New$_(M._$TextFragment$_, {
                        _$chArr$_: [ r ],
                        _$styles$_: h
                    }) ];
                    e = a(r);
                }
            }
            return 0 < i.length && s.push(i), s;
        }
        _$_TokeniseByChar$_(t) {
            const s = [];
            for (const i of t) if (i._$IsText$_()) {
                const e = i._$GetCharacterArray$_();
                M._$appendArray$_(s, e.map(t => [ M._$New$_(M._$TextFragment$_, {
                    _$chArr$_: [ t ],
                    _$styles$_: i._$GetStyles$_()
                }) ]));
            } else s.push([ i ]);
            return s;
        }
        _$_CopyLine$_(t) {
            return t.map(t => t._$_Clone$_());
        }
        _$_AddWordToLine$_(s, i) {
            let t = s.length ? s.at(-1) : null, e = 0;
            t && t._$IsText$_() && i[0]._$IsText$_() && i[0]._$GetStyles$_() === t._$GetStyles$_() && (t._$_Append$_(i[0]._$GetCharacterArray$_()), 
            e = 1);
            for (let t = i.length; e < t; ++e) {
                const n = i[e];
                s.push(n._$_Clone$_());
            }
        }
        _$_WrapText$_(t, s, i, e) {
            let n = [], h = 0, r = 0, o = 0, a = 0, l = 0;
            for (const u of t) if (1 === u.length && u[0]._$IsText$_() && 1 === u[0]._$GetLength$_() && y(u[0]._$GetCharacterArray$_()[0])) {
                if (0 === r) {
                    const c = M._$New$_(M._$TextFragment$_, {
                        _$chArr$_: [ " " ],
                        _$styles$_: u[0]._$GetStyles$_()
                    }), f = s(c);
                    r = f.height, o = f.fontBoundingBoxAscent || 0, a = f.fontBoundingBoxDescent || 0, 
                    l = f._$topToAlphabeticDistance$_ || 0;
                }
                this._$_AddLine$_(n, h, r, o, a, l), n = [], h = 0, r = 0, o = 0, 
                a = 0, l = 0;
            } else {
                const d = this._$_CopyLine$_(n), p = (this._$_AddWordToLine$_(d, u), 
                this._$_MeasureLine$_(d, s)), m = p.width;
                if (i <= m) if (0 < n.length && this._$_AddLine$_(n, h, r, o, a, l), 
                n = [], u[0]._$IsText$_() && M._$IsCharArrayAllWhitespace$_(u[0]._$GetCharacterArray$_())) h = 0, 
                r = 0, o = 0, a = 0, l = 0; else {
                    this._$_AddWordToLine$_(n, u);
                    const g = this._$_MeasureLine$_(n, s);
                    h = g.width, r = g.height, o = g.fontBoundingBoxAscent, a = g.fontBoundingBoxDescent, 
                    l = g._$topToAlphabeticDistance$_;
                } else n = d, h = m, r = p.height, o = p.fontBoundingBoxAscent, 
                a = p.fontBoundingBoxDescent, l = p._$topToAlphabeticDistance$_;
            }
            0 < n.length && this._$_AddLine$_(n, h, r, o, a, l), this._$_TrimLinesTrailingWhitespace$_(s, e);
        }
        _$_TrimLinesTrailingWhitespace$_(s, i) {
            for (const e of this._$_lines$_) {
                const n = e._$_GetFragmentsArray$_();
                if (n.length) {
                    let t = n.at(-1);
                    if (t._$IsText$_()) {
                        const h = t._$GetCharacterArray$_(), r = h.slice(0);
                        if (c(r), 0 === r.length) e._$OffsetWidth$_(-t._$GetWidth$_()), 
                        n.pop(); else if (r.length < h.length) {
                            t._$SetCharacterArray$_(r);
                            const o = s(t).width, a = t._$GetWidth$_() - o;
                            t._$SetWidth$_(o), e._$OffsetWidth$_(-a);
                        }
                        0 !== i && 0 < n.length && ((t = n.at(-1))._$OffsetWidth$_(i), 
                        e._$OffsetWidth$_(i));
                    }
                }
            }
        }
        _$Clear$_() {
            M._$clearArray$_(this._$_lines$_);
        }
        _$GetMaxLineWidth$_() {
            return this._$_lines$_.reduce((t, s) => Math.max(t, s._$GetWidth$_()), 0);
        }
        _$GetTotalLineHeight$_() {
            return this._$_lines$_.reduce((t, s) => t + s._$GetHeight$_(), 0);
        }
    };
}

{
    const _s = self._$C3$_;
    _s._$WordWrap$_._$Line$_ = class {
        constructor(t) {
            this._$_fragments$_ = t._$fragments$_ || [], this._$_width$_ = t.width || -1, 
            this._$_height$_ = t.height || -1, this._$_fontBoundingBoxAscent$_ = t.fontBoundingBoxAscent || -1, 
            this._$_fontBoundingBoxDescent$_ = t.fontBoundingBoxDescent || -1, this._$_topToAlphabeticDistance$_ = t._$topToAlphabeticDistance$_ || -1, 
            this._$_posX$_ = 0, this._$_posY$_ = 0;
        }
        _$fragments$_() {
            return this._$_fragments$_.values();
        }
        *_$fragmentsReverse$_() {
            const s = this._$_fragments$_;
            for (let t = s.length - 1; 0 <= t; --t) yield s[t];
        }
        _$_GetFragmentsArray$_() {
            return this._$_fragments$_;
        }
        _$OffsetWidth$_(t) {
            this._$_width$_ += t;
        }
        _$GetWidth$_() {
            return this._$_width$_;
        }
        _$GetHeight$_() {
            return this._$_height$_;
        }
        _$GetFoundBoundingBoxAscent$_() {
            return this._$_fontBoundingBoxAscent$_;
        }
        _$GetFontBoundingBoxDescent$_() {
            return this._$_fontBoundingBoxDescent$_;
        }
        _$GetTopToAlphabeticDistance$_() {
            return this._$_topToAlphabeticDistance$_;
        }
        _$SetPosX$_(t) {
            this._$_posX$_ = t;
        }
        _$GetPosX$_() {
            return this._$_posX$_;
        }
        _$SetPosY$_(t) {
            this._$_posY$_ = t;
        }
        _$GetPosY$_() {
            return this._$_posY$_;
        }
    };
}

{
    const Es = self._$C3$_;
    Es._$FragmentBase$_ = class {
        constructor(t) {
            this._$_styles$_ = t._$styles$_ || [], this._$_width$_ = t.width || -1, 
            this._$_height$_ = t.height || -1, this._$_fontBoundingBoxAscent$_ = t.fontBoundingBoxAscent || -1, 
            this._$_fontBoundingBoxDescent$_ = t.fontBoundingBoxDescent || -1, this._$_topToAlphabeticDistance$_ = t._$topToAlphabeticDistance$_ || -1, 
            this._$_posX$_ = 0, this._$_posY$_ = 0;
        }
        _$IsText$_() {
            return !1;
        }
        _$IsIcon$_() {
            return !1;
        }
        _$GetStyles$_() {
            return this._$_styles$_;
        }
        _$GetStyleTag$_(s) {
            const i = this._$_styles$_;
            for (let t = i.length - 1; 0 <= t; --t) {
                const e = i[t];
                if (e.tag === s) return e;
            }
            return null;
        }
        _$HasStyleTag$_(t) {
            return !!this._$GetStyleTag$_(t);
        }
        _$GetStyleMap$_() {
            const t = new Map();
            for (const s of this._$_styles$_) t.set(s.tag, s.param);
            return t;
        }
        _$OffsetWidth$_(t) {
            this._$_width$_ += t;
        }
        _$SetWidth$_(t) {
            this._$_width$_ = t;
        }
        _$GetWidth$_() {
            return this._$_width$_;
        }
        _$SetHeight$_(t) {
            this._$_height$_ = t;
        }
        _$GetHeight$_() {
            return this._$_height$_;
        }
        _$SetFontBoundingBoxAscent$_(t) {
            this._$_fontBoundingBoxAscent$_ = t;
        }
        _$GetFontBoundingBoxAscent$_() {
            return this._$_fontBoundingBoxAscent$_;
        }
        _$SetFontBoundingBoxDescent$_(t) {
            this._$_fontBoundingBoxDescent$_ = t;
        }
        _$GetFontBoundingBoxDescent$_() {
            return this._$_fontBoundingBoxDescent$_;
        }
        _$SetTopToAlphabeticDistance$_(t) {
            this._$_topToAlphabeticDistance$_ = t;
        }
        _$GetTopToAlphabeticDistance$_() {
            return this._$_topToAlphabeticDistance$_;
        }
        _$SetPosX$_(t) {
            this._$_posX$_ = t;
        }
        _$GetPosX$_() {
            return this._$_posX$_;
        }
        _$SetPosY$_(t) {
            this._$_posY$_ = t;
        }
        _$GetPosY$_() {
            return this._$_posY$_;
        }
    };
}

{
    const Ns = self._$C3$_;
    Ns._$TextFragment$_ = class extends Ns._$FragmentBase$_ {
        constructor(t) {
            super(t), this._$_chArr$_ = t._$chArr$_;
        }
        _$IsText$_() {
            return !0;
        }
        _$_Append$_(t) {
            Ns._$appendArray$_(this._$_chArr$_, t), this._$_width$_ = -1, this._$_height$_ = -1, 
            this._$_fontBoundingBoxAscent$_ = -1, this._$_fontBoundingBoxDescent$_ = -1, 
            this._$_topToAlphabeticDistance$_ = -1;
        }
        _$_AppendChar$_(t) {
            this._$_chArr$_.push(t);
        }
        _$_Clone$_() {
            return Ns._$New$_(Ns._$TextFragment$_, {
                _$chArr$_: this._$_chArr$_.slice(0),
                _$styles$_: this._$_styles$_,
                width: this._$_width$_,
                height: this._$_height$_,
                fontBoundingBoxAscent: this._$_fontBoundingBoxAscent$_,
                fontBoundingBoxDescent: this._$_fontBoundingBoxDescent$_,
                _$topToAlphabeticDistance$_: this._$_topToAlphabeticDistance$_
            });
        }
        _$GetCharacterArray$_() {
            return this._$_chArr$_;
        }
        _$SetCharacterArray$_(t) {
            this._$_chArr$_ = t;
        }
        _$GetLength$_() {
            return this._$_chArr$_.length;
        }
        _$IsEmpty$_() {
            return 0 === this._$_chArr$_.length;
        }
        _$HasNewLine$_() {
            return this._$_chArr$_.includes("\n");
        }
    };
}

{
    const Ds = self._$C3$_;
    Ds._$IconFragment$_ = class extends Ds._$FragmentBase$_ {
        constructor(t) {
            super(t), this._$_icon$_ = t.icon;
        }
        _$IsIcon$_() {
            return !0;
        }
        _$GetIconParameter$_() {
            return this._$_icon$_;
        }
        _$_Clone$_() {
            return Ds._$New$_(Ds._$IconFragment$_, {
                icon: this._$_icon$_,
                _$styles$_: this._$_styles$_,
                width: this._$_width$_,
                height: this._$_height$_,
                fontBoundingBoxAscent: this._$_fontBoundingBoxAscent$_,
                fontBoundingBoxDescent: this._$_fontBoundingBoxDescent$_,
                _$topToAlphabeticDistance$_: this._$_topToAlphabeticDistance$_
            });
        }
        _$GetTextIcon$_(t) {
            if (!t) return null;
            let s = Number(this._$_icon$_);
            return String(s) === this._$_icon$_ ? (s = Math.floor(s), t._$GetTextIconByIndex$_(s)) : t._$GetTextIconByTag$_(this._$_icon$_);
        }
        _$CalculateWidthFromHeight$_(t) {
            const s = this._$GetTextIcon$_(t);
            this._$_width$_ = s ? this._$_height$_ * s._$GetWidth$_() / s._$GetHeight$_() : 0;
        }
        _$GetDrawable$_(t) {
            const s = this._$GetTextIcon$_(t);
            return s ? s._$GetDrawable$_() : null;
        }
        _$GetLength$_() {
            return 1;
        }
    };
}

{
    const As = self._$C3$_;
    As._$TextIconManager$_ = class {
        constructor(t) {
            this._$_iconSets$_ = new Map(), this._$_getIconSetMetaCallback$_ = t._$getIconSetMeta$_, 
            this._$_getIconSetContentCallback$_ = t._$getIconSetContent$_;
        }
        _$Release$_() {
            for (const t of this._$_iconSets$_.values()) t._$Release$_();
            this._$_iconSets$_.clear();
        }
        _$GetIconSet$_(t) {
            let s = this._$_iconSets$_.get(t);
            if (!s) {
                const i = this._$_getIconSetMetaCallback$_(t);
                s = As._$New$_(As._$TextIconSet$_, this, {
                    source: t,
                    _$iconMeta$_: i
                }), this._$_iconSets$_.set(t, s);
            }
            return s;
        }
        _$HasIconSet$_(t) {
            return this._$_iconSets$_.has(t);
        }
        _$DeleteIconSet$_(t) {
            const s = this._$_iconSets$_.get(t);
            s && s._$Release$_(), this._$_iconSets$_.delete(t);
        }
        async _$_GetIconSetContent$_(t) {
            return this._$_getIconSetContentCallback$_(t);
        }
    };
}

{
    const Ls = self._$C3$_;
    Ls._$TextIconSet$_ = class {
        constructor(t, s) {
            this._$_textIconManager$_ = t, this._$_source$_ = s.source, this._$_iconsArray$_ = [], 
            this._$_iconsByTag$_ = new Map(), this._$_hasStartedLoad$_ = !1, this._$_isLoading$_ = !1, 
            this._$_loadPromise$_ = null;
            const i = s._$iconMeta$_._$icons$_;
            for (let t = 0, s = i.length; t < s; ++t) {
                const e = i[t], n = Ls._$New$_(Ls._$TextIcon$_, this, {
                    index: t,
                    tag: e.tag,
                    source: e.source,
                    width: e.width,
                    height: e.height
                });
                this._$_iconsArray$_.push(n), e.tag && this._$_iconsByTag$_.set(e.tag.toLowerCase(), n);
            }
        }
        _$Release$_() {
            for (const t of this._$_iconsArray$_) t._$Release$_();
            Ls._$clearArray$_(this._$_iconsArray$_), this._$_iconsByTag$_.clear(), 
            this._$_textIconManager$_ = null, this._$_source$_ = null;
        }
        _$HasLoaded$_() {
            return this._$_hasStartedLoad$_;
        }
        _$IsLoading$_() {
            return this._$_isLoading$_;
        }
        _$LoadContent$_() {
            return this._$_loadPromise$_ || (this._$_loadPromise$_ = this._$_DoLoadContent$_()), 
            this._$_loadPromise$_;
        }
        async _$_DoLoadContent$_() {
            if (!this._$_hasStartedLoad$_) {
                this._$_hasStartedLoad$_ = !0, this._$_isLoading$_ = !0;
                const t = await this._$_textIconManager$_._$_GetIconSetContent$_(this._$_source$_);
                if (this._$_textIconManager$_) {
                    const i = t._$icons$_;
                    for (let t = 0, s = Math.min(i.length, this._$_iconsArray$_.length); t < s; ++t) {
                        const e = i[t]._$drawable$_;
                        this._$_iconsArray$_[t]._$_SetDrawable$_(e);
                    }
                    this._$_isLoading$_ = !1;
                }
            }
        }
        _$GetTextIconByIndex$_(t) {
            return (t = Math.floor(t)) < 0 || t >= this._$_iconsArray$_.length ? null : this._$_iconsArray$_[t];
        }
        _$GetTextIconByTag$_(t) {
            return this._$_iconsByTag$_.get(t.toLowerCase()) || null;
        }
    };
}

{
    const Os = self._$C3$_;
    Os._$TextIcon$_ = class {
        constructor(t, s) {
            this._$_textIconSet$_ = t, this._$_source$_ = s.source || null, this._$_index$_ = s.index, 
            this._$_tag$_ = s.tag, this._$_width$_ = s.width, this._$_height$_ = s.height, 
            this._$_drawable$_ = null;
        }
        _$Release$_() {
            this._$_width$_ = 0, this._$_height$_ = 0, this._$_textIconSet$_ = null;
        }
        _$GetSource$_() {
            return this._$_source$_;
        }
        _$GetWidth$_() {
            return this._$_width$_;
        }
        _$GetHeight$_() {
            return this._$_height$_;
        }
        _$_SetDrawable$_(t) {
            this._$_drawable$_ = t;
        }
        _$GetDrawable$_() {
            return this._$_drawable$_;
        }
    };
}

{
    let e = function(t, s, i, e) {
        const n = js;
        Cn._$subtract$_(ks, i, s), Cn._$subtract$_(Fs, t, s), Cn._$cross$_(n, ks, Fs), 
        Cn.normalize(n, n), e.set(n[0], n[1], n[2], Cn._$dot$_(t, n));
    }, r = function(t, s, i, e, n, h, r) {
        const o = r.x, a = r.y, l = r.z, u = r.w, c = r._$xF$_, f = r._$yF$_, d = r._$zF$_, p = 1 - c, m = 1 - f, g = 1 - d, y = o * t * c + o * e * p + a * s * f + a * n * m + l * i * d + l * h * g;
        if (u <= y) return !0;
        const M = o * e * c + o * t * p + a * n * f + a * s * m + l * h * d + l * i * g;
        return u < M;
    }, n = function(t, s, i, e) {
        const n = e.x, h = e.y, r = e.z, o = e.w, a = n * t + h * s + r * i;
        return o <= a;
    };
    e, r, n;
    const Ps = self._$C3$_, Rs = self._$glMatrix$_, Cn = Rs._$vec3$_, Wn = Rs._$vec4$_, vn = Rs._$mat4$_, ks = Cn.create(), Fs = Cn.create(), js = Cn.create(), zs = Wn.create(), Bs = vn.create(), Us = Cn.create(), Ws = Cn.create(), Qs = Cn.create(), Vs = Cn.create(), Js = Cn.create(), Ys = Cn.create(), Hs = Cn.create(), qs = Cn.create(), Zs = Wn._$fromValues$_(0, 0, 1, 1);
    Ps._$Gfx$_ = {
        _$Project$_(t, s, i, e, n, h, r) {
            let o = e[0] * t + e[4] * s + e[8] * i + e[12], a = e[1] * t + e[5] * s + e[9] * i + e[13], l = e[2] * t + e[6] * s + e[10] * i + e[14], u = e[3] * t + e[7] * s + e[11] * i + e[15], c = n[0] * o + n[4] * a + n[8] * l + n[12] * u, f = n[1] * o + n[5] * a + n[9] * l + n[13] * u, d = n[2] * o + n[6] * a + n[10] * l + n[14] * u, p = n[3] * o + n[7] * a + n[11] * l + n[15] * u;
            return 0 != p && (f *= p = 1 / p, d *= p, r[0] = (.5 * (c *= p) + .5) * h[2] + h[0], 
            r[1] = (.5 * f + .5) * h[3] + h[1], r[2] = .5 * (1 + d), !0);
        },
        _$Unproject$_(t, s, i, e, n, h, r) {
            const o = Bs, a = zs;
            return vn.multiply(o, n, e), null !== vn._$invert$_(o, o) && (a[0] = (t - h[0]) / h[2] * 2 - 1, 
            a[1] = (s - h[1]) / h[3] * 2 - 1, a[2] = 2 * i - 1, a[3] = 1, Wn._$transformMat4$_(a, a, o), 
            0 !== a[3]) && (a[3] = 1 / a[3], r[0] = a[0] * a[3], r[1] = a[1] * a[3], 
            r[2] = a[2] * a[3], !0);
        },
        _$UnprojectScreenToWorldZ$_(t, s, i, e, n, h, r) {
            const o = ks, a = Fs;
            if (!Ps._$Gfx$_._$Unproject$_(t, s, 0, e, n, h, o)) return !1;
            if (!Ps._$Gfx$_._$Unproject$_(t, s, 1, e, n, h, a)) return !1;
            let l = Fs, u = (Cn._$subtract$_(l, a, o), js), c = (Cn.set(u, 0, 0, 1), 
            -i), f = Cn._$dot$_(u, l), d = 0;
            if (0 === f) {
                const p = Cn._$dot$_(u, o) + c;
                if (0 !== p) return !1;
            } else if ((d = -(Cn._$dot$_(o, u) + c) / f) < 0) return !1;
            return Cn._$scaleAndAdd$_(r, o, l, d), !0;
        }
    };
    class Xs {
        constructor() {
            this.x = NaN, this.y = NaN, this.z = NaN, this.w = NaN, this._$xF$_ = NaN, 
            this._$yF$_ = NaN, this._$zF$_ = NaN;
        }
        set(t, s, i, e) {
            this.x = t, this.y = s, this.z = i, this.w = e, this._$xF$_ = 0 < t ? 1 : 0, 
            this._$yF$_ = 0 < s ? 1 : 0, this._$zF$_ = 0 < i ? 1 : 0;
        }
    }
    Ps._$Gfx$_._$ViewFrustum$_ = class {
        constructor() {
            this._$_leftP$_ = new Xs(), this._$_topP$_ = new Xs(), this._$_rightP$_ = new Xs(), 
            this._$_bottomP$_ = new Xs(), this._$_nearP$_ = new Xs(), this._$_farP$_ = new Xs();
        }
        _$CalculatePlanes$_(t, s) {
            const i = Zs;
            Ps._$Gfx$_._$Unproject$_(0, 1, 0, t, s, i, Us), Ps._$Gfx$_._$Unproject$_(1, 1, 0, t, s, i, Ws), 
            Ps._$Gfx$_._$Unproject$_(0, 0, 0, t, s, i, Qs), Ps._$Gfx$_._$Unproject$_(1, 0, 0, t, s, i, Vs), 
            Ps._$Gfx$_._$Unproject$_(0, 1, 1, t, s, i, Js), Ps._$Gfx$_._$Unproject$_(1, 1, 1, t, s, i, Ys), 
            Ps._$Gfx$_._$Unproject$_(0, 0, 1, t, s, i, Hs), Ps._$Gfx$_._$Unproject$_(1, 0, 1, t, s, i, qs), 
            e(Qs, Us, Js, this._$_leftP$_), e(Us, Ws, Ys, this._$_topP$_), e(Ws, Vs, qs, this._$_rightP$_), 
            e(Vs, Qs, Hs, this._$_bottomP$_), e(Hs, Js, Ys, this._$_farP$_), e(Vs, Ws, Us, this._$_nearP$_);
        }
        _$ContainsAABB$_(t, s, i, e, n, h) {
            return r(t, s, i, e, n, h, this._$_leftP$_) && r(t, s, i, e, n, h, this._$_topP$_) && r(t, s, i, e, n, h, this._$_rightP$_) && r(t, s, i, e, n, h, this._$_bottomP$_) && r(t, s, i, e, n, h, this._$_nearP$_) && r(t, s, i, e, n, h, this._$_farP$_);
        }
        _$IsBehindNearPlane$_(t, s, i) {
            return !n(t, s, i, this._$_nearP$_);
        }
    };
}

{
    const Ks = self._$C3$_, $s = self._$glMatrix$_, Cn = $s._$vec3$_, Wn = $s._$vec4$_, vn = $s._$mat4$_, ti = vn.create(), si = Cn._$fromValues$_(0, 0, 0), ii = Cn._$fromValues$_(0, 0, 0), ei = Cn._$fromValues$_(0, 0, 0), ni = Cn._$fromValues$_(0, 1, 0), hi = (Wn._$fromValues$_(0, 0, 0, 0), 
    new Ks._$Quad$_()), ri = new Ks.Rect(), oi = new Ks._$Quad$_(0, 0, 1, 0, 1, 1, 0, 1), ai = {
        _$nearZ$_: 1,
        _$farZ$_: 1e4
    }, li = vn._$fromValues$_(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, .5, 0, 0, 0, .5, 1);
    Ks._$Gfx$_._$RendererBase$_ = class {
        constructor(t) {
            t = Object.assign({}, ai, t), this._$_width$_ = 0, this._$_height$_ = 0, 
            this._$_fovY$_ = Ks._$toRadians$_(45), this._$_tan_fovY_2$_ = Math.tan(this._$_fovY$_ / 2), 
            this._$_matP$_ = vn.create(), this._$_matMV$_ = vn.create(), this._$_zAxisScale$_ = !1, 
            this._$_nearZ$_ = t._$nearZ$_, this._$_farZ$_ = t._$farZ$_, this._$_allShaderPrograms$_ = [], 
            this._$_shaderProgramsByName$_ = new Map(), this._$_spTextureFill$_ = null, 
            this._$_spPoints$_ = null, this._$_spTilemapFill$_ = null, this._$_spTileRandomization$_ = null, 
            this._$_spColorFill$_ = null, this._$_spLinearGradientFill$_ = null, 
            this._$_spPenumbraFill$_ = null, this._$_spHardEllipseFill$_ = null, 
            this._$_spHardEllipseOutline$_ = null, this._$_spSmoothEllipseFill$_ = null, 
            this._$_spSmoothEllipseOutline$_ = null, this._$_spSmoothLineFill$_ = null, 
            this._$_stateGroups$_ = new Map(), this._$_currentStateGroup$_ = null, 
            this._$_blendModeTable$_ = [], this._$_namedBlendModeMap$_ = new Map(), 
            this._$_baseZ$_ = 0, this._$_currentZ$_ = 0, this._$_lineWidth$_ = 1, 
            this._$_lineWidthStack$_ = [ this._$_lineWidth$_ ], this._$_lineCap$_ = 1, 
            this._$_lineCapStack$_ = [ this._$_lineCap$_ ], this._$_lineOffset$_ = .5, 
            this._$_lineOffsetStack$_ = [ this._$_lineOffset$_ ], this._$_frameNumber$_ = 0, 
            this._$_enableMipmaps$_ = !0, this._$_hasMajorPerformanceCaveat$_ = !1;
        }
        _$FillIndexBufferData$_(t) {
            let s = 0, i = t.length, e = 0;
            for (;s < i; ) t[s++] = e, t[s++] = e + 1, t[s++] = e + 2, t[s++] = e, 
            t[s++] = e + 2, t[s++] = e + 3, e += 4;
        }
        _$_ClearState$_() {
            this._$_baseZ$_ = 0, this._$_currentZ$_ = 0, this._$_spTextureFill$_ = null, 
            this._$_spPoints$_ = null, this._$_spTilemapFill$_ = null, this._$_spTileRandomization$_ = null, 
            this._$_spColorFill$_ = null, this._$_spLinearGradientFill$_ = null, 
            this._$_spPenumbraFill$_ = null, this._$_spHardEllipseFill$_ = null, 
            this._$_spHardEllipseOutline$_ = null, this._$_spSmoothEllipseFill$_ = null, 
            this._$_spSmoothEllipseOutline$_ = null, this._$_spSmoothLineFill$_ = null, 
            this._$_ClearAllShaderPrograms$_();
        }
        _$InitState$_() {
            this._$_ClearState$_(), this._$_currentStateGroup$_ = null;
        }
        _$OnDeviceOrContextLost$_() {
            for (const t of this._$_allShaderPrograms$_) t._$Release$_();
            this._$_ClearState$_();
        }
        _$GetWidth$_() {
            return this._$_width$_;
        }
        _$GetHeight$_() {
            return this._$_height$_;
        }
        _$GetDefaultCameraZ$_(t) {
            return this._$IsZAxisScaleNormalized$_() ? 100 : t / (2 * this._$_GetTanFovYDiv2$_());
        }
        _$GetZAxisScaleFactor$_(t) {
            if (this._$IsZAxisScaleNormalized$_()) {
                const s = t / (2 * this._$_GetTanFovYDiv2$_());
                return s / this._$GetDefaultCameraZ$_(t);
            }
            return 1;
        }
        _$SetNearZ$_(t) {
            this._$_nearZ$_ = t;
        }
        _$GetNearZ$_() {
            return this._$_nearZ$_;
        }
        _$SetFarZ$_(t) {
            this._$_farZ$_ = t;
        }
        _$GetFarZ$_() {
            return this._$_farZ$_;
        }
        _$SetFovY$_(t) {
            this._$_fovY$_ = t, this._$_tan_fovY_2$_ = Math.tan(this._$_fovY$_ / 2);
        }
        _$GetFovY$_() {
            return this._$_fovY$_;
        }
        _$_GetTanFovYDiv2$_() {
            return this._$_tan_fovY_2$_;
        }
        _$SetZAxisScaleNormalized$_() {
            this._$_zAxisScale$_ = !1;
        }
        _$SetZAxisScaleRegular$_() {
            this._$_zAxisScale$_ = !0;
        }
        _$IsZAxisScaleNormalized$_() {
            return !this._$_zAxisScale$_;
        }
        _$IsZAxisScaleRegular$_() {
            return this._$_zAxisScale$_;
        }
        _$CalculatePerspectiveMatrix$_(t, s, i = .5, e = .5) {
            const n = this._$GetNearZ$_(), h = this._$GetFarZ$_(), r = this._$GetFovY$_();
            if (.5 === i && .5 === e) this._$IsWebGPU$_() ? vn._$perspectiveZO$_(t, r, s, n, h) : vn.perspective(t, r, s, n, h); else {
                const o = 2 * (i = 1 - i) - 2, a = 2 * i, l = 2 * e - 2, u = 2 * e, c = this._$_GetTanFovYDiv2$_() * n, f = c * s;
                vn._$frustum$_(t, o * f, a * f, l * c, u * c, n, h), this._$IsWebGPU$_() && vn.mul(t, li, t);
            }
        }
        _$CalculateOrthographicMatrix$_(t, s, i, e = 1) {
            const n = self.devicePixelRatio, h = 2 * this._$GetDefaultCameraZ$_(i) * n * this._$_GetTanFovYDiv2$_() / i, r = s * h / (2 * n * e), o = i * h / (2 * n * e), a = -r, l = r, u = -o, c = o;
            this._$IsWebGPU$_() ? vn._$orthoZO$_(t, a, l, u, c, this._$GetNearZ$_(), this._$GetFarZ$_()) : vn.ortho(t, a, l, u, c, this._$GetNearZ$_(), this._$GetFarZ$_());
        }
        _$CalculateLookAtModelView$_(t, s, i, e, n, h = 1) {
            let r = 1;
            this._$IsZAxisScaleNormalized$_() && (r = 200 * this._$_GetTanFovYDiv2$_() / n);
            const o = ei, a = (Cn.set(o, r, -r, 1), si), l = ii;
            Cn.multiply(a, s, o), Cn.multiply(l, i, o), vn._$lookAt$_(t, a, l, e || ni), 
            o[2] = h, vn.scale(t, t, o);
        }
        _$CalculateLookAtModelView2$_(t, s, i, e, n, h, r, o) {
            return Cn.set(si, t, s, i), Cn.set(ii, e, n, h), this._$CalculateLookAtModelView$_(ti, si, ii, ni, r, o), 
            ti;
        }
        _$_AddShaderProgram$_(t) {
            this._$_allShaderPrograms$_.push(t), this._$_shaderProgramsByName$_.set(t._$GetName$_(), t);
        }
        _$_RemoveShaderProgram$_(t) {
            const s = this._$_allShaderPrograms$_.indexOf(t);
            -1 !== s && this._$_allShaderPrograms$_.splice(s, 1), this._$_shaderProgramsByName$_.delete(t._$GetName$_());
        }
        _$_ClearAllShaderPrograms$_() {
            Ks._$clearArray$_(this._$_allShaderPrograms$_), this._$_shaderProgramsByName$_.clear();
        }
        _$GetShaderProgramByName$_(t) {
            return this._$_shaderProgramsByName$_.get(t) || null;
        }
        _$GetTextureFillShaderProgram$_() {
            return this._$_spTextureFill$_;
        }
        _$SetTextureFillMode$_() {
            this._$SetProgram$_(this._$_spTextureFill$_);
        }
        _$GetPointsRenderingProgram$_() {
            return this._$_spPoints$_;
        }
        _$SetPointsRenderingProgram$_() {
            this._$SetProgram$_(this._$_spPoints$_);
        }
        _$SetTilemapFillMode$_() {
            this._$SetProgram$_(this._$_spTilemapFill$_);
        }
        _$SetTileRandomizationMode$_() {
            this._$SetProgram$_(this._$_spTileRandomization$_);
        }
        _$SetColorFillMode$_() {
            this._$SetProgram$_(this._$_spColorFill$_);
        }
        _$SetLinearGradientFillMode$_() {
            this._$SetProgram$_(this._$_spLinearGradientFill$_);
        }
        _$SetPenumbraFillMode$_() {
            this._$SetProgram$_(this._$_spPenumbraFill$_);
        }
        _$SetHardEllipseFillMode$_() {
            this._$SetProgram$_(this._$_spHardEllipseFill$_);
        }
        _$SetHardEllipseOutlineMode$_() {
            this._$SetProgram$_(this._$_spHardEllipseOutline$_);
        }
        _$SetSmoothEllipseFillMode$_() {
            this._$SetProgram$_(this._$_spSmoothEllipseFill$_);
        }
        _$SetSmoothEllipseOutlineMode$_() {
            this._$SetProgram$_(this._$_spSmoothEllipseOutline$_);
        }
        _$SetSmoothLineFillMode$_() {
            this._$SetProgram$_(this._$_spSmoothLineFill$_);
        }
        _$_SetCurrentStateGroup$_(t) {
            this._$_currentStateGroup$_ = t;
        }
        _$GetCurrentStateGroup$_() {
            return this._$_currentStateGroup$_;
        }
        _$AcquireStateGroup$_(t, s, i, e) {
            let n = Ks._$Gfx$_._$StateGroup$_._$MakeKey$_(t, s, i, e), h = this._$_stateGroups$_.get(n);
            return h || (h = Ks._$New$_(Ks._$Gfx$_._$StateGroup$_, this, t, s, i, e), 
            this._$_stateGroups$_.set(n, h)), h._$AddRef$_(), h;
        }
        _$ReleaseStateGroup$_(t) {
            t._$DecRef$_(), 0 === t._$_GetRefCount$_() && (this._$_currentStateGroup$_ === t && (this._$_currentStateGroup$_ = null), 
            this._$_stateGroups$_.delete(t._$GetKey$_()), t._$Release$_());
        }
        _$_InitBlendModeData$_(t) {
            Ks._$clearArray$_(this._$_blendModeTable$_), this._$_namedBlendModeMap$_.clear();
            let s = 0;
            for (const i of t) {
                const e = i[0], n = i[1], h = i[2];
                this._$_blendModeTable$_.push([ n, h ]), this._$_namedBlendModeMap$_.set(e, {
                    number: s,
                    _$srcBlend$_: n,
                    _$destBlend$_: h
                }), s++;
            }
        }
        _$_GetBlendByIndex$_(t) {
            return this._$_blendModeTable$_[t];
        }
        _$GetSrcBlendByIndex$_(t) {
            return this._$_GetBlendByIndex$_(t)[0];
        }
        _$GetDestBlendByIndex$_(t) {
            return this._$_GetBlendByIndex$_(t)[1];
        }
        _$GetNamedBlend$_(t) {
            const s = this._$_namedBlendModeMap$_.get(t);
            if (void 0 === s) throw new Error("invalid blend name");
            return s;
        }
        _$NamedBlendToNumber$_(t) {
            const s = this._$_namedBlendModeMap$_.get(t);
            if (void 0 === s) throw new Error("invalid blend name");
            return s.number;
        }
        _$SetBaseZ$_(t) {
            this._$_baseZ$_ = t;
        }
        _$GetBaseZ$_() {
            return this._$_baseZ$_;
        }
        _$SetCurrentZ$_(t) {
            this._$_currentZ$_ = t, this._$_currentStateGroup$_ = null;
        }
        _$GetCurrentZ$_() {
            return this._$_currentZ$_;
        }
        _$Line$_(t, s, i, e) {
            const n = Ks._$angleTo$_(t, s, i, e), h = Math.sin(n), r = Math.cos(n), o = .5 * this._$_lineWidth$_, a = h * o, l = r * o, u = this._$_lineCap$_;
            2 === u ? this._$LinePreCalc_LineCap2$_(t, s, 0, i, e, 0, a, l) : 1 === u ? this._$LinePreCalc_LineCap1$_(t, s, 0, i, e, 0, a, l) : this._$LinePreCalc_LineCap0$_(t, s, 0, i, e, 0, a, l);
        }
        _$Line3D$_(t, s, i, e, n, h) {
            const r = Ks._$angleTo$_(t, s, e, n), o = Math.sin(r), a = Math.cos(r), l = .5 * this._$_lineWidth$_, u = o * l, c = a * l, f = this._$_lineCap$_;
            2 === f ? this._$LinePreCalc_LineCap2$_(t, s, i, e, n, h, u, c) : 1 === f ? this._$LinePreCalc_LineCap1$_(t, s, i, e, n, h, u, c) : this._$LinePreCalc_LineCap0$_(t, s, i, e, n, h, u, c);
        }
        _$LinePreCalc_LineCap2$_(t, s, i, e, n, h, r, o) {
            const a = this._$_lineOffset$_, l = t + a - o, u = s + a - r, c = e + a + o, f = n + a + r, d = 2 * o, p = 2 * r, m = l + r, g = u - o, y = l - r + d, M = u + o + p, w = c + r, x = f - o, S = c - r - d, T = f + o - p;
            this._$Quad3D2$_(m, g, i, w, x, h, S, T, h, y, M, i, oi);
        }
        _$LinePreCalc_LineCap1$_(t, s, i, e, n, h, r, o) {
            const a = this._$_lineOffset$_, l = t + a - o, u = s + a - r, c = e + a + o, f = n + a + r, d = l + r, p = u - o, m = l - r, g = u + o, y = c + r, M = f - o, w = c - r, x = f + o;
            this._$Quad3D2$_(d, p, i, y, M, h, w, x, h, m, g, i, oi);
        }
        _$LinePreCalc_LineCap0$_(t, s, i, e, n, h, r, o) {
            const a = this._$_lineOffset$_, l = t + a, u = s + a, c = e + a, f = n + a, d = l + r, p = u - o, m = l - r, g = u + o, y = c + r, M = f - o, w = c - r, x = f + o;
            this._$Quad3D2$_(d, p, i, y, M, h, w, x, h, m, g, i, oi);
        }
        _$TexturedLine$_(t, s, i, e, n, h) {
            const r = Ks._$angleTo$_(t, s, i, e), o = Math.sin(r), a = Math.cos(r), l = .5 * this._$_lineWidth$_, u = o * l, c = a * l, f = this._$_lineCap$_;
            2 === f ? this._$TexturedLinePreCalc_LineCap2$_(t, s, i, e, u, c, n, h) : 1 === f ? this._$TexturedLinePreCalc_LineCap1$_(t, s, i, e, u, c, n, h) : this._$TexturedLinePreCalc_LineCap0$_(t, s, i, e, u, c, n, h);
        }
        _$TexturedLinePreCalc_LineCap2$_(t, s, i, e, n, h, r, o) {
            const a = this._$_lineOffset$_, l = t + a - h, u = s + a - n, c = i + a + h, f = e + a + n, d = 2 * h, p = 2 * n, m = l + n, g = u - h, y = l - n + d, M = u + h + p, w = c + n, x = f - h, S = c - n - d, T = f + h - p;
            hi.set(m, g, w, x, S, T, y, M), ri.set(r, 0, o, 0), this._$Quad3$_(hi, ri);
        }
        _$TexturedLinePreCalc_LineCap1$_(t, s, i, e, n, h, r, o) {
            const a = this._$_lineOffset$_, l = t + a - h, u = s + a - n, c = i + a + h, f = e + a + n, d = l + n, p = u - h, m = l - n, g = u + h, y = c + n, M = f - h, w = c - n, x = f + h;
            hi.set(d, p, y, M, w, x, m, g), ri.set(r, 0, o, 0), this._$Quad3$_(hi, ri);
        }
        _$TexturedLinePreCalc_LineCap0$_(t, s, i, e, n, h, r, o) {
            const a = this._$_lineOffset$_, l = t + a, u = s + a, c = i + a, f = e + a, d = l + n, p = u - h, m = l - n, g = u + h, y = c + n, M = f - h, w = c - n, x = f + h;
            hi.set(d, p, y, M, w, x, m, g), ri.set(r, 0, o, 0), this._$Quad3$_(hi, ri);
        }
        _$LineRect$_(t, s, i, e) {
            const n = .5 * this._$_lineWidth$_, h = this._$_lineCap$_;
            2 === h ? this._$_LineRectPreCalc_LineCap2$_(t, s, i, e, n) : 1 === h ? this._$_LineRectPreCalc_LineCap1$_(t, s, i, e, n) : this._$_LineRectPreCalc_LineCap0$_(t, s, i, e, n);
        }
        _$_LineRectPreCalc_LineCap2$_(t, s, i, e, n) {
            this._$LinePreCalc_LineCap2$_(t, s, 0, i, s, 0, 0, n), this._$LinePreCalc_LineCap2$_(i, s, 0, i, e, 0, n, 0), 
            this._$LinePreCalc_LineCap2$_(i, e, 0, t, e, 0, 0, -n), this._$LinePreCalc_LineCap2$_(t, e, 0, t, s, 0, -n, 0);
        }
        _$_LineRectPreCalc_LineCap1$_(t, s, i, e, n) {
            this._$LinePreCalc_LineCap1$_(t, s, 0, i, s, 0, 0, n), this._$LinePreCalc_LineCap1$_(i, s, 0, i, e, 0, n, 0), 
            this._$LinePreCalc_LineCap1$_(i, e, 0, t, e, 0, 0, -n), this._$LinePreCalc_LineCap1$_(t, e, 0, t, s, 0, -n, 0);
        }
        _$_LineRectPreCalc_LineCap0$_(t, s, i, e, n) {
            this._$LinePreCalc_LineCap0$_(t, s, 0, i, s, 0, 0, n), this._$LinePreCalc_LineCap0$_(i, s, 0, i, e, 0, n, 0), 
            this._$LinePreCalc_LineCap0$_(i, e, 0, t, e, 0, 0, -n), this._$LinePreCalc_LineCap0$_(t, e, 0, t, s, 0, -n, 0);
        }
        _$LineRect2$_(t) {
            this._$LineRect$_(t._$getLeft$_(), t._$getTop$_(), t._$getRight$_(), t._$getBottom$_());
        }
        _$LineQuad$_(t) {
            const s = Ks._$angleTo$_(t._$getTlx$_(), t._$getTly$_(), t._$getTrx$_(), t._$getTry$_()), i = Math.sin(s), e = Math.cos(s), n = .5 * this._$_lineWidth$_, h = i * n, r = e * n, o = this._$_lineCap$_;
            2 === o ? this._$_LineQuadPreCalc_LineCap2$_(t, h, r) : 1 === o ? this._$_LineQuadPreCalc_LineCap1$_(t, h, r) : this._$_LineQuadPreCalc_LineCap0$_(t, h, r);
        }
        _$_LineQuadPreCalc_LineCap2$_(t, s, i) {
            this._$LinePreCalc_LineCap2$_(t._$getTlx$_(), t._$getTly$_(), 0, t._$getTrx$_(), t._$getTry$_(), 0, s, i), 
            this._$LinePreCalc_LineCap2$_(t._$getTrx$_(), t._$getTry$_(), 0, t._$getBrx$_(), t._$getBry$_(), 0, i, -s), 
            this._$LinePreCalc_LineCap2$_(t._$getBrx$_(), t._$getBry$_(), 0, t._$getBlx$_(), t._$getBly$_(), 0, -s, -i), 
            this._$LinePreCalc_LineCap2$_(t._$getBlx$_(), t._$getBly$_(), 0, t._$getTlx$_(), t._$getTly$_(), 0, -i, s);
        }
        _$_LineQuadPreCalc_LineCap1$_(t, s, i) {
            this._$LinePreCalc_LineCap1$_(t._$getTlx$_(), t._$getTly$_(), 0, t._$getTrx$_(), t._$getTry$_(), 0, s, i), 
            this._$LinePreCalc_LineCap1$_(t._$getTrx$_(), t._$getTry$_(), 0, t._$getBrx$_(), t._$getBry$_(), 0, i, -s), 
            this._$LinePreCalc_LineCap1$_(t._$getBrx$_(), t._$getBry$_(), 0, t._$getBlx$_(), t._$getBly$_(), 0, -s, -i), 
            this._$LinePreCalc_LineCap1$_(t._$getBlx$_(), t._$getBly$_(), 0, t._$getTlx$_(), t._$getTly$_(), 0, -i, s);
        }
        _$_LineQuadPreCalc_LineCap0$_(t, s, i) {
            this._$LinePreCalc_LineCap0$_(t._$getTlx$_(), t._$getTly$_(), 0, t._$getTrx$_(), t._$getTry$_(), 0, s, i), 
            this._$LinePreCalc_LineCap0$_(t._$getTrx$_(), t._$getTry$_(), 0, t._$getBrx$_(), t._$getBry$_(), 0, i, -s), 
            this._$LinePreCalc_LineCap0$_(t._$getBrx$_(), t._$getBry$_(), 0, t._$getBlx$_(), t._$getBly$_(), 0, -s, -i), 
            this._$LinePreCalc_LineCap0$_(t._$getBlx$_(), t._$getBly$_(), 0, t._$getTlx$_(), t._$getTly$_(), 0, -i, s);
        }
        _$SetLineWidth$_(t) {
            this._$_lineWidth$_ = t, this._$_lineWidthStack$_[this._$_lineWidthStack$_.length - 1] = t;
        }
        _$GetLineWidth$_() {
            return this._$_lineWidth$_;
        }
        _$PushLineWidth$_(t) {
            if (100 <= this._$_lineWidthStack$_.length) throw new Error("pushed too many line widths - check push/pop pairs");
            this._$_lineWidthStack$_.push(t), this._$_lineWidth$_ = t;
        }
        _$PopLineWidth$_() {
            if (this._$_lineWidthStack$_.length <= 1) throw new Error("cannot pop last line width - check push/pop pairs");
            this._$_lineWidthStack$_.pop(), this._$_lineWidth$_ = this._$_lineWidthStack$_.at(-1);
        }
        _$SetLineCapButt$_() {
            this._$_lineCap$_ = 0, this._$_lineCapStack$_[this._$_lineCapStack$_.length - 1] = 0;
        }
        _$SetLineCapSquare$_() {
            this._$_lineCap$_ = 1, this._$_lineCapStack$_[this._$_lineCapStack$_.length - 1] = 0;
        }
        _$SetLineCapZag$_() {
            this._$_lineCap$_ = 2, this._$_lineCapStack$_[this._$_lineCapStack$_.length - 1] = 0;
        }
        _$PushLineCap$_(t) {
            if ("butt" === t) this._$PushLineCapButt$_(); else if ("square" === t) this._$PushLineCapSquare$_(); else {
                if ("zag" !== t) throw new Error("invalid line cap");
                this._$PushLineCapZag$_();
            }
        }
        _$PushLineCapButt$_() {
            if (100 <= this._$_lineCapStack$_.length) throw new Error("pushed too many line caps - check push/pop pairs");
            this._$_lineCapStack$_.push(0), this._$_lineCap$_ = 0;
        }
        _$PushLineCapSquare$_() {
            if (100 <= this._$_lineCapStack$_.length) throw new Error("pushed too many line caps - check push/pop pairs");
            this._$_lineCapStack$_.push(1), this._$_lineCap$_ = 1;
        }
        _$PushLineCapZag$_() {
            if (100 <= this._$_lineCapStack$_.length) throw new Error("pushed too many line caps - check push/pop pairs");
            this._$_lineCapStack$_.push(2), this._$_lineCap$_ = 2;
        }
        _$PopLineCap$_() {
            if (this._$_lineCapStack$_.length <= 1) throw new Error("cannot pop last line cap - check push/pop pairs");
            this._$_lineCapStack$_.pop(), this._$_lineCap$_ = this._$_lineCapStack$_.at(-1);
        }
        _$SetLineOffset$_(t) {
            this._$_lineOffset$_ = t, this._$_lineOffsetStack$_[this._$_lineOffsetStack$_.length - 1] = t;
        }
        _$GetLineOffset$_() {
            return this._$_lineOffset$_;
        }
        _$PushLineOffset$_(t) {
            if (100 <= this._$_lineOffsetStack$_.length) throw new Error("pushed too many line offsets - check push/pop pairs");
            this._$_lineOffsetStack$_.push(t), this._$_lineOffset$_ = t;
        }
        _$PopLineOffset$_() {
            if (this._$_lineOffsetStack$_.length <= 1) throw new Error("cannot pop last line offset - check push/pop pairs");
            this._$_lineOffsetStack$_.pop(), this._$_lineOffset$_ = this._$_lineOffsetStack$_.at(-1);
        }
        _$ConvexPoly$_(s) {
            const t = s.length / 2;
            if (t < 3) throw new Error("need at least 3 points");
            const i = t - 2, e = i - 1, n = s[0], h = s[1];
            for (let t = 0; t < i; t += 2) {
                const r = 2 * t, o = s[2 + r], a = s[3 + r], l = s[4 + r], u = s[5 + r];
                if (t === e) this._$Quad2$_(n, h, o, a, l, u, l, u); else {
                    const c = s[6 + r], f = s[7 + r];
                    this._$Quad2$_(n, h, o, a, l, u, c, f);
                }
            }
        }
        _$GetNumVertexComponents$_() {
            return 3;
        }
        _$Finish$_() {
            this._$EndBatch$_(!0), this._$_frameNumber$_++;
        }
        _$GetFrameNumber$_() {
            return this._$_frameNumber$_;
        }
        _$IncrementFrameNumber$_() {
            this._$_frameNumber$_++;
        }
        _$SetMipmapsEnabled$_(t) {
            this._$_enableMipmaps$_ = !!t;
        }
        _$AreMipmapsEnabled$_() {
            return this._$_enableMipmaps$_;
        }
        _$SetHasMajorPerformanceCaveat$_(t) {
            this._$_hasMajorPerformanceCaveat$_ = !!t;
        }
        _$HasMajorPerformanceCaveat$_() {
            return this._$_hasMajorPerformanceCaveat$_;
        }
        _$IsWebGL$_() {
            return !1;
        }
        _$IsWebGPU$_() {
            return !1;
        }
        _$GetEstimatedBackBufferMemoryUsage$_() {}
        _$GetEstimatedRenderBufferMemoryUsage$_() {}
        _$GetEstimatedTextureMemoryUsage$_() {}
        _$GetEstimatedTotalMemoryUsage$_() {
            return this._$GetEstimatedBackBufferMemoryUsage$_() + this._$GetEstimatedRenderBufferMemoryUsage$_() + this._$GetEstimatedTextureMemoryUsage$_();
        }
        _$CreateRendererText$_() {
            return Ks._$New$_(Ks._$Gfx$_._$RendererText$_, this);
        }
    };
}

{
    const ui = self._$C3$_;
    ui._$Gfx$_._$ShaderProgramBase$_ = class {
        constructor(t, s) {
            this._$_name$_ = s.name, this._$_renderer$_ = t, this._$_extendBoxHorizontal$_ = s._$extendBoxHorizontal$_ || 0, 
            this._$_extendBoxVertical$_ = s._$extendBoxVertical$_ || 0, this._$_crossSampling$_ = !!s._$crossSampling$_, 
            this._$_mustPreDraw$_ = !!s._$mustPreDraw$_, this._$_preservesOpaqueness$_ = !!s._$preservesOpaqueness$_, 
            this._$_supports3dDirectRendering$_ = !!s._$supports3dDirectRendering$_, 
            this._$_animated$_ = !!s._$animated$_, this._$_blendsBackground$_ = !!s._$blendsBackground$_, 
            this._$_usesDepth$_ = !!s._$usesDepth$_, this._$_usesAnySrcRectOrPixelSize$_ = !1, 
            this._$_needsPostDrawOrExtendBox$_ = this._$_crossSampling$_ || this._$_blendsBackground$_ || 0 !== this._$_extendBoxHorizontal$_ || 0 !== this._$_extendBoxVertical$_;
        }
        _$Release$_() {
            this._$_renderer$_ = null;
        }
        _$GetRenderer$_() {
            return this._$_renderer$_;
        }
        _$GetName$_() {
            return this._$_name$_;
        }
        _$ExtendsBox$_() {
            return 0 !== this._$_extendBoxHorizontal$_ || 0 !== this._$_extendBoxVertical$_;
        }
        _$GetBoxExtendHorizontal$_() {
            return this._$_extendBoxHorizontal$_;
        }
        _$GetBoxExtendVertical$_() {
            return this._$_extendBoxVertical$_;
        }
        _$UsesCrossSampling$_() {
            return this._$_crossSampling$_;
        }
        _$MustPreDraw$_() {
            return this._$_mustPreDraw$_;
        }
        _$PreservesOpaqueness$_() {
            return this._$_preservesOpaqueness$_;
        }
        _$Supports3DDirectRendering$_() {
            return this._$_supports3dDirectRendering$_;
        }
        _$IsAnimated$_() {
            return this._$_animated$_;
        }
        _$BlendsBackground$_() {
            return this._$_blendsBackground$_;
        }
        _$UsesDepth$_() {
            return this._$_usesDepth$_;
        }
        _$UsesAnySrcRectOrPixelSize$_() {
            return this._$_usesAnySrcRectOrPixelSize$_;
        }
        _$NeedsPostDrawOrExtendsBox$_() {
            return this._$_needsPostDrawOrExtendBox$_;
        }
        _$UsesIsSrcTexRotated$_() {
            return !1;
        }
    };
}

{
    const ci = self._$C3$_;
    ci._$Gfx$_._$StateGroup$_ = class {
        constructor(t, s, i, e, n) {
            this._$_renderer$_ = t, this._$_refCount$_ = 0, this._$_shaderProgram$_ = null, 
            this._$_shaderProgramName$_ = "", this._$_blendMode$_ = i, this._$_color$_ = ci._$New$_(ci._$Color$_), 
            this._$_color$_.set(e), this._$_zElevation$_ = n, "string" == typeof s ? this._$_shaderProgramName$_ = s : (this._$_shaderProgram$_ = s, 
            this._$_shaderProgramName$_ = this._$_shaderProgram$_._$GetName$_());
        }
        _$Release$_() {
            if (0 < this._$_refCount$_) throw new Error("releasing state group still in use");
            this._$_renderer$_ = null, this._$_shaderProgram$_ = null, this._$_shaderProgramName$_ = "";
        }
        _$Apply$_() {
            const t = this._$_renderer$_;
            t._$SetProgram$_(this._$_shaderProgram$_), t._$SetBlendMode$_(this._$_blendMode$_), 
            t._$SetColor$_(this._$_color$_), t._$SetCurrentZ$_(this._$_zElevation$_), 
            t._$_SetCurrentStateGroup$_(this);
        }
        _$GetKey$_() {
            return ci._$Gfx$_._$StateGroup$_._$MakeKey$_(this._$_shaderProgramName$_, this._$_blendMode$_, this._$_color$_, this._$_zElevation$_);
        }
        _$AddRef$_() {
            ++this._$_refCount$_;
        }
        _$DecRef$_() {
            --this._$_refCount$_;
        }
        _$_GetRefCount$_() {
            return this._$_refCount$_;
        }
        _$OnContextLost$_() {
            this._$_shaderProgram$_ = null;
        }
        _$OnContextRestored$_(t) {
            if (this._$_shaderProgram$_ = t._$GetShaderProgramByName$_(this._$_shaderProgramName$_), 
            !this._$_shaderProgram$_) throw new Error("failed to restore shader program");
        }
        static _$MakeKey$_(t, s, i, e) {
            const n = "string" == typeof t ? t : t._$GetName$_();
            return n + "," + s + "," + i._$getR$_() + "," + i._$getG$_() + "," + i._$getB$_() + "," + i._$getA$_() + "," + e;
        }
    };
}

{
    let e = function(t, s, i) {
        const e = i._$getTlx$_(), n = i._$getTly$_(), h = i._$getTrx$_() - e, r = i._$getTry$_() - n, o = i._$getBlx$_() - e, a = i._$getBly$_() - n, l = h * t, u = r * t, c = o * s, f = a * s;
        return [ e + l + c, n + u + f ];
    };
    e;
    const G = self._$C3$_, fi = G._$New$_(G._$Quad$_);
    G._$Gfx$_._$MeshPoint$_ = class {
        constructor(t, s, i) {
            this._$_mesh$_ = t, this._$_col$_ = s, this._$_row$_ = i, this._$_x$_ = NaN, 
            this._$_y$_ = NaN, this._$_zElevation$_ = NaN, this._$_u$_ = NaN, this._$_v$_ = NaN, 
            this._$_x$_ = 0, this._$_y$_ = 0, this._$_zElevation$_ = 0, this._$_u$_ = 0, 
            this._$_v$_ = 0;
        }
        _$_Init$_(t, s, i, e) {
            this._$_x$_ = t, this._$_y$_ = s, this._$_u$_ = i, this._$_v$_ = e;
        }
        _$GetX$_() {
            return this._$_x$_;
        }
        _$SetX$_(t) {
            this._$_x$_ !== t && (this._$_x$_ = t, this._$_mesh$_._$_SetPointsChanged$_());
        }
        _$GetY$_() {
            return this._$_y$_;
        }
        _$SetY$_(t) {
            this._$_y$_ !== t && (this._$_y$_ = t, this._$_mesh$_._$_SetPointsChanged$_());
        }
        _$GetZElevation$_() {
            return this._$_zElevation$_;
        }
        _$SetZElevation$_(t) {
            this._$_zElevation$_ !== t && (this._$_zElevation$_ = Math.max(t, 0), 
            this._$_mesh$_._$_SetPointsChanged$_());
        }
        _$GetU$_() {
            return this._$_u$_;
        }
        _$SetU$_(t) {
            this._$_u$_ = t;
        }
        _$GetV$_() {
            return this._$_v$_;
        }
        _$SetV$_(t) {
            this._$_v$_ = t;
        }
        _$_Interpolate_TexRect$_(t, s, i) {
            [ this._$_x$_, this._$_y$_ ] = e(t._$_x$_, t._$_y$_, s), this._$_zElevation$_ = t._$_zElevation$_, 
            this._$_u$_ = G._$lerp$_(i._$getLeft$_(), i._$getRight$_(), t._$_u$_), 
            this._$_v$_ = G._$lerp$_(i._$getTop$_(), i._$getBottom$_(), t._$_v$_);
        }
        _$_Interpolate_TexQuad$_(t, s, i) {
            [ this._$_x$_, this._$_y$_ ] = e(t._$_x$_, t._$_y$_, s), this._$_zElevation$_ = t._$_zElevation$_, 
            [ this._$_u$_, this._$_v$_ ] = e(t._$_u$_, t._$_v$_, i);
        }
        _$SaveToJson$_() {
            return {
                x: this._$GetX$_(),
                y: this._$GetY$_(),
                z: this._$GetZElevation$_(),
                u: this._$GetU$_(),
                v: this._$GetV$_()
            };
        }
        _$LoadFromJson$_(t) {
            this._$SetX$_(t.x), this._$SetY$_(t.y), t.hasOwnProperty("z") && this._$SetZElevation$_(t.z), 
            this._$SetU$_(t.u), this._$SetV$_(t.v);
        }
        _$GetMesh$_() {
            return this._$_mesh$_;
        }
        _$GetColumn$_() {
            return this._$_col$_;
        }
        _$GetRow$_() {
            return this._$_row$_;
        }
    }, G._$Gfx$_._$Mesh$_ = class {
        constructor(i, t, s) {
            if (i < 2 || t < 2) throw new Error("invalid mesh size");
            this._$_hsize$_ = i, this._$_vsize$_ = t, this._$_owner$_ = s || null, 
            this._$_pts$_ = [], this._$_minX$_ = 0, this._$_minY$_ = 0, this._$_maxX$_ = 1, 
            this._$_maxY$_ = 1, this._$_maxZ$_ = 0, this._$_pointsChanged$_ = !1;
            const e = i - 1, n = t - 1;
            for (let s = 0; s < t; ++s) {
                const h = [];
                for (let t = 0; t < i; ++t) {
                    const r = G._$New$_(G._$Gfx$_._$MeshPoint$_, this, t, s), o = t / e, a = s / n;
                    r._$_Init$_(o, a, o, a), h.push(r);
                }
                this._$_pts$_.push(h);
            }
        }
        _$Release$_() {
            G._$clearArray$_(this._$_pts$_);
        }
        _$GetHSize$_() {
            return this._$_hsize$_;
        }
        _$GetVSize$_() {
            return this._$_vsize$_;
        }
        _$GetOwner$_() {
            return this._$_owner$_;
        }
        _$_GetPoints$_() {
            return this._$_pts$_;
        }
        _$_SetPointsChanged$_() {
            this._$_pointsChanged$_ = !0;
        }
        _$_MaybeComputeBounds$_() {
            if (this._$_pointsChanged$_) {
                let t = 1 / 0, s = 1 / 0, i = -1 / 0, e = -1 / 0, n = 0;
                for (const h of this._$_pts$_) for (const r of h) {
                    const o = r._$GetX$_(), a = r._$GetY$_();
                    t = Math.min(t, o), s = Math.min(s, a), i = Math.max(i, o), 
                    e = Math.max(e, a), n = Math.max(n, r._$GetZElevation$_());
                }
                this._$_minX$_ = t, this._$_minY$_ = s, this._$_maxX$_ = i, this._$_maxY$_ = e, 
                this._$_maxZ$_ = n, this._$_pointsChanged$_ = !1;
            }
        }
        _$GetMinX$_() {
            return this._$_MaybeComputeBounds$_(), this._$_minX$_;
        }
        _$GetMinY$_() {
            return this._$_MaybeComputeBounds$_(), this._$_minY$_;
        }
        _$GetMaxX$_() {
            return this._$_MaybeComputeBounds$_(), this._$_maxX$_;
        }
        _$GetMaxY$_() {
            return this._$_MaybeComputeBounds$_(), this._$_maxY$_;
        }
        _$GetMaxZ$_() {
            return this._$_MaybeComputeBounds$_(), this._$_maxZ$_;
        }
        _$HasAnyZElevation$_() {
            return 0 < this._$GetMaxZ$_();
        }
        _$GetMeshPointAt$_(t, s) {
            return t = Math.floor(t), s = Math.floor(s), t < 0 || t >= this._$_hsize$_ || s < 0 || s >= this._$_vsize$_ ? null : this._$_pts$_[s][t];
        }
        _$CalculateTransformedMesh$_(t, i, e) {
            const n = e instanceof G.Rect;
            if (t._$GetHSize$_() !== this._$GetHSize$_() || t._$GetVSize$_() !== this._$GetVSize$_()) throw new Error("source mesh wrong size");
            const h = t._$_pts$_, r = this._$_pts$_;
            for (let t = 0, s = r.length; t < s; ++t) {
                const o = h[t], a = r[t];
                for (let t = 0, s = a.length; t < s; ++t) {
                    const l = o[t], u = a[t];
                    n ? u._$_Interpolate_TexRect$_(l, i, e) : u._$_Interpolate_TexQuad$_(l, i, e);
                }
            }
        }
        _$Draw$_(h) {
            let r = this._$_pts$_, o = r[0];
            for (let t = 1, s = r.length; t < s; ++t) {
                let i = r[t], e = o[0], n = i[0];
                for (let t = 1, s = i.length; t < s; ++t) {
                    const a = o[t], l = i[t];
                    fi.set(e._$GetU$_(), e._$GetV$_(), a._$GetU$_(), a._$GetV$_(), l._$GetU$_(), l._$GetV$_(), n._$GetU$_(), n._$GetV$_()), 
                    h._$Quad3D2$_(e._$GetX$_(), e._$GetY$_(), e._$GetZElevation$_(), a._$GetX$_(), a._$GetY$_(), a._$GetZElevation$_(), l._$GetX$_(), l._$GetY$_(), l._$GetZElevation$_(), n._$GetX$_(), n._$GetY$_(), n._$GetZElevation$_(), fi), 
                    e = a, n = l;
                }
                o = i;
            }
        }
        _$Outline$_(o, a) {
            a = a || ((t, s, i) => [ t, s, i ]);
            let t = this._$_pts$_, l = t[0];
            for (let h = 1, r = t.length; h < r; ++h) {
                let i = t[h], e = l[0], n = i[0];
                for (let t = 1, s = i.length; t < s; ++t) {
                    const u = l[t], c = i[t], [ f, d, p ] = a(e._$GetX$_(), e._$GetY$_(), e._$GetZElevation$_()), [ m, g, y ] = a(u._$GetX$_(), u._$GetY$_(), u._$GetZElevation$_()), [ M, w, x ] = a(c._$GetX$_(), c._$GetY$_(), c._$GetZElevation$_()), [ S, T, b ] = a(n._$GetX$_(), n._$GetY$_(), n._$GetZElevation$_());
                    o._$Line3D$_(f, d, p, m, g, y), o._$Line3D$_(f, d, p, M, w, x), 
                    o._$Line3D$_(f, d, p, S, T, b), t === s - 1 && o._$Line3D$_(m, g, y, M, w, x), 
                    h === r - 1 && o._$Line3D$_(S, T, b, M, w, x), e = u, n = c;
                }
                l = i;
            }
        }
        _$InsertPolyMeshVertices$_(t) {
            let i = .99999999, e = t._$pointsArr$_(), n = [], h = this._$GetHSize$_() - 1, r = this._$GetVSize$_() - 1, o = 1 / h, a = 1 / r, l = h - 1, u = r - 1, c = e[0], f = e[1], d = G._$clamp$_(Math.floor(c * h), 0, l), p = G._$clamp$_(Math.floor(f * r), 0, u), m = !0, g = 0, y = 0, M = 0, w = -1, x = () => {
                c = G._$clamp$_(G._$lerp$_(c, g, M), 0, 1), f = G._$clamp$_(G._$lerp$_(f, y, M), 0, 1), 
                n.push(c, f);
            };
            for (let t = 0, s = e.length; t < s; t += 2) {
                c = e[t], f = e[t + 1], n.push(c, f), d = G._$clamp$_(Math.floor(c * h), 0, l), 
                p = G._$clamp$_(Math.floor(f * r), 0, u);
                const S = (t + 2) % s;
                for (g = e[S], y = e[1 + S], w = -1; ;) {
                    if (1e6 < n.length) throw new Error("Too many mesh poly points");
                    const T = d * o, b = p * a, v = (d + 1) * o, C = (p + 1) * a;
                    if (m = G._$isPointInTriangleInclusive$_(c, f, T, b, v, b, v, C), 
                    0 !== w && 0 <= (M = G._$rayIntersectExtended$_(c, f, g, y, T, b, v, C, -.001)) && M <= i) x(), 
                    m = !m, w = 0; else if (0 < p && 2 !== w && 0 <= (M = G._$rayIntersectExtended$_(c, f, g, y, T, b, v, b, .001)) && M <= i) x(), 
                    p--, m = !1, w = 4; else if (d < l && 3 !== w && 0 <= (M = G._$rayIntersectExtended$_(c, f, g, y, v, b, v, C, .001)) && M <= i) x(), 
                    d++, m = !1, w = 1; else if (0 < d && 1 !== w && 0 <= (M = G._$rayIntersectExtended$_(c, f, g, y, T, b, T, C, .001)) && M <= i) x(), 
                    d--, m = !0, w = 3; else {
                        if (!(p < u && 4 !== w && 0 <= (M = G._$rayIntersectExtended$_(c, f, g, y, T, C, v, C, .001)) && M <= i)) break;
                        x(), p++, m = !0, w = 2;
                    }
                }
            }
            return G._$New$_(G._$CollisionPoly$_, n);
        }
        _$TransformCollisionPoly$_(t, s) {
            const i = this._$_TransformPolyPoints$_(t);
            this._$_SimplifyPoly$_(i), s._$setPoints$_(i);
        }
        _$_TransformPolyPoints$_(t) {
            const i = [], e = t._$pointsArr$_();
            for (let t = 0, s = e.length; t < s; t += 2) {
                const n = e[t], h = e[t + 1], [ r, o ] = this._$TransformPoint$_(n, h);
                i.push(r, o);
            }
            return i;
        }
        _$TransformPoint$_(t, s) {
            const i = this._$GetHSize$_() - 1, e = this._$GetVSize$_() - 1, n = 1 / i, h = 1 / e, r = G._$clamp$_(Math.floor(t * i), 0, i - 1), o = G._$clamp$_(Math.floor(s * e), 0, e - 1), a = r * n, l = o * h, u = (r + 1) * n, c = (o + 1) * h, f = this._$GetMeshPointAt$_(r, o), d = this._$GetMeshPointAt$_(r + 1, o + 1), p = G._$isPointInTriangleInclusive$_(t, s, a, l, u, l, u, c), m = p ? a + n : a, g = p ? l : l + h, y = this._$GetMeshPointAt$_(r + (p ? 1 : 0), o + (p ? 0 : 1)), [ M, w, x ] = G._$triangleCartesianToBarycentric$_(t, s, a, l, m, g, u, c);
            return G._$triangleBarycentricToCartesian3d$_(M, w, x, f._$GetX$_(), f._$GetY$_(), f._$GetZElevation$_(), y._$GetX$_(), y._$GetY$_(), y._$GetZElevation$_(), d._$GetX$_(), d._$GetY$_(), d._$GetZElevation$_());
        }
        _$_SimplifyPoly$_(i) {
            let e = [], n = i[0], h = i[1], r = n - i.at(-2), o = h - i.at(-1);
            for (let t = 0, s = i.length; t < s; t += 2) {
                const a = (t + 2) % s, l = i[a], u = i[1 + a], c = l - n, f = u - h, d = Math.abs(c) < 1e-7 && Math.abs(r) < 1e-7 && Math.sign(f) === Math.sign(o), p = Math.abs(f) < 1e-7 && Math.abs(o) < 1e-7 && Math.sign(c) === Math.sign(r);
                (!d && !p && .001 < Math.abs(c / r - f / o) || 0 == c && 0 == f) && e.push(n, h), 
                n = l, h = u, r = c, o = f;
            }
            6 <= e.length && e.length < i.length && G._$shallowAssignArray$_(i, e);
        }
        _$SaveToJson$_() {
            return {
                cols: this._$GetHSize$_(),
                rows: this._$GetVSize$_(),
                points: this._$_pts$_.map(t => t.map(t => t._$SaveToJson$_()))
            };
        }
        _$LoadFromJson$_(t) {
            const i = this._$GetHSize$_(), e = this._$GetVSize$_();
            if (t.cols !== i || t.rows !== e) throw new Error("mesh data wrong size");
            const n = t.points;
            for (let s = 0; s < e; ++s) {
                const h = n[s];
                for (let t = 0; t < i; ++t) {
                    const r = this._$GetMeshPointAt$_(t, s);
                    r._$LoadFromJson$_(h[t]);
                }
            }
        }
    };
}

{
    let d = function(t, s) {
        let i, e, n, h;
        switch (t) {
          case "rgba8":
            i = s.RGBA8, e = s.RGBA, n = s.RGBA, h = s.UNSIGNED_BYTE;
            break;

          case "rgb8":
            i = s.RGB8, e = s.RGB, n = s.RGB, h = s.UNSIGNED_BYTE;
            break;

          case "rgba4":
            i = s.RGBA4, e = s.RGBA, n = s.RGBA, h = s.UNSIGNED_SHORT_4_4_4_4;
            break;

          case "rgb5_a1":
            i = s.RGB5_A1, e = s.RGBA, n = s.RGBA, h = s.UNSIGNED_SHORT_5_5_5_1;
            break;

          case "rgb565":
            i = s.RGB565, e = s.RGB, n = s.RGB, h = s.UNSIGNED_SHORT_5_6_5;
            break;

          default:
            throw new Error("invalid pixel format");
        }
        return {
            _$sizedinternalformat$_: i,
            _$internalformat$_: e,
            format: n,
            type: h
        };
    };
    d;
    const di = self._$C3$_, pi = new Set([ "rgba8", "rgb8", "rgba4", "rgb5_a1", "rgb565" ]), mi = new Set([ "nearest", "bilinear", "trilinear" ]), gi = new Set([ "default", "low", "high" ]), yi = new Set([ "clamp-to-edge", "repeat", "mirror-repeat" ]), Mi = {
        _$wrapX$_: "clamp-to-edge",
        _$wrapY$_: "clamp-to-edge",
        _$sampling$_: "trilinear",
        _$anisotropy$_: 0,
        _$pixelFormat$_: "rgba8",
        _$mipMap$_: !0,
        _$mipMapQuality$_: "default",
        premultiplyAlpha: !0,
        _$isSvg$_: !1,
        width: -1,
        height: -1
    }, wi = {
        premultiplyAlpha: !0,
        flipY: !1
    }, xi = new Set();
    di._$Gfx$_._$WebGLRendererTexture$_ = class {
        constructor(t) {
            this._$_renderer$_ = t, this._$_texture$_ = null, this._$_width$_ = 0, 
            this._$_height$_ = 0, this._$_isStatic$_ = !0, this._$_wrapX$_ = "clamp-to-edge", 
            this._$_wrapY$_ = "clamp-to-edge", this._$_sampling$_ = "trilinear", 
            this._$_anisotropy$_ = 0, this._$_pixelFormat$_ = "rgba8", this._$_isMipMapped$_ = !1, 
            this._$_mipMapQuality$_ = "default", this._$_refCount$_ = 0;
        }
        _$_CreateStatic$_(s, t) {
            if (!("undefined" != typeof HTMLImageElement && s instanceof HTMLImageElement || "undefined" != typeof HTMLCanvasElement && s instanceof HTMLCanvasElement || "undefined" != typeof ImageBitmap && s instanceof ImageBitmap || "undefined" != typeof OffscreenCanvas && s instanceof OffscreenCanvas || s instanceof ImageData || s instanceof ArrayBuffer || null === s)) throw new Error("invalid texture source");
            if (t = Object.assign({}, Mi, t), this._$_texture$_) throw new Error("already created texture");
            if (this._$_wrapX$_ = t._$wrapX$_, this._$_wrapY$_ = t._$wrapY$_, this._$_sampling$_ = t._$sampling$_, 
            this._$_anisotropy$_ = t._$anisotropy$_, this._$_pixelFormat$_ = t._$pixelFormat$_, 
            this._$_isMipMapped$_ = !!t._$mipMap$_ && this._$_renderer$_._$AreMipmapsEnabled$_(), 
            this._$_mipMapQuality$_ = t._$mipMapQuality$_, !yi.has(this._$_wrapX$_) || !yi.has(this._$_wrapY$_)) throw new Error("invalid wrap mode");
            if (!mi.has(this._$_sampling$_)) throw new Error("invalid sampling");
            if (!pi.has(this._$_pixelFormat$_)) throw new Error("invalid pixel format");
            if (!gi.has(this._$_mipMapQuality$_)) throw new Error("invalid mipmap quality");
            if (this._$_isStatic$_ = !0, s instanceof ArrayBuffer || null === s || t._$isSvg$_) {
                if (this._$_width$_ = t.width, this._$_height$_ = t.height, s instanceof ArrayBuffer && s.byteLength !== this._$_width$_ * this._$_height$_ * 4) throw new Error("ArrayBuffer wrong size");
            } else this._$_width$_ = s.width, this._$_height$_ = s.height;
            if (this._$_width$_ <= 0 || this._$_height$_ <= 0) throw new Error("invalid texture data size");
            if (t._$isSvg$_) {
                const o = di._$CreateCanvas$_(this._$_width$_, this._$_height$_), a = o.getContext("2d");
                a.drawImage(s, 0, 0, this._$_width$_, this._$_height$_), s = o;
            }
            const i = di._$isPOT$_(this._$_width$_) && di._$isPOT$_(this._$_height$_), e = this._$_renderer$_._$GetMaxTextureSize$_();
            if (this._$_width$_ > e || this._$_height$_ > e) throw new Error("texture data exceeds maximum texture size");
            const n = this._$_renderer$_._$GetContext$_(), h = this._$_renderer$_._$GetWebGLVersionNumber$_(), r = (this._$_texture$_ = n.createTexture(), 
            n.bindTexture(n.TEXTURE_2D, this._$_texture$_), n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL, t.premultiplyAlpha), 
            n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL, !1), d(this._$_pixelFormat$_, n));
            if (this._$_renderer$_._$SupportsNPOTTextures$_() || i || !this._$_IsTiled$_()) if (2 <= h) {
                let t;
                t = this._$_isMipMapped$_ ? Math.floor(Math.log2(Math.max(this._$_width$_, this._$_height$_)) + 1) : 1, 
                n.texStorage2D(n.TEXTURE_2D, t, r._$sizedinternalformat$_, this._$_width$_, this._$_height$_), 
                s instanceof ArrayBuffer ? n.texSubImage2D(n.TEXTURE_2D, 0, 0, 0, this._$_width$_, this._$_height$_, r.format, r.type, new Uint8Array(s)) : null !== s && n.texSubImage2D(n.TEXTURE_2D, 0, 0, 0, r.format, r.type, s);
            } else s instanceof ArrayBuffer ? n.texImage2D(n.TEXTURE_2D, 0, r._$internalformat$_, this._$_width$_, this._$_height$_, 0, r.format, r.type, new Uint8Array(s)) : null === s ? n.texImage2D(n.TEXTURE_2D, 0, r._$internalformat$_, this._$_width$_, this._$_height$_, 0, r.format, r.type, null) : n.texImage2D(n.TEXTURE_2D, 0, r._$internalformat$_, r.format, r.type, s); else {
                if (null === s) throw new Error("cannot pass null data when creating a NPOT tiled texture without NPOT support");
                if ((s = s instanceof ArrayBuffer ? new ImageData(new Uint8ClampedArray(s), this._$_width$_, this._$_height$_) : s) instanceof ImageData) {
                    const c = di._$CreateCanvas$_(this._$_width$_, this._$_height$_), f = c.getContext("2d");
                    f.putImageData(s, 0, 0), s = c;
                }
                const l = di._$CreateCanvas$_(di._$nextHighestPowerOfTwo$_(this._$_width$_), di._$nextHighestPowerOfTwo$_(this._$_height$_)), u = l.getContext("2d");
                u.imageSmoothingEnabled = "nearest" !== this._$_sampling$_, u.drawImage(s, 0, 0, this._$_width$_, this._$_height$_, 0, 0, l.width, l.height), 
                n.texImage2D(n.TEXTURE_2D, 0, r._$internalformat$_, r.format, r.type, l);
            }
            null !== s && this._$_SetTextureParameters$_(n), n.bindTexture(n.TEXTURE_2D, null), 
            this._$_renderer$_._$_ResetLastTexture$_(), this._$_refCount$_ = 1, 
            xi.add(this);
        }
        _$_CreateDynamic$_(t, s, i) {
            if (i = Object.assign({}, Mi, i), this._$_texture$_) throw new Error("already created texture");
            if (this._$_wrapX$_ = i._$wrapX$_, this._$_wrapY$_ = i._$wrapY$_, this._$_sampling$_ = i._$sampling$_, 
            this._$_pixelFormat$_ = i._$pixelFormat$_, this._$_isMipMapped$_ = !!i._$mipMap$_ && this._$_renderer$_._$AreMipmapsEnabled$_(), 
            this._$_mipMapQuality$_ = i._$mipMapQuality$_, !yi.has(this._$_wrapX$_) || !yi.has(this._$_wrapY$_)) throw new Error("invalid wrap mode");
            if (!mi.has(this._$_sampling$_)) throw new Error("invalid sampling");
            if (!pi.has(this._$_pixelFormat$_)) throw new Error("invalid pixel format");
            if (!gi.has(this._$_mipMapQuality$_)) throw new Error("invalid mipmap quality");
            this._$_isStatic$_ = !1, this._$_width$_ = Math.floor(t), this._$_height$_ = Math.floor(s);
            const e = di._$isPOT$_(this._$_width$_) && di._$isPOT$_(this._$_height$_), n = this._$_renderer$_._$GetMaxTextureSize$_();
            if (this._$_width$_ <= 0 || this._$_height$_ <= 0) throw new Error("invalid texture size");
            if (this._$_width$_ > n || this._$_height$_ > n) throw new Error("texture exceeds maximum texture size");
            if (!this._$_renderer$_._$SupportsNPOTTextures$_() && this._$_IsTiled$_() && !e) throw new Error("non-power-of-two tiled textures not supported");
            const h = this._$_renderer$_._$GetContext$_(), r = this._$_renderer$_._$GetWebGLVersionNumber$_(), o = (this._$_texture$_ = h.createTexture(), 
            h.bindTexture(h.TEXTURE_2D, this._$_texture$_), h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL, i.premultiplyAlpha), 
            h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL, !1), d(this._$_pixelFormat$_, h)), a = 2 <= r ? o._$sizedinternalformat$_ : o._$internalformat$_;
            h.texImage2D(h.TEXTURE_2D, 0, a, this._$_width$_, this._$_height$_, 0, o.format, o.type, null), 
            this._$_SetTextureParameters$_(h), h.bindTexture(h.TEXTURE_2D, null), 
            this._$_renderer$_._$_ResetLastTexture$_(), this._$_refCount$_ = 1, 
            xi.add(this);
        }
        _$_GetMipMapHint$_(t) {
            if ("default" === this._$_mipMapQuality$_) return this._$_isStatic$_ ? t.NICEST : t.FASTEST;
            if ("low" === this._$_mipMapQuality$_) return t.FASTEST;
            if ("high" === this._$_mipMapQuality$_) return t.NICEST;
            throw new Error("invalid mipmap quality");
        }
        _$_IsTiled$_() {
            return "clamp-to-edge" !== this._$_wrapX$_ || "clamp-to-edge" !== this._$_wrapY$_;
        }
        _$_GetTextureWrapMode$_(t, s) {
            if ("clamp-to-edge" === s) return t.CLAMP_TO_EDGE;
            if ("repeat" === s) return t.REPEAT;
            if ("mirror-repeat" === s) return t.MIRRORED_REPEAT;
            throw new Error("invalid wrap mode");
        }
        _$_SetTextureParameters$_(t) {
            const s = di._$isPOT$_(this._$_width$_) && di._$isPOT$_(this._$_height$_);
            if (t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_S, this._$_GetTextureWrapMode$_(t, this._$_wrapX$_)), 
            t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_T, this._$_GetTextureWrapMode$_(t, this._$_wrapY$_)), 
            "nearest" === this._$_sampling$_) t.texParameteri(t.TEXTURE_2D, t.TEXTURE_MAG_FILTER, t.NEAREST), 
            t.texParameteri(t.TEXTURE_2D, t.TEXTURE_MIN_FILTER, t.NEAREST), this._$_isMipMapped$_ = !1; else if (t.texParameteri(t.TEXTURE_2D, t.TEXTURE_MAG_FILTER, t.LINEAR), 
            (s || this._$_renderer$_._$SupportsNPOTTextures$_()) && this._$_isMipMapped$_) {
                t.hint(t.GENERATE_MIPMAP_HINT, this._$_GetMipMapHint$_(t)), t.generateMipmap(t.TEXTURE_2D);
                const e = "trilinear" === this._$_sampling$_ && !this._$_renderer$_._$HasMajorPerformanceCaveat$_();
                t.texParameteri(t.TEXTURE_2D, t.TEXTURE_MIN_FILTER, e ? t.LINEAR_MIPMAP_LINEAR : t.LINEAR_MIPMAP_NEAREST);
            } else t.texParameteri(t.TEXTURE_2D, t.TEXTURE_MIN_FILTER, t.LINEAR), 
            this._$_isMipMapped$_ = !1;
            const i = this._$_renderer$_._$_GetAnisotropicExtension$_();
            i && 0 < this._$_anisotropy$_ && "nearest" !== this._$_sampling$_ && t.texParameterf(t.TEXTURE_2D, i.TEXTURE_MAX_ANISOTROPY_EXT, Math.min(this._$_anisotropy$_, this._$_renderer$_._$_GetMaxAnisotropy$_()));
        }
        _$_Update$_(t, s) {
            if (!("undefined" != typeof HTMLImageElement && t instanceof HTMLImageElement || "undefined" != typeof HTMLVideoElement && t instanceof HTMLVideoElement || "undefined" != typeof HTMLCanvasElement && t instanceof HTMLCanvasElement || "undefined" != typeof ImageBitmap && t instanceof ImageBitmap || "undefined" != typeof OffscreenCanvas && t instanceof OffscreenCanvas || t instanceof ImageData)) throw new Error("invalid texture source");
            if (!this._$_texture$_ || this._$_refCount$_ <= 0) throw new Error("texture not created");
            if (this._$_isStatic$_) throw new Error("cannot update static texture");
            s = Object.assign({}, wi, s);
            const i = t.width || t.videoWidth, e = t.height || t.videoHeight, n = this._$_renderer$_._$GetWebGLVersionNumber$_(), h = this._$_renderer$_._$GetContext$_(), r = (h.bindTexture(h.TEXTURE_2D, this._$_texture$_), 
            h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL, s.premultiplyAlpha), 
            h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL, !!s.flipY), d(this._$_pixelFormat$_, h)), o = 2 <= n ? r._$sizedinternalformat$_ : r._$internalformat$_;
            try {
                if (this._$_width$_ === i && this._$_height$_ === e) {
                    const a = di._$isPOT$_(this._$_width$_) && di._$isPOT$_(this._$_height$_);
                    h.texSubImage2D(h.TEXTURE_2D, 0, 0, 0, r.format, r.type, t), 
                    (a || this._$_renderer$_._$SupportsNPOTTextures$_()) && this._$_isMipMapped$_ && (h.hint(h.GENERATE_MIPMAP_HINT, this._$_GetMipMapHint$_(h)), 
                    h.generateMipmap(h.TEXTURE_2D));
                } else {
                    this._$_width$_ = i, this._$_height$_ = e;
                    const l = di._$isPOT$_(this._$_width$_) && di._$isPOT$_(this._$_height$_);
                    if (!this._$_renderer$_._$SupportsNPOTTextures$_() && this._$_IsTiled$_() && !l) throw new Error("non-power-of-two tiled textures not supported");
                    h.texImage2D(h.TEXTURE_2D, 0, o, r.format, r.type, t), (l || this._$_renderer$_._$SupportsNPOTTextures$_()) && this._$_isMipMapped$_ && (h.hint(h.GENERATE_MIPMAP_HINT, this._$_GetMipMapHint$_(h)), 
                    h.generateMipmap(h.TEXTURE_2D));
                }
            } catch (t) {
                console.error("Error updating WebGL texture: ", t);
            }
            h.bindTexture(h.TEXTURE_2D, null), this._$_renderer$_._$_ResetLastTexture$_();
        }
        _$_Delete$_() {
            if (0 < this._$_refCount$_) throw new Error("texture still has references");
            if (!this._$_texture$_) throw new Error("already deleted texture");
            xi.delete(this);
            const t = this._$_renderer$_._$GetContext$_();
            t.deleteTexture(this._$_texture$_), this._$_texture$_ = null;
        }
        _$IsValid$_() {
            return !!this._$_texture$_;
        }
        _$_GetTexture$_() {
            return this._$_texture$_;
        }
        _$GetRenderer$_() {
            return this._$_renderer$_;
        }
        _$AddReference$_() {
            this._$_refCount$_++;
        }
        _$SubtractReference$_() {
            if (this._$_refCount$_ <= 0) throw new Error("no more references");
            this._$_refCount$_--;
        }
        _$GetReferenceCount$_() {
            return this._$_refCount$_;
        }
        _$GetWidth$_() {
            return this._$_width$_;
        }
        _$GetHeight$_() {
            return this._$_height$_;
        }
        _$IsStatic$_() {
            return this._$_isStatic$_;
        }
        _$GetEstimatedMemoryUsage$_() {
            let t = this._$_width$_ * this._$_height$_;
            switch (this._$_pixelFormat$_) {
              case "rgba8":
                t *= 4;
                break;

              case "rgb8":
                t *= 3;
                break;

              case "rgba4":
              case "rgb5_a1":
              case "rgb565":
                t *= 2;
            }
            return this._$_isMipMapped$_ && (t += Math.floor(t / 3)), t;
        }
        static _$OnContextLost$_() {
            xi.clear();
        }
        static _$allTextures$_() {
            return xi.values();
        }
    };
}

{
    const Si = self._$C3$_, Ti = self._$glMatrix$_, Cn = Ti._$vec3$_, vn = Ti._$mat4$_, bi = new Set([ "nearest", "bilinear", "trilinear" ]), vi = {
        _$sampling$_: "trilinear",
        alpha: !0,
        depth: !1,
        _$isSampled$_: !0,
        _$isDefaultSize$_: !0,
        _$multisampling$_: 0
    }, Ci = new Set();
    Si._$Gfx$_._$WebGLRenderTarget$_ = class {
        constructor(t) {
            this._$_renderer$_ = t, this._$_frameBuffer$_ = null, this._$_frameBufferNoDepth$_ = null, 
            this._$_texture$_ = null, this._$_renderBuffer$_ = null, this._$_width$_ = 0, 
            this._$_height$_ = 0, this._$_isDefaultSize$_ = !0, this._$_sampling$_ = "trilinear", 
            this._$_alpha$_ = !0, this._$_depth$_ = !1, this._$_isSampled$_ = !0, 
            this._$_multisampling$_ = 0, this._$_projectionMatrix$_ = vn.create(), 
            this._$_lastFov$_ = 0, this._$_lastNearZ$_ = 0, this._$_lastFarZ$_ = 0;
        }
        _$_Create$_(t, s, i) {
            i = Object.assign({}, vi, i);
            const e = this._$_renderer$_._$GetWebGLVersionNumber$_();
            if (this._$_texture$_ || this._$_renderBuffer$_) throw new Error("already created render target");
            if (this._$_sampling$_ = i._$sampling$_, this._$_alpha$_ = !!i.alpha, 
            this._$_depth$_ = !!i.depth, this._$_isSampled$_ = !!i._$isSampled$_, 
            this._$_isDefaultSize$_ = !!i._$isDefaultSize$_, this._$_multisampling$_ = i._$multisampling$_, 
            !bi.has(this._$_sampling$_)) throw new Error("invalid sampling");
            if (0 < this._$_multisampling$_ && (e < 2 || this._$_isSampled$_)) throw new Error("invalid use of multisampling");
            if (e < 2 && (this._$_isSampled$_ = !0), this._$_width$_ = t, this._$_height$_ = s, 
            this._$_width$_ <= 0 || this._$_height$_ <= 0) throw new Error("invalid render target size");
            this._$_CalculateProjection$_();
            const n = this._$_renderer$_._$GetContext$_();
            if (this._$_frameBuffer$_ = n.createFramebuffer(), this._$_depth$_ && (this._$_frameBufferNoDepth$_ = n.createFramebuffer()), 
            this._$_isSampled$_) {
                this._$_texture$_ = this._$_renderer$_._$CreateDynamicTexture$_(this._$_width$_, this._$_height$_, {
                    _$sampling$_: this._$_sampling$_,
                    _$pixelFormat$_: this._$_alpha$_ ? "rgba8" : "rgb8",
                    _$mipMap$_: !1
                });
                const r = this._$_texture$_._$_GetTexture$_();
                n.bindFramebuffer(n.FRAMEBUFFER, this._$_frameBuffer$_), n.framebufferTexture2D(n.FRAMEBUFFER, n.COLOR_ATTACHMENT0, n.TEXTURE_2D, r, 0), 
                this._$_depth$_ && (n.bindFramebuffer(n.FRAMEBUFFER, this._$_frameBufferNoDepth$_), 
                n.framebufferTexture2D(n.FRAMEBUFFER, n.COLOR_ATTACHMENT0, n.TEXTURE_2D, r, 0));
            } else {
                this._$_renderBuffer$_ = n.createRenderbuffer(), n.bindRenderbuffer(n.RENDERBUFFER, this._$_renderBuffer$_);
                const o = this._$_alpha$_ ? n.RGBA8 : n.RGB8;
                if (0 < this._$_multisampling$_) {
                    const a = n.getInternalformatParameter(n.RENDERBUFFER, o, n.SAMPLES);
                    if (a && a[0]) {
                        const l = a[0];
                        this._$_multisampling$_ > l && (this._$_multisampling$_ = l);
                    } else this._$_multisampling$_ = 0;
                }
                0 === this._$_multisampling$_ ? n.renderbufferStorage(n.RENDERBUFFER, o, this._$_width$_, this._$_height$_) : n.renderbufferStorageMultisample(n.RENDERBUFFER, this._$_multisampling$_, o, this._$_width$_, this._$_height$_), 
                n.bindFramebuffer(n.FRAMEBUFFER, this._$_frameBuffer$_), n.framebufferRenderbuffer(n.FRAMEBUFFER, n.COLOR_ATTACHMENT0, n.RENDERBUFFER, this._$_renderBuffer$_), 
                this._$_depth$_ && (n.bindFramebuffer(n.FRAMEBUFFER, this._$_frameBufferNoDepth$_), 
                n.framebufferRenderbuffer(n.FRAMEBUFFER, n.COLOR_ATTACHMENT0, n.RENDERBUFFER, this._$_renderBuffer$_)), 
                n.bindRenderbuffer(n.RENDERBUFFER, null);
            }
            const h = this._$_renderer$_._$_GetDepthBuffer$_();
            this._$_depth$_ && h && (n.bindFramebuffer(n.FRAMEBUFFER, this._$_frameBuffer$_), 
            this._$_renderer$_._$_CanSampleDepth$_() ? n.framebufferTexture2D(n.FRAMEBUFFER, n.DEPTH_STENCIL_ATTACHMENT, n.TEXTURE_2D, h, 0) : n.framebufferRenderbuffer(n.FRAMEBUFFER, n.DEPTH_STENCIL_ATTACHMENT, n.RENDERBUFFER, h)), 
            n.bindFramebuffer(n.FRAMEBUFFER, null), Ci.add(this);
        }
        _$_Resize$_(t, s) {
            if (this._$_width$_ !== t || this._$_height$_ !== s) {
                this._$_width$_ = t, this._$_height$_ = s, this._$_CalculateProjection$_();
                const i = this._$_renderer$_._$GetContext$_(), e = (i.bindFramebuffer(i.FRAMEBUFFER, this._$_frameBuffer$_), 
                this._$_texture$_ ? this._$_texture$_._$_Update$_(new ImageData(this._$_width$_, this._$_height$_)) : (i.bindRenderbuffer(i.RENDERBUFFER, this._$_renderBuffer$_), 
                i.renderbufferStorage(i.RENDERBUFFER, this._$_alpha$_ ? i.RGBA8 : i.RGB8, this._$_width$_, this._$_height$_), 
                i.bindRenderbuffer(i.RENDERBUFFER, null)), this._$_renderer$_._$_GetDepthBuffer$_());
                this._$_depth$_ && e && (this._$_renderer$_._$_CanSampleDepth$_() ? i.framebufferTexture2D(i.FRAMEBUFFER, i.DEPTH_STENCIL_ATTACHMENT, i.TEXTURE_2D, e, 0) : i.framebufferRenderbuffer(i.FRAMEBUFFER, i.DEPTH_STENCIL_ATTACHMENT, i.RENDERBUFFER, e)), 
                i.bindFramebuffer(i.FRAMEBUFFER, null);
            }
        }
        _$_Delete$_() {
            if (!this._$_texture$_ && !this._$_renderBuffer$_) throw new Error("already deleted render target");
            Ci.delete(this);
            const t = this._$_renderer$_._$GetContext$_(), s = (this._$_texture$_ ? (t.bindFramebuffer(t.FRAMEBUFFER, this._$_frameBuffer$_), 
            t.framebufferTexture2D(t.FRAMEBUFFER, t.COLOR_ATTACHMENT0, t.TEXTURE_2D, null, 0), 
            this._$_depth$_ && (t.bindFramebuffer(t.FRAMEBUFFER, this._$_frameBufferNoDepth$_), 
            t.framebufferTexture2D(t.FRAMEBUFFER, t.COLOR_ATTACHMENT0, t.TEXTURE_2D, null, 0)), 
            this._$_renderer$_._$DeleteTexture$_(this._$_texture$_), this._$_texture$_ = null) : this._$_renderBuffer$_ && (t.bindFramebuffer(t.FRAMEBUFFER, this._$_frameBuffer$_), 
            t.framebufferRenderbuffer(t.FRAMEBUFFER, t.COLOR_ATTACHMENT0, t.RENDERBUFFER, null), 
            this._$_depth$_ && (t.bindFramebuffer(t.FRAMEBUFFER, this._$_frameBufferNoDepth$_), 
            t.framebufferRenderbuffer(t.FRAMEBUFFER, t.COLOR_ATTACHMENT0, t.RENDERBUFFER, null)), 
            t.deleteRenderbuffer(this._$_renderBuffer$_), this._$_renderBuffer$_ = null), 
            t.bindFramebuffer(t.FRAMEBUFFER, null), 2 <= this._$_renderer$_._$GetWebGLVersionNumber$_() && (t.bindFramebuffer(t.READ_FRAMEBUFFER, null), 
            t.bindFramebuffer(t.DRAW_FRAMEBUFFER, null)), t.deleteFramebuffer(this._$_frameBuffer$_), 
            this._$_depth$_ && t.deleteFramebuffer(this._$_frameBufferNoDepth$_), 
            this._$_renderer$_._$GetBatchState$_());
            s._$currentFramebuffer$_ = null, this._$_frameBuffer$_ = s._$currentFramebufferNoDepth$_ = null;
        }
        _$_CalculateProjection$_() {
            this._$_renderer$_._$CalculatePerspectiveMatrix$_(this._$_projectionMatrix$_, this._$_width$_ / this._$_height$_), 
            this._$_lastFov$_ = this._$_renderer$_._$GetFovY$_(), this._$_lastNearZ$_ = this._$_renderer$_._$GetNearZ$_(), 
            this._$_lastFarZ$_ = this._$_renderer$_._$GetFarZ$_();
        }
        _$_GetFramebuffer$_() {
            return this._$_frameBuffer$_;
        }
        _$_GetFramebufferNoDepth$_() {
            return this._$_frameBufferNoDepth$_;
        }
        _$GetRenderer$_() {
            return this._$_renderer$_;
        }
        _$GetTexture$_() {
            return this._$_texture$_;
        }
        _$GetProjectionMatrix$_() {
            return this._$_renderer$_._$GetFovY$_() === this._$_lastFov$_ && this._$_renderer$_._$GetNearZ$_() === this._$_lastNearZ$_ && this._$_renderer$_._$GetFarZ$_() === this._$_lastFarZ$_ || this._$_CalculateProjection$_(), 
            this._$_projectionMatrix$_;
        }
        _$IsLinearSampling$_() {
            return "nearest" !== this._$_sampling$_;
        }
        _$HasAlpha$_() {
            return this._$_alpha$_;
        }
        _$IsSampled$_() {
            return this._$_isSampled$_;
        }
        _$HasDepthBuffer$_() {
            return this._$_depth$_;
        }
        _$GetWidth$_() {
            return this._$_width$_;
        }
        _$GetHeight$_() {
            return this._$_height$_;
        }
        _$IsDefaultSize$_() {
            return this._$_isDefaultSize$_;
        }
        _$GetMultisampling$_() {
            return this._$_multisampling$_;
        }
        _$GetOptions$_() {
            const t = {
                _$sampling$_: this._$_sampling$_,
                alpha: this._$_alpha$_,
                _$isSampled$_: this._$_isSampled$_
            };
            return this._$_isDefaultSize$_ || (t.width = this._$_width$_, t.height = this._$_height$_), 
            t;
        }
        _$IsCompatibleWithOptions$_(t) {
            return "nearest" !== (t = Object.assign({}, vi, t))._$sampling$_ === this._$IsLinearSampling$_() && !!t.alpha === this._$HasAlpha$_() && !!t.depth === this._$HasDepthBuffer$_() && !(2 <= this._$_renderer$_._$GetWebGLVersionNumber$_() && !!t._$isSampled$_ !== this._$IsSampled$_()) && ("number" == typeof t.width || "number" == typeof t.height ? !this._$IsDefaultSize$_() && this._$GetWidth$_() === Math.floor(t.width) && this._$GetHeight$_() === Math.floor(t.height) : this._$IsDefaultSize$_());
        }
        _$_GetWebGLTexture$_() {
            return this._$_texture$_ ? this._$_texture$_._$_GetTexture$_() : null;
        }
        _$GetEstimatedMemoryUsage$_() {
            return this._$_texture$_ ? this._$_texture$_._$GetEstimatedMemoryUsage$_() : this._$_width$_ * this._$_height$_ * (this._$_alpha$_ ? 4 : 3);
        }
        static async _$DebugReadPixelsToBlob$_(t, s) {
            const i = await t._$ReadBackRenderTargetToImageData$_(s, !0);
            return Si._$ImageDataToBlob$_(i);
        }
        static _$OnContextLost$_() {
            Ci.clear();
        }
        static _$allRenderTargets$_() {
            return Ci.values();
        }
        static _$ResizeAll$_(t, s) {
            for (const i of Ci) i._$IsDefaultSize$_() && i._$_Resize$_(t, s);
        }
    };
}

{
    const m = self._$C3$_, Gi = self._$glMatrix$_, Cn = Gi._$vec3$_, vn = Gi._$mat4$_, Ii = new Set([ "aPos", "aTex", "aPoints", "matP", "matMV", "samplerFront", "samplerBack", "samplerDepth", "destStart", "destEnd", "srcStart", "srcEnd", "srcOriginStart", "srcOriginEnd", "pixelSize", "seconds", "devicePixelRatio", "layerScale", "layerAngle", "layoutStart", "layoutEnd", "color", "color2_", "pointTexStart", "pointTexEnd", "zElevation", "tileSize", "tileSpacing", "outlineThickness", "zNear", "zFar" ]);
    m._$Gfx$_._$WebGLShaderProgram$_ = class extends m._$Gfx$_._$ShaderProgramBase$_ {
        static async _$Compile$_(t, s) {
            const i = t._$GetContext$_(), e = s.src, n = s._$vertexSrc$_, h = s.name, r = i.createShader(i.FRAGMENT_SHADER), o = (i.shaderSource(r, e), 
            i.compileShader(r), i.createShader(i.VERTEX_SHADER)), a = (i.shaderSource(o, n), 
            i.compileShader(o), i.createProgram()), l = (i.attachShader(a, r), i.attachShader(a, o), 
            i.bindAttribLocation(a, 0, "aPos"), i.bindAttribLocation(a, 1, "aTex"), 
            i.bindAttribLocation(a, 2, "aPoints"), i.linkProgram(a), t._$_GetParallelShaderCompileExtension$_());
            if (l ? await t._$_WaitForObjectReady$_(() => i.getProgramParameter(a, l.COMPLETION_STATUS_KHR)) : await m._$Wait$_(5), 
            !i.getShaderParameter(r, i.COMPILE_STATUS)) {
                const c = i.getShaderInfoLog(r);
                throw i.deleteShader(r), i.deleteShader(o), i.deleteProgram(a), 
                new Error("Error compiling fragment shader: " + c);
            }
            if (!i.getShaderParameter(o, i.COMPILE_STATUS)) {
                const f = i.getShaderInfoLog(o);
                throw i.deleteShader(r), i.deleteShader(o), i.deleteProgram(a), 
                new Error("Error compiling vertex shader: " + f);
            }
            if (!i.getProgramParameter(a, i.LINK_STATUS)) {
                const d = i.getProgramInfoLog(a);
                throw i.deleteShader(r), i.deleteShader(o), i.deleteProgram(a), 
                new Error("Error linking shader program: " + d);
            }
            const u = m._$FilterUnprintableChars$_(i.getProgramInfoLog(a) || "").trim();
            return u && !m._$IsStringAllWhitespace$_(u) && console.info(`[WebGL] Shader program '${h}' compilation log: `, u), 
            i.deleteShader(r), i.deleteShader(o), a;
        }
        static async _$Create$_(t, s) {
            const i = await m._$Gfx$_._$WebGLShaderProgram$_._$Compile$_(t, s);
            return new m._$Gfx$_._$WebGLShaderProgram$_(t, i, s);
        }
        constructor(t, s, i) {
            super(t, i);
            const e = t._$GetContext$_(), n = t._$GetBatchState$_(), h = (t._$EndBatch$_(), 
            e.useProgram(s), this._$_gl$_ = e, this._$_shaderProgram$_ = s, this._$_isDeviceTransform$_ = "<default-device-transform>" === i.name, 
            e.getAttribLocation(s, "aPos")), r = e.getAttribLocation(s, "aTex"), o = (this._$_locAPoints$_ = e.getAttribLocation(s, "aPoints"), 
            -1 !== h && (e.bindBuffer(e.ARRAY_BUFFER, t._$_vertexBuffer$_), e.vertexAttribPointer(h, t._$GetNumVertexComponents$_(), e.FLOAT, !1, 0, 0), 
            e.enableVertexAttribArray(h)), -1 !== r && (e.bindBuffer(e.ARRAY_BUFFER, t._$_texcoordBuffer$_), 
            e.vertexAttribPointer(r, 2, e.FLOAT, !1, 0, 0), e.enableVertexAttribArray(r)), 
            -1 !== this._$_locAPoints$_ && (e.bindBuffer(e.ARRAY_BUFFER, t._$_pointBuffer$_), 
            e.vertexAttribPointer(this._$_locAPoints$_, 4, e.FLOAT, !1, 0, 0), e.enableVertexAttribArray(this._$_locAPoints$_)), 
            e.bindBuffer(e.ARRAY_BUFFER, null), this._$_uMatP$_ = new m._$Gfx$_._$WebGLShaderUniform$_(this, "matP", "mat4"), 
            this._$_uMatMV$_ = new m._$Gfx$_._$WebGLShaderUniform$_(this, "matMV", "mat4"), 
            this._$_uColor$_ = new m._$Gfx$_._$WebGLShaderUniform$_(this, "color", "vec4"), 
            this._$_uSamplerFront$_ = new m._$Gfx$_._$WebGLShaderUniform$_(this, "samplerFront", "sampler"), 
            this._$_uPointTexStart$_ = new m._$Gfx$_._$WebGLShaderUniform$_(this, "pointTexStart", "vec2"), 
            this._$_uPointTexEnd$_ = new m._$Gfx$_._$WebGLShaderUniform$_(this, "pointTexEnd", "vec2"), 
            this._$_uZElevation$_ = new m._$Gfx$_._$WebGLShaderUniform$_(this, "zElevation", "float"), 
            this._$_uTileSize$_ = new m._$Gfx$_._$WebGLShaderUniform$_(this, "tileSize", "vec2"), 
            this._$_uTileSpacing$_ = new m._$Gfx$_._$WebGLShaderUniform$_(this, "tileSpacing", "vec2"), 
            this._$_uColor2$_ = new m._$Gfx$_._$WebGLShaderUniform$_(this, "color2_", "vec4"), 
            this._$_uOutlineThickness$_ = new m._$Gfx$_._$WebGLShaderUniform$_(this, "outlineThickness", "float"), 
            this._$_uSamplerBack$_ = new m._$Gfx$_._$WebGLShaderUniform$_(this, "samplerBack", "sampler"), 
            this._$_uSamplerDepth$_ = new m._$Gfx$_._$WebGLShaderUniform$_(this, "samplerDepth", "sampler"), 
            this._$_uDestStart$_ = new m._$Gfx$_._$WebGLShaderUniform$_(this, "destStart", "vec2"), 
            this._$_uDestEnd$_ = new m._$Gfx$_._$WebGLShaderUniform$_(this, "destEnd", "vec2"), 
            this._$_uSrcStart$_ = new m._$Gfx$_._$WebGLShaderUniform$_(this, "srcStart", "vec2"), 
            this._$_uSrcEnd$_ = new m._$Gfx$_._$WebGLShaderUniform$_(this, "srcEnd", "vec2"), 
            this._$_uSrcOriginStart$_ = new m._$Gfx$_._$WebGLShaderUniform$_(this, "srcOriginStart", "vec2"), 
            this._$_uSrcOriginEnd$_ = new m._$Gfx$_._$WebGLShaderUniform$_(this, "srcOriginEnd", "vec2"), 
            this._$_uPixelSize$_ = new m._$Gfx$_._$WebGLShaderUniform$_(this, "pixelSize", "vec2"), 
            this._$_uSeconds$_ = new m._$Gfx$_._$WebGLShaderUniform$_(this, "seconds", "float"), 
            this._$_uDevicePixelRatio$_ = new m._$Gfx$_._$WebGLShaderUniform$_(this, "devicePixelRatio", "float"), 
            this._$_uLayerScale$_ = new m._$Gfx$_._$WebGLShaderUniform$_(this, "layerScale", "float"), 
            this._$_uLayerAngle$_ = new m._$Gfx$_._$WebGLShaderUniform$_(this, "layerAngle", "float"), 
            this._$_uLayoutStart$_ = new m._$Gfx$_._$WebGLShaderUniform$_(this, "layoutStart", "vec2"), 
            this._$_uLayoutEnd$_ = new m._$Gfx$_._$WebGLShaderUniform$_(this, "layoutEnd", "vec2"), 
            this._$_uZNear$_ = new m._$Gfx$_._$WebGLShaderUniform$_(this, "zNear", "float"), 
            this._$_uZFar$_ = new m._$Gfx$_._$WebGLShaderUniform$_(this, "zFar", "float"), 
            this._$_hasAnyOptionalUniforms$_ = !!(this._$_uPixelSize$_._$IsUsed$_() || this._$_uSeconds$_._$IsUsed$_() || this._$_uSamplerBack$_._$IsUsed$_() || this._$_uDestStart$_._$IsUsed$_() || this._$_uDestEnd$_._$IsUsed$_() || this._$_uSrcStart$_._$IsUsed$_() || this._$_uSrcEnd$_._$IsUsed$_() || this._$_uSrcOriginStart$_._$IsUsed$_() || this._$_uSrcOriginEnd$_._$IsUsed$_() || this._$_uDevicePixelRatio$_._$IsUsed$_() || this._$_uLayerScale$_._$IsUsed$_() || this._$_uLayerAngle$_._$IsUsed$_() || this._$_uLayoutStart$_._$IsUsed$_() || this._$_uLayoutEnd$_._$IsUsed$_()), 
            i.parameters || []);
            this._$_uCustomParameters$_ = [], this._$_usesAnySrcRectOrPixelSize$_ = this._$_uPixelSize$_._$IsUsed$_() || this._$_uSrcStart$_._$IsUsed$_() || this._$_uSrcEnd$_._$IsUsed$_() || this._$_uSrcOriginStart$_._$IsUsed$_() || this._$_uSrcOriginEnd$_._$IsUsed$_(), 
            this._$_hasCurrentMatP$_ = !1, this._$_hasCurrentMatMV$_ = !1, this._$_uColor$_._$Init4f$_(1, 1, 1, 1), 
            this._$_uColor2$_._$Init4f$_(1, 1, 1, 1), this._$_uSamplerFront$_._$Init1i$_(0), 
            this._$_uSamplerBack$_._$Init1i$_(1), this._$_uSamplerDepth$_._$Init1i$_(2), 
            this._$_uPointTexStart$_._$Init2f$_(0, 0), this._$_uPointTexEnd$_._$Init2f$_(1, 1), 
            this._$_uZElevation$_._$Init1f$_(0), this._$_uTileSize$_._$Init2f$_(0, 0), 
            this._$_uTileSpacing$_._$Init2f$_(0, 0), this._$_uDestStart$_._$Init2f$_(0, 0), 
            this._$_uDestEnd$_._$Init2f$_(1, 1), this._$_uSrcStart$_._$Init2f$_(0, 0), 
            this._$_uSrcEnd$_._$Init2f$_(0, 0), this._$_uSrcOriginStart$_._$Init2f$_(0, 0), 
            this._$_uSrcOriginEnd$_._$Init2f$_(0, 0), this._$_uPixelSize$_._$Init2f$_(0, 0), 
            this._$_uDevicePixelRatio$_._$Init1f$_(1), this._$_uZNear$_._$Init1f$_(t._$GetNearZ$_()), 
            this._$_uZFar$_._$Init1f$_(t._$GetFarZ$_()), this._$_uLayerScale$_._$Init1f$_(1), 
            this._$_uLayerAngle$_._$Init1f$_(0), this._$_uSeconds$_._$Init1f$_(0), 
            this._$_uLayoutStart$_._$Init2f$_(0, 0), this._$_uLayoutEnd$_._$Init2f$_(0, 0), 
            this._$_uOutlineThickness$_._$Init1f$_(1);
            for (const l of o) {
                const u = l[0], c = l[2], f = new m._$Gfx$_._$WebGLShaderUniform$_(this, u, c);
                "color" === c ? f._$Init3f$_(0, 0, 0) : f._$Init1f$_(0), this._$_uCustomParameters$_.push(f);
            }
            this._$_isDeviceTransform$_ ? this._$_UpdateDeviceTransformUniforms$_(n._$currentMatP$_) : (this._$UpdateMatP$_(n._$currentMatP$_, !0), 
            this._$UpdateMatMV$_(n._$currentMV$_, !0));
            const a = n._$currentShader$_;
            e.useProgram(a ? a._$_shaderProgram$_ : null);
        }
        _$Release$_() {
            this._$_gl$_.deleteProgram(this._$_shaderProgram$_), this._$_shaderProgram$_ = null, 
            this._$_renderer$_._$_RemoveShaderProgram$_(this), this._$_gl$_ = null, 
            super._$Release$_();
        }
        _$GetWebGLContext$_() {
            return this._$_gl$_;
        }
        _$GetShaderProgram$_() {
            return this._$_shaderProgram$_;
        }
        _$GetParameterCount$_() {
            return this._$_uCustomParameters$_.length;
        }
        _$GetParameterType$_(t) {
            return t < 0 || t >= this._$_uCustomParameters$_.length ? null : this._$_uCustomParameters$_[t]._$GetType$_();
        }
        _$AreCustomParametersAlreadySetInBatch$_(i) {
            for (let t = 0, s = i.length; t < s; ++t) if (!this._$_uCustomParameters$_[t]._$IsSetToCustomInBatch$_(i[t])) return !1;
            return !0;
        }
        _$SetCustomParametersInBatch$_(i) {
            for (let t = 0, s = i.length; t < s; ++t) this._$_uCustomParameters$_[t]._$SetBatchValueCustom$_(i[t]);
        }
        _$AreOptionalUniformsAlreadySetInBatch$_(t, s, i, e, n, h, r, o, a, l) {
            return !this._$_uSamplerBack$_._$IsUsed$_() && !(this._$_uPixelSize$_._$IsUsed$_() && !this._$_uPixelSize$_._$IsSetTo2InBatch$_(n, h) || this._$_uDestStart$_._$IsUsed$_() && !this._$_uDestStart$_._$IsSetTo2InBatch$_(t._$getLeft$_(), t._$getTop$_()) || this._$_uDestEnd$_._$IsUsed$_() && !this._$_uDestEnd$_._$IsSetTo2InBatch$_(t._$getRight$_(), t._$getBottom$_()) || this._$_uDevicePixelRatio$_._$IsUsed$_() && !this._$_uDevicePixelRatio$_._$IsSetTo1InBatch$_(r) || this._$_uLayerScale$_._$IsUsed$_() && !this._$_uLayerScale$_._$IsSetTo1InBatch$_(o) || this._$_uLayerAngle$_._$IsUsed$_() && !this._$_uLayerAngle$_._$IsSetTo1InBatch$_(a) || this._$_uSrcStart$_._$IsUsed$_() && !this._$_uSrcStart$_._$IsSetTo2InBatch$_(s._$getLeft$_(), s._$getTop$_()) || this._$_uSrcEnd$_._$IsUsed$_() && !this._$_uSrcEnd$_._$IsSetTo2InBatch$_(s._$getRight$_(), s._$getBottom$_()) || this._$_uSrcOriginStart$_._$IsUsed$_() && !this._$_uSrcOriginStart$_._$IsSetTo2InBatch$_(i._$getLeft$_(), i._$getTop$_()) || this._$_uSrcOriginEnd$_._$IsUsed$_() && !this._$_uSrcOriginEnd$_._$IsSetTo2InBatch$_(i._$getRight$_(), i._$getBottom$_()) || this._$_uLayoutStart$_._$IsUsed$_() && !this._$_uLayoutStart$_._$IsSetTo2InBatch$_(e._$getLeft$_(), e._$getTop$_()) || this._$_uLayoutEnd$_._$IsUsed$_() && !this._$_uLayoutEnd$_._$IsSetTo2InBatch$_(e._$getTop$_(), e._$getBottom$_()) || this._$_uSeconds$_._$IsUsed$_() && !this._$_uSeconds$_._$IsSetTo1InBatch$_(l));
        }
        _$SetOptionalUniformsInBatch$_(t, s, i, e, n, h, r, o, a, l) {
            this._$_uSamplerBack$_._$IsUsed$_() || (this._$_uPixelSize$_._$IsUsed$_() && this._$_uPixelSize$_._$SetBatch2$_(n, h), 
            this._$_uDestStart$_._$IsUsed$_() && this._$_uDestStart$_._$SetBatch2$_(t._$getLeft$_(), t._$getTop$_()), 
            this._$_uDestEnd$_._$IsUsed$_() && this._$_uDestEnd$_._$SetBatch2$_(t._$getRight$_(), t._$getBottom$_()), 
            this._$_uDevicePixelRatio$_._$IsUsed$_() && this._$_uDevicePixelRatio$_._$SetBatch1$_(r), 
            this._$_uLayerScale$_._$IsUsed$_() && this._$_uLayerScale$_._$SetBatch1$_(o), 
            this._$_uLayerAngle$_._$IsUsed$_() && this._$_uLayerAngle$_._$SetBatch1$_(a), 
            this._$_uSrcStart$_._$IsUsed$_() && this._$_uSrcStart$_._$SetBatch2$_(s._$getLeft$_(), s._$getTop$_()), 
            this._$_uSrcEnd$_._$IsUsed$_() && this._$_uSrcEnd$_._$SetBatch2$_(s._$getRight$_(), s._$getBottom$_()), 
            this._$_uSrcOriginStart$_._$IsUsed$_() && this._$_uSrcOriginStart$_._$SetBatch2$_(i._$getLeft$_(), i._$getTop$_()), 
            this._$_uSrcOriginEnd$_._$IsUsed$_() && this._$_uSrcOriginEnd$_._$SetBatch2$_(i._$getRight$_(), i._$getBottom$_()), 
            this._$_uLayoutStart$_._$IsUsed$_() && this._$_uLayoutStart$_._$SetBatch2$_(e._$getLeft$_(), e._$getTop$_()), 
            this._$_uLayoutEnd$_._$IsUsed$_() && this._$_uLayoutEnd$_._$SetBatch2$_(e._$getTop$_(), e._$getBottom$_()), 
            this._$_uSeconds$_._$IsUsed$_() && this._$_uSeconds$_._$SetBatch1$_(l));
        }
        _$UpdateMatP$_(t, s) {
            this._$_hasCurrentMatP$_ && !s || this._$_isDeviceTransform$_ || (this._$_uMatP$_._$IsUsed$_() && this._$_uMatP$_._$UpdateMatrix4fv$_(t), 
            this._$_hasCurrentMatP$_ = !0);
        }
        _$SetMatPStale$_() {
            this._$_hasCurrentMatP$_ = !1;
        }
        _$UpdateMatMV$_(t, s) {
            this._$_hasCurrentMatMV$_ && !s || this._$_isDeviceTransform$_ || (this._$_uMatMV$_._$IsUsed$_() && this._$_uMatMV$_._$UpdateMatrix4fv$_(t), 
            this._$_hasCurrentMatMV$_ = !0);
        }
        _$SetMatMVStale$_() {
            this._$_hasCurrentMatMV$_ = !1;
        }
        _$_UpdateDeviceTransformUniforms$_(t) {
            if (!this._$_isDeviceTransform$_) throw new Error("not device transform shader");
            this._$_uMatP$_._$UpdateMatrix4fv$_(t);
            const s = this._$_renderer$_, i = s._$GetWidth$_() / 2, e = s._$GetHeight$_() / 2, n = s._$CalculateLookAtModelView2$_(i, e, s._$GetDefaultCameraZ$_(s._$GetHeight$_()), i, e, 0, s._$GetHeight$_());
            this._$_uMatMV$_._$UpdateMatrix4fv$_(n);
        }
        _$UpdateColor$_(t) {
            this._$_uColor$_._$IsUsed$_() && this._$_uColor$_._$Update4f$_(t[0], t[1], t[2], t[3]);
        }
        static _$GetReservedUniformNames$_() {
            return Ii;
        }
        static _$GetDefaultVertexShaderSource$_(t) {
            const s = t ? "highmedp" : "mediump";
            return [ "#ifdef GL_FRAGMENT_PRECISION_HIGH", "#define highmedp highp", "#else", "#define highmedp mediump", "#endif", "attribute highp vec3 aPos;", `attribute ${s} vec2 aTex;`, `varying ${s} vec2 vTex;`, "uniform highp mat4 matP;", "uniform highp mat4 matMV;", "void main(void) {", `	gl_Position = matP * matMV * vec4(aPos, 1.0);`, `	vTex = aTex;`, "}" ].join("\n");
        }
        static _$GetDefaultVertexShaderSource_WebGL2$_(t) {
            const s = t ? "highp" : "mediump";
            return [ "#version 300 es", "in highp vec3 aPos;", `in ${s} vec2 aTex;`, `out ${s} vec2 vTex;`, "uniform highp mat4 matP;", "uniform highp mat4 matMV;", "void main(void) {", `	gl_Position = matP * matMV * vec4(aPos, 1.0);`, `	vTex = aTex;`, "}" ].join("\n");
        }
        static _$GetTextureFillFragmentShaderSource_WebGL1_NoFragDepth$_() {
            return [ "varying mediump vec2 vTex;", "uniform lowp vec4 color;", "uniform lowp sampler2D samplerFront;", "void main(void) {", "\tgl_FragColor = texture2D(samplerFront, vTex) * color;", "}" ].join("\n");
        }
        static _$GetTextureFillFragmentShaderSource_WebGL1_FragDepthEXT$_() {
            return [ "#extension GL_EXT_frag_depth : enable", "varying mediump vec2 vTex;", "uniform lowp vec4 color;", "uniform lowp sampler2D samplerFront;", "void main(void) {", "\tgl_FragColor = texture2D(samplerFront, vTex) * color;", "\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);", "}" ].join("\n");
        }
        static _$GetTextureFillFragmentShaderSource_WebGL2$_() {
            return [ "#version 300 es", "in mediump vec2 vTex;", "out lowp vec4 outColor;", "uniform lowp vec4 color;", "uniform lowp sampler2D samplerFront;", "void main(void) {", "\toutColor = texture(samplerFront, vTex) * color;", "\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);", "}" ].join("\n");
        }
        static _$GetTilemapFragmentShaderSource_WebGL1_NoFragDepth$_() {
            return [ "#ifdef GL_FRAGMENT_PRECISION_HIGH", "#define highmedp highp", "#else", "#define highmedp mediump", "#endif", "varying highmedp vec2 vTex;", "uniform lowp vec4 color;", "uniform lowp sampler2D samplerFront;", "uniform highmedp vec2 srcStart;", "uniform highmedp vec2 pixelSize;", "uniform highmedp vec2 tileSize;", "uniform highmedp vec2 tileSpacing;", "void main(void) {", "\thighmedp vec2 tile = floor(vTex);", "\thighmedp vec2 tex = fract(vTex);", "\thighmedp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);", "\thighmedp vec2 lowerBound = tileOrigin + pixelSize / 2.0;", "\thighmedp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;", "\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;", "}" ].join("\n");
        }
        static _$GetTilemapFragmentShaderSource_WebGL1_FragDepthEXT$_() {
            return [ "#extension GL_EXT_frag_depth : enable", "#ifdef GL_FRAGMENT_PRECISION_HIGH", "#define highmedp highp", "#else", "#define highmedp mediump", "#endif", "varying highmedp vec2 vTex;", "uniform lowp vec4 color;", "uniform lowp sampler2D samplerFront;", "uniform highmedp vec2 srcStart;", "uniform highmedp vec2 pixelSize;", "uniform highmedp vec2 tileSize;", "uniform highmedp vec2 tileSpacing;", "void main(void) {", "\thighmedp vec2 tile = floor(vTex);", "\thighmedp vec2 tex = fract(vTex);", "\thighmedp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);", "\thighmedp vec2 lowerBound = tileOrigin + pixelSize / 2.0;", "\thighmedp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;", "\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;", "\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);", "}" ].join("\n");
        }
        static _$GetTilemapFragmentShaderSource_WebGL2$_() {
            return [ "#version 300 es", "in highp vec2 vTex;", "out lowp vec4 outColor;", "uniform lowp vec4 color;", "uniform lowp sampler2D samplerFront;", "uniform highp vec2 srcStart;", "uniform highp vec2 pixelSize;", "uniform highp vec2 tileSize;", "uniform highp vec2 tileSpacing;", "void main(void) {", "\thighp vec2 tile = floor(vTex);", "\thighp vec2 tex = fract(vTex);", "\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);", "\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;", "\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;", "\toutColor = texture(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;", "\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);", "}" ].join("\n");
        }
        static _$GetTileRandomizationFragmentShaderSource$_(t, s, i) {
            let e = "";
            return 2 <= t ? e = "#version 300 es\n" : (s && (e = "#extension GL_EXT_frag_depth : enable\n"), 
            i && (e += "#extension GL_EXT_shader_texture_lod : enable\n#extension GL_OES_standard_derivatives : enable\n")), 
            e + `
#ifdef GL_FRAGMENT_PRECISION_HIGH
#define highmedp highp
#else
#define highmedp mediump
#endif
precision highmedp float;
${2 <= t ? "in" : "varying"} vec2 vTex;
${2 <= t ? "out lowp vec4 outColor;" : ""}
uniform lowp vec4 color;
uniform lowp sampler2D samplerFront;
uniform vec2 pixelSize;

uniform vec2 tileSize;
uniform vec2 tileSpacing;
uniform float outlineThickness;

const float PI = 3.1415926;

lowp vec4 cospVec4(lowp vec4 a, lowp vec4 b, float x)
{
	return (a + b + (a - b) * cos(x * PI)) / 2.0;
}

vec3 randVec3(vec2 seed)
{
	return vec3(fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(12.9898,78.233))) * 43758.5453),
				fract(sin(dot(seed.yx + vec2(0.1, 0.1), vec2(12.9898,-78.233))) * 43758.5453),
				fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(-12.9898,-78.233))) * 43758.5453));
}

lowp vec4 sampleTile(vec2 tile, vec2 uv, vec2 ddx, vec2 ddy)
{
	vec2 posRandom = tileSize;
	float angleRandom = outlineThickness;
	
	vec3 rand = (randVec3(floor(tile + 0.5)) - 0.5) * 2.0;
	
	float angle = angleRandom * rand.z * PI;
	float sin_a = sin(angle);
	float cos_a = cos(angle);
	float aspect = pixelSize.x / pixelSize.y;

	vec2 mid = tile + vec2(0.5, 0.5);
	vec2 dp = uv - mid;
	dp.x /= aspect;
	vec2 r = vec2(dp.x * cos_a - dp.y * sin_a,
				  dp.y * cos_a + dp.x * sin_a);
	r.x *= aspect;

	vec2 p = mid + r + (posRandom * rand.xy / 2.0);
	
	${2 <= t ? "return textureGrad(samplerFront, p, ddx, ddy);" : ""}
	${t < 2 && i ? "return texture2DGradEXT(samplerFront, p, ddx, ddy);" : ""}
	${t < 2 && !i ? "return texture2D(samplerFront, p);" : ""}
}

void main(void) {
	
	${t < 2 ? "lowp vec4 outColor;" : ""}
	
	float blendMarginX = tileSpacing.x;
	float blendMarginY = tileSpacing.y;
	
	vec2 tile = floor(vTex);
	vec2 tex = fract(vTex);
	vec2 ddx = ${2 <= t || i ? "dFdx(vTex)" : "vec2(0.0, 0.0)"};
	vec2 ddy = ${2 <= t || i ? "dFdy(vTex)" : "vec2(0.0, 0.0)"};
	
	vec4 curTile = sampleTile(tile, vTex, ddx, ddy);
	
	bool inLeftMargin = (tex.x < blendMarginX);
	bool inRightMargin = (tex.x > 1.0 - blendMarginX);
	bool inTopMargin = (tex.y < blendMarginY);
	bool inBottomMargin = (tex.y > 1.0 - blendMarginY);
	
	if (inLeftMargin)
	{
		lowp vec4 leftTile = sampleTile(tile + vec2(-1.0, 0.0), vTex, ddx, ddy);
		float leftMix = (tex.x / (blendMarginX * 2.0)) + 0.5;
		lowp vec4 leftMixedTile = cospVec4(leftTile, curTile, leftMix);
		
		if (inTopMargin)
		{
			lowp vec4 topTile =     sampleTile(tile + vec2(0.0,  -1.0), vTex, ddx, ddy);
			lowp vec4 topLeftTile = sampleTile(tile + vec2(-1.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topLeftMixedTile = cospVec4(topLeftTile, topTile, leftMix);
			
			outColor = cospVec4(topLeftMixedTile, leftMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
		}
		else if (inBottomMargin)
		{
			lowp vec4 bottomTile =     sampleTile(tile + vec2(0.0,  1.0), vTex, ddx, ddy);
			lowp vec4 bottomLeftTile = sampleTile(tile + vec2(-1.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomLeftMixedTile = cospVec4(bottomLeftTile, bottomTile, leftMix);
			
			outColor = cospVec4(leftMixedTile, bottomLeftMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
		}
		else
		{
			outColor = leftMixedTile;
		}
	}
	else if (inRightMargin)
	{
		lowp vec4 rightTile = sampleTile(tile + vec2(1.0, 0.0), vTex, ddx, ddy);
		float rightMix = (tex.x - (1.0 - blendMarginX)) / (blendMarginX * 2.0);
		lowp vec4 rightMixedTile = cospVec4(curTile, rightTile, rightMix);
		
		if (inTopMargin)
		{
			lowp vec4 topTile =      sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topRightTile = sampleTile(tile + vec2(1.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topRightMixedTile = cospVec4(topTile, topRightTile, rightMix);
			
			outColor = cospVec4(topRightMixedTile, rightMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
		}
		else if (inBottomMargin)
		{
			lowp vec4 bottomTile =      sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomRightTile = sampleTile(tile + vec2(1.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomRightMixedTile = cospVec4(bottomTile, bottomRightTile, rightMix);
			
			outColor = cospVec4(rightMixedTile, bottomRightMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
		}
		else
		{
			outColor = rightMixedTile;
		}
	}
	else if (inTopMargin)
	{
		lowp vec4 topTile = sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);
		outColor = cospVec4(topTile, curTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
	}
	else if (inBottomMargin)
	{
		lowp vec4 bottomTile = sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);
		outColor = cospVec4(curTile, bottomTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
	}
	else
	{
		outColor = curTile;
	}
	
	outColor *= color;
	${t < 2 ? "gl_FragColor = outColor;" : ""}
	${2 <= t ? "gl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);" : ""}
	${t < 2 && s ? "gl_FragDepthEXT = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);" : ""}
}
`;
        }
        static _$GetPointVertexShaderSource_WebGL1$_() {
            return [ "attribute vec4 aPoints;", "varying float pointOpacity;", "uniform float zElevation;", "uniform mat4 matP;", "uniform mat4 matMV;", "void main(void) {", "\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);", "\tgl_PointSize = aPoints.z;", "\tpointOpacity = aPoints.w;", "}" ].join("\n");
        }
        static _$GetPointVertexShaderSource_WebGL2$_() {
            return [ "#version 300 es", "in vec4 aPoints;", "out float pointOpacity;", "uniform float zElevation;", "uniform mat4 matP;", "uniform mat4 matMV;", "void main(void) {", "\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);", "\tgl_PointSize = aPoints.z;", "\tpointOpacity = aPoints.w;", "}" ].join("\n");
        }
        static _$GetPointFragmentShaderSource_WebGL1_NoFragDepth$_() {
            return [ "uniform lowp sampler2D samplerFront;", "varying lowp float pointOpacity;", "uniform mediump vec2 pointTexStart;", "uniform mediump vec2 pointTexEnd;", "uniform lowp vec4 color;", "void main(void) {", "\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);", "\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);", "\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));", "\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;", "}" ].join("\n");
        }
        static _$GetPointFragmentShaderSource_WebGL1_FragDepthEXT$_() {
            return [ "#extension GL_EXT_frag_depth : enable", "uniform lowp sampler2D samplerFront;", "varying lowp float pointOpacity;", "uniform mediump vec2 pointTexStart;", "uniform mediump vec2 pointTexEnd;", "uniform lowp vec4 color;", "void main(void) {", "\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);", "\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);", "\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));", "\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;", "\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);", "}" ].join("\n");
        }
        static _$GetPointFragmentShaderSource_WebGL2$_() {
            return [ "#version 300 es", "uniform lowp sampler2D samplerFront;", "in lowp float pointOpacity;", "uniform mediump vec2 pointTexStart;", "uniform mediump vec2 pointTexEnd;", "uniform lowp vec4 color;", "out lowp vec4 outColor;", "void main(void) {", "\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);", "\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);", "\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));", "\toutColor = texture(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;", "\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);", "}" ].join("\n");
        }
        static _$GetColorFillFragmentShaderSource$_() {
            return [ "uniform lowp vec4 color;", "void main(void) {", "\tgl_FragColor = color;", "}" ].join("\n");
        }
        static _$GetLinearGradientFillFragmentShaderSource$_() {
            return [ "precision lowp float;", "varying mediump vec2 vTex;", "uniform vec4 color;", "uniform vec4 color2_;", "vec3 fromLinear(vec3 linearRGB)", "{", "\tbvec3 cutoff = lessThan(linearRGB, vec3(0.0031308));", "\tvec3 higher = vec3(1.055) * pow(abs(linearRGB), vec3(1.0/2.4)) - vec3(0.055);", "\tvec3 lower = linearRGB * vec3(12.92);", "\treturn mix(higher, lower, vec3(cutoff));", "}", "vec3 toLinear(vec3 sRGB)", "{", "\tbvec3 cutoff = lessThan(sRGB, vec3(0.04045));", "\tvec3 higher = pow(abs((sRGB + vec3(0.055))/vec3(1.055)), vec3(2.4));", "\tvec3 lower = sRGB/vec3(12.92);", "\treturn mix(higher, lower, vec3(cutoff));", "}", "void main(void) {", "\tvec3 linearGrad = mix(toLinear(color.rgb), toLinear(color2_.rgb), vTex.x);", "\tfloat a = mix(color.a, color2_.a, vTex.x);", "\tgl_FragColor = vec4(fromLinear(linearGrad) * a, a);", "}" ].join("\n");
        }
        static _$GetPenumbraFillFragmentShaderSource$_() {
            return [ "#ifdef GL_FRAGMENT_PRECISION_HIGH", "#define highmedp highp", "#else", "#define highmedp mediump", "#endif", "precision lowp float;", "varying highmedp vec2 vTex;", "uniform vec4 color;", "void main(void) {", `	highmedp float grad = vTex.x / (1.0 - vTex.y);`, `	gl_FragColor = color * (1.0 - (cos(grad * 3.141592653589793) + 1.0) / 2.0);`, "}" ].join("\n");
        }
        static _$GetSmoothLineFillFragmentShaderSource$_() {
            return [ "varying mediump vec2 vTex;", "uniform lowp vec4 color;", "void main(void) {", "\tlowp float f = 1.0 - abs(vTex.y - 0.5) * 2.0;", "\tgl_FragColor = color * f;", "}" ].join("\n");
        }
        static _$GetHardEllipseFillFragmentShaderSource$_() {
            return [ "varying mediump vec2 vTex;", "uniform lowp vec4 color;", "void main(void) {", "\tmediump vec2 diff = vTex - vec2(0.5, 0.5);", "\tmediump vec2 diffSq = diff * diff;", "\tmediump float f = step(diffSq.x + diffSq.y, 0.25);", "\tgl_FragColor = color * f;", "}" ].join("\n");
        }
        static _$GetHardEllipseOutlineFragmentShaderSource$_() {
            return [ "varying mediump vec2 vTex;", "uniform lowp vec4 color;", "uniform mediump vec2 pixelSize;", "uniform mediump float outlineThickness;", "void main(void) {", "\tmediump vec2 diff = vTex - vec2(0.5, 0.5);", "\tmediump vec2 diffSq = diff * diff;", "\tmediump float distSq = diffSq.x + diffSq.y;", "\tmediump vec2 norm = normalize(diff);", "\tmediump vec2 halfNorm = norm * 0.5;", "\tmediump float innerF = step(distSq, 0.25);", "\tmediump vec2 innerEdge = halfNorm - pixelSize * norm * outlineThickness;", "\tmediump vec2 innerEdgeSq = innerEdge * innerEdge;", "\tmediump float outerF = step(innerEdgeSq.x + innerEdgeSq.y, distSq);", "\tgl_FragColor = color * innerF * outerF;", "}" ].join("\n");
        }
        static _$GetSmoothEllipseFillFragmentShaderSource$_() {
            return [ "varying mediump vec2 vTex;", "uniform lowp vec4 color;", "uniform mediump vec2 pixelSize;", "void main(void) {", "\tmediump vec2 diff = vTex - vec2(0.5, 0.5);", "\tmediump vec2 diffSq = diff * diff;", "\tmediump vec2 norm = normalize(diff);", "\tmediump vec2 halfNorm = norm * 0.5;", "\tmediump vec2 halfNormSq = halfNorm * halfNorm;", "\tmediump vec2 innerEdge = halfNorm - pixelSize * norm;", "\tmediump vec2 innerEdgeSq = innerEdge * innerEdge;", "\tmediump float f = smoothstep(halfNormSq.x + halfNormSq.y, innerEdgeSq.x + innerEdgeSq.y, diffSq.x + diffSq.y);", "\tgl_FragColor = color * f;", "}" ].join("\n");
        }
        static _$GetSmoothEllipseOutlineFragmentShaderSource$_() {
            return [ "varying mediump vec2 vTex;", "uniform lowp vec4 color;", "uniform mediump vec2 pixelSize;", "uniform mediump float outlineThickness;", "void main(void) {", "\tmediump vec2 diff = vTex - vec2(0.5, 0.5);", "\tmediump vec2 diffSq = diff * diff;", "\tmediump float distSq = diffSq.x + diffSq.y;", "\tmediump vec2 norm = normalize(diff);", "\tmediump vec2 halfNorm = norm * 0.5;", "\tmediump vec2 halfNormSq = halfNorm * halfNorm;", "\tmediump vec2 pxNorm = pixelSize * norm;", "\tmediump vec2 innerEdge1 = halfNorm - pxNorm;", "\tmediump vec2 innerEdge1Sq = innerEdge1 * innerEdge1;", "\tmediump float innerF = smoothstep(halfNormSq.x + halfNormSq.y, innerEdge1Sq.x + innerEdge1Sq.y, distSq);", "\tmediump vec2 innerEdge2 = halfNorm - pxNorm * outlineThickness;", "\tmediump vec2 innerEdge2Sq = innerEdge2 * innerEdge2;", "\tmediump vec2 innerEdge3 = halfNorm - pxNorm * (outlineThickness + 1.0);", "\tmediump vec2 innerEdge3Sq = innerEdge3 * innerEdge3;", "\tmediump float outerF = smoothstep(innerEdge3Sq.x + innerEdge3Sq.y, innerEdge2Sq.x + innerEdge2Sq.y, distSq);", "\tgl_FragColor = color * innerF * outerF;", "}" ].join("\n");
        }
    };
}

{
    const _i = self._$C3$_, Ei = self._$glMatrix$_, vn = Ei._$mat4$_, Ni = new Map([ [ "float", 1 ], [ "percent", 1 ], [ "sampler", 1 ], [ "vec2", 2 ], [ "vec3", 3 ], [ "color", 3 ], [ "vec4", 4 ], [ "mat4", 16 ] ]);
    _i._$Gfx$_._$WebGLShaderUniform$_ = class {
        constructor(t, s, i) {
            if (!Ni.has(i)) throw new Error("invalid uniform type");
            this._$_owner$_ = t, this._$_gl$_ = this._$_owner$_._$GetWebGLContext$_(), 
            this._$_name$_ = s, this._$_type$_ = i, this._$_isColorType$_ = "color" === this._$_type$_, 
            this._$_location$_ = this._$_gl$_.getUniformLocation(this._$_owner$_._$GetShaderProgram$_(), s), 
            this._$_isUsed$_ = !!this._$_location$_;
            const e = Ni.get(i);
            this._$_lastValue$_ = new Float32Array(e), this._$_lastBatchValue$_ = new Float32Array(e);
        }
        _$Release$_() {
            this._$_owner$_ = null, this._$_gl$_ = null, this._$_location$_ = null;
        }
        _$IsUsed$_() {
            return this._$_isUsed$_;
        }
        _$GetType$_() {
            return this._$_type$_;
        }
        _$IsColorType$_() {
            return this._$_isColorType$_;
        }
        _$Init1f$_(t) {
            this._$IsUsed$_() && (this._$_lastValue$_[0] = t, this._$_lastBatchValue$_.set(this._$_lastValue$_), 
            this._$_gl$_.uniform1f(this._$_location$_, t));
        }
        _$Init1i$_(t) {
            this._$IsUsed$_() && (this._$_lastValue$_[0] = t, this._$_lastBatchValue$_.set(this._$_lastValue$_), 
            this._$_gl$_.uniform1i(this._$_location$_, t));
        }
        _$Init2f$_(t, s) {
            this._$IsUsed$_() && (this._$_lastValue$_[0] = t, this._$_lastValue$_[1] = s, 
            this._$_lastBatchValue$_.set(this._$_lastValue$_), this._$_gl$_.uniform2f(this._$_location$_, t, s));
        }
        _$Init3f$_(t, s, i) {
            this._$IsUsed$_() && (this._$_lastValue$_[0] = t, this._$_lastValue$_[1] = s, 
            this._$_lastValue$_[2] = i, this._$_lastBatchValue$_.set(this._$_lastValue$_), 
            this._$_gl$_.uniform3f(this._$_location$_, t, s, i));
        }
        _$Init4f$_(t, s, i, e) {
            this._$IsUsed$_() && (this._$_lastValue$_[0] = t, this._$_lastValue$_[1] = s, 
            this._$_lastValue$_[2] = i, this._$_lastValue$_[3] = e, this._$_lastBatchValue$_.set(this._$_lastValue$_), 
            this._$_gl$_.uniform4f(this._$_location$_, t, s, i, e));
        }
        _$Update1f$_(t) {
            t = Math.fround(t);
            const s = this._$_lastValue$_;
            s[0] !== t && (s[0] = t, this._$_gl$_.uniform1f(this._$_location$_, t));
        }
        _$Update1i$_(t) {
            const s = this._$_lastValue$_;
            s[0] !== t && this._$_gl$_.uniform1i(this._$_location$_, s[0] = t);
        }
        _$Update2f$_(t, s) {
            t = Math.fround(t), s = Math.fround(s);
            const i = this._$_lastValue$_;
            i[0] === t && i[1] === s || (i[0] = t, i[1] = s, this._$_gl$_.uniform2f(this._$_location$_, t, s));
        }
        _$Update3f$_(t, s, i) {
            t = Math.fround(t), s = Math.fround(s), i = Math.fround(i);
            const e = this._$_lastValue$_;
            e[0] === t && e[1] === s && e[2] === i || (e[0] = t, e[1] = s, e[2] = i, 
            this._$_gl$_.uniform3f(this._$_location$_, t, s, i));
        }
        _$Update4f$_(t, s, i, e) {
            t = Math.fround(t), s = Math.fround(s), i = Math.fround(i), e = Math.fround(e);
            const n = this._$_lastValue$_;
            n[0] === t && n[1] === s && n[2] === i && n[3] === e || (n[0] = t, n[1] = s, 
            n[2] = i, n[3] = e, this._$_gl$_.uniform4f(this._$_location$_, t, s, i, e));
        }
        _$UpdateMatrix4fv$_(t) {
            const s = this._$_lastValue$_;
            vn._$exactEquals$_(s, t) || (_i._$typedArraySet16$_(s, t, 0), this._$_gl$_.uniformMatrix4fv(this._$_location$_, !1, t));
        }
        _$IsSetToCustomInBatch$_(t) {
            const s = this._$_lastBatchValue$_;
            return this._$IsColorType$_() ? s[0] === Math.fround(t._$getR$_()) && s[1] === Math.fround(t._$getG$_()) && s[2] === Math.fround(t._$getB$_()) : s[0] === Math.fround(t);
        }
        _$SetBatchValueCustom$_(t) {
            const s = this._$_lastBatchValue$_;
            this._$IsColorType$_() ? (s[0] = t._$getR$_(), s[1] = t._$getG$_(), 
            s[2] = t._$getB$_()) : s[0] = t;
        }
        _$IsSetTo1InBatch$_(t) {
            return this._$_lastBatchValue$_[0] === Math.fround(t);
        }
        _$IsSetTo2InBatch$_(t, s) {
            const i = this._$_lastBatchValue$_;
            return i[0] === Math.fround(t) && i[1] === Math.fround(s);
        }
        _$SetBatch1$_(t) {
            this._$_lastBatchValue$_[0] = t;
        }
        _$SetBatch2$_(t, s) {
            const i = this._$_lastBatchValue$_;
            i[0] = t, i[1] = s;
        }
    };
}

{
    const Di = self._$C3$_, Ai = self._$glMatrix$_, Wn = Ai._$vec4$_, vn = Ai._$mat4$_;
    Di._$Gfx$_._$BatchState$_ = class {
        constructor(t) {
            this.renderer = t, this._$currentMV$_ = vn.create(), this._$currentMatP$_ = vn.create(), 
            this._$currentFramebuffer$_ = null, this._$currentFramebufferNoDepth$_ = null, 
            this._$isDepthSamplingEnabled$_ = !1, this._$currentColor$_ = Wn._$fromValues$_(1, 1, 1, 1), 
            this._$currentShader$_ = null, this._$pointTexCoords$_ = new Di.Rect(), 
            this.clearColor = Di._$New$_(Di._$Color$_, 0, 0, 0, 0);
        }
    }, Di._$Gfx$_._$WebGLBatchJob$_ = class {
        constructor(t) {
            const s = new ArrayBuffer(96);
            this._$_type$_ = 0, this._$_batchState$_ = t, this._$_gl$_ = t.renderer._$GetContext$_(), 
            this._$_startIndex$_ = 0, this._$_indexCount$_ = 0, this._$_texParam$_ = null, 
            this._$_mat4param$_ = new Float32Array(s, 0, 16), this._$_colorParam$_ = new Float32Array(s, 64, 4), 
            this._$_srcOriginRect$_ = new Float32Array(s, 80, 4), this._$_shaderParams$_ = [];
        }
        _$InitQuad$_(t, s) {
            this._$_type$_ = 1, this._$_startIndex$_ = t, this._$_indexCount$_ = s;
        }
        _$DoQuad$_() {
            const t = this._$_gl$_;
            t.drawElements(t.TRIANGLES, this._$_indexCount$_, t.UNSIGNED_SHORT, this._$_startIndex$_);
        }
        _$InitSetTexture$_(t) {
            this._$_type$_ = 2, this._$_texParam$_ = t;
        }
        _$DoSetTexture$_() {
            const t = this._$_gl$_, s = this._$_texParam$_;
            t.bindTexture(t.TEXTURE_2D, s ? s._$_GetTexture$_() : null);
        }
        _$InitSetColor$_(t) {
            this._$_type$_ = 3, t._$writeToTypedArray$_(this._$_colorParam$_, 0);
        }
        _$DoSetColor$_() {
            const t = this._$_colorParam$_, s = this._$_batchState$_;
            Wn._$copy$_(s._$currentColor$_, t), s._$currentShader$_._$UpdateColor$_(t);
        }
        _$InitSetGradientColor$_(t) {
            this._$_type$_ = 21, t._$writeToTypedArray$_(this._$_colorParam$_, 0);
        }
        _$DoSetGradientColor$_() {
            const t = this._$_colorParam$_, s = this._$_batchState$_._$currentShader$_;
            s._$_uColor2$_._$IsUsed$_() && s._$_uColor2$_._$Update4f$_(t[0], t[1], t[2], t[3]);
        }
        _$InitSetBlend$_(t, s) {
            this._$_type$_ = 4, this._$_startIndex$_ = t, this._$_indexCount$_ = s;
        }
        _$DoSetBlend$_() {
            this._$_gl$_.blendFunc(this._$_startIndex$_, this._$_indexCount$_);
        }
        _$InitSetViewport$_(t, s, i, e) {
            this._$_type$_ = 5;
            const n = this._$_colorParam$_;
            n[0] = t, n[1] = s, n[2] = i, n[3] = e;
        }
        _$DoSetViewport$_() {
            const t = this._$_colorParam$_;
            this._$_gl$_.viewport(t[0], t[1], t[2], t[3]);
        }
        _$InitSetProjection$_(t) {
            this._$_type$_ = 6, vn._$copy$_(this._$_mat4param$_, t);
        }
        _$DoSetProjection$_() {
            const t = this._$_batchState$_, i = t.renderer._$_allShaderPrograms$_, e = t._$currentShader$_, n = this._$_mat4param$_;
            for (let t = 0, s = i.length; t < s; ++t) {
                const h = i[t];
                h === e ? h._$UpdateMatP$_(n, !0) : h._$SetMatPStale$_();
            }
            vn._$copy$_(t._$currentMatP$_, n);
        }
        _$InitSetModelView$_(t) {
            this._$_type$_ = 7, vn._$copy$_(this._$_mat4param$_, t);
        }
        _$DoSetModelView$_() {
            const t = this._$_batchState$_, i = t.renderer._$_allShaderPrograms$_, e = t._$currentShader$_, n = this._$_mat4param$_;
            for (let t = 0, s = i.length; t < s; ++t) {
                const h = i[t];
                h === e ? h._$UpdateMatMV$_(n, !0) : h._$SetMatMVStale$_();
            }
            vn._$copy$_(t._$currentMV$_, n);
        }
        _$InitSetRenderTarget$_(t) {
            this._$_type$_ = 8, this._$_texParam$_ = t;
        }
        _$DoSetRenderTarget$_() {
            const t = this._$_gl$_, s = this._$_texParam$_, i = this._$_batchState$_;
            s ? (i._$currentFramebuffer$_ = s._$_GetFramebuffer$_(), i._$currentFramebufferNoDepth$_ = s._$_GetFramebufferNoDepth$_(), 
            i._$isDepthSamplingEnabled$_ && i._$currentFramebufferNoDepth$_ ? t.bindFramebuffer(t.FRAMEBUFFER, i._$currentFramebufferNoDepth$_) : t.bindFramebuffer(t.FRAMEBUFFER, i._$currentFramebuffer$_)) : (i._$currentFramebuffer$_ = null, 
            i._$currentFramebufferNoDepth$_ = null, t.bindFramebuffer(t.FRAMEBUFFER, null));
        }
        _$InitClearSurface$_(t) {
            this._$_type$_ = 9, t._$writeToTypedArray$_(this._$_mat4param$_, 0);
        }
        _$InitClearSurface2$_(t, s, i, e) {
            this._$_type$_ = 9;
            const n = this._$_mat4param$_;
            n[0] = t, n[1] = s, n[2] = i, n[3] = e;
        }
        _$DoClearSurface$_() {
            const t = this._$_gl$_, s = this._$_mat4param$_, i = this._$_batchState$_, e = i.clearColor, n = s[0], h = s[1], r = s[2], o = s[3];
            e._$equalsRgba$_(n, h, r, o) || (t.clearColor(n, h, r, o), e._$setRgba$_(n, h, r, o)), 
            t.clear(t.COLOR_BUFFER_BIT);
        }
        _$InitSetPointTexCoords$_(t) {
            this._$_type$_ = 15, t._$writeToTypedArray$_(this._$_mat4param$_, 0);
        }
        _$DoSetPointTextureCoords$_() {
            const t = this._$_mat4param$_;
            this._$_batchState$_._$pointTexCoords$_.set(t[0], t[1], t[2], t[3]);
        }
        _$InitPoints$_(t, s) {
            this._$_type$_ = 10, this._$_startIndex$_ = t, this._$_indexCount$_ = 1, 
            this._$_mat4param$_[0] = s;
        }
        _$DoPoints$_() {
            const t = this._$_gl$_, s = this._$_batchState$_, i = s.renderer, e = i._$_spPoints$_, n = (t.useProgram(e._$_shaderProgram$_), 
            e._$UpdateMatP$_(s._$currentMatP$_, !1), e._$UpdateMatMV$_(s._$currentMV$_, !1), 
            s._$pointTexCoords$_), h = (e._$_uPointTexStart$_._$IsUsed$_() && e._$_uPointTexStart$_._$Update2f$_(n._$getLeft$_(), n._$getTop$_()), 
            e._$_uPointTexEnd$_._$IsUsed$_() && e._$_uPointTexEnd$_._$Update2f$_(n._$getRight$_(), n._$getBottom$_()), 
            this._$_mat4param$_[0]);
            if (e._$_uZElevation$_._$IsUsed$_() && e._$_uZElevation$_._$Update1f$_(h), 
            e._$_uColor$_._$IsUsed$_()) {
                const r = s._$currentColor$_;
                e._$_uColor$_._$Update4f$_(r[0], r[1], r[2], r[3]);
            }
            t.drawArrays(t.POINTS, this._$_startIndex$_ / 4, this._$_indexCount$_), 
            t.useProgram(s._$currentShader$_._$_shaderProgram$_);
        }
        _$InitSetProgram$_(t) {
            this._$_type$_ = 11, this._$_texParam$_ = t;
        }
        _$DoSetProgram$_() {
            const t = this._$_gl$_, s = this._$_batchState$_, i = this._$_texParam$_;
            if (s._$currentShader$_ = i, t.useProgram(i._$_shaderProgram$_), i._$UpdateMatP$_(s._$currentMatP$_, !1), 
            i._$UpdateMatMV$_(s._$currentMV$_, !1), i._$_uColor$_._$IsUsed$_()) {
                const e = s._$currentColor$_;
                i._$_uColor$_._$Update4f$_(e[0], e[1], e[2], e[3]);
            }
        }
        _$InitSetProgramParameters$_() {
            this._$_type$_ = 12;
        }
        _$DoSetProgramParameters$_() {
            const t = this._$_batchState$_._$currentShader$_, s = this._$_gl$_, i = this._$_mat4param$_, e = this._$_colorParam$_, n = this._$_srcOriginRect$_;
            if (t._$_uSamplerBack$_._$IsUsed$_()) {
                const h = this._$_batchState$_.renderer, r = this._$_texParam$_;
                h._$_lastTexture1$_ !== r && (s.activeTexture(s.TEXTURE1), s.bindTexture(s.TEXTURE_2D, r ? r._$_GetTexture$_() : null), 
                h._$_lastTexture1$_ = r, s.activeTexture(s.TEXTURE0));
            }
            t._$_uPixelSize$_._$IsUsed$_() && t._$_uPixelSize$_._$Update2f$_(i[0], i[1]), 
            t._$_uDestStart$_._$IsUsed$_() && t._$_uDestStart$_._$Update2f$_(i[2], i[3]), 
            t._$_uDestEnd$_._$IsUsed$_() && t._$_uDestEnd$_._$Update2f$_(i[4], i[5]), 
            t._$_uDevicePixelRatio$_._$IsUsed$_() && t._$_uDevicePixelRatio$_._$Update1f$_(this._$_indexCount$_), 
            t._$_uLayerScale$_._$IsUsed$_() && t._$_uLayerScale$_._$Update1f$_(i[6]), 
            t._$_uLayerAngle$_._$IsUsed$_() && t._$_uLayerAngle$_._$Update1f$_(i[7]), 
            t._$_uSrcStart$_._$IsUsed$_() && t._$_uSrcStart$_._$Update2f$_(i[12], i[13]), 
            t._$_uSrcEnd$_._$IsUsed$_() && t._$_uSrcEnd$_._$Update2f$_(i[14], i[15]), 
            t._$_uSrcOriginStart$_._$IsUsed$_() && t._$_uSrcOriginStart$_._$Update2f$_(n[0], n[1]), 
            t._$_uSrcOriginEnd$_._$IsUsed$_() && t._$_uSrcOriginEnd$_._$Update2f$_(n[2], n[3]), 
            t._$_uLayoutStart$_._$IsUsed$_() && t._$_uLayoutStart$_._$Update2f$_(e[0], e[1]), 
            t._$_uLayoutEnd$_._$IsUsed$_() && t._$_uLayoutEnd$_._$Update2f$_(e[2], e[3]), 
            t._$_uSeconds$_._$IsUsed$_() && t._$_uSeconds$_._$Update1f$_(this._$_startIndex$_);
        }
        _$InitSetProgramCustomParameters$_() {
            this._$_type$_ = 13;
        }
        _$DoSetProgramCustomParameters$_() {
            const t = this._$_batchState$_._$currentShader$_, i = t._$_uCustomParameters$_, e = this._$_shaderParams$_;
            for (let t = 0, s = i.length; t < s; ++t) {
                const n = i[t], h = e[t];
                n._$IsColorType$_() ? n._$Update3f$_(h._$getR$_(), h._$getG$_(), h._$getB$_()) : n._$Update1f$_(h);
            }
        }
        _$InitInvalidateFramebuffer$_(t) {
            this._$_type$_ = 14, this._$_texParam$_ = t;
        }
        _$DoInvalidateFramebuffer$_() {
            const t = this._$_gl$_, s = this._$_texParam$_, i = this._$_batchState$_._$currentFramebuffer$_;
            s !== i && t.bindFramebuffer(t.FRAMEBUFFER, s), t.invalidateFramebuffer(t.FRAMEBUFFER, [ t.COLOR_ATTACHMENT0 ]), 
            s !== i && t.bindFramebuffer(t.FRAMEBUFFER, i);
        }
        _$InitBlitFramebuffer$_(t, s, i) {
            this._$_type$_ = 17;
            const e = this._$_mat4param$_, n = this._$_batchState$_.renderer, h = (e[0] = t._$GetWidth$_(), 
            e[1] = t._$GetHeight$_(), e[2] = (s || n)._$GetWidth$_(), e[3] = (s || n)._$GetHeight$_(), 
            e[4] = t._$IsLinearSampling$_() ? 1 : 0, e[5] = "stretch" === i, this._$_shaderParams$_);
            Di._$clearArray$_(h), h.push(t._$_GetFramebuffer$_()), h.push(s ? s._$_GetFramebuffer$_() : null);
        }
        _$DoBlitFramebuffer$_() {
            const t = this._$_mat4param$_, s = this._$_shaderParams$_, i = this._$_gl$_, e = t[0], n = t[1], h = t[2], r = t[3], o = 0 !== t[4], a = 0 !== t[5], l = s[0], u = s[1];
            if (i.bindFramebuffer(i.READ_FRAMEBUFFER, l), i.bindFramebuffer(i.DRAW_FRAMEBUFFER, u), 
            a) i.blitFramebuffer(0, 0, e, n, 0, 0, h, r, i.COLOR_BUFFER_BIT, o ? i.LINEAR : i.NEAREST); else {
                const c = Math.min(e, h), f = Math.min(n, r), d = Math.max(n - r, 0), p = Math.max(r - n, 0);
                i.blitFramebuffer(0, d, c, f + d, 0, p, c, f + p, i.COLOR_BUFFER_BIT, i.NEAREST);
            }
        }
        _$InitStartQuery$_(t) {
            this._$_type$_ = 18, this._$_texParam$_ = t;
        }
        _$DoStartQuery$_() {
            this._$_texParam$_._$BeginTimeElapsed$_(), this._$_texParam$_ = null;
        }
        _$InitEndQuery$_(t) {
            this._$_type$_ = 19, this._$_texParam$_ = t;
        }
        _$DoEndQuery$_() {
            this._$_texParam$_._$EndTimeElapsed$_(), this._$_texParam$_ = null;
        }
        _$InitSetEllipseParams$_(t, s, i) {
            this._$_type$_ = 20;
            const e = this._$_mat4param$_;
            e[0] = t, e[1] = s, e[2] = i;
        }
        _$DoSetEllipseParams$_() {
            const t = this._$_batchState$_._$currentShader$_, s = this._$_mat4param$_;
            t._$_uPixelSize$_._$IsUsed$_() && t._$_uPixelSize$_._$Update2f$_(s[0], s[1]), 
            t._$_uOutlineThickness$_._$IsUsed$_() && t._$_uOutlineThickness$_._$Update1f$_(s[2]);
        }
        _$InitSetTilemapInfo$_(t, s, i, e, n, h, r) {
            this._$_type$_ = 16;
            const o = this._$_mat4param$_;
            t._$writeToTypedArray$_(o, 0), o[4] = 1 / s, o[5] = 1 / i, o[6] = e / s, 
            o[7] = n / i, o[8] = h / s, o[9] = r / i;
        }
        _$DoSetTilemapInfo$_() {
            const t = this._$_batchState$_._$currentShader$_, s = this._$_mat4param$_;
            t._$_uSrcStart$_._$IsUsed$_() && t._$_uSrcStart$_._$Update2f$_(s[0], s[1]), 
            t._$_uPixelSize$_._$IsUsed$_() && t._$_uPixelSize$_._$Update2f$_(s[4], s[5]), 
            t._$_uTileSize$_._$IsUsed$_() && t._$_uTileSize$_._$Update2f$_(s[6], s[7]), 
            t._$_uTileSpacing$_._$IsUsed$_() && t._$_uTileSpacing$_._$Update2f$_(s[8], s[9]);
        }
        _$InitSetTileRandomizationInfo$_(t, s, i, e, n, h, r) {
            this._$_type$_ = 29;
            const o = this._$_mat4param$_;
            o[0] = 1 / t, o[1] = 1 / s, o[2] = i, o[3] = e, o[4] = n, o[5] = h, 
            o[6] = r;
        }
        _$DoSetTileRandomizationInfo$_() {
            const t = this._$_batchState$_._$currentShader$_, s = this._$_mat4param$_;
            t._$_uPixelSize$_._$IsUsed$_() && t._$_uPixelSize$_._$Update2f$_(s[0], s[1]), 
            t._$_uTileSize$_._$IsUsed$_() && t._$_uTileSize$_._$Update2f$_(s[2], s[3]), 
            t._$_uOutlineThickness$_._$IsUsed$_() && t._$_uOutlineThickness$_._$Update1f$_(s[4]), 
            t._$_uTileSpacing$_._$IsUsed$_() && t._$_uTileSpacing$_._$Update2f$_(s[5], s[6]);
        }
        _$InitClearDepth$_(t) {
            this._$_type$_ = 22, this._$_startIndex$_ = t ? 1 : 0;
        }
        _$DoClearDepth$_() {
            const t = this._$_gl$_, s = 0 !== this._$_startIndex$_;
            s || t.depthMask(!0), t.clear(t.DEPTH_BUFFER_BIT), s || t.depthMask(!1);
        }
        _$InitSetDepthEnabled$_(t) {
            this._$_type$_ = 23, this._$_startIndex$_ = t ? 1 : 0;
        }
        _$DoSetDepthEnabled$_() {
            const t = this._$_gl$_;
            0 === this._$_startIndex$_ ? (t.disable(t.DEPTH_TEST), t.depthMask(!1)) : (t.enable(t.DEPTH_TEST), 
            t.depthMask(!0));
        }
        _$InitSetDepthSamplingEnabled$_(t) {
            this._$_type$_ = 24, this._$_startIndex$_ = t ? 1 : 0;
        }
        _$DoSetDepthSamplingEnabled$_() {
            const t = this._$_gl$_, s = this._$_batchState$_, i = s.renderer, e = 0 !== this._$_startIndex$_;
            s._$isDepthSamplingEnabled$_ = e, t.activeTexture(t.TEXTURE2), e ? (s._$currentFramebufferNoDepth$_ && t.bindFramebuffer(t.FRAMEBUFFER, s._$currentFramebufferNoDepth$_), 
            t.bindTexture(t.TEXTURE_2D, i._$_GetDepthBuffer$_())) : (t.bindTexture(t.TEXTURE_2D, null), 
            s._$currentFramebufferNoDepth$_ && t.bindFramebuffer(t.FRAMEBUFFER, s._$currentFramebuffer$_)), 
            t.activeTexture(t.TEXTURE0);
        }
        _$InitCoplanarStartStencilPass$_() {
            this._$_type$_ = 25;
        }
        _$DoCoplanarStartStencilPass$_() {
            const t = this._$_gl$_;
            t.clear(t.STENCIL_BUFFER_BIT), t.enable(t.STENCIL_TEST), t.stencilFunc(t.ALWAYS, 1, 1), 
            t.stencilOp(t.KEEP, t.KEEP, t.REPLACE), t.colorMask(!1, !1, !1, !1);
        }
        _$InitCoplanarStartColorPass$_() {
            this._$_type$_ = 26;
        }
        _$DoCoplanarStartColorPass$_() {
            const t = this._$_gl$_;
            t.colorMask(!0, !0, !0, !0), t.stencilFunc(t.EQUAL, 1, 1), t.stencilOp(t.KEEP, t.KEEP, t.KEEP);
        }
        _$InitCoplanarRestore$_() {
            this._$_type$_ = 27;
        }
        _$DoCoplanarRestore$_() {
            const t = this._$_gl$_;
            t.disable(t.STENCIL_TEST);
        }
        _$InitSetScissor$_(t, s, i, e, n) {
            this._$_type$_ = 28, this._$_startIndex$_ = t ? 1 : 0;
            const h = this._$_mat4param$_;
            h[0] = s, h[1] = i, h[2] = e, h[3] = n;
        }
        _$DoSetScissor$_() {
            const t = this._$_gl$_, s = this._$_mat4param$_;
            1 === this._$_startIndex$_ ? (t.enable(t.SCISSOR_TEST), t.scissor(s[0], s[1], s[2], s[3])) : t.disable(t.SCISSOR_TEST);
        }
        _$Run$_() {
            switch (this._$_type$_) {
              case 1:
                return void this._$DoQuad$_();

              case 2:
                return void this._$DoSetTexture$_();

              case 3:
                return void this._$DoSetColor$_();

              case 4:
                return void this._$DoSetBlend$_();

              case 5:
                return void this._$DoSetViewport$_();

              case 6:
                return void this._$DoSetProjection$_();

              case 7:
                return void this._$DoSetModelView$_();

              case 8:
                return void this._$DoSetRenderTarget$_();

              case 9:
                return void this._$DoClearSurface$_();

              case 10:
                return void this._$DoPoints$_();

              case 11:
                return void this._$DoSetProgram$_();

              case 12:
                return void this._$DoSetProgramParameters$_();

              case 13:
                return void this._$DoSetProgramCustomParameters$_();

              case 14:
                return void this._$DoInvalidateFramebuffer$_();

              case 15:
                return void this._$DoSetPointTextureCoords$_();

              case 16:
                return void this._$DoSetTilemapInfo$_();

              case 17:
                return void this._$DoBlitFramebuffer$_();

              case 18:
                return void this._$DoStartQuery$_();

              case 19:
                return void this._$DoEndQuery$_();

              case 20:
                return void this._$DoSetEllipseParams$_();

              case 21:
                return void this._$DoSetGradientColor$_();

              case 22:
                return void this._$DoClearDepth$_();

              case 23:
                return void this._$DoSetDepthEnabled$_();

              case 24:
                return void this._$DoSetDepthSamplingEnabled$_();

              case 25:
                return void this._$DoCoplanarStartStencilPass$_();

              case 26:
                return void this._$DoCoplanarStartColorPass$_();

              case 27:
                return void this._$DoCoplanarRestore$_();

              case 28:
                return void this._$DoSetScissor$_();

              case 29:
                return void this._$DoSetTileRandomizationInfo$_();
            }
        }
    };
}

{
    let I = function(t, s, i, e, n, h) {
        s ? t.strokeRect(i, e, n, h) : t.fillRect(i, e, n, h);
    }, t = function(t) {
        return t * (4 / 3);
    }, o = function(t, s) {
        t = t.trim();
        const i = parseFloat(t);
        return isFinite(i) ? t.endsWith("%") ? s * i / 100 : i : 0;
    };
    I, t, o;
    const Li = self._$C3$_, Oi = new Set([ "serif", "sans-serif", "monospace", "cursive", "fantasy", "system-ui", "ui-serif", "ui-sans-serif", "ui-monospace", "ui-rounded", "math", "emoji", "fangsong" ]), Pi = {
        timeout: 60
    }, Ri = new Li._$Color$_(0, 0, 0, 1), ki = new Set([ "left", "center", "right" ]), Fi = new Set([ "top", "center", "bottom" ]), ji = new Set([ "word", "cjk", "character" ]), zi = new Set([ "ltr", "rtl" ]), Bi = new Set();
    Li.FontManager && Li.FontManager.addEventListener("fontload", t => {
        const s = t.font._$GetName$_();
        for (const i of Bi) (i._$IsBBCodeEnabled$_() || Li._$equalsNoCase$_(i._$GetFontName$_(), s)) && i._$_SetWordWrapChanged$_();
    });
    let s = !1, i = !1;
    Li._$Gfx$_._$RendererText$_ = class {
        constructor(t, s) {
            s = Object.assign({}, Pi, s), this._$_renderer$_ = t, this._$_fontName$_ = "Arial", 
            this._$_fontSize$_ = 16, this._$_fontSizeScale$_ = 1, this._$_lineHeight$_ = 0, 
            this._$_isBold$_ = !1, this._$_isItalic$_ = !1, this._$_colorStr$_ = "black", 
            this._$_isBBcodeEnabled$_ = !1, this._$_iconSet$_ = null, this._$_iconSmoothing$_ = !0, 
            this._$onloadfont$_ = null, this._$_alreadyLoadedFonts$_ = new Set(), 
            this._$_horizontalAlign$_ = "left", this._$_verticalAlign$_ = "top", 
            this._$_text$_ = "", this._$_bbString$_ = null, this._$_wrappedText$_ = Li._$New$_(Li._$WordWrap$_), 
            this._$_wrapMode$_ = "word", this._$_textDirection$_ = "ltr", this._$_wordWrapChanged$_ = !1, 
            this._$_textLayoutChanged$_ = !1, this._$_drawChanged$_ = !1, this._$_drawMaxCharCount$_ = -1, 
            this._$_drawCharCount$_ = 0, this._$_cssWidth$_ = 0, this._$_cssHeight$_ = 0, 
            this._$_width$_ = 0, this._$_height$_ = 0, this._$_zoom$_ = 1, this._$_textCanvas$_ = null, 
            this._$_textContext$_ = null, this._$_measureContext$_ = null, this._$_measureContextTop$_ = null, 
            this._$_lastCanvasWidth$_ = -1, this._$_lastCanvasHeight$_ = -1, this._$_lastTextCanvasFont$_ = "", 
            this._$_lastMeasureCanvasFont$_ = "", this._$_lastTextCanvasFillStyle$_ = "", 
            this._$_lastTextCanvasOpacity$_ = 1, this._$_lastTextCanvasLineWidth$_ = 1, 
            this._$_measureTextCallback$_ = t => this._$_MeasureText$_(t), this._$_texture$_ = null, 
            this._$_rcTex$_ = new Li.Rect(), this._$_scaleFactor$_ = 1, this._$_textureTimeout$_ = new Li._$IdleTimeout$_(() => {
                this._$ReleaseTexture$_(), this._$_SetTextCanvasSize$_(8, 8);
            }, s.timeout), this._$ontextureupdate$_ = null, this._$_wasReleased$_ = !1, 
            Bi.add(this);
        }
        _$Release$_() {
            this._$onloadfont$_ = null, this._$_alreadyLoadedFonts$_.clear(), this._$_iconSet$_ = null, 
            this._$_bbString$_ = null, this._$_textCanvas$_ = null, this._$_textContext$_ = null, 
            this._$_measureContext$_ = null, this._$_measureContextTop$_ = null, 
            this._$_measureTextCallback$_ = null, this._$_textureTimeout$_._$Release$_(), 
            this._$ontextureupdate$_ = null, this._$ReleaseTexture$_(), this._$_wrappedText$_._$Clear$_(), 
            this._$_wrappedText$_ = null, this._$_renderer$_ = null, this._$_wasReleased$_ = !0, 
            Bi.delete(this);
        }
        _$_SetDrawChanged$_() {
            this._$_drawChanged$_ = !0;
        }
        _$_SetTextLayoutChanged$_() {
            this._$_SetDrawChanged$_(), this._$_textLayoutChanged$_ = !0;
        }
        _$_SetWordWrapChanged$_() {
            this._$_SetTextLayoutChanged$_(), this._$_wordWrapChanged$_ = !0;
        }
        _$SetBBCodeEnabled$_(t) {
            if (this._$_isBBcodeEnabled$_ !== (t = !!t)) {
                this._$_isBBcodeEnabled$_ = t;
                const s = this._$_isBBcodeEnabled$_ ? "alphabetic" : "top";
                this._$_textContext$_ && (this._$_textContext$_.textBaseline = s), 
                this._$_measureContext$_ && (this._$_measureContext$_.textBaseline = s), 
                this._$_SetWordWrapChanged$_();
            }
        }
        _$IsBBCodeEnabled$_() {
            return this._$_isBBcodeEnabled$_;
        }
        _$SetIconSet$_(t) {
            this._$_iconSet$_ !== t && (this._$_iconSet$_ = t, this._$_wrappedText$_._$SetIconSet$_(t), 
            this._$_iconSet$_ && this._$_iconSet$_._$IsLoading$_() && this._$_iconSet$_._$LoadContent$_().then(() => this._$_SetDrawChanged$_()), 
            this._$_SetWordWrapChanged$_());
        }
        _$SetIconSmoothing$_(t) {
            this._$_iconSmoothing$_ !== (t = !!t) && (this._$_iconSmoothing$_ = t, 
            this._$_SetDrawChanged$_());
        }
        _$SetFontName$_(t) {
            this._$_fontName$_ !== (t = t || "serif") && (this._$_fontName$_ = t, 
            this._$_SetWordWrapChanged$_());
        }
        _$GetFontName$_() {
            return this._$_fontName$_;
        }
        _$SetFontSize$_(t) {
            this._$_fontSize$_ !== (t = t < .1 ? .1 : t) && (this._$_fontSize$_ = t, 
            this._$_SetWordWrapChanged$_());
        }
        _$GetFontSize$_() {
            return this._$_fontSize$_;
        }
        _$SetFontSizeScale$_(t) {
            this._$_fontSizeScale$_ !== t && (this._$_fontSizeScale$_ = t, this._$_SetWordWrapChanged$_());
        }
        _$SetLineHeight$_(t) {
            this._$_lineHeight$_ !== t && (this._$_lineHeight$_ = t, this._$_SetTextLayoutChanged$_());
        }
        _$GetLineHeight$_() {
            return this._$_lineHeight$_;
        }
        _$SetBold$_(t) {
            this._$_isBold$_ !== (t = !!t) && (this._$_isBold$_ = t, this._$_SetWordWrapChanged$_());
        }
        _$IsBold$_() {
            return this._$_isBold$_;
        }
        _$SetItalic$_(t) {
            this._$_isItalic$_ !== (t = !!t) && (this._$_isItalic$_ = t, this._$_SetWordWrapChanged$_());
        }
        _$IsItalic$_() {
            return this._$_isItalic$_;
        }
        _$SetDrawMaxCharacterCount$_(t) {
            t = Math.floor(t), this._$_drawMaxCharCount$_ !== t && (this._$_drawMaxCharCount$_ = t, 
            this._$_SetDrawChanged$_());
        }
        _$GetDrawMaxCharacterCount$_() {
            return this._$_drawMaxCharCount$_;
        }
        _$_GetFontString$_(t, s) {
            let i = [];
            (this._$_isBold$_ || s._$HasStyleTag$_("b")) && i.push("bold"), (this._$_isItalic$_ || s._$HasStyleTag$_("i")) && i.push("italic");
            const e = s._$GetStyleTag$_("size"), n = (e ? parseFloat(e.param) : this._$_fontSize$_) * this._$_fontSizeScale$_;
            i.push(t ? n + "pt" : n * this._$GetDrawScale$_() + "pt");
            let h = this._$_fontName$_, r = s._$GetStyleTag$_("font");
            return r && r.param && (h = r.param, this._$onloadfont$_) && !this._$_alreadyLoadedFonts$_.has(h) && (this._$onloadfont$_(h), 
            this._$_alreadyLoadedFonts$_.add(h)), h && (Oi.has(h) ? i.push(h) : i.push('"' + h + '"')), 
            i.join(" ");
        }
        _$SetColor$_(t) {
            t instanceof Li._$Color$_ && (t = t._$getCssRgb$_()), this._$_colorStr$_ !== t && (this._$_colorStr$_ = t, 
            this._$_SetDrawChanged$_());
        }
        _$SetColorRgb$_(t, s, i) {
            Ri._$setRgb$_(t, s, i), this._$SetColor$_(Ri);
        }
        _$SetHorizontalAlignment$_(t) {
            if (!ki.has(t)) throw new Error("invalid horizontal alignment");
            this._$_horizontalAlign$_ !== t && (this._$_horizontalAlign$_ = t, this._$_SetTextLayoutChanged$_());
        }
        _$GetHorizontalAlignment$_() {
            return this._$_horizontalAlign$_;
        }
        _$SetVerticalAlignment$_(t) {
            if (!Fi.has(t)) throw new Error("invalid vertical alignment");
            this._$_verticalAlign$_ !== t && (this._$_verticalAlign$_ = t, this._$_SetTextLayoutChanged$_());
        }
        _$GetVerticalAlignment$_() {
            return this._$_verticalAlign$_;
        }
        _$SetWordWrapMode$_(t) {
            if (!ji.has(t)) throw new Error("invalid word wrap mode");
            this._$_wrapMode$_ !== t && (this._$_wrapMode$_ = t, this._$_SetWordWrapChanged$_());
        }
        _$GetWordWrapMode$_() {
            return this._$_wrapMode$_;
        }
        _$SetTextDirection$_(t) {
            if (!zi.has(t)) throw new Error("invalid text direction");
            this._$_textDirection$_ !== t && (this._$_textDirection$_ = t, this._$_textContext$_ && (this._$_textContext$_.direction = this._$_textDirection$_), 
            this._$_measureContext$_ && (this._$_measureContext$_.direction = this._$_textDirection$_), 
            this._$_SetWordWrapChanged$_());
        }
        _$GetTextDirection$_() {
            return this._$_textDirection$_;
        }
        _$SetText$_(t) {
            this._$_text$_ !== t && (this._$_text$_ = t, this._$_SetWordWrapChanged$_());
        }
        _$GetText$_() {
            return this._$_text$_;
        }
        _$GetDrawScale$_() {
            return this._$_scaleFactor$_ * this._$_zoom$_ * self.devicePixelRatio;
        }
        _$SetSize$_(h, r, o) {
            if (void 0 === o && (o = 1), !(h <= 0 || this._$_cssWidth$_ === h && this._$_cssHeight$_ === r && this._$_zoom$_ === o)) {
                let t = this._$_cssWidth$_, s = (this._$_cssWidth$_ = h, this._$_cssHeight$_ = r, 
                this._$_zoom$_ = o, self.devicePixelRatio), i = (this._$_width$_ = this._$_cssWidth$_ * this._$_zoom$_ * s, 
                this._$_height$_ = this._$_cssHeight$_ * this._$_zoom$_ * s, Math.max(this._$_width$_, this._$_height$_)), e = Math.min(this._$_renderer$_._$GetMaxTextureSize$_(), 4096), n = 1;
                e < i && (n = e / i, this._$_width$_ = Math.min(this._$_width$_ * n, e), 
                this._$_height$_ = Math.min(this._$_height$_ * n, e)), this._$_scaleFactor$_ = n, 
                this._$_cssWidth$_ !== t ? this._$_SetWordWrapChanged$_() : this._$_SetTextLayoutChanged$_();
            }
        }
        _$GetWidth$_() {
            return this._$_width$_;
        }
        _$GetHeight$_() {
            return this._$_height$_;
        }
        _$GetZoom$_() {
            return this._$_zoom$_;
        }
        _$GetTextWidth$_() {
            return this._$_UpdateTextMeasurements$_(), this._$_wrappedText$_._$GetMaxLineWidth$_();
        }
        _$GetTextHeight$_() {
            return this._$_UpdateTextMeasurements$_(), this._$_wrappedText$_._$GetTotalLineHeight$_() + this._$_wrappedText$_._$GetLineCount$_() * (this._$_lineHeight$_ + 4) - this._$_lineHeight$_;
        }
        _$GetLengthInGraphemes$_() {
            this._$_UpdateTextMeasurements$_();
            let t = 0;
            for (const s of this._$_wrappedText$_._$GetLines$_()) for (const i of s._$fragments$_()) t += i._$GetLength$_();
            return t;
        }
        _$GetTexture$_() {
            return this._$_textureTimeout$_._$Reset$_(), this._$_MaybeUpdate$_(), 
            this._$_texture$_;
        }
        _$HitTestFragment$_(t, s) {
            this._$_UpdateTextMeasurements$_();
            const i = this._$GetDrawScale$_(), e = this._$_wrappedText$_._$GetLines$_();
            for (const n of e) {
                const h = n._$GetFontBoundingBoxDescent$_() * i;
                if (s >= n._$GetPosY$_() - n._$GetHeight$_() * i + h && s < n._$GetPosY$_() + h) for (const r of n._$fragments$_()) if (t >= r._$GetPosX$_() && t < r._$GetPosX$_() + r._$GetWidth$_() * i) return r;
            }
            return null;
        }
        *_$fragmentsWithTag$_(t) {
            this._$_UpdateTextMeasurements$_();
            const s = this._$_wrappedText$_._$GetLines$_();
            for (const i of s) for (const e of i._$fragments$_()) {
                const n = e._$GetStyleTag$_("tag");
                n && Li._$equalsNoCase$_(n.param, t) && (yield e);
            }
        }
        _$FindFragmentWithTag$_(t, s) {
            for (const i of this._$fragmentsWithTag$_(t)) {
                if (0 === s) return i;
                --s;
            }
            return null;
        }
        _$CountFragmentsWithTag$_(t) {
            let s = 0;
            for (const i of this._$fragmentsWithTag$_(t)) ++s;
            return s;
        }
        _$_MaybeUpdate$_() {
            this._$_texture$_ && !this._$_drawChanged$_ && !this._$_textLayoutChanged$_ && !this._$_wordWrapChanged$_ || this._$_wasReleased$_ || this._$_width$_ <= 0 || this._$_height$_ <= 0 || (this._$_drawChanged$_ = !1, 
            this._$_DoUpdate$_());
        }
        _$_DoUpdate$_() {
            this._$_wasReleased$_ || (this._$_UpdateTextMeasurements$_(), this._$_SetTextCanvasSize$_(Math.max(Li._$nextHighestPowerOfTwo$_(Math.ceil(this._$_width$_)), 128), Math.max(Li._$nextHighestPowerOfTwo$_(Math.ceil(this._$_height$_)), 64)), 
            this._$_DrawTextToCanvas$_(), this._$_UpdateTexture$_(), this._$_textureTimeout$_._$Reset$_());
        }
        _$_SetTextCanvasSize$_(t, s) {
            this._$_textCanvas$_ || (this._$_textCanvas$_ = Li._$CreateCanvas$_(16, 16));
            let i = !1;
            this._$_lastCanvasWidth$_ === t && this._$_lastCanvasHeight$_ === s || (this._$_lastCanvasWidth$_ = t, 
            this._$_lastCanvasHeight$_ = s, this._$_textCanvas$_.width = t, this._$_textCanvas$_.height = s, 
            i = !0), this._$_textContext$_ || (this._$_textContext$_ = this._$_textCanvas$_.getContext("2d"), 
            i = !0), i ? (this._$_textContext$_.textBaseline = this._$_isBBcodeEnabled$_ ? "alphabetic" : "top", 
            this._$_textContext$_.direction = this._$_textDirection$_, this._$_textContext$_.font = this._$_lastTextCanvasFont$_, 
            this._$_textContext$_.fillStyle = this._$_lastTextCanvasFillStyle$_, 
            this._$_textContext$_.strokeStyle = this._$_lastTextCanvasFillStyle$_, 
            this._$_textContext$_.globalAlpha = this._$_lastTextCanvasOpacity$_, 
            this._$_textContext$_.lineWidth = this._$_lastTextCanvasLineWidth$_) : this._$_textContext$_.clearRect(0, 0, t, s);
        }
        _$_MaybeCreateMeasureContext$_() {
            this._$_measureContext$_ || (this._$_measureContext$_ = Li._$CreateCanvas$_(16, 16).getContext("2d"), 
            this._$_measureContextTop$_ = Li._$CreateCanvas$_(16, 16).getContext("2d"), 
            this._$_measureContext$_.textBaseline = this._$_isBBcodeEnabled$_ ? "alphabetic" : "top", 
            this._$_measureContextTop$_.textBaseline = "top", this._$_measureContext$_.direction = this._$_textDirection$_, 
            this._$_measureContextTop$_.direction = this._$_textDirection$_);
        }
        _$_SetMeasureFontString$_(t) {
            this._$_lastMeasureCanvasFont$_ !== t && (this._$_lastMeasureCanvasFont$_ = t, 
            this._$_measureContext$_.font = t, this._$_measureContextTop$_.font = t);
        }
        _$_SupportsFontBoundingBoxMeasurements$_() {
            if (!s) {
                s = !0, this._$_MaybeCreateMeasureContext$_();
                const t = this._$_measureContext$_.measureText("test");
                i = "number" == typeof t.fontBoundingBoxAscent && "number" == typeof t.fontBoundingBoxDescent;
            }
            return i;
        }
        _$_UpdateTextMeasurements$_() {
            this._$_UpdateWordWrap$_(), this._$_UpdateTextLayout$_();
        }
        _$_UpdateWordWrap$_() {
            this._$_wordWrapChanged$_ && (this._$_MaybeCreateMeasureContext$_(), 
            !this._$_isBBcodeEnabled$_ || this._$_bbString$_ && this._$_bbString$_.toString() === this._$_text$_ || (this._$_bbString$_ = new Li._$BBString$_(this._$_text$_, {
                _$noEscape$_: !0
            })), this._$_wrappedText$_._$WordWrap$_(this._$_isBBcodeEnabled$_ ? this._$_bbString$_._$toFragmentList$_() : this._$_text$_, this._$_measureTextCallback$_, this._$_cssWidth$_, this._$_wrapMode$_, 0), 
            this._$_wordWrapChanged$_ = !1);
        }
        _$_UpdateTextLayout$_() {
            this._$_textLayoutChanged$_ && (this._$_LayoutText$_(), this._$_textLayoutChanged$_ = !1);
        }
        _$_MeasureText$_(t) {
            let s = t._$IsText$_() ? t._$GetCharacterArray$_().join("") : " ", i = (this._$_SetMeasureFontString$_(this._$_GetFontString$_(!0, t)), 
            t._$GetStyleTag$_("size")), e = (i ? parseFloat(i.param) : this._$_fontSize$_) * this._$_fontSizeScale$_, n = this._$_measureContext$_.measureText(s), h = 0;
            if (this._$_isBBcodeEnabled$_ && this._$_SupportsFontBoundingBoxMeasurements$_()) {
                const r = this._$_measureContextTop$_.measureText(s);
                h = n.fontBoundingBoxAscent - r.fontBoundingBoxAscent;
            }
            return {
                width: n.width,
                height: 4 / 3 * e,
                fontBoundingBoxAscent: n.fontBoundingBoxAscent || 0,
                fontBoundingBoxDescent: n.fontBoundingBoxDescent || 0,
                _$topToAlphabeticDistance$_: h
            };
        }
        _$_SetDrawFontString$_(t) {
            this._$_lastTextCanvasFont$_ !== t && (this._$_lastTextCanvasFont$_ = t, 
            this._$_textContext$_.font = t);
        }
        _$_SetDrawCanvasColor$_(t) {
            this._$_lastTextCanvasFillStyle$_ !== t && (this._$_lastTextCanvasFillStyle$_ = t, 
            this._$_textContext$_.fillStyle = t, this._$_textContext$_.strokeStyle = t);
        }
        _$_SetDrawCanvasOpacity$_(t) {
            this._$_lastTextCanvasOpacity$_ !== t && (this._$_lastTextCanvasOpacity$_ = t, 
            this._$_textContext$_.globalAlpha = t);
        }
        _$_SetDrawCanvasLineWith$_(t) {
            this._$_lastTextCanvasLineWidth$_ !== t && (this._$_lastTextCanvasLineWidth$_ = t, 
            this._$_textContext$_.lineWidth = t);
        }
        _$_LayoutText$_() {
            let e = this._$GetDrawScale$_(), n = (4 + this._$_lineHeight$_) * e, h = 0, r = this._$_wrappedText$_._$GetLines$_();
            if (0 !== r.length) {
                for (const s of r) {
                    s._$SetPosX$_(NaN), s._$SetPosY$_(NaN);
                    for (const o of s._$fragments$_()) o._$SetPosX$_(NaN), o._$SetPosY$_(NaN);
                }
                let t = this._$_isBBcodeEnabled$_ && this._$_SupportsFontBoundingBoxMeasurements$_(), i = r[0]._$GetHeight$_() * e;
                if ("center" === this._$_verticalAlign$_) {
                    const a = r.reduce((t, s) => t + s._$GetHeight$_() * e + n, 0) - n;
                    h = Math.max(this._$_height$_ / 2 - a / 2, 0), t && (i = r[0]._$GetTopToAlphabeticDistance$_() * e);
                } else if ("bottom" === this._$_verticalAlign$_) {
                    const l = r.reduce((t, s) => t + s._$GetHeight$_() * e + n, 0) - this._$_lineHeight$_ * e, u = t ? r.at(-1)._$GetFontBoundingBoxDescent$_() * e : 0;
                    h = this._$_height$_ - l - u - 2;
                }
                for (let t = 0, s = r.length; t < s; ++t) {
                    const c = r[t], f = c._$GetHeight$_() * e, d = h;
                    if (this._$_isBBcodeEnabled$_) {
                        if (h += 0 === t ? i : f, 0 < t && h > this._$_height$_ - 4 * e) break;
                    } else if (0 < t && h >= this._$_height$_ - f) break;
                    0 <= d && this._$_LayoutTextLine$_(c, h, e), this._$_isBBcodeEnabled$_ || (h += f), 
                    h += n;
                }
            }
        }
        _$_LayoutTextLine$_(t, s, i) {
            let e = 0;
            "center" === this._$_horizontalAlign$_ ? e = Math.floor((this._$_width$_ - t._$GetWidth$_() * i) / 2) : "right" === this._$_horizontalAlign$_ && (e = this._$_width$_ - t._$GetWidth$_() * i), 
            t._$SetPosX$_(e), t._$SetPosY$_(s);
            for (const n of "ltr" === this._$_textDirection$_ ? t._$fragments$_() : t._$fragmentsReverse$_()) this._$_LayoutFragment$_(n, e, s, i), 
            e += n._$GetWidth$_() * i;
        }
        _$_LayoutFragment$_(t, s, i, e) {
            const n = t._$GetStyleTag$_("offsetx"), h = (s += n ? o(n.param, t._$GetHeight$_()) * e : 0, 
            t._$GetStyleTag$_("offsety"));
            if (i += h ? o(h.param, t._$GetHeight$_()) * e : 0, t._$IsIcon$_()) {
                const r = t._$GetStyleTag$_("iconoffsety");
                i += r ? o(r.param, t._$GetHeight$_()) * e : .2 * t._$GetHeight$_() * e;
            }
            t._$SetPosX$_(s), t._$SetPosY$_(i);
        }
        _$_DrawTextToCanvas$_() {
            this._$_textContext$_.imageSmoothingEnabled = this._$_iconSmoothing$_, 
            this._$_textContext$_.imageSmoothingQuality = "high", this._$_drawCharCount$_ = 0;
            const t = this._$GetDrawScale$_(), s = this._$_wrappedText$_._$GetLines$_();
            for (const i of s) this._$_DrawTextLine$_(i, t);
        }
        _$_DrawTextLine$_(t, s) {
            const i = t._$GetPosX$_(), e = t._$GetPosY$_();
            if (Number.isFinite(i) && Number.isFinite(e)) for (const n of "ltr" === this._$_textDirection$_ ? t._$fragments$_() : t._$fragmentsReverse$_()) this._$_DrawFragment$_(n, s, t._$GetHeight$_());
        }
        _$_DrawFragment$_(r, o, a) {
            const l = this._$_textContext$_, u = r._$GetPosX$_(), c = r._$GetPosY$_();
            if (Number.isFinite(u) && Number.isFinite(c)) {
                let t = a / 16, s = r._$GetWidth$_() * o, i = r._$GetHeight$_() * o, e = r._$GetHeight$_() / 16, n = (4 + this._$_lineHeight$_) * o, h = r._$IsText$_() ? r._$GetCharacterArray$_() : null;
                if (-1 !== this._$_drawMaxCharCount$_) {
                    if (this._$_drawCharCount$_ >= this._$_drawMaxCharCount$_) return;
                    r._$IsText$_() && this._$_drawCharCount$_ + h.length > this._$_drawMaxCharCount$_ && (h = h.slice(0, this._$_drawMaxCharCount$_ - this._$_drawCharCount$_), 
                    s = this._$_MeasureText$_(r).width * o), this._$_drawCharCount$_ += r._$GetLength$_();
                }
                const f = r._$GetStyleTag$_("background"), d = r._$HasStyleTag$_("u"), p = r._$HasStyleTag$_("s");
                if ((!r._$IsText$_() || !Li._$IsCharArrayAllWhitespace$_(h) || f || d || p) && !r._$HasStyleTag$_("hide")) {
                    const m = r._$GetStyleTag$_("color"), g = r._$GetStyleTag$_("opacity"), y = (this._$_SetDrawCanvasOpacity$_(g ? parseFloat(g.param) / 100 : 1), 
                    f && (this._$_SetDrawCanvasColor$_(f.param), l.fillRect(u, c - i, s, i + n)), 
                    r._$GetStyleTag$_("linethickness")), M = y ? parseFloat(y.param) : 1, w = r._$HasStyleTag$_("stroke");
                    if (w && this._$_SetDrawCanvasLineWith$_(.5 * e * M * this._$GetDrawScale$_()), 
                    r._$IsText$_()) {
                        const x = h.join("");
                        if (this._$_SetDrawFontString$_(this._$_GetFontString$_(!1, r)), 
                        !w) {
                            this._$_SetDrawCanvasLineWith$_(.5 * e * M * this._$GetDrawScale$_());
                            const S = r._$GetStyleTag$_("outlineback");
                            S && (this._$_SetDrawCanvasColor$_(S.param), this._$_FillOrStrokeText$_(!0, x, u, c, s));
                        }
                        if (this._$_SetDrawCanvasColor$_(m ? m.param : this._$_colorStr$_), 
                        this._$_FillOrStrokeText$_(w, x, u, c, s), !w) {
                            this._$_SetDrawCanvasLineWith$_(.5 * e * M * this._$GetDrawScale$_());
                            const T = r._$GetStyleTag$_("outline");
                            T && (this._$_SetDrawCanvasColor$_(T.param), this._$_FillOrStrokeText$_(!0, x, u, c, s));
                        }
                    } else if (r._$IsIcon$_() && 0 < r._$GetWidth$_()) {
                        const b = r._$GetDrawable$_(this._$_iconSet$_);
                        b && l.drawImage(b, u, c - i, s, i);
                    }
                    if (this._$_SetDrawCanvasColor$_(m ? m.param : this._$_colorStr$_), 
                    d && I(l, w, u, c + o * t, s, o * t * M), p) {
                        const v = c - i / 4, C = o * e, G = v + C / 2;
                        l.fillRect(u, G - C * M / 2, s, C * M);
                    }
                }
            }
        }
        _$_FillOrStrokeText$_(t, s, i, e, n) {
            "rtl" === this._$_textDirection$_ && (i += n), t ? "Gecko" === Li._$Platform$_._$BrowserEngine$_ ? this._$_textContext$_.strokeText(s, i, e, n) : this._$_textContext$_.strokeText(s, i, e) : "Gecko" === Li._$Platform$_._$BrowserEngine$_ ? this._$_textContext$_.fillText(s, i, e, n) : this._$_textContext$_.fillText(s, i, e);
        }
        _$_UpdateTexture$_() {
            this._$_renderer$_._$IsContextLost$_() || (this._$_texture$_ || (this._$_texture$_ = this._$_renderer$_._$CreateDynamicTexture$_(this._$_textCanvas$_.width, this._$_textCanvas$_.height, {
                _$mipMap$_: !0,
                _$mipMapQuality$_: "high"
            })), this._$_renderer$_._$UpdateTexture$_(this._$_textCanvas$_, this._$_texture$_), 
            this._$_rcTex$_.set(0, 0, this._$_width$_ / this._$_texture$_._$GetWidth$_(), this._$_height$_ / this._$_texture$_._$GetHeight$_()), 
            this._$ontextureupdate$_ && this._$ontextureupdate$_());
        }
        _$GetTexRect$_() {
            return this._$_rcTex$_;
        }
        _$ReleaseTexture$_() {
            this._$_texture$_ && (this._$_renderer$_._$IsContextLost$_() || this._$_renderer$_._$DeleteTexture$_(this._$_texture$_), 
            this._$_texture$_ = null);
        }
        static _$OnContextLost$_() {
            for (const t of Bi) t._$ReleaseTexture$_();
        }
        static _$GetAll$_() {
            return Bi.values();
        }
    };
}

{
    const Ui = self._$C3$_;
    class Wi {
        constructor(t) {
            this._$_gl$_ = t._$GetContext$_(), this._$_version$_ = t._$GetWebGLVersionNumber$_(), 
            this._$_timerExt$_ = t._$_GetDisjointTimerQueryExtension$_(), this._$_query$_ = null, 
            this._$_isActive$_ = !1, this._$_hasResult$_ = !1, this._$_result$_ = 0, 
            1 === this._$_version$_ ? this._$_query$_ = this._$_timerExt$_.createQueryEXT() : this._$_query$_ = this._$_gl$_.createQuery();
        }
        _$Release$_() {
            this._$_DeleteQueryObject$_(), this._$_gl$_ = null, this._$_timerExt$_ = null, 
            this._$_hasResult$_ = !1;
        }
        _$_DeleteQueryObject$_() {
            this._$_query$_ && (1 === this._$_version$_ ? this._$_timerExt$_.deleteQueryEXT(this._$_query$_) : this._$_gl$_.deleteQuery(this._$_query$_), 
            this._$_query$_ = null);
        }
        _$BeginTimeElapsed$_() {
            if (this._$_isActive$_) throw new Error("query already active");
            1 === this._$_version$_ ? this._$_timerExt$_.beginQueryEXT(this._$_timerExt$_.TIME_ELAPSED_EXT, this._$_query$_) : this._$_gl$_.beginQuery(this._$_timerExt$_.TIME_ELAPSED_EXT, this._$_query$_), 
            this._$_isActive$_ = !0;
        }
        _$EndTimeElapsed$_() {
            if (!this._$_isActive$_) throw new Error("query not active");
            1 === this._$_version$_ ? this._$_timerExt$_.endQueryEXT(this._$_timerExt$_.TIME_ELAPSED_EXT) : this._$_gl$_.endQuery(this._$_timerExt$_.TIME_ELAPSED_EXT), 
            this._$_isActive$_ = !1;
        }
        _$CheckForResult$_() {
            if (this._$_query$_ && !this._$_hasResult$_ && !this._$_isActive$_) {
                let t;
                t = 1 === this._$_version$_ ? this._$_timerExt$_.getQueryObjectEXT(this._$_query$_, this._$_timerExt$_.QUERY_RESULT_AVAILABLE_EXT) : this._$_gl$_.getQueryParameter(this._$_query$_, this._$_gl$_.QUERY_RESULT_AVAILABLE);
                const s = this._$_gl$_.getParameter(this._$_timerExt$_.GPU_DISJOINT_EXT);
                t && !s && (1 === this._$_version$_ ? this._$_result$_ = this._$_timerExt$_.getQueryObjectEXT(this._$_query$_, this._$_timerExt$_.QUERY_RESULT_EXT) : this._$_result$_ = this._$_gl$_.getQueryParameter(this._$_query$_, this._$_gl$_.QUERY_RESULT), 
                this._$_result$_ /= 1e9, this._$_hasResult$_ = !0), (t || s) && this._$_DeleteQueryObject$_();
            }
        }
        _$HasResult$_() {
            return this._$_hasResult$_;
        }
        _$GetResult$_() {
            if (this._$_hasResult$_) return this._$_result$_;
            throw new Error("no result available");
        }
    }
    Ui._$Gfx$_._$WebGLTimeElapsedQuery$_ = class {
        constructor(t) {
            this._$_renderer$_ = t, this._$_frameNumber$_ = t._$GetFrameNumber$_(), 
            this._$_isActive$_ = !1, this._$_parentQuery$_ = null, this._$_isNested$_ = !1, 
            this._$_realQuery$_ = null, this._$_queries$_ = [];
        }
        _$Release$_() {
            for (const t of this._$_queries$_) t instanceof Wi && t._$Release$_();
            Ui._$clearArray$_(this._$_queries$_), this._$_parentQuery$_ = null, 
            this._$_realQuery$_ = null, this._$_renderer$_ = null;
        }
        _$BeginTimeElapsed$_() {
            if (this._$_isActive$_) throw new Error("query already active");
            const t = this._$_renderer$_._$_GetTimeQueryStack$_();
            0 < t.length ? (this._$_isNested$_ = !0, this._$_parentQuery$_ = t.at(-1), 
            this._$_parentQuery$_._$_EndReal$_(), this._$_parentQuery$_._$_queries$_.push(this)) : (this._$_isNested$_ = !1, 
            this._$_parentQuery$_ = null), this._$_isActive$_ = !0, t.push(this), 
            this._$_StartReal$_();
        }
        _$EndTimeElapsed$_() {
            if (!this._$_isActive$_) throw new Error("query not active");
            const t = this._$_renderer$_._$_GetTimeQueryStack$_().pop();
            if (t !== this) throw new Error("can only end most nested query");
            this._$_isActive$_ = !1, this._$_EndReal$_(), this._$_parentQuery$_ && (this._$_parentQuery$_._$_StartReal$_(), 
            this._$_parentQuery$_ = null);
        }
        _$_StartReal$_() {
            this._$_realQuery$_ = Ui._$New$_(Wi, this._$_renderer$_), this._$_queries$_.push(this._$_realQuery$_), 
            this._$_realQuery$_._$BeginTimeElapsed$_();
        }
        _$_EndReal$_() {
            this._$_realQuery$_._$EndTimeElapsed$_(), this._$_realQuery$_ = null;
        }
        _$CheckForResult$_() {
            for (const t of this._$_queries$_) t._$CheckForResult$_();
        }
        _$IsNested$_() {
            return this._$_isNested$_;
        }
        _$HasResult$_() {
            return this._$_queries$_.every(t => t._$HasResult$_());
        }
        _$GetResult$_() {
            return this._$_queries$_.reduce((t, s) => t + s._$GetResult$_(), 0);
        }
        _$GetFrameNumber$_() {
            return this._$_frameNumber$_;
        }
    };
}

{
    const Qi = self._$C3$_;
    Qi._$Gfx$_._$WebGLQueryResultBuffer$_ = class {
        constructor(t, s = 1e3) {
            this._$_renderer$_ = t, this._$_maxQueries$_ = s, this._$_buffer$_ = [], 
            this._$_renderer$_._$_AddQueryResultBuffer$_(this);
        }
        _$Release$_() {
            this._$Clear$_(), this._$_renderer$_._$_RemoveQueryResultBuffer$_(this), 
            this._$_renderer$_ = null;
        }
        _$Clear$_() {
            for (const t of this._$_buffer$_) t._$Release$_();
            Qi._$clearArray$_(this._$_buffer$_);
        }
        _$AddTimeElapsedQuery$_() {
            const t = new Qi._$Gfx$_._$WebGLTimeElapsedQuery$_(this._$_renderer$_);
            if (this._$_buffer$_.push(t), this._$_buffer$_.length > this._$_maxQueries$_) {
                const s = this._$_buffer$_.shift();
                s._$Release$_();
            }
            return t;
        }
        _$CheckForResults$_(t) {
            for (const s of this._$_buffer$_) {
                if (s._$GetFrameNumber$_() >= t) return;
                if (s._$IsNested$_()) return;
                s._$CheckForResult$_();
            }
        }
        _$GetFrameRangeResultSum$_(t, s) {
            if (s <= t) return NaN;
            let i = 0;
            for (const e of this._$_buffer$_) {
                if (e._$GetFrameNumber$_() >= s) break;
                if (!(e._$GetFrameNumber$_() < t)) {
                    if (!e._$HasResult$_()) return NaN;
                    i += e._$GetResult$_();
                }
            }
            return i;
        }
        _$DeleteAllBeforeFrameNumber$_(i) {
            for (let t = 0, s = this._$_buffer$_.length; t < s; ++t) {
                const e = this._$_buffer$_[t];
                if (!(e._$GetFrameNumber$_() < i)) return void (0 < t && this._$_buffer$_.splice(0, t));
                e._$Release$_();
            }
        }
    };
}

{
    let i = function() {
        n = -1;
        for (const t of e) t._$checkFunc$_() && (t.resolve(), e.delete(t));
        0 < e.size && (n = self.requestAnimationFrame(i));
    }, x = (i, self._$C3$_), t = self._$glMatrix$_, S = (t._$vec3$_, t._$vec4$_), y = t._$mat4$_, h = {
        powerPreference: "default",
        _$enableGpuProfiling$_: !0,
        alpha: !1,
        depth: !1,
        _$canSampleDepth$_: !1,
        _$maxWebGLVersion$_: 2,
        failIfMajorPerformanceCaveat: !1
    }, r = new Set([ "default", "low-power", "high-performance" ]), c = new x._$Quad$_(0, 0, 1, 0, 1, 1, 0, 1), M = y.create(), w = y.create(), T = new x._$Quad$_(), b = new x.Rect(), v = null, e = (x.isDebug && (self._$debug_lose_webgl_context$_ = function() {
        v ? v.loseContext() : console.warn("WEBGL_lose_context not supported");
    }, self._$debug_restore_webgl_context$_ = function() {
        v ? v.restoreContext() : console.warn("WEBGL_lose_context not supported");
    }), new Set()), n = -1;
    x._$Gfx$_._$WebGLRenderer$_ = class extends x._$Gfx$_._$RendererBase$_ {
        constructor(t, s) {
            if (super(s), s = Object.assign({}, h, s), !r.has(s.powerPreference)) throw new Error("invalid power preference");
            let i = {
                alpha: !!s.alpha,
                depth: !1,
                antialias: !1,
                powerPreference: s.powerPreference,
                failIfMajorPerformanceCaveat: !!s.failIfMajorPerformanceCaveat
            }, e = null, n = 0;
            if (2 <= s._$maxWebGLVersion$_ && (e = t.getContext("webgl2", i), n = 2), 
            e || (e = t.getContext("webgl", i), n = 1), !e) throw new Error("renderer-unavailable (could not get WebGL context)");
            this._$_gl$_ = e, this._$_attribs$_ = e.getContextAttributes(), this._$_versionString$_ = e.getParameter(e.VERSION), 
            this._$_version$_ = n, this._$_viewport$_ = S.create(), this._$_didChangeTransform$_ = !1, 
            this._$_bbProjectionMatrix$_ = y.create(), this._$_usesDepthBuffer$_ = !!s.depth, 
            this._$_canSampleDepth$_ = !(!s.depth || !s._$canSampleDepth$_), this._$_isDepthEnabled$_ = this._$_usesDepthBuffer$_, 
            this._$_isDepthSamplingEnabled$_ = !1, this._$_depthBuffer$_ = null, 
            this._$_isAutoSizeDepthBuffer$_ = !0, this._$_depthBufferWidth$_ = 0, 
            this._$_depthBufferHeight$_ = 0, this._$_vertexBuffer$_ = null, this._$_texcoordBuffer$_ = null, 
            this._$_indexBuffer$_ = null, this._$_pointBuffer$_ = null, this._$_vertexData$_ = new Float32Array(8e3 * this._$GetNumVertexComponents$_()), 
            this._$_indexData$_ = new Uint16Array(12e3), this._$_texcoordData$_ = new Float32Array(16e3), 
            this._$_pointData$_ = new Float32Array(32e3), this._$_vertexPtr$_ = 0, 
            this._$_texPtr$_ = 0, this._$_pointPtr$_ = 0, this._$_lastVertexPtr$_ = 0, 
            this._$_lastProgram$_ = null, this._$_spDeviceTransformTextureFill$_ = null, 
            this._$_batch$_ = [], this._$_batchPtr$_ = 0, this._$_topOfBatch$_ = 0, 
            this._$_currentRenderTarget$_ = null, this._$_lastPointZ$_ = 0, this._$_batchState$_ = x._$New$_(x._$Gfx$_._$BatchState$_, this), 
            this._$_lastColor$_ = x._$New$_(x._$Color$_, 1, 1, 1, 1), this._$_lastTexture0$_ = null, 
            this._$_lastTexture1$_ = null, this._$_lastSrcBlend$_ = 0, this._$_lastDestBlend$_ = 0, 
            this._$_lastPointTexCoords$_ = new x.Rect(), this._$_lastScissorRect$_ = x._$New$_(x.Rect, 0, 0, -1, -1), 
            this._$_coplanarMode$_ = 0, this._$_maxTextureSize$_ = -1, this._$_minPointSize$_ = 0, 
            this._$_maxPointSize$_ = 0, this._$_highpPrecision$_ = 0, this._$_unmaskedVendor$_ = "(unavailable)", 
            this._$_unmaskedRenderer$_ = "(unavailable)", this._$_extensions$_ = [], 
            this._$_isInitialisingAfterContextRestored$_ = !1, this._$_parallelShaderCompileExt$_ = null, 
            this._$_anisotropicExt$_ = null, this._$_depthTextureExt$_ = null, this._$_fragDepthExt$_ = null, 
            this._$_stdDerivativesExt$_ = null, this._$_textureLodExt$_ = null, 
            this._$_maxAnisotropy$_ = 0, this._$_isGpuProfilingEnabled$_ = !!s._$enableGpuProfiling$_, 
            this._$_timerExt$_ = null, this._$_allQueryResultBuffers$_ = new Set(), 
            this._$_timeQueryStack$_ = [], this._$FillIndexBufferData$_(this._$_indexData$_);
        }
        _$IsWebGL$_() {
            return !0;
        }
        async _$InitState$_() {
            super._$InitState$_();
            const t = this._$_gl$_, s = this._$GetNumVertexComponents$_(), i = (this._$_lastColor$_._$setRgba$_(1, 1, 1, 1), 
            this._$_lastTexture0$_ = null, this._$_lastTexture1$_ = null, this._$_vertexPtr$_ = 0, 
            this._$_pointPtr$_ = 0, this._$_lastVertexPtr$_ = 8e3 * s - 4 * s, x._$clearArray$_(this._$_batch$_), 
            this._$_batchPtr$_ = 0, this._$_topOfBatch$_ = 0, this._$_lastProgram$_ = null, 
            this._$_currentRenderTarget$_ = null, this._$_lastPointTexCoords$_.set(0, 0, 1, 1), 
            this._$_lastPointZ$_ = 0, this._$_batchState$_), e = (i._$currentShader$_ = null, 
            i._$currentFramebuffer$_ = null, i._$currentFramebufferNoDepth$_ = null, 
            S.set(i._$currentColor$_, 1, 1, 1, 1), i.clearColor._$setRgba$_(0, 0, 0, 0), 
            i._$pointTexCoords$_.set(0, 0, 1, 1), t.clearColor(0, 0, 0, 0), t.clear(t.COLOR_BUFFER_BIT), 
            t.enable(t.BLEND), t.blendFunc(t.ONE, t.ONE_MINUS_SRC_ALPHA), this._$_lastSrcBlend$_ = t.ONE, 
            this._$_lastDestBlend$_ = t.ONE_MINUS_SRC_ALPHA, this._$_InitBlendModes$_(t), 
            t.disable(t.CULL_FACE), t.disable(t.STENCIL_TEST), t.disable(t.DITHER), 
            this._$_usesDepthBuffer$_ ? (t.enable(t.DEPTH_TEST), t.depthMask(!0), 
            t.depthFunc(t.LEQUAL)) : (t.disable(t.DEPTH_TEST), t.depthMask(!1)), 
            this._$_isDepthEnabled$_ = this._$_usesDepthBuffer$_, this._$_isDepthSamplingEnabled$_ = !1, 
            this._$_pointBuffer$_ = t.createBuffer(), t.bindBuffer(t.ARRAY_BUFFER, this._$_pointBuffer$_), 
            t.bufferData(t.ARRAY_BUFFER, this._$_pointData$_.byteLength, t.DYNAMIC_DRAW), 
            this._$_vertexBuffer$_ = t.createBuffer(), t.bindBuffer(t.ARRAY_BUFFER, this._$_vertexBuffer$_), 
            t.bufferData(t.ARRAY_BUFFER, this._$_vertexData$_.byteLength, t.DYNAMIC_DRAW), 
            this._$_texcoordBuffer$_ = t.createBuffer(), t.bindBuffer(t.ARRAY_BUFFER, this._$_texcoordBuffer$_), 
            t.bufferData(t.ARRAY_BUFFER, this._$_texcoordData$_.byteLength, t.DYNAMIC_DRAW), 
            this._$_indexBuffer$_ = t.createBuffer(), t.bindBuffer(t.ELEMENT_ARRAY_BUFFER, this._$_indexBuffer$_), 
            t.bufferData(t.ELEMENT_ARRAY_BUFFER, this._$_indexData$_, t.STATIC_DRAW), 
            t.activeTexture(t.TEXTURE0), t.bindTexture(t.TEXTURE_2D, null), this._$_maxTextureSize$_ = t.getParameter(t.MAX_TEXTURE_SIZE), 
            t.getParameter(t.ALIASED_POINT_SIZE_RANGE)), n = (this._$_minPointSize$_ = e[0], 
            this._$_maxPointSize$_ = e[1], t.getShaderPrecisionFormat(t.VERTEX_SHADER, t.HIGH_FLOAT)), h = t.getShaderPrecisionFormat(t.FRAGMENT_SHADER, t.HIGH_FLOAT), r = (this._$_highpPrecision$_ = n && h ? Math.min(n.precision, h.precision) : 0, 
            2048 < this._$_maxPointSize$_ && (this._$_maxPointSize$_ = 2048), this._$_extensions$_ = t.getSupportedExtensions(), 
            t.getExtension("WEBGL_debug_renderer_info"));
            if (r && (this._$_unmaskedVendor$_ = t.getParameter(r.UNMASKED_VENDOR_WEBGL), 
            this._$_unmaskedRenderer$_ = t.getParameter(r.UNMASKED_RENDERER_WEBGL)), 
            this._$_parallelShaderCompileExt$_ = t.getExtension("KHR_parallel_shader_compile"), 
            x.isDebug && (v = t.getExtension("WEBGL_lose_context")), this._$_isGpuProfilingEnabled$_ && (1 === this._$GetWebGLVersionNumber$_() ? this._$_timerExt$_ = t.getExtension("EXT_disjoint_timer_query") : this._$_timerExt$_ = t.getExtension("EXT_disjoint_timer_query_webgl2") || t.getExtension("EXT_disjoint_timer_query")), 
            this._$_anisotropicExt$_ = t.getExtension("EXT_texture_filter_anisotropic"), 
            this._$_anisotropicExt$_ ? this._$_maxAnisotropy$_ = t.getParameter(this._$_anisotropicExt$_.MAX_TEXTURE_MAX_ANISOTROPY_EXT) : this._$_maxAnisotropy$_ = 0, 
            this._$GetWebGLVersionNumber$_() < 2 && this._$_usesDepthBuffer$_ && this._$_canSampleDepth$_ && (this._$_depthTextureExt$_ = t.getExtension("WEBGL_depth_texture"), 
            !this._$_depthTextureExt$_)) throw new Error("no depth texture support");
            this._$GetWebGLVersionNumber$_() < 2 && (this._$_fragDepthExt$_ = t.getExtension("EXT_frag_depth"), 
            this._$_stdDerivativesExt$_ = t.getExtension("OES_standard_derivatives"), 
            this._$_textureLodExt$_ = t.getExtension("EXT_shader_texture_lod"));
            let o = x._$Gfx$_._$WebGLShaderProgram$_, a = o._$GetDefaultVertexShaderSource$_(!1), l = o._$GetTextureFillFragmentShaderSource_WebGL1_NoFragDepth$_(), u = a, c = o._$GetPointFragmentShaderSource_WebGL1_NoFragDepth$_(), f = o._$GetPointVertexShaderSource_WebGL1$_(), d = o._$GetTilemapFragmentShaderSource_WebGL1_NoFragDepth$_(), p = o._$GetDefaultVertexShaderSource$_(!0), m = !1;
            this._$_usesDepthBuffer$_ && (this._$GetWebGLVersionNumber$_() < 2 ? this._$_fragDepthExt$_ && (l = o._$GetTextureFillFragmentShaderSource_WebGL1_FragDepthEXT$_(), 
            c = o._$GetPointFragmentShaderSource_WebGL1_FragDepthEXT$_(), d = o._$GetTilemapFragmentShaderSource_WebGL1_FragDepthEXT$_(), 
            m = !0) : (u = o._$GetDefaultVertexShaderSource_WebGL2$_(), l = o._$GetTextureFillFragmentShaderSource_WebGL2$_(), 
            c = o._$GetPointFragmentShaderSource_WebGL2$_(), f = o._$GetPointVertexShaderSource_WebGL2$_(), 
            d = o._$GetTilemapFragmentShaderSource_WebGL2$_(), p = o._$GetDefaultVertexShaderSource_WebGL2$_(!0)));
            const g = o._$GetTileRandomizationFragmentShaderSource$_(this._$GetWebGLVersionNumber$_(), m, this._$_stdDerivativesExt$_ && this._$_textureLodExt$_), y = 2 <= this._$GetWebGLVersionNumber$_() ? o._$GetDefaultVertexShaderSource_WebGL2$_() : a, M = [ [ l, u, "<default>" ], [ l, u, "<default-device-transform>" ], [ c, f, "<point>" ], [ o._$GetColorFillFragmentShaderSource$_(), a, "<fill>" ], [ o._$GetLinearGradientFillFragmentShaderSource$_(), a, "<lineargradient>" ], [ o._$GetPenumbraFillFragmentShaderSource$_(), a, "<penumbra>" ], [ o._$GetHardEllipseFillFragmentShaderSource$_(), a, "<hardellipse>" ], [ o._$GetHardEllipseOutlineFragmentShaderSource$_(), a, "<hardellipseoutline>" ], [ o._$GetSmoothEllipseFillFragmentShaderSource$_(), a, "<smoothellipse>" ], [ o._$GetSmoothEllipseOutlineFragmentShaderSource$_(), a, "<smoothellipseoutline>" ], [ o._$GetSmoothLineFillFragmentShaderSource$_(), a, "<smoothline>" ], [ d, p, "<tilemap>" ], [ g, y, "<tilerandomization>" ] ], w = await Promise.all(M.map(t => this._$CreateShaderProgram$_({
                src: t[0],
                _$vertexSrc$_: t[1],
                name: t[2]
            })));
            this._$_spTextureFill$_ = w[0], this._$_spDeviceTransformTextureFill$_ = w[1], 
            this._$_spPoints$_ = w[2], this._$_spColorFill$_ = w[3], this._$_spLinearGradientFill$_ = w[4], 
            this._$_spPenumbraFill$_ = w[5], this._$_spHardEllipseFill$_ = w[6], 
            this._$_spHardEllipseOutline$_ = w[7], this._$_spSmoothEllipseFill$_ = w[8], 
            this._$_spSmoothEllipseOutline$_ = w[9], this._$_spSmoothLineFill$_ = w[10], 
            this._$_spTilemapFill$_ = w[11], this._$_spTileRandomization$_ = w[12], 
            this._$SetTextureFillMode$_();
        }
        async _$CreateShaderProgram$_(t) {
            const s = await x._$Gfx$_._$WebGLShaderProgram$_._$Create$_(this, t);
            return this._$_AddShaderProgram$_(s), s;
        }
        _$ResetLastProgram$_() {
            this._$_lastProgram$_ = null;
        }
        _$SetSize$_(t, s, i) {
            if (this._$_width$_ !== t || this._$_height$_ !== s || i) {
                this._$EndBatch$_();
                const e = this._$_gl$_, n = this._$_batchState$_;
                this._$_width$_ = t, this._$_height$_ = s, this._$_SetViewport$_(0, 0, t, s), 
                this._$CalculatePerspectiveMatrix$_(this._$_bbProjectionMatrix$_, t / s), 
                this._$SetProjectionMatrix$_(this._$_bbProjectionMatrix$_), this._$_spDeviceTransformTextureFill$_ && (e.useProgram(this._$_spDeviceTransformTextureFill$_._$GetShaderProgram$_()), 
                this._$_spDeviceTransformTextureFill$_._$_UpdateDeviceTransformUniforms$_(this._$_matP$_), 
                this._$_lastProgram$_ = this._$_spDeviceTransformTextureFill$_, 
                this._$_batchState$_._$currentShader$_ = this._$_spDeviceTransformTextureFill$_), 
                e.bindTexture(e.TEXTURE_2D, null), e.activeTexture(e.TEXTURE1), 
                e.bindTexture(e.TEXTURE_2D, null), e.activeTexture(e.TEXTURE0), 
                this._$_lastTexture0$_ = null, this._$_lastTexture1$_ = null, this._$_usesDepthBuffer$_ && this._$_isAutoSizeDepthBuffer$_ && this._$_SetDepthBufferSize$_(this._$_width$_, this._$_height$_), 
                this._$_currentRenderTarget$_ && this._$_currentRenderTarget$_._$_Resize$_(this._$_width$_, this._$_height$_), 
                e.bindFramebuffer(e.FRAMEBUFFER, null), this._$_currentRenderTarget$_ = null, 
                n._$currentFramebuffer$_ = null, n._$currentFramebufferNoDepth$_ = null;
            }
        }
        _$_SetDepthBufferSize$_(t, s) {
            const i = this._$_gl$_;
            this._$_depthBuffer$_ && this._$_depthBufferWidth$_ === t && this._$_depthBufferHeight$_ === s || (this._$_canSampleDepth$_ ? (this._$_depthBuffer$_ && i.deleteTexture(this._$_depthBuffer$_), 
            this._$_depthBuffer$_ = i.createTexture(), i.bindTexture(i.TEXTURE_2D, this._$_depthBuffer$_), 
            i.texParameteri(i.TEXTURE_2D, i.TEXTURE_MAG_FILTER, i.NEAREST), i.texParameteri(i.TEXTURE_2D, i.TEXTURE_MIN_FILTER, i.NEAREST), 
            i.texParameteri(i.TEXTURE_2D, i.TEXTURE_WRAP_S, i.CLAMP_TO_EDGE), i.texParameteri(i.TEXTURE_2D, i.TEXTURE_WRAP_T, i.CLAMP_TO_EDGE), 
            2 <= this._$GetWebGLVersionNumber$_() ? i.texImage2D(i.TEXTURE_2D, 0, i.DEPTH24_STENCIL8, t, s, 0, i.DEPTH_STENCIL, i.UNSIGNED_INT_24_8, null) : this._$_depthTextureExt$_ && i.texImage2D(i.TEXTURE_2D, 0, i.DEPTH_STENCIL, t, s, 0, i.DEPTH_STENCIL, this._$_depthTextureExt$_.UNSIGNED_INT_24_8_WEBGL, null), 
            i.bindTexture(i.TEXTURE_2D, null)) : (this._$_depthBuffer$_ && i.deleteRenderbuffer(this._$_depthBuffer$_), 
            this._$_depthBuffer$_ = i.createRenderbuffer(), i.bindRenderbuffer(i.RENDERBUFFER, this._$_depthBuffer$_), 
            i.renderbufferStorage(i.RENDERBUFFER, 2 <= this._$_version$_ ? i.DEPTH24_STENCIL8 : i.DEPTH_STENCIL, t, s), 
            i.bindRenderbuffer(i.RENDERBUFFER, null)), this._$_depthBufferWidth$_ = t, 
            this._$_depthBufferHeight$_ = s);
        }
        _$SetFixedSizeDepthBuffer$_(t, s) {
            this._$_usesDepthBuffer$_ && (this._$_isAutoSizeDepthBuffer$_ = !1, 
            this._$_SetDepthBufferSize$_(t, s));
        }
        _$SetAutoSizeDepthBuffer$_() {
            this._$_usesDepthBuffer$_ && (this._$_isAutoSizeDepthBuffer$_ = !0, 
            this._$_SetDepthBufferSize$_(this._$_width$_, this._$_height$_));
        }
        _$_SetViewport$_(t, s, i, e) {
            const n = this._$_viewport$_;
            if (n[0] !== t || n[1] !== s || n[2] !== i || n[3] !== e) {
                const h = this._$PushBatch$_();
                h._$InitSetViewport$_(t, s, i, e), S.set(n, t, s, i, e), this._$_topOfBatch$_ = 0;
            }
        }
        _$SetFovY$_(t) {
            super._$SetFovY$_(t), this._$CalculatePerspectiveMatrix$_(this._$_bbProjectionMatrix$_, this._$_width$_ / this._$_height$_);
        }
        _$SetNearZ$_(t) {
            super._$SetNearZ$_(t), this._$CalculatePerspectiveMatrix$_(this._$_bbProjectionMatrix$_, this._$_width$_ / this._$_height$_);
        }
        _$SetFarZ$_(t) {
            super._$SetFarZ$_(t), this._$CalculatePerspectiveMatrix$_(this._$_bbProjectionMatrix$_, this._$_width$_ / this._$_height$_);
        }
        _$SetProjectionMatrix$_(t) {
            if (!y._$exactEquals$_(this._$_matP$_, t)) {
                const s = this._$PushBatch$_();
                s._$InitSetProjection$_(t), y._$copy$_(this._$_matP$_, t), this._$_topOfBatch$_ = 0, 
                this._$_didChangeTransform$_ = !0;
            }
        }
        _$SetDefaultRenderTargetProjectionState$_() {
            let t, s, i, e = this._$_currentRenderTarget$_;
            i = (null === e ? (t = this._$_bbProjectionMatrix$_, s = this._$GetWidth$_(), 
            this) : (t = e._$GetProjectionMatrix$_(), s = e._$GetWidth$_(), e))._$GetHeight$_(), 
            this._$SetProjectionMatrix$_(t), this._$_SetViewport$_(0, 0, s, i);
        }
        _$SetModelViewMatrix$_(t) {
            if (!y._$exactEquals$_(this._$_matMV$_, t)) {
                const s = this._$PushBatch$_();
                s._$InitSetModelView$_(t), y._$copy$_(this._$_matMV$_, t), this._$_topOfBatch$_ = 0, 
                this._$_didChangeTransform$_ = !0;
            }
        }
        _$ResetDidChangeTransformFlag$_() {
            this._$_didChangeTransform$_ = !1;
        }
        _$DidChangeTransform$_() {
            return this._$_didChangeTransform$_;
        }
        _$GetBatchState$_() {
            return this._$_batchState$_;
        }
        _$PushBatch$_() {
            const t = this._$_batch$_;
            return this._$_batchPtr$_ === t.length && t.push(new x._$Gfx$_._$WebGLBatchJob$_(this._$_batchState$_)), 
            t[this._$_batchPtr$_++];
        }
        _$EndBatch$_() {
            0 === this._$_batchPtr$_ || this._$IsContextLost$_() || (this._$_WriteBuffers$_(), 
            this._$_ExecuteBatch$_(), this._$_batchPtr$_ = 0, this._$_vertexPtr$_ = 0, 
            this._$_texPtr$_ = 0, this._$_pointPtr$_ = 0, this._$_topOfBatch$_ = 0);
        }
        _$_WriteBuffers$_() {
            const t = this._$_gl$_;
            0 < this._$_pointPtr$_ && (t.bindBuffer(t.ARRAY_BUFFER, this._$_pointBuffer$_), 
            t.bufferSubData(t.ARRAY_BUFFER, 0, this._$_pointData$_.subarray(0, this._$_pointPtr$_))), 
            0 < this._$_vertexPtr$_ && (t.bindBuffer(t.ARRAY_BUFFER, this._$_vertexBuffer$_), 
            t.bufferSubData(t.ARRAY_BUFFER, 0, this._$_vertexData$_.subarray(0, this._$_vertexPtr$_)), 
            t.bindBuffer(t.ARRAY_BUFFER, this._$_texcoordBuffer$_), t.bufferSubData(t.ARRAY_BUFFER, 0, this._$_texcoordData$_.subarray(0, this._$_texPtr$_)));
        }
        _$_ExecuteBatch$_() {
            const i = this._$_batch$_;
            for (let t = 0, s = this._$_batchPtr$_; t < s; ++t) i[t]._$Run$_();
        }
        _$GetOpacity$_() {
            return this._$_lastColor$_._$getA$_();
        }
        _$SetColorRgba$_(t, s, i, e) {
            const n = this._$_lastColor$_;
            if (!n._$equalsRgba$_(t, s, i, e)) {
                n._$setRgba$_(t, s, i, e);
                const h = this._$PushBatch$_();
                h._$InitSetColor$_(n), this._$_topOfBatch$_ = 0, this._$_currentStateGroup$_ = null;
            }
        }
        _$SetOpacity$_(t) {
            const s = this._$_lastColor$_;
            if (s._$getA$_() !== t) {
                s._$setA$_(t);
                const i = this._$PushBatch$_();
                i._$InitSetColor$_(s), this._$_topOfBatch$_ = 0, this._$_currentStateGroup$_ = null;
            }
        }
        _$SetColor$_(t) {
            const s = this._$_lastColor$_;
            if (!s.equals(t)) {
                s.set(t);
                const i = this._$PushBatch$_();
                i._$InitSetColor$_(s), this._$_topOfBatch$_ = 0, this._$_currentStateGroup$_ = null;
            }
        }
        _$ResetColor$_() {
            this._$SetColorRgba$_(1, 1, 1, 1);
        }
        _$GetColor$_() {
            return this._$_lastColor$_;
        }
        _$SetTexture$_(t) {
            if (t !== this._$_lastTexture0$_) {
                const s = this._$PushBatch$_();
                s._$InitSetTexture$_(t), this._$_lastTexture0$_ = t, this._$_topOfBatch$_ = 0;
            }
        }
        _$_ResetLastTexture$_() {
            this._$_lastTexture0$_ = null;
        }
        _$SetBlendMode$_(t) {
            const s = this._$_GetBlendByIndex$_(t);
            this._$_SetBlend$_(s[0], s[1]);
        }
        _$SetNamedBlendMode$_(t) {
            const s = this._$GetNamedBlend$_(t);
            this._$_SetBlend$_(s._$srcBlend$_, s._$destBlend$_);
        }
        _$_SetBlend$_(t, s) {
            if (t !== this._$_lastSrcBlend$_ || s !== this._$_lastDestBlend$_) {
                const i = this._$PushBatch$_();
                i._$InitSetBlend$_(t, s), this._$_lastSrcBlend$_ = t, this._$_lastDestBlend$_ = s, 
                this._$_topOfBatch$_ = 0, this._$_currentStateGroup$_ = null;
            }
        }
        _$IsPremultipliedAlphaBlend$_() {
            return this._$_lastSrcBlend$_ === this._$_gl$_.ONE && this._$_lastDestBlend$_ === this._$_gl$_.ONE_MINUS_SRC_ALPHA;
        }
        _$SetAlphaBlend$_() {
            this._$_SetBlend$_(this._$_gl$_.ONE, this._$_gl$_.ONE_MINUS_SRC_ALPHA);
        }
        _$SetNoPremultiplyAlphaBlend$_() {
            this._$_SetBlend$_(this._$_gl$_.SRC_ALPHA, this._$_gl$_.ONE_MINUS_SRC_ALPHA);
        }
        _$SetCopyBlend$_() {
            this._$_SetBlend$_(this._$_gl$_.ONE, this._$_gl$_.ZERO);
        }
        Rect(t) {
            this._$Rect2$_(t._$getLeft$_(), t._$getTop$_(), t._$getRight$_(), t._$getBottom$_());
        }
        _$Rect2$_(t, s, i, e) {
            this._$Quad2$_(t, s, i, s, i, e, t, e);
        }
        _$_ExtendQuadBatch$_() {
            let t = this._$_vertexPtr$_;
            if (t >= this._$_lastVertexPtr$_ && (this._$EndBatch$_(), t = 0), 1 === this._$_topOfBatch$_) this._$_batch$_[this._$_batchPtr$_ - 1]._$_indexCount$_ += 6; else {
                const s = this._$PushBatch$_();
                s._$InitQuad$_(t, 6), this._$_topOfBatch$_ = 1;
            }
        }
        _$_WriteQuadToVertexBuffer$_(t) {
            t._$writeToTypedArray3D$_(this._$_vertexData$_, this._$_vertexPtr$_, this._$_baseZ$_ + this._$_currentZ$_), 
            this._$_vertexPtr$_ += 12;
        }
        _$Quad$_(t) {
            this._$_ExtendQuadBatch$_(), this._$_WriteQuadToVertexBuffer$_(t), c._$writeToTypedArray$_(this._$_texcoordData$_, this._$_texPtr$_), 
            this._$_texPtr$_ += 8;
        }
        _$Quad2$_(t, s, i, e, n, h, r, o) {
            this._$_ExtendQuadBatch$_();
            let a = this._$_vertexData$_, l = this._$_vertexPtr$_, u = this._$_baseZ$_ + this._$_currentZ$_;
            a[l++] = t, a[l++] = s, a[l++] = u, a[l++] = i, a[l++] = e, a[l++] = u, 
            a[l++] = n, a[l++] = h, a[l++] = u, a[l++] = r, a[l++] = o, a[l++] = u, 
            this._$_vertexPtr$_ = l, c._$writeToTypedArray$_(this._$_texcoordData$_, this._$_texPtr$_), 
            this._$_texPtr$_ += 8;
        }
        _$Quad3$_(t, s) {
            this._$_ExtendQuadBatch$_(), this._$_WriteQuadToVertexBuffer$_(t), s._$writeAsQuadToTypedArray$_(this._$_texcoordData$_, this._$_texPtr$_), 
            this._$_texPtr$_ += 8;
        }
        _$Quad4$_(t, s) {
            this._$_ExtendQuadBatch$_(), this._$_WriteQuadToVertexBuffer$_(t), s._$writeToTypedArray$_(this._$_texcoordData$_, this._$_texPtr$_), 
            this._$_texPtr$_ += 8;
        }
        _$Quad3D$_(t, s, i, e, n, h, r, o, a, l, u, c, f) {
            this._$_ExtendQuadBatch$_();
            let d = this._$_vertexData$_, p = this._$_vertexPtr$_, m = this._$_baseZ$_ + this._$_currentZ$_;
            d[p++] = t, d[p++] = s, d[p++] = m + i, d[p++] = e, d[p++] = n, d[p++] = m + h, 
            d[p++] = r, d[p++] = o, d[p++] = m + a, d[p++] = l, d[p++] = u, d[p++] = m + c, 
            this._$_vertexPtr$_ = p, f._$writeAsQuadToTypedArray$_(this._$_texcoordData$_, this._$_texPtr$_), 
            this._$_texPtr$_ += 8;
        }
        _$Quad3D2$_(t, s, i, e, n, h, r, o, a, l, u, c, f) {
            this._$_ExtendQuadBatch$_();
            let d = this._$_vertexData$_, p = this._$_vertexPtr$_, m = this._$_baseZ$_ + this._$_currentZ$_;
            d[p++] = t, d[p++] = s, d[p++] = m + i, d[p++] = e, d[p++] = n, d[p++] = m + h, 
            d[p++] = r, d[p++] = o, d[p++] = m + a, d[p++] = l, d[p++] = u, d[p++] = m + c, 
            this._$_vertexPtr$_ = p, f._$writeToTypedArray$_(this._$_texcoordData$_, this._$_texPtr$_), 
            this._$_texPtr$_ += 8;
        }
        _$DrawMesh$_(e, n, h) {
            const r = this._$_vertexData$_, o = this._$_texcoordData$_;
            if (h.length % 3 != 0) throw new Error("invalid index buffer length");
            for (let i = 0, t = h.length; i < t; ) {
                const a = h[i++], l = h[i++], u = h[i++], c = 3 * a, f = 3 * l, d = 3 * u, p = 2 * a, m = 2 * l, g = 2 * u;
                this._$_ExtendQuadBatch$_();
                let t = this._$_vertexPtr$_, s = this._$_texPtr$_;
                r[t++] = e[0 + c], r[t++] = e[1 + c], r[t++] = e[2 + c], r[t++] = e[0 + f], 
                r[t++] = e[1 + f], r[t++] = e[2 + f], r[t++] = e[0 + d], r[t++] = e[1 + d], 
                r[t++] = e[2 + d], r[t++] = e[0 + d], r[t++] = e[1 + d], r[t++] = e[2 + d], 
                o[s++] = n[0 + p], o[s++] = n[1 + p], o[s++] = n[0 + m], o[s++] = n[1 + m], 
                o[s++] = n[0 + g], o[s++] = n[1 + g], o[s++] = n[0 + g], o[s++] = n[1 + g], 
                this._$_vertexPtr$_ = t, this._$_texPtr$_ = s;
            }
        }
        _$FullscreenQuad$_(t, s) {
            this._$SetCurrentZ$_(0), y._$copy$_(M, this._$_matP$_), y._$copy$_(w, this._$_matMV$_), 
            this._$SetDefaultRenderTargetProjectionState$_();
            const [ i, e ] = this._$GetRenderTargetSize$_(this._$_currentRenderTarget$_), n = this._$CalculateLookAtModelView2$_(0, 0, this._$GetDefaultCameraZ$_(e), 0, 0, 0, e);
            if (this._$SetModelViewMatrix$_(n), "crop" === t && this._$_currentRenderTarget$_ && s) {
                const h = this._$_width$_ / 2, r = this._$_height$_ / 2, o = s._$GetWidth$_(), a = s._$GetHeight$_(), l = this._$_currentRenderTarget$_._$GetWidth$_(), u = this._$_currentRenderTarget$_._$GetHeight$_(), c = Math.min(l, o), f = Math.min(u, a), d = Math.max(a - u, 0), p = Math.max(u - a, 0);
                b.set(-h, r - p, -h + c, r - f - p), T._$setFromRect$_(b), b.set(0, d, c, f + d), 
                b._$divide$_(o, a), this._$Quad3$_(T, b);
            } else {
                const m = i / 2, g = e / 2;
                this._$Rect2$_(-m, g, m, -g);
            }
            this._$SetProjectionMatrix$_(M), this._$SetModelViewMatrix$_(w);
        }
        _$StartRenderingPoints$_(t) {
            if (!this._$_lastPointTexCoords$_.equals(t)) {
                this._$_lastPointTexCoords$_._$copy$_(t);
                const s = this._$PushBatch$_();
                s._$InitSetPointTexCoords$_(t), this._$_topOfBatch$_ = 0;
            }
        }
        _$FinishRenderingPoints$_() {}
        _$Point$_(t, s, i, e) {
            7996 <= this._$_pointPtr$_ && this._$EndBatch$_();
            let n = this._$_pointPtr$_, h = this._$_baseZ$_ + this._$_currentZ$_;
            if (2 === this._$_topOfBatch$_ && this._$_lastPointZ$_ === h) this._$_batch$_[this._$_batchPtr$_ - 1]._$_indexCount$_++; else {
                const o = this._$PushBatch$_();
                o._$InitPoints$_(n, h), this._$_topOfBatch$_ = 2, this._$_lastPointZ$_ = h;
            }
            const r = this._$_pointData$_;
            r[n++] = t, r[n++] = s, r[n++] = i, r[n++] = e, this._$_pointPtr$_ = n;
        }
        _$SetProgram$_(t) {
            if (this._$_lastProgram$_ !== t) {
                const s = this._$PushBatch$_();
                s._$InitSetProgram$_(t), this._$_lastProgram$_ = t, this._$_topOfBatch$_ = 0, 
                this._$_currentStateGroup$_ = null;
            }
        }
        _$GetProgram$_() {
            return this._$_lastProgram$_;
        }
        _$SetDeviceTransformTextureFillMode$_() {
            this._$SetProgram$_(this._$_spDeviceTransformTextureFill$_);
        }
        _$SetGradientColor$_(t) {
            const s = this._$PushBatch$_();
            s._$InitSetGradientColor$_(t), this._$_topOfBatch$_ = 0;
        }
        _$SetEllipseParams$_(t, s, i = 1) {
            const e = this._$PushBatch$_();
            e._$InitSetEllipseParams$_(t, s, i), this._$_topOfBatch$_ = 0;
        }
        _$SetTilemapInfo$_(t, s, i, e, n, h, r) {
            if (this._$_lastProgram$_ !== this._$_spTilemapFill$_) throw new Error("must set tilemap fill mode first");
            const o = this._$PushBatch$_();
            o._$InitSetTilemapInfo$_(t, s, i, e, n, h, r), this._$_topOfBatch$_ = 0;
        }
        _$SetTileRandomizationInfo$_(t, s, i, e, n, h, r) {
            if (this._$_lastProgram$_ !== this._$_spTileRandomization$_) throw new Error("must set tile randomization mode first");
            const o = this._$PushBatch$_();
            o._$InitSetTileRandomizationInfo$_(t, s, i, e, n, h, r), this._$_topOfBatch$_ = 0;
        }
        _$SetProgramParameters$_(t, s, i, e, n, h, r, o, a, l, u) {
            const c = this._$_lastProgram$_;
            if (u %= 10800, c._$_hasAnyOptionalUniforms$_ && !c._$AreOptionalUniformsAlreadySetInBatch$_(s, i, e, n, h, r, o, a, l, u)) {
                const f = this._$PushBatch$_(), d = (f._$InitSetProgramParameters$_(), 
                c._$SetOptionalUniformsInBatch$_(s, i, e, n, h, r, o, a, l, u), 
                f._$_mat4param$_), p = (d[0] = h, d[1] = r, s._$writeToTypedArray$_(d, 2), 
                d[6] = a, d[7] = l, i._$writeToTypedArray$_(d, 12), f._$_colorParam$_), m = (n._$writeToTypedArray$_(p, 0), 
                p[1]);
                p[1] = p[3], p[3] = m, e._$writeToTypedArray$_(f._$_srcOriginRect$_, 0), 
                f._$_startIndex$_ = u, f._$_indexCount$_ = o, c._$_uSamplerBack$_._$IsUsed$_() ? f._$_texParam$_ = t ? t._$GetTexture$_() : null : f._$_texParam$_ = null, 
                this._$_topOfBatch$_ = 0;
            }
        }
        _$SetProgramCustomParameters$_(t) {
            const s = this._$_lastProgram$_;
            if (0 !== t.length && !s._$AreCustomParametersAlreadySetInBatch$_(t)) {
                const i = this._$PushBatch$_();
                i._$InitSetProgramCustomParameters$_(), s._$SetCustomParametersInBatch$_(t), 
                x._$shallowAssignArray$_(i._$_shaderParams$_, t), this._$_topOfBatch$_ = 0;
            }
        }
        _$ClearRgba$_(t, s, i, e) {
            const n = this._$PushBatch$_();
            n._$InitClearSurface2$_(t, s, i, e), this._$_topOfBatch$_ = 0;
        }
        _$Clear$_(t) {
            const s = this._$PushBatch$_();
            s._$InitClearSurface$_(t), this._$_topOfBatch$_ = 0;
        }
        _$Start$_() {}
        _$Finish$_() {
            super._$Finish$_(), this._$_gl$_.flush();
        }
        _$ClearDepth$_() {
            if (this._$_usesDepthBuffer$_ && this._$_currentRenderTarget$_ && this._$_currentRenderTarget$_._$HasDepthBuffer$_()) {
                const t = this._$PushBatch$_();
                t._$InitClearDepth$_(this._$_isDepthEnabled$_), this._$_topOfBatch$_ = 0;
            }
        }
        _$SetDepthEnabled$_(t) {
            if (this._$_isDepthEnabled$_ !== (t = !!t) && this._$_usesDepthBuffer$_) {
                this._$_isDepthEnabled$_ = t;
                const s = this._$PushBatch$_();
                s._$InitSetDepthEnabled$_(t), this._$_topOfBatch$_ = 0;
            }
        }
        _$IsDepthEnabled$_() {
            return this._$_isDepthEnabled$_;
        }
        _$_GetDepthBuffer$_() {
            return this._$_depthBuffer$_;
        }
        _$_CanSampleDepth$_() {
            return this._$_canSampleDepth$_;
        }
        _$SetDepthSamplingEnabled$_(t) {
            if (t = !!t, this._$_canSampleDepth$_ && this._$_isDepthSamplingEnabled$_ !== t) {
                if (t && this._$IsDepthEnabled$_()) throw new Error("depth still enabled");
                this._$_isDepthSamplingEnabled$_ = t;
                const s = this._$PushBatch$_();
                s._$InitSetDepthSamplingEnabled$_(t), this._$_topOfBatch$_ = 0;
            }
        }
        _$SetScissorRect$_(t, s, i, e, n = 0) {
            if (t = Math.floor(t), s = Math.floor(s), i = Math.floor(i), e = Math.floor(e), 
            !this._$_lastScissorRect$_._$equalsWH$_(t, s, i, e)) {
                this._$_lastScissorRect$_._$setWH$_(t, s, i, e);
                const h = n || this._$GetRenderTargetSize$_(this._$GetRenderTarget$_())[1], r = (s = h - s - e, 
                this._$PushBatch$_());
                r._$InitSetScissor$_(!0, t, s, i, e), this._$_topOfBatch$_ = 0;
            }
        }
        _$RemoveScissorRect$_() {
            if (-1 !== this._$_lastScissorRect$_._$getRight$_()) {
                this._$_lastScissorRect$_.set(0, 0, -1, -1);
                const t = this._$PushBatch$_();
                t._$InitSetScissor$_(!1, 0, 0, 0, 0), this._$_topOfBatch$_ = 0;
            }
        }
        _$CheckForQueryResults$_() {
            for (const t of this._$_allQueryResultBuffers$_) t._$CheckForResults$_(this._$_frameNumber$_);
        }
        _$IsContextLost$_() {
            return !this._$_gl$_ || this._$_gl$_.isContextLost() || this._$_isInitialisingAfterContextRestored$_;
        }
        _$OnContextLost$_() {
            super._$OnDeviceOrContextLost$_(), x._$Gfx$_._$WebGLRendererTexture$_._$OnContextLost$_(), 
            x._$Gfx$_._$WebGLRenderTarget$_._$OnContextLost$_(), x._$Gfx$_._$RendererText$_._$OnContextLost$_();
            for (const t of this._$_allQueryResultBuffers$_) t._$Clear$_();
            this._$_extensions$_ = [], this._$_timerExt$_ = null, this._$_parallelShaderCompileExt$_ = null, 
            this._$_anisotropicExt$_ = null, this._$_depthTextureExt$_ = null, this._$_fragDepthExt$_ = null, 
            this._$_stdDerivativesExt$_ = null, this._$_textureLodExt$_ = null, 
            this._$_maxAnisotropy$_ = 0, this._$_unmaskedVendor$_ = "(unavailable)", 
            this._$_unmaskedRenderer$_ = "(unavailable)", this._$_lastProgram$_ = null, 
            this._$_spDeviceTransformTextureFill$_ = null, this._$_depthBuffer$_ = null;
            for (const s of this._$_stateGroups$_.values()) s._$OnContextLost$_();
        }
        async _$OnContextRestored$_() {
            this._$_isInitialisingAfterContextRestored$_ = !0, await this._$InitState$_(), 
            this._$_isInitialisingAfterContextRestored$_ = !1;
            for (const t of this._$_stateGroups$_.values()) t._$OnContextRestored$_(this);
            this._$SetSize$_(this._$_width$_, this._$_height$_, !0);
        }
        _$CreateStaticTexture$_(t, s) {
            if (this._$IsContextLost$_()) throw new Error("context lost");
            this._$EndBatch$_();
            const i = x._$New$_(x._$Gfx$_._$WebGLRendererTexture$_, this);
            return i._$_CreateStatic$_(t, s), i;
        }
        async _$CreateStaticTextureAsync$_(e, n) {
            if (this._$IsContextLost$_()) throw new Error("context lost");
            if (n = Object.assign({}, n), x._$Supports$_.ImageBitmapOptions) {
                let t = await createImageBitmap(e, {
                    premultiplyAlpha: "premultiply"
                }), s = n._$wrapX$_ && "clamp-to-edge" !== n._$wrapX$_ || n._$wrapY$_ && "clamp-to-edge" !== n._$wrapY$_, i = x._$isPOT$_(t.width) && x._$isPOT$_(t.height);
                return this._$SupportsNPOTTextures$_() || i || !s ? n.premultiplyAlpha = !1 : x._$Supports$_._$ImageBitmapOptionsResize$_ ? (t = await createImageBitmap(e, {
                    premultiplyAlpha: "premultiply",
                    resizeWidth: x._$nextHighestPowerOfTwo$_(t.width),
                    resizeHeight: x._$nextHighestPowerOfTwo$_(t.height)
                }), n.premultiplyAlpha = !1) : t = await createImageBitmap(e, {
                    premultiplyAlpha: "none"
                }), x._$Asyncify$_(() => this._$CreateStaticTexture$_(t, n));
            }
            if (e instanceof Blob) {
                if ("undefined" == typeof Image) throw new Error("texture upload variant not supported in worker");
                const t = await x._$BlobToImage$_(e);
                e = t;
            }
            return x._$Asyncify$_(() => this._$CreateStaticTexture$_(e, n));
        }
        _$CreateDynamicTexture$_(t, s, i) {
            this._$EndBatch$_();
            const e = x._$New$_(x._$Gfx$_._$WebGLRendererTexture$_, this);
            return e._$_CreateDynamic$_(t, s, i), e;
        }
        _$UpdateTexture$_(t, s, i) {
            this._$EndBatch$_(), s._$_Update$_(t, i);
        }
        _$DeleteTexture$_(t) {
            t && (t._$SubtractReference$_(), 0 < t._$GetReferenceCount$_() || (this._$EndBatch$_(), 
            t === this._$_lastTexture0$_ && (this._$_gl$_.bindTexture(this._$_gl$_.TEXTURE_2D, null), 
            this._$_lastTexture0$_ = null), t === this._$_lastTexture1$_ && (this._$_gl$_.activeTexture(this._$_gl$_.TEXTURE1), 
            this._$_gl$_.bindTexture(this._$_gl$_.TEXTURE_2D, null), this._$_gl$_.activeTexture(this._$_gl$_.TEXTURE0), 
            this._$_lastTexture1$_ = null), t._$_Delete$_()));
        }
        _$CreateRenderTarget$_(t) {
            let s = this._$_width$_, i = this._$_height$_, e = !0;
            if (t && ("number" == typeof t.width && (s = Math.floor(t.width), e = !1), 
            "number" == typeof t.height) && (i = Math.floor(t.height), e = !1), 
            s <= 0 || i <= 0) throw new Error("invalid size");
            this._$EndBatch$_();
            const n = x._$New$_(x._$Gfx$_._$WebGLRenderTarget$_, this);
            return n._$_Create$_(s, i, Object.assign({
                _$isDefaultSize$_: e
            }, t)), this._$_currentRenderTarget$_ = null, this._$_batchState$_._$currentFramebuffer$_ = null, 
            this._$_batchState$_._$currentFramebufferNoDepth$_ = null, n;
        }
        _$SetRenderTarget$_(t, s = !0) {
            if (t !== this._$_currentRenderTarget$_) {
                t && t._$IsDefaultSize$_() && t._$_Resize$_(this._$_width$_, this._$_height$_);
                const i = this._$PushBatch$_();
                i._$InitSetRenderTarget$_(t), this._$_currentRenderTarget$_ = t, 
                this._$_topOfBatch$_ = 0, s && this._$SetDefaultRenderTargetProjectionState$_();
            }
        }
        _$GetRenderTarget$_() {
            return this._$_currentRenderTarget$_;
        }
        _$GetRenderTargetSize$_(t) {
            return t ? [ t._$GetWidth$_(), t._$GetHeight$_() ] : [ this._$_width$_, this._$_height$_ ];
        }
        _$CopyRenderTarget$_(t, s = "stretch") {
            if (this._$_version$_ < 2 || this._$_currentRenderTarget$_ && 0 < this._$_currentRenderTarget$_._$GetMultisampling$_()) this._$SetCopyBlend$_(), 
            this._$ResetColor$_(), this._$DrawRenderTarget$_(t, s); else {
                const i = this._$PushBatch$_();
                i._$InitBlitFramebuffer$_(t, this._$_currentRenderTarget$_, s), 
                this._$_topOfBatch$_ = 0;
            }
        }
        _$DrawRenderTarget$_(t, s = "stretch") {
            const i = t._$GetTexture$_();
            if (!i) throw new Error("not a texture-backed render target");
            this._$SetTexture$_(i), this._$FullscreenQuad$_(s, i);
        }
        _$InvalidateRenderTarget$_(t) {
            if (!(this._$_version$_ < 2)) {
                const s = this._$PushBatch$_();
                s._$InitInvalidateFramebuffer$_(t._$_GetFramebuffer$_()), this._$_topOfBatch$_ = 0;
            }
        }
        _$DeleteRenderTarget$_(t) {
            this._$SetRenderTarget$_(null), this._$EndBatch$_();
            const s = t._$GetTexture$_();
            s === this._$_lastTexture0$_ && (this._$_gl$_.bindTexture(this._$_gl$_.TEXTURE_2D, null), 
            this._$_lastTexture0$_ = null), s === this._$_lastTexture1$_ && (this._$_gl$_.activeTexture(this._$_gl$_.TEXTURE1), 
            this._$_gl$_.bindTexture(this._$_gl$_.TEXTURE_2D, null), this._$_gl$_.activeTexture(this._$_gl$_.TEXTURE0), 
            this._$_lastTexture1$_ = null), t._$_Delete$_();
        }
        async _$ReadBackRenderTargetToImageData$_(t, s, i) {
            this._$EndBatch$_();
            let e = this._$_currentRenderTarget$_, n, h, r, o = (r = t ? (n = t._$GetWidth$_(), 
            h = t._$GetHeight$_(), t._$_GetFramebuffer$_()) : (n = this._$GetWidth$_(), 
            h = this._$GetHeight$_(), null), 0), a = 0, l = n, u = h;
            if (i) {
                o = x._$clamp$_(Math.floor(i._$getLeft$_()), 0, n - 1), a = x._$clamp$_(Math.floor(i._$getTop$_()), 0, h - 1);
                let t = i.width(), s = (t = 0 === t ? n - o : x._$clamp$_(Math.floor(t), 0, n - o), 
                i.height());
                s = 0 === s ? h - a : x._$clamp$_(Math.floor(s), 0, h - a), l = t, 
                u = s, a = h - (a + u);
            }
            let c = this._$_gl$_, f = (c.bindFramebuffer(c.FRAMEBUFFER, r), () => {
                c.bindFramebuffer(c.FRAMEBUFFER, null), this._$_currentRenderTarget$_ = null, 
                this._$_batchState$_._$currentFramebuffer$_ = null, this._$_batchState$_._$currentFramebufferNoDepth$_ = null, 
                this._$SetRenderTarget$_(e);
            }), d;
            if (!s && 2 <= this._$GetWebGLVersionNumber$_()) {
                c.bindFramebuffer(c.READ_FRAMEBUFFER, r);
                const p = c.createBuffer(), m = l * u * 4, g = c.PIXEL_PACK_BUFFER, y = (c.bindBuffer(g, p), 
                c.bufferData(g, m, c.STREAM_READ), c.readPixels(o, a, l, u, c.RGBA, c.UNSIGNED_BYTE, 0), 
                c.bindFramebuffer(c.READ_FRAMEBUFFER, null), c.bindBuffer(g, null), 
                f(), c.fenceSync(c.SYNC_GPU_COMMANDS_COMPLETE, 0));
                await this._$_WaitForObjectReady$_(() => c.getSyncParameter(y, c.SYNC_STATUS) === c.SIGNALED), 
                c.deleteSync(y), d = new ImageData(l, u), c.bindBuffer(g, p), c.getBufferSubData(g, 0, new Uint8Array(d.data.buffer), 0, m), 
                c.bindBuffer(g, null), c.deleteBuffer(p);
            } else d = new ImageData(l, u), c.readPixels(o, a, l, u, c.RGBA, c.UNSIGNED_BYTE, new Uint8Array(d.data.buffer)), 
            f();
            return d;
        }
        _$CoplanarStartStencilPass$_() {
            this._$SetDepthEnabled$_(!0);
            const t = this._$PushBatch$_();
            t._$InitCoplanarStartStencilPass$_(), this._$_topOfBatch$_ = 0, this._$_coplanarMode$_ = 1;
        }
        _$CoplanarStartColorPass$_() {
            this._$SetDepthEnabled$_(!1);
            const t = this._$PushBatch$_();
            t._$InitCoplanarStartColorPass$_(), this._$_topOfBatch$_ = 0, this._$_coplanarMode$_ = 2;
        }
        _$IsCoplanarColorPass$_() {
            return 2 === this._$_coplanarMode$_;
        }
        _$CoplanarRestoreStandardRendering$_() {
            this._$SetDepthEnabled$_(!0);
            const t = this._$PushBatch$_();
            t._$InitCoplanarRestore$_(), this._$_topOfBatch$_ = 0, this._$_coplanarMode$_ = 0;
        }
        _$StartQuery$_(t) {
            if (this._$SupportsGPUProfiling$_()) {
                const s = this._$PushBatch$_();
                s._$InitStartQuery$_(t), this._$_topOfBatch$_ = 0;
            }
        }
        _$EndQuery$_(t) {
            if (this._$SupportsGPUProfiling$_()) {
                const s = this._$PushBatch$_();
                s._$InitEndQuery$_(t), this._$_topOfBatch$_ = 0;
            }
        }
        _$_WaitForObjectReady$_(s) {
            const t = new Promise(t => e.add({
                resolve: t,
                _$checkFunc$_: s
            }));
            return -1 === n && (n = self.requestAnimationFrame(i)), t;
        }
        _$GetEstimatedBackBufferMemoryUsage$_() {
            return this._$_width$_ * this._$_height$_ * (this._$_attribs$_.alpha ? 4 : 3);
        }
        _$GetEstimatedRenderBufferMemoryUsage$_() {
            let t = 0;
            for (const s of x._$Gfx$_._$WebGLRenderTarget$_._$allRenderTargets$_()) s._$GetTexture$_() || (t += s._$GetEstimatedMemoryUsage$_());
            return t;
        }
        _$GetEstimatedTextureMemoryUsage$_() {
            let t = 0;
            for (const s of x._$Gfx$_._$WebGLRendererTexture$_._$allTextures$_()) t += s._$GetEstimatedMemoryUsage$_();
            return t;
        }
        _$GetWebGLVersionString$_() {
            return this._$_versionString$_;
        }
        _$GetWebGLVersionNumber$_() {
            return this._$_version$_;
        }
        _$GetDisplayName$_() {
            return "webgl" + this._$GetWebGLVersionNumber$_();
        }
        _$SupportsNPOTTextures$_() {
            return 2 <= this._$GetWebGLVersionNumber$_();
        }
        _$GetMaxTextureSize$_() {
            return this._$_maxTextureSize$_;
        }
        _$GetMinPointSize$_() {
            return this._$_minPointSize$_;
        }
        _$GetMaxPointSize$_() {
            return this._$_maxPointSize$_;
        }
        _$SupportsHighP$_() {
            return 0 !== this._$_highpPrecision$_;
        }
        _$GetHighPPrecision$_() {
            return this._$_highpPrecision$_;
        }
        _$GetUnmaskedVendor$_() {
            return this._$_unmaskedVendor$_;
        }
        _$GetUnmaskedRenderer$_() {
            return this._$_unmaskedRenderer$_;
        }
        _$GetWebGLExtensionsAnalyticsString$_() {
            if (2 <= this._$GetWebGLVersionNumber$_()) return "webgl2";
            {
                const t = [];
                return this._$_fragDepthExt$_ && t.push("EXT_frag_depth"), this._$_stdDerivativesExt$_ && t.push("OES_standard_derivatives"), 
                this._$_textureLodExt$_ && t.push("EXT_shader_texture_lod"), 0 < t.length ? "webgl1:" + t.join(",") : "webgl1:none";
            }
        }
        _$GetExtensions$_() {
            return this._$_extensions$_;
        }
        _$SupportsGPUProfiling$_() {
            return !!this._$_timerExt$_;
        }
        _$_GetDisjointTimerQueryExtension$_() {
            return this._$_timerExt$_;
        }
        _$_GetParallelShaderCompileExtension$_() {
            return this._$_parallelShaderCompileExt$_;
        }
        _$_GetAnisotropicExtension$_() {
            return this._$_anisotropicExt$_;
        }
        _$_GetMaxAnisotropy$_() {
            return this._$_maxAnisotropy$_;
        }
        _$_AddQueryResultBuffer$_(t) {
            this._$_allQueryResultBuffers$_.add(t);
        }
        _$_RemoveQueryResultBuffer$_(t) {
            this._$_allQueryResultBuffers$_.delete(t);
        }
        _$_GetTimeQueryStack$_() {
            return this._$_timeQueryStack$_;
        }
        _$GetContext$_() {
            return this._$_gl$_;
        }
        _$_InitBlendModes$_(t) {
            this._$_InitBlendModeData$_([ [ "normal", t.ONE, t.ONE_MINUS_SRC_ALPHA ], [ "additive", t.ONE, t.ONE ], [ "xor", t.ONE, t.ONE_MINUS_SRC_ALPHA ], [ "copy", t.ONE, t.ZERO ], [ "destination-over", t.ONE_MINUS_DST_ALPHA, t.ONE ], [ "source-in", t.DST_ALPHA, t.ZERO ], [ "destination-in", t.ZERO, t.SRC_ALPHA ], [ "source-out", t.ONE_MINUS_DST_ALPHA, t.ZERO ], [ "destination-out", t.ZERO, t.ONE_MINUS_SRC_ALPHA ], [ "source-atop", t.DST_ALPHA, t.ONE_MINUS_SRC_ALPHA ], [ "destination-atop", t.ONE_MINUS_DST_ALPHA, t.SRC_ALPHA ] ]);
        }
        _$CreateWebGLText$_() {
            return this._$CreateRendererText$_();
        }
    };
}

{
    const Vi = self._$C3$_, Ji = {
        _$getDrawSize$_: null,
        _$getRenderTarget$_: null,
        _$releaseRenderTarget$_: null,
        getTime: null,
        _$redraw$_: null
    };
    Vi._$Gfx$_._$EffectChainManager$_ = class {
        constructor(t) {
            t = Object.assign({}, Ji, t), this._$_cbGetDrawSize$_ = t._$getDrawSize$_, 
            this._$_cbGetRenderTarget$_ = t._$getRenderTarget$_, this._$_cbReleaseRenderTarget$_ = t._$releaseRenderTarget$_, 
            this._$_cbGetTime$_ = t.getTime, this._$_cbRedraw$_ = t._$redraw$_, 
            this._$_webgpuBackTexture$_ = null, this._$_allEffectChains$_ = new Set();
        }
        _$_AddEffectChain$_(t) {
            this._$_allEffectChains$_.add(t);
        }
        _$_RemoveEffectChain$_(t) {
            this._$_allEffectChains$_.delete(t);
        }
        _$OnContextLost$_() {
            this._$_webgpuBackTexture$_ = null;
            for (const t of this._$_allEffectChains$_) t._$OnContextLost$_();
        }
        _$GetDrawSize$_(t) {
            return this._$_cbGetDrawSize$_ ? this._$_cbGetDrawSize$_(t) : [ t._$GetWidth$_(), t._$GetHeight$_() ];
        }
        _$GetRenderTarget$_(t) {
            return this._$_cbGetRenderTarget$_(t);
        }
        _$ReleaseRenderTarget$_(t, s) {
            this._$_cbReleaseRenderTarget$_(t, s);
        }
        _$GetTime$_() {
            return this._$_cbGetTime$_();
        }
        _$Redraw$_(t) {
            this._$_cbRedraw$_(t);
        }
        _$_GetWebGPUBackTexture$_(t, s, i) {
            return s = Math.floor(s), i = Math.floor(i), !this._$_webgpuBackTexture$_ || this._$_webgpuBackTexture$_._$GetWidth$_() === s && this._$_webgpuBackTexture$_._$GetHeight$_() === i || (t._$DeleteTexture$_(this._$_webgpuBackTexture$_), 
            this._$_webgpuBackTexture$_ = null), null === this._$_webgpuBackTexture$_ && (this._$_webgpuBackTexture$_ = t._$CreateStaticTexture$_(null, {
                width: s,
                height: i,
                _$sampling$_: "nearest",
                _$mipMap$_: !1
            })), this._$_webgpuBackTexture$_;
        }
    };
}

{
    const o = self._$C3$_, Yi = self._$glMatrix$_, vn = Yi._$mat4$_, Hi = o._$New$_(o.Rect), qi = o._$New$_(o.Rect), Zi = o._$New$_(o.Rect), Xi = o._$New$_(o.Rect), Ki = vn.create(), $i = vn.create(), te = {
        _$drawContent$_: null,
        _$getSourceTextureInfo$_: null,
        _$getShaderParameters$_: null,
        _$invalidateRenderTargets$_: !1
    }, se = {
        _$indexMap$_: null,
        _$forcePreDraw$_: !1,
        _$forcePostDraw$_: !1,
        _$is3D$_: !1,
        _$isSourceTextureRotated$_: !1,
        _$isRotatedOrNegativeSizeInstance$_: !1,
        _$useFullSurface$_: !1
    };
    o._$Gfx$_._$EffectChain$_ = class {
        constructor(t, s) {
            s = Object.assign({}, te, s), this._$_manager$_ = t, this._$_cbDrawContent$_ = s._$drawContent$_, 
            this._$_cbGetSourceTextureInfo$_ = s._$getSourceTextureInfo$_, this._$_cbGetShaderParameters$_ = s._$getShaderParameters$_, 
            this._$_cbDrawContentHook$_ = null, this._$_shaderProgramList$_ = [], 
            this._$_shaderProgramIndices$_ = [], this._$_steps$_ = [], this._$_needsRebuild$_ = !1, 
            this._$_blendMode$_ = 0, this._$_isAnyShaderAnimated$_ = !1, this._$_isAnyShaderDepthSampling$_ = !1, 
            this._$_isAnyShaderBackgroundBlending$_ = !1, this._$_isAnyShaderCrossSampling$_ = !1, 
            this._$_isAnyIsSrcTexRotated$_ = !1, this._$_useCopyTextureBackgroundSampling$_ = !1, 
            this._$_didChangeTransform$_ = !1, this._$_depthEnabledAtStart$_ = !1, 
            this._$_coplanarColorPassAtStart$_ = !1, this._$_canUseFastPath$_ = !1, 
            this._$_useFullSurface$_ = !1, this._$_isSourceTextureRotated$_ = !1, 
            this._$_numTempSurfacesRequired$_ = 0, this._$_renderTargets$_ = [ null, null, null ], 
            this._$_invalidateRenderTargets$_ = !!s._$invalidateRenderTargets$_, 
            this._$_boxExtendHorizontal$_ = 0, this._$_boxExtendVertical$_ = 0, 
            this._$_drawWidth$_ = 0, this._$_drawHeight$_ = 0, this._$_contentObject$_ = null, 
            this._$_contextObject$_ = null, this._$_layoutRect$_ = o._$New$_(o.Rect), 
            this._$_drawSurfaceRect$_ = o._$New$_(o.Rect), this._$_rcTexOriginal$_ = o._$New$_(o.Rect), 
            this._$_rcTexBounce$_ = o._$New$_(o.Rect), this._$_rcTexDest$_ = o._$New$_(o.Rect), 
            this._$_devicePixelRatio$_ = 1, this._$_layerScale$_ = 1, this._$_layerAngle$_ = 0, 
            this._$_time$_ = 0, this._$_destRenderTarget$_ = null, this._$_backTex$_ = null, 
            this._$_compositOffX$_ = 0, this._$_compositOffY$_ = 0, this._$_updateOwnProjection$_ = !1, 
            this._$_projectionMatrix$_ = vn.create(), this._$_modelViewMatrix$_ = vn.create(), 
            this._$_manager$_._$_AddEffectChain$_(this);
        }
        _$Release$_() {
            this._$_manager$_._$_RemoveEffectChain$_(this), o._$clearArray$_(this._$_steps$_), 
            o._$clearArray$_(this._$_shaderProgramList$_), o._$clearArray$_(this._$_shaderProgramIndices$_), 
            this._$_contentObject$_ = null, this._$_contextObject$_ = null, this._$_cbDrawContent$_ = null, 
            this._$_cbGetSourceTextureInfo$_ = null, this._$_cbGetShaderParameters$_ = null;
        }
        _$OnContextLost$_() {
            this._$_needsRebuild$_ = !0, o._$clearArray$_(this._$_steps$_), o._$clearArray$_(this._$_shaderProgramList$_), 
            o._$clearArray$_(this._$_shaderProgramIndices$_);
        }
        _$NeedsRebuild$_() {
            return this._$_needsRebuild$_;
        }
        _$BuildSteps$_(n, t) {
            if (t = Object.assign({}, se, t), o._$clearArray$_(this._$_steps$_), 
            this._$_boxExtendHorizontal$_ = 0, this._$_boxExtendVertical$_ = 0, 
            this._$_isAnyShaderAnimated$_ = !1, this._$_isAnyShaderDepthSampling$_ = !1, 
            this._$_isAnyShaderBackgroundBlending$_ = !1, this._$_isAnyShaderCrossSampling$_ = !1, 
            this._$_isAnyIsSrcTexRotated$_ = !1, this._$_useCopyTextureBackgroundSampling$_ = !1, 
            this._$_numTempSurfacesRequired$_ = 0, this._$_isSourceTextureRotated$_ = !!t._$isSourceTextureRotated$_, 
            this._$_useFullSurface$_ = !!t._$useFullSurface$_, this._$_needsRebuild$_ = !1, 
            o._$shallowAssignArray$_(this._$_shaderProgramList$_, n), 0 !== n.length) {
                if (t._$indexMap$_) {
                    if (t._$indexMap$_.length !== n.length) throw new Error("incorrect indexMap length");
                    o._$shallowAssignArray$_(this._$_shaderProgramIndices$_, t._$indexMap$_);
                } else {
                    o._$clearArray$_(this._$_shaderProgramIndices$_);
                    for (let t = 0, s = n.length; t < s; ++t) this._$_shaderProgramIndices$_.push(t);
                }
                for (const s of n) this._$_boxExtendHorizontal$_ += s._$GetBoxExtendHorizontal$_(), 
                this._$_boxExtendVertical$_ += s._$GetBoxExtendVertical$_(), s._$IsAnimated$_() && (this._$_isAnyShaderAnimated$_ = !0), 
                s._$UsesDepth$_() && (this._$_isAnyShaderDepthSampling$_ = !0), 
                s._$BlendsBackground$_() && (this._$_isAnyShaderBackgroundBlending$_ = !0), 
                s._$UsesCrossSampling$_() && (this._$_isAnyShaderCrossSampling$_ = !0), 
                s._$UsesIsSrcTexRotated$_() && (this._$_isAnyIsSrcTexRotated$_ = !0);
                this._$_useCopyTextureBackgroundSampling$_ = this._$_ShouldUseCopyTextureBackgroundSampling$_(n[0]._$GetRenderer$_());
                const h = this._$_ShouldPreDraw$_(n[0], t), r = this._$_ShouldPostDraw$_(n.at(-1), t);
                if (1 !== n.length || h || r) {
                    this._$_canUseFastPath$_ = !1;
                    let e = 0;
                    h && (this._$_numTempSurfacesRequired$_ = 1, this._$_steps$_.push(o._$New$_(o._$Gfx$_._$EffectChain$_._$Step$_._$PreDraw$_, this, -1, 1)), 
                    e = 1);
                    for (let s = 0, i = n.length; s < i; ++s) if (0 !== s || h) {
                        let t = 1 === e ? 2 : 1;
                        s !== i - 1 || r || (t = 0), this._$_numTempSurfacesRequired$_ = Math.max(this._$_numTempSurfacesRequired$_, t), 
                        this._$_steps$_.push(o._$New$_(o._$Gfx$_._$EffectChain$_._$Step$_._$Bounce$_, this, e, t, s)), 
                        e = t;
                    } else this._$_numTempSurfacesRequired$_ = 1, this._$_steps$_.push(o._$New$_(o._$Gfx$_._$EffectChain$_._$Step$_._$FirstBounce$_, this, -1, 1, s)), 
                    e = 1;
                    r && this._$_steps$_.push(o._$New$_(o._$Gfx$_._$EffectChain$_._$Step$_._$PostDraw$_, this, e, 0));
                } else this._$_canUseFastPath$_ = !0;
            }
        }
        _$_ShouldPreDraw$_(t, s) {
            return !!(s._$forcePreDraw$_ || t._$MustPreDraw$_() || s._$is3D$_ && !t._$Supports3DDirectRendering$_() || t._$UsesDepth$_() && !this._$_useFullSurface$_ || 0 !== this._$_boxExtendHorizontal$_ || 0 !== this._$_boxExtendVertical$_) || (t._$GetRenderer$_()._$IsWebGL$_() ? t._$BlendsBackground$_() && (s._$isRotatedOrNegativeSizeInstance$_ || s._$isSourceTextureRotated$_) || t._$UsesAnySrcRectOrPixelSize$_() && s._$isSourceTextureRotated$_ : t._$BlendsBackground$_() && !this._$_useCopyTextureBackgroundSampling$_ && s._$isRotatedOrNegativeSizeInstance$_);
        }
        _$_ShouldPostDraw$_(t, s) {
            return !!s._$forcePostDraw$_ || (t._$GetRenderer$_()._$IsWebGL$_() ? t._$BlendsBackground$_() || t._$UsesCrossSampling$_() : (t._$BlendsBackground$_() || t._$UsesCrossSampling$_()) && this._$_UseRenderTargetBackgroundSampling$_());
        }
        _$_ShouldUseCopyTextureBackgroundSampling$_(t) {
            return t._$IsWebGPU$_() && this._$_isAnyShaderBackgroundBlending$_ && !this._$_isAnyShaderCrossSampling$_;
        }
        _$Render$_(t, s, i) {
            t._$IsWebGPU$_() && null === s && (s = t.GetBackbufferRenderTarget()), 
            this._$_destRenderTarget$_ = s, this._$_contentObject$_ = i._$contentObject$_ || null, 
            this._$_contextObject$_ = i.contextObject || null, this._$_blendMode$_ = i._$blendMode$_ || 0, 
            this._$_devicePixelRatio$_ = i.devicePixelRatio || 1, this._$_layerScale$_ = i._$layerScale$_ || 1, 
            this._$_layerAngle$_ = i._$layerAngle$_ || 0, this._$_time$_ = "number" == typeof i.time ? i.time : this._$_manager$_._$GetTime$_(), 
            this._$_didChangeTransform$_ = !1, t._$ResetDidChangeTransformFlag$_(), 
            this._$_isAnyShaderAnimated$_ && this._$_Redraw$_();
            let e = !1;
            if (this._$_UseCopyTextureBackgroundSampling$_() && (this._$_CalculateDrawSizeAndRectangles$_(t, i), 
            e = !0, this._$_backTex$_ = this._$_manager$_._$_GetWebGPUBackTexture$_(t, this._$_drawWidth$_, this._$_drawHeight$_), 
            Hi._$copy$_(this._$_drawSurfaceRect$_), Hi._$roundOuter$_(), t._$IsWebGPU$_() && t._MaybeDoPendingClearRenderPass(this._$_destRenderTarget$_), 
            t.CopyTextureToTexture(this._$_destRenderTarget$_._$GetTexture$_(), this._$_backTex$_, Hi._$getLeft$_(), Hi._$getTop$_(), Hi.width(), Hi.height())), 
            this._$_canUseFastPath$_) this._$_Render_FastPath$_(t, i); else if (e || this._$_CalculateDrawSizeAndRectangles$_(t, i), 
            0 !== this._$_rcTexOriginal$_.width() || 0 !== this._$_rcTexOriginal$_.height()) {
                t._$SetAlphaBlend$_(), t._$ResetColor$_(), t._$SetBaseZ$_(0), t._$SetCurrentZ$_(0), 
                this._$_cbDrawContentHook$_ = i._$drawContentHook$_ || null, this._$_compositOffX$_ = i._$compositOffX$_ || 0, 
                this._$_compositOffY$_ = i._$compositOffY$_ || 0, this._$_updateOwnProjection$_ = !!i._$updateOwnProjection$_, 
                this._$_OnBeforeStartEffectChain$_(t), this._$_renderTargets$_[0] = s, 
                this._$_renderTargets$_[1] = 1 <= this._$_numTempSurfacesRequired$_ ? this._$_GetRenderTarget$_() : null, 
                this._$_renderTargets$_[2] = 2 === this._$_numTempSurfacesRequired$_ ? this._$_GetRenderTarget$_() : null;
                for (const n of this._$_steps$_) {
                    const h = this._$_GetRenderTargetForId$_(n._$GetSrcTargetId$_()), r = this._$_GetRenderTargetForId$_(n._$GetDestTargetId$_());
                    t._$IsWebGPU$_() ? n._$Run_WebGPU$_(t, h, r) : n._$Run_WebGL$_(t, h, r);
                }
                t._$SetTexture$_(null), this._$_renderTargets$_[1] && this._$_ReleaseRenderTarget$_(this._$_renderTargets$_[1]), 
                this._$_renderTargets$_[2] && this._$_ReleaseRenderTarget$_(this._$_renderTargets$_[2]), 
                this._$_renderTargets$_.fill(null), this._$_OnAfterEndEffectChain$_(t), 
                this._$_destRenderTarget$_ = null, this._$_backTex$_ = null, this._$_contentObject$_ = null, 
                this._$_contextObject$_ = null, this._$_cbDrawContentHook$_ = null;
            }
        }
        _$_CalculateDrawSizeAndRectangles$_(t, s) {
            const [ i, e ] = this._$_manager$_._$GetDrawSize$_(t);
            this._$_SetDrawSize$_(t, i, e), this._$_CalculateRectangles$_(s);
        }
        _$_SetDrawSize$_(t, s, i) {
            if (s <= 0 || i <= 0) throw new Error("invalid draw size");
            this._$_drawWidth$_ === s && this._$_drawHeight$_ === i || this._$_CalculateDeviceTransformMatrices$_(t, s, i, 0, 0, this._$_projectionMatrix$_, this._$_modelViewMatrix$_), 
            this._$_drawWidth$_ = s, this._$_drawHeight$_ = i;
        }
        _$_CalculateDeviceTransformMatrices$_(t, s, i, e, n, h, r) {
            const o = s / 2 + e, a = i / 2 + n, l = (t._$CalculatePerspectiveMatrix$_(h, s / i), 
            t._$CalculateLookAtModelView2$_(o, a, t._$GetDefaultCameraZ$_(i), o, a, 0, i));
            vn._$copy$_(r, l);
        }
        _$_CalculateRectangles$_(t) {
            this._$_layoutRect$_._$copy$_(t._$layoutRect$_), t._$drawSurfaceRect$_ ? this._$_drawSurfaceRect$_._$copy$_(t._$drawSurfaceRect$_) : this._$_drawSurfaceRect$_.set(0, 0, this._$_drawWidth$_, this._$_drawHeight$_), 
            this._$_rcTexOriginal$_._$copy$_(this._$_drawSurfaceRect$_), this._$_rcTexOriginal$_._$divide$_(this._$_drawWidth$_, this._$_drawHeight$_);
            const s = this._$_layerScale$_ * this._$_devicePixelRatio$_;
            this._$_drawSurfaceRect$_._$inflate$_(this._$_boxExtendHorizontal$_ * s, this._$_boxExtendVertical$_ * s), 
            this._$_rcTexDest$_._$copy$_(this._$_drawSurfaceRect$_), this._$_rcTexDest$_._$divide$_(this._$_drawWidth$_, this._$_drawHeight$_), 
            this._$_drawSurfaceRect$_._$clampBoth$_(0, 0, this._$_drawWidth$_, this._$_drawHeight$_), 
            this._$_rcTexBounce$_._$copy$_(this._$_drawSurfaceRect$_), this._$_rcTexBounce$_._$divide$_(this._$_drawWidth$_, this._$_drawHeight$_);
        }
        _$_OnBeforeStartEffectChain$_(t) {
            if (this._$_depthEnabledAtStart$_ = t._$IsDepthEnabled$_(), this._$_coplanarColorPassAtStart$_ = t._$IsCoplanarColorPass$_(), 
            this._$_useFullSurface$_) t._$SetDepthEnabled$_(!1), this._$_isAnyShaderDepthSampling$_ && t._$SetDepthSamplingEnabled$_(!0); else {
                if (Hi._$copy$_(this._$_drawSurfaceRect$_), t._$IsWebGL$_()) {
                    const s = this._$_layerScale$_ * this._$_devicePixelRatio$_;
                    Hi._$inflate$_(Math.max(this._$_boxExtendHorizontal$_, 1) * s, Math.max(this._$_boxExtendVertical$_, 1) * s), 
                    Hi._$roundOuter$_(), Hi._$clamp$_(0, 0, this._$_drawWidth$_, this._$_drawHeight$_);
                } else Hi._$roundOuter$_();
                t._$SetScissorRect$_(Hi._$getLeft$_(), Hi._$getTop$_(), Hi.width(), Hi.height(), this._$_drawHeight$_);
            }
        }
        _$_OnAfterEffectChainDrawContent$_(t) {
            t._$ResetColor$_(), this._$_useFullSurface$_ || (this._$_coplanarColorPassAtStart$_ && t._$CoplanarRestoreStandardRendering$_(), 
            t._$SetDepthEnabled$_(!1), this._$_isAnyShaderDepthSampling$_ && t._$SetDepthSamplingEnabled$_(!0)), 
            t._$IsWebGPU$_() && t.SetNormalizedCoordsProgramVariant(!0);
        }
        _$_OnAfterEndEffectChain$_(t) {
            t._$SetDepthSamplingEnabled$_(!1), this._$_coplanarColorPassAtStart$_ && t._$CoplanarStartColorPass$_(), 
            t._$SetDepthEnabled$_(this._$_depthEnabledAtStart$_), this._$_useFullSurface$_ || t._$RemoveScissorRect$_(), 
            t._$IsWebGPU$_() && t.SetNormalizedCoordsProgramVariant(!1), this._$_didChangeTransform$_ = t._$DidChangeTransform$_();
        }
        _$_ClampRcTexDest$_() {
            this._$_rcTexDest$_._$clamp$_(0, 0, 1, 1);
        }
        _$_GetRenderTargetForId$_(t) {
            return t < 0 ? null : this._$_renderTargets$_[t];
        }
        _$_GetRenderTarget$_() {
            return this._$_manager$_._$GetRenderTarget$_(this);
        }
        _$_GetDestRenderTarget$_() {
            return this._$_destRenderTarget$_;
        }
        _$_ReleaseRenderTarget$_(t) {
            this._$_manager$_._$ReleaseRenderTarget$_(t, this);
        }
        _$_GetShaderProgramAt$_(t) {
            return this._$_shaderProgramList$_[t];
        }
        _$_DrawContent$_(t) {
            this._$_cbDrawContentHook$_ ? this._$_cbDrawContentHook$_(this, t, () => this._$_cbDrawContent$_(t, this)) : this._$_cbDrawContent$_(t, this), 
            this._$_canUseFastPath$_ || this._$_OnAfterEffectChainDrawContent$_(t);
        }
        _$_IsRenderTargetSameSizeAndOffset$_(t) {
            if (this._$_useFullSurface$_) return !0;
            if (0 !== this._$_compositOffX$_ || 0 !== this._$_compositOffY$_) return !1;
            const [ s, i ] = t._$GetRenderTargetSize$_(t._$GetRenderTarget$_());
            return s === this._$_drawWidth$_ && i === this._$_drawHeight$_;
        }
        _$_SetDeviceTransform$_(t, s) {
            let i = this._$_projectionMatrix$_, e = this._$_modelViewMatrix$_;
            if (s && !this._$_IsRenderTargetSameSizeAndOffset$_(t)) {
                i = Ki, e = $i;
                const [ n, h ] = t._$GetRenderTargetSize$_(t._$GetRenderTarget$_());
                this._$_CalculateDeviceTransformMatrices$_(t, n, h, this._$_compositOffX$_, this._$_compositOffY$_, i, e), 
                this._$_useFullSurface$_ || t._$RemoveScissorRect$_();
            }
            t._$SetProjectionMatrix$_(i), t._$SetModelViewMatrix$_(e);
        }
        _$_Redraw$_() {
            this._$_manager$_._$Redraw$_(this);
        }
        _$_GetShaderParameters$_(t, s) {
            return this._$_cbGetShaderParameters$_(this._$_shaderProgramIndices$_[t], s);
        }
        _$_SetProgramParameters$_(t, s) {
            let i = this._$_rcTexDest$_, e = this._$_rcTexBounce$_, n = this._$_rcTexOriginal$_;
            t._$IsWebGL$_() && (qi._$copy$_(i), qi._$flipAround$_(1), i = qi, Zi._$copy$_(e), 
            Zi._$flipAround$_(1), e = Zi, Xi._$copy$_(n), Xi._$flipAround$_(1), 
            n = Xi), this._$_DoSetProgramParameters$_(t, s, e, n, i, 1 / this._$_drawWidth$_, 1 / this._$_drawHeight$_);
        }
        _$_SetFirstBounceProgramParameters$_(t, s) {
            let e = this._$_rcTexBounce$_, n = this._$_rcTexOriginal$_, h = 1 / this._$_drawWidth$_, r = 1 / this._$_drawHeight$_;
            if (this._$_cbGetSourceTextureInfo$_) {
                let {
                    _$srcTexRect$_: t,
                    _$srcWidth$_: s,
                    _$srcHeight$_: i
                } = this._$_cbGetSourceTextureInfo$_(this._$_contentObject$_);
                t || (Hi.set(0, 0, 0, 0), t = Hi), s = s || this._$_drawWidth$_, 
                i = i || this._$_drawHeight$_, e = t, n = t, h = 1 / s, r = 1 / i;
            } else t._$IsWebGL$_() && (Zi._$copy$_(e), Zi._$flipAround$_(1), e = Zi, 
            Xi._$copy$_(n), Xi._$flipAround$_(1), n = Xi);
            let i = this._$_rcTexDest$_;
            t._$IsWebGL$_() && ((i = qi)._$copy$_(this._$_rcTexDest$_), i._$flipAround$_(1)), 
            this._$_DoSetProgramParameters$_(t, s, e, n, i, h, r), t._$IsWebGPU$_() && this._$_isAnyIsSrcTexRotated$_ && t.SetProgramParameter_IsSrcTexRotated(this._$_isSourceTextureRotated$_);
        }
        _$_GetBackTex$_(t) {
            return this._$_isAnyShaderBackgroundBlending$_ ? t._$IsWebGPU$_() ? this._$_UseCopyTextureBackgroundSampling$_() ? this._$_backTex$_ : this._$_destRenderTarget$_._$GetTexture$_() : this._$_destRenderTarget$_ : null;
        }
        _$_DoSetProgramParameters$_(t, s, i, e, n, h, r) {
            t._$SetProgramParameters$_(this._$_GetBackTex$_(t), n, i, e, this._$_layoutRect$_, h, r, this._$_devicePixelRatio$_, this._$_layerScale$_, this._$_layerAngle$_, this._$_time$_), 
            t._$SetProgramCustomParameters$_(this._$_GetShaderParameters$_(s, t));
        }
        _$_Render_FastPath$_(t, s) {
            const i = this._$_shaderProgramList$_[0], e = t._$IsDepthEnabled$_(), n = i._$UsesDepth$_();
            n && (t._$SetDepthEnabled$_(!1), t._$SetDepthSamplingEnabled$_(!0), 
            this._$_rcTexDest$_.set(0, 0, 1, 1), this._$_rcTexOriginal$_.set(0, 0, 1, 1)), 
            t._$SetProgram$_(i), t._$SetBlendMode$_(this._$_blendMode$_), t._$SetRenderTarget$_(this._$_destRenderTarget$_);
            let h = 0, r = 1;
            if (this._$_rcTexOriginal$_.set(0, 0, 1, 1), i._$UsesAnySrcRectOrPixelSize$_() && this._$_cbGetSourceTextureInfo$_) {
                const {
                    _$srcTexRect$_: o,
                    _$srcWidth$_: a,
                    _$srcHeight$_: l
                } = this._$_cbGetSourceTextureInfo$_(this._$_contentObject$_);
                o && this._$_rcTexOriginal$_._$copy$_(o), h = Number.isFinite(a) ? 1 / a : 0, 
                r = Number.isFinite(l) ? 1 / l : 0;
            } else {
                const [ u, c ] = this._$_manager$_._$GetDrawSize$_(t);
                h = 1 / u, r = 1 / c;
            }
            s._$layoutRect$_ ? this._$_layoutRect$_._$copy$_(s._$layoutRect$_) : this._$_layoutRect$_.set(0, 0, 0, 0), 
            t._$SetProgramParameters$_(this._$_GetBackTex$_(t), this._$_rcTexDest$_, this._$_rcTexOriginal$_, this._$_rcTexOriginal$_, this._$_layoutRect$_, h, r, this._$_devicePixelRatio$_, this._$_layerScale$_, this._$_layerAngle$_, this._$_time$_), 
            t._$SetProgramCustomParameters$_(this._$_GetShaderParameters$_(0, t)), 
            t._$IsWebGPU$_() && this._$_isAnyIsSrcTexRotated$_ && t.SetProgramParameter_IsSrcTexRotated(this._$_isSourceTextureRotated$_), 
            t._$SetBaseZ$_(0), this._$_DrawContent$_(t), n && (t._$SetDepthSamplingEnabled$_(!1), 
            t._$SetDepthEnabled$_(e));
        }
        _$_UseCopyTextureBackgroundSampling$_() {
            return this._$_useCopyTextureBackgroundSampling$_;
        }
        _$_UseRenderTargetBackgroundSampling$_() {
            return !this._$_useCopyTextureBackgroundSampling$_;
        }
        _$IsAnyShaderBackgroundBlending$_() {
            return this._$_isAnyShaderBackgroundBlending$_;
        }
        _$CanSkipCalculatingDrawSurfaceRect$_() {
            return !!this._$_canUseFastPath$_ && !this._$_UseCopyTextureBackgroundSampling$_();
        }
        _$UseFullSurface$_() {
            return this._$_useFullSurface$_;
        }
        _$GetContentObject$_() {
            return this._$_contentObject$_;
        }
        _$GetContextObject$_() {
            return this._$_contextObject$_;
        }
        _$_GetBlendMode$_() {
            return this._$_blendMode$_;
        }
        _$_UpdateOwnProjection$_() {
            return this._$_updateOwnProjection$_;
        }
        _$DidChangeTransform$_() {
            return this._$_didChangeTransform$_;
        }
        _$_GetDrawSurfaceRect$_() {
            return this._$_drawSurfaceRect$_;
        }
        _$_GetRcTexBounce$_() {
            return this._$_rcTexBounce$_;
        }
        _$_ShouldInvalidateRenderTargets$_() {
            return this._$_invalidateRenderTargets$_;
        }
        async _$DebugLogRenderTargetContents$_(t, s, i) {}
    };
}

{
    const ie = self._$C3$_;
    ie._$Gfx$_._$EffectChain$_._$Step$_ = class {
        constructor(t, s, i, e = -1) {
            this._$_effectChain$_ = t, this._$_srcTargetId$_ = s, this._$_destTargetId$_ = i, 
            this._$_index$_ = e;
        }
        _$GetEffectChain$_() {
            return this._$_effectChain$_;
        }
        _$GetSrcTargetId$_() {
            return this._$_srcTargetId$_;
        }
        _$GetDestTargetId$_() {
            return this._$_destTargetId$_;
        }
        _$GetIndex$_() {
            return this._$_index$_;
        }
        _$GetShaderProgram$_() {
            return this._$GetEffectChain$_()._$_GetShaderProgramAt$_(this._$GetIndex$_());
        }
        _$Run_WebGL$_(t, s, i) {}
        _$Run_WebGPU$_(t, s, i) {}
    };
}

{
    const ee = self._$C3$_;
    ee._$Gfx$_._$EffectChain$_._$Step$_._$PreDraw$_ = class extends ee._$Gfx$_._$EffectChain$_._$Step$_ {
        constructor(t, s, i, e) {
            super(t, s, i, e);
        }
        _$Run_WebGL$_(t, s, i) {
            const e = this._$GetEffectChain$_();
            t._$SetAlphaBlend$_(), t._$SetTextureFillMode$_(), t._$SetRenderTarget$_(i, e._$_UpdateOwnProjection$_()), 
            t._$ClearRgba$_(0, 0, 0, 0), e._$_DrawContent$_(t), e._$_ClampRcTexDest$_();
        }
        _$Run_WebGPU$_(t, s, i) {
            const e = this._$GetEffectChain$_();
            t._$SetAlphaBlend$_(), t._$SetTextureFillMode$_(), t._$SetRenderTarget$_(i, !1), 
            t._$ClearRgba$_(0, 0, 0, 0), e._$_DrawContent$_(t), e._$_ClampRcTexDest$_();
        }
    };
}

{
    const ne = self._$C3$_, he = ne._$New$_(ne.Rect), re = ne._$New$_(ne._$Quad$_);
    ne._$Gfx$_._$EffectChain$_._$Step$_._$PostDraw$_ = class extends ne._$Gfx$_._$EffectChain$_._$Step$_ {
        constructor(t, s, i, e) {
            super(t, s, i, e);
        }
        _$Run_WebGL$_(t, s, i) {
            const e = this._$GetEffectChain$_();
            t._$SetTextureFillMode$_(), t._$SetRenderTarget$_(i), e._$_SetDeviceTransform$_(t, !0), 
            t._$SetBlendMode$_(e._$_GetBlendMode$_()), t._$SetTexture$_(s._$GetTexture$_()), 
            re._$setFromRect$_(e._$_GetDrawSurfaceRect$_()), he._$copy$_(e._$_GetRcTexBounce$_()), 
            he._$flipAround$_(1), t._$Quad3$_(re, he), e._$_ShouldInvalidateRenderTargets$_() && t._$InvalidateRenderTarget$_(s);
        }
        _$Run_WebGPU$_(t, s, i) {
            const e = this._$GetEffectChain$_();
            t._$SetTextureFillMode$_(), t._$SetRenderTarget$_(i, !1), e._$_IsRenderTargetSameSizeAndOffset$_(t) ? re._$setFromRect$_(e._$_GetRcTexBounce$_()) : (t.SetNormalizedCoordsProgramVariant(!1), 
            e._$_SetDeviceTransform$_(t, !0), re._$setFromRect$_(e._$_GetDrawSurfaceRect$_())), 
            t.SetBackTexture(null), t._$SetBlendMode$_(e._$_GetBlendMode$_()), t._$SetTexture$_(s._$GetTexture$_()), 
            e._$UseFullSurface$_() ? t._$FullscreenQuad$_() : t._$Quad3$_(re, e._$_GetRcTexBounce$_());
        }
    };
}

{
    const oe = self._$C3$_;
    oe._$Gfx$_._$EffectChain$_._$Step$_._$FirstBounce$_ = class extends oe._$Gfx$_._$EffectChain$_._$Step$_ {
        constructor(t, s, i, e) {
            super(t, s, i, e);
        }
        _$Run_WebGL$_(t, s, i) {
            const e = this._$GetEffectChain$_();
            t._$SetRenderTarget$_(i, e._$_UpdateOwnProjection$_()), t._$ClearRgba$_(0, 0, 0, 0), 
            t._$SetCopyBlend$_(), t._$SetProgram$_(this._$GetShaderProgram$_()), 
            e._$_SetFirstBounceProgramParameters$_(t, this._$GetIndex$_()), e._$_DrawContent$_(t), 
            e._$_ClampRcTexDest$_();
        }
        _$Run_WebGPU$_(t, s, i) {
            const e = this._$GetEffectChain$_();
            t._$SetRenderTarget$_(i, !1), t._$ClearRgba$_(0, 0, 0, 0), t._$SetCopyBlend$_(), 
            t._$SetProgram$_(this._$GetShaderProgram$_()), e._$_SetFirstBounceProgramParameters$_(t, this._$GetIndex$_()), 
            e._$_DrawContent$_(t), e._$_ClampRcTexDest$_();
        }
    };
}

{
    const ae = self._$C3$_, le = ae._$New$_(ae.Rect), ue = ae._$New$_(ae._$Quad$_);
    ae._$Gfx$_._$EffectChain$_._$Step$_._$Bounce$_ = class extends ae._$Gfx$_._$EffectChain$_._$Step$_ {
        constructor(t, s, i, e) {
            super(t, s, i, e);
        }
        _$Run_WebGL$_(t, s, i) {
            const e = this._$GetEffectChain$_(), n = (t._$SetRenderTarget$_(i), 
            0 === this._$GetDestTargetId$_());
            n ? t._$SetBlendMode$_(e._$_GetBlendMode$_()) : (t._$ClearRgba$_(0, 0, 0, 0), 
            t._$SetCopyBlend$_()), t._$SetProgram$_(this._$GetShaderProgram$_()), 
            e._$_SetProgramParameters$_(t, this._$GetIndex$_()), t._$SetTexture$_(s._$GetTexture$_()), 
            e._$_SetDeviceTransform$_(t, n), ue._$setFromRect$_(e._$_GetDrawSurfaceRect$_()), 
            le._$copy$_(e._$_GetRcTexBounce$_()), le._$flipAround$_(1), t._$Quad3$_(ue, le), 
            e._$_ShouldInvalidateRenderTargets$_() && t._$InvalidateRenderTarget$_(s);
        }
        _$Run_WebGPU$_(t, s, i) {
            const e = this._$GetEffectChain$_(), n = (t._$SetRenderTarget$_(i, !1), 
            0 === this._$GetDestTargetId$_());
            n ? (t._$SetBlendMode$_(e._$_GetBlendMode$_()), t.SetBackTexture(null), 
            e._$_IsRenderTargetSameSizeAndOffset$_(t) ? ue._$setFromRect$_(e._$_GetRcTexBounce$_()) : (t.SetNormalizedCoordsProgramVariant(!1), 
            e._$_SetDeviceTransform$_(t, !0), ue._$setFromRect$_(e._$_GetDrawSurfaceRect$_()))) : (t._$ClearRgba$_(0, 0, 0, 0), 
            t._$SetCopyBlend$_(), ue._$setFromRect$_(e._$_GetRcTexBounce$_())), 
            t._$SetProgram$_(this._$GetShaderProgram$_()), e._$_SetProgramParameters$_(t, this._$GetIndex$_()), 
            t._$SetTexture$_(s._$GetTexture$_()), e._$UseFullSurface$_() ? t._$FullscreenQuad$_() : t._$Quad3$_(ue, e._$_GetRcTexBounce$_());
        }
    };
}

{
    let u = function(t, s) {
        const i = t[0], e = s[0], n = i - e;
        if (0 != n) return n;
        const h = t[1], r = s[1];
        return h - r;
    }, c = (u, self._$C3$_), f = self._$C3X$_, d = null, s = new Set(), p = [], m = [], i = !1, t = !1, e = new Set([ "vsync", "unlimited-tick", "unlimited-frame" ]);
    self._$IRuntime$_ = class {
        constructor(t) {
            d = t, Object.defineProperties(this, {
                _$assets$_: {
                    value: d._$GetAssetManager$_()._$GetIAssetManager$_(),
                    writable: !1
                },
                _$collisions$_: {
                    value: d._$GetCollisionEngine$_()._$GetICollisionEngine$_(),
                    writable: !1
                },
                _$objects$_: {
                    value: {},
                    writable: !1
                },
                _$globalVars$_: {
                    value: {},
                    writable: !1
                },
                _$projectName$_: {
                    value: d._$GetProjectName$_(),
                    writable: !1
                },
                _$projectVersion$_: {
                    value: d._$GetProjectVersion$_(),
                    writable: !1
                },
                _$exportDate$_: {
                    value: new Date(d._$GetExportTimestamp$_()),
                    writable: !1
                },
                storage: {
                    value: new self._$IStorage$_(d),
                    writable: !1
                },
                isInWorker: {
                    value: d._$IsInWorker$_(),
                    writable: !1
                },
                _$viewportWidth$_: {
                    value: d._$GetOriginalViewportWidth$_(),
                    writable: !1
                },
                _$viewportHeight$_: {
                    value: d._$GetOriginalViewportHeight$_(),
                    writable: !1
                },
                _$sampling$_: {
                    value: d._$GetSampling$_(),
                    writable: !1
                },
                _$isPixelRoundingEnabled$_: {
                    value: d._$IsPixelRoundingEnabled$_(),
                    writable: !1
                },
                _$platformInfo$_: {
                    value: new self._$IPlatformInfo$_(t),
                    writable: !1
                },
                _$sdk$_: {
                    value: new self._$ISDKUtils$_(t),
                    writable: !1
                }
            }), d._$UserScriptDispatcher$_().addEventListener("keydown", t => {
                s.has(t.key) ? t.stopPropagation() : s.add(t.key);
            }), d._$UserScriptDispatcher$_().addEventListener("keyup", t => s.delete(t.key)), 
            d._$Dispatcher$_().addEventListener("window-blur", () => s.clear()), 
            d._$IsInWorker$_() && (self.alert = t => (i || (i = !0, console.warn("[Construct] alert() was called from a Web Worker, because the project 'Use worker' setting is enabled. This method is not normally available in a Web Worker. Construct has implemented the alert for you, but note that other features may be missing in worker mode. You may wish to disable 'Use worker', or use a more convenient function like console.log(). For more information please refer to the scripting section of the manual.")), 
            this.alert(t)));
        }
        _$_InitObjects$_(t) {
            Object.defineProperties(this._$objects$_, t);
        }
        _$_InitGlobalVars$_(t) {
            Object.defineProperties(this._$globalVars$_, t);
        }
        addEventListener(t, s) {
            d._$UserScriptDispatcher$_().addEventListener(t, s);
        }
        removeEventListener(t, s) {
            d._$UserScriptDispatcher$_().removeEventListener(t, s);
        }
        _$callFunction$_(t, ...s) {
            f._$RequireString$_(t);
            const i = d._$GetEventSheetManager$_(), e = i._$GetFunctionBlockByName$_(t);
            if (!e) throw new Error(`cannot find function name '${t}'`);
            if (!e._$IsEnabled$_()) return e._$GetDefaultReturnValue$_();
            if (s.length < e._$GetFunctionParameterCount$_()) throw new Error(`not enough function parameters passed for '${t}' (${s.length} passed, ${e._$GetFunctionParameterCount$_()} expected)`);
            let n = e._$GetEventBlock$_(), h = n._$GetSolModifiersIncludingParents$_(), r = i._$GetCurrentEvent$_();
            if (r) {
                h = h.slice(0);
                const a = new Set(h);
                for (const l of r._$GetSolModifiersIncludingParents$_()) a.has(l) || (h.push(l), 
                a.add(l));
                for (const u of i._$GetDynamicSolModifiersSet$_()) a.has(u) || (h.push(u), 
                a.add(u));
            }
            const o = n._$RunAsExpressionFunctionCall$_(h, e._$IsCopyPicked$_(), e._$GetReturnType$_(), e._$GetDefaultReturnValue$_(), ...s);
            return o;
        }
        _$setReturnValue$_(t) {
            const s = d._$GetEventStack$_()._$GetCurrentExpFuncStackFrame$_();
            if (!s) throw new Error("not in a function which returns a value");
            switch (s._$GetFunctionReturnType$_()) {
              case 1:
                "number" == typeof t && s._$SetFunctionReturnValue$_(t);
                break;

              case 2:
                "string" == typeof t && s._$SetFunctionReturnValue$_(t);
                break;

              case 3:
                "number" != typeof t && "string" != typeof t || s._$SetFunctionReturnValue$_(t);
            }
        }
        signal(t) {
            f._$RequireString$_(t), d._$GetEventSheetManager$_()._$Signal$_(t);
        }
        _$waitForSignal$_(t) {
            return f._$RequireString$_(t), d._$GetEventSheetManager$_()._$WaitForSignal$_(t);
        }
        _$getViewportSize$_() {
            return [ d._$GetOriginalViewportWidth$_(), d._$GetOriginalViewportHeight$_() ];
        }
        get isSuspended() {
            return d._$IsSuspended$_();
        }
        get _$dt$_() {
            return d._$GetDt$_();
        }
        get _$dtRaw$_() {
            return d._$GetDtRaw$_();
        }
        get gameTime() {
            return d._$GetGameTime$_();
        }
        get _$wallTime$_() {
            return d._$GetWallTime$_();
        }
        get timeScale() {
            return d._$GetTimeScale$_();
        }
        set timeScale(t) {
            f._$RequireFiniteNumber$_(t), d._$SetTimeScale$_(t);
        }
        get fps() {
            return t || (console.warn("IRuntime.fps is deprecated. Use IRuntime.framesPerSecond instead."), 
            t = !0), d._$GetFramesPerSecond$_();
        }
        get framesPerSecond() {
            return d._$GetFramesPerSecond$_();
        }
        get _$ticksPerSecond$_() {
            return d._$GetTicksPerSecond$_();
        }
        get _$cpuUtilisation$_() {
            return d._$GetMainThreadTime$_();
        }
        get _$gpuUtilisation$_() {
            return d._$GetGPUUtilisation$_();
        }
        get _$framerateMode$_() {
            return d._$GetFramerateMode$_();
        }
        set _$framerateMode$_(t) {
            if (!e.has(t)) throw new Error("invalid framerate mode");
            d._$_SetFramerateMode$_(t);
        }
        get _$minDt$_() {
            return d._$GetMinDt$_();
        }
        set _$minDt$_(t) {
            f._$RequireFiniteNumber$_(t), d._$SetMinDt$_(t);
        }
        get _$maxDt$_() {
            return d._$GetMaxDt$_();
        }
        set _$maxDt$_(t) {
            d._$SetMaxDt$_(t);
        }
        get _$loadingProgress$_() {
            return d._$GetAssetManager$_()._$GetLoadProgress$_();
        }
        get _$imageLoadingProgress$_() {
            return d._$GetAssetManager$_()._$GetImageLoadProgress$_();
        }
        random() {
            return d._$Random$_();
        }
        get layout() {
            const t = d._$GetMainRunningLayout$_();
            if (t) return t._$GetILayout$_();
            throw new Error("no layout is running - make sure a layout is loaded before accessing");
        }
        _$getLayout$_(t) {
            let s = d._$GetLayoutManager$_(), i = null;
            if ("number" != typeof t && "string" != typeof t) throw new TypeError("expected string or number");
            if (i = s._$GetLayout$_(t)) return i._$GetILayout$_();
            throw new Error("invalid layout");
        }
        _$getAllLayouts$_() {
            return d._$GetLayoutManager$_()._$GetAllLayouts$_().map(t => t._$GetILayout$_());
        }
        _$goToLayout$_(t) {
            let s = d._$GetLayoutManager$_(), i;
            if ("number" != typeof t && "string" != typeof t) throw new TypeError("expected string or number");
            if (!(i = s._$GetLayout$_(t))) throw new Error("invalid layout");
            s._$IsPendingChangeMainLayout$_() || s._$ChangeMainLayout$_(i);
        }
        get keyboard() {
            const t = d._$_GetCommonScriptInterfaces$_().keyboard;
            if (t) return t;
            throw new Error("runtime.keyboard used but Keyboard object missing - add it to your project first");
        }
        get _$mouse$_() {
            const t = d._$_GetCommonScriptInterfaces$_()._$mouse$_;
            if (t) return t;
            throw new Error("runtime.mouse used but Mouse object missing - add it to your project first");
        }
        get _$touch$_() {
            const t = d._$_GetCommonScriptInterfaces$_()._$touch$_;
            if (t) return t;
            throw new Error("runtime.touch used but Touch object missing - add it to your project first");
        }
        get _$timelineController$_() {
            const t = d._$_GetCommonScriptInterfaces$_()._$timelineController$_;
            if (t) return t;
            throw new Error("runtime.timelineController used but Timeline Controller object missing - add it to your project first");
        }
        _$invokeDownload$_(t, s) {
            f._$RequireString$_(t), f._$RequireString$_(s), d._$InvokeDownload$_(t, s);
        }
        _$getInstanceByUid$_(t) {
            f._$RequireFiniteNumber$_(t);
            const s = d._$GetInstanceByUID$_(t);
            return s ? s._$GetInterfaceClass$_() : null;
        }
        _$sortZOrder$_(t, e) {
            f._$RequireFunction$_(e);
            const n = d._$GetCurrentLayout$_();
            for (const s of t) {
                const i = d._$_UnwrapIWorldInstance$_(s), h = i._$GetWorldInfo$_();
                p.push([ h._$GetLayer$_()._$GetIndex$_(), h._$GetZIndex$_() ]), 
                m.push(i);
            }
            if (0 !== p.length) {
                p.sort(u), m.sort((t, s) => e(t._$GetInterfaceClass$_(), s._$GetInterfaceClass$_()));
                let i = !1;
                for (let t = 0, s = p.length; t < s; ++t) {
                    const r = m[t], o = n._$GetLayerByIndex$_(p[t][0]), a = p[t][1], l = o._$_GetInstances$_();
                    l[a] !== r && ((l[a] = r)._$GetWorldInfo$_()._$_SetLayer$_(o, !0), 
                    o._$SetZIndicesChanged$_(r), i = !0);
                }
                i && d._$UpdateRender$_(), c._$clearArray$_(p), c._$clearArray$_(m);
            }
        }
        async _$createWorker$_(t, s) {
            const i = new MessageChannel(), e = i.port1, n = i.port2;
            return await d._$PostComponentMessageToDOMAsync$_("runtime", "script-create-worker", {
                url: t,
                opts: s,
                port2: n
            }, [ n ]), e;
        }
        alert(t) {
            return d._$PostComponentMessageToDOMAsync$_("runtime", "alert", {
                message: t + (d._$IsInWorker$_() ? " [via Web Worker]" : "")
            });
        }
        _$getHTMLLayer$_(t) {
            return f._$RequireFiniteNumber$_(t), d._$_GetHTMLLayerWrapElement$_(t);
        }
        _$addLoadPromise$_(t) {
            d._$AddLoadPromise$_(t);
        }
    };
}

{
    let s = self._$C3$_, i = null;
    self._$IAssetManager$_ = class {
        constructor(t) {
            i = t, Object.defineProperties(this, {
                _$isWebMOpusSupported$_: {
                    value: !0,
                    writable: !1
                }
            });
        }
        _$loadImageAsset$_(t) {
            const s = self._$IImageInfo$_._$_Unwrap$_(t);
            if (!s) throw new Error("invalid IImageInfo");
            s._$LoadAsset$_(i._$GetRuntime$_());
        }
        _$fetchText$_(t) {
            return i._$FetchText$_(t);
        }
        _$fetchJson$_(t) {
            return i._$FetchJson$_(t);
        }
        _$fetchBlob$_(t) {
            return i._$FetchBlob$_(t);
        }
        _$fetchArrayBuffer$_(t) {
            return i._$FetchArrayBuffer$_(t);
        }
        _$getProjectFileUrl$_(t) {
            return i._$GetProjectFileUrl$_(t);
        }
        _$getMediaFileUrl$_(t) {
            return "flat" === i._$GetFileStructure$_() && s._$IsRelativeURL$_(t) && (t = t.toLowerCase()), 
            i._$GetMediaFileUrl$_(t);
        }
        get _$mediaFolder$_() {
            return i._$GetMediaSubfolder$_();
        }
        async _$decodeWebMOpus$_(t, s) {
            throw new Error("decodeWebMOpus() is no longer supported - use Web Audio's decodeAudioData() directly as all supported platforms now support WebM Opus");
        }
        _$loadScripts$_(...t) {
            return i._$LoadScripts$_(...t);
        }
        _$compileWebAssembly$_(t) {
            return i._$CompileWebAssembly$_(t);
        }
        _$loadStyleSheet$_(t) {
            return i._$LoadStyleSheet$_(t);
        }
    };
}

{
    let r = self._$C3$_, i = self._$C3X$_, o = null;
    self._$ICollisionEngine$_ = class {
        constructor(t) {
            o = t, Object.defineProperties(this, {
                runtime: {
                    value: o._$GetRuntime$_(),
                    writable: !1
                }
            });
        }
        _$testOverlap$_(t, s) {
            const i = o._$GetRuntime$_(), e = i._$_UnwrapIWorldInstance$_(t), n = i._$_UnwrapIWorldInstance$_(s);
            return o._$TestOverlap$_(e, n);
        }
        _$testOverlapAny$_(t, s) {
            const i = o._$GetRuntime$_(), e = i._$_UnwrapIWorldInstance$_(t);
            for (const n of s) {
                const h = i._$_UnwrapIWorldInstance$_(n);
                if (o._$TestOverlap$_(e, h)) return n;
            }
            return null;
        }
        _$testOverlapSolid$_(t) {
            const s = o._$GetRuntime$_()._$_UnwrapIWorldInstance$_(t), i = o._$TestOverlapSolid$_(s);
            return i ? i._$GetInterfaceClass$_() : null;
        }
        _$setCollisionCellSize$_(t, s) {
            if (i._$RequireFiniteNumber$_(t), i._$RequireFiniteNumber$_(s), t = Math.floor(t), 
            s = Math.floor(s), t <= 0 || s <= 0) throw new Error("invalid cell size");
            o._$SetCollisionCellSize$_(t, s);
        }
        _$getCollisionCellSize$_() {
            return o._$GetCollisionCellSize$_();
        }
        _$getCollisionCandidates$_(t, s) {
            let i = o._$GetRuntime$_(), e;
            e = Array.isArray(t) ? t.map(t => i._$_UnwrapIObjectClass$_(t)) : [ i._$_UnwrapIObjectClass$_(t) ];
            const n = r.Rect._$FromObject$_(s), h = [];
            return o._$GetObjectClassesCollisionCandidates$_(null, e, n, h), h.map(t => t._$GetInterfaceClass$_());
        }
    };
}

{
    let s = self._$C3$_, i = null, e = new Map([ [ "Windows", "windows" ], [ "macOS", "macos" ], [ "Linux", "linux" ], [ "Chrome OS", "chrome-os" ], [ "Android", "android" ], [ "iOS", "ios" ] ]), n = new Map([ [ "Chrome", "chrome" ], [ "Chromium", "chromium" ], [ "Edge", "edge" ], [ "Opera", "opera" ], [ "NW.js", "nwjs" ], [ "Firefox", "firefox" ], [ "Safari", "safari" ] ]), h = new Map([ [ "Chromium", "chromium" ], [ "Gecko", "gecko" ], [ "WebKit", "webkit" ] ]);
    self._$IPlatformInfo$_ = class {
        constructor(t) {
            i = t, Object.defineProperties(this, {
                _$isMobile$_: {
                    value: s._$Platform$_._$IsMobile$_,
                    writable: !1
                },
                _$os$_: {
                    value: e.get(s._$Platform$_._$OS$_) || "unknown",
                    writable: !1
                },
                _$osVersion$_: {
                    value: s._$Platform$_._$OSVersion$_,
                    writable: !1
                },
                _$browser$_: {
                    value: n.get(s._$Platform$_._$Browser$_) || "unknown",
                    writable: !1
                },
                _$browserVersion$_: {
                    value: s._$Platform$_._$BrowserVersion$_,
                    writable: !1
                },
                _$browserEngine$_: {
                    value: h.get(s._$Platform$_._$BrowserEngine$_) || "unknown",
                    writable: !1
                }
            });
        }
        get exportType() {
            let t = i._$GetExportType$_();
            return i._$IsNWjs$_() ? t = "nwjs" : i._$IsWindowsWebView2$_() ? t = "windows-webview2" : "cordova" === t ? t = "Android" === s._$Platform$_._$OS$_ ? "cordova-android" : "cordova-ios" : "playable-ad-single-file" !== t && "playable-ad-zip" !== t || (t = "playable-ad"), 
            t;
        }
        get renderer() {
            return i._$GetCanvasManager$_()._$GetRendererString$_();
        }
        get _$rendererDetail$_() {
            return i._$GetCanvasManager$_()._$GetRendererDetailString$_();
        }
        get _$canvasCssWidth$_() {
            return i._$GetCanvasManager$_()._$GetCssWidth$_();
        }
        get _$canvasCssHeight$_() {
            return i._$GetCanvasManager$_()._$GetCssHeight$_();
        }
        get _$canvasDeviceWidth$_() {
            return i._$GetCanvasManager$_()._$GetDeviceWidth$_();
        }
        get _$canvasDeviceHeight$_() {
            return i._$GetCanvasManager$_()._$GetDeviceHeight$_();
        }
        get devicePixelRatio() {
            return i._$GetDevicePixelRatio$_();
        }
    };
}

{
    const ce = self._$C3X$_;
    self._$IStorage$_ = class {
        constructor(t) {
            this._$_storage$_ = t._$_GetProjectStorage$_();
        }
        getItem(t) {
            return ce._$RequireString$_(t), this._$_storage$_.getItem(t);
        }
        setItem(t, s) {
            return ce._$RequireString$_(t), this._$_storage$_.setItem(t, s);
        }
        removeItem(t) {
            return ce._$RequireString$_(t), this._$_storage$_.removeItem(t);
        }
        clear() {
            return this._$_storage$_.clear();
        }
        keys() {
            return this._$_storage$_.keys();
        }
    };
}

{
    const fe = self._$C3$_, de = fe._$_GetInternalAPIToken$_();
    self._$IPlugin$_ = class {
        #_$#private$_;
        constructor() {
            const t = fe._$AddonManager$_._$_GetInitObject2$_(de);
            this.#_$#private$_ = t, Object.defineProperties(this, {
                runtime: {
                    value: t._$GetRuntime$_()._$GetIRuntime$_(),
                    writable: !1
                },
                _$isSingleGlobal$_: {
                    value: t._$IsSingleGlobal$_(),
                    writable: !1
                },
                _$isWorldType$_: {
                    value: t._$IsWorldType$_(),
                    writable: !1
                },
                _$isHTMLElementType$_: {
                    value: t._$IsHTMLElementType$_(),
                    writable: !1
                },
                _$isRotatable$_: {
                    value: t._$IsRotatable$_(),
                    writable: !1
                },
                _$hasEffects$_: {
                    value: t._$HasEffects$_(),
                    writable: !1
                },
                _$is3d$_: {
                    value: t._$Is3D$_(),
                    writable: !1
                },
                _$supportsHierarchies$_: {
                    value: t._$SupportsSceneGraph$_(),
                    writable: !1
                },
                _$supportsMesh$_: {
                    value: t._$SupportsMesh$_(),
                    writable: !1
                }
            }), t._$GetRuntime$_()._$_MapScriptInterface$_(this, t);
        }
        static _$getByConstructor$_(t) {
            if (!t) return null;
            const s = fe._$AddonManager$_._$GetPluginByConstructorFunction$_(t);
            return s ? s._$GetIPlugin$_() : null;
        }
        _$getSingleGlobalObjectType$_() {
            return this.#_$#private$_._$GetSingleGlobalObjectClass$_()._$GetIObjectClass$_();
        }
        _$getSingleGlobalInstance$_() {
            return this.#_$#private$_._$GetSingleGlobalInstance$_()._$GetInterfaceClass$_();
        }
    };
}

{
    const pe = self._$C3$_, me = self._$C3X$_, ge = pe._$_GetInternalAPIToken$_();
    self._$IObjectClass$_ = class {
        #_$#private$_;
        constructor() {
            const t = pe._$AddonManager$_._$_GetInitObject2$_(ge);
            this.#_$#private$_ = t, Object.defineProperties(this, {
                name: {
                    value: t._$GetName$_(),
                    writable: !1
                },
                runtime: {
                    value: t._$GetRuntime$_()._$GetIRuntime$_(),
                    writable: !1
                },
                _$plugin$_: {
                    value: t._$GetPlugin$_()._$GetIPlugin$_(),
                    writable: !1
                }
            }), t._$GetRuntime$_()._$_MapScriptInterface$_(this, t);
        }
        addEventListener(t, s) {
            me._$RequireString$_(t), me._$RequireFunction$_(s), this.#_$#private$_._$UserScriptDispatcher$_().addEventListener(t, s);
        }
        removeEventListener(t, s) {
            me._$RequireString$_(t), me._$RequireFunction$_(s), this.#_$#private$_._$UserScriptDispatcher$_().removeEventListener(t, s);
        }
        _$getAllInstances$_() {
            return [ ...this.instances() ];
        }
        _$getFirstInstance$_() {
            return pe.first(this.instances());
        }
        _$getPickedInstances$_() {
            return [ ...this._$pickedInstances$_() ];
        }
        _$getFirstPickedInstance$_() {
            return pe.first(this._$pickedInstances$_());
        }
        _$getPairedInstance$_(t) {
            const s = this.#_$#private$_, i = s._$GetRuntime$_()._$_UnwrapIInstance$_(t), e = s._$GetPairedInstance$_(i);
            return e ? e._$GetInterfaceClass$_() : null;
        }
        *instances() {
            for (const t of this.#_$#private$_._$instancesIncludingPendingCreate$_()) yield t._$GetInterfaceClass$_();
        }
        *_$pickedInstances$_() {
            for (const t of this.#_$#private$_._$GetCurrentSol$_()._$GetInstances$_()) yield t._$GetInterfaceClass$_();
        }
        _$setInstanceClass$_(t) {
            me._$RequireFunction$_(t);
            const s = this.#_$#private$_;
            if (0 < s._$GetInstanceCount$_()) throw new Error("setInstanceClass() called too late, because instances have already been created - call in runOnStartup");
            s._$_SetUserScriptInstanceClass$_(t);
        }
        _$createInstance$_(t, s, i, e, n) {
            if (me._$RequireNumber$_(s), me._$RequireNumber$_(i), "number" != typeof t && "string" != typeof t) throw new TypeError("invalid layer parameter");
            const h = this.#_$#private$_, r = h._$GetRuntime$_(), o = r._$GetMainRunningLayout$_()._$GetLayer$_(t);
            if (!o) throw new Error("invalid layer");
            const a = r._$CreateInstance$_(h, o, s, i, e, n), l = (e && o._$SortAndAddInstancesByZIndex$_(a), 
            r._$GetEventSheetManager$_());
            return l._$BlockFlushingInstances$_(!0), a._$_TriggerOnCreatedOnSelfAndRelated$_(), 
            l._$BlockFlushingInstances$_(!1), l._$IsInEventEngine$_() || r._$GetLayoutManager$_()._$IsEndingLayout$_() || r._$FlushPendingInstances$_(), 
            a._$GetInterfaceClass$_();
        }
    };
}

{
    const ye = self._$C3X$_, l = new WeakMap(), Me = [ "above", "below", "top-sublayer", "bottom-sublayer" ];
    self._$ILayout$_ = class {
        constructor(t) {
            l.set(this, t);
            const s = [], i = t._$GetEffectList$_(), e = i._$GetAllEffectTypes$_().length;
            for (let t = 0; t < e; ++t) s.push(new self._$IEffectInstance$_(i, t));
            Object.defineProperties(this, {
                name: {
                    value: t._$GetName$_(),
                    writable: !1
                },
                index: {
                    value: t._$GetIndex$_(),
                    writable: !1
                },
                effects: {
                    value: s,
                    writable: !1
                }
            });
        }
        addEventListener(t, s) {
            ye._$RequireString$_(t), ye._$RequireFunction$_(s), l.get(this)._$UserScriptDispatcher$_().addEventListener(t, s);
        }
        removeEventListener(t, s) {
            ye._$RequireString$_(t), ye._$RequireFunction$_(s), l.get(this)._$UserScriptDispatcher$_().removeEventListener(t, s);
        }
        get width() {
            return l.get(this)._$GetWidth$_();
        }
        set width(t) {
            ye._$RequireFiniteNumber$_(t), l.get(this)._$SetWidth$_(t);
        }
        get height() {
            return l.get(this)._$GetHeight$_();
        }
        set height(t) {
            ye._$RequireFiniteNumber$_(t), l.get(this)._$SetHeight$_(t);
        }
        _$setSize$_(t, s) {
            ye._$RequireFiniteNumber$_(t), ye._$RequireFiniteNumber$_(s);
            const i = l.get(this);
            i._$SetWidth$_(t), i._$SetHeight$_(s);
        }
        getSize() {
            const t = l.get(this);
            return [ t._$GetWidth$_(), t._$GetHeight$_() ];
        }
        set scale(t) {
            ye._$RequireFiniteNumber$_(t), l.get(this)._$SetScale$_(t);
        }
        get scale() {
            return l.get(this)._$GetScale$_();
        }
        set angle(t) {
            ye._$RequireFiniteNumber$_(t), l.get(this)._$SetAngle$_(t);
        }
        get angle() {
            return l.get(this)._$GetAngle$_();
        }
        set scrollX(t) {
            ye._$RequireNumber$_(t), l.get(this)._$SetScrollX$_(t);
        }
        get scrollX() {
            return l.get(this)._$GetScrollX$_();
        }
        set scrollY(t) {
            ye._$RequireNumber$_(t), l.get(this)._$SetScrollY$_(t);
        }
        get scrollY() {
            return l.get(this)._$GetScrollY$_();
        }
        scrollTo(t, s) {
            ye._$RequireNumber$_(t), ye._$RequireNumber$_(s);
            const i = l.get(this);
            i._$SetScrollX$_(t), i._$SetScrollY$_(s);
        }
        _$getScrollPosition$_() {
            const t = l.get(this);
            return [ t._$GetScrollX$_(), t._$GetScrollY$_() ];
        }
        _$getLayer$_(t) {
            let s = l.get(this), i = null;
            if ("number" != typeof t && "string" != typeof t) throw new TypeError("expected string or number");
            return (i = s._$GetLayer$_(t)) ? i._$GetILayer$_() : null;
        }
        _$getAllLayers$_() {
            return l.get(this)._$GetLayers$_().map(t => t._$GetILayer$_());
        }
        *_$allLayers$_() {
            for (const t of l.get(this)._$allLayers$_()) yield t._$GetILayer$_();
        }
        _$addLayer$_(t, s, i) {
            const e = l.get(this), n = self._$ILayer$_, h = (ye._$RequireString$_(t), 
            ye._$RequireOptionalInstanceOf$_(s, n), s ? e._$GetRuntime$_()._$_UnwrapScriptInterface$_(s) : null), r = Me.indexOf(i);
            if (r < 0) throw new Error("invalid location");
            e._$AddLayer$_(t, h, r);
        }
        _$moveLayer$_(t, s, i) {
            const e = l.get(this), n = e._$GetRuntime$_(), h = self._$ILayer$_, r = (ye._$RequireInstanceOf$_(t, h), 
            n._$_UnwrapScriptInterface$_(t));
            if (!r) throw new Error("invalid layer");
            ye._$RequireOptionalInstanceOf$_(s, h);
            const o = s ? n._$_UnwrapScriptInterface$_(s) : null, a = Me.indexOf(i);
            if (a < 0) throw new Error("invalid location");
            e._$MoveLayer$_(r, o, a);
        }
        _$removeLayer$_(t) {
            const s = l.get(this), i = self._$ILayer$_, e = (ye._$RequireInstanceOf$_(t, i), 
            s._$GetRuntime$_()._$_UnwrapScriptInterface$_(t));
            if (!e) throw new Error("invalid layer");
            const n = e._$GetRuntime$_();
            s._$RemoveLayer$_(e), n._$GetEventSheetManager$_()._$IsInEventEngine$_() || n._$FlushPendingInstances$_();
        }
        _$removeAllDynamicLayers$_() {
            const t = l.get(this), s = t._$GetRuntime$_();
            t._$RemoveAllDynamicLayers$_(), s._$GetEventSheetManager$_()._$IsInEventEngine$_() || s._$FlushPendingInstances$_();
        }
        _$setVanishingPoint$_(t, s) {
            ye._$RequireFiniteNumber$_(t), ye._$RequireFiniteNumber$_(s), l.get(this)._$SetVanishingPointXY$_(t, s);
        }
        _$getVanishingPoint$_() {
            return l.get(this)._$_GetVanishingPoint$_();
        }
        set _$projection$_(t) {
            ye._$RequireString$_(t);
            const s = l.get(this);
            if ("perspective" === t) s._$SetPerspectiveProjection$_(); else {
                if ("orthographic" !== t) throw new Error("invalid projection");
                s._$SetOrthographicProjection$_();
            }
        }
        get _$projection$_() {
            return l.get(this)._$IsOrthographicProjection$_() ? "orthographic" : "perspective";
        }
    };
}

{
    const we = self._$C3$_, f = self._$C3X$_, d = new WeakMap(), xe = new Map([ [ "normal", 0 ], [ "additive", 1 ], [ "copy", 3 ], [ "destination-over", 4 ], [ "source-in", 5 ], [ "destination-in", 6 ], [ "source-out", 7 ], [ "destination-out", 8 ], [ "source-atop", 9 ], [ "destination-atop", 10 ] ]), Se = new Map([ ...xe.entries() ].map(t => [ t[1], t[0] ])), Te = we._$New$_(we._$Color$_);
    self._$ILayer$_ = class {
        constructor(t) {
            d.set(this, t);
            const s = [], i = t._$GetEffectList$_(), e = i._$GetAllEffectTypes$_().length;
            for (let t = 0; t < e; ++t) s.push(new self._$IEffectInstance$_(i, t));
            Object.defineProperties(this, {
                name: {
                    value: t._$GetName$_(),
                    writable: !1
                },
                layout: {
                    value: t._$GetLayout$_()._$GetILayout$_(),
                    writable: !1
                },
                effects: {
                    value: s,
                    writable: !1
                }
            }), t._$GetRuntime$_()._$_MapScriptInterface$_(this, t);
        }
        get _$parentLayer$_() {
            const t = d.get(this)._$GetParentLayer$_();
            return t ? t._$GetILayer$_() : null;
        }
        *_$parentLayers$_() {
            for (const t of d.get(this)._$parentLayers$_()) yield t._$GetILayer$_();
        }
        *_$subLayers$_() {
            for (const t of d.get(this)._$GetSubLayers$_()) yield t._$GetILayer$_();
        }
        *_$allSubLayers$_() {
            for (const t of d.get(this)._$GetSubLayers$_()) for (const s of t._$selfAndAllSubLayers$_()) yield s._$GetILayer$_();
        }
        get index() {
            return d.get(this)._$GetIndex$_();
        }
        get isVisible() {
            return d.get(this)._$_IsVisibleFlagSet$_();
        }
        set isVisible(t) {
            d.get(this)._$SetVisible$_(t);
        }
        get _$isSelfAndParentsVisible$_() {
            return d.get(this)._$IsVisible$_();
        }
        get isInteractive() {
            return d.get(this)._$IsInteractive$_();
        }
        set isInteractive(t) {
            d.get(this)._$SetInteractive$_(t);
        }
        get _$isHTMLElementsLayer$_() {
            return d.get(this)._$IsHTMLElementsLayer$_();
        }
        set _$isHTMLElementsLayer$_(t) {
            d.get(this)._$SetIsHTMLElementsLayer$_(!!t);
        }
        get _$isSelfAndParentsInteractive$_() {
            return d.get(this)._$IsSelfAndParentsInteractive$_();
        }
        get opacity() {
            return d.get(this)._$GetOpacity$_();
        }
        set opacity(t) {
            t = we._$clamp$_(+t, 0, 1), isNaN(t) || d.get(this)._$SetOpacity$_(t);
        }
        set scale(t) {
            f._$RequireFiniteNumber$_(t), d.get(this)._$SetOwnScale$_(t);
        }
        get scale() {
            return d.get(this)._$GetOwnScale$_();
        }
        set scaleRate(t) {
            f._$RequireFiniteNumber$_(t), d.get(this)._$SetScaleRate$_(t);
        }
        get scaleRate() {
            return d.get(this)._$GetScaleRate$_();
        }
        set angle(t) {
            f._$RequireFiniteNumber$_(t), d.get(this)._$SetAngle$_(t);
        }
        get angle() {
            return d.get(this)._$GetOwnAngle$_();
        }
        set parallaxX(t) {
            f._$RequireFiniteNumber$_(t), d.get(this)._$SetParallaxX$_(t);
        }
        get parallaxX() {
            return d.get(this)._$GetParallaxX$_();
        }
        set parallaxY(t) {
            f._$RequireFiniteNumber$_(t), d.get(this)._$SetParallaxY$_(t);
        }
        get parallaxY() {
            return d.get(this)._$GetParallaxY$_();
        }
        set _$zElevation$_(t) {
            f._$RequireFiniteNumber$_(t), d.get(this)._$SetZElevation$_(t);
        }
        get _$zElevation$_() {
            return d.get(this)._$GetZElevation$_();
        }
        set _$isTransparent$_(t) {
            d.get(this)._$SetTransparent$_(t);
        }
        get _$isTransparent$_() {
            return d.get(this)._$IsTransparent$_();
        }
        set _$isForceOwnTexture$_(t) {
            d.get(this)._$SetForceOwnTexture$_(t);
        }
        get _$isForceOwnTexture$_() {
            return d.get(this)._$IsForceOwnTexture$_();
        }
        set _$blendMode$_(t) {
            f._$RequireString$_(t);
            const s = xe.get(t);
            if ("number" != typeof s) throw new Error("invalid blend mode");
            d.get(this)._$SetBlendMode$_(s);
        }
        get _$blendMode$_() {
            return Se.get(d.get(this)._$GetBlendMode$_());
        }
        set backgroundColor(t) {
            if (f._$RequireArray$_(t), t.length < 3) throw new Error("expected 3 elements");
            Te._$setRgb$_(t[0], t[1], t[2]);
            const s = d.get(this), i = s._$GetBackgroundColor$_();
            i._$equalsIgnoringAlpha$_(Te) || (i._$copyRgb$_(Te), s._$GetRuntime$_()._$UpdateRender$_());
        }
        get backgroundColor() {
            const t = d.get(this)._$GetBackgroundColor$_();
            return [ t._$getR$_(), t._$getG$_(), t._$getB$_() ];
        }
        set scrollX(t) {
            f._$RequireNumber$_(t);
            const s = d.get(this);
            s._$SetOwnScrollPositionEnabled$_(!0), s._$SetScrollX$_(t);
        }
        get scrollX() {
            return d.get(this)._$GetScrollX$_();
        }
        set scrollY(t) {
            f._$RequireNumber$_(t);
            const s = d.get(this);
            s._$SetOwnScrollPositionEnabled$_(!0), s._$SetScrollY$_(t);
        }
        get scrollY() {
            return d.get(this)._$GetScrollY$_();
        }
        scrollTo(t, s) {
            f._$RequireNumber$_(t), f._$RequireNumber$_(s);
            const i = d.get(this);
            i._$SetOwnScrollPositionEnabled$_(!0), i._$SetScrollX$_(t), i._$SetScrollY$_(s);
        }
        _$getScrollPosition$_() {
            const t = d.get(this);
            return [ t._$GetScrollX$_(), t._$GetScrollY$_() ];
        }
        _$restoreScrollPosition$_() {
            d.get(this)._$SetOwnScrollPositionEnabled$_(!1);
        }
        getViewport() {
            return d.get(this)._$GetViewport$_()._$toDOMRect$_();
        }
        _$cssPxToLayer$_(t, s, i = 0) {
            f._$RequireNumber$_(t), f._$RequireNumber$_(s), f._$RequireNumber$_(i);
            const e = d.get(this), n = e._$GetRuntime$_();
            return e._$CanvasCssToLayer$_(t - n._$GetCanvasClientX$_(), s - n._$GetCanvasClientY$_(), i);
        }
        _$layerToCssPx$_(t, s, i = 0) {
            f._$RequireNumber$_(t), f._$RequireNumber$_(s), f._$RequireNumber$_(i);
            const e = d.get(this), n = e._$GetRuntime$_(), [ h, r ] = e._$LayerToCanvasCss$_(t, s, i);
            return [ h + n._$GetCanvasClientX$_(), r + n._$GetCanvasClientY$_() ];
        }
        _$drawSurfaceToLayer$_(t, s, i = 0) {
            return f._$RequireNumber$_(t), f._$RequireNumber$_(s), f._$RequireNumber$_(i), 
            d.get(this)._$DrawSurfaceToLayer$_(t, s, i);
        }
        _$layerToDrawSurface$_(t, s, i = 0) {
            return f._$RequireNumber$_(t), f._$RequireNumber$_(s), f._$RequireNumber$_(i), 
            d.get(this)._$LayerToDrawSurface$_(t, s, i);
        }
        get _$renderScale$_() {
            return d.get(this)._$GetRenderScale$_();
        }
    };
}

{
    let e = function(t) {
        let s = Ce.get(t);
        return s || (s = be._$New$_(be.Event._$Dispatcher$_), Ce.set(t, s)), s;
    };
    e;
    const be = self._$C3$_, ve = self._$C3X$_, Ce = new WeakMap(), Ge = be._$_GetInternalAPIToken$_();
    self._$IInstance$_ = class {
        #_$#private$_;
        constructor() {
            const t = be._$AddonManager$_._$_GetInitObject2$_(Ge), s = {
                runtime: {
                    value: (this.#_$#private$_ = t)._$GetRuntime$_()._$GetIRuntime$_(),
                    writable: !1
                },
                _$objectType$_: {
                    value: t._$GetObjectClass$_()._$GetIObjectClass$_(),
                    writable: !1
                },
                _$plugin$_: {
                    value: t._$GetPlugin$_()._$GetIPlugin$_(),
                    writable: !1
                }
            };
            t._$_GetInstVarsScriptDescriptor$_(s), t._$_GetBehaviorsScriptDescriptor$_(s), 
            Object.defineProperties(this, s), t._$GetRuntime$_()._$_MapScriptInterface$_(this, t);
        }
        static _$_GetInitInst$_() {
            return be._$AddonManager$_._$_GetInitObject$_();
        }
        _$_release$_() {
            const t = Ce.get(this);
            t && (t._$Release$_(), Ce.delete(this));
        }
        addEventListener(t, s, i) {
            ve._$RequireString$_(t), ve._$RequireFunction$_(s), e(this).addEventListener(t, s, i);
        }
        removeEventListener(t, s, i) {
            ve._$RequireString$_(t), ve._$RequireFunction$_(s), e(this).removeEventListener(t, s, i);
        }
        dispatchEvent(t) {
            e(this).dispatchEvent(t);
        }
        _$destroy$_() {
            const t = this.#_$#private$_, s = t._$GetRuntime$_();
            s._$DestroyInstance$_(t), s._$GetEventSheetManager$_()._$IsInEventEngine$_() || s._$GetLayoutManager$_()._$IsEndingLayout$_() || s._$GetEventSheetManager$_()._$IsFlushingBlocked$_() || s._$FlushPendingInstances$_();
        }
        _$getOtherContainerInstances$_() {
            const t = this.#_$#private$_._$GetSiblings$_();
            return t ? t.map(t => t._$GetInterfaceClass$_()) : [];
        }
        *_$otherContainerInstances$_() {
            const t = this.#_$#private$_;
            if (t._$IsInContainer$_()) for (const s of t._$siblings$_()) yield s._$GetInterfaceClass$_();
        }
        get uid() {
            return this.#_$#private$_._$GetUID$_();
        }
        get _$iid$_() {
            return this.#_$#private$_._$GetIID$_();
        }
        get _$templateName$_() {
            return this.#_$#private$_._$GetTemplateName$_();
        }
        set timeScale(t) {
            ve._$RequireFiniteNumber$_(t), this.#_$#private$_._$SetTimeScale$_(t);
        }
        get timeScale() {
            return this.#_$#private$_._$GetActiveTimeScale$_();
        }
        _$restoreTimeScale$_() {
            this.#_$#private$_._$RestoreTimeScale$_();
        }
        get _$dt$_() {
            const t = this.#_$#private$_;
            return t._$GetRuntime$_()._$GetDt$_(t);
        }
        _$hasTags$_(...t) {
            ve._$RequireArray$_(t);
            const s = new Set(t), i = this.#_$#private$_._$GetTagsSet$_();
            return s.isSubsetOf(i);
        }
        _$setAllTags$_(t) {
            ve._$RequireInstanceOf$_(t, Set), this.#_$#private$_._$SetTagsSet$_(t);
        }
        _$getAllTags$_() {
            return new Set(this.#_$#private$_._$GetTagsSet$_());
        }
        signal(t) {
            ve._$RequireString$_(t);
            const s = this.#_$#private$_;
            s._$GetRuntime$_()._$GetEventSheetManager$_()._$InstanceSignal$_(s, t);
        }
        _$waitForSignal$_(t) {
            ve._$RequireString$_(t);
            const s = this.#_$#private$_;
            return s._$GetRuntime$_()._$GetEventSheetManager$_()._$WaitForInstanceSignal$_(s, t);
        }
    };
}

{
    const Ie = self._$C3$_, _e = self._$C3X$_, Ee = Ie._$_GetInternalAPIToken$_();
    self._$ISDKInstanceBase$_ = class extends self._$IInstance$_ {
        #_$#private$_;
        #_$#isTicking$_ = !1;
        #_$#tickFunc$_ = null;
        #_$#isTicking2$_ = !1;
        #_$#tickFunc2$_ = null;
        #_$#domComponentId$_;
        #_$#wrapperComponentId$_;
        constructor(t) {
            super(), this.#_$#private$_ = Ie._$AddonManager$_._$_GetInitObject2$_(Ee), 
            this.#_$#isTicking$_ = !1, this.#_$#tickFunc$_ = null, this.#_$#isTicking2$_ = !1, 
            this.#_$#tickFunc2$_ = null, this.#_$#domComponentId$_ = t?.domComponentId, 
            this.#_$#wrapperComponentId$_ = t?.wrapperComponentId;
        }
        _$_release$_() {
            this._$_setTicking$_(!1), this._$_setTicking2$_(!1), super._$_release$_();
        }
        _$_getInitProperties$_() {
            return Ie._$AddonManager$_._$_GetInitProperties$_();
        }
        _$_trigger$_(t) {
            const s = this.#_$#private$_;
            s._$GetRuntime$_()._$Trigger$_(t, s);
        }
        _$_triggerAsync$_(t) {
            const s = this.#_$#private$_;
            return s._$GetRuntime$_()._$TriggerAsync$_(t, s);
        }
        _$_addDOMMessageHandler$_(t, s) {
            if (_e._$RequireString$_(t), _e._$RequireFunction$_(s), !this.#_$#domComponentId$_) throw new Error("no DOM component id set");
            const i = this.#_$#private$_._$GetRuntime$_();
            i._$AddDOMComponentMessageHandler$_(this.#_$#domComponentId$_, t, s);
        }
        _$_addDOMMessageHandlers$_(t) {
            _e._$RequireArray$_(t);
            for (const [ s, i ] of t) this._$_addDOMMessageHandler$_(s, i);
        }
        _$_postToDOM$_(t, s) {
            if (_e._$RequireString$_(t), !this.#_$#domComponentId$_) throw new Error("no DOM component id set");
            const i = this.#_$#private$_._$GetRuntime$_();
            i._$PostComponentMessageToDOM$_(this.#_$#domComponentId$_, t, s);
        }
        _$_postToDOMAsync$_(t, s) {
            if (_e._$RequireString$_(t), !this.#_$#domComponentId$_) throw new Error("no DOM component id set");
            const i = this.#_$#private$_._$GetRuntime$_();
            return i._$PostComponentMessageToDOMAsync$_(this.#_$#domComponentId$_, t, s);
        }
        _$_postToDOMMaybeSync$_(t, s) {
            const i = this.#_$#private$_._$GetRuntime$_();
            if (!i._$IsInWorker$_()) return window.c3_runtimeInterface._OnMessageFromRuntime({
                type: "event",
                component: this.#_$#domComponentId$_,
                handler: t,
                data: s,
                responseId: null
            });
            this._$_postToDOM$_(t, s);
        }
        _$_setTicking$_(t) {
            if (this.#_$#isTicking$_ !== (t = !!t)) {
                this.#_$#isTicking$_ = t;
                const s = this.#_$#private$_._$GetRuntime$_();
                if (t) {
                    if (!this.#_$#tickFunc$_) if (this.#_$#private$_._$GetRuntime$_()._$IsDebug$_()) {
                        const i = globalThis.C3Debugger, e = this._$plugin$_;
                        this.#_$#tickFunc$_ = () => {
                            const t = performance.now();
                            this._$_tick$_(), i.AddIndividualPluginTickTime(e, performance.now() - t);
                        };
                    } else this.#_$#tickFunc$_ = () => this._$_tick$_();
                    s._$Dispatcher$_().addEventListener("tick", this.#_$#tickFunc$_);
                } else s._$Dispatcher$_().removeEventListener("tick", this.#_$#tickFunc$_);
            }
        }
        _$_isTicking$_() {
            return this.#_$#isTicking$_;
        }
        _$_tick$_() {}
        _$_setTicking2$_(t) {
            if (this.#_$#isTicking2$_ !== (t = !!t)) {
                this.#_$#isTicking2$_ = t;
                const s = this.#_$#private$_._$GetRuntime$_();
                if (t) {
                    if (!this.#_$#tickFunc2$_) if (this.#_$#private$_._$GetRuntime$_()._$IsDebug$_()) {
                        const i = globalThis.C3Debugger, e = this._$plugin$_;
                        this.#_$#tickFunc2$_ = () => {
                            const t = performance.now();
                            this._$_tick2$_(), i.AddIndividualPluginTickTime(e, performance.now() - t);
                        };
                    } else this.#_$#tickFunc2$_ = () => this._$_tick2$_();
                    s._$Dispatcher$_().addEventListener("tick2", this.#_$#tickFunc2$_);
                } else s._$Dispatcher$_().removeEventListener("tick2", this.#_$#tickFunc2$_);
            }
        }
        _$_isTicking2$_() {
            return this.#_$#isTicking2$_;
        }
        _$_tick2$_() {}
        _$_getDebuggerProperties$_() {
            return [];
        }
        _$_saveToJson$_() {
            return null;
        }
        _$_loadFromJson$_(t) {}
        _$_isWrapperExtensionAvailable$_() {
            if (!this.#_$#wrapperComponentId$_) throw new Error("no wrapper component id set");
            const t = this.#_$#private$_._$GetRuntime$_();
            return t._$HasWrapperComponentId$_(this.#_$#wrapperComponentId$_);
        }
        _$_addWrapperExtensionMessageHandler$_(t, s) {
            if (_e._$RequireString$_(t), _e._$RequireFunction$_(s), !this.#_$#wrapperComponentId$_) throw new Error("no wrapper component id set");
            const i = this.#_$#private$_._$GetRuntime$_();
            i._$AddWrapperExtensionMessageHandler$_(this.#_$#wrapperComponentId$_, t, s);
        }
        _$_addWrapperMessageHandlers$_(t) {
            _e._$RequireArray$_(t);
            for (const [ s, i ] of t) this._$_addWrapperExtensionMessageHandler$_(s, i);
        }
        _$_sendWrapperExtensionMessage$_(t, s) {
            if (!this.#_$#wrapperComponentId$_) throw new Error("no wrapper component id set");
            this.runtime._$sdk$_._$sendWrapperExtensionMessage$_(this.#_$#wrapperComponentId$_, t, s);
        }
        _$_sendWrapperExtensionMessageAsync$_(t, s) {
            if (this.#_$#wrapperComponentId$_) return this.runtime._$sdk$_._$sendWrapperExtensionMessageAsync$_(this.#_$#wrapperComponentId$_, t, s);
            throw new Error("no wrapper component id set");
        }
    };
}

{
    let t = function(t) {
        return class n extends t {
            #_$#privateInst$_;
            #_$#privateWi$_;
            constructor(t) {
                super(t);
                const s = Ne._$AddonManager$_._$_GetInitObject2$_(Oe), i = s._$GetWorldInfo$_(), e = (this.#_$#privateInst$_ = s, 
                this.#_$#privateWi$_ = i, Le.set(this, s), []), n = i._$GetInstanceEffectList$_();
                if (n) {
                    const r = i._$GetObjectClass$_()._$GetEffectList$_()._$GetAllEffectTypes$_().length;
                    for (let t = 0; t < r; ++t) e.push(new self._$IEffectInstance$_(n, t));
                }
                const h = {
                    effects: {
                        value: e,
                        writable: !1
                    }
                };
                Object.defineProperties(this, h);
            }
            get layout() {
                return this.#_$#privateWi$_._$GetLayout$_()._$GetILayout$_();
            }
            get _$layer$_() {
                return this.#_$#privateWi$_._$GetLayer$_()._$GetILayer$_();
            }
            get x() {
                return this.#_$#privateWi$_._$GetX$_();
            }
            set x(t) {
                t = +t;
                const s = this.#_$#privateWi$_;
                isNaN(t) || s._$GetX$_() === t || (s._$SetX$_(t), s._$SetBboxChanged$_());
            }
            get y() {
                return this.#_$#privateWi$_._$GetY$_();
            }
            set y(t) {
                t = +t;
                const s = this.#_$#privateWi$_;
                isNaN(t) || s._$GetY$_() === t || (s._$SetY$_(t), s._$SetBboxChanged$_());
            }
            setPosition(t, s) {
                t = +t, s = +s;
                const i = this.#_$#privateWi$_;
                isNaN(t) || isNaN(s) || i._$GetX$_() === t && i._$GetY$_() === s || (i._$SetXY$_(t, s), 
                i._$SetBboxChanged$_());
            }
            _$getPosition$_() {
                const t = this.#_$#privateWi$_;
                return [ t._$GetX$_(), t._$GetY$_() ];
            }
            _$offsetPosition$_(t, s) {
                if (t = +t, s = +s, !(isNaN(t) || isNaN(s) || 0 === t && 0 === s)) {
                    const i = this.#_$#privateWi$_;
                    i._$OffsetXY$_(t, s), i._$SetBboxChanged$_();
                }
            }
            get _$zElevation$_() {
                return this.#_$#privateWi$_._$GetZElevation$_();
            }
            set _$zElevation$_(t) {
                t = +t;
                const s = this.#_$#privateInst$_, i = this.#_$#privateWi$_;
                isNaN(t) || i._$GetZElevation$_() === t || (i._$SetZElevation$_(t), 
                s._$GetRuntime$_()._$UpdateRender$_());
            }
            get _$totalZElevation$_() {
                return this.#_$#privateWi$_._$GetTotalZElevation$_();
            }
            get width() {
                return this.#_$#privateWi$_._$GetWidth$_();
            }
            set width(t) {
                t = +t;
                const s = this.#_$#privateWi$_;
                isNaN(t) || s._$GetWidth$_() === t || (s._$SetWidth$_(t), s._$SetBboxChanged$_());
            }
            get height() {
                return this.#_$#privateWi$_._$GetHeight$_();
            }
            set height(t) {
                t = +t;
                const s = this.#_$#privateWi$_;
                isNaN(t) || s._$GetHeight$_() === t || (s._$SetHeight$_(t), s._$SetBboxChanged$_());
            }
            _$setSize$_(t, s) {
                t = +t, s = +s;
                const i = this.#_$#privateWi$_;
                isNaN(t) || isNaN(s) || i._$GetWidth$_() === t && i._$GetHeight$_() === s || (i._$SetSize$_(t, s), 
                i._$SetBboxChanged$_());
            }
            getSize() {
                const t = this.#_$#privateWi$_;
                return [ t._$GetWidth$_(), t._$GetHeight$_() ];
            }
            get angle() {
                return this.#_$#privateWi$_._$GetAngle$_();
            }
            set angle(t) {
                t = Ne._$clampAngle$_(+t);
                const s = this.#_$#privateWi$_;
                isNaN(t) || s._$GetAngle$_() === t || (s._$SetAngle$_(t), s._$SetBboxChanged$_());
            }
            get _$angleDegrees$_() {
                return Ne._$toDegrees$_(this.angle);
            }
            set _$angleDegrees$_(t) {
                this.angle = Ne._$toRadians$_(t);
            }
            _$getBoundingBox$_() {
                return this.#_$#privateWi$_._$GetBoundingBox$_()._$toDOMRect$_();
            }
            _$getBoundingQuad$_() {
                return this.#_$#privateWi$_._$GetBoundingQuad$_()._$toDOMQuad$_();
            }
            _$isOnScreen$_() {
                return this.#_$#privateWi$_._$IsInViewport2$_();
            }
            get isVisible() {
                return this.#_$#privateWi$_._$IsVisible$_();
            }
            set isVisible(t) {
                t = !!t;
                const s = this.#_$#privateInst$_, i = this.#_$#privateWi$_;
                i._$IsVisible$_() !== t && (i._$SetVisible$_(t), s._$GetRuntime$_()._$UpdateRender$_());
            }
            get opacity() {
                return this.#_$#privateWi$_._$GetOpacity$_();
            }
            set opacity(t) {
                t = Ne._$clamp$_(+t, 0, 1);
                const s = this.#_$#privateInst$_, i = this.#_$#privateWi$_;
                isNaN(t) || i._$GetOpacity$_() === t || (i._$SetOpacity$_(t), s._$GetRuntime$_()._$UpdateRender$_());
            }
            set _$colorRgb$_(t) {
                if (De._$RequireArray$_(t), t.length < 3) throw new Error("expected 3 elements");
                ke._$setRgb$_(t[0], t[1], t[2]);
                const s = this.#_$#privateInst$_, i = this.#_$#privateWi$_;
                i._$GetUnpremultipliedColor$_()._$equalsIgnoringAlpha$_(ke) || (i._$SetUnpremultipliedColor$_(ke), 
                s._$GetRuntime$_()._$UpdateRender$_());
            }
            get _$colorRgb$_() {
                const t = this.#_$#privateWi$_._$GetUnpremultipliedColor$_();
                return [ t._$getR$_(), t._$getG$_(), t._$getB$_() ];
            }
            set _$blendMode$_(t) {
                De._$RequireString$_(t);
                const s = Pe.get(t);
                if ("number" != typeof s) throw new Error("invalid blend mode");
                const i = this.#_$#privateInst$_, e = this.#_$#privateWi$_;
                e._$SetBlendMode$_(s), i._$GetRuntime$_()._$UpdateRender$_();
            }
            get _$blendMode$_() {
                return Re.get(this.#_$#privateWi$_._$GetBlendMode$_());
            }
            _$moveToTop$_() {
                this.#_$#privateWi$_._$ZOrderMoveToTop$_();
            }
            _$moveToBottom$_() {
                this.#_$#privateWi$_._$ZOrderMoveToBottom$_();
            }
            _$moveToLayer$_(t) {
                De._$RequireInstanceOf$_(t, Ae);
                const s = this.#_$#privateInst$_, i = s._$GetRuntime$_()._$_UnwrapScriptInterface$_(t);
                if (!i) throw new Error("invalid layer");
                s._$GetWorldInfo$_()._$ZOrderMoveToLayer$_(i);
            }
            _$moveAdjacentToInstance$_(t, s) {
                De._$RequireInstanceOf$_(t, n), this.#_$#privateWi$_._$ZOrderMoveAdjacentToInstance$_(Le.get(t), s);
            }
            get zIndex() {
                return this.#_$#privateWi$_._$GetZIndex$_();
            }
            get _$isCollisionEnabled$_() {
                return this.#_$#privateWi$_._$IsCollisionEnabled$_();
            }
            set _$isCollisionEnabled$_(t) {
                this.#_$#privateWi$_._$SetCollisionEnabled$_(!!t);
            }
            _$containsPoint$_(t, s) {
                return De._$RequireNumber$_(t), De._$RequireNumber$_(s), this.#_$#privateWi$_._$ContainsPoint$_(+t, +s);
            }
            _$testOverlap$_(t) {
                De._$RequireInstanceOf$_(t, n);
                const s = this.#_$#privateInst$_, i = Le.get(t);
                return s._$GetRuntime$_()._$GetCollisionEngine$_()._$TestOverlap$_(s, i);
            }
            _$testOverlapSolid$_() {
                const t = this.#_$#privateInst$_, s = t._$GetRuntime$_()._$GetCollisionEngine$_()._$TestOverlapSolid$_(t);
                return s ? s._$GetInterfaceClass$_() : null;
            }
            getParent() {
                const t = this.#_$#privateInst$_._$GetParent$_();
                return t ? t._$GetInterfaceClass$_() : null;
            }
            _$getTopParent$_() {
                const t = this.#_$#privateInst$_._$GetTopParent$_();
                return t ? t._$GetInterfaceClass$_() : null;
            }
            *_$parents$_() {
                for (const t of this.#_$#privateInst$_._$parents$_()) yield t._$GetInterfaceClass$_();
            }
            _$getChildCount$_() {
                return this.#_$#privateInst$_._$GetChildCount$_();
            }
            _$getChildAt$_(t) {
                const s = this.#_$#privateInst$_._$GetChildAt$_(t);
                return s ? s._$GetInterfaceClass$_() : null;
            }
            *children() {
                for (const t of this.#_$#privateInst$_.children()) yield t._$GetInterfaceClass$_();
            }
            *_$allChildren$_() {
                for (const t of this.#_$#privateInst$_._$allChildren$_()) yield t._$GetInterfaceClass$_();
            }
            _$addChild$_(t, s) {
                De._$RequireInstanceOf$_(t, n), De._$RequireOptionalObject$_(s), 
                s = s || {};
                const i = this.#_$#privateInst$_, e = Le.get(t);
                i._$AddChild$_(e, s);
            }
            removeChild(t) {
                De._$RequireInstanceOf$_(t, n);
                const s = this.#_$#privateInst$_, i = Le.get(t);
                s._$RemoveChild$_(i);
            }
            _$removeFromParent$_() {
                const t = this.#_$#privateInst$_;
                if (t._$HasParent$_()) {
                    const s = t._$GetParent$_();
                    s._$RemoveChild$_(t);
                }
            }
            _$getHierarchyOpts$_() {
                const t = this.#_$#privateWi$_;
                return {
                    _$transformX$_: t._$GetTransformWithParentX$_(),
                    _$transformY$_: t._$GetTransformWithParentY$_(),
                    _$transformWidth$_: t._$GetTransformWithParentWidth$_(),
                    _$transformHeight$_: t._$GetTransformWithParentHeight$_(),
                    _$transformAngle$_: t._$GetTransformWithParentAngle$_(),
                    _$transformZElevation$_: t._$GetTransformWithParentZElevation$_(),
                    _$transformOpacity$_: t._$GetTransformWithParentOpacity$_(),
                    _$transformVisibility$_: t._$GetTransformWithParentVisibility$_(),
                    _$destroyWithParent$_: t._$GetDestroyWithParent$_()
                };
            }
            _$createMesh$_(t, s) {
                De._$RequireFiniteNumber$_(t), De._$RequireFiniteNumber$_(s), this.#_$#privateWi$_._$CreateMesh$_(t, s);
            }
            _$releaseMesh$_() {
                const t = this.#_$#privateWi$_;
                t._$ReleaseMesh$_(), t._$SetBboxChanged$_();
            }
            _$setMeshPoint$_(t, s, i) {
                De._$RequireFiniteNumber$_(t), De._$RequireFiniteNumber$_(s), De._$RequireObject$_(i);
                const e = this.#_$#privateWi$_;
                e._$SetMeshPoint$_(t, s, i) && e._$SetBboxChanged$_();
            }
            _$getMeshPoint$_(t, s) {
                let i = NaN, e = NaN, n = NaN, h = NaN, r = NaN, o = this.#_$#privateWi$_;
                if (o._$HasMesh$_()) {
                    const a = o._$GetSourceMesh$_(), l = a._$GetMeshPointAt$_(t, s);
                    null !== l && (i = l._$GetX$_(), e = l._$GetY$_(), n = l._$GetZElevation$_(), 
                    h = l._$GetU$_(), r = l._$GetV$_());
                }
                return {
                    x: i,
                    y: e,
                    _$zElevation$_: n,
                    u: h,
                    v: r
                };
            }
            _$getMeshSize$_() {
                const t = this.#_$#privateWi$_;
                if (!t._$HasMesh$_()) return [ 0, 0 ];
                const s = t._$GetSourceMesh$_();
                return [ s._$GetHSize$_(), s._$GetVSize$_() ];
            }
        };
    };
    0;
    const Ne = self._$C3$_, De = self._$C3X$_, Ae = self._$ILayer$_, Le = new WeakMap(), Oe = Ne._$_GetInternalAPIToken$_(), Pe = new Map([ [ "normal", 0 ], [ "additive", 1 ], [ "copy", 3 ], [ "destination-over", 4 ], [ "source-in", 5 ], [ "destination-in", 6 ], [ "source-out", 7 ], [ "destination-out", 8 ], [ "source-atop", 9 ], [ "destination-atop", 10 ] ]), Re = new Map([ ...Pe.entries() ].map(t => [ t[1], t[0] ])), ke = Ne._$New$_(Ne._$Color$_);
    self._$IWorldInstance$_ = t(self._$IInstance$_), self._$IWorldInstanceSDKBase$_ = t(self._$ISDKInstanceBase$_);
}

{
    const Fe = self._$C3X$_;
    self._$IDOMInstance$_ = class extends self._$IWorldInstance$_ {
        #_$#private$_;
        constructor() {
            super(), this.#_$#private$_ = self._$IInstance$_._$_GetInitInst$_();
        }
        _$getElement$_() {
            return this.#_$#private$_._$GetSdkInstance$_()._$_GetElementInDOMMode$_();
        }
        focus() {
            this.#_$#private$_._$GetSdkInstance$_()._$FocusElement$_();
        }
        blur() {
            this.#_$#private$_._$GetSdkInstance$_()._$BlurElement$_();
        }
        _$setCssStyle$_(t, s) {
            Fe._$RequireString$_(t), this.#_$#private$_._$GetSdkInstance$_()._$SetElementCSSStyle$_(t, s);
        }
    };
}

{
    let e = function(t) {
        let s = Be.get(t);
        return s || (s = je._$New$_(je.Event._$Dispatcher$_), Be.set(t, s)), s;
    };
    e;
    const je = self._$C3$_, ze = self._$C3X$_, Be = new WeakMap(), Ue = je._$_GetInternalAPIToken$_();
    self._$IBehaviorInstance$_ = class {
        #_$#private$_;
        constructor() {
            const t = je._$AddonManager$_._$_GetInitObject2$_(Ue), s = {
                runtime: {
                    value: (this.#_$#private$_ = t)._$GetRuntime$_()._$GetIRuntime$_(),
                    writable: !1
                },
                behavior: {
                    value: t._$GetBehavior$_()._$GetIBehavior$_(),
                    writable: !1
                },
                _$behaviorType$_: {
                    value: t._$GetBehaviorType$_()._$GetIBehaviorType$_(),
                    writable: !1
                }
            };
            Object.defineProperties(this, s), t._$GetRuntime$_()._$_MapScriptInterface$_(this, t);
        }
        static _$_GetInitInst$_() {
            return je._$AddonManager$_._$_GetInitObject$_();
        }
        get _$instance$_() {
            return this.#_$#private$_._$GetObjectInstance$_()._$GetInterfaceClass$_();
        }
        _$_release$_() {
            const t = Be.get(this);
            t && (t._$Release$_(), Be.delete(this));
        }
        addEventListener(t, s, i) {
            ze._$RequireString$_(t), ze._$RequireFunction$_(s), e(this).addEventListener(t, s, i);
        }
        removeEventListener(t, s, i) {
            ze._$RequireString$_(t), ze._$RequireFunction$_(s), e(this).removeEventListener(t, s, i);
        }
        dispatchEvent(t) {
            e(this).dispatchEvent(t);
        }
    };
}

{
    const We = self._$C3$_, Qe = We._$_GetInternalAPIToken$_();
    self._$IBehaviorType$_ = class {
        constructor() {
            const t = We._$AddonManager$_._$_GetInitObject2$_(Qe), s = {
                runtime: {
                    value: t._$GetRuntime$_()._$GetIRuntime$_(),
                    writable: !1
                },
                behavior: {
                    value: t._$GetBehavior$_()._$GetIBehavior$_(),
                    writable: !1
                },
                name: {
                    value: t._$GetName$_(),
                    writable: !1
                }
            };
            Object.defineProperties(this, s);
        }
    };
}

{
    const Ve = self._$C3$_, Je = Ve._$_GetInternalAPIToken$_();
    self._$IBehavior$_ = class {
        #_$#private$_;
        constructor() {
            const t = Ve._$AddonManager$_._$_GetInitObject2$_(Je), s = {
                runtime: {
                    value: (this.#_$#private$_ = t)._$GetRuntime$_()._$GetIRuntime$_(),
                    writable: !1
                }
            };
            Object.defineProperties(this, s), t._$GetRuntime$_()._$_MapScriptInterface$_(this, t);
        }
        _$getAllInstances$_() {
            return this.#_$#private$_._$GetInstances$_().map(t => t._$GetInterfaceClass$_());
        }
        static _$getByConstructor$_(t) {
            if (!t) return null;
            const s = Ve._$AddonManager$_._$GetBehaviorByConstructorFunction$_(t);
            return s ? s._$GetIBehavior$_() : null;
        }
    };
}

{
    const Ye = self._$C3$_, He = self._$C3X$_, qe = Ye._$New$_(Ye._$Color$_);
    self._$IEffectInstance$_ = class {
        #_$#private$_;
        constructor(t, s) {
            this.#_$#private$_ = t;
            const i = {
                index: {
                    value: s,
                    writable: !1
                }
            };
            Object.defineProperties(this, i);
        }
        get name() {
            const t = this.#_$#private$_._$GetAllEffectTypes$_();
            return t[this.index]._$GetName$_();
        }
        get isActive() {
            return this.#_$#private$_._$IsEffectIndexActive$_(this.index);
        }
        set isActive(t) {
            t = !!t;
            const s = this.#_$#private$_;
            s._$IsEffectIndexActive$_(this.index) !== t && (s._$SetEffectIndexActive$_(this.index, t), 
            s._$UpdateActiveEffects$_(), s._$GetRuntime$_()._$UpdateRender$_());
        }
        setParameter(t, s) {
            He._$RequireFiniteNumber$_(t), t = Math.floor(+t);
            const i = this.#_$#private$_, e = i._$GetEffectParameter$_(this.index, t);
            if (null === e) throw new RangeError("invalid index");
            if (e instanceof Ye._$Color$_) {
                if (!Array.isArray(s) || s.length < 3) throw new TypeError("expected array with 3 elements");
                qe._$setRgb$_(s[0], s[1], s[2]), s = qe;
            } else if ("number" != typeof s) throw new TypeError("expected number");
            const n = i._$SetEffectParameter$_(this.index, t, s);
            n && i._$IsEffectIndexActive$_(this.index) && i._$GetRuntime$_()._$UpdateRender$_();
        }
        getParameter(t) {
            He._$RequireFiniteNumber$_(t), t = Math.floor(+t);
            const s = this.#_$#private$_, i = s._$GetEffectParameter$_(this.index, t);
            if (null === i) throw new RangeError("invalid index");
            return i instanceof Ye._$Color$_ ? [ i._$getR$_(), i._$getG$_(), i._$getB$_() ] : i;
        }
    };
}

self._$IAnimation$_ = class {
    #_$#private$_;
    constructor(t) {
        this.#_$#private$_ = t, Object.defineProperties(this, {
            name: {
                value: t._$GetName$_(),
                writable: !1
            }
        });
    }
    get speed() {
        return this.#_$#private$_._$GetSpeed$_();
    }
    get isLooping() {
        return this.#_$#private$_._$IsLooping$_();
    }
    get repeatCount() {
        return this.#_$#private$_._$GetRepeatCount$_();
    }
    get _$repeatTo$_() {
        return this.#_$#private$_._$GetRepeatTo$_();
    }
    get _$isPingPong$_() {
        return this.#_$#private$_._$IsPingPong$_();
    }
    get frameCount() {
        return this.#_$#private$_._$GetFrameCount$_();
    }
    _$getFrames$_() {
        return this.#_$#private$_._$GetFrames$_().map(t => t._$GetIAnimationFrame$_());
    }
    *frames() {
        for (const t of this.#_$#private$_._$GetFrames$_()) yield t._$GetIAnimationFrame$_();
    }
};

self._$IImageInfo$_ = class {
    #_$#private$_;
    constructor(t) {
        this.#_$#private$_ = t;
    }
    static _$_Unwrap$_(t) {
        return t.#_$#private$_;
    }
    get width() {
        return this.#_$#private$_._$GetWidth$_();
    }
    get height() {
        return this.#_$#private$_._$GetHeight$_();
    }
    getSize() {
        const t = this.#_$#private$_;
        return [ t._$GetWidth$_(), t._$GetHeight$_() ];
    }
    _$getTexture$_(t) {
        return t._$getTextureForImageInfo$_(this);
    }
    _$getTexRect$_() {
        return this.#_$#private$_._$GetTexRect$_()._$toDOMRect$_();
    }
};

{
    const Ze = self._$C3X$_;
    self._$IAnimationFrame$_ = class extends self._$IImageInfo$_ {
        #_$#private$_;
        constructor(t) {
            super(t._$GetImageInfo$_()), this.#_$#private$_ = t, Object.defineProperties(this, {
                duration: {
                    value: t._$GetDuration$_(),
                    writable: !1
                },
                _$originX$_: {
                    value: t._$GetOriginX$_(),
                    writable: !1
                },
                _$originY$_: {
                    value: t._$GetOriginY$_(),
                    writable: !1
                }
            });
        }
        _$getOrigin$_() {
            const t = this.#_$#private$_;
            return [ t._$GetOriginX$_(), t._$GetOriginY$_() ];
        }
        _$getImagePointCount$_() {
            return this.#_$#private$_._$GetImagePointCount$_();
        }
        _$getImagePointX$_(t) {
            return this._$getImagePoint$_(t)[0];
        }
        _$getImagePointY$_(t) {
            return this._$getImagePoint$_(t)[1];
        }
        _$getImagePoint$_(t) {
            let s = this.#_$#private$_, i = null;
            if ("number" == typeof t) i = s._$GetImagePointByIndex$_(Math.floor(t)); else {
                if ("string" != typeof t) throw new TypeError("expected string or number");
                i = s._$GetImagePointByName$_(t);
            }
            return i ? [ i._$GetX$_(), i._$GetY$_() ] : this._$getOrigin$_();
        }
        _$getPolyPointCount$_() {
            const t = this.#_$#private$_._$GetCollisionPoly$_();
            return t ? t._$pointCount$_() : 0;
        }
        _$getPolyPointX$_(t) {
            return this._$getPolyPoint$_(t)[0];
        }
        _$getPolyPointY$_(t) {
            return this._$getPolyPoint$_(t)[1];
        }
        _$getPolyPoint$_(t) {
            Ze._$RequireFiniteNumber$_(t), t = Math.floor(t);
            const s = this.#_$#private$_._$GetCollisionPoly$_();
            if (!s || t < 0 || t >= s._$pointCount$_()) return [ 0, 0 ];
            const i = s._$pointsArr$_(), e = i[2 * t], n = i[2 * t + 1];
            return [ e, n ];
        }
        get tag() {
            return this.#_$#private$_._$GetTag$_();
        }
    };
}

{
    let s = function(t) {
        const s = Ke.get(t);
        if (s._$IsReleased$_()) throw new Error("timeline/tween was released and is no longer valid");
        return s;
    };
    s;
    const Xe = self._$C3X$_, Ke = new WeakMap();
    self._$ITimelineStateBase$_ = class {
        constructor(t) {
            Ke.set(this, t), t._$GetRuntime$_()._$_MapScriptInterface$_(this, t);
        }
        pause() {
            s(this)._$Stop$_();
        }
        resume() {
            s(this)._$Resume$_();
        }
        stop() {
            s(this)._$Reset$_();
        }
        _$hasTags$_(t) {
            return s(this)._$HasTags$_(t);
        }
        set time(t) {
            Xe._$RequireFiniteNumber$_(t), s(this)._$SetTime$_(t);
        }
        get time() {
            return s(this)._$GetTime$_();
        }
        set totalTime(t) {
            Xe._$RequireFiniteNumber$_(t), s(this)._$SetTotalTime$_(t);
        }
        get totalTime() {
            return s(this)._$GetTotalTime$_();
        }
        set isLooping(t) {
            s(this)._$SetLoop$_(!!t);
        }
        get isLooping() {
            return s(this)._$GetLoop$_();
        }
        set _$isPingPong$_(t) {
            s(this)._$SetPingPong$_(!!t);
        }
        get _$isPingPong$_() {
            return s(this)._$GetPingPong$_();
        }
        set playbackRate(t) {
            Xe._$RequireFiniteNumber$_(t), s(this)._$SetPlaybackRate$_(t);
        }
        get playbackRate() {
            return s(this)._$GetPlaybackRate$_();
        }
        get progress() {
            const t = s(this);
            return t._$GetTime$_() / t._$GetTotalTime$_();
        }
        get tags() {
            return s(this)._$GetTags$_();
        }
        get finished() {
            return s(this)._$GetPlayPromise$_();
        }
        get isPlaying() {
            return s(this).IsPlaying();
        }
        get _$isPaused$_() {
            return s(this)._$IsPaused$_();
        }
        get _$isReleased$_() {
            return Ke.get(this)._$IsReleased$_();
        }
    };
}

{
    let i = new WeakMap();
    self._$ITimelineState$_ = class extends self._$ITimelineStateBase$_ {
        constructor(t) {
            super(t), i.set(this, t);
            const s = {
                name: {
                    value: t._$GetName$_(),
                    writable: !1
                }
            };
            Object.defineProperties(this, s);
        }
    };
}

{
    let i = function(t) {
        const s = n.get(t);
        if (s._$IsReleased$_()) throw new Error("tween was released and is no longer valid");
        return s;
    }, e = (i, self._$C3X$_), n = new WeakMap(), h = new WeakMap(), r = null;
    self._$ITweenState$_ = class extends self._$ITimelineStateBase$_ {
        constructor(t, s, i) {
            super(t), r = r || i.easeToIndexFunc, n.set(this, t), s && h.set(this, s);
        }
        stop() {
            const t = i(this), s = h.get(this);
            s.ReleaseTween(t);
        }
        _$setEase$_(t) {
            e._$RequireString$_(t);
            const s = self._$Ease$_._$GetEaseFromIndex$_(r(t));
            i(this)._$SetEase$_(s);
        }
        get _$instance$_() {
            const t = i(this)._$GetInstance$_();
            return t ? t._$GetInterfaceClass$_() : null;
        }
        get _$isDestroyOnComplete$_() {
            return i(this)._$GetDestroyInstanceOnComplete$_();
        }
        set _$isDestroyOnComplete$_(t) {
            i(this)._$SetDestroyInstanceOnComplete$_(!!t);
        }
        get value() {
            const t = i(this);
            if ("value" !== t._$GetId$_()) throw new Error("not a value tween");
            return t._$GetPropertyTrack$_("value")._$GetSourceAdapterValue$_();
        }
    };
}

self._$ISDKPluginBase$_ = class extends self._$IPlugin$_ {
    constructor() {
        super();
    }
};

{
    const $e = self._$C3$_, tn = self._$C3X$_, sn = $e._$_GetInternalAPIToken$_();
    self._$ISDKDOMPluginBase$_ = class extends self._$ISDKPluginBase$_ {
        #_$#private$_;
        #_$#domComponentId$_;
        #_$#nextElementId$_ = 0;
        #_$#instMap$_ = new Map();
        constructor(t) {
            if (super(), this.#_$#private$_ = $e._$AddonManager$_._$_GetInitObject2$_(sn), 
            !t?.domComponentId) throw new Error("no DOM component ID specified");
            this.#_$#domComponentId$_ = t.domComponentId, this._$_addElementMessageHandler$_("elem-focused", t => t._$_onElemFocused$_()), 
            this._$_addElementMessageHandler$_("elem-blurred", t => {
                t && t._$_onElemBlurred$_();
            });
        }
        _$_addElement$_(t) {
            const s = this.#_$#nextElementId$_++;
            return this.#_$#instMap$_.set(s, t), s;
        }
        _$_removeElement$_(t) {
            this.#_$#instMap$_.delete(t);
        }
        _$_addElementMessageHandler$_(t, i) {
            const s = this.#_$#private$_._$GetRuntime$_();
            s._$AddDOMComponentMessageHandler$_(this.#_$#domComponentId$_, t, t => {
                const s = this.#_$#instMap$_.get(t.elementId);
                i(s, t);
            });
        }
        _$_addElementMessageHandlers$_(t) {
            tn._$RequireArray$_(t);
            for (const [ s, i ] of t) this._$_addElementMessageHandlers$_(s, i);
        }
    };
}

{
    const en = self._$C3$_, nn = (new WeakMap(), en._$_GetInternalAPIToken$_());
    self._$ISDKObjectTypeBase$_ = class extends self._$IObjectClass$_ {
        #_$#private$_;
        constructor() {
            super(), this.#_$#private$_ = en._$AddonManager$_._$_GetInitObject2$_(nn);
        }
        _$_onCreate$_() {}
        _$getImageInfo$_() {
            return this.#_$#private$_._$GetImageInfo$_()._$GetIImageInfo$_();
        }
        _$_loadTextures$_(t) {}
        _$_releaseTextures$_(t) {}
        _$_onDynamicTextureLoadComplete$_() {}
        _$_preloadTexturesWithInstances$_(t) {}
    };
}

{
    const hn = self._$C3$_, rn = (new WeakMap(), hn._$_GetInternalAPIToken$_());
    self._$ISDKWorldInstanceBase$_ = class extends self._$IWorldInstanceSDKBase$_ {
        #_$#private$_;
        #_$#renderercontextlost_handler$_ = null;
        #_$#renderercontextrestored_handler$_ = null;
        constructor(t) {
            super(t), this.#_$#private$_ = hn._$AddonManager$_._$_GetInitObject2$_(rn);
        }
        _$_release$_() {
            if (super._$_release$_(), this.#_$#renderercontextlost_handler$_) {
                const t = this.#_$#private$_._$GetRuntime$_()._$Dispatcher$_();
                t.removeEventListener("renderercontextlost", this.#_$#renderercontextlost_handler$_), 
                t.removeEventListener("renderercontextrestored", this.#_$#renderercontextrestored_handler$_), 
                this.#_$#renderercontextlost_handler$_ = null, this.#_$#renderercontextrestored_handler$_ = null;
            }
        }
        _$_handleRendererContextLoss$_() {
            if (!this.#_$#renderercontextlost_handler$_) {
                this.#_$#renderercontextlost_handler$_ = () => this._$_onRendererContextLost$_(), 
                this.#_$#renderercontextrestored_handler$_ = () => this._$_onRendererContextRestored$_();
                const t = this.#_$#private$_._$GetRuntime$_()._$Dispatcher$_();
                t.addEventListener("renderercontextlost", this.#_$#renderercontextlost_handler$_), 
                t.addEventListener("renderercontextrestored", this.#_$#renderercontextrestored_handler$_);
            }
        }
        _$_onRendererContextLost$_() {}
        _$_onRendererContextRestored$_() {}
        _$_draw$_(t) {}
    };
}

{
    const on = self._$C3$_, an = on._$New$_(on.Rect), ln = new WeakMap(), un = on._$_GetInternalAPIToken$_();
    self._$ISDKDOMInstanceBase$_ = class extends self._$ISDKWorldInstanceBase$_ {
        #_$#elementId$_ = -1;
        #_$#isElementShowing$_ = !0;
        #_$#elemHasFocus$_ = !1;
        #_$#autoFontSize$_ = !1;
        #_$#autoFontSizeOffset$_ = -.2;
        #_$#lastRect$_ = on._$New$_(on.Rect, 0, 0, -1, -1);
        #_$#lastWindowWidth$_ = 0;
        #_$#lastWindowHeight$_ = 0;
        #_$#lastHTMLIndex$_ = -1;
        #_$#lastHTMLZIndex$_ = -1;
        #_$#isPendingUpdateState$_ = !1;
        constructor(t) {
            if (!t?.domComponentId) throw new Error("no DOM component ID specified");
            super(t);
            const s = on._$AddonManager$_._$_GetInitObject2$_(un), i = (ln.set(this, s), 
            this.#_$#elementId$_ = this._$plugin$_._$_addElement$_(this), s._$GetRuntime$_()._$GetCanvasManager$_());
            this.#_$#lastWindowWidth$_ = i._$GetLastWidth$_(), this.#_$#lastWindowHeight$_ = i._$GetLastHeight$_(), 
            this._$_setTicking$_(!0);
        }
        _$_release$_() {
            super._$_release$_(), this._$plugin$_._$_removeElement$_(this.#_$#elementId$_), 
            this._$_postToDOMElement$_("destroy"), this.#_$#elementId$_ = -1, ln.delete(this);
        }
        _$_getElementInDOMMode$_() {
            const t = ln.get(this)._$GetRuntime$_();
            if (t._$IsInWorker$_()) throw new Error("not valid in worker mode");
            return this._$_postToDOMElementMaybeSync$_("get-element");
        }
        _$_postToDOMElement$_(t, s) {
            (s = s || {}).elementId = this.#_$#elementId$_, this._$_postToDOM$_(t, s);
        }
        _$_postToDOMElementMaybeSync$_(t, s) {
            return (s = s || {}).elementId = this.#_$#elementId$_, this._$_postToDOMMaybeSync$_(t, s);
        }
        _$_postToDOMElementAsync$_(t, s) {
            return (s = s || {}).elementId = this.#_$#elementId$_, this._$_postToDOMAsync$_(t, s);
        }
        _$_createElement$_(t) {
            t = t || {};
            const s = ln.get(this)._$GetWorldInfo$_();
            t.elementId = this.#_$#elementId$_, t.isVisible = s._$IsVisible$_(), 
            t.htmlIndex = s._$GetLayer$_()._$GetHTMLIndex$_(), t.htmlZIndex = s._$GetHTMLZIndex$_(), 
            Object.assign(t, this._$_getElementState$_()), this.#_$#isElementShowing$_ = !!t.isVisible, 
            this._$_postToDOMMaybeSync$_("create", t), this._$_updatePosition$_(!0);
        }
        _$setElementVisible$_(t) {
            this.#_$#isElementShowing$_ !== (t = !!t) && (this.#_$#isElementShowing$_ = t, 
            this._$_postToDOMElement$_("set-visible", {
                isVisible: t
            }));
        }
        _$_tick$_() {
            this._$_updatePosition$_(!1);
        }
        _$_shouldPreserveElement$_() {
            const t = ln.get(this)._$GetRuntime$_(), s = t._$GetCanvasManager$_()._$GetFullscreenMode$_();
            return "Android" === on._$Platform$_._$OS$_ && ("scale-inner" === s || "scale-outer" === s || "crop" === s);
        }
        _$_updatePosition$_(u) {
            const c = ln.get(this);
            if (!c._$IsDestroyed$_()) {
                let t = c._$GetWorldInfo$_(), s = t._$GetLayer$_(), i = t._$GetBoundingBox$_(), [ e, n ] = s._$LayerToCanvasCss$_(i._$getLeft$_(), i._$getTop$_()), [ h, r ] = s._$LayerToCanvasCss$_(i._$getRight$_(), i._$getBottom$_()), o = c._$GetRuntime$_()._$GetCanvasManager$_(), a = o._$GetCssWidth$_(), l = o._$GetCssHeight$_();
                if (t._$IsVisible$_() && s._$IsVisible$_()) if (!this._$_shouldPreserveElement$_() && (h <= 0 || r <= 0 || a <= e || l <= n)) this._$setElementVisible$_(!1); else {
                    an.set(e, n, h, r);
                    const f = o._$GetLastWidth$_(), d = o._$GetLastHeight$_(), p = s._$GetHTMLIndex$_(), m = t._$GetHTMLZIndex$_();
                    if (!u && an.equals(this.#_$#lastRect$_) && this.#_$#lastWindowWidth$_ === f && this.#_$#lastWindowHeight$_ === d && this.#_$#lastHTMLIndex$_ === p && this.#_$#lastHTMLZIndex$_ === m) this._$setElementVisible$_(!0); else {
                        this.#_$#lastRect$_._$copy$_(an), this.#_$#lastWindowWidth$_ = f, 
                        this.#_$#lastWindowHeight$_ = d, this.#_$#lastHTMLIndex$_ = p, 
                        this.#_$#lastHTMLZIndex$_ = m, this._$setElementVisible$_(!0);
                        let t = null;
                        this.#_$#autoFontSize$_ && (t = s._$GetDisplayScale$_() + this.#_$#autoFontSizeOffset$_), 
                        this._$_postToDOMElement$_("update-position", {
                            left: Math.round(this.#_$#lastRect$_._$getLeft$_()),
                            top: Math.round(this.#_$#lastRect$_._$getTop$_()),
                            width: Math.round(this.#_$#lastRect$_.width()),
                            height: Math.round(this.#_$#lastRect$_.height()),
                            htmlIndex: p,
                            htmlZIndex: m,
                            fontSize: t
                        });
                    }
                } else this._$setElementVisible$_(!1);
            }
        }
        _$focusElement$_() {
            this._$_postToDOMElementMaybeSync$_("focus", {
                focus: !0
            });
        }
        _$blurElement$_() {
            this._$_postToDOMElementMaybeSync$_("focus", {
                focus: !1
            });
        }
        _$_onElemFocused$_() {
            this.#_$#elemHasFocus$_ = !0;
        }
        _$_onElemBlurred$_() {
            this.#_$#elemHasFocus$_ = !1;
        }
        _$isElementFocused$_() {
            return this.#_$#elemHasFocus$_;
        }
        _$setElementCSSStyle$_(t, s) {
            this.postToDOMElement("set-css-style", {
                prop: on._$CSSToCamelCase$_(t),
                val: s
            });
        }
        _$setElementAttribute$_(t, s) {
            this.postToDOMElement("set-attribute", {
                name: t,
                val: s
            });
        }
        _$removeElementAttribute$_(t) {
            this.postToDOMElement("remove-attribute", {
                name: t
            });
        }
        _$_updateElementState$_() {
            this.#_$#isPendingUpdateState$_ || (this.#_$#isPendingUpdateState$_ = !0, 
            Promise.resolve().then(() => {
                this.#_$#isPendingUpdateState$_ = !1, this._$_postToDOMElement$_("update-state", this._$_getElementState$_());
            }));
        }
        _$_getElementState$_() {}
        _$_getElementId$_() {
            return this.#_$#elementId$_;
        }
    };
}

self._$ISDKBehaviorBase$_ = class extends self._$IBehavior$_ {
    constructor() {
        super();
    }
};

self._$ISDKBehaviorTypeBase$_ = class extends globalThis._$IBehaviorType$_ {
    constructor() {
        super();
    }
    _$_onCreate$_() {}
};

{
    const cn = self._$C3$_, fn = new WeakMap(), dn = cn._$_GetInternalAPIToken$_();
    self._$ISDKBehaviorInstanceBase$_ = class extends self._$IBehaviorInstance$_ {
        #_$#isTicking$_ = !1;
        #_$#isTicking2$_ = !1;
        #_$#isPostTicking$_ = !1;
        constructor() {
            super(), fn.set(this, cn._$AddonManager$_._$_GetInitObject2$_(dn));
        }
        _$_release$_() {
            super._$_release$_(), this._$_setTicking$_(!1), this._$_setTicking2$_(!1), 
            this._$_setPostTicking$_(!1), fn.delete(this);
        }
        _$_getInitProperties$_() {
            return cn._$AddonManager$_._$_GetInitProperties$_();
        }
        _$_postCreate$_() {}
        _$_trigger$_(t) {
            const s = fn.get(this);
            s._$GetRuntime$_()._$Trigger$_(t, s._$GetObjectInstance$_(), s._$GetBehaviorType$_());
        }
        _$_triggerAsync$_(t) {
            const s = fn.get(this);
            return s._$GetRuntime$_()._$TriggerAsync$_(t, s._$GetObjectInstance$_(), s._$GetBehaviorType$_());
        }
        _$_setTicking$_(t) {
            if (this.#_$#isTicking$_ !== (t = !!t)) {
                this.#_$#isTicking$_ = t;
                const s = fn.get(this)._$GetRuntime$_();
                t ? s._$_AddBehInstToTick$_(this) : s._$_RemoveBehInstToTick$_(this);
            }
        }
        _$_isTicking$_() {
            return this.#_$#isTicking$_;
        }
        _$_tick$_() {}
        _$_setTicking2$_(t) {
            if (this.#_$#isTicking2$_ !== (t = !!t)) {
                this.#_$#isTicking2$_ = t;
                const s = fn.get(this)._$GetRuntime$_();
                t ? s._$_AddBehInstToTick2$_(this) : s._$_RemoveBehInstToTick2$_(this);
            }
        }
        _$_isTicking2$_() {
            return this.#_$#isTicking2$_;
        }
        _$_tick2$_() {}
        _$_setPostTicking$_(t) {
            if (this.#_$#isPostTicking$_ !== (t = !!t)) {
                this.#_$#isPostTicking$_ = t;
                const s = fn.get(this)._$GetRuntime$_();
                t ? s._$_AddBehInstToPostTick$_(this) : s._$_RemoveBehInstToPostTick$_(this);
            }
        }
        _$_isPostTicking$_() {
            return this.#_$#isPostTicking$_;
        }
        _$_postTick$_() {}
        _$_getDebuggerProperties$_() {
            return [];
        }
        _$_saveToJson$_() {
            return null;
        }
        _$_loadFromJson$_(t) {}
    };
}

{
    let e = self._$C3X$_, n = null;
    self._$ISDKUtils$_ = class {
        constructor(t) {
            n = t;
        }
        _$addLoadPromise$_(t) {
            n._$AddLoadPromise$_(t);
        }
        _$sendWrapperExtensionMessage$_(t, s, i) {
            e._$RequireString$_(t), e._$RequireString$_(s), e._$RequireOptionalArray$_(i), 
            n._$SendWrapperExtensionMessage$_(t, s, i);
        }
        _$sendWrapperExtensionMessageAsync$_(t, s, i) {
            return e._$RequireString$_(t), e._$RequireString$_(s), e._$RequireOptionalArray$_(i), 
            n._$SendWrapperExtensionMessageAsync$_(t, s, i);
        }
        _$createLoopingConditionContext$_(t) {
            return e._$RequireOptionalString$_(t), new self._$ILoopingConditionContext$_(n, t);
        }
        set _$isAutoSuspendEnabled$_(t) {
            n._$_SetAutoSuspendEnabled$_(!!t);
        }
        get _$isAutoSuspendEnabled$_() {
            return n._$_IsAutoSuspendEnabled$_();
        }
        _$setSuspended$_(t) {
            n._$SetSuspended$_(!!t);
        }
        _$getObjectClassBySid$_(t) {
            e._$RequireNumber$_(t);
            const s = n._$GetObjectClassBySID$_(t);
            return s ? s._$GetIObjectClass$_() : null;
        }
    };
}

self._$ILoopingConditionContext$_ = class {
    #_$#runtime$_;
    #_$#currentEvent$_;
    #_$#solModifiers$_;
    #_$#oldFrame$_;
    #_$#newFrame$_;
    #_$#loop$_;
    constructor(t, s) {
        const i = (this.#_$#runtime$_ = t)._$GetEventSheetManager$_(), e = t._$GetCurrentEvent$_(), n = (this.#_$#currentEvent$_ = e, 
        this.#_$#solModifiers$_ = e._$GetSolModifiers$_(), t._$GetEventStack$_()), h = (this.#_$#oldFrame$_ = n._$GetCurrentStackFrame$_(), 
        this.#_$#newFrame$_ = n._$Push$_(e), i._$GetLoopStack$_()), r = h._$Push$_();
        this.#_$#loop$_ = r, s && r._$SetName$_(s), t._$SetDebuggingEnabled$_(!1);
    }
    _$retrigger$_() {
        const t = this.#_$#runtime$_._$GetEventSheetManager$_(), s = this.#_$#solModifiers$_, i = this.#_$#loop$_;
        t._$PushCopySol$_(s), this.#_$#currentEvent$_._$Retrigger$_(this.#_$#oldFrame$_, this.#_$#newFrame$_), 
        t._$PopSol$_(s), i._$SetIndex$_(i._$GetIndex$_() + 1);
    }
    get _$isStopped$_() {
        return this.#_$#loop$_._$IsStopped$_();
    }
    release() {
        const t = this.#_$#runtime$_, s = t._$GetEventStack$_(), i = t._$GetEventSheetManager$_()._$GetLoopStack$_();
        t._$SetDebuggingEnabled$_(!0), i._$Pop$_(), s._$Pop$_();
    }
};

{
    let d = self._$C3$_, n = self._$C3X$_, p = null, h = null;
    self._$IRenderer$_ = class {
        constructor(t, s) {
            h = t, p = s;
        }
        _$setAlphaBlendMode$_() {
            p._$SetAlphaBlend$_();
        }
        _$setBlendMode$_(t) {
            p._$SetNamedBlendMode$_(t);
        }
        _$setColorFillMode$_() {
            p._$SetColorFillMode$_();
        }
        _$setTextureFillMode$_() {
            p._$SetTextureFillMode$_();
        }
        _$setSmoothLineFillMode$_() {
            p._$SetSmoothLineFillMode$_();
        }
        setColor(t) {
            p._$SetColorRgba$_(t[0], t[1], t[2], t[3]);
        }
        _$setColorRgba$_(t, s, i, e) {
            p._$SetColorRgba$_(t, s, i, e);
        }
        _$resetColor$_() {
            p._$ResetColor$_();
        }
        _$setOpacity$_(t) {
            p._$SetOpacity$_(t);
        }
        _$setCurrentZ$_(t) {
            p._$SetCurrentZ$_(t);
        }
        _$getCurrentZ$_() {
            p._$GetCurrentZ$_();
        }
        rect(t) {
            p._$Rect2$_(t.left, t.top, t.right, t.bottom);
        }
        _$rect2$_(t, s, i, e) {
            p._$Rect2$_(t, s, i, e);
        }
        _$quad$_(t) {
            p._$Quad$_(d._$Quad$_._$fromDOMQuad$_(t));
        }
        _$quad2$_(t, s, i, e, n, h, r, o) {
            p._$Quad2$_(t, s, i, e, n, h, r, o);
        }
        _$quad3$_(t, s) {
            p._$Quad3$_(d._$Quad$_._$fromDOMQuad$_(t), d.Rect._$fromDOMRect$_(s));
        }
        _$quad4$_(t, s) {
            p._$Quad4$_(d._$Quad$_._$fromDOMQuad$_(t), d._$Quad$_._$fromDOMQuad$_(s));
        }
        _$quad3D$_(t, s, i, e, n, h, r, o, a, l, u, c, f) {
            p._$Quad3D$_(t, s, i, e, n, h, r, o, a, l, u, c, d.Rect._$fromDOMRect$_(f));
        }
        _$quad3D2$_(t, s, i, e, n, h, r, o, a, l, u, c, f) {
            p._$Quad3D2$_(t, s, i, e, n, h, r, o, a, l, u, c, d._$Quad$_._$fromDOMQuad$_(f));
        }
        _$drawMesh$_(t, s, i) {
            p._$DrawMesh$_(t, s, i);
        }
        _$convexPoly$_(t) {
            p._$ConvexPoly$_(t);
        }
        line(t, s, i, e) {
            p._$Line$_(t, s, i, e);
        }
        _$texturedLine$_(t, s, i, e, n, h) {
            p._$TexturedLine$_(t, s, i, e, n, h);
        }
        _$lineRect$_(t, s, i, e) {
            p._$LineRect$_(t, s, i, e);
        }
        _$lineRect2$_(t) {
            p._$LineRect2$_(d.Rect._$fromDOMRect$_(t));
        }
        _$lineQuad$_(t) {
            p._$LineQuad$_(d._$Quad$_._$fromDOMQuad$_(t));
        }
        _$pushLineWidth$_(t) {
            p._$PushLineWidth$_(t);
        }
        _$popLineWidth$_() {
            p._$PopLineWidth$_();
        }
        _$pushLineCap$_(t) {
            p._$PushLineCap$_(t);
        }
        _$popLineCap$_() {
            p._$PopLineCap$_();
        }
        _$setTexture$_(t) {
            n._$RequireOptionalInstanceOf$_(t, self._$ITexture$_);
            const s = t ? h._$_UnwrapScriptInterface$_(t) : null;
            p._$SetTexture$_(s);
        }
        _$loadTextureForImageInfo$_(t, s) {
            const i = self._$IImageInfo$_._$_Unwrap$_(t);
            if (i) return i._$LoadStaticTexture$_(p, {
                _$wrapX$_: s?._$wrapX$_ ?? "clamp-to-edge",
                _$wrapY$_: s?._$wrapY$_ ?? "clamp-to-edge",
                _$sampling$_: s?._$sampling$_ ?? "trilinear",
                _$mipMap$_: s?._$mipMap$_ ?? !0
            });
            throw new Error("invalid IImageInfo");
        }
        _$releaseTextureForImageInfo$_(t) {
            const s = self._$IImageInfo$_._$_Unwrap$_(t);
            if (!s) throw new Error("invalid IImageInfo");
            s._$ReleaseTexture$_();
        }
        _$getTextureForImageInfo$_(t) {
            const s = self._$IImageInfo$_._$_Unwrap$_(t);
            if (!s) throw new Error("invalid IImageInfo");
            const i = s._$GetTexture$_();
            return self._$ITexture$_._$GetInterface$_(h, i);
        }
        _$createDynamicTexture$_(t, s, i) {
            n._$RequireFiniteNumber$_(t), n._$RequireFiniteNumber$_(s);
            const e = p._$CreateDynamicTexture$_(t, s, {
                _$wrapX$_: i?._$wrapX$_ ?? "clamp-to-edge",
                _$wrapY$_: i?._$wrapY$_ ?? "clamp-to-edge",
                _$sampling$_: i?._$sampling$_ ?? "trilinear",
                _$mipMap$_: i?._$mipMap$_ ?? !0
            });
            return self._$ITexture$_._$GetInterface$_(h, e);
        }
        _$updateTexture$_(t, s, i) {
            n._$RequireInstanceOf$_(s, self._$ITexture$_);
            const e = h._$_UnwrapScriptInterface$_(s);
            p._$UpdateTexture$_(t, e, {
                premultiplyAlpha: i?.premultiplyAlpha ?? !0
            });
        }
        deleteTexture(t) {
            n._$RequireInstanceOf$_(t, self._$ITexture$_);
            const s = h._$_UnwrapScriptInterface$_(t);
            p._$DeleteTexture$_(s);
        }
        _$createRendererText$_() {
            const t = p._$CreateRendererText$_();
            return new self._$IRendererText$_(h, t);
        }
        _$setDeviceTransform$_() {
            h._$GetCanvasManager$_()._$SetDeviceTransform$_(p);
        }
        _$setLayerTransform$_(t) {
            n._$RequireInstanceOf$_(t, globalThis._$ILayer$_);
            const s = h._$_UnwrapScriptInterface$_(t);
            s._$_SetTransform$_(p);
        }
    };
}

{
    const pn = new WeakMap(), mn = new WeakMap();
    self._$ITexture$_ = class {
        constructor(t, s) {
            pn.set(this, {
                runtime: t,
                _$texture$_: s
            }), mn.set(s, this), t._$_MapScriptInterface$_(this, s), Object.defineProperties(this, {
                width: {
                    value: s._$GetWidth$_(),
                    writable: !1
                },
                height: {
                    value: s._$GetHeight$_(),
                    writable: !1
                }
            });
        }
        static _$GetInterface$_(t, s) {
            if (!s) return null;
            const i = mn.get(s);
            return i || new self._$ITexture$_(t, s);
        }
    };
}

{
    let e = function(t) {
        return yn.get(t)._$rendererText$_;
    };
    e;
    const gn = self._$C3X$_, yn = new WeakMap();
    self._$IRendererText$_ = class {
        constructor(t, s) {
            yn.set(this, {
                runtime: t,
                _$rendererText$_: s
            }), t._$_MapScriptInterface$_(this, s);
        }
        release() {
            e(this)._$Release$_();
        }
        set _$fontFace$_(t) {
            gn._$RequireString$_(t), e(this)._$SetFontName$_(t);
        }
        get _$fontFace$_() {
            return e(this)._$GetFontName$_();
        }
        set _$sizePt$_(t) {
            gn._$RequireFiniteNumber$_(t), e(this)._$SetFontSize$_(t);
        }
        get _$sizePt$_() {
            return e(this)._$GetFontSize$_();
        }
        set lineHeight(t) {
            gn._$RequireFiniteNumber$_(t), e(this)._$SetLineHeight$_(t);
        }
        get lineHeight() {
            return e(this)._$GetLineHeight$_();
        }
        set _$isBold$_(t) {
            e(this)._$SetBold$_(t);
        }
        get _$isBold$_() {
            return e(this)._$IsBold$_();
        }
        set _$isItalic$_(t) {
            e(this)._$SetItalic$_(t);
        }
        get _$isItalic$_() {
            return e(this)._$IsItalic$_();
        }
        setColor(t) {
            gn._$RequireArray$_(t), this._$setColorRgb$_(t[0], t[1], t[2]);
        }
        _$setColorRgb$_(t, s, i) {
            e(this)._$SetColorRgb$_(t, s, i);
        }
        _$setCssColor$_(t) {
            gn._$RequireString$_(t), e(this)._$SetColor$_(t);
        }
        set _$horizontalAlign$_(t) {
            e(this)._$SetHorizontalAlignment$_(t);
        }
        get _$horizontalAlign$_() {
            return e(this)._$GetHorizontalAlignment$_();
        }
        set verticalAlign(t) {
            e(this)._$SetVerticalAlignment$_(t);
        }
        get verticalAlign() {
            return e(this)._$GetVerticalAlignment$_();
        }
        set _$wordWrapMode$_(t) {
            e(this)._$SetWordWrapMode$_(t);
        }
        get _$wordWrapMode$_() {
            return e(this)._$GetWordWrapMode$_();
        }
        set _$textDirection$_(t) {
            e(this)._$SetTextDirection$_(t);
        }
        get _$textDirection$_() {
            return e(this)._$GetTextDirection$_();
        }
        set text(t) {
            gn._$RequireString$_(t), e(this)._$SetText$_(t);
        }
        get text() {
            return e(this)._$GetText$_();
        }
        _$setSize$_(t, s, i) {
            gn._$RequireFiniteNumber$_(t), gn._$RequireFiniteNumber$_(s), gn._$RequireFiniteNumber$_(i), 
            e(this)._$SetSize$_(t, s, i);
        }
        _$getTexture$_() {
            const {
                runtime: t,
                _$rendererText$_: s
            } = yn.get(this), i = s._$GetTexture$_();
            return self._$ITexture$_._$GetInterface$_(t, i);
        }
        _$getTexRect$_() {
            return e(this)._$GetTexRect$_()._$toDOMRect$_();
        }
        _$setTextureUpdateCallback$_(t) {
            gn._$RequireFunction$_(t), e(this)._$ontextureupdate$_ = t;
        }
        _$releaseTexture$_() {
            e(this)._$ReleaseTexture$_();
        }
        get _$textWidth$_() {
            return e(this)._$GetTextWidth$_();
        }
        get _$textHeight$_() {
            return e(this)._$GetTextHeight$_();
        }
    };
}

{
    let e = function(t) {
        if (!t) return "";
        const s = t.split(".");
        if (s.length < 2) return "";
        const i = s.at(-1).toLowerCase();
        return wn.get(i) || "";
    }, h = function(e) {
        return new Promise((t, s) => {
            const i = document.createElement("script");
            i.onload = t, i.onerror = s, i.async = !1, i.type = "module", i.src = e, 
            document.head.appendChild(i);
        });
    };
    e, h;
    const g = self._$C3$_, Mn = new Set([ "local", "remote" ]), wn = new Map([ [ "mp4", "video/mp4" ], [ "webm", "video/webm" ], [ "m4a", "audio/mp4" ], [ "mp3", "audio/mpeg" ], [ "js", "application/javascript" ], [ "wasm", "application/wasm" ], [ "svg", "image/svg+xml" ], [ "html", "text/html" ] ]);
    g._$AssetManager$_ = class extends g._$DefendedBase$_ {
        constructor(t, s) {
            super();
            const i = s.exportType, e = (this._$_runtime$_ = t, this._$_fileStructure$_ = "folders", 
            this._$_cordovaBlobUrlCache$_ = new Map(), this._$_isCordova$_ = "cordova" === i, 
            this._$_isiOSCordova$_ = !!s.isiOSCordova, this._$_isFileProtocol$_ = !!s.isFileProtocol, 
            this._$_swClientId$_ = s.swClientId, this._$_supportedAudioFormats$_ = s.supportedAudioFormats || {}, 
            this._$_audioFiles$_ = new Map(), this._$_preloadSounds$_ = !1, this._$_scriptSubfolder$_ = s.scriptFolder, 
            this._$_mediaSubfolder$_ = "", this._$_fontsSubfolder$_ = "", this._$_iconsSubfolder$_ = "", 
            this._$_fileMap$_ = s.fileMap || new Map(), this._$_fileMapBlobUrls$_ = new Map(), 
            "html5" === i || "scirra-arcade" === i || "instant-games" === i);
            this._$_defaultLoadPolicy$_ = e ? "remote" : "local", this._$_assetsByUrl$_ = new Map(), 
            this._$_webFonts$_ = [], this._$_loadPromises$_ = [], this._$_hasFinishedInitialLoad$_ = !1, 
            this._$_totalAssetSizeToLoad$_ = 0, this._$_assetSizeLoaded$_ = 0, this._$_lastLoadProgress$_ = 0, 
            this._$_hasHadErrorLoading$_ = !1, this._$_loadingRateLimiter$_ = g._$New$_(g._$RateLimiter$_, () => this._$_FireLoadingProgressEvent$_(), 50), 
            this._$_localPromiseThrottle$_ = g._$New$_(g._$PromiseThrottle$_, Math.max(g.hardwareConcurrency, 8)), 
            this._$_remotePromiseThrottle$_ = g._$New$_(g._$PromiseThrottle$_, 20), 
            this._$_iAssetManager$_ = new self._$IAssetManager$_(this);
        }
        _$Release$_() {
            for (const t of this._$_assetsByUrl$_.values()) t._$Release$_();
            this._$_assetsByUrl$_.clear(), g._$clearArray$_(this._$_loadPromises$_), 
            this._$_runtime$_ = null;
        }
        _$GetRuntime$_() {
            return this._$_runtime$_;
        }
        _$_SetFileStructure$_(t) {
            this._$_fileStructure$_ = t;
        }
        _$GetFileStructure$_() {
            return this._$_fileStructure$_;
        }
        _$GetScriptSubfolder$_() {
            return this._$_scriptSubfolder$_;
        }
        _$_SetMediaSubfolder$_(t) {
            this._$_mediaSubfolder$_ = t;
        }
        _$GetMediaSubfolder$_() {
            return this._$_mediaSubfolder$_;
        }
        _$_SetFontsSubfolder$_(t) {
            this._$_fontsSubfolder$_ = t;
        }
        _$GetFontsSubfolder$_() {
            return this._$_fontsSubfolder$_;
        }
        _$_SetIconsSubfolder$_(t) {
            this._$_iconsSubfolder$_ = t;
        }
        _$GetIconsSubfolder$_() {
            return this._$_iconsSubfolder$_;
        }
        _$IsFileProtocol$_() {
            return this._$_isFileProtocol$_;
        }
        _$FetchBlob$_(t, s) {
            return s = s || this._$_defaultLoadPolicy$_, g._$IsRelativeURL$_(t) ? ("flat" === this._$_fileStructure$_ && (t = t.toLowerCase()), 
            this._$_isCordova$_ && this._$_isFileProtocol$_ ? this._$CordovaFetchLocalFileAsBlob$_(t) : "playable-ad-single-file" === this._$_runtime$_._$GetExportType$_() ? self.c3_runtimeInterface._PlayableAdFetchBlob(t) : ("local" === s ? this._$_localPromiseThrottle$_ : this._$_remotePromiseThrottle$_)._$Add$_(() => g._$FetchBlob$_(t))) : g._$FetchBlob$_(t);
        }
        _$FetchArrayBuffer$_(t) {
            return g._$IsRelativeURL$_(t) ? ("flat" === this._$_fileStructure$_ && (t = t.toLowerCase()), 
            this._$_isCordova$_ && this._$_isFileProtocol$_ ? this._$CordovaFetchLocalFileAsArrayBuffer$_(t) : "playable-ad-single-file" === this._$_runtime$_._$GetExportType$_() ? g._$BlobToArrayBuffer$_(self.c3_runtimeInterface._PlayableAdFetchBlob(t)) : ("local" === this._$_defaultLoadPolicy$_ ? this._$_localPromiseThrottle$_ : this._$_remotePromiseThrottle$_)._$Add$_(() => g._$FetchArrayBuffer$_(t))) : g._$FetchArrayBuffer$_(t);
        }
        _$FetchText$_(t) {
            return g._$IsRelativeURL$_(t) ? ("flat" === this._$_fileStructure$_ && (t = t.toLowerCase()), 
            this._$_isCordova$_ && this._$_isFileProtocol$_ ? this._$CordovaFetchLocalFileAsText$_(t) : "playable-ad-single-file" === this._$_runtime$_._$GetExportType$_() ? g._$BlobToString$_(self.c3_runtimeInterface._PlayableAdFetchBlob(t)) : ("local" === this._$_defaultLoadPolicy$_ ? this._$_localPromiseThrottle$_ : this._$_remotePromiseThrottle$_)._$Add$_(() => g._$FetchText$_(t))) : g._$FetchText$_(t);
        }
        async _$FetchJson$_(t) {
            const s = await this._$FetchText$_(t);
            return JSON.parse(s);
        }
        _$_CordovaFetchLocalFileAs$_(t, s) {
            return "flat" === this._$_fileStructure$_ && (t = t.toLowerCase()), 
            this._$_runtime$_._$PostComponentMessageToDOMAsync$_("runtime", "cordova-fetch-local-file", {
                filename: t,
                as: s
            });
        }
        _$CordovaFetchLocalFileAsText$_(t) {
            return this._$_CordovaFetchLocalFileAs$_(t, "text");
        }
        async _$CordovaFetchLocalFileAsBlob$_(t) {
            const s = await this._$_CordovaFetchLocalFileAs$_(t, "buffer"), i = e(t);
            return new Blob([ s ], {
                type: i
            });
        }
        async _$CordovaFetchLocalFileAsBlobURL$_(t) {
            "flat" === this._$_fileStructure$_ && (t = t.toLowerCase());
            let s = this._$_cordovaBlobUrlCache$_.get(t);
            if (!s) {
                const i = await this._$CordovaFetchLocalFileAsBlob$_(t);
                s = URL.createObjectURL(i), this._$_cordovaBlobUrlCache$_.set(t, s);
            }
            return s;
        }
        _$CordovaFetchLocalFileAsArrayBuffer$_(t) {
            return this._$_CordovaFetchLocalFileAs$_(t, "buffer");
        }
        _$GetMediaFileUrl$_(t) {
            "flat" === this._$_fileStructure$_ && (t = t.toLowerCase());
            let s = this._$_mediaSubfolder$_ + t;
            return "Gecko" === g._$Platform$_._$BrowserEngine$_ && "preview" === this._$_runtime$_._$GetExportType$_() ? this._$_GetLocalBlobURLFromFileMap$_(s) : s;
        }
        _$GetProjectFileUrl$_(t) {
            return g._$IsAbsoluteURL$_(t) ? Promise.resolve(t) : this._$_isCordova$_ && this._$_isFileProtocol$_ ? this._$CordovaFetchLocalFileAsBlobURL$_(t) : "playable-ad-single-file" === this._$_runtime$_._$GetExportType$_() ? URL.createObjectURL(self.c3_runtimeInterface._PlayableAdFetchBlob(t)) : ("flat" === this._$_fileStructure$_ && (t = t.toLowerCase()), 
            Promise.resolve(t));
        }
        _$GetProjectFileIframeUrl$_(s) {
            if (g._$IsAbsoluteURL$_(s) || "preview" !== this._$_runtime$_._$GetExportType$_() || !this._$_swClientId$_ || !s) return s;
            try {
                const t = new URL(s, location.href);
                return t.searchParams.set("__c3_client_id", this._$_swClientId$_), 
                t.toString();
            } catch (t) {
                return console.warn("Invalid iframe URL: " + s), s;
            }
        }
        _$LoadProjectFileUrl$_(t) {
            return this._$GetProjectFileUrl$_(t);
        }
        _$LoadImage$_(t) {
            if (t._$loadPolicy$_ && !Mn.has(t._$loadPolicy$_)) throw new Error("invalid load policy");
            let s = this._$_assetsByUrl$_.get(t.url);
            return s || (s = g._$New$_(g._$ImageAsset$_, this, {
                url: t.url,
                size: t.size || 0,
                _$loadPolicy$_: t._$loadPolicy$_ || this._$_defaultLoadPolicy$_
            }), this._$_assetsByUrl$_.set(s._$GetURL$_(), s), this._$_hasFinishedInitialLoad$_) || (this._$_totalAssetSizeToLoad$_ += s._$GetSize$_(), 
            this._$_loadPromises$_.push(s._$Load$_().then(() => this._$_AddLoadedSize$_(s._$GetSize$_())))), 
            s;
        }
        _$_ReleaseAsset$_(t) {
            this._$_assetsByUrl$_.delete(t._$GetURL$_());
        }
        async _$WaitForAllToLoad$_() {
            try {
                await Promise.all(this._$_loadPromises$_), this._$_lastLoadProgress$_ = 1;
            } catch (t) {
                console.error("Error loading: ", t), this._$_hasHadErrorLoading$_ = !0, 
                this._$_FireLoadingProgressEvent$_();
            }
        }
        _$SetInitialLoadFinished$_() {
            this._$_hasFinishedInitialLoad$_ = !0;
        }
        _$HasHadErrorLoading$_() {
            return this._$_hasHadErrorLoading$_;
        }
        _$_AddLoadedSize$_(t) {
            this._$_assetSizeLoaded$_ += t, this._$_loadingRateLimiter$_._$Call$_();
        }
        _$_FireLoadingProgressEvent$_() {
            const t = g._$New$_(g.Event, "loadingprogress");
            this._$_lastLoadProgress$_ = g._$clamp$_(this._$_assetSizeLoaded$_ / this._$_totalAssetSizeToLoad$_, 0, 1), 
            t.progress = this._$_lastLoadProgress$_, this._$_runtime$_._$Dispatcher$_().dispatchEvent(t);
        }
        _$GetLoadProgress$_() {
            return this._$_lastLoadProgress$_;
        }
        _$GetImageLoadProgress$_() {
            return this._$_runtime$_._$GetSystemPlugin$_()._$GetImageLoadingProgress$_();
        }
        _$_SetWebFonts$_(t) {
            g._$shallowAssignArray$_(this._$_webFonts$_, t), this._$_webFonts$_.length && this._$_loadPromises$_.push(this._$_LoadWebFonts$_());
        }
        async _$_LoadWebFonts$_() {
            const t = [], s = [];
            for (const [ i, e, n ] of this._$_webFonts$_) this._$_totalAssetSizeToLoad$_ += n, 
            t.push(this._$_LoadWebFont$_(i, e, s).then(() => this._$_AddLoadedSize$_(n)));
            await Promise.all(t), this._$_runtime$_._$IsInWorker$_() && 0 < s.length && await this._$_runtime$_._$PostComponentMessageToDOMAsync$_("runtime", "load-webfonts", {
                webfonts: s
            });
        }
        async _$_LoadWebFont$_(s, i, e) {
            try {
                let t = await this._$GetProjectFileUrl$_(i);
                "Gecko" === g._$Platform$_._$BrowserEngine$_ && (s = `'${s}'`), 
                ("Gecko" === g._$Platform$_._$BrowserEngine$_ && "preview" === this._$_runtime$_._$GetExportType$_() || "playable-ad-single-file" === this._$_runtime$_._$GetExportType$_()) && (t = this._$_GetLocalBlobURLFromFileMap$_(t));
                const n = new FontFace(s, `url('${t}')`);
                (this._$_runtime$_._$IsInWorker$_() ? self : document).fonts.add(n), 
                await n.load(), this._$_runtime$_._$IsInWorker$_() && e.push({
                    name: s,
                    url: t
                });
            } catch (t) {
                console.warn(`[C3 runtime] Failed to load web font '${s}': `, t);
            }
        }
        _$IsAudioFormatSupported$_(t) {
            return !!this._$_supportedAudioFormats$_[t];
        }
        _$_SetAudioFiles$_(t, s) {
            this._$_preloadSounds$_ = !!s;
            for (const [ i, e, n ] of t) this._$_audioFiles$_.set(i, {
                fileName: i,
                _$formats$_: e.map(t => ({
                    type: t[0],
                    _$fileExtension$_: t[1],
                    _$fullName$_: i + t[1],
                    fileSize: t[2]
                })),
                isMusic: n
            });
        }
        _$GetPreferredAudioFile$_(t) {
            "flat" === this._$_fileStructure$_ && (t = t.toLowerCase());
            const s = this._$_audioFiles$_.get(t);
            if (!s) return null;
            let i = null;
            for (const e of s._$formats$_) if (i || "audio/webm; codecs=opus" !== e.type || (i = e), 
            this._$IsAudioFormatSupported$_(e.type)) return e;
            return i;
        }
        _$GetProjectAudioFileUrl$_(t) {
            const s = this._$GetPreferredAudioFile$_(t);
            return s ? {
                url: this._$GetMediaFileUrl$_(s._$fullName$_),
                type: s.type
            } : null;
        }
        _$GetAudioToPreload$_() {
            if (this._$_preloadSounds$_) {
                const t = [];
                for (const s of this._$_audioFiles$_.values()) if (!s.isMusic) {
                    const i = this._$GetPreferredAudioFile$_(s.fileName);
                    i && t.push({
                        originalUrl: s.fileName,
                        url: this._$GetMediaFileUrl$_(i._$fullName$_),
                        type: i.type,
                        fileSize: i.fileSize
                    });
                }
                return t;
            }
            return [];
        }
        _$_GetLocalBlobFromFileMap$_(t) {
            return "preview" === this._$_runtime$_._$GetExportType$_() && (t = new URL(t, location.href).toString()), 
            this._$_fileMap$_.get(t) || null;
        }
        _$_GetLocalBlobURLFromFileMap$_(t) {
            let s = this._$_fileMapBlobUrls$_.get(t);
            if (!s) {
                const i = this._$_GetLocalBlobFromFileMap$_(t);
                if (!i) return t;
                s = URL.createObjectURL(i), this._$_fileMapBlobUrls$_.set(t, s);
            }
            return s;
        }
        _$GetIAssetManager$_() {
            return this._$_iAssetManager$_;
        }
        async _$LoadScripts$_(...t) {
            const s = await Promise.all(t.map(t => this._$GetProjectFileUrl$_(t)));
            if (this._$_runtime$_._$IsInWorker$_()) if (1 === t.length) {
                const i = t[0];
                await import((g._$IsRelativeURL$_(i) ? "./" : "") + i);
            } else {
                const e = t.map(t => `import "${g._$IsRelativeURL$_(t) ? "./" : ""}${t}";`).join("\n"), n = URL.createObjectURL(new Blob([ e ], {
                    type: "application/javascript"
                }));
                await import(n);
            } else await Promise.all(s.map(t => h(t)));
        }
        async _$CompileWebAssembly$_(t) {
            if (WebAssembly.compileStreaming) {
                const s = await this._$GetProjectFileUrl$_(t);
                return WebAssembly.compileStreaming(fetch(s));
            }
            {
                const i = await g._$FetchArrayBuffer$_(t);
                return WebAssembly.compile(i);
            }
        }
        async _$LoadStyleSheet$_(t) {
            const s = await this._$GetProjectFileUrl$_(t);
            return this._$_runtime$_._$PostComponentMessageToDOMAsync$_("runtime", "add-stylesheet", {
                url: s
            });
        }
    };
}

{
    const xn = self._$C3$_;
    xn._$Asset$_ = class extends xn._$DefendedBase$_ {
        constructor(t, s) {
            super(), this._$_assetManager$_ = t, this._$_runtime$_ = t._$GetRuntime$_(), 
            this._$_url$_ = s.url || "", this._$_size$_ = s.size, this._$_loadPolicy$_ = s._$loadPolicy$_, 
            this._$_blob$_ = s.blob || null, this._$_isLoaded$_ = !!this._$_blob$_, 
            this._$_loadPromise$_ = null;
        }
        _$Release$_() {
            this._$_loadPromise$_ = null, this._$_assetManager$_ = null, this._$_runtime$_ = null, 
            this._$_blob$_ = null;
        }
        _$GetURL$_() {
            return this._$_url$_;
        }
        _$GetSize$_() {
            return this._$_size$_;
        }
        _$Load$_() {
            return "local" === this._$_loadPolicy$_ || this._$_blob$_ ? (this._$_isLoaded$_ = !0, 
            Promise.resolve()) : (this._$_loadPromise$_ || (this._$_loadPromise$_ = this._$_assetManager$_._$FetchBlob$_(this._$_url$_, this._$_loadPolicy$_).then(t => (this._$_isLoaded$_ = !0, 
            this._$_loadPromise$_ = null, this._$_blob$_ = t)).catch(t => {
                console.error("Error loading resource: ", t), this._$_loadPromise$_ = null;
            })), this._$_loadPromise$_);
        }
        _$IsLoaded$_() {
            return this._$_isLoaded$_;
        }
        _$GetBlob$_() {
            return this._$_blob$_ ? Promise.resolve(this._$_blob$_) : this._$_loadPromise$_ || this._$_assetManager$_._$FetchBlob$_(this._$_url$_, this._$_loadPolicy$_);
        }
    };
}

{
    const Sn = self._$C3$_, lh = new Sn._$PromiseThrottle$_(), uh = new Set();
    Sn._$ImageAsset$_ = class extends Sn._$Asset$_ {
        constructor(t, s) {
            super(t, s), this._$_texturePromise$_ = null, this._$_webglTexture$_ = null, 
            this._$_refCount$_ = 0, this._$_imageWidth$_ = -1, this._$_imageHeight$_ = -1, 
            uh.add(this);
        }
        _$Release$_() {
            if (0 !== this._$_refCount$_) throw new Error("released image asset which still has texture references");
            this._$_assetManager$_._$_ReleaseAsset$_(this), this._$_texturePromise$_ = null, 
            uh.delete(this), super._$Release$_();
        }
        static _$OnRendererContextLost$_() {
            for (const t of uh) t._$_texturePromise$_ = null, t._$_webglTexture$_ = null, 
            t._$_refCount$_ = 0;
        }
        _$LoadStaticTexture$_(t, s) {
            return s = s || {}, this._$_refCount$_++, this._$_webglTexture$_ ? Promise.resolve(this._$_webglTexture$_) : (this._$_texturePromise$_ || (s._$anisotropy$_ = this._$_runtime$_._$GetCanvasManager$_()._$GetTextureAnisotropy$_(), 
            this._$_texturePromise$_ = this._$_DoLoadStaticTexture$_(t, s)), this._$_texturePromise$_);
        }
        async _$_DoLoadStaticTexture$_(s, i) {
            try {
                const e = await this._$GetBlob$_();
                return 0 === this._$_refCount$_ ? this._$_texturePromise$_ = null : await lh._$Add$_(async () => {
                    const t = await s._$CreateStaticTextureAsync$_(e, i);
                    return this._$_texturePromise$_ = null, 0 === this._$_refCount$_ ? (s._$DeleteTexture$_(t), 
                    null) : (this._$_webglTexture$_ = t, this._$_imageWidth$_ = t._$GetWidth$_(), 
                    this._$_imageHeight$_ = t._$GetHeight$_(), this._$_webglTexture$_);
                });
            } catch (t) {
                throw console.error("Failed to load texture: ", t), t;
            }
        }
        _$ReleaseTexture$_() {
            if (this._$_refCount$_ <= 0) throw new Error("texture released too many times");
            if (this._$_refCount$_--, 0 === this._$_refCount$_ && this._$_webglTexture$_) {
                const t = this._$_webglTexture$_._$GetRenderer$_();
                t._$DeleteTexture$_(this._$_webglTexture$_), this._$_webglTexture$_ = null;
            }
        }
        _$GetRefCount$_() {
            return this._$_refCount$_;
        }
        _$GetTexture$_() {
            return this._$_webglTexture$_;
        }
        _$GetWidth$_() {
            return this._$_imageWidth$_;
        }
        _$GetHeight$_() {
            return this._$_imageHeight$_;
        }
        async _$LoadToDrawable$_() {
            const t = await this._$GetBlob$_();
            return Sn._$Supports$_.ImageBitmap ? createImageBitmap(t) : Sn._$BlobToImage$_(t);
        }
    };
}

{
    let t = function(t, s) {
        return t._$GetWorldInfo$_()._$_GetLastCachedZIndex$_() - s._$GetWorldInfo$_()._$_GetLastCachedZIndex$_();
    };
    t;
    const ch = self._$C3$_;
    ch._$RenderCell$_ = class extends ch._$DefendedBase$_ {
        constructor(t, s, i) {
            super(), this._$_grid$_ = t, this._$_x$_ = s, this._$_y$_ = i, this._$_instances$_ = [], 
            this._$_isSorted$_ = !0, this._$_pendingRemoval$_ = new Set(), this._$_isAnyPendingRemoval$_ = !1;
        }
        _$Release$_() {
            ch._$clearArray$_(this._$_instances$_), this._$_pendingRemoval$_.clear(), 
            this._$_grid$_ = null;
        }
        _$Reset$_() {
            ch._$clearArray$_(this._$_instances$_), this._$_isSorted$_ = !0, this._$_pendingRemoval$_.clear(), 
            this._$_isAnyPendingRemoval$_ = !1;
        }
        _$SetChanged$_() {
            this._$_isSorted$_ = !1;
        }
        _$IsEmpty$_() {
            if (this._$_instances$_.length) {
                if (this._$_instances$_.length > this._$_pendingRemoval$_.size) return !1;
                this._$_FlushPending$_();
            }
            return !0;
        }
        _$Insert$_(t) {
            this._$_pendingRemoval$_.has(t) ? (this._$_pendingRemoval$_.delete(t), 
            0 === this._$_pendingRemoval$_.size && (this._$_isAnyPendingRemoval$_ = !1)) : (this._$_instances$_.push(t), 
            this._$_isSorted$_ = 1 === this._$_instances$_.length);
        }
        _$Remove$_(t) {
            this._$_pendingRemoval$_.add(t), this._$_isAnyPendingRemoval$_ = !0, 
            50 <= this._$_pendingRemoval$_.size && this._$_FlushPending$_();
        }
        _$_FlushPending$_() {
            this._$_isAnyPendingRemoval$_ && (this._$_instances$_.length === this._$_pendingRemoval$_.size ? this._$Reset$_() : (ch._$arrayRemoveAllInSet$_(this._$_instances$_, this._$_pendingRemoval$_), 
            this._$_pendingRemoval$_.clear(), this._$_isAnyPendingRemoval$_ = !1));
        }
        _$_EnsureSorted$_() {
            this._$_isSorted$_ || (this._$_instances$_.sort(t), this._$_isSorted$_ = !0);
        }
        _$Dump$_(t) {
            this._$_FlushPending$_(), this._$_EnsureSorted$_(), this._$_instances$_.length && t.push(this._$_instances$_);
        }
    };
}

{
    const fh = self._$C3$_;
    fh._$RenderGrid$_ = class extends fh._$DefendedBase$_ {
        constructor(t, s) {
            super(), this._$_cellWidth$_ = t, this._$_cellHeight$_ = s, this._$_cells$_ = fh._$New$_(fh._$PairMap$_);
        }
        _$Release$_() {
            this._$_cells$_._$Release$_(), this._$_cells$_ = null;
        }
        _$GetCell$_(t, s, i) {
            let e = this._$_cells$_._$Get$_(t, s);
            return e || (i ? (e = fh._$New$_(fh._$RenderCell$_, this, t, s), this._$_cells$_.Set(t, s, e), 
            e) : null);
        }
        _$XToCell$_(t) {
            return Math.floor(t / this._$_cellWidth$_);
        }
        _$YToCell$_(t) {
            return Math.floor(t / this._$_cellHeight$_);
        }
        _$Update$_(e, n, h) {
            if (n) for (let i = n._$getLeft$_(), t = n._$getRight$_(); i <= t; ++i) for (let t = n._$getTop$_(), s = n._$getBottom$_(); t <= s; ++t) if (!h || !h._$containsPoint$_(i, t)) {
                const r = this._$GetCell$_(i, t, !1);
                r && (r._$Remove$_(e), r._$IsEmpty$_()) && this._$_cells$_._$Delete$_(i, t);
            }
            if (h) for (let i = h._$getLeft$_(), t = h._$getRight$_(); i <= t; ++i) for (let t = h._$getTop$_(), s = h._$getBottom$_(); t <= s; ++t) n && n._$containsPoint$_(i, t) || this._$GetCell$_(i, t, !0)._$Insert$_(e);
        }
        _$QueryRange$_(t, s) {
            let i = this._$XToCell$_(t._$getLeft$_()), e = this._$YToCell$_(t._$getTop$_()), n = this._$XToCell$_(t._$getRight$_()), h = this._$YToCell$_(t._$getBottom$_());
            for (;i <= n; ++i) for (let t = e; t <= h; ++t) {
                const r = this._$GetCell$_(i, t, !1);
                r && r._$Dump$_(s);
            }
        }
        _$MarkRangeChanged$_(t) {
            let s = t._$getLeft$_(), i = t._$getTop$_(), e = t._$getRight$_(), n = t._$getBottom$_();
            for (;s <= e; ++s) for (let t = i; t <= n; ++t) {
                const h = this._$GetCell$_(s, t, !1);
                h && h._$SetChanged$_();
            }
        }
    };
}

{
    let r = function(t, s) {
        return t._$GetWorldInfo$_()._$_GetLastCachedZIndex$_() - s._$GetWorldInfo$_()._$_GetLastCachedZIndex$_();
    }, t = function(t, s) {
        return t._$GetWorldInfo$_()._$GetZElevation$_() - s._$GetWorldInfo$_()._$GetZElevation$_();
    };
    r, t;
    const w = self._$C3$_, dh = new w.Rect(), ph = new w._$Quad$_(), mh = [], gh = (new w.Rect(), 
    new w.Rect(), self._$glMatrix$_), Cn = gh._$vec3$_, Wn = gh._$vec4$_, vn = gh._$mat4$_, yh = vn.create(), Mh = Cn.create(), wh = Wn.create(), xh = Cn.create(), Sh = Cn.create(), Th = Cn.create(), bh = w._$New$_(w._$Vector2$_), vh = (w._$New$_(w.Rect), 
    []), Ch = [], Gh = [], Ih = {
        name: "",
        sid: -1,
        _$isDynamic$_: !1,
        isVisible: !0,
        isInteractive: !0,
        _$isHTMLElementsLayer$_: !1,
        backgroundColor: [ 1, 1, 1, 1 ],
        _$isTransparent$_: !0,
        _$parallax$_: [ 1, 1 ],
        opacity: 1,
        _$isForceOwnTexture$_: !1,
        _$renderAs3d$_: !1,
        _$useCameraDistanceDrawOrder$_: !1,
        _$useRenderCells$_: !1,
        scaleRate: 1,
        _$blendMode$_: 0,
        _$zElevation$_: 0,
        _$initialInstancesData$_: [],
        _$effectListData$_: [],
        _$subLayersData$_: []
    };
    w._$Layer$_ = class extends w._$DefendedBase$_ {
        constructor(t, s, i) {
            super(), i = Object.assign({}, Ih, i), this._$_layout$_ = t, this._$_runtime$_ = t._$GetRuntime$_(), 
            this._$_parentLayer$_ = s, this._$_name$_ = i.name, this._$_index$_ = -1, 
            this._$_isHTMLElementsLayer$_ = !!i._$isHTMLElementsLayer$_, this._$_htmlIndex$_ = -1, 
            this._$_sid$_ = i.sid, this._$_isDynamic$_ = !!i._$isDynamic$_, this._$_isVisible$_ = !!i.isVisible, 
            this._$_isInteractive$_ = !!i.isInteractive, this._$_backgroundColor$_ = w._$New$_(w._$Color$_), 
            this._$_backgroundColor$_._$setFromJSON$_(i.backgroundColor), this._$_isTransparent$_ = !!i._$isTransparent$_, 
            this._$_parallaxX$_ = i._$parallax$_[0], this._$_parallaxY$_ = i._$parallax$_[1], 
            this._$_color$_ = w._$New$_(w._$Color$_, 1, 1, 1, i.opacity), this._$_premultipliedColor$_ = w._$New$_(w._$Color$_), 
            this._$_isForceOwnTexture$_ = !!i._$isForceOwnTexture$_, this._$_renderAs3d$_ = !!i._$renderAs3d$_, 
            this._$_useCameraDistanceDrawOrder$_ = !!i._$useCameraDistanceDrawOrder$_, 
            this._$_useRenderCells$_ = !!i._$useRenderCells$_, this._$_scaleRate$_ = i.scaleRate, 
            this._$_blendMode$_ = i._$blendMode$_, this._$_curRenderTarget$_ = null, 
            this._$_scale$_ = 1, this._$_zElevation$_ = i._$zElevation$_, this._$_angle$_ = 0, 
            this._$_scrollX$_ = 0, this._$_scrollY$_ = 0, this._$_hasOwnScrollPosition$_ = !1, 
            this._$_viewport$_ = w._$New$_(w.Rect), this._$_viewportZ0$_ = w._$New$_(w.Rect), 
            this._$_viewport3D$_ = w._$New$_(w.Rect), this._$_isViewportChanged$_ = !0, 
            this._$_projectionMatrix$_ = vn.create(), this._$_isProjectionMatrixChanged$_ = !0, 
            this._$_modelViewMatrix$_ = vn.create(), this._$_isMVMatrixChanged$_ = !0, 
            this._$_viewFrustum$_ = w._$New$_(w._$Gfx$_._$ViewFrustum$_), this._$_isViewFrustumChanged$_ = !0, 
            this._$_startupInitialInstances$_ = [], this._$_initialInstancesData$_ = i._$initialInstancesData$_, 
            this._$_initialInstances$_ = [], this._$_createdGlobalUids$_ = [], this._$_initialUIDsToInstanceData$_ = new Map(), 
            this._$_instances$_ = [], this._$_zIndicesUpToDate$_ = !1, this._$_htmlZIndicesUpToDate$_ = !1, 
            this._$_anyInstanceZElevated$_ = !1;
            const n = this._$_runtime$_._$GetCanvasManager$_();
            this._$_effectList$_ = w._$New$_(w._$EffectList$_, this, i._$effectListData$_), 
            this._$_effectChain$_ = w._$New$_(w._$Gfx$_._$EffectChain$_, n._$GetEffectChainManager$_(), {
                _$drawContent$_: (t, s) => {
                    const i = s._$GetContentObject$_(), e = i._$GetRenderTarget$_();
                    t._$SetColor$_(i._$GetPremultipliedColor$_()), t._$DrawRenderTarget$_(e), 
                    t._$InvalidateRenderTarget$_(e), n._$ReleaseAdditionalRenderTarget$_(e);
                },
                _$getShaderParameters$_: t => this._$GetEffectList$_()._$_GetEffectChainShaderParametersForIndex$_(t)
            }), this._$_needsRebuildEffectChainSteps$_ = !0, this._$_wasDefaultColor$_ = !0, 
            this._$_renderGrid$_ = null, this._$_lastRenderList$_ = [], this._$_isRenderListUpToDate$_ = !1, 
            this._$_lastRenderCells$_ = w._$New$_(w.Rect, 0, 0, -1, -1), this._$_curRenderCells$_ = w._$New$_(w.Rect, 0, 0, -1, -1), 
            this._$_iLayer$_ = new self._$ILayer$_(this), this._$_UpdatePremultipliedColor$_(), 
            this._$UsesRenderCells$_() && (this._$_renderGrid$_ = w._$New$_(w._$RenderGrid$_, this._$_runtime$_._$GetOriginalViewportWidth$_(), this._$_runtime$_._$GetOriginalViewportHeight$_())), 
            this._$_subLayers$_ = i._$subLayersData$_.map(t => w._$Layer$_._$CreateFromExportData$_(this._$_layout$_, this, t));
        }
        _$_InitInitialInstances$_() {
            for (const t of this._$_initialInstancesData$_) {
                const s = this._$_runtime$_._$GetObjectClassByIndex$_(t[1]);
                this._$_layout$_._$_AddInitialObjectClass$_(s), s._$GetDefaultInstanceData$_() || (s._$SetDefaultInstanceData$_(t), 
                s._$_SetDefaultLayerIndex$_(this._$_index$_)), this._$_initialInstances$_.push(t), 
                this._$_initialUIDsToInstanceData$_.set(t[2], t);
            }
            w._$shallowAssignArray$_(this._$_startupInitialInstances$_, this._$_initialInstances$_), 
            this._$_initialInstancesData$_ = null;
        }
        static _$CreateFromExportData$_(t, s, i) {
            return w._$New$_(w._$Layer$_, t, s, {
                name: i[0],
                sid: i[2],
                isVisible: i[3],
                isInteractive: i[13],
                _$isHTMLElementsLayer$_: i[19],
                backgroundColor: i[4].map(t => t / 255),
                _$isTransparent$_: i[5],
                _$parallax$_: [ i[6], i[7] ],
                opacity: i[8],
                _$isForceOwnTexture$_: i[9],
                _$renderAs3d$_: i[17],
                _$useCameraDistanceDrawOrder$_: i[18],
                _$useRenderCells$_: i[10],
                scaleRate: i[11],
                _$blendMode$_: i[12],
                _$zElevation$_: i[16],
                _$initialInstancesData$_: i[14],
                _$effectListData$_: i[15],
                _$subLayersData$_: i[20]
            });
        }
        _$Release$_() {
            for (const t of this._$_subLayers$_) t._$Release$_();
            w._$clearArray$_(this._$_subLayers$_);
            for (const s of this._$_instances$_) this._$_runtime$_._$DestroyInstance$_(s);
            w._$clearArray$_(this._$_instances$_), this._$_effectList$_._$Release$_(), 
            this._$_effectList$_ = null, this._$_effectChain$_._$Release$_(), this._$_effectChain$_ = null, 
            this._$_iLayer$_ = null, this._$_parentLayer$_ = null, this._$_layout$_ = null, 
            this._$_runtime$_ = null;
        }
        _$GetInitialInstanceData$_(t) {
            return this._$_initialUIDsToInstanceData$_.get(t);
        }
        _$CreateInitialInstances$_(n) {
            let h = this._$_layout$_._$IsFirstVisit$_(), r = 0, o = this._$_initialInstances$_;
            for (let e = 0, t = o.length; e < t; ++e) {
                let t = o[e], s = this._$_runtime$_._$GetObjectClassByIndex$_(t[1]), i = !0;
                if (!s._$HasPersistBehavior$_() || h) {
                    const a = this._$_runtime$_._$CreateInstanceFromData$_(t, this, !0);
                    n.push(a), s._$IsGlobal$_() && (i = !1, this._$_createdGlobalUids$_.push(a._$GetUID$_()));
                }
                i && (o[r] = o[e], ++r);
            }
            w._$truncateArray$_(o, r), this._$_runtime$_._$FlushPendingInstances$_(), 
            this._$SetZIndicesChanged$_();
        }
        _$_AddInstance$_(t, s) {
            if (!t._$GetPlugin$_()._$IsWorldType$_()) throw new Error("instance is not of world type");
            const i = t._$GetWorldInfo$_();
            if (i._$GetLayer$_() !== this) throw new Error("instance added to wrong layer");
            this._$_instances$_.push(t), 0 !== i._$GetZElevation$_() && (this._$_anyInstanceZElevated$_ = !0), 
            s && this._$UsesRenderCells$_() && t._$GetWorldInfo$_()._$SetBboxChanged$_(), 
            this._$SetZIndicesChanged$_(t);
        }
        _$_MaybeAddInstance$_(t) {
            this._$_instances$_.includes(t) || (this._$_instances$_.push(t), 0 !== t._$GetWorldInfo$_()._$GetZElevation$_() && (this._$_anyInstanceZElevated$_ = !0), 
            this._$SetZIndicesChanged$_(t));
        }
        _$_PrependInstance$_(t, s) {
            const i = t._$GetWorldInfo$_();
            if (i._$GetLayer$_() !== this) throw new Error("instance added to wrong layer");
            this._$_instances$_.unshift(t), 0 !== i._$GetZElevation$_() && (this._$_anyInstanceZElevated$_ = !0), 
            this._$SetZIndicesChanged$_(t), s && this._$UsesRenderCells$_() && t._$GetWorldInfo$_()._$SetBboxChanged$_();
        }
        _$_RemoveInstance$_(t, s) {
            const i = this._$_instances$_.indexOf(t);
            i < 0 || (s && this._$UsesRenderCells$_() && t._$GetWorldInfo$_()._$_RemoveFromRenderCells$_(), 
            this._$_instances$_.splice(i, 1), this._$SetZIndicesChanged$_(t), this._$_MaybeResetAnyInstanceZElevatedFlag$_());
        }
        _$_SetAnyInstanceZElevated$_() {
            this._$_anyInstanceZElevated$_ = !0;
        }
        _$_MaybeResetAnyInstanceZElevatedFlag$_() {
            0 === this._$_instances$_.length && (this._$_anyInstanceZElevated$_ = !1);
        }
        _$_SortInstancesByLastCachedZIndex$_(t) {
            if (t) {
                const s = new Set();
                for (const i of this._$_instances$_) {
                    const e = i._$GetWorldInfo$_()._$_GetLastCachedZIndex$_();
                    0 <= e && s.add(e);
                }
                let t = -1;
                for (const n of this._$_instances$_) {
                    const h = n._$GetWorldInfo$_();
                    if (!(0 <= h._$_GetLastCachedZIndex$_())) {
                        for (++t; s.has(t); ) ++t;
                        h._$_SetZIndex$_(t);
                    }
                }
            }
            this._$_instances$_.sort(r);
        }
        _$_Start$_() {}
        _$_End$_() {
            for (const t of this._$_instances$_) t._$GetObjectClass$_()._$IsGlobal$_() || this._$_runtime$_._$DestroyInstance$_(t);
            this._$_runtime$_._$FlushPendingInstances$_(), w._$clearArray$_(this._$_instances$_), 
            this._$_anyInstanceZElevated$_ = !1, this._$SetZIndicesChanged$_();
        }
        _$RecreateInitialObjects$_(s, t, i, e, n, h) {
            const r = this._$_runtime$_._$GetEventSheetManager$_(), o = this._$_runtime$_._$GetAllObjectClasses$_(), a = s._$IsFamily$_(), l = [];
            for (const u of this._$_initialInstances$_) {
                const c = u[0], f = c[0], d = c[1];
                if (t._$containsPoint$_(f, d)) {
                    const p = o[u[1]];
                    if (p !== s) {
                        if (!a) continue;
                        if (!s._$FamilyHasMember$_(p)) continue;
                    }
                    let t = n;
                    if (!t) {
                        const y = this._$_runtime$_._$GetCurrentLayout$_();
                        t = this._$GetLayout$_() === y ? this : (t = y._$GetLayerByName$_(this._$GetName$_())) || y._$GetLayerByIndex$_(this._$GetIndex$_());
                    }
                    const m = this._$_runtime$_._$CreateInstanceFromData$_(u, t, !1, void 0, void 0, !1, h), g = (t._$SortAndAddInstancesByZIndex$_(m), 
                    m._$GetWorldInfo$_());
                    g._$OffsetXY$_(i, e), g._$SetBboxChanged$_(), r._$BlockFlushingInstances$_(!0), 
                    m._$_TriggerOnCreatedOnSelfAndRelated$_(), r._$BlockFlushingInstances$_(!1), 
                    l.push(m);
                }
            }
            return l;
        }
        _$GetInstanceCount$_() {
            return this._$_instances$_.length;
        }
        _$GetLayout$_() {
            return this._$_layout$_;
        }
        _$GetName$_() {
            return this._$_name$_;
        }
        _$_SetIndex$_(t) {
            this._$_index$_ = t;
        }
        _$GetIndex$_() {
            return this._$_index$_;
        }
        _$_SetHTMLIndex$_(t) {
            this._$_htmlIndex$_ = t;
        }
        _$GetHTMLIndex$_() {
            return this._$_htmlIndex$_;
        }
        _$IsHTMLElementsLayer$_() {
            return this._$_isHTMLElementsLayer$_;
        }
        _$SetIsHTMLElementsLayer$_(t) {
            this._$_isHTMLElementsLayer$_ !== (t = !!t) && (this._$_isHTMLElementsLayer$_ = t, 
            this._$_layout$_._$_ReindexAndUpdateAllLayers$_(), this._$_runtime$_._$UpdateRender$_());
        }
        _$_GetSiblingIndex$_() {
            let t = this._$GetParentLayer$_();
            return (t ? t._$GetSubLayers$_() : this._$GetLayout$_()._$_GetRootLayers$_()).indexOf(this);
        }
        _$GetSID$_() {
            return this._$_sid$_;
        }
        _$GetRuntime$_() {
            return this._$_runtime$_;
        }
        _$IsDynamic$_() {
            return this._$_isDynamic$_;
        }
        _$HasAnyDynamicParentLayer$_() {
            for (const t of this._$parentLayers$_()) if (t._$IsDynamic$_()) return !0;
            return !1;
        }
        _$GetDevicePixelRatio$_() {
            return this._$_runtime$_._$GetDevicePixelRatio$_();
        }
        _$GetEffectList$_() {
            return this._$_effectList$_;
        }
        _$GetEffectChain$_() {
            return this._$_MaybeRebuildEffectChainSteps$_(), this._$_effectChain$_;
        }
        _$_MaybeRebuildEffectChainSteps$_() {
            const t = this._$HasDefaultColor$_();
            if (this._$_needsRebuildEffectChainSteps$_ || t !== this._$_wasDefaultColor$_ || this._$_effectChain$_._$NeedsRebuild$_()) {
                const s = this._$GetEffectList$_()._$GetActiveEffectTypes$_();
                this._$_effectChain$_._$BuildSteps$_(s.map(t => t._$GetShaderProgram$_()), {
                    _$indexMap$_: s.map(t => t._$GetIndex$_()),
                    _$forcePreDraw$_: !t,
                    _$useFullSurface$_: !0
                }), this._$_needsRebuildEffectChainSteps$_ = !1, this._$_wasDefaultColor$_ = t;
            }
        }
        _$UpdateActiveEffects$_() {
            this._$GetEffectList$_()._$UpdateActiveEffects$_(), this._$_needsRebuildEffectChainSteps$_ = !0;
        }
        _$UsesRenderCells$_() {
            return this._$_useRenderCells$_ && !this._$_useCameraDistanceDrawOrder$_;
        }
        _$GetRenderGrid$_() {
            return this._$_renderGrid$_;
        }
        _$SetRenderListStale$_() {
            this._$_isRenderListUpToDate$_ = !1;
        }
        _$IsVisible$_() {
            for (const t of this._$selfAndParentLayers$_()) if (!t._$_IsVisibleFlagSet$_()) return !1;
            return !0;
        }
        _$_IsVisibleFlagSet$_() {
            return this._$_isVisible$_;
        }
        _$SetVisible$_(t) {
            this._$_isVisible$_ !== (t = !!t) && (this._$_isVisible$_ = t, this._$_runtime$_._$UpdateRender$_());
        }
        _$SetInteractive$_(t) {
            this._$_isInteractive$_ = !!t;
        }
        _$IsInteractive$_() {
            return this._$_isInteractive$_;
        }
        _$IsSelfAndParentsInteractive$_() {
            for (const t of this._$selfAndParentLayers$_()) if (!t._$IsInteractive$_()) return !1;
            return !0;
        }
        _$SetOwnScrollPositionEnabled$_(t) {
            if (this._$_hasOwnScrollPosition$_ !== (t = !!t)) {
                if (this._$_hasOwnScrollPosition$_ = t) {
                    const s = this._$GetLayout$_();
                    this._$_scrollX$_ = s._$GetScrollX$_(), this._$_scrollY$_ = s._$GetScrollY$_();
                }
                this._$_SetMVMatrixChanged$_(), this._$_runtime$_._$UpdateRender$_();
            }
        }
        _$IsOwnScrollPositionEnabled$_() {
            return this._$_hasOwnScrollPosition$_;
        }
        _$SetScrollX$_(t) {
            const s = this._$GetLayout$_(), i = s._$GetScrollLeftBound$_(), e = s._$GetScrollRightBound$_();
            this._$_scrollX$_ !== (t = (t = e < t ? e : t) < i ? i : t) && (this._$_scrollX$_ = t, 
            this._$IsOwnScrollPositionEnabled$_()) && (this._$_SetMVMatrixChanged$_(), 
            this._$_runtime$_._$UpdateRender$_());
        }
        _$SetScrollY$_(t) {
            const s = this._$GetLayout$_(), i = s._$GetScrollTopBound$_(), e = s._$GetScrollBottomBound$_();
            this._$_scrollY$_ !== (t = (t = e < t ? e : t) < i ? i : t) && (this._$_scrollY$_ = t, 
            this._$IsOwnScrollPositionEnabled$_()) && (this._$_SetMVMatrixChanged$_(), 
            this._$_runtime$_._$UpdateRender$_());
        }
        _$GetScrollX$_() {
            return this._$IsOwnScrollPositionEnabled$_() ? this._$_scrollX$_ : this._$GetLayout$_()._$GetScrollX$_();
        }
        _$GetScrollY$_() {
            return this._$IsOwnScrollPositionEnabled$_() ? this._$_scrollY$_ : this._$GetLayout$_()._$GetScrollY$_();
        }
        _$GetViewport$_() {
            return this._$_MaybeUpdateViewport$_(), this._$_viewport$_;
        }
        _$_GetViewportZ0$_() {
            return this._$_MaybeUpdateViewport$_(), this._$_viewportZ0$_;
        }
        _$GetViewport3D$_() {
            return this._$_MaybeUpdateViewport$_(), this._$_viewport3D$_;
        }
        _$_GetVanishingPoint$_() {
            const t = this._$GetLayout$_();
            return [ t._$GetVanishingPointX$_(), t._$GetVanishingPointY$_() ];
        }
        _$GetDefaultCameraZ$_(t) {
            return this._$_runtime$_._$GetDefaultCameraZ$_(t);
        }
        _$GetViewportForZ$_(c, e) {
            const n = this._$_GetViewportZ0$_();
            if (0 === c) e._$copy$_(n); else {
                let o = n._$midX$_(), a = n._$midY$_(), t = this._$Get2DScaleFactorToZ$_(c), s = n.width() / t, i = n.height() / t, [ l, u ] = this._$_GetVanishingPoint$_();
                if (.5 !== l || .5 !== u) {
                    let t = this._$Get2DCameraZ$_(), s = this._$_runtime$_, i = this._$GetDefaultCameraZ$_() / t, e = (l - .5) * s._$GetViewportWidth$_() / i, n = (u - .5) * s._$GetViewportHeight$_() / i, h = this._$GetAngle$_(), r = (0 !== h && (bh.set(e, n), 
                    bh.rotate(h), e = bh._$getX$_(), n = bh._$getY$_()), w._$unlerp$_(t, 0, c));
                    o += w._$lerp$_(e, 0, r), a += w._$lerp$_(n, 0, r);
                }
                e.set(o - s / 2, a - i / 2, o + s / 2, a + i / 2);
            }
        }
        _$GetOpacity$_() {
            return this._$_color$_._$getA$_();
        }
        _$SetOpacity$_(t) {
            t = w._$clamp$_(t, 0, 1), this._$_color$_._$getA$_() !== t && (this._$_color$_._$setA$_(t), 
            this._$_UpdatePremultipliedColor$_(), this._$_runtime$_._$UpdateRender$_());
        }
        _$_UpdatePremultipliedColor$_() {
            this._$_premultipliedColor$_._$copy$_(this._$_color$_), this._$_premultipliedColor$_._$premultiply$_();
        }
        _$GetPremultipliedColor$_() {
            return this._$_premultipliedColor$_;
        }
        _$HasDefaultColor$_() {
            return this._$_color$_._$equalsRgba$_(1, 1, 1, 1);
        }
        _$GetScaleRate$_() {
            return this._$_scaleRate$_;
        }
        _$SetScaleRate$_(t) {
            this._$_scaleRate$_ !== t && (this._$_scaleRate$_ = t, this._$_SetMVMatrixChanged$_(), 
            this._$_runtime$_._$UpdateRender$_());
        }
        _$GetParallaxX$_() {
            return this._$_parallaxX$_;
        }
        _$GetParallaxY$_() {
            return this._$_parallaxY$_;
        }
        _$SetParallax$_(t, s) {
            this._$_parallaxX$_ === t && this._$_parallaxY$_ === s || (this._$_parallaxX$_ = t, 
            this._$_parallaxY$_ = s, this._$_SetMVMatrixChanged$_(), this._$_runtime$_._$UpdateRender$_());
        }
        _$SetParallaxX$_(t) {
            this._$SetParallax$_(t, this._$GetParallaxY$_());
        }
        _$SetParallaxY$_(t) {
            this._$SetParallax$_(this._$GetParallaxX$_(), t);
        }
        _$SetZElevation$_(t) {
            this._$_zElevation$_ !== t && (this._$_zElevation$_ = t, this._$_runtime$_._$UpdateRender$_());
        }
        _$GetZElevation$_() {
            return this._$_zElevation$_;
        }
        _$SetAngle$_(t) {
            t = w._$clampAngle$_(t), this._$_angle$_ !== t && (this._$_angle$_ = t, 
            this._$_SetMVMatrixChanged$_(), this._$_runtime$_._$UpdateRender$_());
        }
        _$GetAngle$_() {
            return w._$clampAngle$_(this._$_layout$_._$GetAngle$_() + this._$_angle$_);
        }
        _$GetOwnAngle$_() {
            return this._$_angle$_;
        }
        _$HasInstances$_() {
            return 0 < this._$_instances$_.length;
        }
        _$_GetInstances$_() {
            return this._$_instances$_;
        }
        _$_GetInstancesInDrawOrder$_() {
            return this._$RendersIn3DMode$_() && this._$_useCameraDistanceDrawOrder$_ ? (w._$shallowAssignArray$_(Gh, this._$_GetInstances$_()), 
            Gh.sort((t, s) => this._$_SortInstancesByCameraDistance$_(t, s)), Gh) : this._$_GetInstances$_();
        }
        _$_AppendAllInstancesIncludingSubLayersInDrawOrder$_(t) {
            w._$appendArray$_(t, this._$_GetInstancesInDrawOrder$_());
            for (const s of this._$_subLayers$_) s._$IsVisible$_() && 0 < s._$GetOpacity$_() && s._$_AppendAllInstancesIncludingSubLayersInDrawOrder$_(t);
        }
        _$_SortInstancesByCameraDistance$_(t, s) {
            const i = this._$GetLayout$_()._$Get3DCameraPosition$_(), e = i[0], n = i[1], h = i[2], r = t._$GetWorldInfo$_(), o = s._$GetWorldInfo$_(), a = r._$GetX$_() - e, l = r._$GetY$_() - n, u = r._$GetZElevation$_() - h, c = o._$GetX$_() - e, f = o._$GetY$_() - n, d = o._$GetZElevation$_() - h;
            return c * c + f * f + d * d - (a * a + l * l + u * u);
        }
        _$GetBackgroundColor$_() {
            return this._$_backgroundColor$_;
        }
        _$IsTransparent$_() {
            return this._$_isTransparent$_;
        }
        _$SetTransparent$_(t) {
            this._$_isTransparent$_ !== (t = !!t) && (this._$_isTransparent$_ = t, 
            this._$_runtime$_._$UpdateRender$_());
        }
        _$IsForceOwnTexture$_() {
            return this._$_isForceOwnTexture$_;
        }
        _$SetForceOwnTexture$_(t) {
            this._$_isForceOwnTexture$_ !== (t = !!t) && (this._$_isForceOwnTexture$_ = t, 
            this._$_runtime$_._$UpdateRender$_());
        }
        _$RendersIn2DMode$_() {
            return !this._$GetRuntime$_()._$Uses3DFeatures$_() || !this._$_renderAs3d$_;
        }
        _$RendersIn3DMode$_() {
            return !this._$RendersIn2DMode$_();
        }
        _$Has3DCamera$_() {
            return this._$RendersIn3DMode$_() && this._$GetLayout$_()._$Is3DCameraEnabled$_();
        }
        _$SelfAndAllSubLayersHave3DCamera$_() {
            if (!this._$Has3DCamera$_()) return !1;
            for (const t of this._$_subLayers$_) if (!t._$SelfAndAllSubLayersHave3DCamera$_()) return !1;
            return !0;
        }
        _$SetBlendMode$_(t) {
            this._$_blendMode$_ !== t && (this._$_blendMode$_ = t, this._$_runtime$_._$UpdateRender$_());
        }
        _$GetBlendMode$_() {
            return this._$_blendMode$_;
        }
        _$IsRootLayer$_() {
            return !this._$_parentLayer$_;
        }
        _$GetParentLayer$_() {
            return this._$_parentLayer$_;
        }
        _$_SetParentLayer$_(t) {
            this._$_parentLayer$_ = t;
        }
        _$GetSubLayers$_() {
            return this._$_subLayers$_;
        }
        _$HasAnySubLayers$_() {
            return 0 < this._$_subLayers$_.length;
        }
        _$_AddSubLayer$_(t, s = !0) {
            s ? this._$_subLayers$_.push(t) : this._$_subLayers$_.unshift(t);
        }
        _$_InsertSubLayer$_(t, s, i) {
            let e = this._$_subLayers$_.indexOf(s);
            if (-1 === e) throw new Error("cannot find layer to insert by");
            i && ++e, this._$_subLayers$_.splice(e, 0, t);
        }
        _$_RemoveSubLayer$_(t) {
            const s = this._$_subLayers$_.indexOf(t);
            if (-1 === s) throw new Error("cannot find layer to remove");
            this._$_subLayers$_.splice(s, 1);
        }
        _$HasAnyVisibleSubLayer$_() {
            for (const t of this._$_subLayers$_) if (t._$ShouldDraw$_()) return !0;
            return !1;
        }
        *_$selfAndAllSubLayers$_() {
            for (const t of this._$_subLayers$_) yield* t._$selfAndAllSubLayers$_();
            yield this;
        }
        *_$parentLayers$_() {
            let t = this._$GetParentLayer$_();
            for (;t; ) yield t, t = t._$GetParentLayer$_();
        }
        *_$selfAndParentLayers$_() {
            yield this, yield* this._$parentLayers$_();
        }
        _$HasParentLayer$_(t) {
            for (const s of this._$parentLayers$_()) if (s === t) return !0;
            return !1;
        }
        _$IsTransformCompatibleWith$_(t) {
            return this === t || this._$_parallaxX$_ === t._$_parallaxX$_ && this._$_parallaxY$_ === t._$_parallaxY$_ && this._$_scale$_ === t._$_scale$_ && this._$_scaleRate$_ === t._$_scaleRate$_ && this._$_angle$_ === t._$_angle$_ && this._$GetScrollX$_() === t._$GetScrollX$_() && this._$GetScrollY$_() === t._$GetScrollY$_();
        }
        _$SaveTransform$_() {
            return {
                parallaxX: this._$GetParallaxX$_(),
                parallaxY: this._$GetParallaxY$_(),
                scale: this._$GetOwnScale$_(),
                scaleRate: this._$GetScaleRate$_(),
                angle: this._$GetOwnAngle$_(),
                hasOwnScroll: this._$IsOwnScrollPositionEnabled$_(),
                scrollX: this._$GetScrollX$_(),
                scrollY: this._$GetScrollY$_()
            };
        }
        _$RestoreTransform$_(t) {
            this._$SetParallax$_(t.parallaxX, t.parallaxY), this._$SetOwnScale$_(t.scale), 
            this._$SetScaleRate$_(t.scaleRate), this._$SetAngle$_(t.angle), this._$SetOwnScrollPositionEnabled$_(t.hasOwnScroll), 
            this._$SetScrollX$_(t.scrollX), this._$SetScrollY$_(t.scrollY), this._$_MaybeUpdateViewport$_();
        }
        _$_RemoveAllInstancesInSet$_(t) {
            if (0 !== t.size) {
                const s = w._$arrayRemoveAllInSet$_(this._$_instances$_, t);
                0 < s && (this._$_MaybeResetAnyInstanceZElevatedFlag$_(), this._$SetZIndicesChanged$_());
            }
        }
        _$SetZIndicesChanged$_(t) {
            this._$_zIndicesUpToDate$_ = !1, this._$_isRenderListUpToDate$_ = !1, 
            t && !t._$GetObjectClass$_()._$GetPlugin$_()._$IsHTMLElementType$_() || (this._$_htmlZIndicesUpToDate$_ = !1);
        }
        _$_UpdateZIndices$_() {
            if (!this._$_zIndicesUpToDate$_) {
                if (this._$_instances$_.sort(t), this._$UsesRenderCells$_()) for (let t = 0, s = this._$_instances$_.length; t < s; ++t) {
                    const i = this._$_instances$_[t]._$GetWorldInfo$_();
                    i._$_SetZIndex$_(t), this._$_renderGrid$_._$MarkRangeChanged$_(i._$GetRenderCellRange$_());
                } else for (let t = 0, s = this._$_instances$_.length; t < s; ++t) this._$_instances$_[t]._$GetWorldInfo$_()._$_SetZIndex$_(t);
                this._$_zIndicesUpToDate$_ = !0;
            }
        }
        _$_UpdateHTMLZIndices$_() {
            if (!this._$_htmlZIndicesUpToDate$_) {
                let t = this._$_layout$_._$GetRootLayersForHTMLLayer$_(this._$GetHTMLIndex$_()), s = t.map(t => [ ...t._$selfAndAllSubLayers$_() ]).flat(), i = 0;
                for (const e of s) {
                    for (const n of e._$_GetInstances$_()) n._$GetObjectClass$_()._$GetPlugin$_()._$IsHTMLElementType$_() && n._$GetWorldInfo$_()._$_SetHTMLZIndex$_(i++);
                    e._$_SetHTMLZIndicesUpToDate$_();
                }
            }
        }
        _$_SetHTMLZIndicesUpToDate$_() {
            this._$_htmlZIndicesUpToDate$_ = !0;
        }
        _$_GetHTMLLayerDOMState$_() {
            return {
                isVisible: this._$IsVisible$_(),
                opacity: this._$GetOpacity$_(),
                isInteractive: this._$IsInteractive$_()
            };
        }
        _$MoveInstanceAdjacent$_(t, s, i) {
            const e = t._$GetWorldInfo$_(), n = s._$GetWorldInfo$_();
            if (e._$GetLayer$_() !== this || n._$GetLayer$_() !== this) throw new Error("can't arrange Z order unless both objects on this layer");
            let h = e._$GetZIndex$_(), r = n._$GetZIndex$_();
            return h !== r + (i ? 1 : -1) && (w._$arrayRemove$_(this._$_instances$_, h), 
            h < r && r--, i && r++, r === this._$_instances$_.length ? this._$_instances$_.push(t) : this._$_instances$_.splice(r, 0, t), 
            this._$SetZIndicesChanged$_(t), !0);
        }
        _$_MergeSortedZArrays$_(t, s) {
            let i = [], e = 0, n = 0, h = t.length, r = s.length;
            for (;e < h && n < r; ) {
                const o = t[e], a = s[n];
                o._$GetWorldInfo$_()._$_GetLastCachedZIndex$_() < a._$GetWorldInfo$_()._$_GetLastCachedZIndex$_() ? (i.push(o), 
                ++e) : (i.push(a), ++n);
            }
            for (;e < h; ++e) i.push(t[e]);
            for (;n < r; ++n) i.push(s[n]);
            return i;
        }
        _$_MergeAllSortedZArrays_pass$_(s) {
            const i = [], e = s.length;
            for (let t = 0; t < e - 1; t += 2) {
                const n = s[t], h = s[t + 1];
                i.push(this._$_MergeSortedZArrays$_(n, h));
            }
            return e % 2 == 1 && i.push(s[e - 1]), i;
        }
        _$_MergeAllSortedZArrays$_(t) {
            for (;1 < t.length; ) t = this._$_MergeAllSortedZArrays_pass$_(t);
            return t[0];
        }
        _$_GetRenderCellInstancesToDraw$_() {
            return this._$_UpdateZIndices$_(), w._$clearArray$_(mh), this._$_renderGrid$_._$QueryRange$_(this._$GetViewport$_(), mh), 
            mh.length ? 1 === mh.length ? mh[0] : this._$_MergeAllSortedZArrays$_(mh) : [];
        }
        _$ShouldDraw$_() {
            return this._$IsVisible$_() && 0 < this._$GetOpacity$_() && this._$_DrawsAnyContentInSelfOrSubLayers$_();
        }
        _$_DrawsAnyContentInSelfOrSubLayers$_() {
            if (this._$HasInstances$_() || !this._$IsTransparent$_()) return !0;
            for (const t of this._$_subLayers$_) if (t._$_DrawsAnyContentInSelfOrSubLayers$_()) return !0;
            return !1;
        }
        _$UsesOwnTexture$_() {
            return this._$IsForceOwnTexture$_() || !this._$HasDefaultColor$_() || 0 !== this._$GetBlendMode$_() || this._$_effectList$_._$HasAnyActiveEffect$_();
        }
        _$SelfOrAnySubLayerUsesOwnTexture$_() {
            if (this._$UsesOwnTexture$_()) return !0;
            for (const t of this._$_subLayers$_) if (t._$SelfOrAnySubLayerUsesOwnTexture$_()) return !0;
            return !1;
        }
        _$GetRenderTarget$_() {
            return this._$_curRenderTarget$_;
        }
        _$Get2DScaleFactorToZ$_(t) {
            if (this._$_layout$_._$IsOrthographicProjection$_()) return 1;
            {
                const s = this._$Get3DCameraZ$_();
                return s / (s - t);
            }
        }
        _$GetResolutionScaleFactorToZ$_(t) {
            const s = this._$_runtime$_._$GetRenderScale$_();
            if (this._$_layout$_._$IsOrthographicProjection$_()) return s;
            {
                const i = this._$Get3DCameraZ$_(), e = this._$GetDefaultCameraZ$_();
                return e / Math.abs(i - t) * s;
            }
        }
        _$_SetMVMatrixChanged$_() {
            this._$_isMVMatrixChanged$_ = !0, this._$_isViewFrustumChanged$_ = !0, 
            this._$_isViewportChanged$_ = !0;
        }
        _$_GetModelViewMatrix$_(t) {
            return this._$_isMVMatrixChanged$_ && (this._$_CalculateModelViewMatrix$_(t, this._$_modelViewMatrix$_, 0, 0, null), 
            this._$_isMVMatrixChanged$_ = !1), this._$_modelViewMatrix$_;
        }
        _$Get2DCameraZ$_(t) {
            return this._$GetDefaultCameraZ$_(t) / this._$GetNormalScale$_();
        }
        _$Get3DCameraZ$_() {
            return this._$Has3DCamera$_() ? this._$GetLayout$_()._$Get3DCameraPosition$_()[2] : this._$Get2DCameraZ$_();
        }
        _$GetCameraPosition$_() {
            if (this._$Has3DCamera$_()) {
                const t = this._$GetLayout$_()._$Get3DCameraPosition$_();
                return [ t[0], t[1], t[2] ];
            }
            return this._$_Get2DCameraPosition$_();
        }
        _$_Get2DCameraPosition$_(t = 0, s = 0, n = 0) {
            let h = this._$_runtime$_, i = this._$GetLayout$_(), e = h._$GetParallaxXOrigin$_(), r = h._$GetParallaxYOrigin$_(), o = (this._$GetScrollX$_() - e) * this._$_parallaxX$_ + e, a = (this._$GetScrollY$_() - r) * this._$_parallaxY$_ + r, l = (h._$IsPixelRoundingEnabled$_() && (o = Math.round(o), 
            a = Math.round(a)), o + t), u = a + s, c = i._$IsOrthographicProjection$_() ? this._$GetDefaultCameraZ$_(n) : this._$Get2DCameraZ$_(n), [ f, d ] = this._$_GetVanishingPoint$_();
            if (.5 !== f || .5 !== d) {
                let t = this._$GetDefaultCameraZ$_(n) / c, s = (f - .5) * h._$GetViewportWidth$_() / t, i = (d - .5) * h._$GetViewportHeight$_() / t, e = this._$GetAngle$_();
                0 !== e && (bh.set(s, i), bh.rotate(e), s = bh._$getX$_(), i = bh._$getY$_()), 
                l += s, u += i;
            }
            return [ l, u, c ];
        }
        _$_CalculateModelViewMatrix$_(t, s, i, e, n) {
            const h = this._$_runtime$_, r = this._$GetLayout$_();
            if (this._$Has3DCamera$_()) {
                Cn._$copy$_(xh, r._$Get3DCameraPosition$_()), Cn._$copy$_(Sh, r._$Get3DCameraLookAt$_()), 
                Cn._$copy$_(Th, r._$Get3DCameraUpVector$_());
                const o = h._$GetParallaxXOrigin$_(), a = h._$GetParallaxYOrigin$_(), l = Sh[0] - xh[0], u = Sh[1] - xh[1], c = Sh[2] - xh[2];
                xh[0] = (xh[0] - o) * this._$_parallaxX$_ + o, xh[1] = (xh[1] - a) * this._$_parallaxY$_ + a, 
                xh[2] *= Math.max(this._$_parallaxX$_, this._$_parallaxY$_), Sh[0] = xh[0] + l, 
                Sh[1] = xh[1] + u, Sh[2] = xh[2] + c;
            } else {
                const [ f, d, p ] = this._$_Get2DCameraPosition$_(i, e, n), m = (Cn.set(xh, f, d, p), 
                Cn.set(Sh, f, d, p - 100), this._$GetAngle$_());
                0 === m ? Cn.set(Th, 0, 1, 0) : Cn.set(Th, Math.sin(m), Math.cos(m), 0);
            }
            t._$CalculateLookAtModelView$_(s, xh, Sh, Th, n || h._$GetViewportHeight$_());
        }
        _$_SetProjectionMatrixChanged$_() {
            this._$_isProjectionMatrixChanged$_ = !0, this._$_isViewFrustumChanged$_ = !0, 
            this._$_isViewportChanged$_ = !0;
        }
        _$_GetProjectionMatrix$_(t) {
            return this._$_isProjectionMatrixChanged$_ && (this._$_CalculateProjectionMatrix$_(t), 
            this._$_isProjectionMatrixChanged$_ = !1), this._$_projectionMatrix$_;
        }
        _$_CalculateProjectionMatrix$_(t) {
            const s = this._$_runtime$_._$GetCanvasManager$_(), [ i, e ] = this._$_GetVanishingPoint$_();
            if (this._$_layout$_._$IsOrthographicProjection$_()) t._$CalculateOrthographicMatrix$_(this._$_projectionMatrix$_, s._$GetDrawWidth$_(), s._$GetDrawHeight$_()); else if (.5 === i && .5 === e) vn._$copy$_(this._$_projectionMatrix$_, s._$GetDefaultProjectionMatrix$_()); else {
                const n = s._$GetDrawWidth$_(), h = s._$GetDrawHeight$_();
                t._$CalculatePerspectiveMatrix$_(this._$_projectionMatrix$_, n / h, i, e);
            }
        }
        _$_SetTransform$_(t, s = !0, i = 0, e = 0, n = 0) {
            s && t._$SetProjectionMatrix$_(this._$_GetProjectionMatrix$_(t));
            let h;
            h = 0 === i && 0 === e && 0 === n ? this._$_GetModelViewMatrix$_(t) : (this._$_CalculateModelViewMatrix$_(t, yh, i, e, n), 
            yh), t._$SetModelViewMatrix$_(h);
        }
        _$PrepareForDraw$_(t) {
            this._$_SetTransform$_(t), t._$SetBaseZ$_(this._$GetZElevation$_());
        }
        _$_MaybeStartWebGLProfiling$_(t) {
            let s = null;
            if (t._$IsWebGL$_() && this._$_runtime$_._$IsGPUProfiling$_()) {
                const i = this._$_runtime$_._$GetCanvasManager$_()._$GetLayerTimingsBuffer$_(this);
                i && (s = i._$AddTimeElapsedQuery$_(), t._$StartQuery$_(s));
            }
            return s;
        }
        _$_MaybeStartWebGPUProfiling$_(t) {
            if (t._$IsWebGPU$_() && this._$_runtime$_._$IsGPUProfiling$_()) {
                const s = 2 * (this._$GetIndex$_() + 1);
                t.StartMeasuringRenderPassTime(s, 1 + s);
            }
        }
        _$Draw$_(t, s, i) {
            let e = this._$_runtime$_._$GetCanvasManager$_(), n = this._$UsesOwnTexture$_(), h = null, r = this._$_MaybeStartWebGLProfiling$_(t);
            if (this._$_MaybeStartWebGPUProfiling$_(t), n) {
                const o = {
                    _$sampling$_: this._$_runtime$_._$GetSampling$_(),
                    _$isSampled$_: !0,
                    _$canReadPixels$_: !!t._$IsWebGPU$_() && this._$_runtime$_._$UsesAnyBackgroundBlending$_()
                };
                "low" === e._$GetCurrentFullscreenScalingQuality$_() && (o.width = e._$GetDrawWidth$_(), 
                o.height = e._$GetDrawHeight$_()), h = this._$_runtime$_._$GetAdditionalRenderTarget$_(o), 
                this._$_curRenderTarget$_ = h, t._$SetRenderTarget$_(h), this._$IsTransparent$_() && t._$ClearRgba$_(0, 0, 0, 0);
            } else this._$_curRenderTarget$_ = s, t._$SetRenderTarget$_(s);
            if (this._$IsTransparent$_() || t._$Clear$_(this._$_backgroundColor$_), 
            this._$_layout$_._$_DrawLayerList$_(t, this._$_curRenderTarget$_, this._$_subLayers$_, n && this._$IsTransparent$_()), 
            this._$_MaybeStartWebGPUProfiling$_(t), this._$_SetTransform$_(t), t._$SetBaseZ$_(this._$GetZElevation$_()), 
            t._$SetDepthEnabled$_(this._$RendersIn3DMode$_()), this._$GetNormalScale$_() > Number.EPSILON) {
                this._$_UpdateZIndices$_();
                const a = this._$UsesRenderCells$_() && 0 === this._$GetZElevation$_() && !this._$_anyInstanceZElevated$_;
                this._$Has3DCamera$_() ? this._$_DrawInstances_3DCamera$_(t) : a ? this._$_DrawInstances_RenderCells$_(t) : this._$_DrawInstances$_(t, this._$_GetInstancesInDrawOrder$_());
            }
            t._$SetBaseZ$_(0), t._$SetCurrentZ$_(0), n && (t._$SetDepthEnabled$_(!1), 
            this._$_DrawLayerOwnTextureToRenderTarget$_(t, h, s, i)), r && t._$EndQuery$_(r), 
            this._$_curRenderTarget$_ = null;
        }
        _$_DrawInstances$_(i, e) {
            let n = this._$GetViewport$_(), h = this._$_curRenderTarget$_, r = this._$GetLayout$_()._$IsOrthographicProjection$_(), o = this._$GetLayout$_()._$HasVanishingPointOutsideViewport$_(), a = null;
            for (let t = 0, s = e.length; t < s; ++t) {
                const l = e[t];
                if (l !== a) {
                    const u = (a = l)._$GetWorldInfo$_();
                    u._$IsVisible$_() && u._$IsInViewport$_(n, o, r) && this._$_DrawInstanceMaybeWithEffects$_(l, u, i, h);
                }
            }
        }
        _$_DrawInstances_3DCamera$_(e) {
            const n = this._$_curRenderTarget$_, h = this._$_GetViewFrustum$_(), r = vh, o = Ch, a = this._$_GetInstancesInDrawOrder$_();
            for (let s = 0, i = a.length; s < i; ) {
                const l = a[s], u = l._$GetWorldInfo$_();
                if (u._$IsVisible$_() && u._$IsInViewport3D$_(h)) {
                    (!l._$RendersToOwnZPlane$_() || 0 < u._$GetDepth$_()) && o.push(l);
                    const c = l._$GetWorldInfo$_()._$GetTotalZElevation$_();
                    r.push(l);
                    let t = s + 1;
                    for (;t < i; ++t) {
                        const f = a[t], d = f._$GetWorldInfo$_();
                        if (d._$IsVisible$_() && d._$IsInViewport3D$_(h)) {
                            if (d._$GetTotalZElevation$_() !== c) break;
                            (f._$RendersToOwnZPlane$_() ? (0 < d._$GetDepth$_() && o.push(f), 
                            r) : o).push(f);
                        }
                    }
                    if (1 !== r.length || r[0]._$MustMitigateZFighting$_()) {
                        this._$_DrawCoplanarInstances_3DCamera$_(e, r);
                        for (let t = 0, s = o.length; t < s; ++t) {
                            const p = o[t], m = p._$GetWorldInfo$_();
                            m._$_SetDrawNonBackFacesOnly$_(!0), this._$_DrawInstanceMaybeWithEffects$_(p, m, e, n), 
                            m._$_SetDrawNonBackFacesOnly$_(!1);
                        }
                    } else {
                        this._$_DrawInstanceMaybeWithEffects$_(l, u, e, n);
                        for (let t = 0, s = o.length; t < s; ++t) {
                            const g = o[t];
                            if (g !== l) {
                                const y = g._$GetWorldInfo$_(), M = y._$GetLayer$_();
                                M._$_DrawInstanceMaybeWithEffects$_(g, y, e, n);
                            }
                        }
                    }
                    s = t, w._$clearArray$_(r), w._$clearArray$_(o);
                } else ++s;
            }
        }
        _$_DrawCoplanarInstances_3DCamera$_(i, e) {
            const n = this._$_curRenderTarget$_;
            i._$CoplanarStartStencilPass$_();
            for (let t = 0, s = e.length; t < s; ++t) {
                const h = e[t], r = h._$GetWorldInfo$_();
                r._$_SetDrawBackFaceOnly$_(!0), this._$_DrawInstance$_(h, r, i);
            }
            i._$CoplanarStartColorPass$_();
            for (let t = 0, s = e.length; t < s; ++t) {
                const o = e[t], a = o._$GetWorldInfo$_();
                this._$_DrawInstanceMaybeWithEffects$_(o, a, i, n), a._$_SetDrawBackFaceOnly$_(!1);
            }
            i._$CoplanarRestoreStandardRendering$_();
        }
        _$_DrawInstances_RenderCells$_(t) {
            let s = this._$_renderGrid$_, i = this._$_curRenderCells$_, e = this._$_lastRenderCells$_, n = this._$GetViewport$_(), h;
            i.set(s._$XToCell$_(n._$getLeft$_()), s._$YToCell$_(n._$getTop$_()), s._$XToCell$_(n._$getRight$_()), s._$YToCell$_(n._$getBottom$_())), 
            this._$_isRenderListUpToDate$_ && i.equals(e) ? h = this._$_lastRenderList$_ : (h = this._$_GetRenderCellInstancesToDraw$_(), 
            this._$_isRenderListUpToDate$_ = !0, e._$copy$_(i)), this._$_DrawInstances$_(t, h), 
            h !== this._$_lastRenderList$_ && w._$shallowAssignArray$_(this._$_lastRenderList$_, h);
        }
        _$_DrawInstanceMaybeWithEffects$_(t, s, i, e) {
            s._$HasAnyActiveEffect$_() ? this._$_DrawInstanceWithEffectsAndRestore$_(t, s, i, e) : this._$_DrawInstance$_(t, s, i);
        }
        _$_DrawInstance$_(t, s, i) {
            const e = s._$GetRendererStateGroup$_();
            i._$GetCurrentStateGroup$_() !== e && e._$Apply$_(), t._$Draw$_(i);
        }
        _$_DrawInstanceWithEffectsAndRestore$_(t, s, i, e) {
            this._$_DrawInstanceWithEffects$_(t, s, i, e, null) && this._$_SetTransform$_(i);
        }
        _$_DrawInstanceWithEffects$_(t, s, i, e, n) {
            const h = s._$GetInstanceEffectList$_()._$GetEffectChain$_();
            return h._$Render$_(i, e, {
                _$contentObject$_: t,
                _$blendMode$_: s._$GetBlendMode$_(),
                devicePixelRatio: this._$_runtime$_._$GetEffectDevicePixelRatioParam$_(),
                time: t._$GetInstanceGameTime$_(),
                _$layerScale$_: this._$_runtime$_._$GetEffectLayerScaleParam$_() * this._$GetNormalScale$_(),
                _$layerAngle$_: this._$GetAngle$_(),
                _$layoutRect$_: s._$GetBoundingBox$_(),
                _$drawSurfaceRect$_: h._$CanSkipCalculatingDrawSurfaceRect$_() ? null : this._$_InstanceBoxToDrawSurface$_(s),
                _$drawContentHook$_: n && n._$drawContentHook$_,
                _$compositOffX$_: n && n._$compositOffX$_,
                _$compositOffY$_: n && n._$compositOffY$_,
                _$updateOwnProjection$_: n && n._$updateOwnProjection$_
            }), i._$SetBaseZ$_(this._$GetZElevation$_()), h._$DidChangeTransform$_();
        }
        _$_DrawLayerOwnTextureToRenderTarget$_(t, s, i, e) {
            const n = this._$_effectList$_._$GetActiveEffectTypes$_(), h = this._$_runtime$_;
            0 === n.length ? (t._$SetRenderTarget$_(i), t._$SetTextureFillMode$_(), 
            e && 0 === this._$_blendMode$_ && this._$HasDefaultColor$_() ? t._$CopyRenderTarget$_(s) : (t._$SetBlendMode$_(this._$_blendMode$_), 
            t._$SetColor$_(this._$_premultipliedColor$_), t._$DrawRenderTarget$_(s)), 
            t._$InvalidateRenderTarget$_(s), h._$ReleaseAdditionalRenderTarget$_(s)) : this._$GetEffectChain$_()._$Render$_(t, i, {
                _$contentObject$_: this,
                _$blendMode$_: this._$GetBlendMode$_(),
                devicePixelRatio: h._$GetEffectDevicePixelRatioParam$_(),
                _$layerScale$_: h._$GetEffectLayerScaleParam$_() * this._$GetNormalScale$_(),
                _$layerAngle$_: this._$GetAngle$_(),
                _$layoutRect$_: this._$GetViewport$_(),
                _$drawSurfaceRect$_: null,
                _$invalidateRenderTargets$_: !0
            });
        }
        _$GetOwnScale$_() {
            return this._$_scale$_;
        }
        _$SetOwnScale$_(t) {
            this._$_scale$_ !== t && (this._$_scale$_ = t, this._$_layout$_._$BoundScrolling$_(), 
            this._$_SetMVMatrixChanged$_(), this._$_runtime$_._$UpdateRender$_());
        }
        _$GetRenderScale$_() {
            return this._$GetNormalScale$_() * this._$_runtime$_._$GetRenderScale$_();
        }
        _$GetDisplayScale$_() {
            return this._$GetNormalScale$_() * this._$_runtime$_._$GetDisplayScale$_();
        }
        _$GetNormalScale$_() {
            return (this._$_scale$_ * this._$_layout$_._$GetScale$_() - 1) * this._$_scaleRate$_ + 1;
        }
        _$_MaybeUpdateViewport$_() {
            if (this._$_isViewportChanged$_) {
                this._$_isViewportChanged$_ = !1;
                let t = this._$_runtime$_._$GetParallaxXOrigin$_(), s = this._$_runtime$_._$GetParallaxYOrigin$_(), i = (this._$GetScrollX$_() - t) * this._$_parallaxX$_ + t, e = (this._$GetScrollY$_() - s) * this._$_parallaxY$_ + s, n = this._$GetNormalScale$_(), h = this._$_runtime$_._$GetViewportWidth$_() / n, r = this._$_runtime$_._$GetViewportHeight$_() / n, o = i - h / 2, a = e - r / 2;
                this._$_runtime$_._$IsPixelRoundingEnabled$_() && (o = Math.round(o), 
                a = Math.round(a));
                const l = this._$_viewportZ0$_, u = (l.set(o, a, o + h, a + r), 
                this._$GetAngle$_()), c = (0 !== u && (dh._$copy$_(l), dh.offset(-l._$midX$_(), -l._$midY$_()), 
                ph._$setFromRotatedRect$_(dh, u), ph._$getBoundingBox$_(dh), dh.offset(l._$midX$_(), l._$midY$_()), 
                l._$copy$_(dh)), this._$_zElevation$_);
                this._$GetViewportForZ$_(c, this._$_viewport$_), this._$Has3DCamera$_() ? this._$CalculateViewport3D$_(c, this._$_viewport3D$_) : this._$_viewport3D$_._$copy$_(this._$_viewport$_);
            }
        }
        _$CalculateViewport3D$_(t, s) {
            let i = this._$_runtime$_._$GetCanvasManager$_(), e = i._$GetCssWidth$_(), n = i._$GetCssHeight$_(), [ h, r ] = this._$CanvasCssToLayer$_(0, 0, t), [ o, a ] = this._$CanvasCssToLayer$_(e, 0, t), [ l, u ] = this._$CanvasCssToLayer$_(e, n, t), [ c, f ] = this._$CanvasCssToLayer$_(0, n, t), d = Math.min(h, o, l, c), p = Math.min(r, a, u, f), m = Math.max(h, o, l, c), g = Math.max(r, a, u, f);
            isFinite(d) || (d = -1 / 0), isFinite(p) || (p = -1 / 0), isFinite(m) || (m = 1 / 0), 
            isFinite(g) || (g = 1 / 0), s.set(d, p, m, g);
        }
        _$CanvasCssToLayer$_(t, s, i = 0) {
            return this._$_CanvasToLayer$_(t, s, i, this._$GetDisplayScale$_());
        }
        _$DrawSurfaceToLayer$_(t, s, i = 0) {
            return this._$_CanvasToLayer$_(t, s, i, this._$GetRenderScale$_() * this._$GetDevicePixelRatio$_());
        }
        _$_CanvasToLayer$_(t, s, i, e) {
            const n = this._$_runtime$_, h = n._$GetRenderer$_(), r = this._$GetNormalScale$_(), o = n._$GetViewportWidth$_() / r, a = n._$GetViewportHeight$_() / r, l = wh, u = (Wn.set(l, 0, 0, o, a), 
            t /= e, s = l[3] - s / e, this._$_GetProjectionMatrix$_(h)), c = this._$_GetModelViewMatrix$_(h), f = Mh, d = w._$Gfx$_._$UnprojectScreenToWorldZ$_(t, s, i, c, u, l, f);
            return d ? [ f[0], f[1] ] : [ NaN, NaN ];
        }
        _$CanvasCssToLayer_DefaultTransform$_(t, s) {
            const i = this._$_scale$_, e = this._$_scaleRate$_, n = this._$_parallaxX$_, h = this._$_parallaxY$_, r = this._$_angle$_, o = (this._$_scale$_ = 1, 
            this._$_scaleRate$_ = 1, this._$_parallaxX$_ = 1, this._$_parallaxY$_ = 1, 
            this._$_angle$_ = 0, this._$_SetMVMatrixChanged$_(), this._$CanvasCssToLayer$_(t, s));
            return this._$_scale$_ = i, this._$_scaleRate$_ = e, this._$_parallaxX$_ = n, 
            this._$_parallaxY$_ = h, this._$_angle$_ = r, this._$_SetMVMatrixChanged$_(), 
            o;
        }
        _$LayerToCanvasCss$_(t, s, i = 0) {
            return this._$_LayerToCanvas$_(t, s, i, this._$GetDisplayScale$_());
        }
        _$LayerToDrawSurface$_(t, s, i = 0) {
            return this._$_LayerToCanvas$_(t, s, i, this._$GetRenderScale$_() * this._$GetDevicePixelRatio$_());
        }
        _$_LayerToCanvas$_(t, s, i, e) {
            const n = this._$_runtime$_, h = n._$GetRenderer$_(), r = this._$GetNormalScale$_(), o = n._$GetViewportWidth$_() / r, a = n._$GetViewportHeight$_() / r, l = wh, u = (Wn.set(l, 0, 0, o, a), 
            this._$_GetProjectionMatrix$_(h)), c = this._$_GetModelViewMatrix$_(h), f = Mh, d = w._$Gfx$_._$Project$_(t, s, i, c, u, l, f);
            return d ? [ f[0] * e, (l[3] - f[1]) * e ] : [ NaN, NaN ];
        }
        _$_GetLayerToDrawSurfaceScale$_(t, s) {
            return t *= this._$GetRenderScale$_() * this._$GetDevicePixelRatio$_(), 
            0 !== s && (t *= this._$Get2DScaleFactorToZ$_(s)), t;
        }
        _$_InstanceBoxToDrawSurface$_(t) {
            const s = t._$GetBoundingBox$_(), i = t._$GetTotalZElevation$_(), e = t._$GetDepth$_(), l = i + e, u = s._$getLeft$_(), c = s._$getTop$_(), f = s._$getRight$_(), d = s._$getBottom$_();
            if (this._$Has3DCamera$_()) {
                if (this._$_IsPointBehindNearPlane$_(u, c, i) || this._$_IsPointBehindNearPlane$_(f, c, i) || this._$_IsPointBehindNearPlane$_(f, d, i) || this._$_IsPointBehindNearPlane$_(u, d, i)) return null;
                if (0 < e && (this._$_IsPointBehindNearPlane$_(u, c, l) || this._$_IsPointBehindNearPlane$_(f, c, l) || this._$_IsPointBehindNearPlane$_(f, d, l) || this._$_IsPointBehindNearPlane$_(u, d, l))) return null;
            } else if (l >= this._$Get2DCameraZ$_()) return null;
            let [ p, m ] = this._$LayerToDrawSurface$_(u, c, i), [ g, y ] = this._$LayerToDrawSurface$_(f, d, i);
            if (0 !== this._$GetAngle$_() || 0 < e || this._$Has3DCamera$_()) {
                const [ M, w ] = this._$LayerToDrawSurface$_(f, c, i), [ x, S ] = this._$LayerToDrawSurface$_(u, d, i);
                if (0 < e) {
                    let [ t, s ] = this._$LayerToDrawSurface$_(u, c, l), [ i, e ] = this._$LayerToDrawSurface$_(f, c, l), [ n, h ] = this._$LayerToDrawSurface$_(f, d, l), [ r, o ] = this._$LayerToDrawSurface$_(u, d, l), a = Math.min(p, g, M, x, t, i, n, r);
                    g = Math.max(p, g, M, x, t, i, n, r), p = a, a = Math.min(m, y, w, S, s, e, h, o), 
                    y = Math.max(m, y, w, S, s, e, h, o), m = a;
                } else {
                    let t = Math.min(p, g, M, x);
                    g = Math.max(p, g, M, x), p = t, t = Math.min(m, y, w, S), y = Math.max(m, y, w, S), 
                    m = t;
                }
            }
            return dh.set(p, m, g, y), dh;
        }
        _$_GetViewFrustum$_() {
            return this._$_isViewFrustumChanged$_ && (this._$_UpdateViewFrustum$_(), 
            this._$_isViewFrustumChanged$_ = !1), this._$_viewFrustum$_;
        }
        _$_UpdateViewFrustum$_() {
            const t = this._$_runtime$_._$GetRenderer$_(), s = this._$_GetProjectionMatrix$_(t), i = this._$_GetModelViewMatrix$_(t);
            this._$_viewFrustum$_._$CalculatePlanes$_(i, s);
        }
        _$_IsPointBehindNearPlane$_(t, s, i) {
            return this._$_GetViewFrustum$_()._$IsBehindNearPlane$_(t, s, i);
        }
        _$_SaveToJson$_() {
            const t = {
                d: this._$IsDynamic$_(),
                s: this._$GetOwnScale$_(),
                a: this._$GetOwnAngle$_(),
                v: this._$_IsVisibleFlagSet$_(),
                i: this._$IsInteractive$_(),
                html: this._$IsHTMLElementsLayer$_(),
                bc: this._$_backgroundColor$_.toJSON(),
                t: this._$IsTransparent$_(),
                sx: this._$_scrollX$_,
                sy: this._$_scrollY$_,
                hosp: this._$_hasOwnScrollPosition$_,
                px: this._$GetParallaxX$_(),
                py: this._$GetParallaxY$_(),
                c: this._$_color$_.toJSON(),
                sr: this._$GetScaleRate$_(),
                fx: this._$_effectList$_._$SaveToJson$_(),
                cg: this._$_createdGlobalUids$_
            };
            return t;
        }
        _$_LoadFromJson$_(t) {
            this._$_isDynamic$_ = !!t.d, this._$_scale$_ = t.s, this._$_angle$_ = t.a, 
            this._$_isVisible$_ = !!t.v, this._$_isInteractive$_ = !t.hasOwnProperty("i") || t.i, 
            this._$_isHTMLElementsLayer$_ = !!t.html, this._$_backgroundColor$_._$setFromJSON$_(t.bc), 
            this._$_isTransparent$_ = !!t.t, t.hasOwnProperty("sx") && (this._$_scrollX$_ = t.sx), 
            t.hasOwnProperty("sy") && (this._$_scrollY$_ = t.sy), t.hasOwnProperty("hosp") && (this._$_hasOwnScrollPosition$_ = !!t.hosp), 
            this._$_parallaxX$_ = t.px, this._$_parallaxY$_ = t.py, this._$_color$_._$setFromJSON$_(t.c), 
            this._$_UpdatePremultipliedColor$_(), this._$_scaleRate$_ = t.sr, w._$shallowAssignArray$_(this._$_createdGlobalUids$_, t.cg), 
            w._$shallowAssignArray$_(this._$_initialInstances$_, this._$_startupInitialInstances$_);
            let i = new Set(this._$_createdGlobalUids$_), e = 0;
            for (let t = 0, s = this._$_initialInstances$_.length; t < s; ++t) i.has(this._$_initialInstances$_[t][2]) || (this._$_initialInstances$_[e] = this._$_initialInstances$_[t], 
            ++e);
            w._$truncateArray$_(this._$_initialInstances$_, e), this._$_effectList$_._$LoadFromJson$_(t.fx), 
            this._$_needsRebuildEffectChainSteps$_ = !0;
        }
        _$_LoadFromJsonAfterInstances$_() {
            this._$_SortInstancesByLastCachedZIndex$_(!1), this._$SetZIndicesChanged$_(), 
            this._$_SetMVMatrixChanged$_(), this._$_SetProjectionMatrixChanged$_();
        }
        _$GetILayer$_() {
            return this._$_iLayer$_;
        }
        _$SortAndAddInstancesByZIndex$_(t, s = !1) {
            if (this._$_instances$_.includes(t)) s && this._$_instances$_.sort((t, s) => {
                const i = t._$GetWorldInfo$_()._$GetSceneGraphZIndex$_(), e = s._$GetWorldInfo$_()._$GetSceneGraphZIndex$_();
                return i - e;
            }); else if (t._$HasChildren$_()) {
                const i = [ ...t._$allChildren$_() ];
                i.push(t), i.sort((t, s) => {
                    const i = t._$GetWorldInfo$_()._$GetSceneGraphZIndex$_(), e = s._$GetWorldInfo$_()._$GetSceneGraphZIndex$_();
                    return i - e;
                });
                for (const e of i) if (e._$IsInContainer$_()) for (const n of e._$siblings$_()) if (!i.includes(n)) {
                    const h = [ ...n._$allChildren$_() ];
                    h.push(n), h.sort((t, s) => {
                        const i = t._$GetWorldInfo$_()._$GetSceneGraphZIndex$_(), e = s._$GetWorldInfo$_()._$GetSceneGraphZIndex$_();
                        return i - e;
                    }), h && h.length && i.splice(i.length, 0, ...h);
                }
                for (const r of i) r._$GetPlugin$_()._$IsWorldType$_() && this._$_AddInstance$_(r, !0);
            } else if (t._$GetPlugin$_()._$IsWorldType$_() && this._$_AddInstance$_(t, !0), 
            t._$IsInContainer$_()) for (const o of t._$siblings$_()) {
                const a = [ ...o._$allChildren$_() ];
                if (a.push(o), a.sort((t, s) => {
                    const i = t._$GetWorldInfo$_()._$GetSceneGraphZIndex$_(), e = s._$GetWorldInfo$_()._$GetSceneGraphZIndex$_();
                    return i - e;
                }), a && a.length) for (const l of a) l._$GetPlugin$_()._$IsWorldType$_() && this._$_AddInstance$_(l, !0);
            }
        }
    };
}

{
    let l = function(t, s, i, e) {
        return t[0] === Math.fround(s) && t[1] === Math.fround(i) && t[2] === Math.fround(e);
    }, S = function(t, s) {
        I !== t && (t._$PrepareForDraw$_(s), I = t);
    }, T = (l, S, self._$C3$_), e = self.C3Debugger, n = (T._$New$_(T.Rect), T._$New$_(T.Rect), 
    T._$New$_(T.Rect)), b = T._$New$_(T._$Color$_), t = self._$glMatrix$_, u = t._$vec3$_, a = [], v = [], C = [], G = [], I = null;
    T._$Layout$_ = class extends T._$DefendedBase$_ {
        constructor(t, s, i) {
            super(), this._$_layoutManager$_ = t, this._$_runtime$_ = t._$GetRuntime$_(), 
            this._$_name$_ = i[0], this._$_originalWidth$_ = i[1], this._$_originalHeight$_ = i[2], 
            this._$_width$_ = i[1], this._$_height$_ = i[2], this._$_isUnboundedScrolling$_ = !!i[3], 
            this._$_isOrthographicProjection$_ = !!i[4], this._$_vanishingPointX$_ = i[5], 
            this._$_vanishingPointY$_ = i[6], this._$_eventSheetName$_ = i[7], this._$_eventSheet$_ = null, 
            this._$_sid$_ = i[8], this._$_index$_ = s, this._$_scrollX$_ = 0, this._$_scrollY$_ = 0, 
            this._$_scale$_ = 1, this._$_angle$_ = 0, this._$_initialObjectClasses$_ = new Set(), 
            this._$_textureLoadedTypes$_ = new Set(), this._$_textureLoadPendingPromises$_ = new Set(), 
            this._$_createdInstances$_ = [], this._$_createdPersistedInstances$_ = [], 
            this._$_createdPersistedInstancesToDataMap$_ = new Map(), this._$_createdPersistedIndexToInstanceMap$_ = new Map(), 
            this._$_initialNonWorld$_ = [], this._$_is3dCameraEnabled$_ = !1, this._$_cam3dposition$_ = u.create(), 
            this._$_cam3dlook$_ = u.create(), this._$_cam3dup$_ = u.create(), this._$_rootLayers$_ = [], 
            this._$_allLayersFlat$_ = [], this._$_layersByName$_ = new Map(), this._$_layersBySid$_ = new Map(), 
            this._$_pendingSetHTMLLayerCount$_ = -1;
            const n = this._$_runtime$_._$GetCanvasManager$_();
            this._$_effectList$_ = T._$New$_(T._$EffectList$_, this, i[11]), this._$_effectChain$_ = T._$New$_(T._$Gfx$_._$EffectChain$_, n._$GetEffectChainManager$_(), {
                _$drawContent$_: (t, s) => {
                    const i = s._$GetContentObject$_(), e = i._$GetRenderTarget$_();
                    t._$ResetColor$_(), t._$DrawRenderTarget$_(e), t._$InvalidateRenderTarget$_(e), 
                    n._$ReleaseAdditionalRenderTarget$_(e);
                },
                _$getShaderParameters$_: t => this._$GetEffectList$_()._$_GetEffectChainShaderParametersForIndex$_(t)
            }), this._$_needsRebuildEffectChainSteps$_ = !0, this._$_wasFullScreenQualityLow$_ = !1, 
            this._$_curRenderTarget$_ = null, this._$_persistData$_ = {}, this._$_persistedIntances$_ = new Map(), 
            this._$_isFirstVisit$_ = !0, this._$_iLayout$_ = new self._$ILayout$_(this), 
            this._$_userScriptDispatcher$_ = T._$New$_(T.Event._$Dispatcher$_);
            for (const e of i[9]) this._$_rootLayers$_.push(T._$Layer$_._$CreateFromExportData$_(this, null, e));
            this._$_ReindexLayers$_();
            for (const h of this._$allLayers$_()) h._$_InitInitialInstances$_();
            for (const r of i[10]) {
                const o = this._$_runtime$_._$GetObjectClassByIndex$_(r[1]);
                if (!o) throw new Error("missing nonworld object class");
                o._$GetDefaultInstanceData$_() || o._$SetDefaultInstanceData$_(r), 
                this._$_initialNonWorld$_.push(r), this._$_AddInitialObjectClass$_(o);
            }
        }
        _$Release$_() {
            for (const t of this._$_allLayersFlat$_) t._$Release$_();
            T._$clearArray$_(this._$_allLayersFlat$_), this._$_textureLoadPendingPromises$_.clear(), 
            this._$_eventSheet$_ = null, this._$_layoutManager$_ = null, this._$_runtime$_ = null;
        }
        _$GetRuntime$_() {
            return this._$_runtime$_;
        }
        _$GetName$_() {
            return this._$_name$_;
        }
        _$GetSID$_() {
            return this._$_sid$_;
        }
        _$GetIndex$_() {
            return this._$_index$_;
        }
        _$GetEffectList$_() {
            return this._$_effectList$_;
        }
        _$GetEffectChain$_() {
            return this._$_MaybeRebuildEffectChainSteps$_(), this._$_effectChain$_;
        }
        _$_MaybeRebuildEffectChainSteps$_() {
            const t = "low" === this._$_runtime$_._$GetCanvasManager$_()._$GetCurrentFullscreenScalingQuality$_();
            if (this._$_needsRebuildEffectChainSteps$_ || this._$_wasFullScreenQualityLow$_ !== t || this._$_effectChain$_._$NeedsRebuild$_()) {
                const s = this._$GetEffectList$_()._$GetActiveEffectTypes$_();
                this._$_effectChain$_._$BuildSteps$_(s.map(t => t._$GetShaderProgram$_()), {
                    _$indexMap$_: s.map(t => t._$GetIndex$_()),
                    _$forcePostDraw$_: t,
                    _$useFullSurface$_: !0
                }), this._$_needsRebuildEffectChainSteps$_ = !1, this._$_wasFullScreenQualityLow$_ = t;
            }
        }
        _$UpdateActiveEffects$_() {
            this._$GetEffectList$_()._$UpdateActiveEffects$_(), this._$_needsRebuildEffectChainSteps$_ = !0;
        }
        _$GetMinLayerScale$_() {
            let i = this._$_allLayersFlat$_[0]._$GetNormalScale$_();
            for (let t = 1, s = this._$_allLayersFlat$_.length; t < s; ++t) {
                const e = this._$_allLayersFlat$_[t];
                0 === e._$GetParallaxX$_() && 0 === e._$GetParallaxY$_() || (i = Math.min(i, e._$GetNormalScale$_()));
            }
            return i;
        }
        _$_GetScrollBoundMarginHorizontal$_() {
            return .5 * this._$_runtime$_._$GetViewportWidth$_() / this._$GetMinLayerScale$_();
        }
        _$_GetScrollBoundMarginVertical$_() {
            return .5 * this._$_runtime$_._$GetViewportHeight$_() / this._$GetMinLayerScale$_();
        }
        _$GetScrollLeftBound$_() {
            return this._$IsUnboundedScrolling$_() ? -1 / 0 : this._$_GetScrollBoundMarginHorizontal$_();
        }
        _$GetScrollRightBound$_() {
            return this._$IsUnboundedScrolling$_() ? 1 / 0 : this._$GetWidth$_() - this._$_GetScrollBoundMarginHorizontal$_();
        }
        _$GetScrollTopBound$_() {
            return this._$IsUnboundedScrolling$_() ? -1 / 0 : this._$_GetScrollBoundMarginVertical$_();
        }
        _$GetScrollBottomBound$_() {
            return this._$IsUnboundedScrolling$_() ? 1 / 0 : this._$GetHeight$_() - this._$_GetScrollBoundMarginVertical$_();
        }
        _$SetScrollX$_(t) {
            const s = this._$GetScrollLeftBound$_(), i = this._$GetScrollRightBound$_();
            this._$_scrollX$_ !== (t = (t = i < t ? i : t) < s ? s : t) && (this._$_scrollX$_ = t, 
            this._$_SetAllLayersMVChanged$_(), this._$_runtime$_._$UpdateRender$_());
        }
        _$GetScrollX$_() {
            return this._$_scrollX$_;
        }
        _$SetScrollY$_(t) {
            const s = this._$GetScrollTopBound$_(), i = this._$GetScrollBottomBound$_();
            this._$_scrollY$_ !== (t = (t = i < t ? i : t) < s ? s : t) && (this._$_scrollY$_ = t, 
            this._$_SetAllLayersMVChanged$_(), this._$_runtime$_._$UpdateRender$_());
        }
        _$GetScrollY$_() {
            return this._$_scrollY$_;
        }
        _$IsUnboundedScrolling$_() {
            return this._$_isUnboundedScrolling$_;
        }
        _$BoundScrolling$_() {
            this._$SetScrollX$_(this._$GetScrollX$_()), this._$SetScrollY$_(this._$GetScrollY$_());
            for (const t of this._$_allLayersFlat$_) t._$IsOwnScrollPositionEnabled$_() && (t._$SetScrollX$_(t._$GetScrollX$_()), 
            t._$SetScrollY$_(t._$GetScrollY$_()));
        }
        _$SetVanishingPointXY$_(t, s) {
            this._$_vanishingPointX$_ === t && this._$_vanishingPointY$_ === s || (this._$_vanishingPointX$_ = t, 
            this._$_vanishingPointY$_ = s, this._$IsPerspectiveProjection$_() && (this._$_SetAllLayersProjectionChanged$_(), 
            this._$_SetAllLayersMVChanged$_(), this._$_runtime$_._$UpdateRender$_()));
        }
        _$GetVanishingPointX$_() {
            return this._$IsOrthographicProjection$_() ? .5 : this._$_vanishingPointX$_;
        }
        _$GetVanishingPointY$_() {
            return this._$IsOrthographicProjection$_() ? .5 : this._$_vanishingPointY$_;
        }
        _$HasVanishingPointOutsideViewport$_() {
            const t = this._$GetVanishingPointX$_(), s = this._$GetVanishingPointY$_();
            return t < 0 || 1 < t || s < 0 || 1 < s;
        }
        _$SetPerspectiveProjection$_() {
            this._$_isOrthographicProjection$_ && (this._$_isOrthographicProjection$_ = !1, 
            this._$_SetAllLayersProjectionChanged$_(), this._$_SetAllLayersMVChanged$_(), 
            this._$_runtime$_._$UpdateRender$_());
        }
        _$SetOrthographicProjection$_() {
            this._$_isOrthographicProjection$_ || (this._$_isOrthographicProjection$_ = !0, 
            this._$_SetAllLayersProjectionChanged$_(), this._$_SetAllLayersMVChanged$_(), 
            this._$_runtime$_._$UpdateRender$_());
        }
        _$IsOrthographicProjection$_() {
            return this._$_isOrthographicProjection$_;
        }
        _$IsPerspectiveProjection$_() {
            return !this._$IsOrthographicProjection$_();
        }
        _$Set3DCameraEnabled$_(t) {
            this._$_is3dCameraEnabled$_ !== (t = !!t) && (this._$_is3dCameraEnabled$_ = t, 
            this._$_SetAllLayersMVChanged$_(), this._$_runtime$_._$UpdateRender$_());
        }
        _$Is3DCameraEnabled$_() {
            return this._$_is3dCameraEnabled$_;
        }
        _$Set3DCameraOrientation$_(t, s, i, e, n, h, r, o, a) {
            l(this._$_cam3dposition$_, t, s, i) && l(this._$_cam3dlook$_, e, n, h) && l(this._$_cam3dup$_, r, o, a) || (u.set(this._$_cam3dposition$_, t, s, i), 
            u.set(this._$_cam3dlook$_, e, n, h), u.set(this._$_cam3dup$_, r, o, a), 
            this._$Set3DCameraChanged$_());
        }
        _$Set3DCameraChanged$_() {
            this._$_SetAllLayersMVChanged$_(), this._$_runtime$_._$UpdateRender$_();
        }
        _$Get3DCameraPosition$_() {
            return this._$_cam3dposition$_;
        }
        _$Get3DCameraLookAt$_() {
            return this._$_cam3dlook$_;
        }
        _$Get3DCameraUpVector$_() {
            return this._$_cam3dup$_;
        }
        _$GetScale$_() {
            return this._$_scale$_;
        }
        _$SetScale$_(t) {
            this._$_scale$_ !== t && (this._$_scale$_ = t, this._$_SetAllLayersMVChanged$_(), 
            this._$BoundScrolling$_(), this._$_runtime$_._$UpdateRender$_());
        }
        _$SetAngle$_(t) {
            t = T._$clampAngle$_(t), this._$_angle$_ !== t && (this._$_angle$_ = t, 
            this._$_SetAllLayersMVChanged$_(), this._$_runtime$_._$UpdateRender$_());
        }
        _$GetAngle$_() {
            return this._$_angle$_;
        }
        _$GetWidth$_() {
            return this._$_width$_;
        }
        _$SetWidth$_(t) {
            !isFinite(t) || t < 1 || (this._$_width$_ = t);
        }
        _$GetHeight$_() {
            return this._$_height$_;
        }
        _$SetHeight$_(t) {
            !isFinite(t) || t < 1 || (this._$_height$_ = t);
        }
        _$GetEventSheet$_() {
            return this._$_eventSheet$_;
        }
        _$_GetRootLayers$_() {
            return this._$_rootLayers$_;
        }
        *_$allLayers$_() {
            for (const t of this._$_rootLayers$_) yield* t._$selfAndAllSubLayers$_();
        }
        _$GetLayers$_() {
            return this._$_allLayersFlat$_;
        }
        _$GetLayerCount$_() {
            return this._$_allLayersFlat$_.length;
        }
        _$GetLayer$_(t) {
            return "number" == typeof t ? this._$GetLayerByIndex$_(t) : this._$GetLayerByName$_(t.toString());
        }
        _$GetLayerByIndex$_(t) {
            return t = T._$clamp$_(Math.floor(t), 0, this._$_allLayersFlat$_.length - 1), 
            this._$_allLayersFlat$_[t];
        }
        _$GetLayerByName$_(t) {
            return this._$_layersByName$_.get(t.toLowerCase()) || null;
        }
        _$HasLayerByName$_(t) {
            return !!this._$GetLayerByName$_(t);
        }
        _$GetLayerBySID$_(t) {
            return this._$_layersBySid$_.get(t) || null;
        }
        _$_SetAllLayersProjectionChanged$_() {
            for (const t of this._$_allLayersFlat$_) t._$_SetProjectionMatrixChanged$_();
        }
        _$_SetAllLayersMVChanged$_() {
            for (const t of this._$_allLayersFlat$_) t._$_SetMVMatrixChanged$_();
        }
        _$AddLayer$_(t, s, i) {
            if (this._$HasLayerByName$_(t)) throw new Error(`layer name '${t}' already in use`);
            if (!s && i < 2) throw new Error("invalid insert position");
            const e = 2 <= i ? s : s._$GetParentLayer$_(), n = T._$New$_(T._$Layer$_, this, e, {
                name: t,
                sid: Math.floor(1e15 * Math.random()),
                _$isDynamic$_: !0
            });
            this._$_InsertLayer$_(n, s, i), this._$GetRuntime$_()._$UpdateRender$_(), 
            this._$_ReindexAndUpdateAllLayers$_();
        }
        _$MoveLayer$_(t, s, i) {
            if (!s && i < 2) throw new Error("invalid insert position");
            t === s && i < 2 || (this._$_RemoveLayer$_(t), this._$_InsertLayer$_(t, s, i), 
            this._$GetRuntime$_()._$UpdateRender$_(), this._$_ReindexAndUpdateAllLayers$_());
        }
        _$RemoveLayer$_(t) {
            if (this._$_RemoveLayer$_(t)) {
                const s = this._$_runtime$_._$GetEventSheetManager$_();
                s._$BlockFlushingInstances$_(!0), t._$Release$_(), s._$BlockFlushingInstances$_(!1), 
                this._$GetRuntime$_()._$UpdateRender$_(), this._$_ReindexAndUpdateAllLayers$_();
            }
        }
        _$RemoveAllDynamicLayers$_() {
            const t = new Set();
            for (const s of this._$allLayers$_()) s._$IsDynamic$_() && !s._$HasAnyDynamicParentLayer$_() && t.add(s);
            if (0 !== t.size) {
                const i = this._$_runtime$_._$GetEventSheetManager$_();
                i._$BlockFlushingInstances$_(!0);
                for (const e of t) this._$_RemoveLayer$_(e), e._$Release$_();
                i._$BlockFlushingInstances$_(!1), this._$GetRuntime$_()._$UpdateRender$_(), 
                this._$_ReindexAndUpdateAllLayers$_();
            }
        }
        _$_InsertLayer$_(s, i, e) {
            if (2 <= e) if (i) {
                if (i === s || i._$HasParentLayer$_(s)) throw new Error(`cannot move layer '${s._$GetName$_()}' to sub-layer of itself`);
                i._$_AddSubLayer$_(s, 2 === e), s._$_SetParentLayer$_(i);
            } else 2 === e ? this._$_rootLayers$_.push(s) : this._$_rootLayers$_.unshift(s), 
            s._$_SetParentLayer$_(null); else {
                const t = i._$GetParentLayer$_();
                if (t) {
                    if (i._$HasParentLayer$_(s)) throw new Error(`cannot move layer '${s._$GetName$_()}' to sub-layer of itself`);
                    t._$_InsertSubLayer$_(s, i, 0 === e), s._$_SetParentLayer$_(t);
                } else {
                    let t = this._$_rootLayers$_.indexOf(i);
                    if (-1 === t) throw new Error("cannot find layer to insert by");
                    0 === e && ++t, this._$_rootLayers$_.splice(t, 0, s), s._$_SetParentLayer$_(null);
                }
            }
        }
        _$_RemoveLayer$_(t) {
            const s = t._$GetParentLayer$_();
            if (s) return s._$_RemoveSubLayer$_(t), !0;
            if (1 < this._$_rootLayers$_.length) {
                const i = this._$_rootLayers$_.indexOf(t);
                if (-1 === i) throw new Error("cannot find layer to remove");
                return this._$_rootLayers$_.splice(i, 1), !0;
            }
            return !1;
        }
        _$_ReindexLayers$_() {
            this._$_allLayersFlat$_ = [ ...this._$allLayers$_() ], this._$_layersByName$_.clear(), 
            this._$_layersBySid$_.clear();
            for (let t = 0, s = this._$_allLayersFlat$_.length; t < s; ++t) {
                const i = this._$_allLayersFlat$_[t];
                i._$_SetIndex$_(t), this._$_layersByName$_.set(i._$GetName$_().toLowerCase(), i), 
                this._$_layersBySid$_.set(i._$GetSID$_(), i);
            }
        }
        _$_ReindexHTMLLayers$_() {
            let t = 0;
            for (const s of this._$_rootLayers$_) {
                for (const i of s._$selfAndAllSubLayers$_()) i._$_SetHTMLIndex$_(t);
                s._$IsHTMLElementsLayer$_() && t++;
            }
        }
        _$GetHTMLLayerCount$_() {
            return this._$_rootLayers$_.at(-1)._$GetHTMLIndex$_() + 1;
        }
        async _$_ReindexAndUpdateAllLayers$_() {
            this._$_ReindexLayers$_(), this._$_ReindexHTMLLayers$_(), this._$_pendingSetHTMLLayerCount$_ = this._$GetHTMLLayerCount$_();
        }
        _$_GetPendingSetHTMLLayerCount$_() {
            return this._$_pendingSetHTMLLayerCount$_;
        }
        _$_ResetPendingHTMLLayerCount$_() {
            this._$_pendingSetHTMLLayerCount$_ = -1;
        }
        _$GetRootLayersForHTMLLayer$_(t) {
            const s = [];
            for (const i of this._$_rootLayers$_) {
                const e = i._$GetHTMLIndex$_();
                if (e === t) s.push(i); else if (t < e) break;
            }
            return s;
        }
        _$SaveTransform$_() {
            return {
                scrollX: this._$GetScrollX$_(),
                scrollY: this._$GetScrollY$_(),
                scale: this._$GetScale$_(),
                angle: this._$GetAngle$_(),
                vpX: this._$GetVanishingPointX$_(),
                vpY: this._$GetVanishingPointY$_()
            };
        }
        _$RestoreTransform$_(t) {
            this._$SetScrollX$_(t.scrollX), this._$SetScrollY$_(t.scrollY), this._$SetScale$_(t.scale), 
            this._$SetAngle$_(t.angle), this._$SetVanishingPointXY$_(t.vpX, t.vpY);
        }
        _$GetLayoutBackgroundColor$_() {
            let t = this._$_rootLayers$_.filter(t => t._$ShouldDraw$_())[0];
            for (;t; ) {
                if (!t._$IsTransparent$_()) return b._$copyRgb$_(t._$GetBackgroundColor$_()), 
                b._$setA$_(1), b;
                if (t._$UsesOwnTexture$_()) return b._$setRgba$_(0, 0, 0, 0), b;
                t = t._$GetSubLayers$_().filter(t => t._$ShouldDraw$_())[0];
            }
            return b._$setRgba$_(0, 0, 0, 0), b;
        }
        _$IsFirstVisit$_() {
            return this._$_isFirstVisit$_;
        }
        _$_GetInitialObjectClasses$_() {
            return [ ...this._$_initialObjectClasses$_ ];
        }
        _$_AddInitialObjectClass$_(t) {
            if (t._$IsInContainer$_()) for (const s of t._$GetContainer$_()._$GetObjectTypes$_()) this._$_initialObjectClasses$_.add(s); else this._$_initialObjectClasses$_.add(t);
        }
        _$_GetTextureLoadedObjectTypes$_() {
            return [ ...this._$_textureLoadedTypes$_ ];
        }
        _$_Load$_(t, s) {
            if (t === this || !s) return Promise.resolve();
            t && (T._$CopySet$_(this._$_textureLoadedTypes$_, t._$_textureLoadedTypes$_), 
            t._$_textureLoadedTypes$_.clear());
            const i = [];
            for (const e of this._$_initialObjectClasses$_) this._$_textureLoadedTypes$_.has(e) || (i.push(e._$LoadTextures$_(s)), 
            this._$_textureLoadedTypes$_.add(e));
            return Promise.all(i);
        }
        async _$MaybeLoadTexturesFor$_(t) {
            if (t._$IsFamily$_()) throw new Error("cannot load textures for family");
            const s = this._$_runtime$_._$GetRenderer$_();
            if (s && !s._$IsContextLost$_() && !this._$_textureLoadedTypes$_.has(t)) {
                this._$_textureLoadedTypes$_.add(t);
                const i = t._$LoadTextures$_(s);
                this._$_AddPendingTextureLoadPromise$_(i), await i, t._$OnDynamicTextureLoadComplete$_(), 
                this._$_runtime$_._$UpdateRender$_();
            }
        }
        _$_AddPendingTextureLoadPromise$_(t) {
            this._$_textureLoadPendingPromises$_.add(t), t.then(() => this._$_textureLoadPendingPromises$_.delete(t)).catch(() => this._$_textureLoadPendingPromises$_.delete(t));
        }
        _$WaitForPendingTextureLoadsToComplete$_() {
            return Promise.all([ ...this._$_textureLoadPendingPromises$_ ]);
        }
        _$MaybeUnloadTexturesFor$_(t) {
            if (t._$IsFamily$_() || 0 < t._$GetInstanceCount$_()) throw new Error("cannot unload textures");
            const s = this._$_runtime$_._$GetRenderer$_();
            s && this._$_textureLoadedTypes$_.has(t) && (this._$_textureLoadedTypes$_.delete(t), 
            t._$ReleaseTextures$_(s));
        }
        _$_Unload$_(t, s) {
            if (t !== this && s) for (const i of this._$_textureLoadedTypes$_) i._$IsGlobal$_() || t._$_initialObjectClasses$_.has(i) || (i._$ReleaseTextures$_(), 
            this._$_textureLoadedTypes$_.delete(i));
        }
        _$_OnRendererContextLost$_() {
            this._$_textureLoadedTypes$_.clear();
        }
        async _$_StartRunning$_(t) {
            const s = this._$_runtime$_, i = this._$_layoutManager$_, e = s._$GetEventSheetManager$_(), n = (this._$_eventSheetName$_ && (this._$_eventSheet$_ = e._$GetEventSheetByName$_(this._$_eventSheetName$_), 
            this._$_eventSheet$_._$_UpdateDeepIncludes$_()), i._$_SetMainRunningLayout$_(this), 
            this._$_width$_ = this._$_originalWidth$_, this._$_height$_ = this._$_originalHeight$_, 
            this._$_scrollX$_ = s._$GetOriginalViewportWidth$_() / 2, this._$_scrollY$_ = s._$GetOriginalViewportHeight$_() / 2, 
            this._$BoundScrolling$_(), this._$_SetAllLayersProjectionChanged$_(), 
            this._$_SetAllLayersMVChanged$_(), this._$_ReindexHTMLLayers$_(), await this._$_runtime$_._$GetCanvasManager$_()._$SetHTMLLayerCount$_(this._$GetHTMLLayerCount$_(), !0), 
            this._$_MoveGlobalObjectsToThisLayout$_(t), this._$_runtime$_._$SetUsingCreatePromises$_(!0), 
            this._$_CreateInitialInstances$_(), this._$_isFirstVisit$_ || this._$_CreatePersistedInstances$_(), 
            this._$_CreateAndLinkContainerInstances$_(this._$_createdInstances$_), 
            this._$_CreateAndLinkContainerInstances$_(this._$_createdPersistedInstances$_), 
            this._$_CreateInitialNonWorldInstances$_(), i._$ClearPendingChangeLayout$_(), 
            s._$FlushPendingInstances$_(), this._$_runtime$_._$SetUsingCreatePromises$_(!1), 
            this._$_runtime$_._$GetCreatePromises$_());
            if (await Promise.all(n), T._$clearArray$_(n), !s._$IsLoadingState$_()) {
                for (const h of this._$_createdInstances$_) h._$SetupInitialSceneGraphConnections$_();
                for (const r of this._$_createdPersistedInstances$_) r._$SetupPersistedSceneGraphConnections$_(this._$_createdPersistedInstancesToDataMap$_, this._$_createdPersistedIndexToInstanceMap$_);
                for (const [ o, a ] of Object.entries(this._$_persistData$_)) {
                    const l = this._$_runtime$_._$GetObjectClassBySID$_(parseInt(o, 10));
                    l && !l._$IsFamily$_() && l._$HasPersistBehavior$_() && T._$clearArray$_(a);
                }
                for (const u of this._$_createdInstances$_) u._$_TriggerOnCreated$_();
                for (const c of this._$_createdPersistedInstances$_) c._$_TriggerOnCreated$_();
                for (const f of this._$_createdInstances$_) f._$HasParent$_() || f._$_OnHierarchyReady$_();
                for (const d of this._$_createdPersistedInstances$_) d._$HasParent$_() || d._$_OnHierarchyReady$_();
            }
            T._$clearArray$_(this._$_createdInstances$_), T._$clearArray$_(this._$_createdPersistedInstances$_), 
            this._$_createdPersistedInstancesToDataMap$_.clear(), this._$_createdPersistedIndexToInstanceMap$_.clear(), 
            await Promise.all([ ...this._$_initialObjectClasses$_ ].map(t => t._$PreloadTexturesWithInstances$_(this._$_runtime$_._$GetRenderer$_()))), 
            t && (s._$Dispatcher$_().dispatchEvent(new T.Event("beforefirstlayoutstart")), 
            await s._$DispatchUserScriptEventAsyncWait$_(new T.Event("beforeprojectstart"))), 
            await this._$DispatchRuntimeUserScriptEventAsyncWait$_(new T.Event("beforeanylayoutstart")), 
            s._$Dispatcher$_().dispatchEvent(new T.Event("beforelayoutstart")), 
            await this._$DispatchUserScriptEventAsyncWait$_(new T.Event("beforelayoutstart")), 
            s._$IsLoadingState$_() || await s._$TriggerAsync$_(T._$Plugins$_._$System$_._$Cnds$_._$OnLayoutStart$_, null, null), 
            s._$Dispatcher$_().dispatchEvent(new T.Event("afterlayoutstart")), await this._$DispatchUserScriptEventAsyncWait$_(new T.Event("afterlayoutstart")), 
            await this._$DispatchRuntimeUserScriptEventAsyncWait$_(new T.Event("afteranylayoutstart")), 
            t && (s._$Dispatcher$_().dispatchEvent(new T.Event("afterfirstlayoutstart")), 
            await s._$DispatchUserScriptEventAsyncWait$_(new T.Event("afterprojectstart"))), 
            e._$_RunQueuedTriggers$_(i), await this._$WaitForPendingTextureLoadsToComplete$_(), 
            this._$_isFirstVisit$_ = !1;
        }
        _$_MoveGlobalObjectsToThisLayout$_(t) {
            for (const s of this._$_runtime$_._$GetAllObjectClasses$_()) if (!s._$IsFamily$_() && s._$IsWorldType$_()) for (const i of s._$GetInstances$_()) {
                const e = i._$GetWorldInfo$_(), n = e._$GetLayer$_(), h = T._$clamp$_(n._$GetIndex$_(), 0, this._$_allLayersFlat$_.length - 1), r = this._$_allLayersFlat$_[h];
                e._$_SetLayer$_(r, !0), r._$_MaybeAddInstance$_(i);
            }
            if (!t) for (const o of this._$_allLayersFlat$_) o._$_SortInstancesByLastCachedZIndex$_(!1);
        }
        _$_CreateInitialInstances$_() {
            for (const t of this._$_allLayersFlat$_) t._$CreateInitialInstances$_(this._$_createdInstances$_), 
            t._$_Start$_();
        }
        _$_CreatePersistedInstances$_() {
            let s = !1;
            for (const [ t, i ] of Object.entries(this._$_persistData$_)) {
                const e = this._$_runtime$_._$GetObjectClassBySID$_(parseInt(t, 10));
                if (e && !e._$IsFamily$_() && e._$HasPersistBehavior$_()) for (const n of i) {
                    let t = null;
                    if (!e._$IsWorldType$_() || (t = n.hasOwnProperty("instJson") ? this._$GetLayerBySID$_(n.instJson.w.l) : this._$GetLayerBySID$_(n.w.l))) {
                        const h = this._$_runtime$_._$CreateInstanceFromData$_(e, t, !1, 0, 0, !0);
                        n.hasOwnProperty("instJson") ? h._$LoadFromJson$_(n.instJson) : h._$LoadFromJson$_(n), 
                        s = !0, this._$_createdPersistedInstances$_.push(h), n.hasOwnProperty("instJson") && (this._$_createdPersistedInstancesToDataMap$_.set(h, n), 
                        this._$_createdPersistedIndexToInstanceMap$_.set(n.index, h));
                    }
                }
            }
            for (const r of this._$_allLayersFlat$_) r._$_SortInstancesByLastCachedZIndex$_(!0), 
            r._$SetZIndicesChanged$_();
            s && (this._$_runtime$_._$FlushPendingInstances$_(), this._$_runtime$_._$_RefreshUidMap$_());
        }
        _$_CreateAndLinkContainerInstances$_(s) {
            for (const i of s) if (i._$IsInContainer$_()) {
                const e = i._$GetWorldInfo$_(), t = i._$GetIID$_();
                for (const n of i._$GetObjectClass$_()._$GetContainer$_()._$objectTypes$_()) if (n !== i._$GetObjectClass$_()) {
                    const h = n._$GetInstances$_();
                    if (h.length > t) i._$_AddSibling$_(h[t]); else {
                        let t;
                        t = e ? this._$_runtime$_._$CreateInstanceFromData$_(n, e._$GetLayer$_(), !0, e._$GetX$_(), e._$GetY$_(), !0) : this._$_runtime$_._$CreateInstanceFromData$_(n, null, !0, 0, 0, !0), 
                        this._$_runtime$_._$FlushPendingInstances$_(), n._$_UpdateIIDs$_(), 
                        i._$_AddSibling$_(t), s.push(t);
                    }
                }
            }
        }
        _$_CreateInitialNonWorldInstances$_() {
            for (const t of this._$_initialNonWorld$_) {
                const s = this._$_runtime$_._$GetObjectClassByIndex$_(t[1]);
                s._$IsInContainer$_() || this._$_runtime$_._$CreateInstanceFromData$_(t, null, !0);
            }
        }
        _$_CreateGlobalNonWorlds$_() {
            let i = [], e = this._$_initialNonWorld$_, n = 0;
            for (let t = 0, s = e.length; t < s; ++t) {
                const h = e[t], r = this._$_runtime$_._$GetObjectClassByIndex$_(h[1]);
                r._$IsGlobal$_() ? r._$IsInContainer$_() && r._$GetContainer$_()._$HasAnyWorldType$_() || i.push(this._$_runtime$_._$CreateInstanceFromData$_(h, null, !0)) : (e[n] = h, 
                ++n);
            }
            T._$truncateArray$_(e, n), this._$_runtime$_._$FlushPendingInstances$_(), 
            this._$_CreateAndLinkContainerInstances$_(i);
        }
        _$RecreateInitialObjects$_(t, s, i, e, n, h, r) {
            if (i) return i._$RecreateInitialObjects$_(t, s, n, h, e, r);
            {
                const o = [];
                for (const a of this._$_allLayersFlat$_) o.push(a._$RecreateInitialObjects$_(t, s, n, h, e, r));
                return o.flat();
            }
        }
        async _$_StopRunning$_() {
            const t = this._$_layoutManager$_;
            this._$_runtime$_._$IsLoadingState$_() || (await this._$DispatchRuntimeUserScriptEventAsyncWait$_(new T.Event("beforeanylayoutend")), 
            await this._$DispatchUserScriptEventAsyncWait$_(new T.Event("beforelayoutend")), 
            await this._$_runtime$_._$TriggerAsync$_(T._$Plugins$_._$System$_._$Cnds$_._$OnLayoutEnd$_, null, null), 
            await this._$DispatchUserScriptEventAsyncWait$_(new T.Event("afterlayoutend")), 
            await this._$DispatchRuntimeUserScriptEventAsyncWait$_(new T.Event("afteranylayoutend"))), 
            t._$SetIsEndingLayout$_(!0), this._$_runtime$_._$GetEventSheetManager$_()._$ClearAllScheduledWaits$_(), 
            this._$_isFirstVisit$_ || this._$_SavePersistData$_();
            for (const s of this._$_allLayersFlat$_) s._$_End$_();
            for (const i of this._$_runtime$_._$GetAllObjectClasses$_()) if (!(i._$IsGlobal$_() || i._$IsWorldType$_() || i._$GetPlugin$_()._$IsSingleGlobal$_() || i._$IsFamily$_())) {
                for (const e of i._$GetInstances$_()) this._$_runtime$_._$DestroyInstance$_(e);
                this._$_runtime$_._$FlushPendingInstances$_();
            }
            t._$SetIsEndingLayout$_(!1), t._$GetMainRunningLayout$_() === this && t._$_SetMainRunningLayout$_(null);
        }
        _$_SaveInstanceToPersist$_(t, s) {
            const i = t._$GetObjectClass$_()._$GetSID$_().toString(), e = (this._$_persistData$_.hasOwnProperty(i) || (this._$_persistData$_[i] = []), 
            this._$_persistData$_[i]), n = {
                index: s,
                instJson: t._$SaveToJson$_(),
                sceneGraphJson: {
                    children: []
                }
            };
            e.push(n), this._$_persistedIntances$_.set(t, n);
        }
        _$_SaveSceneGraphInfoToPersist$_(t) {
            const s = this._$_persistedIntances$_.get(t);
            for (const i of t._$GetChildren$_()) {
                const e = this._$_persistedIntances$_.get(i);
                e && s.sceneGraphJson.children.push({
                    index: e.index,
                    flags: T._$SceneGraphInfo$_._$_GetFlagsNumber$_(i._$GetWorldInfo$_())
                });
            }
        }
        _$_SavePersistData$_() {
            this._$_persistedIntances$_.clear();
            let t = 0;
            for (const s of this._$_allLayersFlat$_) {
                s._$_UpdateZIndices$_();
                for (const i of s._$_GetInstances$_()) {
                    const e = i._$GetObjectClass$_();
                    !e._$IsGlobal$_() && e._$HasPersistBehavior$_() && (this._$_SaveInstanceToPersist$_(i, t), 
                    t++);
                }
            }
            for (const n of this._$_allLayersFlat$_) for (const h of n._$_GetInstances$_()) {
                const r = h._$GetObjectClass$_();
                !r._$IsGlobal$_() && r._$HasPersistBehavior$_() && this._$_SaveSceneGraphInfoToPersist$_(h);
            }
            this._$_persistedIntances$_.clear();
        }
        _$ResetPersistData$_() {
            this._$_persistData$_ = {}, this._$_isFirstVisit$_ = !0;
        }
        _$GetRenderTarget$_() {
            return this._$_curRenderTarget$_;
        }
        _$UsesOwnTexture$_() {
            const t = this._$_runtime$_, s = t._$GetRenderer$_()._$IsWebGL$_();
            return "low" === t._$GetCanvasManager$_()._$GetCurrentFullscreenScalingQuality$_() || s && t._$UsesAnyBackgroundBlending$_() || this._$_effectList$_._$HasAnyActiveEffect$_() || s && t._$Uses3DFeatures$_();
        }
        _$_MaybeStartDrawToOwnTexture$_(t) {
            const s = this._$_runtime$_._$GetCanvasManager$_();
            if (this._$UsesOwnTexture$_()) {
                t._$SetRenderTarget$_(null), t._$ClearRgba$_(0, 0, 0, 0);
                const i = {
                    _$sampling$_: this._$_runtime$_._$GetSampling$_(),
                    _$isSampled$_: t._$IsWebGPU$_() || this._$_runtime$_._$UsesAnyBackgroundBlending$_() || this._$_effectList$_._$HasAnyActiveEffect$_(),
                    _$canReadPixels$_: !!t._$IsWebGPU$_() && this._$_runtime$_._$UsesAnyBackgroundBlending$_()
                };
                "low" === s._$GetCurrentFullscreenScalingQuality$_() && (i.width = s._$GetDrawWidth$_(), 
                i.height = s._$GetDrawHeight$_()), this._$_curRenderTarget$_ = this._$_runtime$_._$GetAdditionalRenderTarget$_(i);
            } else this._$_curRenderTarget$_ = null;
        }
        _$_MaybeCopyOwnTextureToBackbuffer$_(t) {
            this._$_runtime$_._$_NeedsHTMLLayerCompositing$_(t) && (t._$SetDepthEnabled$_(!1), 
            t._$SetRenderTarget$_(null), t._$SetTextureFillMode$_(), t._$CopyRenderTarget$_(this._$_curRenderTarget$_));
        }
        _$_MaybeEndDrawToOwnTexture$_(t) {
            this._$UsesOwnTexture$_() && (t._$SetDepthEnabled$_(!1), this._$_DrawLayoutOwnTextureToRenderTarget$_(t, this._$_curRenderTarget$_));
        }
        _$DrawMain$_(t) {
            t._$SetRenderTarget$_(this._$_curRenderTarget$_), t._$Clear$_(this._$GetLayoutBackgroundColor$_()), 
            this._$_runtime$_._$Uses3DFeatures$_() && t._$ClearDepth$_();
            const s = this._$GetRootLayersForHTMLLayer$_(0);
            this._$_DrawLayerList$_(t, this._$_curRenderTarget$_, s, !0), t._$IsWebGPU$_() && t.StartMeasuringRenderPassTime(0, 1), 
            this._$_MaybeEndDrawToOwnTexture$_(t), this._$_curRenderTarget$_ = null;
        }
        _$DrawForHTMLLayerIndex$_(t, s) {
            let i = null;
            this._$_runtime$_._$_NeedsHTMLLayerCompositing$_(t) && (i = this._$_curRenderTarget$_), 
            t._$SetRenderTarget$_(i), t._$ClearRgba$_(0, 0, 0, 0), this._$_runtime$_._$Uses3DFeatures$_() && t._$ClearDepth$_();
            const e = this._$GetRootLayersForHTMLLayer$_(s);
            this._$_DrawLayerList$_(t, i, e, !0), this._$_MaybeCopyOwnTextureToBackbuffer$_(t), 
            t._$EndBatch$_(), this._$_runtime$_._$GetCanvasManager$_()._$BlitMainCanvasToHTMLLayerCanvas$_(s);
        }
        _$_DrawLayerList$_(t, e, s, n) {
            const h = s.filter(t => t._$ShouldDraw$_());
            for (let s = 0, i = h.length; s < i; ) {
                const r = h[s];
                if (r._$SelfAndAllSubLayersHave3DCamera$_() && !r._$SelfOrAnySubLayerUsesOwnTexture$_()) {
                    a.push(r);
                    for (let t = s + 1; t < i; ++t) {
                        const o = h[t];
                        if (!o._$SelfAndAllSubLayersHave3DCamera$_() || o._$SelfOrAnySubLayerUsesOwnTexture$_()) break;
                        a.push(h[t]);
                    }
                    if (2 <= a.length || 1 === a.length && a[0]._$HasAnyVisibleSubLayer$_()) {
                        this._$_Draw3DLayers$_(t, e, a), s += a.length, T._$clearArray$_(a);
                        continue;
                    }
                    T._$clearArray$_(a);
                }
                r._$Draw$_(t, e, n && 0 === s), ++s;
            }
        }
        _$_DrawLayoutOwnTextureToRenderTarget$_(t, s) {
            const i = this._$_effectList$_._$GetActiveEffectTypes$_(), e = this._$_runtime$_;
            0 === i.length ? (t._$SetRenderTarget$_(null), t._$SetTextureFillMode$_(), 
            t._$CopyRenderTarget$_(s), t._$InvalidateRenderTarget$_(s), e._$ReleaseAdditionalRenderTarget$_(s)) : (n.set(0, 0, e._$GetViewportWidth$_(), e._$GetViewportHeight$_()), 
            this._$GetEffectChain$_()._$Render$_(t, null, {
                _$contentObject$_: this,
                _$blendMode$_: 3,
                devicePixelRatio: this._$_runtime$_._$GetEffectDevicePixelRatioParam$_(),
                _$layerScale$_: this._$_runtime$_._$GetEffectLayerScaleParam$_() * this._$GetScale$_(),
                _$layerAngle$_: this._$GetAngle$_(),
                _$layoutRect$_: n,
                _$drawSurfaceRect$_: null,
                _$invalidateRenderTargets$_: !0
            }));
        }
        _$_Draw3DLayers$_(e, n, t) {
            t[0]._$IsTransparent$_() || (b._$copyRgb$_(t[0]._$GetBackgroundColor$_()), 
            b._$setA$_(1), e._$Clear$_(b)), this._$_runtime$_._$GetCanvasManager$_(), 
            e._$SetDepthEnabled$_(!0);
            const h = v, r = C, o = G;
            for (const a of t) a._$_UpdateZIndices$_(), a._$_AppendAllInstancesIncludingSubLayersInDrawOrder$_(h);
            const s = t[0], i = s._$_MaybeStartWebGLProfiling$_(e);
            s._$_MaybeStartWebGPUProfiling$_(e);
            for (let s = 0, i = h.length; s < i; ) {
                const l = h[s], u = l._$GetWorldInfo$_(), c = u._$GetLayer$_();
                if (u._$IsVisible$_() && u._$IsInViewport3D$_(c._$_GetViewFrustum$_())) {
                    (!l._$RendersToOwnZPlane$_() || 0 < u._$GetDepth$_()) && o.push(l);
                    const f = l._$GetWorldInfo$_()._$GetTotalZElevation$_();
                    r.push(l);
                    let t = s + 1;
                    for (;t < i; ++t) {
                        const d = h[t], p = d._$GetWorldInfo$_();
                        if (p._$IsVisible$_() && p._$IsInViewport3D$_(p._$GetLayer$_()._$_GetViewFrustum$_())) {
                            if (p._$GetTotalZElevation$_() !== f) break;
                            (d._$RendersToOwnZPlane$_() ? (0 < p._$GetDepth$_() && o.push(d), 
                            r) : o).push(d);
                        }
                    }
                    if (1 !== r.length || r[0]._$MustMitigateZFighting$_()) {
                        this._$_Draw3DLayersCoplanarInstances$_(e, n, r);
                        for (let t = 0, s = o.length; t < s; ++t) {
                            const m = o[t], g = m._$GetWorldInfo$_(), y = g._$GetLayer$_();
                            g._$_SetDrawNonBackFacesOnly$_(!0), S(y, e), y._$_DrawInstanceMaybeWithEffects$_(m, g, e, n), 
                            g._$_SetDrawNonBackFacesOnly$_(!1);
                        }
                    } else {
                        S(c, e), c._$_DrawInstanceMaybeWithEffects$_(l, u, e, n);
                        for (let t = 0, s = o.length; t < s; ++t) {
                            const M = o[t];
                            if (M !== l) {
                                const w = M._$GetWorldInfo$_(), x = w._$GetLayer$_();
                                S(x, e), x._$_DrawInstanceMaybeWithEffects$_(M, w, e, n);
                            }
                        }
                    }
                    s = t, T._$clearArray$_(r), T._$clearArray$_(o);
                } else ++s;
            }
            i && e._$EndQuery$_(i), T._$clearArray$_(h), I = null;
        }
        _$_Draw3DLayersCoplanarInstances$_(i, e, n) {
            i._$CoplanarStartStencilPass$_();
            for (let t = 0, s = n.length; t < s; ++t) {
                const h = n[t], r = h._$GetWorldInfo$_(), o = r._$GetLayer$_();
                r._$_SetDrawBackFaceOnly$_(!0), S(o, i), o._$_DrawInstance$_(h, r, i);
            }
            i._$CoplanarStartColorPass$_();
            for (let t = 0, s = n.length; t < s; ++t) {
                const a = n[t], l = a._$GetWorldInfo$_(), u = l._$GetLayer$_();
                S(u, i), u._$_DrawInstanceMaybeWithEffects$_(a, l, i, e), l._$_SetDrawBackFaceOnly$_(!1);
            }
            i._$CoplanarRestoreStandardRendering$_();
        }
        _$_SaveToJson$_() {
            const t = {
                sx: this._$GetScrollX$_(),
                sy: this._$GetScrollY$_(),
                s: this._$GetScale$_(),
                a: this._$GetAngle$_(),
                w: this._$GetWidth$_(),
                h: this._$GetHeight$_(),
                ortho: this._$IsOrthographicProjection$_(),
                vpX: this._$GetVanishingPointX$_(),
                vpY: this._$GetVanishingPointY$_(),
                fv: this._$_isFirstVisit$_,
                persist: this._$_persistData$_,
                fx: this._$_effectList$_._$SaveToJson$_(),
                layers: {},
                dynamicLayers: []
            };
            for (const s of this._$_allLayersFlat$_) if (s._$IsDynamic$_()) {
                const i = s._$GetParentLayer$_();
                t.dynamicLayers.push({
                    sid: s._$GetSID$_(),
                    name: s._$GetName$_(),
                    parentSid: i ? i._$GetSID$_() : null,
                    siblingIndex: s._$_GetSiblingIndex$_(),
                    data: s._$_SaveToJson$_()
                });
            } else t.layers[s._$GetSID$_().toString()] = s._$_SaveToJson$_();
            return t;
        }
        _$_LoadFromJson$_(t) {
            this._$_scrollX$_ = t.sx, this._$_scrollY$_ = t.sy, this._$_scale$_ = t.s, 
            this._$_angle$_ = t.a, this._$_width$_ = t.w, this._$_height$_ = t.h, 
            this._$_isOrthographicProjection$_ = !!t.ortho, t.hasOwnProperty("vpX") && (this._$_vanishingPointX$_ = t.vpX), 
            t.hasOwnProperty("vpY") && (this._$_vanishingPointY$_ = t.vpY), this._$_isFirstVisit$_ = !!t.fv, 
            this._$_persistData$_ = t.persist, this._$_effectList$_._$LoadFromJson$_(t.fx), 
            this._$_needsRebuildEffectChainSteps$_ = !0;
            for (const [ s, i ] of Object.entries(t.layers)) {
                const e = parseInt(s, 10), n = this._$GetLayerBySID$_(e);
                n && n._$_LoadFromJson$_(i);
            }
            if (t.hasOwnProperty("dynamicLayers")) {
                this._$RemoveAllDynamicLayers$_(), this._$_runtime$_._$FlushPendingInstances$_();
                const h = new Map(), r = t.dynamicLayers;
                for (let t = r.length - 1; 0 <= t; --t) {
                    const o = r[t], a = o.sid, l = o.name, u = o.parentSid, c = o.siblingIndex, f = o.data;
                    if (this._$_ReindexLayers$_(), !this._$HasLayerByName$_(l) && !this._$GetLayerBySID$_(a)) {
                        let t, s;
                        if (null === u) t = null, s = this._$_rootLayers$_; else {
                            if (!(t = this._$GetLayerBySID$_(u))) continue;
                            s = t._$GetSubLayers$_();
                        }
                        const d = T._$New$_(T._$Layer$_, this, t, {
                            name: l,
                            sid: a,
                            _$isDynamic$_: !0
                        });
                        s.push(d);
                        let i = h.get(s);
                        i || (i = [], h.set(s, i)), i.push({
                            _$layer$_: d,
                            siblingIndex: c
                        }), d._$_LoadFromJson$_(f);
                    }
                }
                for (const [ p, m ] of h) {
                    m.sort((t, s) => t.siblingIndex - s.siblingIndex);
                    for (const g of m) {
                        let t = g._$layer$_, s = g.siblingIndex, i = p.indexOf(t);
                        p.splice(i, 1), p.splice(s, 0, t);
                    }
                }
            }
            this._$_ReindexAndUpdateAllLayers$_(), this._$_SetAllLayersProjectionChanged$_(), 
            this._$_SetAllLayersMVChanged$_();
        }
        _$GetILayout$_() {
            return this._$_iLayout$_;
        }
        _$UserScriptDispatcher$_() {
            return this._$_userScriptDispatcher$_;
        }
        _$DispatchUserScriptEvent$_(t) {
            t.layout = this._$GetILayout$_();
            const s = this._$_runtime$_, i = s._$IsDebug$_() && !s._$GetEventSheetManager$_()._$IsInEventEngine$_();
            i && e.StartMeasuringScriptTime(), this._$_userScriptDispatcher$_.dispatchEvent(t), 
            i && e.AddScriptTime();
        }
        _$DispatchUserScriptEventAsyncWait$_(t) {
            return t.layout = this._$GetILayout$_(), this._$_userScriptDispatcher$_._$dispatchEventAndWaitAsync$_(t);
        }
        _$DispatchRuntimeUserScriptEventAsyncWait$_(t) {
            return t.layout = this._$GetILayout$_(), this._$_runtime$_._$DispatchUserScriptEventAsyncWait$_(t);
        }
        _$_LogLayerTree$_() {
            this._$_LogLayerList$_(this._$_rootLayers$_);
        }
        _$_LogLayerList$_(t, s = 0) {
            const i = t.slice(0);
            i.reverse();
            for (const e of i) console.log("\t".repeat(s) + "- " + e._$GetName$_()), 
            this._$_LogLayerList$_(e._$GetSubLayers$_(), s + 1);
        }
    };
}

{
    const _h = self._$C3$_;
    _h._$LayoutManager$_ = class extends _h._$DefendedBase$_ {
        #_$#runtime$_;
        #_$#allLayouts$_ = [];
        #_$#layoutsByName$_ = new Map();
        #_$#layoutsBySid$_ = new Map();
        #_$#mainRunningLayout$_ = null;
        #_$#runningSubLayouts$_ = [];
        #_$#firstLayout$_ = null;
        #_$#isEndingLayout$_ = 0;
        #_$#pendingChangeLayout$_ = null;
        constructor(t) {
            super(), this.#_$#runtime$_ = t;
        }
        _$Release$_() {
            this.#_$#runtime$_ = null, this.#_$#mainRunningLayout$_ = null, this.#_$#firstLayout$_ = null, 
            this.#_$#pendingChangeLayout$_ = null, _h._$clearArray$_(this.#_$#allLayouts$_), 
            this.#_$#layoutsByName$_.clear(), this.#_$#layoutsBySid$_.clear(), _h._$clearArray$_(this.#_$#runningSubLayouts$_);
        }
        _$Create$_(t) {
            const s = _h._$New$_(_h._$Layout$_, this, this.#_$#allLayouts$_.length, t);
            this.#_$#allLayouts$_.push(s), this.#_$#layoutsByName$_.set(s._$GetName$_().toLowerCase(), s), 
            this.#_$#layoutsBySid$_.set(s._$GetSID$_(), s);
        }
        _$GetRuntime$_() {
            return this.#_$#runtime$_;
        }
        _$SetFirstLayout$_(t) {
            this.#_$#firstLayout$_ = t;
        }
        _$GetFirstLayout$_() {
            if (this.#_$#firstLayout$_) return this.#_$#firstLayout$_;
            if (this.#_$#allLayouts$_.length) return this.#_$#allLayouts$_[0];
            throw new Error("no first layout");
        }
        _$GetLayoutByName$_(t) {
            return this.#_$#layoutsByName$_.get(t.toLowerCase()) || null;
        }
        _$GetLayoutBySID$_(t) {
            return this.#_$#layoutsBySid$_.get(t) || null;
        }
        _$GetLayoutByIndex$_(t) {
            return t = _h._$clamp$_(Math.floor(t), 0, this.#_$#allLayouts$_.length - 1), 
            this.#_$#allLayouts$_[t];
        }
        _$GetLayout$_(t) {
            return "number" == typeof t ? this._$GetLayoutByIndex$_(t) : this._$GetLayoutByName$_(t.toString());
        }
        _$GetAllLayouts$_() {
            return this.#_$#allLayouts$_;
        }
        _$_SetMainRunningLayout$_(t) {
            this.#_$#mainRunningLayout$_ = t;
        }
        _$GetMainRunningLayout$_() {
            return this.#_$#mainRunningLayout$_;
        }
        _$_AddRunningSubLayout$_(t) {
            if (this.#_$#runningSubLayouts$_.includes(t)) throw new Error("layout already running");
            this.#_$#runningSubLayouts$_.push(t);
        }
        _$_RemoveRunningSubLayout$_(t) {
            const s = this.#_$#runningSubLayouts$_.indexOf(t);
            if (-1 === s) throw new Error("layout not running");
            this.#_$#runningSubLayouts$_.splice(s, 1);
        }
        *_$runningLayouts$_() {
            this.#_$#mainRunningLayout$_ && (yield this.#_$#mainRunningLayout$_), 
            this.#_$#runningSubLayouts$_.length && (yield* this.#_$#runningSubLayouts$_);
        }
        _$IsLayoutRunning$_(t) {
            return this.#_$#mainRunningLayout$_ === t || this.#_$#runningSubLayouts$_.includes(t);
        }
        _$SetIsEndingLayout$_(t) {
            if (t) this.#_$#isEndingLayout$_++; else {
                if (this.#_$#isEndingLayout$_ <= 0) throw new Error("already unset");
                this.#_$#isEndingLayout$_--;
            }
        }
        _$IsEndingLayout$_() {
            return 0 < this.#_$#isEndingLayout$_;
        }
        _$ChangeMainLayout$_(t) {
            this.#_$#pendingChangeLayout$_ = t;
        }
        _$ClearPendingChangeLayout$_() {
            this.#_$#pendingChangeLayout$_ = null;
        }
        _$IsPendingChangeMainLayout$_() {
            return !!this.#_$#pendingChangeLayout$_;
        }
        _$GetPendingChangeMainLayout$_() {
            return this.#_$#pendingChangeLayout$_;
        }
        _$SetAllLayerProjectionChanged$_() {
            const t = this._$GetMainRunningLayout$_();
            t && t._$_SetAllLayersProjectionChanged$_();
        }
        _$SetAllLayerMVChanged$_() {
            const t = this._$GetMainRunningLayout$_();
            t && t._$_SetAllLayersMVChanged$_();
        }
    };
}

{
    const x = self._$C3$_, Eh = new RegExp("<(.+?)>", "g");
    x._$TimelineManager$_ = class extends x._$DefendedBase$_ {
        constructor(t) {
            super(), this._$_runtime$_ = t, this._$_timelineDataManager$_ = x._$New$_(x._$TimelineDataManager$_), 
            this._$_pluginInstance$_ = null, this._$_timelines$_ = [], this._$_timelinesByName$_ = new Map(), 
            this._$_objectClassToTimelineMap$_ = new Map(), this._$_timelinesCreatedByTemplate$_ = new Map(), 
            this._$_scheduledTimelines$_ = [], this._$_playingTimelines$_ = [], 
            this._$_markedForRemovalTimelines$_ = [], this._$_hasRuntimeListeners$_ = !1, 
            this._$_changingLayout$_ = !1, this._$_isTickingTimelines$_ = !1, this._$_tickFunc$_ = () => this._$_OnTick$_(), 
            this._$_tick2Func$_ = () => this._$_OnTick2$_(), this._$_beforeLayoutChange$_ = () => this._$_OnBeforeChangeLayout$_(), 
            this._$_layoutChange$_ = () => this._$_OnAfterChangeLayout$_(), this._$_instanceDestroy$_ = t => this._$_OnInstanceDestroy$_(t._$instance$_), 
            this._$_beforeLoad$_ = t => this._$_OnBeforeLoad$_(), this._$_afterLoad$_ = t => this._$_OnAfterLoad$_(), 
            this._$_afterLayoutStart$_ = t => this._$_OnAfterLayoutStart$_(), this._$_destroyedWhileLoadingState$_ = [], 
            this._$_renderChange$_ = 0;
        }
        _$Release$_() {
            this._$RemoveRuntimeListeners$_(), this._$_tickFunc$_ = null, this._$_tick2Func$_ = null, 
            this._$_beforeLayoutChange$_ = null, this._$_layoutChange$_ = null, 
            this._$_instanceDestroy$_ = null, this._$_afterLoad$_ = null;
            for (const t of this._$_timelines$_) t._$Stop$_(), t._$Release$_();
            x._$clearArray$_(this._$_timelines$_), this._$_timelines$_ = null, this._$_timelineDataManager$_._$Release$_(), 
            this._$_timelineDataManager$_ = null, x._$clearArray$_(this._$_scheduledTimelines$_), 
            this._$_scheduledTimelines$_ = null, x._$clearArray$_(this._$_playingTimelines$_), 
            this._$_playingTimelines$_ = null, x._$clearArray$_(this._$_markedForRemovalTimelines$_), 
            this._$_markedForRemovalTimelines$_ = null, this._$_timelinesByName$_.clear(), 
            this._$_timelinesByName$_ = null, this._$_objectClassToTimelineMap$_.clear(), 
            this._$_objectClassToTimelineMap$_ = null, this._$_timelinesCreatedByTemplate$_.clear(), 
            this._$_timelinesCreatedByTemplate$_ = null, x._$clearArray$_(this._$_destroyedWhileLoadingState$_), 
            this._$_destroyedWhileLoadingState$_ = null, this._$_runtime$_ = null;
        }
        _$AddRuntimeListeners$_() {
            const t = this._$_runtime$_._$Dispatcher$_();
            t.addEventListener("pretick", this._$_tickFunc$_), t.addEventListener("tick2", this._$_tick2Func$_), 
            t.addEventListener("beforelayoutchange", this._$_beforeLayoutChange$_), 
            t.addEventListener("layoutchange", this._$_layoutChange$_), t.addEventListener("instancedestroy", this._$_instanceDestroy$_), 
            t.addEventListener("beforeload", this._$_beforeLoad$_), t.addEventListener("afterload", this._$_afterLoad$_), 
            t.addEventListener("afterlayoutstart", this._$_afterLayoutStart$_);
        }
        _$RemoveRuntimeListeners$_() {
            const t = this._$_runtime$_._$Dispatcher$_();
            t.removeEventListener("pretick", this._$_tickFunc$_), t.removeEventListener("tick2", this._$_tick2Func$_), 
            t.removeEventListener("beforelayoutchange", this._$_beforeLayoutChange$_), 
            t.removeEventListener("layoutchange", this._$_layoutChange$_), t.removeEventListener("instancedestroy", this._$_instanceDestroy$_), 
            t.removeEventListener("beforeload", this._$_beforeLoad$_), t.removeEventListener("afterload", this._$_afterLoad$_), 
            t.removeEventListener("afterlayoutstart", this._$_afterLayoutStart$_);
        }
        _$Create$_(t) {
            this._$_timelineDataManager$_._$Add$_(t);
            const s = x._$TimelineState$_._$CreateInitial$_(t, this);
            this._$Add$_(s), this._$SetTimelineObjectClassesToMap$_(s), this._$_timelinesCreatedByTemplate$_.set(s._$GetName$_(), 0);
        }
        _$CreateFromTemplate$_(t) {
            const s = this._$GetTimelineDataManager$_(), i = t._$GetTemplateName$_(), e = s._$Get$_(i), n = x._$TimelineState$_._$CreateFromTemplate$_(i + ":" + this._$_timelinesCreatedByTemplate$_.get(i), e, this);
            return this._$_IncreaseTemplateTimelinesCount$_(i), this._$Add$_(n), 
            n;
        }
        _$_IncreaseTemplateTimelinesCount$_(t) {
            this._$_timelinesCreatedByTemplate$_.set(t, this._$_timelinesCreatedByTemplate$_.get(t) + 1);
        }
        _$_SetCreatedTemplateTimelinesCount$_() {
            for (const t of this._$_timelines$_) if (!t._$IsTemplate$_()) {
                const s = t._$GetTemplateName$_();
                this._$_IncreaseTemplateTimelinesCount$_(s);
            }
        }
        _$_ClearCreatedTemplateTimelinesCount$_() {
            for (const t of this._$_timelinesCreatedByTemplate$_.keys()) this._$_timelinesCreatedByTemplate$_.set(t, 0);
        }
        _$Add$_(t) {
            this._$_timelines$_.push(t), this._$_timelinesByName$_.set(t._$GetName$_().toLowerCase(), t);
        }
        _$Remove$_(t) {
            t._$Removed$_(), t._$IsTemplate$_() || (x._$arrayFindRemove$_(this._$_timelines$_, t), 
            x._$arrayFindRemove$_(this._$_scheduledTimelines$_, t), x._$arrayFindRemove$_(this._$_playingTimelines$_, t), 
            x._$arrayFindRemove$_(this._$_markedForRemovalTimelines$_, t), this._$_timelinesByName$_.delete(t._$GetName$_().toLowerCase()), 
            this._$RemoveTimelineFromObjectClassMap$_(t), t._$IsReleased$_()) || t._$Release$_();
        }
        _$Trigger$_(t) {
            this._$_runtime$_._$Trigger$_(t, this._$_pluginInstance$_, null);
        }
        _$GetRuntime$_() {
            return this._$_runtime$_;
        }
        _$GetTimelineDataManager$_() {
            return this._$_timelineDataManager$_;
        }
        _$SetPluginInstance$_(t) {
            this._$_pluginInstance$_ = t;
        }
        _$GetPluginInstance$_() {
            return this._$_pluginInstance$_;
        }
        *_$GetTimelines$_() {
            for (const t of this._$_timelines$_) yield t;
        }
        *_$GetPlayingTimelines$_() {
            for (const t of this._$_playingTimelines$_) yield t;
        }
        _$SetTimelineObjectClassToMap$_(t, s) {
            this._$_objectClassToTimelineMap$_.has(t) || this._$_objectClassToTimelineMap$_.set(t, new Set()), 
            this._$_objectClassToTimelineMap$_.get(t).add(s);
        }
        _$SetTimelineObjectClassesToMap$_(t) {
            for (const s of t._$GetObjectClasses$_()) this._$SetTimelineObjectClassToMap$_(s, t);
        }
        _$RemoveTimelineFromObjectClassMap$_(t) {
            for (const [ s, i ] of this._$_objectClassToTimelineMap$_.entries()) i.has(t) && (i.delete(t), 
            0 === i.size) && this._$_objectClassToTimelineMap$_.delete(s);
        }
        _$GetTimelinesForObjectClass$_(t) {
            if (this._$_objectClassToTimelineMap$_.has(t)) return this._$_objectClassToTimelineMap$_.get(t);
        }
        _$GetTimelineOfTemplateForInstances$_(t, s) {
            if (s) for (const i of this._$_timelines$_) {
                const e = s.every(t => i._$HasTrackInstance$_(t._$instance$_, t.trackId));
                if (e && i._$GetName$_().includes(t._$GetName$_())) return i;
            }
        }
        _$GetTimelineByName$_(t) {
            return this._$_timelinesByName$_.get(t.toLowerCase()) || null;
        }
        _$GetScheduledOrPlayingTimelineByName$_(t) {
            for (const s of this._$_scheduledTimelines$_) if (s._$GetName$_() === t) return s;
            for (const i of this._$_playingTimelines$_) if (i._$GetName$_() === t) return i;
            return null;
        }
        *_$GetTimelinesByName$_(i) {
            if (Eh.test(i)) {
                Eh.lastIndex = 0;
                let t, s = new Set();
                do {
                    if (t = Eh.exec(i)) {
                        const e = t[1].split(",");
                        for (const n of e) s.add(n);
                    }
                } while (t);
                for (const h of s.values()) {
                    const r = this._$GetTimelineByName$_(h);
                    r && (yield r);
                }
                s.clear();
            } else {
                const t = this._$GetTimelineByName$_(i);
                t && (yield t);
            }
        }
        *_$GetTimelinesByTags$_(t) {
            for (const s of this._$_timelines$_) s._$HasTags$_(t) && (yield s);
        }
        _$AddScheduledTimeline$_(t) {
            this._$_scheduledTimelines$_.includes(t) || this._$_scheduledTimelines$_.push(t), 
            this._$_MaybeEnableRuntimeListeners$_();
        }
        _$RemovePlayingTimeline$_(t) {
            x._$arrayFindRemove$_(this._$_playingTimelines$_, t), this._$_MaybeDisableRuntimeListeners$_();
        }
        _$ScheduleTimeline$_(t) {
            this._$_playingTimelines$_.includes(t) ? (t._$SetPlaying$_(!0), t._$SetScheduled$_(!1), 
            t._$SetMarkedForRemoval$_(!1)) : (t._$SetPlaying$_(!1), t._$SetScheduled$_(!0), 
            t._$SetMarkedForRemoval$_(!1), this._$_scheduledTimelines$_.includes(t) || this._$_scheduledTimelines$_.push(t)), 
            this._$_MaybeEnableRuntimeListeners$_();
        }
        _$DeScheduleTimeline$_(t) {
            t._$SetPlaying$_(!1), t._$SetScheduled$_(!1), t._$ResolvePlayPromise$_(), 
            x._$arrayFindRemove$_(this._$_scheduledTimelines$_, t), this._$_MaybeDisableRuntimeListeners$_();
        }
        _$CompleteTimeline$_(t) {
            t._$SetPlaying$_(!1), t._$SetScheduled$_(!1), this._$_playingTimelines$_.includes(t) && (t._$SetMarkedForRemoval$_(!0), 
            this._$_markedForRemovalTimelines$_.push(t), x._$arrayFindRemove$_(this._$_playingTimelines$_, t)), 
            this._$_scheduledTimelines$_.includes(t) && t._$SetMarkedForRemoval$_(!0);
        }
        _$CompleteTimelineBeforeChangeOfLayout$_(t) {
            t._$SetPlaying$_(!1), t._$SetScheduled$_(!1), t._$SetMarkedForRemoval$_(!1), 
            t._$SetPlaybackRate$_(1), x._$arrayFindRemove$_(this._$_playingTimelines$_, t);
        }
        _$CompleteTimelineAndResolve$_(t) {
            this._$CompleteTimeline$_(t), t._$ResolvePlayPromise$_();
        }
        _$_OnTick$_() {
            if (!this._$GetRuntime$_()._$IsLoadingState$_() && this._$_hasRuntimeListeners$_ && !this._$_changingLayout$_) {
                for (this._$_isTickingTimelines$_ = !0; this._$_scheduledTimelines$_.length; ) {
                    const t = this._$_scheduledTimelines$_.pop();
                    (t._$IsMarkedForRemoval$_() ? (t._$SetInitialStateForce$_(), 
                    this._$_markedForRemovalTimelines$_) : (t._$SetInitialState$_(), 
                    this._$_playingTimelines$_)).push(t), 0 !== t._$GetRenderChange$_() && (this._$_renderChange$_ = 1);
                }
                const s = this._$_runtime$_._$_GetDtFast$_(), i = this._$_runtime$_._$GetDt1$_(), e = this._$_runtime$_._$GetTimeScale$_();
                for (let t = this._$_playingTimelines$_.length - 1; 0 <= t; t--) {
                    const n = this._$_playingTimelines$_[t];
                    n && n._$Tick$_(s, e, i);
                }
                this._$_isTickingTimelines$_ = !1, 0 !== this._$_renderChange$_ && this._$GetRuntime$_()._$UpdateRender$_();
            }
        }
        _$_OnTick2$_() {
            if (!this._$GetRuntime$_()._$IsLoadingState$_() && this._$_hasRuntimeListeners$_ && !this._$_changingLayout$_) {
                let i;
                for (let t = 0, s = this._$_markedForRemovalTimelines$_.length; t < s; t++) {
                    const e = this._$_markedForRemovalTimelines$_[t];
                    i = i || new Set(), e._$Removed$_(), this._$_MaybeExecuteTimelineFinishTriggers$_(e), 
                    i.add(e);
                }
                if (i) {
                    x._$arrayRemoveAllInSet$_(this._$_markedForRemovalTimelines$_, i);
                    for (let t = this._$_renderChange$_ = 0, s = this._$_playingTimelines$_.length; t < s; t++) if (0 !== this._$_playingTimelines$_[t]._$GetRenderChange$_()) {
                        this._$_renderChange$_ = 1;
                        break;
                    }
                }
                this._$_MaybeDisableRuntimeListeners$_();
            }
        }
        _$_MaybeExecuteTimelineFinishTriggers$_(t) {
            t._$IsReleased$_() || t._$HasValidTracks$_() && t._$IsComplete$_() && t._$InitialStateSet$_() && t._$FinishTriggers$_();
        }
        _$_MaybeEnableRuntimeListeners$_() {
            this._$_hasRuntimeListeners$_ || (this._$_hasRuntimeListeners$_ = !0);
        }
        _$_MaybeDisableRuntimeListeners$_() {
            this._$_markedForRemovalTimelines$_.length || this._$_playingTimelines$_.length || this._$_scheduledTimelines$_.length || this._$_isTickingTimelines$_ || (this._$_hasRuntimeListeners$_ = !1);
        }
        _$_OnBeforeChangeLayout$_() {
            for (this._$_changingLayout$_ = !0; this._$_scheduledTimelines$_.length; ) this._$DeScheduleTimeline$_(this._$_scheduledTimelines$_.pop());
            const t = new Set();
            for (const s of this._$_playingTimelines$_) {
                const i = s._$_OnBeforeChangeLayout$_();
                i && (s._$Removed$_(), t.add(s));
            }
            x._$arrayRemoveAllInSet$_(this._$_playingTimelines$_, t), t.clear();
            for (const e of this._$_markedForRemovalTimelines$_) {
                const n = e._$_OnBeforeChangeLayout$_();
                n && (e._$Removed$_(), t.add(e));
            }
            x._$arrayRemoveAllInSet$_(this._$_markedForRemovalTimelines$_, t), this._$_MaybeDisableRuntimeListeners$_();
            for (const h of this._$_timelines$_) h._$CleanCaches$_();
        }
        _$_OnAfterChangeLayout$_() {
            this._$_changingLayout$_ = !1;
        }
        _$_OnInstanceDestroy$_(t) {
            const s = t._$GetObjectClass$_(), i = this._$GetTimelinesForObjectClass$_(s);
            if (i) if (this._$_runtime$_._$IsLoadingState$_()) this._$_destroyedWhileLoadingState$_.push(t); else for (const e of i) e._$IsTemplate$_() || (e._$IsReleased$_() ? this._$Remove$_(e) : e._$HasValidTracks$_() || (this._$_MaybeExecuteTimelineFinishTriggers$_(e), 
            this._$Remove$_(e)));
        }
        _$_OnBeforeLoad$_() {
            for (const t of this._$_scheduledTimelines$_.map(t => t)) this._$_MaybeExecuteTimelineFinishTriggers$_(t), 
            this._$Remove$_(t);
            for (const s of this._$_playingTimelines$_.map(t => t)) this._$_MaybeExecuteTimelineFinishTriggers$_(s), 
            this._$Remove$_(s);
        }
        _$_OnAfterLoad$_() {
            for (const t of this._$_destroyedWhileLoadingState$_) this._$_OnInstanceDestroy$_(t);
            x._$clearArray$_(this._$_destroyedWhileLoadingState$_);
            for (const s of this._$_timelines$_) s._$_OnAfterLoad$_();
        }
        _$_OnAfterLayoutStart$_() {
            const t = this._$_runtime$_._$GetLayoutManager$_(), s = t._$GetMainRunningLayout$_();
            if (s) for (const i of this._$_timelines$_) {
                const e = i._$GetStartOnLayout$_();
                e && s._$GetName$_() === e && this._$ScheduleTimeline$_(i);
            }
        }
        _$_SaveToJson$_() {
            return {
                timelinesJson: this._$_SaveTimelinesToJson$_(),
                scheduledTimelinesJson: this._$_SaveScheduledTimelinesToJson$_(),
                playingTimelinesJson: this._$_SavePlayingTimelinesToJson$_(),
                markedForRemovalTimelinesJson: this._$_SaveMarkedForRemovalTimelinesToJson$_(),
                hasRuntimeListeners: this._$_hasRuntimeListeners$_,
                changingLayout: this._$_changingLayout$_,
                isTickingTimelines: this._$_isTickingTimelines$_
            };
        }
        _$_LoadFromJson$_(t) {
            t && (this._$_ClearCreatedTemplateTimelinesCount$_(), this._$_LoadTimelinesFromJson$_(t.timelinesJson), 
            this._$_LoadScheduledTimelinesFromJson$_(t.scheduledTimelinesJson), 
            this._$_LoadPlayingTimelinesFromJson$_(t.playingTimelinesJson), this._$_LoadMarkedForRemovalTimelinesFromJson$_(t.markedForRemovalTimelinesJson), 
            this._$_hasRuntimeListeners$_ = !t.hasRuntimeListeners, this._$_changingLayout$_ = !!t.changingLayout, 
            this._$_isTickingTimelines$_ = !!t.isTickingTimelines, this._$_SetCreatedTemplateTimelinesCount$_(), 
            this._$_MaybeEnableRuntimeListeners$_(), this._$_MaybeDisableRuntimeListeners$_());
        }
        _$_SaveTimelinesToJson$_() {
            return this._$_timelines$_.map(t => t._$_SaveToJson$_());
        }
        _$_LoadTimelinesFromJson$_(t) {
            for (const s of t) {
                let t = this._$GetTimelineByName$_(s.name);
                if (t) t._$_LoadFromJson$_(s); else {
                    const i = this._$_GetTemplateNameFromJson$_(s);
                    if (!i) continue;
                    const e = this._$GetTimelineByName$_(i);
                    (t = this._$CreateFromTemplate$_(e))._$_LoadFromJson$_(s);
                }
                t._$HasTracks$_() || this._$Remove$_(t);
            }
        }
        _$_GetTemplateNameFromJson$_(t) {
            const s = t.name, i = s.split(":");
            return i && 2 === i.length ? i[0] : null;
        }
        _$_SaveScheduledTimelinesToJson$_() {
            return this._$_SaveTimelines$_(this._$_scheduledTimelines$_);
        }
        _$_LoadScheduledTimelinesFromJson$_(t) {
            this._$_LoadTimelines$_(t, this._$_scheduledTimelines$_);
        }
        _$_SavePlayingTimelinesToJson$_() {
            return this._$_SaveTimelines$_(this._$_playingTimelines$_);
        }
        _$_LoadPlayingTimelinesFromJson$_(t) {
            this._$_LoadTimelines$_(t, this._$_playingTimelines$_);
        }
        _$_SaveMarkedForRemovalTimelinesToJson$_() {
            return this._$_SaveTimelines$_(this._$_markedForRemovalTimelines$_);
        }
        _$_LoadMarkedForRemovalTimelinesFromJson$_(t) {
            this._$_LoadTimelines$_(t, this._$_markedForRemovalTimelines$_);
        }
        _$_IsTimelineInJson$_(t, s) {
            if (s) for (const i of s) if (i === t._$GetName$_()) return !0;
            return !1;
        }
        _$_SaveTimelines$_(t) {
            return t.map(t => t._$GetName$_());
        }
        _$_LoadTimelines$_(t, s) {
            const i = new Set();
            for (const e of s) this._$_IsTimelineInJson$_(e, t) || i.add(e);
            if (x._$arrayRemoveAllInSet$_(s, i), t) for (const n of t) {
                const h = this._$GetTimelineByName$_(n);
                if (h) {
                    const r = s.find((s => t => t._$GetName$_() === s)(n));
                    r || s.push(h);
                }
            }
        }
    };
}

{
    const Nh = self._$C3$_, Dh = [ 0, 0 ], Ah = [ 0, 0 ], Lh = [ 0, 0 ], Oh = [ 0, 0, 0, 0, 0 ], Ph = new Array(4), Rh = [ {
        x: 0,
        y: 0,
        t: 0,
        _$distance$_: 0
    }, {
        x: 0,
        y: 0,
        t: 0,
        _$distance$_: 0
    }, {
        x: 0,
        y: 0,
        t: 0,
        _$distance$_: 0
    } ], kh = {
        x: 0,
        y: 0,
        t: 0,
        _$distance$_: 0
    };
    Nh._$TimelineInfo$_ = class {
        constructor(t, s) {
            this._$_initialized$_ = !1, this._$_timeline$_ = t, this._$_segments$_ = [];
            let i = null;
            if (i = s ? this._$_timeline$_._$GetTrackById$_(s) : Nh.first(this._$_timeline$_._$GetTracks$_())) {
                const e = i._$GetPropertyTrack$_("offsetX"), n = i._$GetPropertyTrack$_("offsetY");
                if (e && n) {
                    this._$_xTrack$_ = e, this._$_yTrack$_ = n;
                    const h = e._$GetPropertyKeyframeDataItemArrayIncludingDisabled$_(), r = n._$GetPropertyKeyframeDataItemArrayIncludingDisabled$_();
                    for (let t = 1, s = Math.min(h.length, r.length); t < s; ++t) {
                        const o = h[t], a = (o._$GetNext$_(), o._$GetPrevious$_()), l = r[t], u = (l._$GetNext$_(), 
                        l._$GetPrevious$_());
                        a && "cubic-bezier" === a._$GetPathMode$_() && u && "cubic-bezier" === u._$GetPathMode$_() ? this._$_segments$_.push(Nh._$New$_(Nh._$TimelineCubicBezierSegmentInfo$_, a, u, o, l, this._$_segments$_.length)) : (a && "line" === a._$GetPathMode$_() && u && u._$GetPathMode$_(), 
                        this._$_segments$_.push(Nh._$New$_(Nh._$TimelineLineSegmentInfo$_, o, l, this._$_segments$_.length)));
                    }
                    this._$_initialized$_ = !0;
                }
            }
        }
        _$Release$_() {
            for (const t of this._$_segments$_) t._$Release$_();
            Nh._$clearArray$_(this._$_segments$_), this._$_segments$_ = null, this._$_timeline$_ = null, 
            this._$_xTrack$_ = null, this._$_yTrack$_ = null;
        }
        _$WasInitialized$_() {
            return this._$_initialized$_;
        }
        _$segments$_() {
            return this._$_segments$_;
        }
        _$SetOrigin$_(t) {
            const s = "relative" === this._$_xTrack$_._$GetResultMode$_() ? t._$GetX$_() : 0, i = "relative" === this._$_yTrack$_._$GetResultMode$_() ? t._$GetY$_() : 0;
            for (const e of this._$_segments$_) e._$SetOrigin$_(s, i);
        }
        _$Project$_(s, i, t) {
            let e = NaN, n = this._$_segments$_.length;
            for (let t = 0; t < n; t++) {
                const h = this._$_segments$_[t];
                if ("cubic-bezier" === h._$GetType$_()) {
                    const r = h._$Project$_(s, i);
                    (isNaN(e) || r[3] < e) && (e = r[3], Lh[0] = r[2], Lh[1] = h._$GetIndex$_());
                }
            }
            return Lh;
        }
        _$ProjectWithOptions$_(s, i, t) {
            const e = t.tRange;
            Nh._$IsFiniteNumber$_(e[0]) || (e[0] = 0), Nh._$IsFiniteNumber$_(e[1]) || (e[1] = 1);
            let n = NaN, h = this._$_segments$_.length;
            for (let t = 0; t < h; t++) {
                const r = this._$_segments$_[t];
                if ("cubic-bezier" === r._$GetType$_()) {
                    const o = r._$ProjectWithRange$_(s, i, e);
                    (isNaN(n) || o[3] < n) && (n = o[3], Lh[0] = o[2], Lh[1] = r._$GetIndex$_());
                }
            }
            return Lh;
        }
        _$Tangent$_(t, s) {
            return this._$_segments$_[s]._$Tangent$_(t);
        }
        _$TangentAngle$_(t, s) {
            return this._$_segments$_[s]._$TangentAngle$_(t);
        }
    }, Nh._$TimelineCubicBezierSegmentInfo$_ = class {
        constructor(t, s, i, e, n) {
            this._$_index$_ = n;
            const h = t._$GetAddOn$_("cubic-bezier"), r = i._$GetAddOn$_("cubic-bezier"), o = s._$GetAddOn$_("cubic-bezier"), a = e._$GetAddOn$_("cubic-bezier");
            this._$_aX$_ = t._$GetValueWithResultMode$_(), this._$_aY$_ = s._$GetValueWithResultMode$_(), 
            this._$_bX$_ = t._$GetValueWithResultMode$_() + h._$GetStartAnchor$_(), 
            this._$_bY$_ = s._$GetValueWithResultMode$_() + o._$GetStartAnchor$_(), 
            this._$_cX$_ = i._$GetValueWithResultMode$_() + r._$GetEndAnchor$_(), 
            this._$_cY$_ = e._$GetValueWithResultMode$_() + a._$GetEndAnchor$_(), 
            this._$_dX$_ = i._$GetValueWithResultMode$_(), this._$_dY$_ = e._$GetValueWithResultMode$_(), 
            this._$_aXO$_ = 0, this._$_aYO$_ = 0, this._$_bXO$_ = 0, this._$_bYO$_ = 0, 
            this._$_cXO$_ = 0, this._$_cYO$_ = 0, this._$_dXO$_ = 0, this._$_dYO$_ = 0, 
            this._$_d0x$_ = 0, this._$_d0y$_ = 0, this._$_d1x$_ = 0, this._$_d1y$_ = 0, 
            this._$_d2x$_ = 0, this._$_d2y$_ = 0, this._$_x1Factor$_ = 0, this._$_x2Factor$_ = 0, 
            this._$_x3Factor$_ = 0, this._$_y1Factor$_ = 0, this._$_y2Factor$_ = 0, 
            this._$_y3Factor$_ = 0, this._$_lutIndex$_ = NaN, this._$_initialized$_ = !1, 
            this._$_len$_ = 100, this._$_arcLengths$_ = new Array(this._$_len$_ + 1), 
            this._$_arcLengths$_[0] = 0, this._$_length$_ = 0, this._$_lut$_ = [], 
            this._$_lutObjects$_ = [];
            for (let t = 0; t < 100; t++) this._$_lutObjects$_.push({
                x: 0,
                y: 0,
                t: 0,
                _$distance$_: 0
            });
            this._$_CalculateLength$_();
        }
        _$Release$_() {
            Nh._$clearArray$_(this._$_arcLengths$_), this._$_arcLengths$_ = null, 
            Nh._$clearArray$_(this._$_lut$_), this._$_lut$_ = null, Nh._$clearArray$_(this._$_lutObjects$_), 
            this._$_lutObjects$_ = null;
        }
        _$GetType$_() {
            return "cubic-bezier";
        }
        _$GetIndex$_() {
            return this._$_index$_;
        }
        _$GetStepCount$_() {
            return Math.floor(this._$_length$_ / 25);
        }
        _$GetStepIncrement$_() {
            return 1 / this._$GetStepCount$_();
        }
        _$SetOrigin$_(t, s) {
            this._$_originX$_ = t, this._$_originY$_ = s, this._$_arcLengths$_ = new Array(this._$_len$_ + 1), 
            this._$_arcLengths$_[0] = 0, this._$_CalculateLength$_(), this._$_aXO$_ = this._$_aX$_ + this._$_originX$_, 
            this._$_aYO$_ = this._$_aY$_ + this._$_originY$_, this._$_bXO$_ = this._$_bX$_ + this._$_originX$_, 
            this._$_bYO$_ = this._$_bY$_ + this._$_originY$_, this._$_cXO$_ = this._$_cX$_ + this._$_originX$_, 
            this._$_cYO$_ = this._$_cY$_ + this._$_originY$_, this._$_dXO$_ = this._$_dX$_ + this._$_originX$_, 
            this._$_dYO$_ = this._$_dY$_ + this._$_originY$_, this._$_d0x$_ = 3 * (this._$_bXO$_ - this._$_aXO$_), 
            this._$_d0y$_ = 3 * (this._$_bYO$_ - this._$_aYO$_), this._$_d1x$_ = 3 * (this._$_cXO$_ - this._$_bXO$_), 
            this._$_d1y$_ = 3 * (this._$_cYO$_ - this._$_bYO$_), this._$_d2x$_ = 3 * (this._$_dXO$_ - this._$_cXO$_), 
            this._$_d2y$_ = 3 * (this._$_dYO$_ - this._$_cYO$_), this._$_x1Factor$_ = 3 * (this._$_bXO$_ - this._$_aXO$_), 
            this._$_x2Factor$_ = 3 * (this._$_aXO$_ + this._$_cXO$_ - 2 * this._$_bXO$_), 
            this._$_x3Factor$_ = this._$_dXO$_ - this._$_aXO$_ + 3 * (this._$_bXO$_ - this._$_cXO$_), 
            this._$_y1Factor$_ = 3 * (this._$_bYO$_ - this._$_aYO$_), this._$_y2Factor$_ = 3 * (this._$_aYO$_ + this._$_cYO$_ - 2 * this._$_bYO$_), 
            this._$_y3Factor$_ = this._$_dYO$_ - this._$_aYO$_ + 3 * (this._$_bYO$_ - this._$_cYO$_);
        }
        Map(t) {
            if (!this._$_initialized$_) return NaN;
            const s = this._$_Map$_(t);
            return Ah[0] = this._$_X$_(s), Ah[1] = this._$_Y$_(s), Ah;
        }
        _$Project$_(t, s) {
            const i = this._$_GenerateLUT$_(100), e = this._$_FindClosestFromLUT$_(t, s, i), n = this._$_RefineProjection$_(t, s, i, e);
            return Oh[0] = n.x, Oh[1] = n.y, Oh[2] = n.t, Oh[3] = n._$distance$_, 
            Oh;
        }
        _$ProjectWithRange$_(t, s, i) {
            const e = this._$_GenerateLUT$_(100), n = this._$_FindClosestFromLUTWithRange$_(t, s, e, i), h = this._$_RefineProjection$_(t, s, e, n);
            return Oh[0] = h.x, Oh[1] = h.y, Oh[2] = h.t, Oh[3] = h._$distance$_, 
            Oh;
        }
        _$Tangent$_(t) {
            const s = 1 - t, i = s * s, e = 2 * s * t, n = t * t, h = i * this._$_d0x$_ + e * this._$_d1x$_ + n * this._$_d2x$_, r = i * this._$_d0y$_ + e * this._$_d1y$_ + n * this._$_d2y$_, o = Nh._$hypot2DFast$_(h, r);
            return Dh[0] = h / o, Dh[1] = r / o, Dh;
        }
        _$TangentAngle$_(t) {
            const s = 1 - t, i = s * s, e = 2 * s * t, n = t * t, h = i * this._$_d0x$_ + e * this._$_d1x$_ + n * this._$_d2x$_, r = i * this._$_d0y$_ + e * this._$_d1y$_ + n * this._$_d2y$_;
            return Math.atan2(r, h);
        }
        _$_Map$_(n) {
            if (this._$_initialized$_) {
                let t = n * this._$_arcLengths$_[this._$_len$_], s = 0, i = this._$_len$_, e = 0;
                for (;s < i; ) e = s + ((i - s) / 2 | 0), this._$_arcLengths$_[e] < t ? s = e + 1 : i = e;
                this._$_arcLengths$_[e] > t && e--;
                const h = this._$_arcLengths$_[e];
                return h === t ? e / this._$_len$_ : (e + (t - h) / (this._$_arcLengths$_[e + 1] - h)) / this._$_len$_;
            }
        }
        _$_X$_(t) {
            return this._$_initialized$_ ? self._$Ease$_._$GetRuntimeEase$_("cubicbezier")(t, this._$_aX$_ + this._$_originX$_, this._$_bX$_ + this._$_originX$_, this._$_cX$_ + this._$_originX$_, this._$_dX$_ + this._$_originX$_) : NaN;
        }
        _$_Y$_(t) {
            return this._$_initialized$_ ? self._$Ease$_._$GetRuntimeEase$_("cubicbezier")(t, this._$_aY$_ + this._$_originY$_, this._$_bY$_ + this._$_originY$_, this._$_cY$_ + this._$_originY$_, this._$_dY$_ + this._$_originY$_) : NaN;
        }
        _$_GenerateLUT$_(s) {
            if (!(this._$_lut$_.length >= (s = s || 100))) {
                this._$_lut$_ = new Array(s), s++;
                for (let t = 0; t < s - 1; t++) {
                    const i = t / (s - 1), e = i ** 2, n = i ** 3, h = this._$_x1Factor$_ * i, r = this._$_x2Factor$_ * e, o = this._$_x3Factor$_ * n, a = this._$_y1Factor$_ * i, l = this._$_y2Factor$_ * e, u = this._$_y3Factor$_ * n, c = this._$_aXO$_ + h + r + o, f = this._$_aYO$_ + a + l + u;
                    this._$_lutObjects$_[t].x = c, this._$_lutObjects$_[t].y = f, 
                    this._$_lutObjects$_[t].t = i, this._$_lutObjects$_[t]._$distance$_ = 0, 
                    this._$_lut$_[t] = this._$_lutObjects$_[t];
                }
            }
            return this._$_lut$_;
        }
        _$_FindClosestFromLUT$_(s, i, e, t = 0, n = Number.MAX_SAFE_INTEGER) {
            let h = 0;
            if (isNaN(this._$_lutIndex$_)) for (let t = 0; t < 100; t++) {
                const r = e[t], o = r.x - s, a = r.y - i;
                r._$distance$_ = o * o + a * a, r._$distance$_ < n && (n = r._$distance$_, 
                h = t);
            } else {
                for (let t = this._$_lutIndex$_; t < this._$_lutIndex$_ + 5 && !(t >= e.length); t++) {
                    const l = e[t], u = l.x - s, c = l.y - i;
                    l._$distance$_ = u * u + c * c, l._$distance$_ < n && (n = l._$distance$_, 
                    h = t);
                }
                for (let t = this._$_lutIndex$_; t > this._$_lutIndex$_ - 5 && !(t < 0); t--) {
                    const f = e[t], d = f.x - s, p = f.y - i;
                    f._$distance$_ = d * d + p * p, f._$distance$_ < n && (n = f._$distance$_, 
                    h = t);
                }
            }
            return this._$_lutIndex$_ = h;
        }
        _$_FindClosestFromLUTWithRange$_(s, i, e, n, h = Number.MAX_SAFE_INTEGER) {
            let r = 0;
            if (isNaN(this._$_lutIndex$_)) for (let t = 0; t < 100; t++) {
                const o = e[t], a = o.x - s, l = o.y - i;
                o._$distance$_ = a * a + l * l, o.t >= n[0] && o.t <= n[1] && o._$distance$_ < h && (h = o._$distance$_, 
                r = t);
            } else {
                for (let t = this._$_lutIndex$_; t < this._$_lutIndex$_ + 5 && !(t >= e.length); t++) {
                    const u = e[t], c = u.x - s, f = u.y - i;
                    u._$distance$_ = c * c + f * f, u.t >= n[0] && u.t <= n[1] && u._$distance$_ < h && (h = u._$distance$_, 
                    r = t);
                }
                for (let t = this._$_lutIndex$_; t > this._$_lutIndex$_ - 5 && !(t < 0); t--) {
                    const d = e[t], p = d.x - s, m = d.y - i;
                    d._$distance$_ = p * p + m * m, d.t >= n[0] && d.t <= n[1] && d._$distance$_ < h && (h = d._$distance$_, 
                    r = t);
                }
            }
            return this._$_lutIndex$_ = r;
        }
        _$_RefineProjection$_(r, o, a, l) {
            let u = a[l], t = 1, c = Number.MAX_SAFE_INTEGER;
            t: do {
                let t = a.length, s = 0 === l ? 0 : l - 1, i = l === t - 1 ? t - 1 : l + 1, e = a[s].t, n = a[i].t, h = (n - e) / 4;
                if (h < .001) break;
                Ph[0] = a[s];
                for (let t = 1; t <= 2; t++) {
                    const f = e + t * h, d = f ** 2, p = f ** 3, m = this._$_x1Factor$_ * f, g = this._$_x2Factor$_ * d, y = this._$_x3Factor$_ * p, M = this._$_y1Factor$_ * f, w = this._$_y2Factor$_ * d, x = this._$_y3Factor$_ * p, S = this._$_aXO$_ + m + g + y, T = this._$_aYO$_ + M + w + x, b = S - r, v = T - o, C = b * b + v * v;
                    if (C < c) {
                        c = C, l = t, kh.x = S, kh.y = T, kh.t = f, kh._$distance$_ = C, 
                        u = kh;
                        break t;
                    }
                    const G = Rh[t - 1];
                    G.x = S, G.y = T, G.t = f, G._$distance$_ = C, Ph[t] = G;
                }
                Ph[3] = a[i], a = Ph;
            } while (t++ < 20);
            return u;
        }
        _$_CalculateLength$_() {
            this._$_initialized$_ = !0;
            let s = this._$_X$_(0), i = this._$_Y$_(0), e = 0;
            for (let t = 1; t <= this._$_len$_; t++) {
                const n = this._$_X$_(.01 * t), h = this._$_Y$_(.01 * t), r = s - n, o = i - h;
                e += Nh._$hypot2DFast$_(r, o), this._$_arcLengths$_[t] = e, s = n, 
                i = h;
            }
            this._$_length$_ = e;
        }
    }, Nh._$TimelineLineSegmentInfo$_ = class {
        constructor(t, s, i) {
            this._$_index$_ = i, this._$_targetX$_ = t._$GetValueWithResultMode$_(), 
            this._$_targetY$_ = s._$GetValueWithResultMode$_(), this._$_originX$_ = 0, 
            this._$_originY$_ = 0;
        }
        _$Release$_() {}
        _$GetType$_() {
            return "line";
        }
        _$GetIndex$_() {
            return this._$_index$_;
        }
        _$SetOrigin$_(t, s) {
            this._$_originX$_ = t, this._$_originY$_ = s;
        }
        _$GetX$_() {
            return this._$_targetX$_ + this._$_originX$_;
        }
        _$GetY$_() {
            return this._$_targetY$_ + this._$_originY$_;
        }
    };
}

{
    const S = self._$C3$_;
    S._$TimelineState$_ = class extends S._$DefendedBase$_ {
        constructor(t, s, i) {
            super(), this._$_runtime$_ = i._$GetRuntime$_(), this._$_timelineManager$_ = i, 
            this._$_timelineDataItem$_ = s, this._$_name$_ = t, this._$_tracks$_ = [], 
            this._$_tracksLength$_ = 0, this._$_beforeAndAfterTracks$_ = null, this._$_beforeAndAfterTracksLength$_ = 0, 
            this._$CreateTrackStates$_(), this._$_playPromise$_ = null, this._$_playResolve$_ = null, 
            this._$_playheadTime$_ = 0, this._$_overshoot$_ = 0, this._$_playbackRate$_ = 1, 
            this._$_pingPongState$_ = 0, this._$_currentRepeatCount$_ = 1, this._$_isPlaying$_ = !1, 
            this._$_isScheduled$_ = !1, this._$_initialStateSet$_ = !1, this._$_complete$_ = !0, 
            this._$_released$_ = !1, this._$_markedForRemoval$_ = !1, this._$_completedTick$_ = -1, 
            this._$_implicitPause$_ = !1, this._$_isTemplate$_ = !1, this._$_finishedTriggers$_ = !1, 
            this._$_firstTick$_ = !1, this._$_lastDelta$_ = NaN, this._$_tags$_ = [ "" ], 
            this._$_stringTags$_ = "", this._$_tagsChanged$_ = !1, this._$_renderChange$_ = 0, 
            this._$_hasNestedContent$_ = 0, this._$_iTimelineState$_ = null;
        }
        static _$CreateInitial$_(t, s) {
            const i = s._$GetTimelineDataManager$_(), e = i._$GetNameId$_(), n = i._$Get$_(t[e]), h = S._$New$_(S._$TimelineState$_, t[e], n, s);
            return h._$SetIsTemplate$_(!0), h;
        }
        static _$CreateFromTemplate$_(t, s, i) {
            return S._$New$_(S._$TimelineState$_, t, s, i);
        }
        _$Release$_() {
            if (!this._$IsReleased$_()) {
                const t = this._$_runtime$_._$Dispatcher$_();
                this._$_timelineManager$_._$DeScheduleTimeline$_(this), this._$_timelineManager$_._$CompleteTimelineAndResolve$_(this);
                for (const s of this._$_tracks$_) s._$Release$_();
                S._$clearArray$_(this._$_tracks$_), this._$_tracks$_ = null, this._$_runtime$_ = null, 
                this._$_timelineManager$_ = null, this._$_timelineDataItem$_ = null, 
                this._$_released$_ = !0, this._$_playPromise$_ = null, this._$_playResolve$_ = null, 
                this._$FireReleaseEvent$_(t);
            }
        }
        _$FireReleaseEvent$_(t) {
            const s = S._$New$_(S.Event, "timelinestatereleased");
            s._$timelineState$_ = this, t.dispatchEvent(s);
        }
        _$GetType$_() {
            return 0;
        }
        _$CreateTrackStates$_() {
            for (const t of this._$_timelineDataItem$_._$GetTrackData$_()._$trackDataItems$_()) this._$_tracksLength$_ = this._$_tracks$_.push(S._$TrackState$_._$Create$_(this, t));
        }
        _$GetTimelineManager$_() {
            return this._$_timelineManager$_;
        }
        _$GetRuntime$_() {
            return this._$_runtime$_;
        }
        _$GetTracks$_() {
            return this._$_tracks$_;
        }
        _$GetSimilarPropertyTracks$_(e, n, h, r) {
            if (this._$_hasNestedContent$_) {
                let i;
                for (let s = 0; s < this._$_tracks$_.length; s++) {
                    let t = this._$_tracks$_[s];
                    if (e === t._$GetInstance$_()) {
                        const o = t._$GetPropertyTrack$_(h);
                        o && n.constructor === o._$GetSourceAdapter$_().constructor && o._$GetResultMode$_() === r._$GetResultMode$_() && (i = i || []).push(o);
                    }
                }
                return i;
            }
        }
        _$HasTracks$_() {
            return !!this._$_tracks$_.length;
        }
        _$GetTrackById$_(t) {
            for (const s of this._$_tracks$_) if (S._$equalsNoCase$_(s._$GetId$_(), t)) return s;
            return null;
        }
        _$GetTrackByName$_(t) {
            for (const s of this._$_tracks$_) if (!s._$IsInstanceTrack$_() && S._$equalsNoCase$_(s._$GetName$_(), t)) return s;
            return null;
        }
        _$SetName$_(t) {
            this._$_name$_ = t;
        }
        _$GetName$_() {
            return this._$_name$_;
        }
        _$GetTimelineDataItem$_() {
            return this._$_timelineDataItem$_;
        }
        _$GetTemplateName$_() {
            return this._$_timelineDataItem$_._$GetName$_();
        }
        _$GetTotalTime$_() {
            return this._$_timelineDataItem$_._$GetTotalTime$_();
        }
        _$SetTotalTime$_(t) {
            this._$_timelineDataItem$_._$SetTotalTime$_(t);
        }
        _$GetStep$_() {
            return this._$_timelineDataItem$_._$GetStep$_();
        }
        _$SetStep$_(t) {
            this._$_timelineDataItem$_._$SetStep$_(t);
        }
        _$GetInterpolationMode$_() {
            return this._$_timelineDataItem$_._$GetInterpolationMode$_();
        }
        _$SetInterpolationMode$_(t) {
            this._$_timelineDataItem$_._$SetInterpolationMode$_(t);
        }
        _$GetResultMode$_() {
            return this._$_timelineDataItem$_._$GetResultMode$_();
        }
        _$SetResultMode$_(t) {
            this._$_timelineDataItem$_._$GetResultMode$_(t);
        }
        _$SetEase$_(t) {
            for (const s of this._$GetTracks$_()) s._$SetEase$_(t);
        }
        _$GetLoop$_() {
            return this._$_timelineDataItem$_._$GetLoop$_();
        }
        _$SetLoop$_(t) {
            return this._$_timelineDataItem$_._$SetLoop$_(t);
        }
        _$GetPingPong$_() {
            return this._$_timelineDataItem$_._$GetPingPong$_();
        }
        _$SetPingPong$_(t) {
            return this._$_timelineDataItem$_._$SetPingPong$_(t);
        }
        _$GetRepeatCount$_() {
            return this._$_timelineDataItem$_._$GetRepeatCount$_();
        }
        _$SetRepeatCount$_(t) {
            return this._$_timelineDataItem$_._$SetRepeatCount$_(t);
        }
        _$SetPlaybackRate$_(t) {
            return this._$_playbackRate$_ = t;
        }
        _$GetPlaybackRate$_() {
            return this._$_playbackRate$_;
        }
        _$GetStartOnLayout$_() {
            return this._$_timelineDataItem$_._$GetStartOnLayout$_();
        }
        _$GetTransformWithSceneGraph$_() {
            return this._$_timelineDataItem$_._$GetTransformWithSceneGraph$_();
        }
        _$GetUseSystemTimescale$_() {
            return this._$_timelineDataItem$_._$GetUseSystemTimescale$_();
        }
        _$GetPingPongState$_() {
            return this._$_pingPongState$_;
        }
        _$IsForwardPlayBack$_() {
            return !this.IsPlaying() || 0 < this._$_playbackRate$_;
        }
        _$GetPlayPromise$_() {
            return this._$_playPromise$_ || (this._$_playPromise$_ = new Promise(t => {
                this._$_playResolve$_ = t;
            })), this._$_playPromise$_;
        }
        _$ResolvePlayPromise$_() {
            this._$_playPromise$_ && (this._$_playResolve$_(), this._$_playPromise$_ = null, 
            this._$_playResolve$_ = null);
        }
        _$SetTags$_(t) {
            this._$_tags$_ = S._$TimelineState$_._$_GetTagArray$_(t), this._$_tagsChanged$_ = !0;
        }
        _$GetTags$_() {
            return this._$_tags$_;
        }
        _$GetStringTags$_() {
            return this._$_tagsChanged$_ && (this._$_stringTags$_ = this._$_tags$_.join(" ")), 
            this._$_tagsChanged$_ = !1, this._$_stringTags$_;
        }
        _$HasTags$_(t) {
            if (!this._$_tags$_) return !1;
            if (!this._$_tags$_.length) return !1;
            const s = S._$TimelineState$_._$_GetTagArray$_(t);
            return !!s && !!s.length && s.every(S._$TimelineState$_._$_HasTag$_, this);
        }
        _$OnStarted$_() {
            S._$Plugins$_.Timeline && this.constructor === S._$TimelineState$_ && (S._$Plugins$_.Timeline._$Cnds$_.PushTriggerTimeline(this), 
            this._$_timelineManager$_._$Trigger$_(S._$Plugins$_.Timeline._$Cnds$_.OnTimelineStarted), 
            this._$_timelineManager$_._$Trigger$_(S._$Plugins$_.Timeline._$Cnds$_.OnTimelineStartedByName), 
            this._$_timelineManager$_._$Trigger$_(S._$Plugins$_.Timeline._$Cnds$_.OnTimelineStartedByTags), 
            this._$_timelineManager$_._$Trigger$_(S._$Plugins$_.Timeline._$Cnds$_.OnAnyTimelineStarted), 
            S._$Plugins$_.Timeline._$Cnds$_.PopTriggerTimeline());
        }
        _$OnCompleted$_() {
            this._$_completedTick$_ = this._$_runtime$_._$GetTickCount$_();
        }
        _$FinishTriggers$_() {
            this._$_finishedTriggers$_ || (this._$_finishedTriggers$_ = !0, S._$Plugins$_.Timeline && this.constructor === S._$TimelineState$_ && (S._$Plugins$_.Timeline._$Cnds$_.PushTriggerTimeline(this), 
            this._$_timelineManager$_._$Trigger$_(S._$Plugins$_.Timeline._$Cnds$_.OnTimelineFinished), 
            this._$_timelineManager$_._$Trigger$_(S._$Plugins$_.Timeline._$Cnds$_.OnTimelineFinishedByName), 
            this._$_timelineManager$_._$Trigger$_(S._$Plugins$_.Timeline._$Cnds$_.OnTimelineFinishedByTags), 
            this._$_timelineManager$_._$Trigger$_(S._$Plugins$_.Timeline._$Cnds$_.OnAnyTimelineFinished), 
            S._$Plugins$_.Timeline._$Cnds$_.PopTriggerTimeline()));
        }
        _$SetPlaying$_(t) {
            this._$_isPlaying$_ = t;
        }
        _$IsCompletedTick$_() {
            return this._$_completedTick$_ === this._$_runtime$_._$GetTickCount$_();
        }
        IsPlaying(t = !1) {
            return !!this._$IsCompletedTick$_() || !(!this._$IsScheduled$_() || t) || this._$_isPlaying$_;
        }
        _$_IsPlaying$_() {
            return this.IsPlaying(!0);
        }
        _$IsPaused$_() {
            return this._$_IsPaused$_();
        }
        _$_IsPaused$_() {
            return !(this._$IsReleased$_() || this._$IsScheduled$_() || this._$_IsPlaying$_() || this._$IsComplete$_());
        }
        _$SetScheduled$_(t) {
            this._$_isScheduled$_ = t;
        }
        _$IsScheduled$_() {
            return this._$_isScheduled$_;
        }
        _$SetComplete$_(t) {
            this._$_complete$_ = t;
            const s = this._$GetTime$_();
            (s <= 0 || s >= this._$GetTotalTime$_()) && (this._$_complete$_ = !0);
        }
        _$IsComplete$_() {
            return this._$_complete$_;
        }
        _$IsReleased$_() {
            return this._$_released$_;
        }
        _$SetMarkedForRemoval$_(t) {
            this._$_markedForRemoval$_ = t;
        }
        _$IsMarkedForRemoval$_() {
            return this._$_markedForRemoval$_;
        }
        _$SetImplicitPause$_(t) {
            this._$_implicitPause$_ = t;
        }
        _$IsImplicitPause$_() {
            return this._$_implicitPause$_;
        }
        _$SetIsTemplate$_(t) {
            this._$_isTemplate$_ = !!t;
        }
        _$IsTemplate$_() {
            return this._$_isTemplate$_;
        }
        _$InitialStateSet$_() {
            return this._$_initialStateSet$_;
        }
        _$GetTime$_() {
            return this._$_playheadTime$_;
        }
        _$SetTime$_(t) {
            const s = this._$GetTime$_();
            this._$_SetTime$_(t), this._$SetComplete$_(!1), this._$IsComplete$_() || this._$SetImplicitPause$_(!0), 
            !this._$_IsPlaying$_() && !this._$IsScheduled$_() && this._$_initialStateSet$_ || (this._$_IsPlaying$_() || this._$IsScheduled$_() || this._$_initialStateSet$_ ? this._$_IsPlaying$_() ? this._$Stop$_() : this._$IsScheduled$_() && (this._$_timelineManager$_._$DeScheduleTimeline$_(this), 
            this._$SetInitialStateFromSetTime$_()) : this._$SetInitialStateFromSetTime$_()), 
            this._$_SetUpdateStateBefore$_(), this._$_Interpolate$_(this._$GetTime$_(), !1, !0, !0, s), 
            this._$_SetUpdateStateAfter$_(), this._$_renderChange$_ && this._$GetRuntime$_()._$UpdateRender$_(), 
            this._$_OnSetTime$_();
        }
        _$_SetTime$_(t) {
            (t = S._$IsFiniteNumber$_(t) ? t : this._$GetTotalTime$_()) < 0 ? this._$_playheadTime$_ = 0 : t >= this._$GetTotalTime$_() ? this._$_playheadTime$_ = this._$GetTotalTime$_() : this._$_playheadTime$_ = t;
        }
        _$_SetTimeAndReset$_(t) {
            (t = S._$IsFiniteNumber$_(t) ? t : this._$GetTotalTime$_()) < 0 ? this._$_playheadTime$_ = 0 : t >= this._$GetTotalTime$_() ? this._$_playheadTime$_ = this._$GetTotalTime$_() : this._$_playheadTime$_ = t;
            for (const s of this._$_tracks$_) s._$SetResetState$_();
        }
        _$_OnSetTime$_() {
            S._$Plugins$_.Timeline && this.constructor === S._$TimelineState$_ && (S._$Plugins$_.Timeline._$Cnds$_.PushTriggerTimeline(this), 
            this._$_timelineManager$_._$Trigger$_(S._$Plugins$_.Timeline._$Cnds$_.OnTimeSet), 
            this._$_timelineManager$_._$Trigger$_(S._$Plugins$_.Timeline._$Cnds$_.OnTimeSetByName), 
            this._$_timelineManager$_._$Trigger$_(S._$Plugins$_.Timeline._$Cnds$_.OnTimeSetByTags), 
            S._$Plugins$_.Timeline._$Cnds$_.PopTriggerTimeline());
        }
        _$_CanResume$_() {
            if (!this._$GetLoop$_()) if (this._$GetPingPong$_() && 1 === this._$_pingPongState$_) {
                if (this._$IsForwardPlayBack$_()) {
                    if (this._$GetTime$_() >= this._$GetTotalTime$_()) return !1;
                } else if (this._$GetTime$_() <= 0) return !1;
            } else if (!this._$GetLoop$_() && !this._$GetPingPong$_()) if (this._$IsForwardPlayBack$_()) {
                if (this._$GetTime$_() >= this._$GetTotalTime$_()) return !1;
            } else if (this._$GetTime$_() <= 0) return !1;
            return !0;
        }
        _$Resume$_() {
            this._$IsReleased$_() || this._$_CanResume$_() && this.Play(!0);
        }
        Play(t = !1) {
            return !this._$IsReleased$_() && !this._$IsScheduled$_() && (this._$_IsPlaying$_() && this._$IsCompletedTick$_() ? this._$_SchedulePlayingTimeline$_() : !this._$_IsPlaying$_() && !!(this._$IsComplete$_() || t || this._$IsImplicitPause$_()) && this._$_ScheduleStoppedTimeline$_());
        }
        _$_SchedulePlayingTimeline$_() {
            return this._$SetImplicitPause$_(!1), this._$_timelineManager$_._$RemovePlayingTimeline$_(this), 
            this._$_timelineManager$_._$ScheduleTimeline$_(this), this._$GetPlayPromise$_(), 
            !0;
        }
        _$_ScheduleStoppedTimeline$_() {
            return this._$SetImplicitPause$_(!1), this._$_timelineManager$_._$ScheduleTimeline$_(this), 
            this._$GetPlayPromise$_(), !0;
        }
        _$Stop$_(t = !1) {
            this._$IsReleased$_() || (this._$SetComplete$_(t), this._$_timelineManager$_._$CompleteTimeline$_(this), 
            this._$IsComplete$_() && this._$ResolvePlayPromise$_());
        }
        _$Reset$_(t = !0, s = !1) {
            if (!this._$IsReleased$_()) {
                if (!this._$_IsPlaying$_() && this._$IsScheduled$_()) return this._$_timelineManager$_._$DeScheduleTimeline$_(this);
                if (!this._$IsComplete$_()) {
                    this._$Stop$_(!0), this._$IsForwardPlayBack$_() ? this._$_SetTime$_(0) : this._$_SetTime$_(this._$GetTotalTime$_());
                    const i = this._$GetTime$_();
                    this._$_SetUpdateStateBefore$_(), s ? this._$_InterpolateBeforeChangeLayout$_(i) : this._$_Interpolate$_(i, !1, !1, !0), 
                    t && this._$_OnSetTime$_(), this._$_SetUpdateStateAfter$_(), 
                    this._$_renderChange$_ && t && this._$GetRuntime$_()._$UpdateRender$_();
                }
            }
        }
        _$ResetBeforeChangeLayout$_() {
            this._$Reset$_(!1, !0);
        }
        _$_InterpolateBeforeChangeLayout$_(t) {
            this._$_Interpolate$_(t, !1, !1, !0, NaN, !1, !0);
        }
        _$_OnBeforeChangeLayout$_() {
            if (!this._$IsReleased$_()) {
                if (!this._$GetRuntime$_()._$IsLoadingState$_() && this._$HasValidGlobalTracks$_()) return !1;
                this._$_timelineManager$_._$CompleteTimelineBeforeChangeOfLayout$_(this), 
                this._$GetRuntime$_()._$IsLoadingState$_() || this._$ResetBeforeChangeLayout$_();
            }
            return !0;
        }
        _$SetInitialStateFromSetTime$_() {
            this._$SetInitialState$_(!0);
        }
        _$SetInitialStateForce$_() {
            this._$SetInitialState$_(!1, !0), this._$SetPlaying$_(!1), this._$SetScheduled$_(!1);
        }
        _$SetInitialState$_(t = !1, s = !1) {
            if (!this._$IsMarkedForRemoval$_() || s) {
                if (t) {
                    this._$_finishedTriggers$_ = !1, this._$_initialStateSet$_ = !0, 
                    this._$_firstTick$_ = !0, this._$_SetUpdateStateBefore$_();
                    for (const i of this._$_tracks$_) i._$SetInitialState$_();
                } else if (this._$SetPlaying$_(!0), this._$SetScheduled$_(!1), this._$OnStarted$_(), 
                this._$IsComplete$_()) {
                    this._$_completedTick$_ = -1, 0 !== this._$_pingPongState$_ && (this._$_playbackRate$_ = Math.abs(this._$_playbackRate$_)), 
                    this._$_pingPongState$_ = 0, this._$_currentRepeatCount$_ = 1, 
                    this._$_complete$_ = !1, this._$_finishedTriggers$_ = !1, this._$_initialStateSet$_ = !0, 
                    this._$_firstTick$_ = !0, this._$IsForwardPlayBack$_() ? this._$_SetTime$_(0) : this._$_SetTime$_(this._$GetTotalTime$_()), 
                    this._$_SetUpdateStateBefore$_();
                    for (const e of this._$_tracks$_) e._$SetInitialState$_();
                } else {
                    this._$_firstTick$_ = !0, this._$_finishedTriggers$_ = !1, this._$_SetUpdateStateBefore$_();
                    for (const n of this._$_tracks$_) n._$SetResumeState$_();
                }
                this._$_SetUpdateStateAfter$_();
            }
        }
        _$GetRenderChange$_() {
            return this._$_renderChange$_;
        }
        _$_SetUpdateStateBefore$_() {
            this._$_hasNestedContent$_ = 0;
            for (const t of this._$_tracks$_) t._$IsNested$_() && (this._$_hasNestedContent$_ = 1);
        }
        _$_SetUpdateStateAfter$_() {
            this._$_renderChange$_ = 0;
            for (const t of this._$_tracks$_) t._$_SetUpdateState$_(), 0 === this._$_renderChange$_ && 1 === t._$GetRenderChange$_() && (this._$_renderChange$_ = 1), 
            this._$_beforeAndAfterTracks$_ || 1 !== t._$GetNeedsBeforeAndAfter$_() || (this._$_beforeAndAfterTracks$_ || (this._$_beforeAndAfterTracks$_ = []), 
            this._$_beforeAndAfterTracksLength$_ = this._$_beforeAndAfterTracks$_.push(t));
        }
        _$Tick$_(t, s, i) {
            if (this._$GetUseSystemTimescale$_()) {
                if (0 === t && 0 === this._$_lastDelta$_) return;
                this._$_lastDelta$_ = t, t = i;
            } else {
                if (0 === i && 0 === this._$_lastDelta$_) return;
                t = this._$_lastDelta$_ = i, s = 1;
            }
            const e = this._$_playheadTime$_ + this._$_overshoot$_, n = t * s * this._$_playbackRate$_, h = e + n, r = this._$_timelineDataItem$_._$_totalTime$_;
            h < 0 ? (this._$_playheadTime$_ = 0, this._$_overshoot$_ = -h) : r <= h ? (this._$_playheadTime$_ = r, 
            this._$_overshoot$_ = this._$_playheadTime$_ - h) : (this._$_playheadTime$_ = h, 
            this._$_overshoot$_ = 0);
            let o = !1, a = !1, l = this._$GetLoop$_(), u = this._$GetPingPong$_();
            l || u ? l && !u ? 0 < this._$_playbackRate$_ ? this._$_playheadTime$_ >= r && (this._$_SetTimeAndReset$_(0), 
            a = !0) : this._$_playheadTime$_ <= 0 && (this._$_SetTimeAndReset$_(r), 
            a = !0) : !l && u ? 0 < this._$_playbackRate$_ ? this._$_playheadTime$_ >= r && (this._$_SetTime$_(r), 
            this._$SetPlaybackRate$_(-1 * this._$GetPlaybackRate$_()), a = !0, 1 === this._$_pingPongState$_ ? this._$_currentRepeatCount$_ < this._$GetRepeatCount$_() ? (this._$_currentRepeatCount$_++, 
            this._$_pingPongState$_ = 0) : o = !0 : 0 === this._$_pingPongState$_ && (this._$_pingPongState$_ = 1)) : this._$_playheadTime$_ <= 0 && (this._$_SetTime$_(0), 
            this._$SetPlaybackRate$_(-1 * this._$GetPlaybackRate$_()), a = !0, 1 === this._$_pingPongState$_ ? this._$_currentRepeatCount$_ < this._$GetRepeatCount$_() ? (this._$_currentRepeatCount$_++, 
            this._$_pingPongState$_ = 0) : o = !0 : 0 === this._$_pingPongState$_ && (this._$_pingPongState$_ = 1)) : l && u && (0 < this._$_playbackRate$_ ? this._$_playheadTime$_ >= r && (this._$_SetTime$_(r), 
            this._$SetPlaybackRate$_(-1 * this._$GetPlaybackRate$_()), a = !0, this._$_pingPongState$_++, 
            S.wrap(this._$_pingPongState$_, 0, 2)) : this._$_playheadTime$_ <= 0 && (this._$_SetTime$_(0), 
            this._$SetPlaybackRate$_(-1 * this._$GetPlaybackRate$_()), a = !0, this._$_pingPongState$_++, 
            S.wrap(this._$_pingPongState$_, 0, 2))) : 0 < this._$_playbackRate$_ ? this._$_playheadTime$_ >= r && (this._$_currentRepeatCount$_ < this._$GetRepeatCount$_() ? (this._$_currentRepeatCount$_++, 
            this._$_SetTimeAndReset$_(0), a = !0) : (this._$_SetTime$_(r), o = !0)) : this._$_playheadTime$_ <= 0 && (this._$_currentRepeatCount$_ < this._$GetRepeatCount$_() ? (this._$_currentRepeatCount$_++, 
            this._$_SetTimeAndReset$_(r), a = !0) : (this._$_SetTime$_(0), o = !0));
            let c, f = this._$_tracksLength$_;
            if (o) {
                for (c = 0; c < f; c++) this._$_tracks$_[c]._$SetEndState$_();
                this._$Stop$_(!0), this._$OnCompleted$_();
            } else {
                const d = this._$_beforeAndAfterTracksLength$_;
                for (c = 0; c < d; c++) this._$_beforeAndAfterTracks$_[c]._$BeforeInterpolate$_();
                if (1 === this._$_hasNestedContent$_) for (c = 0; c < f; c++) {
                    const p = this._$_tracks$_[c], m = p._$GetStartOffset$_(), g = this._$_playheadTime$_ - m, y = e - m;
                    g < 0 && 0 < y ? (this._$_playheadTime$_ = m < 0 ? 0 : r <= m ? r : m, 
                    p._$Interpolate$_(m, !0, !1, a, this._$_firstTick$_, !1)) : p._$Interpolate$_(this._$_playheadTime$_, !0, !1, a, this._$_firstTick$_, !1);
                } else for (c = 0; c < f; c++) this._$_tracks$_[c]._$Interpolate$_(this._$_playheadTime$_, !0, !1, a, this._$_firstTick$_, !1);
                for (c = 0; c < d; c++) this._$_beforeAndAfterTracks$_[c]._$AfterInterpolate$_();
                this._$_firstTick$_ && (this._$_firstTick$_ = !1);
            }
        }
        _$_Interpolate$_(s, i = !1, e = !1, n = !1, h = NaN, t = !1, r = !1) {
            for (const o of this._$_tracks$_) o._$BeforeInterpolate$_();
            for (const a of this._$_tracks$_) {
                let t = s;
                if ("number" == typeof h && !isNaN(h)) {
                    const l = this._$GetTime$_(), u = l - a._$GetStartOffset$_(), c = h - a._$GetStartOffset$_();
                    u < 0 && 0 < c && (t = a._$GetStartOffset$_(), this._$_SetTime$_(t));
                }
                a._$Interpolate$_(t, i, e, n, this._$_firstTick$_, r);
            }
            for (const f of this._$_tracks$_) f._$AfterInterpolate$_();
            this._$_firstTick$_ && t && (this._$_firstTick$_ = !1);
        }
        _$AddTrack$_() {
            const t = this._$_timelineDataItem$_._$GetTrackData$_()._$AddEmptyTrackDataItem$_(), s = S._$TrackState$_._$Create$_(this, t);
            return this._$_tracksLength$_ = this._$_tracks$_.push(s), s;
        }
        _$Removed$_() {
            if (!this._$IsReleased$_()) for (const t of this._$_tracks$_) t._$TimelineRemoved$_();
        }
        _$CleanCaches$_() {
            for (const t of this._$_tracks$_) t._$CleanCaches$_();
        }
        _$ClearTrackInstances$_() {
            for (const t of this._$_tracks$_) t._$ClearInstance$_();
        }
        _$SetTrackInstance$_(t, s, i) {
            if (s) {
                if ("number" == typeof i && 0 <= i) {
                    const e = this._$_tracks$_[i];
                    return e ? (e._$SetInstance$_(s), void this._$_timelineManager$_._$SetTimelineObjectClassToMap$_(s._$GetObjectClass$_(), this)) : void 0;
                }
                for (const n of this._$_tracks$_) if (n._$IsInstanceTrack$_()) if (t) {
                    if (n._$GetId$_() === t) {
                        n._$SetInstance$_(s), this._$_timelineManager$_._$SetTimelineObjectClassToMap$_(s._$GetObjectClass$_(), this);
                        break;
                    }
                } else if (!n._$HasInstance$_()) {
                    n._$SetInstance$_(s), this._$_timelineManager$_._$SetTimelineObjectClassToMap$_(s._$GetObjectClass$_(), this);
                    break;
                }
            }
        }
        _$HasTrackInstance$_(t, s) {
            for (const i of this._$_tracks$_) if (i._$IsInstanceTrack$_()) if (s) {
                if (s === i._$GetId$_() && t === i._$GetInstance$_()) return !0;
            } else if (t === i._$GetInstance$_()) return !0;
            return !1;
        }
        _$HasValidTracks$_() {
            return this._$_tracks$_.some(t => !t._$IsInstanceTrack$_() || t._$CanInstanceBeValid$_());
        }
        _$HasValidGlobalTracks$_() {
            return this._$_tracks$_.some(t => {
                if (t._$IsInstanceTrack$_()) {
                    if (!t._$CanInstanceBeValid$_()) return !1;
                    const s = t._$GetObjectClass$_();
                    return !!s && s._$IsGlobal$_();
                }
                return !1;
            });
        }
        _$GetPropertyTrack$_(t) {
            for (const s of this._$GetTracks$_()) for (const i of s._$GetPropertyTracks$_()) if (i._$GetPropertyName$_() === t) return i;
        }
        _$GetTrackFromInstance$_(t) {
            for (const s of this._$_tracks$_) if (t === s._$GetInstance$_()) return s;
            return null;
        }
        _$GetKeyframeWithTags$_(t) {
            let s = t ? t.split(" ") : [], i = new Set(s.map(t => t.toLowerCase().trim()));
            s = [ ...i.values() ];
            for (const e of this._$GetTracks$_()) for (const n of e._$GetKeyframeDataItems$_()) {
                const h = s.every(t => n._$HasTag$_(t));
                if (h) return n;
            }
        }
        _$GetObjectClasses$_() {
            const t = [];
            for (const s of this._$GetTracks$_()) t.push(s._$GetObjectClass$_());
            return t.filter(t => t);
        }
        _$_OnAfterLoad$_() {
            for (const t of this._$GetTracks$_()) t._$_OnAfterLoad$_();
        }
        _$_SaveToJson$_() {
            return {
                tracksJson: this._$_SaveTracksToJson$_(),
                name: this._$_name$_,
                playheadTime: this._$GetTime$_(),
                playbackRate: this._$_playbackRate$_,
                pingPongState: this._$_pingPongState$_,
                currentRepeatCount: this._$_currentRepeatCount$_,
                isPlaying: this._$_isPlaying$_,
                isScheduled: this._$_isScheduled$_,
                initialStateSet: this._$_initialStateSet$_,
                finishedTriggers: this._$_finishedTriggers$_,
                complete: this._$_complete$_,
                released: this._$_released$_,
                markedForRemoval: this._$_markedForRemoval$_,
                completedTick: this._$_completedTick$_,
                implicitPause: this._$_implicitPause$_,
                isTemplate: this._$_isTemplate$_,
                tags: this._$_tags$_.join(" "),
                stringTags: this._$_stringTags$_,
                tagsChanged: this._$_tagsChanged$_,
                firstTick: this._$_firstTick$_
            };
        }
        _$_LoadFromJson$_(t) {
            t && (this._$_LoadTracksFromJson$_(t.tracksJson), this._$_name$_ = t.name, 
            this._$_playheadTime$_ = t.playheadTime, this._$_playbackRate$_ = t.playbackRate, 
            this._$_pingPongState$_ = t.pingPongState, this._$_currentRepeatCount$_ = t.currentRepeatCount, 
            this._$_isPlaying$_ = !!t.isPlaying, this._$_isScheduled$_ = !!t.isScheduled, 
            this._$_initialStateSet$_ = !!t.initialStateSet, this._$_finishedTriggers$_ = !!t.hasOwnProperty("finishedTriggers") && !!t.finishedTriggers, 
            this._$_complete$_ = !!t.complete, this._$_released$_ = !!t.released, 
            this._$_markedForRemoval$_ = !!t.markedForRemoval, this._$_completedTick$_ = t.completedTick, 
            this._$_implicitPause$_ = !!t.implicitPause, this._$_isTemplate$_ = !!t.isTemplate, 
            this._$_tags$_ = t.tags.split(" "), this._$_stringTags$_ = t.stringTags, 
            this._$_tagsChanged$_ = !!t.tagsChanged, this._$_firstTick$_ = !!t.firstTick);
        }
        _$_SaveTracksToJson$_() {
            return this._$_tracks$_.map(t => t._$_SaveToJson$_());
        }
        _$_LoadTracksFromJson$_(t) {
            this._$ClearTrackInstances$_(), t.forEach((t, s) => {
                const i = this._$_tracks$_[s];
                i._$_LoadFromJson$_(t);
            }), this._$_tracks$_.filter(t => t._$CanInstanceBeValid$_());
        }
        static _$_HasTag$_(t) {
            const s = this._$GetTags$_();
            return "" === t ? 1 === s.length && "" === s[0] : s.map(t => t.toLowerCase()).includes(t.toLowerCase());
        }
        static _$_GetTagArray$_(t) {
            if (S._$IsArray$_(t)) return t.slice(0);
            if (S._$IsString$_(t)) return t.split(" ");
            throw new Error("invalid tags");
        }
        _$GetITimelineState$_() {
            return this._$_iTimelineState$_ || (this._$_iTimelineState$_ = S._$New$_(self._$ITimelineState$_, this)), 
            this._$_iTimelineState$_;
        }
    };
}

{
    const Fh = self._$C3$_;
    Fh._$TrackState$_ = class extends Fh._$DefendedBase$_ {
        constructor(t, s) {
            super(), this._$_timeline$_ = t, this._$_trackDataItem$_ = s, this._$_trackData$_ = s._$GetTrackData$_(), 
            this._$_instanceUid$_ = NaN, this._$_objectClassIndex$_ = NaN, this._$_instance$_ = null, 
            this._$_worldInfo$_ = null, this._$_cleared$_ = !1, this._$_isNested$_ = 0 < s._$GetStartOffset$_(), 
            this._$_initialStateOfNestedSet$_ = !1, this._$_endStateOfNestedSet$_ = !1, 
            this._$_instanceUidToLoad$_ = NaN, this._$_lastKeyframeDataItem$_ = null, 
            this._$_keyframeDataItems$_ = this._$_trackDataItem$_._$GetKeyframeData$_()._$GetKeyframeDataItemArray$_(), 
            this._$_propertyTracks$_ = [], this._$CreatePropertyTrackStates$_(), 
            this._$_worldInfoChange$_ = 0, this._$_renderChange$_ = 0, this._$_needsBeforeAndAfter$_ = 0;
        }
        static _$Create$_(t, s) {
            return Fh._$New$_(Fh._$TrackState$_, t, s);
        }
        _$Release$_() {
            this._$_keyframeDataItems$_ = null;
            for (const t of this._$_propertyTracks$_) t._$Release$_();
            Fh._$clearArray$_(this._$_propertyTracks$_), this._$_propertyTracks$_ = null, 
            this._$_timeline$_ = null, this._$_instance$_ = null, this._$_worldInfo$_ = null, 
            this._$_trackDataItem$_ = null, this._$_lastKeyframeDataItem$_ = null;
        }
        _$CreatePropertyTrackStates$_() {
            for (const t of this._$_trackDataItem$_._$GetPropertyTrackData$_()._$propertyTrackDataItems$_()) this._$_propertyTracks$_.push(Fh._$PropertyTrackState$_._$Create$_(this, t));
        }
        _$TimelineRemoved$_() {
            for (const t of this._$_propertyTracks$_) t._$TimelineRemoved$_();
        }
        _$CleanCaches$_() {
            for (const t of this._$_propertyTracks$_) t._$CleanCaches$_();
            this._$_instance$_ = null, this._$_worldInfo$_ = null;
        }
        _$GetTimeline$_() {
            return this._$_timeline$_;
        }
        _$GetRuntime$_() {
            return this._$_timeline$_._$GetRuntime$_();
        }
        _$GetKeyframeDataItems$_() {
            return this._$_keyframeDataItems$_ || (this._$_keyframeDataItems$_ = this._$_trackDataItem$_._$GetKeyframeData$_()._$GetKeyframeDataItemArray$_()), 
            this._$_keyframeDataItems$_;
        }
        _$GetPropertyTracks$_() {
            return this._$_propertyTracks$_;
        }
        _$GetPropertyTrack$_(s) {
            for (let t = 0; t < this._$_propertyTracks$_.length; t++) {
                const i = this._$_propertyTracks$_[t];
                if (i._$GetPropertyName$_() === s) return i;
            }
        }
        _$MaybeGetInstance$_() {
            this._$_instance$_ || this._$GetInstance$_();
        }
        _$IsInstanceValid$_() {
            return !!this._$_instance$_ && !this._$_instance$_._$IsDestroyed$_();
        }
        _$CanInstanceBeValid$_() {
            if (!this._$IsInstanceTrack$_()) return !1;
            const t = this._$GetInstanceUID$_(), s = this._$GetRuntime$_()._$GetInstanceByUID$_(t);
            return !!s && !s._$IsDestroyed$_();
        }
        _$GetObjectClass$_() {
            if (this._$IsInstanceTrack$_()) {
                const t = this._$GetObjectClassIndex$_();
                if (-1 !== t) return this._$GetRuntime$_()._$GetObjectClassByIndex$_(t);
            }
        }
        _$GetTrackIndexInTimeline$_() {
            return this._$_timeline$_._$GetTracks$_().indexOf(this);
        }
        _$ClearInstance$_() {
            this._$_instance$_ = null, this._$_instanceUid$_ = NaN, this._$_worldInfo$_ = null, 
            this._$_objectClassIndex$_ = NaN, this._$_cleared$_ = !0;
        }
        _$HasInstance$_() {
            return !!this._$_instance$_;
        }
        _$GetInstance$_() {
            if (!this._$_cleared$_) {
                if (!this._$_instance$_ || !this._$IsInstanceValid$_()) {
                    const t = this._$GetInstanceUID$_();
                    this._$_instance$_ = this._$GetRuntime$_()._$GetInstanceByUID$_(t);
                }
                return this._$_instance$_;
            }
        }
        _$SetInstance$_(t) {
            if (this._$_cleared$_ = !1, this._$_instance$_ !== t) {
                this._$CleanCaches$_(), this._$_instance$_ = t, this._$_objectClassIndex$_ = t._$GetObjectClass$_()._$GetIndex$_(), 
                this._$_instanceUid$_ = t._$GetUID$_(), this._$_worldInfo$_ = t._$GetWorldInfo$_();
                for (const s of this._$propertyTrackItems$_()) {
                    const i = s._$propertyTrack$_, e = s._$sourceAdapter$_, n = i._$GetSourceAdapterId$_();
                    switch (n) {
                      case "instance-variable":
                        {
                            e._$GetEditorIndex$_();
                            const h = t._$GetObjectClass$_(), r = h._$GetInstanceVariableIndexByName$_(s.name), o = h._$GetInstanceVariableName$_(r), a = h._$GetInstanceVariableType$_(r);
                            o === s.name && a === s.type && e._$UpdateInstanceVariableIndex$_(r);
                            break;
                        }

                      case "behavior":
                        {
                            const l = s._$behaviorType$_, u = this._$GetObjectClass$_(), c = t._$GetObjectClass$_(), f = e._$GetBehaviorType$_(c);
                            if (l && f) {
                                const d = l._$GetName$_();
                                u._$GetBehaviorIndexByName$_(d), c._$GetBehaviorIndexByName$_(d), 
                                e._$GetEditorIndex$_(), e._$UpdateBehaviorTypeSid$_(f._$GetSID$_());
                            }
                            break;
                        }
                    }
                }
            }
        }
        *_$propertyTrackItems$_() {
            for (const t of this._$_propertyTracks$_) {
                const s = t._$GetSourceAdapter$_(), i = this._$GetObjectClass$_(), e = {
                    _$propertyTrack$_: t,
                    _$sourceAdapter$_: s
                };
                switch (t._$GetSourceAdapterId$_()) {
                  case "world-instance":
                    e.property = t._$GetPropertyName$_();
                    break;

                  case "instance-variable":
                    {
                        const n = s._$GetEditorIndex$_();
                        e.name = i._$GetInstanceVariableName$_(n), e.type = i._$GetInstanceVariableType$_(n);
                        break;
                    }

                  case "effect":
                    {
                        const h = i._$GetEffectList$_(), r = s._$GetEffectType$_(h);
                        e._$effectType$_ = r;
                        break;
                    }

                  case "behavior":
                    {
                        const o = s._$GetBehaviorType$_(i);
                        e._$behaviorType$_ = o;
                        break;
                    }

                  case "plugin":
                    e._$plugin$_ = i._$GetPlugin$_();
                }
                yield e;
            }
        }
        _$GetWorldInfo$_() {
            if (!this._$_worldInfo$_ || !this._$IsInstanceValid$_()) {
                const t = this._$GetInstance$_();
                t && (this._$_worldInfo$_ = t._$GetWorldInfo$_());
            }
            return this._$_worldInfo$_;
        }
        _$GetTrackDataItem$_() {
            return this._$_trackDataItem$_;
        }
        _$GetInstanceUID$_() {
            return isNaN(this._$_instanceUid$_) ? this._$_trackDataItem$_._$GetInstanceUID$_() : this._$_instanceUid$_;
        }
        _$SetInstanceUID$_(t) {
            this._$_trackDataItem$_._$SetInstanceUID$_(t);
        }
        _$GetInterpolationMode$_() {
            return this._$_trackDataItem$_._$GetInterpolationMode$_();
        }
        _$SetInterpolationMode$_(t) {
            this._$_trackDataItem$_._$SetInterpolationMode$_(t);
        }
        _$GetResultMode$_() {
            return this._$_trackDataItem$_._$GetResultMode$_();
        }
        _$GetId$_() {
            return this._$_trackDataItem$_._$GetId$_();
        }
        _$GetStartOffset$_() {
            return this._$_trackDataItem$_._$GetStartOffset$_();
        }
        _$GetLocalTotalTime$_() {
            return this._$_trackDataItem$_._$GetLocalTotalTime$_();
        }
        _$SetLocalTotalTime$_(t) {
            this._$_trackDataItem$_._$SetLocalTotalTime$_(t);
        }
        _$SetResultMode$_(t) {
            this._$_trackDataItem$_._$SetResultMode$_(t);
        }
        _$SetEase$_(t) {
            for (const s of this._$GetKeyframeDataItems$_()) s._$SetEase$_(t);
            for (const i of this._$GetPropertyTracks$_()) i._$SetEase$_(t);
        }
        _$GetEnable$_() {
            return this._$_trackDataItem$_._$GetEnable$_();
        }
        _$SetEnable$_(t) {
            this._$_trackDataItem$_._$SetEnable$_(t);
        }
        _$GetObjectClassIndex$_() {
            return isNaN(this._$_objectClassIndex$_) ? this._$_trackDataItem$_._$GetObjectClassIndex$_() : this._$_objectClassIndex$_;
        }
        _$SetObjectClassIndex$_(t) {
            this._$_trackDataItem$_._$SetObjectClassIndex$_(t);
        }
        _$SetOriginalWidth$_(t) {
            this._$_trackDataItem$_._$SetOriginalWidth$_(t);
        }
        _$GetOriginalWidth$_() {
            const t = this._$GetInstance$_();
            if (t) {
                const s = t._$GetSdkInstance$_();
                if (s._$IsOriginalSizeKnown$_()) return t._$GetSdkInstance$_()._$GetOriginalWidth$_();
            }
            return this._$_trackDataItem$_._$GetOriginalWidth$_();
        }
        _$SetOriginalHeight$_(t) {
            this._$_trackDataItem$_._$SetOriginalHeight$_(t);
        }
        _$GetOriginalHeight$_() {
            const t = this._$GetInstance$_();
            if (t) {
                const s = t._$GetSdkInstance$_();
                if (s._$IsOriginalSizeKnown$_()) return t._$GetSdkInstance$_()._$GetOriginalHeight$_();
            }
            return this._$_trackDataItem$_._$GetOriginalHeight$_();
        }
        _$GetType$_() {
            return this._$_trackDataItem$_._$GetType$_();
        }
        _$GetName$_() {
            return this._$_trackDataItem$_._$GetName$_();
        }
        _$IsInstanceTrack$_() {
            return 0 === this._$GetType$_();
        }
        _$IsValueTrack$_() {
            return 1 === this._$GetType$_();
        }
        _$IsAudioTrack$_() {
            return 2 === this._$GetType$_();
        }
        _$GetWorldInfoChange$_() {
            return this._$_worldInfoChange$_;
        }
        _$GetRenderChange$_() {
            return this._$_renderChange$_;
        }
        _$GetNeedsBeforeAndAfter$_() {
            return this._$_needsBeforeAndAfter$_;
        }
        _$IsNested$_() {
            return this._$_isNested$_;
        }
        _$SetResetState$_() {
            for (const t of this._$_propertyTracks$_) t._$SetResetState$_();
        }
        _$SetInitialState$_() {
            if (this._$MaybeGetInstance$_(), this._$IsInstanceValid$_() || !this._$IsInstanceTrack$_()) {
                const t = this._$GetTimeline$_(), s = t._$IsForwardPlayBack$_(), i = s ? 0 : this._$GetLocalTotalTime$_();
                for (const n of this._$_propertyTracks$_) n._$SetInitialState$_(i), 
                0 === this._$_worldInfoChange$_ && 1 === n._$GetWorldInfoChange$_() && (this._$_worldInfoChange$_ = 1), 
                0 === this._$_renderChange$_ && 1 === n._$GetRenderChange$_() && (this._$_renderChange$_ = 1);
                this._$_needsBeforeAndAfter$_ = 0;
                const e = this._$_propertyTracks$_.some(t => t._$GetNeedsBeforeAndAfter$_());
                e && (this._$_needsBeforeAndAfter$_ = 1), this._$_lastKeyframeDataItem$_ = this._$_GetLastKeyFrameBeforeTime$_(i), 
                this._$_initialStateOfNestedSet$_ = !1, this._$_endStateOfNestedSet$_ = !1, 
                this._$Interpolate$_(i), this._$OnKeyframeReached$_(this._$_GetLastKeyFrameBeforeTime$_(i));
            }
        }
        _$SetResumeState$_() {
            if (this._$MaybeGetInstance$_(), this._$IsInstanceValid$_() || !this._$IsInstanceTrack$_()) {
                this._$_timeline$_._$IsForwardPlayBack$_();
                const t = this._$_timeline$_._$GetTime$_() - this._$GetStartOffset$_();
                this._$_lastKeyframeDataItem$_ = this._$_GetLastKeyFrameBeforeTime$_(t);
                for (const s of this._$_propertyTracks$_) s._$SetResumeState$_(t);
            }
        }
        _$SetEndState$_() {
            if (!this._$GetTimeline$_()._$IsComplete$_() && (this._$MaybeGetInstance$_(), 
            this._$IsInstanceValid$_() || !this._$IsInstanceTrack$_()) && !this._$_isNested$_) {
                const t = this._$_timeline$_._$GetTime$_(), s = this._$GetStartOffset$_() + this._$GetLocalTotalTime$_();
                s <= t ? this._$Interpolate$_(this._$GetLocalTotalTime$_(), !0, !1, !0, !1, !1, !0) : t <= 0 && this._$Interpolate$_(0, !0, !1, !0, !1, !1, !0);
            }
        }
        _$_SetUpdateState$_() {
            for (let t = 0, s = this._$_propertyTracks$_.length; t < s; t++) {
                const i = this._$_propertyTracks$_[t];
                i._$_SetUpdateState$_(), 0 === this._$_worldInfoChange$_ && 1 === i._$GetWorldInfoChange$_() && (this._$_worldInfoChange$_ = 1), 
                0 === this._$_renderChange$_ && 1 === i._$GetRenderChange$_() && (this._$_renderChange$_ = 1);
            }
        }
        _$BeforeInterpolate$_() {
            const s = this._$_propertyTracks$_.length;
            for (let t = 0; t < s; t++) this._$_propertyTracks$_[t]._$BeforeInterpolate$_();
        }
        _$Interpolate$_(i, t = !1, e = !1, n = !1, s = !1, h = !1, r = !1) {
            this._$_instance$_ || this._$GetInstance$_();
            const o = this._$_instance$_ && !this._$_instance$_._$IsDestroyed$_(), a = 0 === this._$_trackDataItem$_._$_type$_;
            if ((o || !a) && !(h && a && this._$GetObjectClass$_()._$IsGlobal$_() || (i -= this._$GetStartOffset$_()) < 0)) {
                this._$MaybeSetInitialStateOfNestedTrack$_(i, t), this._$MaybeTriggerKeyframeReachedConditions$_(i, t, s);
                for (let t = 0, s = this._$_propertyTracks$_.length; t < s; t++) this._$_propertyTracks$_[t]._$Interpolate$_(i, e, n, r);
                this._$MaybeSetEndStateOfNestedTrack$_(i, t), 0 !== this._$_worldInfoChange$_ && (this._$_worldInfo$_ || (this._$_worldInfo$_ = this._$_instance$_._$GetWorldInfo$_()), 
                this._$_worldInfo$_) && this._$_worldInfo$_._$SetBboxChanged$_();
            }
        }
        _$AfterInterpolate$_() {
            const s = this._$_propertyTracks$_.length;
            for (let t = 0; t < s; t++) this._$_propertyTracks$_[t]._$AfterInterpolate$_();
        }
        _$MaybeSetInitialStateOfNestedTrack$_(t, s) {
            if (s && this._$_isNested$_ && !this._$_initialStateOfNestedSet$_) {
                const i = this._$GetTimeline$_();
                if (i._$IsForwardPlayBack$_()) {
                    if (t < 0) return;
                } else if (t > this._$GetLocalTotalTime$_()) return;
                for (const e of this._$_propertyTracks$_) e._$SetInitialState$_();
                this._$_initialStateOfNestedSet$_ = !0;
            }
        }
        _$MaybeSetEndStateOfNestedTrack$_(t, s) {
            if (s && this._$_isNested$_ && !this._$_endStateOfNestedSet$_) {
                const i = this._$GetTimeline$_();
                if (i._$IsForwardPlayBack$_()) {
                    if (t >= this._$GetLocalTotalTime$_()) {
                        for (const e of this._$_propertyTracks$_) e._$Interpolate$_(this._$GetLocalTotalTime$_(), !1, !0);
                        this._$_endStateOfNestedSet$_ = !0;
                    }
                } else if (t <= 0) {
                    for (const n of this._$_propertyTracks$_) n._$Interpolate$_(0, !1, !0);
                    this._$_endStateOfNestedSet$_ = !0;
                }
            }
        }
        _$MaybeTriggerKeyframeReachedConditions$_(t, s, i) {
            if (!i && s && Fh._$Plugins$_.Timeline) {
                const e = this._$GetTimeline$_(), n = this._$_lastKeyframeDataItem$_._$GetNext$_(), h = this._$_lastKeyframeDataItem$_._$GetTime$_(), r = n ? n._$GetTime$_() : e._$GetTotalTime$_();
                if (t <= h || r <= t) if (this._$_lastKeyframeDataItem$_ = this._$_trackData$_._$GetFirstKeyFrameDataItemLowerOrEqualThan$_(t, this._$_trackDataItem$_), 
                e._$IsForwardPlayBack$_()) n && this._$OnKeyframeReached$_(this._$_lastKeyframeDataItem$_); else {
                    const o = this._$_lastKeyframeDataItem$_._$GetNext$_();
                    o && this._$OnKeyframeReached$_(o);
                }
            }
        }
        _$_GetLastKeyFrameBeforeTime$_(t) {
            const s = this._$_trackData$_._$GetKeyFrameDataItemAtTime$_(t, this._$_trackDataItem$_);
            return s || this._$_trackData$_._$GetFirstKeyFrameDataItemLowerOrEqualThan$_(t, this._$_trackDataItem$_);
        }
        _$OnKeyframeReached$_(t) {
            if (Fh._$Plugins$_.Timeline) {
                const s = this._$GetTimeline$_(), i = s._$GetTimelineManager$_();
                Fh._$Plugins$_.Timeline._$Cnds$_.PushTriggerTimeline(s), Fh._$Plugins$_.Timeline._$Cnds$_.PushTriggerKeyframe(t), 
                i._$Trigger$_(Fh._$Plugins$_.Timeline._$Cnds$_.OnAnyKeyframeReached), 
                i._$Trigger$_(Fh._$Plugins$_.Timeline._$Cnds$_._$OnKeyframeReached$_), 
                Fh._$Plugins$_.Timeline._$Cnds$_.PopTriggerTimeline(s), Fh._$Plugins$_.Timeline._$Cnds$_.PopTriggerKeyframe(t);
            }
        }
        _$AddKeyframe$_() {
            const t = this._$_trackDataItem$_._$GetKeyframeData$_(), s = t._$AddEmptyKeyframeDataItem$_();
            return s;
        }
        _$AddPropertyTrack$_() {
            const t = this._$_trackDataItem$_._$GetPropertyTrackData$_(), s = t._$AddEmptyPropertyTrackDataItem$_(), i = Fh._$PropertyTrackState$_._$Create$_(this, s);
            return this._$_propertyTracks$_.push(i), i;
        }
        _$DeleteKeyframes$_(t) {
            const s = this._$_trackDataItem$_._$GetKeyframeData$_();
            s._$DeleteKeyframeDataItems$_(t);
        }
        _$DeletePropertyKeyframes$_(t) {
            for (const s of this._$_propertyTracks$_) s._$DeletePropertyKeyframes$_(t);
        }
        _$SaveState$_() {
            for (const t of this._$_propertyTracks$_) t._$SaveState$_();
        }
        _$CompareInitialStateWithCurrent$_() {
            if (this._$MaybeGetInstance$_(), this._$IsInstanceValid$_() || !this._$IsInstanceTrack$_()) for (const t of this._$_propertyTracks$_) t._$CompareInitialStateWithCurrent$_();
        }
        _$CompareSaveStateWithCurrent$_() {
            if (this._$MaybeGetInstance$_(), this._$IsInstanceValid$_() || !this._$IsInstanceTrack$_()) {
                let t = !1;
                for (const s of this._$_propertyTracks$_) {
                    const i = s._$CompareSaveStateWithCurrent$_();
                    !t && i && (t = !0);
                }
                if (t) {
                    const e = this._$AddKeyframe$_();
                    e._$SetTime$_(this._$GetTimeline$_()._$GetTime$_()), e._$SetEase$_("noease"), 
                    e._$SetEnable$_(!0), e._$SetTags$_("");
                }
            }
        }
        _$_OnAfterLoad$_() {
            isNaN(this._$_instanceUidToLoad$_) || this._$_LoadInstanceFromJson$_(this._$_instanceUidToLoad$_), 
            this._$_instanceUidToLoad$_ = NaN;
        }
        _$_SaveToJson$_() {
            const t = this._$GetInstance$_(), s = t ? t._$GetUID$_() : this._$GetInstanceUID$_();
            return {
                propertyTracksJson: this._$_SavePropertyTracksToJson$_(),
                lastKeyframeDataItemJson: this._$_SaveLastKeyframeDataItemToJson$_(),
                initialStateOfNestedSet: this._$_initialStateOfNestedSet$_,
                endStateOfNestedSet: this._$_endStateOfNestedSet$_,
                instanceUid: s,
                cleared: this._$_cleared$_
            };
        }
        _$_LoadFromJson$_(t) {
            if (t) {
                this._$_LoadPropertyTracksFromJson$_(t.propertyTracksJson), this._$_LoadLastKeyframeDataItemFromJson$_(t.lastKeyframeDataItemJson), 
                this._$_instanceUidToLoad$_ = t.instanceUid, this._$_initialStateOfNestedSet$_ = !1, 
                t.hasOwnProperty.initialStateOfNestedSet && (this._$_initialStateOfNestedSet$_ = t.initialStateOfNestedSet), 
                this._$_endStateOfNestedSet$_ = !1, t.hasOwnProperty.endStateOfNestedSet && (this._$_endStateOfNestedSet$_ = t.endStateOfNestedSet), 
                this._$_cleared$_ = !!t.hasOwnProperty("cleared") && t.cleared;
                for (const s of this._$_propertyTracks$_) 0 === this._$_worldInfoChange$_ && 1 === s._$GetWorldInfoChange$_() && (this._$_worldInfoChange$_ = 1), 
                0 === this._$_renderChange$_ && 1 === s._$GetRenderChange$_() && (this._$_renderChange$_ = 1);
                this._$_needsBeforeAndAfter$_ = 0, this._$_propertyTracks$_.some(t => t._$GetNeedsBeforeAndAfter$_()) && (this._$_needsBeforeAndAfter$_ = 1);
            }
        }
        _$_SaveLastKeyframeDataItemToJson$_() {
            const t = this._$_trackDataItem$_._$GetKeyframeData$_();
            return t._$GetKeyframeDataItemIndex$_(this._$_lastKeyframeDataItem$_);
        }
        _$_SavePropertyTracksToJson$_() {
            return this._$_propertyTracks$_.map(t => t._$_SaveToJson$_());
        }
        _$_LoadPropertyTracksFromJson$_(t) {
            t.forEach((t, s) => {
                const i = this._$_propertyTracks$_[s];
                i._$_LoadFromJson$_(t);
            });
        }
        _$_LoadInstanceFromJson$_(t) {
            if (Fh._$IsFiniteNumber$_(t)) {
                const s = this._$GetRuntime$_()._$GetInstanceByUID$_(t);
                if (s) {
                    const i = this._$GetTimeline$_();
                    i._$SetTrackInstance$_(this._$_trackDataItem$_._$GetId$_(), s, this._$GetTrackIndexInTimeline$_());
                }
            }
        }
        _$_LoadLastKeyframeDataItemFromJson$_(t) {
            const s = this._$_trackDataItem$_._$GetKeyframeData$_();
            this._$_lastKeyframeDataItem$_ = s._$GetKeyframeDataItemFromIndex$_(t);
        }
    };
}

{
    const jh = self._$C3$_;
    jh._$PropertyTrackState$_ = class extends jh._$DefendedBase$_ {
        constructor(t, s) {
            super(), this._$_track$_ = t, this._$_propertyTrackDataItem$_ = s, this._$_propertyTrackData$_ = s._$GetPropertyTrackData$_(), 
            this._$_worldInfoChange$_ = 0, this._$_renderChange$_ = 0, this._$_needsBeforeAndAfter$_ = 0, 
            this._$_sourceAdapter$_ = this._$GetSourceAdapter$_(), this._$_propertyKeyframeDataItems$_ = this._$_propertyTrackDataItem$_._$GetPropertyKeyframeData$_()._$GetPropertyKeyframeDataItemArray$_(), 
            this._$_lastPropertyKeyframeDataItem$_ = null, this._$_absoluteValueObject$_ = null;
        }
        static _$Create$_(t, s) {
            return jh._$New$_(jh._$PropertyTrackState$_, t, s);
        }
        _$Release$_() {
            this._$_track$_ = null, this._$_sourceAdapter$_ && (this._$_sourceAdapter$_._$Release$_(), 
            this._$_sourceAdapter$_ = null), this._$_propertyKeyframeDataItems$_ = null, 
            this._$_propertyTrackDataItem$_ = null, this._$_propertyTrackData$_ = null;
        }
        _$GetWorldInfoChange$_() {
            return this._$_worldInfoChange$_;
        }
        _$GetRenderChange$_() {
            return this._$_renderChange$_;
        }
        _$GetNeedsBeforeAndAfter$_() {
            return this._$_needsBeforeAndAfter$_;
        }
        _$HasAbsoluteValueObject$_() {
            return !!this._$_absoluteValueObject$_;
        }
        _$SetAbsoluteValueObject$_(t) {
            this._$_absoluteValueObject$_ = t;
        }
        _$GetAbsoluteValueObject$_() {
            return this._$_absoluteValueObject$_;
        }
        _$GetTrack$_() {
            return this._$_track$_;
        }
        _$GetPropertyTrackDataItem$_() {
            return this._$_propertyTrackDataItem$_;
        }
        _$GetPropertyTrackData$_() {
            return this._$_propertyTrackData$_;
        }
        _$GetTimeline$_() {
            return this._$_track$_._$GetTimeline$_();
        }
        _$GetRuntime$_() {
            return this._$_track$_._$GetRuntime$_();
        }
        _$GetInstance$_() {
            return this._$_track$_._$GetInstance$_();
        }
        _$GetSourceAdapter$_() {
            if (!this._$_sourceAdapter$_) {
                let t = this._$_propertyTrackDataItem$_._$GetSourceAdapterId$_(), s;
                switch (t) {
                  case "behavior":
                    s = new jh._$PropertyTrackState$_._$BehaviorSourceAdapter$_(this);
                    break;

                  case "effect":
                    s = new jh._$PropertyTrackState$_._$EffectSourceAdapter$_(this), 
                    this._$_renderChange$_ = 1;
                    break;

                  case "instance-variable":
                    s = new jh._$PropertyTrackState$_._$InstanceVariableSourceAdapter$_(this);
                    break;

                  case "plugin":
                    s = new jh._$PropertyTrackState$_._$PluginSourceAdapter$_(this), 
                    this._$_renderChange$_ = 1;
                    break;

                  case "world-instance":
                    s = new jh._$PropertyTrackState$_._$PropertySourceAdapter$_(this), 
                    this._$_renderChange$_ = 1, this._$_worldInfoChange$_ = 1;
                    break;

                  case "value":
                    s = new jh._$PropertyTrackState$_._$ValueSourceAdapter$_(this);
                    break;

                  case "audio":
                    s = new jh._$PropertyTrackState$_._$AudioSourceAdapter$_(this);
                }
                this._$_sourceAdapter$_ = s;
            }
            return this._$_sourceAdapter$_;
        }
        _$GetSourceAdapterId$_() {
            return this._$_propertyTrackDataItem$_._$GetSourceAdapterId$_();
        }
        _$SetSourceAdapterId$_(t) {
            this._$_propertyTrackDataItem$_._$SetSourceAdapterId$_(t);
        }
        _$GetSourceAdapterArgs$_() {
            return this._$_propertyTrackDataItem$_._$GetSourceAdapterArguments$_();
        }
        _$SetSourceAdapterArgs$_(t) {
            this._$_propertyTrackDataItem$_._$SetSourceAdapterArguments$_(t);
        }
        _$GetSourceAdapterValue$_() {
            return this._$GetSourceAdapter$_()._$GetValue$_();
        }
        _$GetPropertyName$_() {
            return this._$_propertyTrackDataItem$_._$GetProperty$_();
        }
        _$SetPropertyName$_(t) {
            this._$_propertyTrackDataItem$_._$SetProperty$_(t);
        }
        _$GetPropertyType$_() {
            return this._$_propertyTrackDataItem$_._$GetType$_();
        }
        _$SetPropertyType$_(t) {
            this._$_propertyTrackDataItem$_._$SetType$_(t);
        }
        _$GetPropertyKeyframeType$_() {
            return this._$GetPropertyTrackData$_()._$GetFirstPropertyKeyframeDataItem$_(this._$_propertyTrackDataItem$_)._$GetType$_();
        }
        _$GetMin$_() {
            return this._$_propertyTrackDataItem$_._$GetMin$_();
        }
        _$SetMin$_(t) {
            this._$_propertyTrackDataItem$_._$SetMin$_(t);
        }
        _$GetMax$_() {
            return this._$_propertyTrackDataItem$_._$GetMax$_();
        }
        _$SetMax$_(t) {
            this._$_propertyTrackDataItem$_._$SetMax$_(t);
        }
        _$GetEnable$_() {
            return this._$_propertyTrackDataItem$_._$GetEnable$_();
        }
        _$SetEnable$_(t) {
            this._$_propertyTrackDataItem$_._$SetEnable$_(t);
        }
        _$GetInterpolationMode$_() {
            return this._$_propertyTrackDataItem$_._$GetInterpolationMode$_();
        }
        _$SetInterpolationMode$_(t) {
            this._$_propertyTrackDataItem$_._$SetInterpolationMode$_(t);
        }
        _$GetResultMode$_() {
            return this._$_propertyTrackDataItem$_._$GetResultMode$_();
        }
        _$SetResultMode$_(t) {
            this._$_propertyTrackDataItem$_._$SetResultMode$_(t);
        }
        _$SetEase$_(t) {
            for (const s of this._$GetPropertyKeyframeDataItems$_()) s._$SetEase$_(t);
        }
        _$CanHavePropertyKeyframes$_() {
            return this._$_propertyTrackDataItem$_._$CanHavePropertyKeyframes$_();
        }
        _$GetPropertyKeyframeDataItems$_() {
            return this._$_propertyKeyframeDataItems$_ || (this._$_propertyKeyframeDataItems$_ = this._$_propertyTrackDataItem$_._$GetPropertyKeyframeData$_()._$GetPropertyKeyframeDataItemArray$_()), 
            this._$_propertyKeyframeDataItems$_;
        }
        _$GetPropertyKeyframeDataItemArrayIncludingDisabled$_() {
            return this._$_propertyTrackDataItem$_._$GetPropertyKeyframeData$_()._$GetPropertyKeyframeDataItemArrayIncludingDisabled$_();
        }
        _$GetPropertyKeyFrameDataItemAtTime$_(t) {
            return this._$_propertyTrackData$_._$GetPropertyKeyFrameDataItemAtTime$_(t, this._$_propertyTrackDataItem$_);
        }
        _$GetFirstPropertyKeyFrameDataItemLowerOrEqualThan$_(t) {
            return this._$_propertyTrackData$_._$GetFirstPropertyKeyFrameDataItemLowerOrEqualThan$_(t, this._$_propertyTrackDataItem$_);
        }
        _$GetPropertyKeyframeDataItemPairForTime$_(t) {
            let s = this._$_propertyTrackData$_._$GetPropertyKeyFrameDataItemAtTime$_(t, this._$_propertyTrackDataItem$_), i;
            return i = s ? this._$_propertyTrackData$_._$GetFirstPropertyKeyFrameDataItemHigherThan$_(t, this._$_propertyTrackDataItem$_) : (s = this._$_propertyTrackData$_._$GetFirstPropertyKeyFrameDataItemLowerOrEqualThan$_(t, this._$_propertyTrackDataItem$_), 
            this._$_propertyTrackData$_._$GetFirstPropertyKeyFrameDataItemHigherOrEqualThan$_(t, this._$_propertyTrackDataItem$_)), 
            {
                start: s,
                end: i
            };
        }
        *_$GetPropertyKeyframeValues$_() {
            for (const t of this._$GetPropertyKeyframeDataItems$_()) yield t._$GetValueWithResultMode$_();
        }
        *_$GetPropertyKeyframeTimes$_() {
            for (const t of this._$GetPropertyKeyframeDataItems$_()) yield t._$GetTime$_();
        }
        _$TimelineRemoved$_() {
            this._$GetSourceAdapter$_()._$TimelineRemoved$_();
        }
        _$CleanCaches$_() {
            this._$GetSourceAdapter$_()._$CleanCaches$_();
        }
        _$GetCurrentState$_() {
            return this._$GetSourceAdapter$_()._$GetCurrentState$_();
        }
        _$SetResetState$_() {
            this._$GetSourceAdapter$_()._$SetResetState$_();
        }
        _$SetInitialState$_(t) {
            this._$GetSourceAdapter$_()._$SetInitialState$_(), this._$_lastPropertyKeyframeDataItem$_ = this._$_GetLastPropertyKeyFrameBeforeTime$_(t), 
            this._$_SetUpdateState$_();
        }
        _$SetResumeState$_(t) {
            this._$GetSourceAdapter$_()._$SetResumeState$_(), this._$_lastPropertyKeyframeDataItem$_ = this._$_GetLastPropertyKeyFrameBeforeTime$_(t);
        }
        _$_SetUpdateState$_() {
            const t = this._$GetTrack$_();
            if (this._$_needsBeforeAndAfter$_ = 0, t._$IsInstanceTrack$_()) {
                const s = this._$GetTimeline$_(), i = t._$GetInstance$_(), e = this._$GetSourceAdapter$_(), n = this._$GetPropertyName$_(), h = e._$MayNeedBeforeAndAfterInterpolate$_();
                if (h) {
                    const r = s._$GetSimilarPropertyTracks$_(i, e, n, this);
                    r && r.length && (this._$_needsBeforeAndAfter$_ = 1);
                } else this._$_needsBeforeAndAfter$_ = 0;
            }
        }
        _$_GetLastPropertyKeyFrameBeforeTime$_(t) {
            const s = this._$GetTimeline$_(), i = this._$_propertyTrackData$_._$GetPropertyKeyFrameDataItemAtTime$_(t, this._$_propertyTrackDataItem$_);
            return i || (s._$IsForwardPlayBack$_() ? this._$_propertyTrackData$_._$GetFirstPropertyKeyFrameDataItemLowerOrEqualThan$_(t, this._$_propertyTrackDataItem$_) : this._$_propertyTrackData$_._$GetFirstPropertyKeyFrameDataItemHigherOrEqualThan$_(t, this._$_propertyTrackDataItem$_));
        }
        _$BeforeInterpolate$_() {
            this._$_sourceAdapter$_._$BeforeInterpolate$_();
        }
        _$Interpolate$_(t, s = !1, i = !1, e = !1) {
            let n, h, r = !1;
            if (s) n = this._$_propertyTrackData$_._$GetFirstPropertyKeyFrameDataItemLowerOrEqualThan$_(t, this._$_propertyTrackDataItem$_); else {
                if (this._$_lastPropertyKeyframeDataItem$_) {
                    const o = this._$GetTimeline$_(), a = this._$_lastPropertyKeyframeDataItem$_._$GetNext$_(), l = this._$_lastPropertyKeyframeDataItem$_._$GetTime$_(), u = a ? a._$GetTime$_() : o._$GetTotalTime$_();
                    (t <= l || u <= t) && (this._$_lastPropertyKeyframeDataItem$_ = this._$_propertyTrackData$_._$GetFirstPropertyKeyFrameDataItemLowerOrEqualThan$_(t, this._$_propertyTrackDataItem$_), 
                    r = !0);
                } else this._$_lastPropertyKeyframeDataItem$_ = this._$_propertyTrackData$_._$GetFirstPropertyKeyFrameDataItemLowerOrEqualThan$_(t, this._$_propertyTrackDataItem$_), 
                r = !0;
                n = this._$_lastPropertyKeyframeDataItem$_;
            }
            n && (h = n._$GetNext$_()), this._$_sourceAdapter$_._$Interpolate$_(t, n, h, s, i, e, r);
        }
        _$GetInterpolatedValue$_(t) {
            if (this._$_lastPropertyKeyframeDataItem$_) {
                const e = this._$GetTimeline$_(), n = this._$_lastPropertyKeyframeDataItem$_._$GetNext$_(), h = this._$_lastPropertyKeyframeDataItem$_._$GetTime$_(), r = n ? n._$GetTime$_() : e._$GetTotalTime$_();
                (t <= h || r <= t) && (this._$_lastPropertyKeyframeDataItem$_ = this._$_propertyTrackData$_._$GetFirstPropertyKeyFrameDataItemLowerOrEqualThan$_(t, this._$_propertyTrackDataItem$_));
            } else this._$_lastPropertyKeyframeDataItem$_ = this._$_propertyTrackData$_._$GetFirstPropertyKeyFrameDataItemLowerOrEqualThan$_(t, this._$_propertyTrackDataItem$_);
            const s = this._$_lastPropertyKeyframeDataItem$_, i = s._$GetNext$_();
            return this._$_sourceAdapter$_._$GetInterpolatedValue$_(t, s, i);
        }
        _$GetInterpolatedValueFast$_(t, s, i) {
            return this._$_sourceAdapter$_._$GetInterpolatedValue$_(t, s, i);
        }
        _$AfterInterpolate$_() {
            this._$_sourceAdapter$_._$AfterInterpolate$_();
        }
        static _$GetStartPropertyKeyframeForTime$_(t, s) {
            const i = s._$GetPropertyTrackDataItem$_(), e = s._$_propertyTrackData$_;
            return e._$GetFirstPropertyKeyFrameDataItemLowerOrEqualThan$_(t, i);
        }
        static _$GetEndPropertyKeyframeForTime$_(t, s) {
            const i = s._$GetPropertyTrackDataItem$_(), e = s._$_propertyTrackData$_;
            return e._$GetFirstPropertyKeyFrameDataItemHigherOrEqualThan$_(t, i);
        }
        _$AddPropertyKeyframe$_() {
            const t = this._$_propertyTrackDataItem$_._$GetPropertyKeyframeData$_(), s = t._$AddEmptyPropertyKeyframeDataItem$_();
            return this._$_lastPropertyKeyframeDataItem$_ = null, s;
        }
        _$DeletePropertyKeyframes$_(t) {
            this._$_lastPropertyKeyframeDataItem$_ = null;
            const s = this._$_propertyTrackDataItem$_._$GetPropertyKeyframeData$_();
            s._$DeletePropertyKeyframeDataItems$_(t);
        }
        _$SaveState$_() {
            this._$GetSourceAdapter$_()._$SaveState$_();
        }
        _$CompareInitialStateWithCurrent$_() {
            const t = this._$GetSourceAdapter$_()._$CompareInitialStateWithCurrent$_();
            if (t) {
                const s = this._$_propertyTrackData$_._$GetFirstPropertyKeyframeDataItem$_(this._$_propertyTrackDataItem$_), i = this._$GetSourceAdapter$_()._$GetCurrentState$_();
                s._$SetAbsoluteValue$_(i);
            }
        }
        _$CompareSaveStateWithCurrent$_() {
            const t = this._$GetSourceAdapter$_()._$CompareSaveStateWithCurrent$_();
            return t && this._$AddPropertyKeyframeAtCurrentTime$_(), this._$GetSourceAdapter$_()._$ClearSaveState$_(), 
            t;
        }
        _$AddPropertyKeyframeAtCurrentTime$_() {
            const t = this._$GetTimeline$_()._$GetTime$_(), s = this._$GetSourceAdapter$_(), i = jh._$PropertyTrackState$_._$GetStartPropertyKeyframeForTime$_(t, this), e = this._$AddPropertyKeyframe$_();
            e._$SetType$_(i._$GetType$_()), e._$SetTime$_(t), e._$SetEase$_(i._$GetEase$_()), 
            e._$SetEnable$_(!0), e._$SetValue$_(s._$GetValueAtTime$_()), e._$SetAbsoluteValue$_(s._$GetCurrentState$_());
        }
        _$_SaveToJson$_() {
            return {
                sourceAdapterJson: this._$GetSourceAdapter$_()._$_SaveToJson$_()
            };
        }
        _$_LoadFromJson$_(t) {
            t && this._$GetSourceAdapter$_()._$_LoadFromJson$_(t.sourceAdapterJson);
        }
    };
}

{
    const zh = self._$C3$_, Bh = zh._$PropertyTrackState$_;
    Bh._$PropertySourceAdapter$_ = class {
        constructor(t) {
            this._$_propertyTrack$_ = t, this._$_propertyAdapter$_ = null, this._$GetPropertyAdapter$_();
        }
        _$Release$_() {
            this._$_propertyAdapter$_ && (this._$_propertyAdapter$_._$Release$_(), 
            this._$_propertyAdapter$_ = null), this._$_propertyTrack$_ = null;
        }
        _$MayNeedBeforeAndAfterInterpolate$_() {
            return this._$_propertyAdapter$_._$MayNeedBeforeAndAfterInterpolate$_();
        }
        _$GetPropertyTrack$_() {
            return this._$_propertyTrack$_;
        }
        _$TimelineRemoved$_() {
            this._$_propertyAdapter$_ && this._$_propertyAdapter$_._$TimelineRemoved$_();
        }
        _$CleanCaches$_() {
            this._$_propertyAdapter$_ && this._$_propertyAdapter$_._$CleanCaches$_();
        }
        _$GetPropertyAdapter$_() {
            return this._$_propertyAdapter$_ || (this._$_propertyAdapter$_ = this._$_CreatePropertyAdapter$_()), 
            this._$_propertyAdapter$_;
        }
        _$GetEditorIndex$_() {}
        _$GetIndex$_() {
            return this._$GetEditorIndex$_();
        }
        _$GetTarget$_() {}
        _$SetResetState$_() {
            this._$GetPropertyAdapter$_()._$SetResetState$_();
        }
        _$SetInitialState$_() {
            this._$GetPropertyAdapter$_()._$SetInitialState$_();
        }
        _$SetResumeState$_() {
            this._$GetPropertyAdapter$_()._$SetResumeState$_();
        }
        _$BeforeInterpolate$_() {
            this._$_propertyAdapter$_._$BeforeChangeProperty$_();
        }
        _$Interpolate$_(t, s, i, e, n, h, r) {
            let o = this._$_propertyTrack$_._$GetPropertyKeyframeType$_(), a;
            switch (o) {
              case "numeric":
                a = Bh._$NumericTypeAdapter$_._$Interpolate$_(t, s, i, this._$_propertyTrack$_);
                break;

              case "angle":
                a = Bh._$AngleTypeAdapter$_._$Interpolate$_(t, s, i, this._$_propertyTrack$_);
                break;

              case "boolean":
                a = Bh._$BooleanTypeAdapter$_._$Interpolate$_(t, s, i, this._$_propertyTrack$_);
                break;

              case "color":
                a = Bh._$ColorTypeAdapter$_._$Interpolate$_(t, s, i, this._$_propertyTrack$_);
                break;

              case "text":
                a = Bh._$TextTypeAdapter$_._$Interpolate$_(t, s, i, this._$_propertyTrack$_);
            }
            this._$_propertyAdapter$_._$ChangeProperty$_(t, a, s, i, e, n, h, r);
        }
        _$GetInterpolatedValue$_(t, s, i) {
            switch (this._$_propertyTrack$_._$GetPropertyKeyframeType$_()) {
              case "numeric":
                return Bh._$NumericTypeAdapter$_._$Interpolate$_(t, s, i, this._$_propertyTrack$_);

              case "angle":
                return Bh._$AngleTypeAdapter$_._$Interpolate$_(t, s, i, this._$_propertyTrack$_);

              case "boolean":
                return Bh._$BooleanTypeAdapter$_._$Interpolate$_(t, s, i, this._$_propertyTrack$_);

              case "color":
                return Bh._$ColorTypeAdapter$_._$Interpolate$_(t, s, i, this._$_propertyTrack$_);

              case "text":
                return Bh._$TextTypeAdapter$_._$Interpolate$_(t, s, i, this._$_propertyTrack$_);
            }
        }
        _$AfterInterpolate$_() {
            this._$_propertyAdapter$_._$AfterChangeProperty$_();
        }
        _$SaveState$_() {
            this._$GetPropertyAdapter$_()._$SetSaveState$_();
        }
        _$ClearSaveState$_() {
            this._$GetPropertyAdapter$_()._$ClearSaveState$_();
        }
        _$GetCurrentState$_() {
            return this._$GetPropertyAdapter$_()._$GetCurrentState$_();
        }
        _$CompareInitialStateWithCurrent$_() {
            return this._$GetPropertyAdapter$_()._$CompareInitialStateWithCurrent$_();
        }
        _$CompareSaveStateWithCurrent$_() {
            return this._$GetPropertyAdapter$_()._$CompareSaveStateWithCurrent$_();
        }
        _$GetValueAtTime$_() {
            const t = this._$_propertyTrack$_, s = t._$GetTrack$_(), i = s._$GetTimeline$_()._$GetTime$_(), e = Bh._$GetStartPropertyKeyframeForTime$_(i, t), n = e._$GetNext$_(), h = t._$GetPropertyKeyframeType$_();
            switch (h) {
              case "numeric":
                return Bh._$NumericTypeAdapter$_._$Interpolate$_(i, e, n, t);

              case "angle":
                return Bh._$AngleTypeAdapter$_._$Interpolate$_(i, e, n, t);

              case "boolean":
                return Bh._$BooleanTypeAdapter$_._$Interpolate$_(i, e, n, t);

              case "color":
                return Bh._$ColorTypeAdapter$_._$Interpolate$_(i, e, n, t);

              case "text":
                return Bh._$TextTypeAdapter$_._$Interpolate$_(i, e, n, t);
            }
        }
        _$_CreatePropertyAdapter$_() {
            const t = this._$_propertyTrack$_, s = t._$CanHavePropertyKeyframes$_() ? t._$GetPropertyKeyframeType$_() : "";
            switch (s) {
              case "combo":
              case "boolean":
              case "text":
              case "string":
                return new Bh._$PropertyInterpolationAdapter$_._$NoInterpolationAdapter$_(this);

              case "numeric":
              case "number":
              case "angle":
                return new ("combo" === this._$_propertyTrack$_._$GetPropertyType$_() ? Bh._$PropertyInterpolationAdapter$_._$NoInterpolationAdapter$_ : Bh._$PropertyInterpolationAdapter$_._$NumericInterpolationAdapter$_)(this);

              case "color":
              case "offsetColor":
                return new Bh._$PropertyInterpolationAdapter$_._$ColorInterpolationAdapter$_(this);

              default:
                return new Bh._$PropertyInterpolationAdapter$_._$NumericInterpolationAdapter$_(this);
            }
        }
        _$_SaveToJson$_() {
            return {
                propertyAdapterJson: this._$GetPropertyAdapter$_()._$_SaveToJson$_()
            };
        }
        _$_LoadFromJson$_(t) {
            t && this._$GetPropertyAdapter$_()._$_LoadFromJson$_(t.propertyAdapterJson);
        }
    };
}

{
    const Uh = self._$C3$_;
    class Wh extends Uh._$PropertyTrackState$_._$PropertySourceAdapter$_ {
        constructor(t) {
            super(t), this._$_updatedIndex$_ = NaN;
        }
        _$GetEditorIndex$_() {
            return this._$_propertyTrack$_._$GetPropertyTrackDataItem$_()._$GetSourceAdapterArguments$_()[0];
        }
        _$GetIndex$_() {
            return this._$_updatedIndex$_ || super._$GetIndex$_();
        }
        _$GetTarget$_() {
            return this._$_propertyTrack$_._$GetTrack$_()._$GetInstance$_();
        }
        _$UpdateInstanceVariableIndex$_(t) {
            const s = this._$_propertyTrack$_._$GetPropertyTrackDataItem$_()._$GetSourceAdapterArguments$_()[0];
            s !== t && (this._$_updatedIndex$_ = t);
        }
        _$Interpolate$_(t, s, i, e, n, h, r) {
            this._$GetPropertyAdapter$_()._$CanChange$_(s._$GetValue$_()) && super._$Interpolate$_(t, s, i, e, n, h, r);
        }
        _$GetInterpolatedValue$_(t, s, i) {
            if (this._$GetPropertyAdapter$_()._$CanChange$_(s._$GetValue$_())) return super._$GetInterpolatedValue$_(t, s, i);
        }
        _$_SaveToJson$_() {
            return Object.assign(super._$_SaveToJson$_(), {
                index: this._$_updatedIndex$_
            });
        }
        _$_LoadFromJson$_(t) {
            t && (super._$_LoadFromJson$_(t), this._$_updatedIndex$_ = t.index);
        }
    }
    Uh._$PropertyTrackState$_._$InstanceVariableSourceAdapter$_ = Wh;
}

{
    const Qh = self._$C3$_;
    class Vh extends Qh._$PropertyTrackState$_._$PropertySourceAdapter$_ {
        constructor(t) {
            super(t), this._$_sid$_ = NaN;
        }
        _$GetEditorIndex$_() {
            const t = this._$_propertyTrack$_._$GetPropertyTrackDataItem$_();
            return t._$GetSourceAdapterArguments$_()[1];
        }
        _$GetTarget$_() {
            const t = this._$_propertyTrack$_._$GetPropertyTrackDataItem$_(), s = this._$_propertyTrack$_._$GetTrack$_(), i = this._$_sid$_ || t._$GetSourceAdapterArguments$_()[0], e = s._$GetInstance$_(), n = e._$GetBehaviorIndexBySID$_(i), h = e._$GetBehaviorInstances$_()[n];
            return h._$GetSdkInstance$_();
        }
        _$GetBehaviorType$_(t) {
            const s = this._$_propertyTrack$_._$GetPropertyTrackDataItem$_(), i = s._$GetSourceAdapterArguments$_()[2];
            return t._$GetBehaviorTypeByName$_(i);
        }
        _$UpdateBehaviorTypeSid$_(t) {
            const s = this._$_propertyTrack$_._$GetPropertyTrackDataItem$_();
            s._$GetSourceAdapterArguments$_()[0] !== t && (this._$_sid$_ = t);
        }
        _$Interpolate$_(t, s, i, e, n, h, r) {
            const o = this._$_propertyTrack$_._$GetTrack$_(), a = o._$GetInstance$_();
            this._$GetBehaviorType$_(a._$GetObjectClass$_()) && super._$Interpolate$_(t, s, i, e, n, h, r);
        }
        _$GetInterpolatedValue$_(t, s, i) {
            const e = this._$_propertyTrack$_._$GetTrack$_(), n = e._$GetInstance$_();
            if (this._$GetBehaviorType$_(n._$GetObjectClass$_())) return super._$GetInterpolatedValue$_(t, s, i);
        }
        _$_SaveToJson$_() {
            return Object.assign(super._$_SaveToJson$_(), {
                sid: this._$_sid$_
            });
        }
        _$_LoadFromJson$_(t) {
            t && (super._$_LoadFromJson$_(t), this._$_sid$_ = t.sid);
        }
    }
    Qh._$PropertyTrackState$_._$BehaviorSourceAdapter$_ = Vh;
}

{
    const Jh = self._$C3$_;
    class Yh extends Jh._$PropertyTrackState$_._$PropertySourceAdapter$_ {
        constructor(t) {
            super(t);
        }
        _$GetEditorIndex$_() {
            return this._$_propertyTrack$_._$GetPropertyTrackDataItem$_()._$GetSourceAdapterArguments$_()[1];
        }
        _$GetTarget$_() {
            const t = this._$_propertyTrack$_, s = t._$GetTrack$_(), i = s._$GetWorldInfo$_(), e = i._$GetInstanceEffectList$_(), n = e._$GetEffectList$_(), h = this._$GetEffectType$_(n), r = h._$GetIndex$_();
            return e._$IsEffectIndexActive$_(r) ? e._$GetEffectParametersForIndex$_(r) : null;
        }
        _$GetEffectType$_(t) {
            const s = this._$_propertyTrack$_, i = s._$GetPropertyTrackDataItem$_()._$GetSourceAdapterArguments$_()[0];
            return t._$GetEffectTypeByName$_(i);
        }
        _$Interpolate$_(t, s, i, e, n, h, r) {
            this._$_IsEffectActive$_() && super._$Interpolate$_(t, s, i, e, n, h, r);
        }
        _$GetInterpolatedValue$_(t, s, i) {
            if (this._$_IsEffectActive$_()) return super._$GetInterpolatedValue$_(t, s, i);
        }
        _$_IsEffectActive$_() {
            const t = this._$_propertyTrack$_, s = t._$GetTrack$_(), i = s._$GetWorldInfo$_(), e = i._$GetInstanceEffectList$_(), n = e._$GetEffectList$_(), h = this._$GetEffectType$_(n);
            if (h) {
                const r = h._$GetIndex$_();
                return e._$IsEffectIndexActive$_(r);
            }
        }
    }
    Jh._$PropertyTrackState$_._$EffectSourceAdapter$_ = Yh;
}

{
    const Hh = self._$C3$_;
    class qh extends Hh._$PropertyTrackState$_._$PropertySourceAdapter$_ {
        constructor(t) {
            super(t);
        }
        _$GetEditorIndex$_() {
            return this._$_propertyTrack$_._$GetPropertyTrackDataItem$_()._$GetSourceAdapterArguments$_()[0];
        }
        _$GetTarget$_() {
            return this._$_propertyTrack$_._$GetTrack$_()._$GetInstance$_()._$GetSdkInstance$_();
        }
        _$Interpolate$_(t, s, i, e, n, h, r) {
            const o = this._$_propertyTrack$_._$GetTrack$_(), a = o._$GetObjectClass$_()._$GetPlugin$_(), l = o._$GetInstance$_()._$GetObjectClass$_()._$GetPlugin$_();
            a === l && super._$Interpolate$_(t, s, i, e, n, h, r);
        }
        _$GetInterpolatedValue$_(t, s, i) {
            const e = this._$_propertyTrack$_._$GetTrack$_(), n = e._$GetObjectClass$_()._$GetPlugin$_(), h = e._$GetInstance$_()._$GetObjectClass$_()._$GetPlugin$_();
            if (n === h) return super._$GetInterpolatedValue$_(t, s, i);
        }
        _$GetOptionalCallbacks$_() {
            const t = this._$_propertyTrack$_._$GetTrack$_(), s = t._$GetObjectClass$_()._$GetPlugin$_();
            if (Hh._$Plugins$_._$Sprite$_ && s instanceof Hh._$Plugins$_._$Sprite$_ && ("initial-frame" === this._$_propertyTrack$_._$GetPropertyName$_() || "initial-animation" === this._$_propertyTrack$_._$GetPropertyName$_())) switch (this._$_propertyTrack$_._$GetResultMode$_()) {
              case "relative":
              case "absolute":
                return null;
            }
        }
    }
    Hh._$PropertyTrackState$_._$PluginSourceAdapter$_ = qh;
}

{
    const Zh = self._$C3$_;
    class Xh extends Zh._$PropertyTrackState$_._$PropertySourceAdapter$_ {
        constructor(t) {
            super(t), this._$_value$_ = 0, this._$_init$_ = !1;
        }
        _$MayNeedBeforeAndAfterInterpolate$_() {
            return !1;
        }
        _$SetInitialState$_() {
            let t = this._$_propertyTrack$_._$GetPropertyTrackData$_(), s = this._$_propertyTrack$_._$GetPropertyTrackDataItem$_();
            s = t._$GetFirstPropertyKeyframeDataItem$_(s), this._$_value$_ = s._$GetValueWithResultMode$_();
        }
        _$SetResumeState$_() {}
        _$GetValue$_() {
            return this._$_init$_ || this._$_propertyTrack$_._$Interpolate$_(0), 
            this._$_value$_;
        }
        _$Interpolate$_(t, s, i, e, n, h, r) {
            this._$_value$_ = Zh._$PropertyTrackState$_._$NumericTypeAdapter$_._$Interpolate$_(t, s, i, this._$_propertyTrack$_), 
            this._$_init$_ = !0;
        }
        _$SaveState$_() {}
        _$ClearSaveState$_() {}
        _$GetCurrentState$_() {
            return this._$_value$_;
        }
        _$CompareInitialStateWithCurrent$_() {
            return !1;
        }
        _$CompareSaveStateWithCurrent$_() {
            return !1;
        }
        _$_SaveToJson$_() {
            return {
                value: this._$_value$_,
                init: this._$_init$_
            };
        }
        _$_LoadFromJson$_(t) {
            t && (this._$_value$_ = t.value, this._$_init$_ = !t.hasOwnProperty("init") || t.init);
        }
    }
    Zh._$PropertyTrackState$_._$ValueSourceAdapter$_ = Xh;
}

{
    const Kh = self._$C3$_;
    class $h extends Kh._$PropertyTrackState$_._$PropertySourceAdapter$_ {
        constructor(t) {
            super(t), this._$_audioPlaybackStarted$_ = !1, this._$_sdkInstance$_ = null, 
            this._$_actions$_ = null, this._$_expressions$_ = null, this._$_timeline$_ = this._$_propertyTrack$_._$GetTimeline$_(), 
            this._$_track$_ = this._$_propertyTrack$_._$GetTrack$_(), this._$_sourceAdapterArgs$_ = this._$_propertyTrack$_._$GetSourceAdapterArgs$_(), 
            this._$_fileArgs$_ = this._$_sourceAdapterArgs$_[0], this._$_startOffsetTime$_ = this._$_sourceAdapterArgs$_[1], 
            this._$_sourceAdapterArgs$_[3] ? this._$_audioTag$_ = this._$_sourceAdapterArgs$_[3] : this._$_audioTag$_ = Math.random().toString(36).slice(2), 
            this._$_pauseTime$_ = NaN, this._$_pauseVolume$_ = NaN, this._$_volume$_ = NaN, 
            this._$_audioSource$_ = null, this._$_Initialize$_();
        }
        _$Release$_() {
            super._$Release$_(), this._$_sdkInstance$_ = null, this._$_actions$_ = null, 
            this._$_expressions$_ = null, this._$_timeline$_ = null, this._$_track$_ = null, 
            this._$_sourceAdapterArgs$_ = null, this._$_fileArgs$_ = null, this._$_audioSource$_ = null;
        }
        _$_Initialize$_() {
            if (self._$C3$_._$Plugins$_.Audio) {
                const t = this._$_propertyTrack$_._$GetRuntime$_(), s = t._$GetSingleGlobalObjectClassByCtor$_(self._$C3$_._$Plugins$_.Audio);
                s && (this._$_sdkInstance$_ = s._$GetSingleGlobalInstance$_()._$GetSdkInstance$_()), 
                this._$_actions$_ = self._$C3$_._$Plugins$_.Audio._$Acts$_, this._$_expressions$_ = self._$C3$_._$Plugins$_.Audio._$Exps$_;
            }
        }
        _$_MaybeSetAudioSource$_() {
            if (!this._$_audioSource$_) {
                const t = this._$_propertyTrack$_._$GetTrack$_(), s = t._$GetPropertyTrack$_("audioSource");
                s && (this._$_audioSource$_ = s._$GetSourceAdapter$_());
            }
        }
        _$_GetPauseVolume$_() {
            const t = this._$_propertyTrack$_._$GetTrack$_(), s = t._$GetPropertyTrack$_("volume");
            return (s ? s._$GetSourceAdapter$_() : this)._$_pauseVolume$_;
        }
        _$TimelineRemoved$_() {
            super._$TimelineRemoved$_(), this._$_audioPlaybackStarted$_ = !1, this._$_sdkInstance$_ && (this._$_expressions$_ && (this._$_pauseTime$_ = this._$_expressions$_._$PlaybackTime$_.call(this._$_sdkInstance$_, this._$_audioTag$_), 
            this._$_pauseVolume$_ = this._$_expressions$_._$Volume$_.call(this._$_sdkInstance$_, this._$_audioTag$_)), 
            this._$_actions$_) && this._$_actions$_._$Stop$_.call(this._$_sdkInstance$_, this._$_audioTag$_);
        }
        _$GetAudioTag$_() {
            return this._$_audioTag$_;
        }
        _$GetVolume$_() {
            return this._$_volume$_;
        }
        _$SetVolume$_(t) {
            this._$_volume$_ = t;
        }
        _$SetInitialState$_() {
            super._$SetInitialState$_(), this._$_pauseTime$_ = NaN, this._$_audioPlaybackStarted$_ = !1;
        }
        _$SetResumeState$_() {
            super._$SetResumeState$_();
            const t = this._$_propertyTrack$_._$GetTimeline$_(), s = t._$GetTime$_();
            switch (this._$_pauseTime$_ = s - this._$_startOffsetTime$_, this._$_propertyTrack$_._$GetPropertyName$_()) {
              case "audioSource":
                break;

              case "volume":
                this._$_pauseVolume$_ = this._$_propertyTrack$_._$GetInterpolatedValue$_(s);
            }
            this._$_audioPlaybackStarted$_ = !1;
        }
        _$Interpolate$_(t, s, i, e, n, h, r) {
            if (this._$_sdkInstance$_) switch (this._$_propertyTrack$_._$GetPropertyName$_()) {
              case "audioSource":
                {
                    if (!this._$_timeline$_._$IsForwardPlayBack$_()) return;
                    if (e) return void (this._$_actions$_ && this._$_actions$_._$Stop$_.call(this._$_sdkInstance$_, this._$_audioTag$_));
                    if (t < this._$_startOffsetTime$_) return void (this._$_audioPlaybackStarted$_ = !1);
                    const o = this._$_expressions$_._$PlaybackRate$_.call(this._$_sdkInstance$_, this._$_audioTag$_), a = this._$_timeline$_._$GetPlaybackRate$_();
                    if (a !== o && this._$_actions$_._$SetPlaybackRate$_.call(this._$_sdkInstance$_, this._$_audioTag$_, a), 
                    this._$_audioPlaybackStarted$_) return;
                    if (!this._$_propertyTrack$_._$GetTimeline$_().IsPlaying()) return;
                    if (this._$_audioPlaybackStarted$_ = !0, isNaN(this._$_pauseTime$_)) {
                        const l = self.performance.now(), u = t - this._$_startOffsetTime$_, c = this._$_sdkInstance$_._$GetAudioContextState$_();
                        if ("suspended" === c) return void (this._$_audioPlaybackStarted$_ = !1);
                        const f = self.performance.now(), d = (f - l) / 1e3, p = u + d;
                        if (this._$_actions$_) {
                            let t = this._$GetVolume$_();
                            isNaN(t) ? (this._$SetVolume$_(0), t = 0) : this._$SetVolume$_(t), 
                            this._$_actions$_._$PlayFromTimeline$_.call(this._$_sdkInstance$_, this._$_fileArgs$_, t, this._$_audioTag$_, p);
                        }
                    } else {
                        const m = this._$_pauseTime$_, g = (this._$_pauseTime$_ = NaN, 
                        this._$_GetPauseVolume$_()), y = (this._$_pauseVolume$_ = NaN, 
                        this._$_sdkInstance$_._$GetAudioContextState$_());
                        if ("suspended" === y) return void (this._$_audioPlaybackStarted$_ = !1);
                        this._$_actions$_ && (this._$SetVolume$_(g), this._$_actions$_._$PlayFromTimeline$_.call(this._$_sdkInstance$_, this._$_fileArgs$_, g, this._$_audioTag$_, m));
                    }
                    break;
                }

              case "volume":
                this._$_MaybeSetAudioSource$_(), super._$Interpolate$_(t, s, i, e, n, h, r);
            }
        }
        _$GetInterpolatedValue$_(t, s, i) {
            if (this._$_sdkInstance$_) switch (this._$_propertyTrack$_._$GetPropertyName$_()) {
              case "audioSource":
                return;

              case "volume":
                return this._$_MaybeSetAudioSource$_(), super._$GetInterpolatedValue$_(t, s, i);
            }
        }
        _$Getter$_(t, s) {
            return this._$_audioSource$_ ? this._$_audioSource$_._$GetVolume$_() : 0;
        }
        _$Setter$_(t, s, i, e) {
            this._$_audioSource$_ && this._$_audioSource$_._$SetVolume$_(this._$Getter$_() + s), 
            this._$_actions$_ && this._$_audioSource$_ && this._$_actions$_._$SetVolume$_.call(this._$_sdkInstance$_, this._$_audioSource$_._$GetAudioTag$_(), this._$_audioSource$_._$GetVolume$_());
        }
        _$AbsoluteSetter$_(t, s, i) {
            this._$_audioSource$_ && this._$_audioSource$_._$SetVolume$_(s), this._$_actions$_ && this._$_audioSource$_ && this._$_actions$_._$SetVolume$_.call(this._$_sdkInstance$_, this._$_audioSource$_._$GetAudioTag$_(), this._$_audioSource$_._$GetVolume$_());
        }
        _$DoesRounding$_() {
            return !0;
        }
        _$_SaveToJson$_() {
            return {
                audioPlaybackStarted: this._$_audioPlaybackStarted$_,
                audioTag: this._$_audioTag$_,
                pauseTime: this._$_pauseTime$_,
                pauseVolume: this._$_pauseVolume$_,
                volume: this._$_volume$_
            };
        }
        _$_LoadFromJson$_(t) {
            t && (this._$_audioPlaybackStarted$_ = t.audioPlaybackStarted, this._$_audioTag$_ = t.audioTag, 
            this._$_pauseTime$_ = t.pauseTime, this._$_pauseVolume$_ = t.pauseVolume, 
            this._$_volume$_ = t.volume, this._$_Initialize$_());
        }
    }
    Kh._$PropertyTrackState$_._$AudioSourceAdapter$_ = $h;
}

{
    const tr = self._$C3$_;
    tr._$PropertyTrackState$_._$PropertyInterpolationAdapter$_ = class {
        constructor(t) {
            this._$_sourceAdapter$_ = t, this._$_propertyTrack$_ = t._$GetPropertyTrack$_(), 
            this._$_worldInfo$_ = this._$_propertyTrack$_._$GetTrack$_()._$GetWorldInfo$_(), 
            this._$_property$_ = this._$_propertyTrack$_._$GetPropertyName$_(), 
            this._$_firstAbsoluteUpdate$_ = !1, this._$_saveState$_ = null, this._$_target$_ = null;
        }
        _$Release$_() {
            this._$_sourceAdapter$_ = null, this._$_propertyTrack$_ = null, this._$_worldInfo$_ = null, 
            this._$_saveState$_ = null, this._$_target$_ = null;
        }
        _$MayNeedBeforeAndAfterInterpolate$_() {
            return !1;
        }
        _$TimelineRemoved$_() {}
        _$CleanCaches$_() {
            this._$_worldInfo$_ = null, this._$_saveState$_ = null, this._$_target$_ = null;
        }
        _$GetSourceAdapter$_() {
            return this._$_sourceAdapter$_;
        }
        _$GetPropertyTrack$_() {
            return this._$_propertyTrack$_;
        }
        _$GetWorldInfo$_() {
            return this._$_worldInfo$_ || (this._$_worldInfo$_ = this._$_propertyTrack$_._$GetTrack$_()._$GetWorldInfo$_()), 
            this._$_worldInfo$_;
        }
        _$SetFirstAbsoluteUpdate$_(t) {
            this._$_firstAbsoluteUpdate$_ = !!t;
        }
        _$GetFirstAbsoluteUpdate$_() {
            return this._$_firstAbsoluteUpdate$_;
        }
        _$SetResetState$_() {}
        _$SetInitialState$_() {}
        _$SetResumeState$_() {}
        _$SetSaveState$_() {
            this._$_saveState$_ = this._$GetCurrentState$_();
        }
        _$ClearSaveState$_() {
            this._$_saveState$_ = null;
        }
        _$GetCurrentState$_() {}
        _$CompareInitialStateWithCurrent$_() {}
        _$CompareSaveStateWithCurrent$_() {}
        _$CanChange$_(t) {
            const s = typeof this._$_Getter$_(), i = typeof t;
            return s == i;
        }
        _$BeforeChangeProperty$_() {}
        _$ChangeProperty$_(t, s, i, e, n, h, r, o) {}
        _$AfterChangeProperty$_() {}
        _$_FirstKeyframeGetter$_() {
            const t = this._$_PickTimelinePlaybackMode$_(() => {
                const t = this._$_propertyTrack$_._$GetPropertyTrackDataItem$_(), s = this._$_propertyTrack$_._$GetPropertyTrackData$_();
                return s._$GetFirstPropertyKeyframeDataItem$_(t);
            }, () => {
                const t = this._$_propertyTrack$_._$GetPropertyTrackDataItem$_(), s = this._$_propertyTrack$_._$GetPropertyTrackData$_();
                return s._$GetLastPropertyKeyframeDataItem$_(t);
            });
            return t._$GetAbsoluteValue$_();
        }
        _$_CurrentKeyframeGetter$_() {
            const t = this._$_propertyTrack$_._$GetTimeline$_(), e = t._$GetTime$_() - this._$_propertyTrack$_._$GetTrack$_()._$GetStartOffset$_(), s = this._$_PickTimelinePlaybackMode$_(() => {
                const t = this._$_propertyTrack$_._$GetPropertyTrackDataItem$_(), s = this._$_propertyTrack$_._$GetPropertyTrackData$_();
                return s._$GetFirstPropertyKeyFrameDataItemLowerOrEqualThan$_(e, t);
            }, () => {
                const t = this._$_propertyTrack$_._$GetPropertyTrackDataItem$_(), s = this._$_propertyTrack$_._$GetPropertyTrackData$_(), i = s._$GetFirstPropertyKeyFrameDataItemHigherOrEqualThan$_(e, t);
                return i || s._$GetLastPropertyKeyframeDataItem$_(t);
            });
            return s._$GetAbsoluteValue$_();
        }
        _$_PickTimelinePlaybackMode$_(t, s) {
            const i = this._$_propertyTrack$_._$GetTimeline$_();
            return (i._$IsForwardPlayBack$_() ? t : s)();
        }
        _$_PickResultMode$_(t, s) {
            const i = this._$_propertyTrack$_._$GetResultMode$_();
            return ("relative" === i ? t : s)();
        }
        _$_PickFirstAbsoluteUpdate$_(t, s) {
            return (this._$GetFirstAbsoluteUpdate$_() ? (this._$SetFirstAbsoluteUpdate$_(!1), 
            t) : s)();
        }
        _$_GetAbsoluteInitialValue$_(t) {}
        _$_GetIndex$_() {
            return this._$_sourceAdapter$_._$GetIndex$_();
        }
        _$_GetTarget$_() {
            return this._$_target$_ || (this._$_target$_ = this._$_sourceAdapter$_._$GetTarget$_()), 
            this._$_target$_;
        }
        _$_PickSource$_(t, s, i, e, n, h) {
            const r = this._$_propertyTrack$_._$GetSourceAdapterId$_();
            switch (r) {
              case "behavior":
                return t();

              case "effect":
                return s();

              case "instance-variable":
                return i();

              case "plugin":
                return e();

              case "world-instance":
                return n();

              case "audio":
                return h();
            }
        }
        _$_SaveToJson$_() {
            return {
                firstAbsoluteUpdate: this._$_firstAbsoluteUpdate$_,
                saveState: this._$_saveState$_
            };
        }
        _$_LoadFromJson$_(t) {
            t && (this._$_firstAbsoluteUpdate$_ = t.firstAbsoluteUpdate, this._$_saveState$_ = t.saveState);
        }
        _$_GetPropertyKeyframeStubs$_(t, s = !1) {
            const i = [];
            for (const e of t) {
                const n = e._$GetTrack$_()._$GetStartOffset$_();
                for (const h of e._$GetPropertyKeyframeDataItems$_()) (s && 0 === h._$GetTime$_() || !s) && i.push({
                    time: n + h._$GetTime$_(),
                    value: h._$GetAbsoluteValue$_()
                });
            }
            return i.sort((t, s) => t.time - s.time);
        }
        _$_GetLastPropertyKeyframeStub$_(t, s, i) {
            return this._$_GetPropertyKeyframeStubLowerThanPlayhead$_(s, i);
        }
        _$_GetPropertyKeyframeStubLowerThanPlayhead$_(s, i) {
            for (let t = i.length - 1; 0 <= t; t--) {
                const e = i[t].time;
                if (e <= s) return i[t];
            }
            return null;
        }
    };
}

{
    const sr = self._$C3$_, ir = new Map(), er = [ 0, 0, 0 ];
    class nr extends sr._$PropertyTrackState$_._$PropertyInterpolationAdapter$_ {
        constructor(t) {
            super(t);
        }
        _$SetResetState$_() {}
        _$SetInitialState$_() {}
        _$SetResumeState$_() {}
        _$GetCurrentState$_() {
            const t = this._$_propertyTrack$_._$GetSourceAdapterId$_(), s = this._$_GetTarget$_(), i = this._$_GetIndex$_();
            switch (t) {
              case "behavior":
                return this._$_ToColorArray$_(s._$GetPropertyValueByIndex$_(i));

              case "effect":
                return this._$_ToColorArray$_(s[i]);

              case "plugin":
                return this._$_ToColorArray$_(s._$GetPropertyValueByIndex$_(i));

              case "world-instance":
                return this._$_ToColorArray$_(this._$_Getter$_());
            }
        }
        _$CompareInitialStateWithCurrent$_() {
            const t = this._$_FirstKeyframeGetter$_();
            return !this._$_CompareColors$_(t, this._$_Getter$_());
        }
        _$CompareSaveStateWithCurrent$_() {
            return !sr._$IsNullOrUndefined$_(this._$_saveState$_) && !this._$_CompareColors$_(this._$_saveState$_, this._$_Getter$_());
        }
        _$_CompareColors$_(t, s) {
            return t = this._$_GetColorFromArray$_(t), s = this._$_GetColorFromArray$_(s), 
            t._$equalsIgnoringAlpha$_(s);
        }
        _$_FirstKeyframeGetter$_() {
            const t = super._$_FirstKeyframeGetter$_();
            return this._$_GetColorFromArray$_(t);
        }
        _$_CurrentKeyframeGetter$_() {
            const t = super._$_CurrentKeyframeGetter$_();
            return this._$_GetColorFromArray$_(t);
        }
        _$_GetAbsoluteInitialValue$_(t) {}
        _$_ToColorArray$_(t) {
            return (sr._$IsInstanceOf$_(t, sr._$Color$_) ? t.toArray() : t).slice(0, 3);
        }
        _$_GetColorFromArray$_(t) {
            return sr._$IsInstanceOf$_(t, sr._$Color$_) ? t : new sr._$Color$_(t[0], t[1], t[2], 1);
        }
        _$CanChange$_(t) {
            return !0;
        }
        _$MayNeedBeforeAndAfterInterpolate$_() {
            return !0;
        }
        _$BeforeChangeProperty$_() {
            const t = this._$_propertyTrack$_._$GetTimeline$_(), s = this._$_propertyTrack$_._$GetInstance$_(), i = this._$_propertyTrack$_._$GetSourceAdapter$_(), e = t._$GetSimilarPropertyTracks$_(s, i, this._$_property$_, this._$_propertyTrack$_);
            if (e && 1 < e.length) {
                ir.has(s) || ir.set(s, new Map());
                const n = ir.get(s), h = this._$_propertyTrack$_._$GetSourceAdapterId$_(), r = (n.has(h) || n.set(h, new Map()), 
                n.get(h));
                r.has(this._$_property$_) || r.set(this._$_property$_, {
                    _$used$_: !1,
                    color: new sr._$Color$_(0, 0, 0, 1)
                });
            }
        }
        _$_GetTmpColor$_(t, s, i) {
            const e = ir.get(t).get(s).get(i);
            return e._$used$_ = !0, e.color;
        }
        _$ChangeProperty$_(t, s, i, e, n, h, r, o) {
            const a = this._$_propertyTrack$_._$GetTimeline$_(), l = this._$_propertyTrack$_._$GetTrack$_(), u = this._$_propertyTrack$_._$GetInstance$_(), c = this._$_propertyTrack$_._$GetSourceAdapter$_(), f = this._$_propertyTrack$_._$GetSourceAdapterId$_(), d = this._$_property$_, p = a._$GetSimilarPropertyTracks$_(u, c, d, this._$_propertyTrack$_);
            if (p && 1 < p.length) {
                const m = this._$_GetPropertyKeyframeStubs$_(p, !0), g = this._$_GetLastPropertyKeyframeStub$_(a, a._$GetTime$_(), m);
                if (g) {
                    const y = l._$GetStartOffset$_(), M = g.time - y;
                    if (0 == M) this._$_GetTmpColor$_(u, f, this._$_property$_)._$addRgb$_(s[0], s[1], s[2]); else if (!(M < 0)) {
                        const w = s[0], x = s[1], S = s[2], T = this._$_propertyTrack$_._$Interpolate$_(M, !1, !0), b = sr._$Color$_._$DiffChannel$_(w, T[0]), v = sr._$Color$_._$DiffChannel$_(x, T[1]), C = sr._$Color$_._$DiffChannel$_(S, T[2]);
                        this._$_GetTmpColor$_(u, f, this._$_property$_)._$addRgb$_(b, v, C);
                    }
                }
            } else this._$_Setter$_(s[0], s[1], s[2]);
        }
        _$AfterChangeProperty$_() {
            const t = this._$_propertyTrack$_._$GetInstance$_();
            if (ir.has(t)) {
                const s = ir.get(t), i = this._$_propertyTrack$_._$GetSourceAdapterId$_();
                if (s.has(i)) {
                    const e = s.get(i);
                    if (e.has(this._$_property$_)) {
                        const n = e.get(this._$_property$_), h = n._$used$_, r = n.color;
                        h && this._$_Setter$_(r._$getR$_(), r._$getG$_(), r._$getB$_()), 
                        0 === e.size && s.delete(i), 0 === s.size && ir.delete(t);
                    }
                }
            }
        }
        _$_Getter$_() {
            const t = this._$_propertyTrack$_._$GetSourceAdapterId$_(), s = this._$_GetTarget$_(), i = this._$_GetIndex$_();
            switch (t) {
              case "behavior":
                return this._$_GetColorFromArray$_(s._$GetPropertyValueByIndex$_(i));

              case "effect":
                return s[i].clone();

              case "plugin":
                return this._$_GetColorFromArray$_(s._$GetPropertyValueByIndex$_(i));

              case "world-instance":
                return this._$GetWorldInfo$_()._$GetUnpremultipliedColor$_().clone();
            }
        }
        _$_Setter$_(t, s, i) {
            const e = this._$_propertyTrack$_._$GetSourceAdapterId$_(), n = this._$_GetTarget$_(), h = this._$_GetIndex$_();
            switch (e) {
              case "behavior":
                er[0] = t, er[1] = s, er[2] = i, n._$SetPropertyValueByIndex$_(h, er);
                break;

              case "effect":
                n[h]._$setRgb$_(t, s, i);
                break;

              case "plugin":
                er[0] = t, er[1] = s, er[2] = i, n._$SetPropertyValueByIndex$_(h, er);
                break;

              case "world-instance":
                this._$GetWorldInfo$_()._$SetUnpremultipliedColorRGB$_(t, s, i);
            }
        }
        _$_SaveToJson$_() {}
        _$_LoadFromJson$_(t) {}
    }
    sr._$PropertyTrackState$_._$PropertyInterpolationAdapter$_._$ColorInterpolationAdapter$_ = nr;
}

{
    const hr = self._$C3$_, rr = hr._$PropertyTrackState$_;
    class or extends hr._$PropertyTrackState$_._$PropertyInterpolationAdapter$_ {
        constructor(t) {
            super(t);
        }
        _$SetResetState$_() {}
        _$SetInitialState$_() {}
        _$SetResumeState$_() {}
        _$GetCurrentState$_() {
            return this._$_Getter$_();
        }
        _$CompareInitialStateWithCurrent$_() {
            const t = this._$_FirstKeyframeGetter$_();
            return t !== this._$GetCurrentState$_();
        }
        _$CompareSaveStateWithCurrent$_() {
            return !hr._$IsNullOrUndefined$_(this._$_saveState$_) && this._$_saveState$_ !== this._$GetCurrentState$_();
        }
        _$MayNeedBeforeAndAfterInterpolate$_() {
            return !1;
        }
        _$ChangeProperty$_(t, s, i, e, n, h, r, o) {
            const a = this._$_propertyTrack$_, l = a._$GetTrack$_(), u = a._$GetSourceAdapterId$_(), c = a._$GetTimeline$_(), f = l._$GetInstance$_(), d = a._$GetSourceAdapter$_(), p = this._$_property$_, m = c._$GetSimilarPropertyTracks$_(f, d, p, a);
            if (m && 1 < m.length) {
                const y = this._$_GetPropertyKeyframeStubs$_(m), M = t + l._$GetStartOffset$_(), w = this._$_GetLastPropertyKeyframeStub$_(c, M, y);
                w && (s = w.value);
            }
            const g = a._$GetPropertyKeyframeType$_();
            switch (g) {
              case "numeric":
                if (rr._$NumericTypeAdapter$_._$WillChange$_(this._$_GetIndex$_(), this._$_GetTarget$_(), s, u)) break;
                return;

              case "angle":
                if (rr._$AngleTypeAdapter$_._$WillChange$_(this._$_GetIndex$_(), this._$_GetTarget$_(), s, u)) break;
                return;

              case "boolean":
                if (rr._$BooleanTypeAdapter$_._$WillChange$_(this._$_GetIndex$_(), this._$_GetTarget$_(), s, u)) break;
                return;

              case "color":
                if (rr._$ColorTypeAdapter$_._$WillChange$_(this._$_GetIndex$_(), this._$_GetTarget$_(), s, u)) break;
                return;

              case "text":
                if (!rr._$TextTypeAdapter$_._$WillChange$_(this._$_GetIndex$_(), this._$_GetTarget$_(), s, u)) return;
            }
            this._$_Setter$_(s);
        }
        _$_Getter$_() {
            const t = this._$_propertyTrack$_._$GetSourceAdapterId$_(), s = this._$_GetTarget$_(), i = this._$_GetIndex$_();
            switch (t) {
              case "behavior":
                return s._$GetPropertyValueByIndex$_(i);

              case "effect":
                return s[i];

              case "instance-variable":
                return s._$GetInstanceVariableValue$_(i);

              case "plugin":
                return s._$GetPropertyValueByIndex$_(i);
            }
        }
        _$_Setter$_(t) {
            const s = this._$_propertyTrack$_._$GetSourceAdapterId$_(), i = this._$_GetTarget$_(), e = this._$_GetIndex$_();
            switch (s) {
              case "behavior":
                i._$SetPropertyValueByIndex$_(e, t);
                break;

              case "effect":
                i[e] = t;
                break;

              case "instance-variable":
                i._$SetInstanceVariableValue$_(e, t);
                break;

              case "plugin":
                i._$SetPropertyValueByIndex$_(e, t);
            }
        }
    }
    hr._$PropertyTrackState$_._$PropertyInterpolationAdapter$_._$NoInterpolationAdapter$_ = or;
}

{
    const ar = self._$C3$_, lr = (ar._$PropertyTrackState$_._$PropertyInterpolationAdapter$_, 
    new Map()), ur = (t, s, i, e, n, h = !1, r = null, o = null) => {
        lr.set(t, {
            _$setter$_: s,
            _$absolute_setter$_: i,
            _$getter$_: e,
            round: n,
            _$fRound$_: h,
            init: r,
            reset: o
        });
    };
    ur("offsetX", (t, s, i, e) => {
        "relative" === e._$_propertyTrack$_._$GetResultMode$_() ? t._$OffsetX$_(s, i._$GetTimeline$_()._$GetTransformWithSceneGraph$_()) : t._$OffsetX$_(s);
    }, (t, s) => t._$SetX$_(s), t => t._$GetX$_(), !0), ur("offsetY", (t, s, i, e) => {
        "relative" === e._$_propertyTrack$_._$GetResultMode$_() ? t._$OffsetY$_(s, i._$GetTimeline$_()._$GetTransformWithSceneGraph$_()) : t._$OffsetY$_(s);
    }, (t, s) => t._$SetY$_(s), t => t._$GetY$_(), !0), ur("offsetWidth", (s, t, o, i, e) => {
        if (0 !== t) {
            const n = "relative" === i._$_propertyTrack$_._$GetResultMode$_(), l = 1 === i._$_typeAdapter$_._$GetType$_();
            if ((n || l) && s._$HasParent$_() && s._$GetTransformWithParentWidth$_()) {
                if (isNaN(i._$_absoluteToFactor$_)) {
                    let e = [], t = s._$GetParent$_();
                    for (;t; ) e.push(t), t = t._$GetParent$_();
                    e.reverse();
                    let a = (t, s) => s._$GetTimeline$_()._$GetTrackFromInstance$_(t._$GetInstance$_()), n = (t, s) => {
                        const i = a(t, s);
                        if (i) return i._$GetOriginalWidth$_();
                        const e = t._$GetInstance$_()._$GetSdkInstance$_();
                        return e._$IsOriginalSizeKnown$_() ? e._$GetOriginalWidth$_() : t._$_GetSceneGraphInfo$_()._$_GetStartWidth$_();
                    }, h = (t, s, i, e = 0) => {
                        const n = a(t, s);
                        if (!n) return e;
                        const h = n._$GetPropertyTrack$_(i);
                        if (!h) return e;
                        const r = h._$GetPropertyTrackDataItem$_()._$GetPropertyKeyframeData$_();
                        if (!r) return e;
                        const o = r._$GetLastPropertyKeyframeDataItem$_();
                        return o ? o._$GetValue$_() : e;
                    }, r;
                    if (l) {
                        let t = e[e.length - 1];
                        r = t._$GetWidth$_();
                    } else {
                        let s = e[0], t = s._$_GetSceneGraphInfo$_()._$_GetStartWidth$_(), i = s._$_GetSceneGraphInfo$_()._$GetStartScaleX$_();
                        r = t * i, r = (r += h(s, o, "offsetWidth")) + n(s, o) * h(s, o, "offsetScaleX");
                        for (let t = 1; t < e.length; t++) {
                            const u = (s = e[t])._$_GetSceneGraphInfo$_()._$GetStartScaleX$_();
                            r = (r = (r *= u) + h(s, o, "offsetWidth")) + n(s, o) * h(s, o, "offsetScaleX");
                        }
                    }
                    i._$_absoluteToFactor$_ = 0 === r ? Number.EPSILON : r;
                }
                e || s._$OffsetWidth$_(t / i._$_absoluteToFactor$_, !0);
            } else s._$OffsetWidth$_(t);
        }
    }, (t, s) => t._$SetWidth$_(s), t => t._$GetWidth$_(), !0), ur("offsetHeight", (s, t, o, i, e) => {
        if (0 !== t) {
            const n = "relative" === i._$_propertyTrack$_._$GetResultMode$_(), a = 1 === i._$_typeAdapter$_._$GetType$_();
            if ((n || a) && s._$HasParent$_() && s._$GetTransformWithParentHeight$_()) {
                if (isNaN(i._$_absoluteToFactor$_)) {
                    let e = [], t = s._$GetParent$_();
                    for (;t; ) e.push(t), t = t._$GetParent$_();
                    e.reverse();
                    let n = (t, s) => {
                        e = t;
                        const i = s._$GetTimeline$_()._$GetTrackFromInstance$_(e._$GetInstance$_());
                        var e;
                        if (i) return i._$GetOriginalHeight$_();
                        const n = t._$GetInstance$_()._$GetSdkInstance$_();
                        return n._$IsOriginalSizeKnown$_() ? n._$GetOriginalHeight$_() : t._$_GetSceneGraphInfo$_()._$_GetStartHeight$_();
                    }, h = (t, s, i, e = 0) => {
                        const n = s._$GetTimeline$_()._$GetTrackFromInstance$_(t._$GetInstance$_());
                        if (!n) return e;
                        const h = n._$GetPropertyTrack$_(i);
                        if (!h) return e;
                        const r = h._$GetPropertyTrackDataItem$_()._$GetPropertyKeyframeData$_();
                        if (!r) return e;
                        const o = r._$GetLastPropertyKeyframeDataItem$_();
                        return o ? o._$GetValue$_() : e;
                    }, r;
                    if (a) {
                        let t = e[e.length - 1];
                        r = t._$GetHeight$_();
                    } else {
                        let s = e[0], t = s._$_GetSceneGraphInfo$_()._$_GetStartHeight$_(), i = s._$_GetSceneGraphInfo$_()._$GetStartScaleY$_();
                        r = t * i, r = (r += h(s, o, "offsetHeight")) + n(s, o) * h(s, o, "offsetScaleY");
                        for (let t = 1; t < e.length; t++) {
                            const l = (s = e[t])._$_GetSceneGraphInfo$_()._$GetStartScaleY$_();
                            r = (r = (r *= l) + h(s, o)) + n(s, o) * h(s, o, "offsetScaleY");
                        }
                    }
                    i._$_absoluteToFactor$_ = 0 === r ? Number.EPSILON : r;
                }
                e || s._$OffsetHeight$_(t / i._$_absoluteToFactor$_, !0);
            } else s._$OffsetHeight$_(t);
        }
    }, (t, s) => t._$SetHeight$_(s), t => t._$GetHeight$_(), !0), ur("offsetAngle", (t, s, i, e, n) => {
        t._$OffsetAngle$_(s);
    }, (t, s) => t._$SetAngle$_(s), t => t._$GetAngle$_(), !1, !0), ur("offsetOpacity", (t, s, i, e, n) => {
        const h = e._$_opacityFactor$_ || 1, r = (s /= h, t._$GetOpacity$_()), o = r + s;
        if (0 === e._$_clampAccumulator$_) 1 < o ? e._$_clampAccumulator$_ += o - 1 : o < 0 && (e._$_clampAccumulator$_ += o), 
        t._$OffsetOpacity$_(s); else {
            const a = t._$GetOpacity$_() + s;
            0 < s && 0 < e._$_clampAccumulator$_ ? 1 < a && (e._$_clampAccumulator$_ += a - 1) : 0 < s && e._$_clampAccumulator$_ < 0 ? (e._$_clampAccumulator$_ += s, 
            0 < e._$_clampAccumulator$_ && (t._$OffsetOpacity$_(e._$_clampAccumulator$_), 
            e._$_clampAccumulator$_ = 0)) : s < 0 && 0 < e._$_clampAccumulator$_ ? (e._$_clampAccumulator$_ += s, 
            e._$_clampAccumulator$_ < 0 && (t._$OffsetOpacity$_(e._$_clampAccumulator$_), 
            e._$_clampAccumulator$_ = 0)) : s < 0 && e._$_clampAccumulator$_ < 0 && a < 0 && (e._$_clampAccumulator$_ += a);
        }
    }, (t, s) => {
        t._$SetOpacity$_(s);
    }, t => t._$GetOpacity$_(), !1, !0, (h, n, r) => {
        switch (h._$_clampAccumulator$_ = 0, h._$_propertyTrack$_._$GetResultMode$_()) {
          case "relative":
            {
                h._$_propertyTrack$_._$GetPropertyTrackData$_();
                let t = h._$_propertyTrack$_._$GetPropertyTrackDataItem$_(), s = t._$GetPropertyKeyframeData$_(), i = s._$GetPropertyKeyframeDataItemArray$_(), e = h._$GetWorldInfo$_()._$GetOpacity$_(), n = e;
                for (const o of i) {
                    const a = o._$GetTime$_(), l = h._$_propertyTrack$_._$GetInterpolatedValue$_(a);
                    n = e + l, n = ar._$clamp$_(n, 0, 1);
                }
                h._$_totalForewardOpacityDelta$_ = e - n, h._$_totalForewardOpacityDelta$_ = Math.round(100 * (h._$_totalForewardOpacityDelta$_ + Number.EPSILON)) / 100, 
                n = e;
                for (let t = i.length - 1; 0 <= t; t--) {
                    const u = i[t]._$GetTime$_(), c = h._$_propertyTrack$_._$GetInterpolatedValue$_(u);
                    n -= c, n = ar._$clamp$_(n, 0, 1);
                }
                h._$_totalBackwardOpacityDelta$_ = n, h._$_totalBackwardOpacityDelta$_ = Math.round(100 * (h._$_totalBackwardOpacityDelta$_ + Number.EPSILON)) / 100;
                break;
            }
        }
        const t = "relative" === h._$_propertyTrack$_._$GetResultMode$_(), s = 1 === h._$_typeAdapter$_._$GetType$_();
        if ((t || s) && n._$HasParent$_() && n._$GetTransformWithParentOpacity$_()) {
            let s = [], t = n._$GetParent$_();
            for (;t; ) s.push(t), t = t._$GetParent$_();
            s.reverse();
            let i = (t, s, i) => {
                const e = s._$GetTimeline$_()._$GetTrackFromInstance$_(t._$GetInstance$_());
                if (!e) return 0;
                const n = e._$GetPropertyTrack$_(i);
                if (!n) return 0;
                const h = n._$GetPropertyTrackDataItem$_()._$GetPropertyKeyframeData$_();
                if (!h) return 0;
                const r = h._$GetLastPropertyKeyframeDataItem$_();
                return r ? r._$GetValue$_() : 0;
            }, e = s[0]._$_GetSceneGraphInfo$_()._$GetStartOpacity$_();
            e += i(s[0], r, "offsetOpacity");
            for (let t = 1; t < s.length; t++) e += i(s[t], r, "offsetOpacity");
            h._$_opacityFactor$_ = 0 === e ? 1 : e;
        }
    }, i => {
        switch (i._$_propertyTrack$_._$GetResultMode$_()) {
          case "relative":
            {
                i._$_clampAccumulator$_ = 0;
                let t = i._$GetWorldInfo$_(), s = t._$GetOpacity$_();
                s = Math.round(100 * (s + Number.EPSILON)) / 100, i._$_propertyTrack$_._$GetTimeline$_()._$IsForwardPlayBack$_() ? (t._$SetOpacity$_(s + i._$_totalForewardOpacityDelta$_), 
                i._$_lastValue$_ = 0) : (t._$SetOpacity$_(s - i._$_totalBackwardOpacityDelta$_), 
                i._$_lastValue$_ = i._$GetSourceAdapter$_()._$GetValueAtTime$_());
                break;
            }
        }
    }), ur("offsetOriginX", (t, s) => t._$OffsetOriginX$_(s), (t, s) => t._$SetOriginX$_(s), t => t._$GetOriginX$_(), !1), 
    ur("offsetOriginY", (t, s) => t._$OffsetOriginY$_(s), (t, s) => t._$SetOriginY$_(s), t => t._$GetOriginY$_(), !1), 
    ur("offsetZElevation", (t, s) => t._$OffsetZElevation$_(s), (t, s) => t._$SetZElevation$_(s), t => t._$GetZElevation$_(), !0), 
    ur("offsetScaleX", (t, s, i, e) => {
        if (0 !== s) {
            const n = t._$GetWidth$_() < 0 ? -1 : 1;
            if ("relative" === e._$_propertyTrack$_._$GetResultMode$_() && t._$HasParent$_() && t._$GetTransformWithParentWidth$_()) {
                const h = i._$GetOriginalWidth$_() * n * s;
                isNaN(e._$_absoluteToFactor$_) && lr.get("offsetWidth")._$setter$_(t, 1, i, e, !0), 
                t._$OffsetWidth$_(h / e._$_absoluteToFactor$_, !0);
            } else t._$OffsetWidth$_(i._$GetOriginalWidth$_() * n * s);
        }
    }, (t, s, i) => {
        t._$SetWidth$_(i._$GetOriginalWidth$_() * s);
    }, (e, n) => {
        const h = e._$GetWidth$_() < 0 ? -1 : 1;
        if (e._$GetTransformWithParentWidth$_()) {
            let t = e._$GetParent$_(), s = n._$GetTimeline$_()._$GetTrackFromInstance$_(t._$GetInstance$_()), i = NaN;
            if (s) i = t._$GetWidth$_() / s._$GetOriginalWidth$_(); else {
                const r = t._$GetInstance$_()._$GetSdkInstance$_();
                i = r._$IsOriginalSizeKnown$_() ? t._$GetWidth$_() / r._$GetOriginalWidth$_() : 1;
            }
            return e._$GetWidth$_() * h / (n._$GetOriginalWidth$_() * i);
        }
        return e._$GetWidth$_() * h / n._$GetOriginalWidth$_();
    }, !1), ur("offsetScaleY", (t, s, i, e) => {
        if (0 !== s) {
            const n = t._$GetHeight$_() < 0 ? -1 : 1;
            if ("relative" === e._$_propertyTrack$_._$GetResultMode$_() && t._$HasParent$_() && t._$GetTransformWithParentHeight$_()) {
                const h = i._$GetOriginalHeight$_() * n * s;
                isNaN(e._$_absoluteToFactor$_) && lr.get("offsetHeight")._$setter$_(t, 1, i, e, !0), 
                t._$OffsetHeight$_(h / e._$_absoluteToFactor$_, !0);
            } else t._$OffsetHeight$_(i._$GetOriginalHeight$_() * n * s);
        }
    }, (t, s, i) => {
        t._$SetHeight$_(i._$GetOriginalHeight$_() * s);
    }, (e, n) => {
        const h = e._$GetHeight$_() < 0 ? -1 : 1;
        if (e._$GetTransformWithParentHeight$_()) {
            let t = e._$GetParent$_(), s = n._$GetTimeline$_()._$GetTrackFromInstance$_(t._$GetInstance$_()), i = NaN;
            if (s) i = t._$GetHeight$_() / s._$GetOriginalHeight$_(); else {
                const r = t._$GetInstance$_()._$GetSdkInstance$_();
                i = r._$IsOriginalSizeKnown$_() ? t._$GetHeight$_() / r._$GetOriginalHeight$_() : 1;
            }
            return e._$GetHeight$_() * h / (n._$GetOriginalHeight$_() * i);
        }
        return e._$GetHeight$_() * h / n._$GetOriginalHeight$_();
    }, !1);
    class cr extends ar._$PropertyTrackState$_._$PropertyInterpolationAdapter$_ {
        constructor(t) {
            super(t), this._$_lastValue$_ = 0, this._$_clampAccumulator$_ = 0, this._$_totalForewardOpacityDelta$_ = 0, 
            this._$_totalBackwardOpacityDelta$_ = 0, this._$_opacityFactor$_ = NaN, 
            this._$_absoluteToFactor$_ = NaN, this._$_angleReflectMirrorOrFlip$_ = void 0, 
            this._$_angleReflectMirrorAndFlip$_ = void 0, this._$_instance_getter$_ = null, 
            this._$_instance_setter$_ = null, this._$_instance_absolute_setter$_ = null, 
            this._$_reset_action$_ = null, this._$_init_action$_ = null, this._$_source_adapter_getter$_ = null, 
            this._$_source_adapter_setter$_ = null, this._$_source_adapter_absolute_setter$_ = null, 
            this._$_round$_ = !1, this._$_fRound$_ = !1, ar._$IsInstanceOf$_(this._$_propertyTrack$_._$GetTimeline$_(), ar._$TweenState$_) ? this._$_typeAdapter$_ = new ar._$PropertyTrackState$_._$PropertyInterpolationAdapter$_._$NumericInterpolationAdapterForTween$_(this) : this._$_typeAdapter$_ = new ar._$PropertyTrackState$_._$PropertyInterpolationAdapter$_._$NumericInterpolationAdapterForTimeline$_(this);
            const s = this._$_propertyTrack$_._$GetPropertyName$_();
            switch (this._$_propertyTrack$_._$GetSourceAdapterId$_()) {
              case "world-instance":
                {
                    const i = lr.get(s);
                    this._$_instance_getter$_ = i._$getter$_, this._$_instance_setter$_ = i._$setter$_, 
                    this._$_instance_absolute_setter$_ = i._$absolute_setter$_, 
                    this._$_round$_ = i.round, this._$_fRound$_ = i._$fRound$_, 
                    this._$_init_action$_ = i.init, this._$_reset_action$_ = i.reset;
                    break;
                }

              case "audio":
                this._$_source_adapter_getter$_ = t._$Getter$_, this._$_source_adapter_setter$_ = t._$Setter$_, 
                this._$_source_adapter_absolute_setter$_ = t._$AbsoluteSetter$_, 
                this._$_round$_ = !!t._$DoesRounding$_(), this._$_fRound$_ = !1;
            }
        }
        _$Release$_() {
            this._$_typeAdapter$_ = null, this._$_instance_getter$_ = null, this._$_instance_setter$_ = null, 
            this._$_instance_absolute_setter$_ = null, this._$_reset_action$_ = null, 
            this._$_init_action$_ = null, this._$_source_adapter_getter$_ = null, 
            this._$_source_adapter_setter$_ = null, this._$_source_adapter_absolute_setter$_ = null, 
            super._$Release$_();
        }
        _$MayNeedBeforeAndAfterInterpolate$_() {
            return this._$_typeAdapter$_._$MayNeedBeforeAndAfterInterpolate$_();
        }
        _$GetLastValue$_() {
            return this._$_lastValue$_;
        }
        _$SetLastValue$_(t) {
            this._$_lastValue$_ = t;
        }
        _$SetResetState$_() {
            this._$_reset_action$_ && this._$_reset_action$_(this);
        }
        _$SetInitialState$_() {
            const t = this._$_typeAdapter$_._$SetInitialState$_();
            if ("number" == typeof t && (this._$_lastValue$_ = t), this._$_init_action$_) {
                const s = this._$GetWorldInfo$_(), i = this._$_propertyTrack$_._$GetTrack$_();
                this._$_init_action$_(this, s, i);
            }
        }
        _$SetResumeState$_() {
            const t = this._$_typeAdapter$_._$SetResumeState$_();
            "number" == typeof t && (this._$_lastValue$_ = t);
        }
        _$GetCurrentState$_() {
            return this._$_Getter$_();
        }
        _$CompareInitialStateWithCurrent$_() {
            const t = this._$_FirstKeyframeGetter$_();
            return t !== this._$GetCurrentState$_();
        }
        _$CompareSaveStateWithCurrent$_() {
            return !ar._$IsNullOrUndefined$_(this._$_saveState$_) && this._$_saveState$_ !== this._$GetCurrentState$_();
        }
        _$BeforeChangeProperty$_() {
            this._$_typeAdapter$_._$BeforeChangeProperty$_();
        }
        _$ChangeProperty$_(t, s, i, e, n, h, r, o) {
            return this._$_typeAdapter$_._$ChangeProperty$_(t, s, i, e, n, h, r, o);
        }
        _$AfterChangeProperty$_() {
            this._$_typeAdapter$_._$AfterChangeProperty$_();
        }
        _$_Getter$_() {
            const t = this._$_GetTarget$_(), s = this._$_GetIndex$_(), i = this._$GetWorldInfo$_(), e = this._$_propertyTrack$_._$GetTrack$_(), n = this._$_propertyTrack$_._$GetSourceAdapterId$_();
            switch (n) {
              case "behavior":
                return t._$GetPropertyValueByIndex$_(s);

              case "effect":
                return t[s];

              case "instance-variable":
                return t._$GetInstanceVariableValue$_(s);

              case "plugin":
                return t._$GetPropertyValueByIndex$_(s);

              case "world-instance":
                return this._$_instance_getter$_(i, e);

              case "audio":
                return this._$_source_adapter_getter$_.call(this._$GetSourceAdapter$_(), i, e);
            }
        }
        _$_Setter$_(t, s, i) {
            const e = this._$_GetTarget$_(), n = this._$_GetIndex$_(), h = this._$GetWorldInfo$_(), r = this._$_propertyTrack$_._$GetTrack$_(), o = this._$_propertyTrack$_._$GetSourceAdapterId$_();
            switch (o) {
              case "behavior":
                e._$OffsetPropertyValueByIndex$_(n, t);
                break;

              case "effect":
                e[n] += t;
                break;

              case "instance-variable":
                e._$SetInstanceVariableOffset$_(n, t);
                break;

              case "plugin":
                e._$OffsetPropertyValueByIndex$_(n, t, this._$GetSourceAdapter$_()._$GetOptionalCallbacks$_());
                break;

              case "world-instance":
                this._$_instance_setter$_(h, t, r, this);
                break;

              case "audio":
                this._$_source_adapter_setter$_.call(this._$GetSourceAdapter$_(), h, t, r, this);
            }
        }
        _$_SetterAbsolute$_(t, s, i) {
            let e = this._$_propertyTrack$_._$GetInterpolationMode$_();
            if ("discrete" !== (e = "default" === e ? "continuous" : e) || s) {
                if ("discrete" === e && i) {
                    const l = this._$_propertyTrack$_._$GetTimeline$_(), u = l._$GetTime$_(), c = this._$_propertyTrack$_._$GetPropertyKeyFrameDataItemAtTime$_(u);
                    if (!c) return;
                }
                const n = this._$_GetTarget$_(), h = this._$_GetIndex$_(), r = this._$GetWorldInfo$_(), o = this._$_propertyTrack$_._$GetTrack$_(), a = this._$_propertyTrack$_._$GetSourceAdapterId$_();
                switch (a) {
                  case "behavior":
                    n._$SetPropertyValueByIndex$_(h, t);
                    break;

                  case "effect":
                    n[h] = t;
                    break;

                  case "instance-variable":
                    n._$SetInstanceVariableValue$_(h, t);
                    break;

                  case "plugin":
                    n._$SetPropertyValueByIndex$_(h, t, this._$GetSourceAdapter$_()._$GetOptionalCallbacks$_());
                    break;

                  case "world-instance":
                    this._$_instance_absolute_setter$_(r, t, o);
                    break;

                  case "audio":
                    this._$_source_adapter_absolute_setter$_.call(this._$GetSourceAdapter$_(), r, t, o);
                }
            }
        }
        _$_MaybeEnsureValue$_(t, s, i, e, n, h, r, o) {
            this._$_typeAdapter$_._$_MaybeEnsureValue$_(t, s, i, e, n, h, r, o);
        }
        _$_AddDelta$_(t, s, i, e, n) {
            let h = (t = "angle" === this._$_propertyTrack$_._$GetPropertyType$_() ? ar._$toDegrees$_(t) : t).toString(), r = h.split(".")[1] || "", o = r.length, a = this._$_Getter$_(), l;
            switch (l = 0 === o ? this._$_round$_ ? Math.round(a) : this._$_fRound$_ ? "angle" === this._$_propertyTrack$_._$GetPropertyType$_() ? ar._$toRadians$_(Math.round(ar._$toDegrees$_(a))) : Number(ar.toFixed(a, 2)) : a : this._$_round$_ ? Number(ar.toFixed(a, o)) : (this._$_fRound$_, 
            a), this._$_Setter$_(l - a, s, i), this._$_propertyTrack$_._$GetPropertyName$_()) {
              case "offsetWidth":
              case "offsetScaleX":
                {
                    const u = this._$GetWorldInfo$_(), c = u._$GetWidth$_(), f = Number(ar.toFixed(c, 2));
                    u._$OffsetWidth$_(f - c);
                    break;
                }

              case "offsetHeight":
              case "offsetScaleY":
                {
                    const d = this._$GetWorldInfo$_(), p = d._$GetHeight$_(), m = Number(ar.toFixed(p, 2));
                    d._$OffsetHeight$_(m - p);
                    break;
                }
            }
        }
        _$_SaveToJson$_() {
            return Object.assign(super._$_SaveToJson$_(), {
                v: this._$_lastValue$_,
                a: this._$_clampAccumulator$_,
                fod: this._$_totalForewardOpacityDelta$_,
                bod: this._$_totalBackwardOpacityDelta$_,
                of: this._$_opacityFactor$_,
                sf: this._$_absoluteToFactor$_,
                armorf: this._$_angleReflectMirrorOrFlip$_,
                armandf: this._$_angleReflectMirrorAndFlip$_
            });
        }
        _$_LoadFromJson$_(t) {
            t && (super._$_LoadFromJson$_(t), this._$_lastValue$_ = t.v, this._$_clampAccumulator$_ = t.a, 
            this._$_totalForewardOpacityDelta$_ = ar._$IsFiniteNumber$_(t.fod) ? t.fod : 0, 
            this._$_totalBackwardOpacityDelta$_ = ar._$IsFiniteNumber$_(t.bod) ? t.bod : 0, 
            this._$_opacityFactor$_ = ar._$IsFiniteNumber$_(t.of) ? t.of : NaN, 
            this._$_absoluteToFactor$_ = ar._$IsFiniteNumber$_(t.sf) ? t.sf : NaN, 
            this._$_angleReflectMirrorOrFlip$_ = ar._$IsFiniteNumber$_(t.armorf) ? t.armorf : void 0, 
            this._$_angleReflectMirrorAndFlip$_ = ar._$IsFiniteNumber$_(t.armandf) ? t.armandf : void 0);
        }
    }
    ar._$PropertyTrackState$_._$PropertyInterpolationAdapter$_._$NumericInterpolationAdapter$_ = cr;
}

{
    const fr = self._$C3$_;
    class dr {
        constructor(t) {
            this._$_used$_ = !1, this._$_value$_ = 0, this._$_propertyKeyframeReached$_ = !1, 
            this._$_endState$_ = !1, this._$_propertyTracks$_ = t;
            for (let t = 0, s = this._$_propertyTracks$_.length; t < s; t++) this._$_propertyTracks$_[t]._$SetAbsoluteValueObject$_(this);
        }
        _$GetPropertyTracks$_() {
            return this._$_propertyTracks$_;
        }
        _$SetUsed$_() {
            this._$_used$_ = !0;
        }
        _$GetUsed$_() {
            return this._$_used$_;
        }
        _$SetValue$_(t) {
            this._$_value$_ = t;
        }
        _$GetValue$_() {
            return this._$_value$_;
        }
        _$SetPropertyKeyframeReached$_(t) {
            this._$_propertyKeyframeReached$_ = t;
        }
        _$GetPropertyKeyframeReached$_() {
            return this._$_propertyKeyframeReached$_;
        }
        _$SetEndState$_(t) {
            this._$_endState$_ = t;
        }
        _$GetEndState$_() {
            return this._$_endState$_;
        }
        _$Reset$_() {
            this._$_used$_ = !1, this._$_value$_ = 0, this._$_propertyKeyframeReached$_ = !1, 
            this._$_endState$_ = !1;
        }
    }
    class pr {
        constructor(t) {
            this._$_numericInterpolationAdapter$_ = t;
        }
        _$Release$_() {
            this._$_numericInterpolationAdapter$_ = null;
        }
        _$GetType$_() {
            return 0;
        }
        _$SetInitialState$_() {
            const t = this._$_numericInterpolationAdapter$_;
            return this._$_numericInterpolationAdapter$_._$GetPropertyTrack$_(), 
            t._$_PickResultMode$_(() => t._$_PickTimelinePlaybackMode$_(() => 0, () => t._$GetSourceAdapter$_()._$GetValueAtTime$_()), () => {});
        }
        _$SetResumeState$_() {}
        _$MayNeedBeforeAndAfterInterpolate$_() {
            this._$_numericInterpolationAdapter$_;
            const t = this._$_numericInterpolationAdapter$_._$GetPropertyTrack$_();
            switch (t._$GetResultMode$_()) {
              case "relative":
                return !1;

              case "absolute":
                return !0;
            }
        }
        _$BeforeChangeProperty$_() {
            this._$_numericInterpolationAdapter$_;
            const t = this._$_numericInterpolationAdapter$_._$GetPropertyTrack$_(), s = t._$GetPropertyName$_();
            switch (t._$GetResultMode$_()) {
              case "relative":
                break;

              case "absolute":
                if (t._$HasAbsoluteValueObject$_()) {
                    const i = t._$GetAbsoluteValueObject$_();
                    i._$Reset$_();
                } else {
                    const e = t._$GetTimeline$_(), n = t._$GetInstance$_(), h = t._$GetSourceAdapter$_(), r = e._$GetSimilarPropertyTracks$_(n, h, s, t);
                    r && 1 < r.length && new dr(r);
                }
            }
        }
        _$ChangeProperty$_(t, s, i, e, n, h, r, o) {
            const a = this._$_numericInterpolationAdapter$_, l = this._$_numericInterpolationAdapter$_._$GetPropertyTrack$_();
            switch (l._$GetResultMode$_()) {
              case "relative":
                {
                    const u = a._$GetLastValue$_();
                    a._$_Setter$_(s - u, i, e), h && this._$_MaybeEnsureValue$_(t, i, e, n, u, s), 
                    a._$SetLastValue$_(s);
                    break;
                }

              case "absolute":
                {
                    const c = l._$GetTimeline$_(), f = l._$GetTrack$_();
                    if (l._$GetInstance$_(), l._$GetSourceAdapter$_(), l._$HasAbsoluteValueObject$_()) {
                        const d = l._$GetAbsoluteValueObject$_(), p = d._$GetPropertyTracks$_(), m = a._$_GetPropertyKeyframeStubs$_(p, !0), g = a._$_GetLastPropertyKeyframeStub$_(c, c._$GetTime$_(), m);
                        if (g) {
                            const y = f._$GetStartOffset$_(), M = g.time - y;
                            if (0 == M) d._$SetEndState$_(r), d._$SetPropertyKeyframeReached$_(o), 
                            d._$SetUsed$_(), d._$SetValue$_(d._$GetValue$_() + s); else {
                                if (M < 0) return;
                                const w = l._$GetInterpolatedValue$_(M);
                                d._$SetEndState$_(r), d._$SetPropertyKeyframeReached$_(o), 
                                d._$SetUsed$_(), d._$SetValue$_(d._$GetValue$_() + (s - w));
                            }
                        }
                    } else a._$_SetterAbsolute$_(s, o, r);
                    break;
                }
            }
        }
        _$AfterChangeProperty$_() {
            const t = this._$_numericInterpolationAdapter$_, s = this._$_numericInterpolationAdapter$_._$GetPropertyTrack$_();
            switch (s._$GetResultMode$_()) {
              case "relative":
                break;

              case "absolute":
                if (s._$HasAbsoluteValueObject$_()) {
                    const i = s._$GetAbsoluteValueObject$_();
                    i._$GetUsed$_() && t._$_SetterAbsolute$_(i._$GetValue$_(), i._$GetPropertyKeyframeReached$_(), i._$GetEndState$_());
                }
            }
        }
        _$_MaybeEnsureValue$_(t, s, i, e, n, h) {
            const r = this._$_numericInterpolationAdapter$_;
            e || (s && t === s._$GetTime$_() ? r._$_AddDelta$_(s._$GetValueWithResultMode$_(), s, i) : i && t === i._$GetTime$_() ? r._$_AddDelta$_(i._$GetValueWithResultMode$_(), s, i) : h - n == 0 && r._$_AddDelta$_(s._$GetValueWithResultMode$_(), s, i));
        }
    }
    fr._$PropertyTrackState$_._$PropertyInterpolationAdapter$_._$NumericInterpolationAdapterForTimeline$_ = pr;
}

{
    const mr = self._$C3$_;
    class gr {
        constructor(t) {
            this._$_numericInterpolationAdapter$_ = t;
        }
        _$Release$_() {
            this._$_numericInterpolationAdapter$_ = null;
        }
        _$GetType$_() {
            return 1;
        }
        _$SetInitialState$_() {
            const t = this._$_numericInterpolationAdapter$_;
            return t._$SetFirstAbsoluteUpdate$_(!0), this._$_GetAbsoluteInitialValue$_(t._$_FirstKeyframeGetter$_());
        }
        _$SetResumeState$_() {
            const t = this._$_numericInterpolationAdapter$_;
            if (t._$_FirstKeyframeGetter$_() !== t._$_CurrentKeyframeGetter$_()) return t._$SetFirstAbsoluteUpdate$_(!0), 
            this._$_GetAbsoluteInitialValue$_(t._$_CurrentKeyframeGetter$_());
        }
        _$MayNeedBeforeAndAfterInterpolate$_() {
            return !1;
        }
        _$BeforeChangeProperty$_() {}
        _$ChangeProperty$_(t, s, i, e, n, h, r, o) {
            const a = this._$_numericInterpolationAdapter$_, l = a._$GetLastValue$_();
            switch (a._$GetPropertyTrack$_()._$GetResultMode$_()) {
              case "relative":
                a._$_Setter$_(s - l, i, e), h && this._$_MaybeEnsureValue$_(t, i, e, n, l, s, !1, r);
                break;

              case "absolute":
                a._$GetFirstAbsoluteUpdate$_() ? (a._$SetFirstAbsoluteUpdate$_(!1), 
                a._$_Setter$_(l, i, e)) : 0 === t && 0 === a._$GetPropertyTrack$_()._$GetTimeline$_()._$GetTotalTime$_() ? a._$_SetterAbsolute$_(s, !0, !1) : (a._$_Setter$_(s - l, i, e), 
                h && this._$_MaybeEnsureValue$_(t, i, e, n, l, s, this._$_ForceEndValue$_(), r));
            }
            a._$SetLastValue$_(s);
        }
        _$AfterChangeProperty$_() {}
        _$_GetAbsoluteInitialValue$_(t) {
            const s = this._$_numericInterpolationAdapter$_;
            return t - s._$GetCurrentState$_();
        }
        _$_ForceEndValue$_() {
            let t = this._$_numericInterpolationAdapter$_, s = t._$GetWorldInfo$_()._$GetInstance$_(), i = t._$GetPropertyTrack$_()._$GetRuntime$_(), e = i._$GetTimelineManager$_(), n = 0;
            for (const h of e._$GetPlayingTimelines$_()) 0 === h._$GetType$_() ? h._$HasTrackInstance$_(s) && n++ : 1 === h._$GetType$_() && h._$GetInstance$_() === s && n++;
            return n <= 1;
        }
        _$_MaybeEnsureValue$_(t, s, i, e, n, h, r, o) {
            const a = this._$_numericInterpolationAdapter$_;
            e ? s && t === s._$GetTime$_() ? a._$_AddDelta$_(s._$GetValueWithResultMode$_(), s, i, r, o) : i && t === i._$GetTime$_() ? a._$_AddDelta$_(i._$GetValueWithResultMode$_(), s, i, r, o) : i || a._$_AddDelta$_(s._$GetValueWithResultMode$_(), s, i, r, o) : s && t === s._$GetTime$_() ? a._$_AddDelta$_(s._$GetValueWithResultMode$_(), s, i, r, o) : i && t === i._$GetTime$_() ? a._$_AddDelta$_(i._$GetValueWithResultMode$_(), s, i, r, o) : h - n == 0 && a._$_AddDelta$_(s._$GetValueWithResultMode$_(), s, i, r, o);
        }
    }
    mr._$PropertyTrackState$_._$PropertyInterpolationAdapter$_._$NumericInterpolationAdapterForTween$_ = gr;
}

{
    const yr = self._$C3$_, Mr = self._$Ease$_;
    yr._$PropertyTrackState$_._$NumericTypeAdapter$_ = class {
        constructor() {}
        static _$WillChange$_(t, s, i, e) {
            let n;
            switch (e) {
              case "behavior":
                n = s._$GetPropertyValueByIndex$_(t);
                break;

              case "effect":
                n = s[t];
                break;

              case "instance-variable":
                n = s._$GetInstanceVariableValue$_(t);
                break;

              case "plugin":
                n = s._$GetPropertyValueByIndex$_(t);
            }
            return n !== i;
        }
        static _$Interpolate$_(h, r, o, a) {
            if (!o) {
                let t = a._$GetPropertyTrackDataItem$_(), s = a._$GetPropertyTrackData$_();
                return (t = s._$GetLastPropertyKeyframeDataItem$_(t))._$GetValueWithResultMode$_();
            }
            let l = a._$GetInterpolationMode$_();
            if ("default" === l && (l = "continuous"), "discrete" === (l = "combo" === a._$GetPropertyType$_() ? "discrete" : l)) return r._$GetValueWithResultMode$_();
            if ("continuous" === l || "step" === l) {
                const u = a._$GetTimeline$_()._$GetStep$_();
                if ("step" === l && 0 !== u) {
                    const g = 1 / u;
                    h = Math.floor(h * g) / g;
                }
                const c = r._$GetValueWithResultMode$_(), f = o._$GetValueWithResultMode$_(), d = r._$GetAddOn$_("cubic-bezier"), p = o._$GetAddOn$_("cubic-bezier"), m = d && d._$GetStartEnable$_() && p && p._$GetEndEnable$_();
                if (!m && c === f) return c;
                let t = r._$GetTime$_(), s = o._$GetTime$_(), i = ("step" === l && 0 !== u && (h = yr._$clamp$_(h, t, s)), 
                yr.normalize(h, t, s)), e = r._$GetEase$_(), n;
                if (m) {
                    const y = s - t;
                    n = Mr._$GetRuntimeEase$_(e)(y * i, 0, 1, y), n = Mr._$GetRuntimeEase$_("cubicbezier")(n, c, c + d._$GetStartAnchor$_(), f + p._$GetEndAnchor$_(), f);
                } else n = Mr._$GetRuntimeEase$_(e)((s - t) * i, c, f - c, s - t);
                return "integer" === a._$GetPropertyType$_() ? Math.floor(n) : n;
            }
        }
    };
}

{
    const wr = self._$C3$_;
    wr._$PropertyTrackState$_._$AngleTypeAdapter$_ = class {
        constructor() {}
        static _$WillChange$_(t, s, i, e) {
            let n;
            switch (e) {
              case "behavior":
                n = s._$GetPropertyValueByIndex$_(t);
                break;

              case "effect":
                n = s[t];
                break;

              case "instance-variable":
                n = s._$GetInstanceVariableValue$_(t);
                break;

              case "plugin":
                n = s._$GetPropertyValueByIndex$_(t);
            }
            return n !== i;
        }
        static _$Interpolate$_(t, s, i, e) {
            if (!i) {
                let t = e._$GetPropertyTrackDataItem$_(), s = e._$GetPropertyTrackData$_();
                return (t = s._$GetLastPropertyKeyframeDataItem$_(t))._$GetValueWithResultMode$_();
            }
            let n = e._$GetInterpolationMode$_();
            if ("default" === n && (n = "continuous"), "discrete" === (n = "combo" === e._$GetPropertyType$_() ? "discrete" : n)) return s._$GetValueWithResultMode$_();
            if ("continuous" === n || "step" === n) {
                const h = e._$GetTimeline$_()._$GetStep$_();
                if ("step" === n && 0 !== h) {
                    const c = 1 / h;
                    t = Math.floor(t * c) / c;
                }
                const r = s._$GetTime$_(), o = i._$GetTime$_(), a = s._$GetValueWithResultMode$_(), l = i._$GetValueWithResultMode$_(), u = ("step" === n && 0 !== h && (t = wr._$clamp$_(t, r, o)), 
                s._$GetAddOn$_("angle"));
                if (!u) {
                    if (a === l) return a;
                    const f = wr.normalize(t, r, o), d = self._$Ease$_._$GetRuntimeEase$_(s._$GetEase$_());
                    return wr._$angleLerp$_(a, l, d(f, 0, 1, 1));
                }
                {
                    const p = u._$GetRevolutions$_();
                    if (a === l && 0 === p) return a;
                    const m = wr.normalize(t, r, o), g = self._$Ease$_._$GetRuntimeEase$_(s._$GetEase$_()), y = g(m, 0, 1, 1);
                    switch (u._$GetDirection$_()) {
                      case "closest":
                        return wr._$angleLerp$_(a, l, y, p);

                      case "clockwise":
                        return wr._$angleLerpClockwise$_(a, l, y, p);

                      case "anti-clockwise":
                        return wr._$angleLerpAntiClockwise$_(a, l, y, p);
                    }
                }
            }
        }
    };
}

{
    const xr = self._$C3$_;
    xr._$PropertyTrackState$_._$BooleanTypeAdapter$_ = class {
        constructor() {}
        static _$WillChange$_(t, s, i, e) {
            let n;
            switch (e) {
              case "behavior":
                n = s._$GetPropertyValueByIndex$_(t);
                break;

              case "effect":
                n = s[t];
                break;

              case "instance-variable":
                n = s._$GetInstanceVariableValue$_(t);
                break;

              case "plugin":
                n = s._$GetPropertyValueByIndex$_(t);
            }
            return !!n != !!i;
        }
        static _$Interpolate$_(t, s, i, e) {
            if (i) return s._$GetValueWithResultMode$_() ? 1 : 0;
            {
                let t = e._$GetPropertyTrackDataItem$_(), s = e._$GetPropertyTrackData$_();
                return (t = s._$GetLastPropertyKeyframeDataItem$_(t))._$GetValueWithResultMode$_() ? 1 : 0;
            }
        }
    };
}

{
    const Sr = self._$C3$_, Tr = [ 0, 0, 0 ], br = [ 0, 0, 0 ], vr = [ 0, 0, 0 ];
    Sr._$PropertyTrackState$_._$ColorTypeAdapter$_ = class {
        constructor() {}
        static _$WillChange$_(t, s, i, e) {
            let n;
            switch (e) {
              case "behavior":
                n = s._$GetPropertyValueByIndex$_(t);
                break;

              case "effect":
                n = s[t];
                break;

              case "instance-variable":
                n = s._$GetInstanceVariableValue$_(t);
                break;

              case "plugin":
                n = s._$GetPropertyValueByIndex$_(t);
            }
            return Array.isArray(i) ? (Tr[0] = i[0], Tr[1] = i[1], Tr[2] = i[2]) : (vr._$parseCommaSeparatedRgb$_(i), 
            Tr[0] = Math.floor(255 * vr._$getR$_()), Tr[1] = Math.floor(255 * vr._$getG$_()), 
            Tr[2] = Math.floor(255 * vr._$getB$_())), Array.isArray(n) ? (br[0] = n[0], 
            br[1] = n[1], br[2] = n[2]) : (vr._$parseCommaSeparatedRgb$_(n), br[0] = Math.floor(255 * vr._$getR$_()), 
            br[1] = Math.floor(255 * vr._$getG$_()), br[2] = Math.floor(255 * vr._$getB$_())), 
            Tr[0] !== br[0] || Tr[1] !== br[1] || Tr[2] !== br[2];
        }
        static _$Interpolate$_(t, s, i, e) {
            if (!i) {
                let t = e._$GetPropertyTrackDataItem$_(), s = e._$GetPropertyTrackData$_(), i = (t = s._$GetLastPropertyKeyframeDataItem$_(t))._$GetValueWithResultMode$_();
                return Tr[0] = i[0], Tr[1] = i[1], Tr[2] = i[2], Tr;
            }
            let n = e._$GetInterpolationMode$_();
            if ("discrete" === (n = "default" === n ? "continuous" : n)) {
                const h = s._$GetValueWithResultMode$_();
                return Tr[0] = h[0], Tr[1] = h[1], Tr[2] = h[2], Tr;
            }
            if ("continuous" === n || "step" === n) {
                const r = e._$GetTimeline$_()._$GetStep$_();
                if ("step" === n && 0 !== r) {
                    const T = 1 / r;
                    t = Math.floor(t * T) / T;
                }
                const o = s._$GetTime$_(), a = i._$GetTime$_(), l = s._$GetValueWithResultMode$_(), u = i._$GetValueWithResultMode$_(), c = ("step" === n && 0 !== r && (t = Sr._$clamp$_(t, o, a)), 
                Sr.normalize(t, o, a)), f = s._$GetEase$_(), d = l[0], p = l[1], m = l[2], g = u[0], y = u[1], M = u[2], w = self._$Ease$_._$GetRuntimeEase$_(f), x = a - o, S = x * c;
                return Tr[0] = d === g ? d : w(S, d, g - d, x), Tr[1] = p === y ? p : w(S, p, y - p, x), 
                Tr[2] = m === M ? m : w(S, m, M - m, x), Tr;
            }
        }
    };
}

{
    const Cr = self._$C3$_;
    Cr._$PropertyTrackState$_._$TextTypeAdapter$_ = class {
        constructor() {}
        static _$WillChange$_(t, s, i, e) {
            let n;
            switch (e) {
              case "behavior":
                n = s._$GetPropertyValueByIndex$_(t);
                break;

              case "effect":
                n = s[t];
                break;

              case "instance-variable":
                n = s._$GetInstanceVariableValue$_(t);
                break;

              case "plugin":
                n = s._$GetPropertyValueByIndex$_(t);
            }
            return n !== i;
        }
        static _$Interpolate$_(t, s, i, e) {
            if (i) return s._$GetValueWithResultMode$_();
            {
                let t = e._$GetPropertyTrackDataItem$_(), s = e._$GetPropertyTrackData$_();
                return (t = s._$GetLastPropertyKeyframeDataItem$_(t))._$GetValueWithResultMode$_();
            }
        }
    };
}

{
    const Gr = self._$C3$_;
    Gr._$TimelineDataManager$_ = class {
        constructor() {
            this._$_timelineDataItems$_ = new Map();
        }
        _$Release$_() {
            for (const t of this._$_timelineDataItems$_.values()) t._$Release$_();
            this._$_timelineDataItems$_.clear(), this._$_timelineDataItems$_ = null;
        }
        _$Add$_(t) {
            const s = new Gr._$TimelineDataItem$_(t), i = s._$GetName$_();
            this._$_timelineDataItems$_.set(i, s);
        }
        _$Get$_(t) {
            return this._$_timelineDataItems$_.get(t);
        }
        _$GetNameId$_() {
            return 0;
        }
        static _$_CreateDataItems$_(t, s, i, e) {
            if (s) for (const n of s) Gr._$TimelineDataManager$_._$_CreateDataItem$_("create", n, t, i, e);
        }
        static _$_CreateDataItemsIncludingDisabled$_(t, s, i, e) {
            if (s) for (const n of s) Gr._$TimelineDataManager$_._$_CreateDataItem$_("create-including-disabled", n, t, i, e);
        }
        static _$_LoadDataItemsFromJson$_(i, t, s, e) {
            i.length ? t.forEach((t, s) => {
                i[s]._$_LoadFromJson$_(t);
            }) : t.forEach(t => {
                Gr._$TimelineDataManager$_._$_CreateDataItem$_("load", t, i, s, e);
            });
        }
        static _$_CreateDataItem$_(t, s, i, e, n) {
            let h;
            if ("function" == typeof e) switch (t) {
              case "load":
                h = new e(null, n);
                break;

              case "create":
              case "create-including-disabled":
                h = new e(s, n);
            } else if ("object" == typeof e) {
                const r = e.prop, o = s[r], a = e.map.get(o);
                switch (t) {
                  case "load":
                    h = new a(null, n);
                    break;

                  case "create":
                  case "create-including-disabled":
                    h = new a(s, n);
                }
            }
            switch (t) {
              case "load":
                h._$_LoadFromJson$_(s), i.push(h);
                break;

              case "create":
                if ("function" == typeof h._$GetEnable$_ && !h._$GetEnable$_()) return h._$Release$_();
                i.push(h);
                break;

              case "create-including-disabled":
                i.push(h);
            }
        }
    };
}

{
    const Ir = self._$C3$_;
    Ir._$TimelineDataItem$_ = class {
        constructor(t) {
            this._$_name$_ = "", this._$_totalTime$_ = NaN, this._$_step$_ = 0, 
            this._$_interpolationMode$_ = "default", this._$_resultMode$_ = "default", 
            this._$_loop$_ = !1, this._$_pingPong$_ = !1, this._$_repeatCount$_ = 1, 
            this._$_trackData$_ = null, this._$_startOnLayout$_ = "", this._$_transformWithSceneGraph$_ = !1, 
            this._$_useSystemTimescale$_ = !0, t && (this._$_name$_ = t[0], this._$_totalTime$_ = t[1], 
            this._$_step$_ = t[2], this._$_interpolationMode$_ = t[3], this._$_resultMode$_ = t[4], 
            this._$_loop$_ = !!t[6], this._$_pingPong$_ = !!t[7], this._$_repeatCount$_ = t[8], 
            this._$_startOnLayout$_ = t[9], this._$_transformWithSceneGraph$_ = !!t[10], 
            this._$_useSystemTimescale$_ = !!t[11], this._$_trackData$_ = new Ir._$TrackData$_(t[5], this));
        }
        _$Release$_() {
            this._$_trackData$_._$Release$_(), this._$_trackData$_ = null;
        }
        _$GetTrackData$_() {
            return this._$_trackData$_ || (this._$_trackData$_ = new Ir._$TrackData$_(null, this)), 
            this._$_trackData$_;
        }
        _$GetName$_() {
            return this._$_name$_;
        }
        _$SetName$_(t) {
            this._$_name$_ = t;
        }
        _$GetTotalTime$_() {
            return this._$_totalTime$_;
        }
        _$SetTotalTime$_(t) {
            this._$_totalTime$_ = t;
        }
        _$GetStep$_() {
            return this._$_step$_;
        }
        _$SetStep$_(t) {
            this._$_step$_ = t;
        }
        _$GetInterpolationMode$_() {
            return this._$_interpolationMode$_;
        }
        _$SetInterpolationMode$_(t) {
            this._$_interpolationMode$_ = t;
        }
        _$GetResultMode$_() {
            return this._$_resultMode$_;
        }
        _$SetResultMode$_(t) {
            this._$_resultMode$_ = t;
        }
        _$GetLoop$_() {
            return this._$_loop$_;
        }
        _$SetLoop$_(t) {
            this._$_loop$_ = t;
        }
        _$GetPingPong$_() {
            return this._$_pingPong$_;
        }
        _$SetPingPong$_(t) {
            this._$_pingPong$_ = t;
        }
        _$GetRepeatCount$_() {
            return this._$_repeatCount$_;
        }
        _$SetRepeatCount$_(t) {
            this._$_repeatCount$_ = t;
        }
        _$GetStartOnLayout$_() {
            return this._$_startOnLayout$_;
        }
        _$GetTransformWithSceneGraph$_() {
            return this._$_transformWithSceneGraph$_;
        }
        _$GetUseSystemTimescale$_() {
            return this._$_useSystemTimescale$_;
        }
        _$_SaveToJson$_() {
            return {
                trackDataJson: this._$_trackData$_._$_SaveToJson$_(),
                name: this._$_name$_,
                totalTime: this._$_totalTime$_,
                step: this._$_step$_,
                interpolationMode: this._$_interpolationMode$_,
                resultMode: this._$_resultMode$_,
                loop: this._$_loop$_,
                pingPong: this._$_pingPong$_,
                repeatCount: this._$_repeatCount$_,
                startOnLayout: this._$_startOnLayout$_,
                transformWithSceneGraph: !!this._$_transformWithSceneGraph$_,
                useSystemTimescale: this._$_useSystemTimescale$_
            };
        }
        _$_LoadFromJson$_(t) {
            t && (this._$GetTrackData$_()._$_LoadFromJson$_(t.trackDataJson), this._$_name$_ = t.name, 
            this._$_totalTime$_ = t.totalTime, this._$_step$_ = t.step, this._$_interpolationMode$_ = t.interpolationMode, 
            this._$_resultMode$_ = t.resultMode, this._$_loop$_ = t.loop, this._$_pingPong$_ = t.pingPong, 
            this._$_repeatCount$_ = t.repeatCount, this._$_startOnLayout$_ = t.startOnLayout, 
            this._$_transformWithSceneGraph$_ = !!t.transformWithSceneGraph, this._$_useSystemTimescale$_ = !!t.useSystemTimescale);
        }
    };
}

{
    const _r = self._$C3$_;
    class Er {
        constructor(t, s) {
            this._$_trackData$_ = s, this._$_instanceData$_ = null, this._$_additionalInstanceData$_ = null, 
            this._$_instanceUid$_ = NaN, this._$_objectClassIndex$_ = NaN, this._$_interpolationMode$_ = "default", 
            this._$_resultMode$_ = "default", this._$_enabled$_ = !1, this._$_keyframeData$_ = null, 
            this._$_propertyTrackData$_ = null, this._$_id$_ = "", this._$_nestedData$_ = null, 
            this._$_startOffset$_ = 0, this._$_localTotalTime$_ = this._$_trackData$_._$GetTimelineDataItem$_()._$GetTotalTime$_(), 
            this._$_type$_ = 0, this._$_name$_ = "", t && (t[0] && (this._$_instanceData$_ = t[0], 
            this._$_instanceUid$_ = t[0][2], this._$_objectClassIndex$_ = t[0][1]), 
            this._$_interpolationMode$_ = t[1], this._$_resultMode$_ = t[2], this._$_enabled$_ = !!t[3], 
            t[6] && (this._$_id$_ = t[6]), t[7] && (this._$_nestedData$_ = t[7], 
            this._$_startOffset$_ = t[7][0], this._$_localTotalTime$_ = t[7][1]), 
            t[8] && (this._$_additionalInstanceData$_ = t[8]), t[8] && (this._$_additionalInstanceData$_ = t[8]), 
            t[9] && (this._$_type$_ = t[9]), t[10] && (this._$_name$_ = t[10]), 
            this._$_keyframeData$_ = new _r._$KeyframeData$_(t[4], this), this._$_propertyTrackData$_ = new _r._$PropertyTrackData$_(t[5], this));
        }
        _$Release$_() {
            this._$_instanceData$_ = null, this._$_trackData$_ = null, this._$_keyframeData$_ && (this._$_keyframeData$_._$Release$_(), 
            this._$_keyframeData$_ = null), this._$_propertyTrackData$_ && (this._$_propertyTrackData$_._$Release$_(), 
            this._$_propertyTrackData$_ = null), this._$_nestedData$_ = null;
        }
        _$GetTrackData$_() {
            return this._$_trackData$_;
        }
        _$GetKeyframeData$_() {
            return this._$_keyframeData$_ || (this._$_keyframeData$_ = new _r._$KeyframeData$_(null, this)), 
            this._$_keyframeData$_;
        }
        _$GetPropertyTrackData$_() {
            return this._$_propertyTrackData$_ || (this._$_propertyTrackData$_ = new _r._$PropertyTrackData$_(null, this)), 
            this._$_propertyTrackData$_;
        }
        _$GetInstanceData$_() {
            return this._$_instanceData$_;
        }
        _$GetObjectClassIndex$_() {
            return this._$_objectClassIndex$_;
        }
        _$SetObjectClassIndex$_(t) {
            this._$_objectClassIndex$_ = t;
        }
        _$GetInstanceUID$_() {
            return this._$_instanceUid$_;
        }
        _$SetInstanceUID$_(t) {
            this._$_instanceUid$_ = t;
        }
        _$GetInterpolationMode$_() {
            return this._$_interpolationMode$_;
        }
        _$SetInterpolationMode$_(t) {
            this._$_interpolationMode$_ = t;
        }
        _$GetResultMode$_() {
            return this._$_resultMode$_;
        }
        _$SetResultMode$_(t) {
            this._$_resultMode$_ = t;
        }
        _$GetEnable$_() {
            return this._$_enabled$_;
        }
        _$SetEnable$_(t) {
            this._$_enabled$_ = !!t;
        }
        _$GetId$_() {
            return this._$_id$_;
        }
        _$GetStartOffset$_() {
            return this._$_startOffset$_;
        }
        _$GetLocalTotalTime$_() {
            return this._$_localTotalTime$_;
        }
        _$SetLocalTotalTime$_(t) {
            this._$_localTotalTime$_ = t;
        }
        _$GetOriginalWidth$_() {
            return this._$_additionalInstanceData$_[0];
        }
        _$SetOriginalWidth$_(t) {
            this._$_additionalInstanceData$_ || (this._$_additionalInstanceData$_ = []), 
            this._$_additionalInstanceData$_[0] = t;
        }
        _$GetOriginalHeight$_() {
            return this._$_additionalInstanceData$_ || (this._$_additionalInstanceData$_ = []), 
            this._$_additionalInstanceData$_[1];
        }
        _$SetOriginalHeight$_(t) {
            this._$_additionalInstanceData$_ || (this._$_additionalInstanceData$_ = []), 
            this._$_additionalInstanceData$_[1] = t;
        }
        _$GetType$_() {
            return this._$_type$_;
        }
        _$GetName$_() {
            return this._$_name$_;
        }
        _$_SaveToJson$_() {
            return {
                keyframeDataJson: this._$_keyframeData$_._$_SaveToJson$_(),
                propertyTrackDataJson: this._$_propertyTrackData$_._$_SaveToJson$_(),
                instanceData: this._$_instanceData$_,
                additionalInstanceData: this._$_additionalInstanceData$_,
                instanceUid: this._$_instanceUid$_,
                objectClassIndex: this._$_objectClassIndex$_,
                interpolationMode: this._$_interpolationMode$_,
                resultMode: this._$_resultMode$_,
                enabled: this._$_enabled$_,
                id: this._$_id$_,
                nestedData: this._$_nestedData$_,
                type: this._$_type$_,
                name: this._$_name$_
            };
        }
        _$_LoadFromJson$_(t) {
            t && (this._$_instanceData$_ = t.instanceData, this._$_instanceUid$_ = t.instanceUid, 
            this._$_objectClassIndex$_ = t.objectClassIndex, this._$_interpolationMode$_ = t.interpolationMode, 
            this._$_resultMode$_ = t.resultMode, this._$_enabled$_ = t.enabled, 
            this._$_id$_ = t.id, this._$_type$_ = t.type || 0, this._$_name$_ = t.name || "", 
            this._$_localTotalTime$_ = this._$_trackData$_._$GetTimelineDataItem$_()._$GetTotalTime$_(), 
            t.nestedData && (this._$_nestedData$_ = t.nestedData, this._$_startOffset$_ = this._$_nestedData$_[0], 
            this._$_localTotalTime$_ = this._$_nestedData$_[1]), t.additionalInstanceData && (this._$_additionalInstanceData$_ = t.additionalInstanceData), 
            this._$GetKeyframeData$_()._$_LoadFromJson$_(t.keyframeDataJson), this._$GetPropertyTrackData$_()._$_LoadFromJson$_(t.propertyTrackDataJson));
        }
    }
    _r._$TrackData$_ = class {
        constructor(t, s) {
            this._$_timelineDataItem$_ = s, this._$_trackDataItems$_ = [], _r._$TimelineDataManager$_._$_CreateDataItems$_(this._$_trackDataItems$_, t, Er, this);
        }
        _$Release$_() {
            this._$_timelineDataItem$_ = null;
            for (const t of this._$_trackDataItems$_) t._$Release$_();
            _r._$clearArray$_(this._$_trackDataItems$_), this._$_trackDataItems$_ = null;
        }
        _$GetTimelineDataItem$_() {
            return this._$_timelineDataItem$_;
        }
        _$AddEmptyTrackDataItem$_() {
            const t = new Er(null, this);
            return this._$_trackDataItems$_.push(t), t;
        }
        _$GetFirstKeyframeDataItem$_(t) {
            return t._$GetKeyframeData$_()._$GetKeyframeDataItemArray$_()[0];
        }
        _$GetLastKeyframeDataItem$_(t) {
            const s = t._$GetKeyframeData$_()._$GetKeyframeDataItemArray$_();
            return s.at(-1);
        }
        _$GetKeyFrameDataItemAtTime$_(s, t) {
            const i = t._$GetKeyframeData$_()._$GetKeyframeDataItemArray$_(), e = i.length;
            for (let t = 0; t < e; t++) {
                const n = i[t];
                if (n._$GetTime$_() === s) return n;
            }
        }
        _$GetFirstKeyFrameDataItemHigherThan$_(s, t) {
            const i = t._$GetKeyframeData$_()._$GetKeyframeDataItemArray$_(), e = i.length;
            for (let t = 0; t < e; t++) {
                const n = i[t];
                if (n._$GetTime$_() > s) return n;
            }
        }
        _$GetFirstKeyFrameDataItemHigherOrEqualThan$_(s, t) {
            const i = t._$GetKeyframeData$_()._$GetKeyframeDataItemArray$_(), e = i.length;
            for (let t = 0; t < e; t++) {
                const n = i[t];
                if (n._$GetTime$_() >= s) return n;
            }
        }
        _$GetFirstKeyFrameDataItemLowerOrEqualThan$_(s, t) {
            const i = t._$GetKeyframeData$_()._$GetKeyframeDataItemArray$_();
            for (let t = i.length - 1; 0 <= t; t--) {
                const e = i[t];
                if (e._$GetTime$_() <= s) return e;
            }
        }
        *_$trackDataItems$_() {
            for (const t of this._$_trackDataItems$_) yield t;
        }
        _$_SaveToJson$_() {
            return {
                trackDataItemsJson: this._$_trackDataItems$_.map(t => t._$_SaveToJson$_())
            };
        }
        _$_LoadFromJson$_(t) {
            t && _r._$TimelineDataManager$_._$_LoadDataItemsFromJson$_(this._$_trackDataItems$_, t.trackDataItemsJson, Er, this);
        }
    };
}

{
    const Nr = self._$C3$_;
    class Dr {
        constructor(t, s) {
            this._$_propertyTrackData$_ = s, this._$_sourceAdapterId$_ = "", this._$_sourceAdapterArguments$_ = null, 
            this._$_property$_ = null, this._$_type$_ = null, this._$_min$_ = NaN, 
            this._$_max$_ = NaN, this._$_interpolationMode$_ = "default", this._$_resultMode$_ = "default", 
            this._$_enabled$_ = !1, this._$_propertyKeyframeData$_ = null, this._$_canHavePropertyKeyframes$_ = !0, 
            t && (this._$_sourceAdapterId$_ = t[0][0], this._$_sourceAdapterArguments$_ = t[0].slice(1), 
            this._$_property$_ = t[1], this._$_type$_ = t[2], this._$_min$_ = t[3], 
            this._$_max$_ = t[4], this._$_interpolationMode$_ = t[5], this._$_resultMode$_ = t[6], 
            this._$_enabled$_ = !!t[7], this._$_propertyKeyframeData$_ = new Nr._$PropertyKeyframeData$_(t[8], this), 
            this._$_canHavePropertyKeyframes$_ = t[9]);
        }
        _$Release$_() {
            this._$_propertyKeyframeData$_._$Release$_(), this._$_propertyKeyframeData$_ = null, 
            this._$_propertyTrackData$_ = null, this._$_sourceAdapterArguments$_ = null;
        }
        _$GetPropertyTrackData$_() {
            return this._$_propertyTrackData$_;
        }
        _$GetPropertyKeyframeData$_() {
            return this._$_propertyKeyframeData$_ || (this._$_propertyKeyframeData$_ = new Nr._$PropertyKeyframeData$_(null, this)), 
            this._$_propertyKeyframeData$_;
        }
        _$GetSourceAdapterId$_() {
            return this._$_sourceAdapterId$_;
        }
        _$SetSourceAdapterId$_(t) {
            this._$_sourceAdapterId$_ = t;
        }
        _$GetSourceAdapterArguments$_() {
            return this._$_sourceAdapterArguments$_;
        }
        _$SetSourceAdapterArguments$_(t) {
            this._$_sourceAdapterArguments$_ = t;
        }
        _$GetProperty$_() {
            return this._$_property$_;
        }
        _$SetProperty$_(t) {
            this._$_property$_ = t;
        }
        _$GetType$_() {
            return this._$_type$_;
        }
        _$SetType$_(t) {
            this._$_type$_ = t;
        }
        _$GetMin$_() {
            return this._$_min$_;
        }
        _$SetMin$_(t) {
            this._$_min$_ = t;
        }
        _$GetMax$_() {
            return this._$_max$_;
        }
        _$SetMax$_(t) {
            this._$_max$_ = t;
        }
        _$GetInterpolationMode$_() {
            return this._$_interpolationMode$_;
        }
        _$SetInterpolationMode$_(t) {
            this._$_interpolationMode$_ = t;
        }
        _$GetResultMode$_() {
            return this._$_resultMode$_;
        }
        _$SetResultMode$_(t) {
            this._$_resultMode$_ = t;
        }
        _$GetEnable$_() {
            return this._$_enabled$_;
        }
        _$SetEnable$_(t) {
            this._$_enabled$_ = !!t;
        }
        _$CanHavePropertyKeyframes$_() {
            return !!this._$_canHavePropertyKeyframes$_;
        }
        _$_SaveToJson$_() {
            return {
                propertyKeyframeDataJson: this._$_propertyKeyframeData$_._$_SaveToJson$_(),
                sourceAdapterId: this._$_sourceAdapterId$_,
                sourceAdapterArguments: this._$_sourceAdapterArguments$_,
                property: this._$_property$_,
                type: this._$_type$_,
                min: this._$_min$_,
                max: this._$_max$_,
                interpolationMode: this._$_interpolationMode$_,
                resultMode: this._$_resultMode$_,
                enabled: this._$_enabled$_,
                canHavePropertyKeyframes: this._$_canHavePropertyKeyframes$_
            };
        }
        _$_LoadFromJson$_(t) {
            t && (this._$_sourceAdapterId$_ = t.sourceAdapterId, this._$_sourceAdapterArguments$_ = t.sourceAdapterArguments, 
            this._$_property$_ = t.property, this._$_type$_ = t.type, this._$_min$_ = t.min, 
            this._$_max$_ = t.max, this._$_interpolationMode$_ = t.interpolationMode, 
            this._$_resultMode$_ = t.resultMode, this._$_enabled$_ = t.enabled, 
            this._$_canHavePropertyKeyframes$_ = t.canHavePropertyKeyframes, this._$GetPropertyKeyframeData$_()._$_LoadFromJson$_(t.propertyKeyframeDataJson));
        }
    }
    Nr._$PropertyTrackData$_ = class {
        constructor(t, s) {
            this._$_trackDataItem$_ = s, this._$_propertyTrackDataItems$_ = [], 
            Nr._$TimelineDataManager$_._$_CreateDataItems$_(this._$_propertyTrackDataItems$_, t, Dr, this);
        }
        _$Release$_() {
            this._$_trackDataItem$_ = null;
            for (const t of this._$_propertyTrackDataItems$_) t._$Release$_();
            Nr._$clearArray$_(this._$_propertyTrackDataItems$_), this._$_propertyTrackDataItems$_ = null;
        }
        _$GetTrackDataItem$_() {
            return this._$_trackDataItem$_;
        }
        _$AddEmptyPropertyTrackDataItem$_() {
            const t = new Dr(null, this);
            return this._$_propertyTrackDataItems$_.push(t), t;
        }
        _$GetFirstPropertyKeyframeDataItem$_(t) {
            const s = t._$GetPropertyKeyframeData$_();
            return s._$GetPropertyKeyframeDataItemArray$_()[0];
        }
        _$GetLastPropertyKeyframeDataItem$_(t) {
            const s = t._$GetPropertyKeyframeData$_(), i = s._$GetPropertyKeyframeDataItemArray$_();
            return i.at(-1);
        }
        _$GetPropertyKeyFrameDataItemAtTime$_(s, t) {
            const i = t._$GetPropertyKeyframeData$_(), e = i._$GetPropertyKeyframeDataItemArray$_(), n = e.length;
            for (let t = 0; t < n; t++) {
                const h = e[t];
                if (h._$GetTime$_() === s) return h;
            }
        }
        _$GetFirstPropertyKeyFrameDataItemHigherThan$_(s, t) {
            const i = t._$GetPropertyKeyframeData$_(), e = i._$GetPropertyKeyframeDataItemArray$_(), n = e.length;
            for (let t = 0; t < n; t++) {
                const h = e[t];
                if (h._$GetTime$_() > s) return h;
            }
        }
        _$GetFirstPropertyKeyFrameDataItemHigherOrEqualThan$_(s, t) {
            const i = t._$GetPropertyKeyframeData$_(), e = i._$GetPropertyKeyframeDataItemArray$_(), n = e.length;
            for (let t = 0; t < n; t++) {
                const h = e[t];
                if (h._$GetTime$_() >= s) return h;
            }
        }
        _$GetFirstPropertyKeyFrameDataItemLowerOrEqualThan$_(s, t) {
            const i = t._$GetPropertyKeyframeData$_(), e = i._$GetPropertyKeyframeDataItemArray$_();
            for (let t = e.length - 1; 0 <= t; t--) {
                const n = e[t];
                if (n._$GetTime$_() <= s) return n;
            }
        }
        *_$propertyTrackDataItems$_() {
            for (const t of this._$_propertyTrackDataItems$_) yield t;
        }
        _$_SaveToJson$_() {
            return {
                propertyTrackDataItemsJson: this._$_propertyTrackDataItems$_.map(t => t._$_SaveToJson$_())
            };
        }
        _$_LoadFromJson$_(t) {
            t && Nr._$TimelineDataManager$_._$_LoadDataItemsFromJson$_(this._$_propertyTrackDataItems$_, t.propertyTrackDataItemsJson, Dr, this);
        }
    };
}

{
    const Ar = self._$C3$_;
    class Lr {
        constructor(t, s) {
            if (this._$_keyframeData$_ = s, this._$_time$_ = -1, this._$_ease$_ = "noease", 
            this._$_enable$_ = !1, this._$_tags$_ = null, this._$_lowerTags$_ = null, 
            t) {
                this._$_time$_ = t[0], this._$_ease$_ = t[1], this._$_enable$_ = !!t[2];
                const i = t[3];
                this._$_tags$_ = i ? i.split(" ") : [], this._$_lowerTags$_ = new Set(this._$_tags$_.map(t => t.toLowerCase())), 
                this._$_next$_ = null;
            }
        }
        _$Release$_() {
            this._$_keyframeData$_ = null, Ar._$clearArray$_(this._$_tags$_), this._$_tags$_ = null, 
            this._$_lowerTags$_.clear(), this._$_lowerTags$_ = null, this._$_next$_ = null;
        }
        _$GetKeyframeData$_() {
            return this._$_keyframeData$_;
        }
        _$GetNext$_() {
            return this._$_next$_;
        }
        _$SetNext$_(t) {
            this._$_next$_ = t;
        }
        _$GetTime$_() {
            return this._$_time$_;
        }
        _$SetTime$_(t) {
            this._$_time$_ = t, this._$_keyframeData$_._$_LinkKeyframeDataItems$_();
        }
        _$GetEase$_() {
            return this._$_ease$_;
        }
        _$SetEase$_(t) {
            this._$_ease$_ = t;
        }
        _$GetEnable$_() {
            return this._$_enable$_;
        }
        _$SetEnable$_(t) {
            this._$_enable$_ = !!t;
        }
        _$GetTags$_() {
            return this._$_tags$_;
        }
        _$SetTags$_(t) {
            this._$_tags$_ = t ? t.split(" ") : [], this._$_lowerTags$_ = new Set(this._$_tags$_.map(t => t.toLowerCase()));
        }
        _$GetLowerTags$_() {
            return this._$_lowerTags$_;
        }
        _$HasTag$_(t) {
            return this._$_lowerTags$_.has(t.toLowerCase());
        }
        _$_SaveToJson$_() {
            return {
                time: this._$_time$_,
                ease: this._$_ease$_,
                enable: this._$_enable$_,
                tags: this._$_tags$_
            };
        }
        _$_LoadFromJson$_(t) {
            t && (this._$_time$_ = t.time, this._$_ease$_ = t.ease, this._$_enable$_ = t.enable, 
            this._$_tags$_ = t.tags, this._$_lowerTags$_ = new Set(this._$_tags$_.map(t => t.toLowerCase())));
        }
    }
    Ar._$KeyframeData$_ = class {
        constructor(t, s) {
            this._$_trackDataItem$_ = s, this._$_keyframeDataItems$_ = [], Ar._$TimelineDataManager$_._$_CreateDataItems$_(this._$_keyframeDataItems$_, t, Lr, this), 
            this._$_LinkKeyframeDataItems$_();
        }
        _$Release$_() {
            this._$_trackDataItem$_ = null;
            for (const t of this._$_keyframeDataItems$_) t._$Release$_();
            Ar._$clearArray$_(this._$_keyframeDataItems$_), this._$_keyframeDataItems$_ = null;
        }
        _$_LinkKeyframeDataItems$_() {
            this._$_keyframeDataItems$_.sort((t, s) => t._$GetTime$_() - s._$GetTime$_());
            for (let t = 0; t < this._$_keyframeDataItems$_.length; t++) {
                const s = this._$_keyframeDataItems$_[t];
                s._$SetNext$_(this._$_keyframeDataItems$_[t + 1]);
            }
        }
        _$GetTrackDataItem$_() {
            return this._$_trackDataItem$_;
        }
        _$GetKeyframeDataItemCount$_() {
            return this._$_keyframeDataItems$_.length;
        }
        _$GetKeyframeDataItemArray$_() {
            return this._$_keyframeDataItems$_;
        }
        _$AddEmptyKeyframeDataItem$_() {
            const t = new Lr(null, this);
            return this._$_keyframeDataItems$_.push(t), this._$_LinkKeyframeDataItems$_(), 
            t;
        }
        _$DeleteKeyframeDataItems$_(t) {
            for (const s of this._$_keyframeDataItems$_) if (t(s)) {
                const i = this._$_keyframeDataItems$_.indexOf(s);
                -1 !== i && (s._$Release$_(), this._$_keyframeDataItems$_.splice(i, 1));
            }
            this._$SortKeyframeDataItems$_(), this._$_LinkKeyframeDataItems$_();
        }
        _$SortKeyframeDataItems$_() {
            this._$_keyframeDataItems$_.sort((t, s) => t._$GetTime$_() - s._$GetTime$_());
        }
        _$GetKeyframeDataItemIndex$_(t) {
            return this._$_keyframeDataItems$_.indexOf(t);
        }
        _$GetKeyframeDataItemFromIndex$_(t) {
            return this._$_keyframeDataItems$_[t];
        }
        *_$keyframeDataItems$_() {
            for (const t of this._$_keyframeDataItems$_) yield t;
        }
        *_$keyframeDataItemsReverse$_() {
            for (let t = this._$_keyframeDataItems$_.length - 1; 0 <= t; t--) yield this._$_keyframeDataItems$_[t];
        }
        _$_SaveToJson$_() {
            return {
                keyframeDataItemsJson: this._$_keyframeDataItems$_.map(t => t._$_SaveToJson$_())
            };
        }
        _$_LoadFromJson$_(t) {
            t && (Ar._$TimelineDataManager$_._$_LoadDataItemsFromJson$_(this._$_keyframeDataItems$_, t.keyframeDataItemsJson, Lr, this), 
            this._$_LinkKeyframeDataItems$_());
        }
    };
}

{
    const Or = self._$C3$_;
    class Pr {
        constructor(t, s) {
            this._$_propertyKeyframeData$_ = s, this._$_value$_ = null, this._$_aValue$_ = null, 
            this._$_type$_ = "", this._$_time$_ = NaN, this._$_ease$_ = "noease", 
            this._$_enable$_ = !1, this._$_addonData$_ = null, this._$_addonInstance$_ = void 0, 
            this._$_pathMode$_ = "line", t && (this._$_value$_ = t[0][0], this._$_aValue$_ = t[0][1], 
            this._$_type$_ = t[0][2], this._$_time$_ = t[1], this._$_ease$_ = t[2], 
            this._$_enable$_ = !!t[3], this._$_pathMode$_ = t[5], this._$_addonData$_ = null, 
            t[4] && (this._$_addonData$_ = new Or._$AddonData$_(t[4], this)), this._$_next$_ = null, 
            this._$_prev$_ = null);
        }
        _$Release$_() {
            this._$_propertyKeyframeData$_ = null, this._$_addonData$_ && (this._$_addonData$_._$Release$_(), 
            this._$_addonData$_ = null), this._$_next$_ = null, this._$_prev$_ = null;
        }
        _$GetAddonData$_() {
            return this._$_addonData$_;
        }
        _$SetNext$_(t) {
            this._$_next$_ = t;
        }
        _$GetNext$_() {
            return this._$_next$_;
        }
        _$SetPrevious$_(t) {
            this._$_prev$_ = t;
        }
        _$GetPrevious$_() {
            return this._$_prev$_;
        }
        _$GetValue$_() {
            return this._$_value$_;
        }
        _$SetValue$_(t) {
            "color" === this._$_type$_ && Or._$IsFiniteNumber$_(t) ? (this._$_value$_[0] = Or._$GetRValue$_(t), 
            this._$_value$_[1] = Or._$GetGValue$_(t), this._$_value$_[2] = Or._$GetBValue$_(t)) : this._$_value$_ = t;
        }
        _$GetAbsoluteValue$_() {
            return this._$_aValue$_;
        }
        _$SetAbsoluteValue$_(t) {
            "color" === this._$_type$_ && Or._$IsFiniteNumber$_(t) ? (this._$_aValue$_[0] = Or._$GetRValue$_(t), 
            this._$_aValue$_[1] = Or._$GetGValue$_(t), this._$_aValue$_[2] = Or._$GetBValue$_(t)) : this._$_aValue$_ = t;
        }
        _$GetValueWithResultMode$_() {
            const t = this._$_propertyKeyframeData$_._$GetPropertyTrackDataItem$_()._$GetResultMode$_();
            return "relative" === t ? this._$GetValue$_() : "absolute" === t ? this._$GetAbsoluteValue$_() : void 0;
        }
        _$GetType$_() {
            return this._$_type$_;
        }
        _$SetType$_(t) {
            this._$_type$_ = t;
        }
        _$GetTime$_() {
            return this._$_time$_;
        }
        _$SetTime$_(t) {
            this._$_time$_ = t, this._$_propertyKeyframeData$_._$_LinkPropertyKeyframeDataItems$_();
        }
        _$GetEase$_() {
            return this._$_ease$_;
        }
        _$SetEase$_(t) {
            this._$_ease$_ = t;
        }
        _$GetEnable$_() {
            return this._$_enable$_;
        }
        _$SetEnable$_(t) {
            this._$_enable$_ = !!t;
        }
        _$GetPathMode$_() {
            return this._$_pathMode$_;
        }
        _$GetAddOn$_(s) {
            if (this._$_addonData$_) {
                if (!this._$_addonInstance$_ && null !== this._$_addonInstance$_) {
                    const i = this._$_addonData$_._$GetAddDataItemArray$_();
                    if (i) {
                        const e = i.length;
                        for (let t = 0; t < e; t++) {
                            const n = i[t];
                            if (n._$GetId$_() === s) return this._$_addonInstance$_ = n, 
                            this._$_addonInstance$_;
                        }
                    }
                    this._$_addonInstance$_ = null;
                }
                return this._$_addonInstance$_;
            }
        }
        _$_SaveToJson$_() {
            const t = this._$_addonData$_;
            return {
                addonDataJson: t && t._$_SaveToJson$_(),
                value: this._$_value$_,
                aValue: this._$_aValue$_,
                type: this._$_type$_,
                time: this._$_time$_,
                ease: this._$_ease$_,
                enable: this._$_enable$_
            };
        }
        _$_LoadFromJson$_(t) {
            t && (t.addonDataJson && this._$_addonData$_._SetFromJson(t.addonDataJson), 
            this._$_value$_ = t.value, this._$_aValue$_ = t.aValue, this._$_type$_ = t.type, 
            this._$_time$_ = t.time, this._$_ease$_ = t.ease, this._$_enable$_ = t.enable);
        }
    }
    Or._$PropertyKeyframeData$_ = class {
        constructor(t, s) {
            this._$_propertyTrackDataItem$_ = s, this._$_propertyKeyframeDataItems$_ = [], 
            this._$_propertyKeyframeDataItemsIncludingDisabled$_ = [], Or._$TimelineDataManager$_._$_CreateDataItems$_(this._$_propertyKeyframeDataItems$_, t, Pr, this), 
            Or._$TimelineDataManager$_._$_CreateDataItemsIncludingDisabled$_(this._$_propertyKeyframeDataItemsIncludingDisabled$_, t, Pr, this), 
            this._$_LinkPropertyKeyframeDataItems$_();
        }
        _$Release$_() {
            this._$_propertyTrackDataItem$_ = null;
            for (const t of this._$_propertyKeyframeDataItems$_) t._$Release$_();
            Or._$clearArray$_(this._$_propertyKeyframeDataItems$_), this._$_propertyKeyframeDataItems$_ = null;
            for (const s of this._$_propertyKeyframeDataItemsIncludingDisabled$_) s._$Release$_();
            Or._$clearArray$_(this._$_propertyKeyframeDataItemsIncludingDisabled$_), 
            this._$_propertyKeyframeDataItemsIncludingDisabled$_ = null;
        }
        _$_LinkPropertyKeyframeDataItems$_() {
            let s = this._$_propertyKeyframeDataItems$_;
            s.sort((t, s) => t._$GetTime$_() - s._$GetTime$_());
            for (let t = 0; t < s.length; t++) {
                const i = s[t];
                t + 1 < s.length && i._$SetNext$_(s[t + 1]), 0 <= t - 1 && i._$SetPrevious$_(s[t - 1]);
            }
            (s = this._$_propertyKeyframeDataItemsIncludingDisabled$_).sort((t, s) => t._$GetTime$_() - s._$GetTime$_());
            for (let t = 0; t < s.length; t++) {
                const e = s[t];
                t + 1 < s.length && e._$SetNext$_(s[t + 1]), 0 <= t - 1 && e._$SetPrevious$_(s[t - 1]);
            }
        }
        _$AddEmptyPropertyKeyframeDataItem$_() {
            const t = new Pr(null, this);
            return this._$_propertyKeyframeDataItems$_.push(t), this._$_LinkPropertyKeyframeDataItems$_(), 
            t;
        }
        _$DeletePropertyKeyframeDataItems$_(t) {
            for (const s of this._$_propertyKeyframeDataItems$_) if (t(s)) {
                const i = this._$_propertyKeyframeDataItems$_.indexOf(s);
                -1 !== i && (s._$Release$_(), this._$_propertyKeyframeDataItems$_.splice(i, 1));
            }
            this._$SortPropertyKeyFrameDataItems$_(), this._$_LinkPropertyKeyframeDataItems$_();
        }
        _$SortPropertyKeyFrameDataItems$_() {
            this._$_propertyKeyframeDataItems$_.sort((t, s) => t._$GetTime$_() - s._$GetTime$_());
        }
        _$GetPropertyTrackDataItem$_() {
            return this._$_propertyTrackDataItem$_;
        }
        _$GetPropertyKeyframeDataItemCount$_() {
            return this._$_propertyKeyframeDataItems$_.length;
        }
        _$GetLastPropertyKeyframeDataItem$_() {
            return this._$_propertyKeyframeDataItems$_[this._$_propertyKeyframeDataItems$_.length - 1];
        }
        _$GetPropertyKeyframeDataItemArray$_() {
            return this._$_propertyKeyframeDataItems$_;
        }
        _$GetPropertyKeyframeDataItemArrayIncludingDisabled$_() {
            return this._$_propertyKeyframeDataItemsIncludingDisabled$_;
        }
        *_$propertyKeyframeDataItems$_() {
            for (const t of this._$_propertyKeyframeDataItems$_) yield t;
        }
        *_$propertyKeyframeDataItemsReverse$_() {
            for (let t = this._$_propertyKeyframeDataItems$_.length - 1; 0 <= t; t--) yield this._$_propertyKeyframeDataItems$_[t];
        }
        _$_SaveToJson$_() {
            const t = this._$_propertyKeyframeDataItems$_, s = this._$_propertyKeyframeDataItemsIncludingDisabled$_;
            return {
                propertyKeyframeDataItemsJson: t.map(t => t._$_SaveToJson$_()),
                propertyKeyframeDataItemsIncludingDisabledJson: s.map(t => t._$_SaveToJson$_())
            };
        }
        _$_LoadFromJson$_(t) {
            t && (Or._$TimelineDataManager$_._$_LoadDataItemsFromJson$_(this._$_propertyKeyframeDataItems$_, t.propertyKeyframeDataItemsJson, Pr, this), 
            Or._$TimelineDataManager$_._$_LoadDataItemsFromJson$_(this._$_propertyKeyframeDataItemsIncludingDisabled$_, t.propertyKeyframeDataItemsIncludingDisabledJson, Pr, this), 
            this._$_LinkPropertyKeyframeDataItems$_());
        }
    };
}

{
    const Rr = self._$C3$_;
    class kr {
        constructor(t, s) {
            this._$_addonData$_ = s, this._$_id$_ = t[0], this._$_data$_ = t[1];
        }
        _$Release$_() {
            this._$_addonData$_ = null, this._$_data$_ = null;
        }
        _$GetAddonData$_() {
            return this._$_addonData$_;
        }
        _$GetId$_() {
            return this._$_id$_;
        }
        _$_SaveToJson$_() {
            return {
                id: this._$_id$_,
                data: this._$_data$_
            };
        }
        _$_LoadFromJson$_(t) {
            t && (this._$_id$_ = t.id, this._$_data$_ = t.data);
        }
    }
    class Fr extends kr {
        constructor(t, s) {
            super(t, s), this._$_startAnchor$_ = this._$_data$_[0], this._$_startEnable$_ = !!this._$_data$_[1], 
            this._$_endAnchor$_ = this._$_data$_[2], this._$_endEnable$_ = !!this._$_data$_[3];
        }
        _$Release$_() {
            super._$Release$_();
        }
        _$GetStartAnchor$_() {
            return this._$_startAnchor$_;
        }
        _$GetStartEnable$_() {
            return this._$_startEnable$_;
        }
        _$GetEndAnchor$_() {
            return this._$_endAnchor$_;
        }
        _$GetEndEnable$_() {
            return this._$_endEnable$_;
        }
        _$_SaveToJson$_() {
            return Object.assign(super._$_SaveToJson$_(), {
                startAnchor: this._$_startAnchor$_,
                startEnable: !!this._$_startEnable$_,
                endAnchor: this._$_endAnchor$_,
                endEnable: !!this._$_endEnable$_
            });
        }
        _$_LoadFromJson$_(t) {
            t && (super._$_LoadFromJson$_(t), this._$_startAnchor$_ = t.startAnchor, 
            this._$_startEnable$_ = !!t.startEnable, this._$_endAnchor$_ = t.endAnchor, 
            this._$_endEnable$_ = !!t.endEnable);
        }
    }
    class jr extends kr {
        constructor(t, s) {
            super(t, s), this._$_direction$_ = this._$_data$_[0], this._$_revolutions$_ = this._$_data$_[1];
        }
        _$Release$_() {
            super._$Release$_();
        }
        _$GetDirection$_() {
            return this._$_direction$_;
        }
        _$GetRevolutions$_() {
            return this._$_revolutions$_;
        }
        _$_SaveToJson$_() {
            return Object.assign(super._$_SaveToJson$_(), {
                direction: this._$_direction$_,
                revolutions: this._$_revolutions$_
            });
        }
        _$_LoadFromJson$_(t) {
            t && (super._$_LoadFromJson$_(t), this._$_direction$_ = t.direction, 
            this._$_revolutions$_ = t.revolutions);
        }
    }
    Rr._$AddonData$_ = class {
        constructor(t, s) {
            this._$_propertyKeyframeDataItem$_ = s, this._$_addonDataItems$_ = [], 
            Rr._$TimelineDataManager$_._$_CreateDataItems$_(this._$_addonDataItems$_, t, {
                prop: 0,
                map: new Map([ [ "cubic-bezier", Fr ], [ "angle", jr ] ])
            }, this);
        }
        _$Release$_() {
            this._$_propertyKeyframeDataItem$_ = null;
            for (const t of this._$_addonDataItems$_) t._$Release$_();
            Rr._$clearArray$_(this._$_addonDataItems$_), this._$_addonDataItems$_ = null;
        }
        _$GetPropertyKeyframeDataItem$_() {
            return this._$_propertyKeyframeDataItem$_;
        }
        _$GetAddDataItemArray$_() {
            return this._$_addonDataItems$_;
        }
        *_$addonDataItems$_() {
            for (const t of this._$_addonDataItems$_) yield t;
        }
        _$_SaveToJson$_() {
            return {
                addonDataItemsJson: this._$_addonDataItems$_.map(t => t._$_SaveToJson$_())
            };
        }
        _$_LoadFromJson$_(t) {
            t && Rr._$TimelineDataManager$_._$_LoadDataItemsFromJson$_(this._$_addonDataItems$_, t.addonDataItemsJson, {
                prop: "id",
                map: new Map([ [ "cubic-bezier", Fr ], [ "angle", jr ] ])
            }, this);
        }
    };
}

{
    let m = self._$C3$_, i = 0;
    m._$TweenState$_ = class extends m._$TimelineState$_ {
        constructor(t, s) {
            super("tween-" + i++, t, s), this._$_id$_ = "", this._$_destroyInstanceOnComplete$_ = !1, 
            this._$_initialValueMode$_ = "start-value", this._$_instance$_ = null, 
            this._$_on_completed_callbacks$_ = null, this._$_on_started_callbacks$_ = null, 
            this._$_track$_ = null, this._$_iTweenState$_ = null;
        }
        _$FireReleaseEvent$_(t) {
            const s = m._$New$_(m.Event, "tweenstatereleased");
            s._$tweenState$_ = this, t.dispatchEvent(s);
        }
        _$GetType$_() {
            return 1;
        }
        _$CreateTrackStates$_() {
            for (const t of this._$_timelineDataItem$_._$GetTrackData$_()._$trackDataItems$_()) this._$_tracks$_.push(m._$TweenTrackState$_._$Create$_(this, t));
            this._$_track$_ = this._$_tracks$_[0];
        }
        _$AddTrack$_() {
            const t = this._$_timelineDataItem$_._$GetTrackData$_()._$AddEmptyTrackDataItem$_(), s = m._$TweenTrackState$_._$Create$_(this, t);
            return this._$_tracks$_.push(s), this._$_CacheTrack$_(), s;
        }
        _$_CacheTrack$_() {
            this._$_track$_ = this._$_tracks$_[0];
        }
        _$GetPropertyTrack$_(t) {
            return this._$_track$_._$GetPropertyTracks$_()[0];
        }
        _$SetPropertyType$_(t) {
            this._$_propertyType$_ = t;
        }
        _$GetInstance$_() {
            const t = this._$GetTracks$_();
            if (t && t.length) {
                const s = t[0];
                if (this._$_track$_ = s) {
                    const i = s._$GetInstance$_();
                    return s._$IsInstanceValid$_() ? i : void 0;
                }
            }
        }
        _$AddStartedCallback$_(t) {
            this._$_on_started_callbacks$_ || (this._$_on_started_callbacks$_ = []), 
            this._$_on_started_callbacks$_.push(t);
        }
        _$AddCompletedCallback$_(t) {
            this._$_on_completed_callbacks$_ || (this._$_on_completed_callbacks$_ = []), 
            this._$_on_completed_callbacks$_.push(t);
        }
        _$RemoveStartedCallback$_(t) {
            if (this._$_on_started_callbacks$_) {
                const s = this._$_on_started_callbacks$_.indexOf(t);
                -1 !== s && this._$_on_started_callbacks$_.splice(s, 1);
            }
        }
        _$RemoveCompletedCallback$_(t) {
            if (this._$_on_completed_callbacks$_) {
                const s = this._$_on_completed_callbacks$_.indexOf(t);
                -1 !== s && this._$_on_completed_callbacks$_.splice(s, 1);
            }
        }
        _$SetStartValue$_(t, s) {
            for (const i of this._$_tracks$_) for (const e of i._$_propertyTracks$_) if (e._$GetPropertyName$_() === s) {
                const n = e._$GetPropertyTrackData$_(), h = e._$GetPropertyTrackDataItem$_(), r = n._$GetFirstPropertyKeyframeDataItem$_(h);
                r._$SetValue$_(t), r._$SetAbsoluteValue$_(t);
            }
        }
        _$_GetPropertyTrackState$_(t) {
            for (const s of this._$_tracks$_) for (const i of s._$_propertyTracks$_) if (i._$GetPropertyName$_() === t) return i;
        }
        _$BeforeSetEndValues$_(t) {
            for (const s of t) {
                const i = this._$_GetPropertyTrackState$_(s);
                this._$SetStartValue$_(i._$GetCurrentState$_(), s);
            }
            if (this._$IsForwardPlayBack$_()) {
                const e = this._$GetTotalTime$_() - this._$GetTime$_();
                this._$SetTotalTime$_(e);
                for (const n of this._$_tracks$_) n._$SetLocalTotalTime$_(e);
                this._$_SetTime$_(0);
            } else {
                const h = this._$GetTime$_();
                this._$SetTotalTime$_(h);
                for (const r of this._$_tracks$_) r._$SetLocalTotalTime$_(h);
                this._$_SetTime$_(h);
            }
            this._$SetInitialStateFromSetTime$_();
        }
        _$SetEndValue$_(t, s) {
            const i = this._$_GetPropertyTrackState$_(s), e = i._$GetPropertyTrackData$_(), n = i._$GetPropertyTrackDataItem$_(), h = e._$GetLastPropertyKeyframeDataItem$_(n);
            h._$SetTime$_(this._$GetTotalTime$_()), h._$SetValue$_(t), h._$SetAbsoluteValue$_(t);
        }
        _$SetId$_(t) {
            this._$_id$_ = t;
        }
        _$GetId$_() {
            return this._$_id$_;
        }
        _$SetInitialValueMode$_(t) {
            this._$_initialValueMode$_ = t;
        }
        _$GetInitialValueMode$_() {
            return this._$_initialValueMode$_;
        }
        _$SetDestroyInstanceOnComplete$_(t) {
            this._$_destroyInstanceOnComplete$_ = t;
        }
        _$GetDestroyInstanceOnComplete$_() {
            return this._$_destroyInstanceOnComplete$_;
        }
        _$OnStarted$_() {
            if (this._$_on_started_callbacks$_) for (const t of this._$_on_started_callbacks$_) t(this);
            if (!this._$IsComplete$_()) for (const s of this._$_tracks$_) s._$CompareSaveStateWithCurrent$_();
        }
        _$OnCompleted$_() {
            this._$_completedTick$_ = this._$_runtime$_._$GetTickCount$_();
        }
        _$FinishTriggers$_() {
            if (!this._$_finishedTriggers$_ && (this._$_finishedTriggers$_ = !0, 
            this._$_on_completed_callbacks$_)) for (const t of this._$_on_completed_callbacks$_) t(this);
        }
        _$SetTime$_(t) {
            this._$_DeleteIntermediateKeyframes$_(), super._$SetTime$_(t);
        }
        _$_SetTimeAndReset$_(t) {
            (t = m._$IsFiniteNumber$_(t) ? t : this._$GetTotalTime$_()) < 0 ? this._$_playheadTime$_ = 0 : t >= this._$GetTotalTime$_() ? this._$_playheadTime$_ = this._$GetTotalTime$_() : this._$_playheadTime$_ = t, 
            this._$_track$_._$SetResetState$_();
        }
        _$SetInitialState$_(t) {
            if (!this._$InitialStateSet$_() && "current-state" === this._$GetInitialValueMode$_()) for (const s of this._$_tracks$_) s._$CompareInitialStateWithCurrent$_();
            super._$SetInitialState$_(t);
        }
        _$Stop$_(t = !1) {
            if (super._$Stop$_(t), !this._$IsComplete$_()) for (const s of this._$_tracks$_) s._$SaveState$_();
        }
        _$Reset$_(t = !0, s = !1) {
            this._$_DeleteIntermediateKeyframes$_(), super._$Reset$_(t, s);
        }
        _$_DeleteIntermediateKeyframes$_() {
            for (const t of this._$_tracks$_) {
                const s = t => {
                    const s = t._$GetTime$_(), i = this._$GetTotalTime$_();
                    return 0 !== s && s !== i;
                };
                t._$DeleteKeyframes$_(s), t._$DeletePropertyKeyframes$_(s);
            }
        }
        _$_OnBeforeChangeLayout$_() {
            if (!this._$IsReleased$_()) {
                const t = this._$GetInstance$_();
                if (t && t._$GetObjectClass$_()._$IsGlobal$_()) return !1;
                this._$_timelineManager$_._$CompleteTimelineBeforeChangeOfLayout$_(this), 
                this._$ResetBeforeChangeLayout$_();
            }
            return !0;
        }
        _$Tick$_(n, t, s) {
            if (this._$_instance$_ || (this._$_instance$_ = this._$GetInstance$_()), 
            !this._$_instance$_ || this._$_instance$_._$IsDestroyed$_()) this._$Stop$_(!0), 
            this._$OnCompleted$_(); else {
                const i = this._$_instance$_._$GetTimeScale$_();
                if (0 !== (n = -1 !== i ? s * i : n) || 0 !== this._$_lastDelta$_) {
                    this._$_lastDelta$_ = n;
                    const h = this._$_playheadTime$_ + this._$_overshoot$_, r = n * this._$_playbackRate$_, o = h + r, a = this._$_timelineDataItem$_._$_totalTime$_;
                    o < 0 ? (this._$_playheadTime$_ = 0, this._$_overshoot$_ = -o) : a <= o ? (this._$_playheadTime$_ = a, 
                    this._$_overshoot$_ = this._$_playheadTime$_ - o) : (this._$_playheadTime$_ = o, 
                    this._$_overshoot$_ = 0);
                    let t = !1, s = !1, i = this._$GetLoop$_(), e = this._$GetPingPong$_();
                    i || e ? i && !e ? 0 < this._$_playbackRate$_ ? this._$_playheadTime$_ >= a && (this._$_SetTimeAndReset$_(0), 
                    this._$_TweenTrigger$_(m._$Behaviors$_.Tween._$Cnds$_.OnAnyTweenLoop), 
                    this._$_TweenTrigger$_(m._$Behaviors$_.Tween._$Cnds$_.OnTweensLoop), 
                    s = !0) : this._$_playheadTime$_ <= 0 && (this._$_SetTimeAndReset$_(a), 
                    this._$_TweenTrigger$_(m._$Behaviors$_.Tween._$Cnds$_.OnAnyTweenLoop), 
                    this._$_TweenTrigger$_(m._$Behaviors$_.Tween._$Cnds$_.OnTweensLoop), 
                    s = !0) : !i && e ? 0 < this._$_playbackRate$_ ? this._$_playheadTime$_ >= a && (this._$_SetTime$_(a), 
                    this._$SetPlaybackRate$_(-1 * this._$GetPlaybackRate$_()), s = !0, 
                    1 === this._$_pingPongState$_ ? this._$_currentRepeatCount$_ < this._$GetRepeatCount$_() ? (this._$_currentRepeatCount$_++, 
                    this._$_TweenTrigger$_(m._$Behaviors$_.Tween._$Cnds$_.OnAnyTweenLoop), 
                    this._$_TweenTrigger$_(m._$Behaviors$_.Tween._$Cnds$_.OnTweensLoop), 
                    this._$_TweenTrigger$_(m._$Behaviors$_.Tween._$Cnds$_.OnAnyTweenPingPong), 
                    this._$_TweenTrigger$_(m._$Behaviors$_.Tween._$Cnds$_.OnTweensPingPong), 
                    this._$_pingPongState$_ = 0) : (this._$_TweenTrigger$_(m._$Behaviors$_.Tween._$Cnds$_.OnAnyTweenPingPong), 
                    this._$_TweenTrigger$_(m._$Behaviors$_.Tween._$Cnds$_.OnTweensPingPong), 
                    t = !0) : 0 === this._$_pingPongState$_ && (this._$_TweenTrigger$_(m._$Behaviors$_.Tween._$Cnds$_.OnAnyTweenPingPong), 
                    this._$_TweenTrigger$_(m._$Behaviors$_.Tween._$Cnds$_.OnTweensPingPong), 
                    this._$_pingPongState$_ = 1)) : this._$_playheadTime$_ <= 0 && (this._$_SetTime$_(0), 
                    this._$SetPlaybackRate$_(-1 * this._$GetPlaybackRate$_()), s = !0, 
                    1 === this._$_pingPongState$_ ? this._$_currentRepeatCount$_ < this._$GetRepeatCount$_() ? (this._$_currentRepeatCount$_++, 
                    this._$_TweenTrigger$_(m._$Behaviors$_.Tween._$Cnds$_.OnAnyTweenLoop), 
                    this._$_TweenTrigger$_(m._$Behaviors$_.Tween._$Cnds$_.OnTweensLoop), 
                    this._$_TweenTrigger$_(m._$Behaviors$_.Tween._$Cnds$_.OnAnyTweenPingPong), 
                    this._$_TweenTrigger$_(m._$Behaviors$_.Tween._$Cnds$_.OnTweensPingPong), 
                    this._$_pingPongState$_ = 0) : (t = !0, this._$_TweenTrigger$_(m._$Behaviors$_.Tween._$Cnds$_.OnAnyTweenPingPong), 
                    this._$_TweenTrigger$_(m._$Behaviors$_.Tween._$Cnds$_.OnTweensPingPong)) : 0 === this._$_pingPongState$_ && (this._$_TweenTrigger$_(m._$Behaviors$_.Tween._$Cnds$_.OnAnyTweenPingPong), 
                    this._$_TweenTrigger$_(m._$Behaviors$_.Tween._$Cnds$_.OnTweensPingPong), 
                    this._$_pingPongState$_ = 1)) : i && e && (0 < this._$_playbackRate$_ ? this._$_playheadTime$_ >= a && (this._$_SetTime$_(a), 
                    this._$SetPlaybackRate$_(-1 * this._$GetPlaybackRate$_()), s = !0, 
                    0 === this._$_pingPongState$_ && (this._$_TweenTrigger$_(m._$Behaviors$_.Tween._$Cnds$_.OnAnyTweenPingPong), 
                    this._$_TweenTrigger$_(m._$Behaviors$_.Tween._$Cnds$_.OnTweensPingPong)), 
                    1 === this._$_pingPongState$_ && (this._$_TweenTrigger$_(m._$Behaviors$_.Tween._$Cnds$_.OnAnyTweenLoop), 
                    this._$_TweenTrigger$_(m._$Behaviors$_.Tween._$Cnds$_.OnTweensLoop), 
                    this._$_TweenTrigger$_(m._$Behaviors$_.Tween._$Cnds$_.OnAnyTweenPingPong), 
                    this._$_TweenTrigger$_(m._$Behaviors$_.Tween._$Cnds$_.OnTweensPingPong)), 
                    this._$_pingPongState$_++, this._$_pingPongState$_ = m.wrap(this._$_pingPongState$_, 0, 2)) : this._$_playheadTime$_ <= 0 && (this._$_SetTime$_(0), 
                    this._$SetPlaybackRate$_(-1 * this._$GetPlaybackRate$_()), s = !0, 
                    0 === this._$_pingPongState$_ && (this._$_TweenTrigger$_(m._$Behaviors$_.Tween._$Cnds$_.OnAnyTweenPingPong), 
                    this._$_TweenTrigger$_(m._$Behaviors$_.Tween._$Cnds$_.OnTweensPingPong)), 
                    1 === this._$_pingPongState$_ && (this._$_TweenTrigger$_(m._$Behaviors$_.Tween._$Cnds$_.OnAnyTweenLoop), 
                    this._$_TweenTrigger$_(m._$Behaviors$_.Tween._$Cnds$_.OnTweensLoop), 
                    this._$_TweenTrigger$_(m._$Behaviors$_.Tween._$Cnds$_.OnAnyTweenPingPong), 
                    this._$_TweenTrigger$_(m._$Behaviors$_.Tween._$Cnds$_.OnTweensPingPong)), 
                    this._$_pingPongState$_++, this._$_pingPongState$_ = m.wrap(this._$_pingPongState$_, 0, 2))) : 0 < this._$_playbackRate$_ ? this._$_playheadTime$_ >= a && (this._$_currentRepeatCount$_ < this._$GetRepeatCount$_() ? (this._$_currentRepeatCount$_++, 
                    this._$_SetTimeAndReset$_(0), this._$_TweenTrigger$_(m._$Behaviors$_.Tween._$Cnds$_.OnAnyTweenLoop), 
                    this._$_TweenTrigger$_(m._$Behaviors$_.Tween._$Cnds$_.OnTweensLoop), 
                    s = !0) : (this._$_SetTime$_(a), t = !0)) : this._$_playheadTime$_ <= 0 && (this._$_currentRepeatCount$_ < this._$GetRepeatCount$_() ? (this._$_currentRepeatCount$_++, 
                    this._$_SetTimeAndReset$_(a), this._$_TweenTrigger$_(m._$Behaviors$_.Tween._$Cnds$_.OnAnyTweenLoop), 
                    this._$_TweenTrigger$_(m._$Behaviors$_.Tween._$Cnds$_.OnTweensLoop), 
                    s = !0) : (this._$_SetTime$_(0), t = !0)), t ? (this._$_track$_._$SetEndState$_(), 
                    this._$Stop$_(!0), this._$OnCompleted$_()) : (this._$_track$_._$Interpolate$_(this._$_playheadTime$_, !0, !1, s, this._$_firstTick$_, !1), 
                    this._$_firstTick$_ && (this._$_firstTick$_ = !1));
                }
            }
        }
        _$_TweenTrigger$_(t) {
            const s = this._$GetInstance$_(), i = s._$GetBehaviorSdkInstanceFromCtor$_(m._$Behaviors$_.Tween);
            i.PushTriggerTween(this), this._$_runtime$_._$Trigger$_(t, s, i._$GetBehaviorType$_()), 
            i.PopTriggerTween();
        }
        _$_SaveToJson$_() {
            const t = super._$_SaveToJson$_(), s = this._$GetTimelineDataItem$_();
            return Object.assign(t, {
                tweenDataItemJson: s._$_SaveToJson$_(),
                id: this._$_id$_,
                destroyInstanceOnComplete: this._$_destroyInstanceOnComplete$_,
                initialValueMode: this._$_initialValueMode$_
            });
        }
        _$_LoadFromJson$_(t) {
            if (t) {
                const s = this._$GetTimelineDataItem$_();
                s._$_LoadFromJson$_(t.tweenDataItemJson), super._$_LoadFromJson$_(t), 
                this._$_id$_ = t.id, this._$_destroyInstanceOnComplete$_ = t.destroyInstanceOnComplete, 
                this._$_initialValueMode$_ = t.initialValueMode, this._$_CacheTrack$_();
            }
        }
        static IsPlaying(t) {
            return t.IsPlaying();
        }
        static _$IsPaused$_(t) {
            return t._$IsPaused$_();
        }
        static _$IsPing$_(t) {
            return !!t._$GetPingPong$_() && 0 === t._$GetPingPongState$_();
        }
        static _$IsPong$_(t) {
            return !!t._$GetPingPong$_() && 1 === t._$GetPingPongState$_();
        }
        static _$Build$_(t) {
            const s = t.runtime._$GetTimelineManager$_(), i = new m._$TimelineDataItem$_();
            if (t.json) {
                i._$_LoadFromJson$_(t.json.tweenDataItemJson);
                const e = new m._$TweenState$_(i, s);
                return e._$_LoadFromJson$_(t.json), e;
            }
            {
                const n = new m._$TweenState$_(i, s), h = (m._$IsArray$_(t._$propertyTracksConfig$_) || (t._$propertyTracksConfig$_ = [ t._$propertyTracksConfig$_ ]), 
                n._$SetId$_(t.id), n._$SetTags$_(t.tags), n._$SetInitialValueMode$_(t.initialValueMode), 
                n._$SetDestroyInstanceOnComplete$_(t.releaseOnComplete), n._$SetLoop$_(t.loop), 
                n._$SetPingPong$_(t.pingPong), n._$SetTotalTime$_(t.time), n._$SetStep$_(0), 
                n._$SetInterpolationMode$_("default"), n._$SetResultMode$_(t._$propertyTracksConfig$_[0].resultMode), 
                n._$SetRepeatCount$_(t.repeatCount), n._$AddTrack$_()), r = (h._$SetInstanceUID$_(t._$instance$_._$GetUID$_()), 
                h._$SetInterpolationMode$_("default"), h._$SetResultMode$_(t._$propertyTracksConfig$_[0].resultMode), 
                h._$SetEnable$_(!0), h._$SetObjectClassIndex$_(t._$instance$_._$GetObjectClass$_()._$GetIndex$_()), 
                t._$instance$_._$GetSdkInstance$_()), o = r._$IsOriginalSizeKnown$_() ? r._$GetOriginalWidth$_() : t._$instance$_._$GetWorldInfo$_()._$GetWidth$_(), a = r._$IsOriginalSizeKnown$_() ? r._$GetOriginalHeight$_() : t._$instance$_._$GetWorldInfo$_()._$GetHeight$_(), l = (h._$SetOriginalWidth$_(o), 
                h._$SetOriginalHeight$_(a), h._$AddKeyframe$_()), u = (l._$SetTime$_(0), 
                l._$SetEase$_("noease"), l._$SetEnable$_(!0), l._$SetTags$_(""), 
                h._$AddKeyframe$_());
                u._$SetTime$_(t.time), u._$SetEase$_("noease"), u._$SetEnable$_(!0), 
                u._$SetTags$_("");
                for (const c of t._$propertyTracksConfig$_) {
                    const f = h._$AddPropertyTrack$_(), d = (f._$SetSourceAdapterId$_(c.sourceId), 
                    f._$SetSourceAdapterArgs$_(c.sourceArgs), f._$SetPropertyName$_(c.property), 
                    f._$SetPropertyType$_(c.type), f._$SetMin$_(NaN), f._$SetMax$_(NaN), 
                    f._$SetInterpolationMode$_("default"), f._$SetResultMode$_(c.resultMode), 
                    f._$SetEnable$_(!0), f._$AddPropertyKeyframe$_()), p = (d._$SetType$_(c.valueType), 
                    d._$SetTime$_(0), d._$SetEase$_(c.ease), d._$SetEnable$_(!0), 
                    d._$SetValue$_(c.startValue), d._$SetAbsoluteValue$_(c.startValue), 
                    f._$AddPropertyKeyframe$_());
                    p._$SetType$_(c.valueType), p._$SetTime$_(t.time), p._$SetEase$_(c.ease), 
                    p._$SetEnable$_(!0), p._$SetValue$_(c.endValue), p._$SetAbsoluteValue$_(c.endValue), 
                    f._$GetSourceAdapter$_();
                }
                return n;
            }
        }
        static _$SetInstanceUID$_(t, s) {
            if (!isNaN(s)) for (const i of t._$GetTracks$_()) i._$SetInstanceUID$_(s);
        }
        _$GetITweenState$_(t, s) {
            return this._$_iTweenState$_ || (this._$_iTweenState$_ = m._$New$_(self._$ITweenState$_, this, t, s)), 
            this._$_iTweenState$_;
        }
    };
}

{
    const zr = self._$C3$_;
    zr._$TweenTrackState$_ = class extends zr._$TrackState$_ {
        constructor(t, s) {
            super(t, s), this._$_firstPropertyTrack$_ = null, this._$_secondPropertyTrack$_ = null;
        }
        static _$Create$_(t, s) {
            return zr._$New$_(zr._$TweenTrackState$_, t, s);
        }
        _$_CachePropertyTracks$_() {
            1 === this._$_propertyTracks$_.length ? this._$_firstPropertyTrack$_ = this._$_propertyTracks$_[0] : (this._$_firstPropertyTrack$_ = this._$_propertyTracks$_[0], 
            this._$_secondPropertyTrack$_ = this._$_propertyTracks$_[1]);
        }
        _$CreatePropertyTrackStates$_() {
            for (const t of this._$_trackDataItem$_._$GetPropertyTrackData$_()._$propertyTrackDataItems$_()) this._$_propertyTracks$_.push(zr._$TweenPropertyTrackState$_._$Create$_(this, t));
            this._$_CachePropertyTracks$_();
        }
        _$AddPropertyTrack$_() {
            const t = this._$_trackDataItem$_._$GetPropertyTrackData$_(), s = t._$AddEmptyPropertyTrackDataItem$_(), i = zr._$TweenPropertyTrackState$_._$Create$_(this, s);
            return this._$_propertyTracks$_.push(i), this._$_CachePropertyTracks$_(), 
            i;
        }
        _$SetInitialState$_() {
            if (this._$MaybeGetInstance$_(), this._$IsInstanceValid$_() || !this._$IsInstanceTrack$_()) {
                const t = this._$GetTimeline$_(), s = t._$IsForwardPlayBack$_(), i = s ? 0 : this._$GetLocalTotalTime$_();
                for (const n of this._$_propertyTracks$_) n._$SetInitialState$_(i), 
                0 === this._$_worldInfoChange$_ && 1 === n._$GetWorldInfoChange$_() && (this._$_worldInfoChange$_ = 1), 
                0 === this._$_renderChange$_ && 1 === n._$GetRenderChange$_() && (this._$_renderChange$_ = 1);
                this._$_needsBeforeAndAfter$_ = 0;
                const e = this._$_propertyTracks$_.some(t => t._$GetNeedsBeforeAndAfter$_());
                e && (this._$_needsBeforeAndAfter$_ = 1), this._$_lastKeyframeDataItem$_ = this._$_GetLastKeyFrameBeforeTime$_(i), 
                this._$_initialStateOfNestedSet$_ = !1, this._$_endStateOfNestedSet$_ = !1, 
                this._$Interpolate$_(i);
            }
        }
        _$BeforeInterpolate$_() {}
        _$Interpolate$_(t, s = 0, i = !1, e = !1, n, h = !1, r = !1) {
            if (this._$_instance$_ || this._$GetInstance$_(), this._$_instance$_) {
                const o = !this._$_instance$_._$IsDestroyed$_();
                return o && (!h || !this._$GetObjectClass$_()._$IsGlobal$_()) && ((this._$_secondPropertyTrack$_ ? (this._$_firstPropertyTrack$_._$Interpolate$_(t, i, e, r), 
                this._$_secondPropertyTrack$_) : this._$_firstPropertyTrack$_)._$Interpolate$_(t, i, e, r), 
                void (0 !== this._$_firstPropertyTrack$_._$GetWorldInfoChange$_() && (this._$_worldInfo$_ || (this._$_worldInfo$_ = this._$_instance$_._$GetWorldInfo$_()), 
                this._$_worldInfo$_) && this._$_worldInfo$_._$SetBboxChanged$_()));
            }
        }
        _$AfterInterpolate$_() {}
        _$_LoadFromJson$_(t) {
            super._$_LoadFromJson$_(t), this._$_CachePropertyTracks$_();
        }
    };
}

{
    const Br = self._$C3$_;
    Br._$TweenPropertyTrackState$_ = class extends Br._$PropertyTrackState$_ {
        constructor(t, s) {
            super(t, s), this._$_basic$_ = !1;
        }
        static _$Create$_(t, s) {
            return Br._$New$_(Br._$TweenPropertyTrackState$_, t, s);
        }
        _$Interpolate$_(t, s = !1, i = !1, e = !1) {
            let n, h;
            if (this._$_basic$_) n = this._$_propertyKeyframeDataItems$_[0], h = this._$_propertyKeyframeDataItems$_[1]; else {
                if (s) n = this._$_propertyTrackData$_._$GetFirstPropertyKeyFrameDataItemLowerOrEqualThan$_(t, this._$_propertyTrackDataItem$_); else {
                    if (this._$_lastPropertyKeyframeDataItem$_) {
                        const r = this._$GetTimeline$_(), o = this._$_lastPropertyKeyframeDataItem$_._$GetNext$_(), a = this._$_lastPropertyKeyframeDataItem$_._$GetTime$_(), l = o ? o._$GetTime$_() : r._$GetTotalTime$_();
                        (t <= a || l <= t) && (this._$_lastPropertyKeyframeDataItem$_ = this._$_propertyTrackData$_._$GetFirstPropertyKeyFrameDataItemLowerOrEqualThan$_(t, this._$_propertyTrackDataItem$_));
                    } else this._$_lastPropertyKeyframeDataItem$_ = this._$_propertyTrackData$_._$GetFirstPropertyKeyFrameDataItemLowerOrEqualThan$_(t, this._$_propertyTrackDataItem$_);
                    n = this._$_lastPropertyKeyframeDataItem$_;
                }
                h = n._$GetNext$_();
            }
            this._$_sourceAdapter$_._$Interpolate$_(t, n, h, s, i, e);
        }
        _$AddPropertyKeyframe$_() {
            const t = this._$_propertyTrackDataItem$_._$GetPropertyKeyframeData$_(), s = t._$AddEmptyPropertyKeyframeDataItem$_();
            return this._$_lastPropertyKeyframeDataItem$_ = null, this._$_basic$_ = this._$GetPropertyKeyframeDataItems$_().length <= 2, 
            s;
        }
        _$DeletePropertyKeyframes$_(t) {
            this._$_lastPropertyKeyframeDataItem$_ = null;
            const s = this._$_propertyTrackDataItem$_._$GetPropertyKeyframeData$_();
            s._$DeletePropertyKeyframeDataItems$_(t), this._$_basic$_ = this._$GetPropertyKeyframeDataItems$_().length <= 2;
        }
        _$_SaveToJson$_() {
            return {
                sourceAdapterJson: this._$GetSourceAdapter$_()._$_SaveToJson$_(),
                basic: this._$_basic$_
            };
        }
        _$_LoadFromJson$_(t) {
            t && (this._$GetSourceAdapter$_()._$_LoadFromJson$_(t.sourceAdapterJson), 
            this._$_basic$_ = t.basic);
        }
    };
}

{
    const Ur = self._$C3$_, Wr = self._$Ease$_;
    Ur._$Transition$_ = class extends Ur._$DefendedBase$_ {
        constructor(t, s = !0) {
            super(), this._$_name$_ = t[0], this._$_linear$_ = t[2], this._$_transitionKeyframes$_ = [];
            for (const i of t[1]) {
                const e = Ur._$TransitionKeyframe$_._$Create$_(this, i);
                this._$_transitionKeyframes$_.push(e);
            }
            for (let t = 0; t < this._$_transitionKeyframes$_.length; t++) {
                const n = this._$_transitionKeyframes$_[t], h = this._$_transitionKeyframes$_[t + 1], r = this._$_transitionKeyframes$_[t - 1];
                n._$SetNext$_(h), n._$SetPrevious$_(r);
            }
            this._$_precalculatedSamples$_ = new Map(), this._$_transitionKeyframeCache$_ = new Map(), 
            this._$_PreCalcSamples$_(), s && Wr._$AddCustomEase$_(this._$_name$_, (t, s, i, e) => this._$Interpolate$_(t, s, i, e), null, {
                transition: this
            });
        }
        static _$Create$_(t) {
            return Ur._$New$_(Ur._$Transition$_, t);
        }
        _$Release$_() {
            for (const t of this._$_transitionKeyframes$_) t._$Release$_();
            Ur._$clearArray$_(this._$_transitionKeyframes$_), this._$_transitionKeyframes$_ = null, 
            this._$_precalculatedSamples$_.clear(), this._$_precalculatedSamples$_ = null, 
            this._$_transitionKeyframeCache$_.clear(), this._$_transitionKeyframeCache$_ = null;
        }
        _$MakeLinear$_(t) {
            this._$_linear$_ = !!t;
        }
        _$GetTransitionKeyFrameAt$_(t) {
            const s = this._$_transitionKeyframeCache$_.get(t);
            if (s) return s;
            for (const i of this._$_transitionKeyframes$_) if (i._$GetValueX$_() === t) return this._$_transitionKeyframeCache$_.set(t, i), 
            i;
        }
        _$GetFirstTransitionKeyFrameLowerOrEqualThan$_(s) {
            for (let t = this._$_transitionKeyframes$_.length - 1; 0 <= t; t--) {
                const i = this._$_transitionKeyframes$_[t], e = i._$GetValueX$_();
                if (e <= s) {
                    let t = i;
                    if (e < s) return t;
                    if (e === s) {
                        for (;t; ) {
                            const n = t._$GetPrevious$_();
                            if (!n) break;
                            if (n._$GetValueX$_() !== t._$GetValueX$_()) break;
                            t = n;
                        }
                        return t;
                    }
                }
            }
        }
        _$Interpolate$_(t, s, i, e) {
            let n = t / e;
            if (this._$_linear$_) {
                const M = this._$GetTransitionKeyFrameAt$_(0), w = this._$GetTransitionKeyFrameAt$_(1), x = s + (s + i) * M._$GetValueY$_(), S = (s + i) * w._$GetValueY$_(), T = S - x;
                return 0 === e ? x + T : Wr._$NoEase$_(t, x, T, e);
            }
            0 === e && (n = 1);
            let h = this._$GetFirstTransitionKeyFrameLowerOrEqualThan$_(n), r = h._$GetNext$_();
            if (!r) {
                const b = h._$GetPrevious$_(), v = h;
                h = b, r = v;
            }
            const o = r._$GetValueX$_() - h._$GetValueX$_(), a = Ur._$mapToRange$_(n, h._$GetValueX$_(), r._$GetValueX$_(), 0, o);
            if (h._$IsSegmentLinear$_() || 0 == o) {
                const C = s + (s + i) * h._$GetValueY$_(), G = (s + i) * r._$GetValueY$_(), I = G - C;
                return 0 == o ? 1 === a ? C + I : C : Wr._$NoEase$_(a, C, I, o);
            }
            let l = h._$GetValueX$_(), u = h._$GetValueY$_(), c = h._$GetValueX$_() + h._$GetStartAnchorX$_(), f = h._$GetValueY$_() + h._$GetStartAnchorY$_(), d = r._$GetValueX$_() + r._$GetEndAnchorX$_(), p = r._$GetValueY$_() + r._$GetEndAnchorY$_(), m = r._$GetValueX$_(), g = r._$GetValueY$_(), y = Wr._$GetRuntimeEase$_("spline")(a, l, u, c, f, d, p, m, g, this._$_precalculatedSamples$_.get(h));
            return (1 - (y += h._$GetValueY$_())) * s + y * (s + i);
        }
        _$_PreCalcSamples$_() {
            this._$_precalculatedSamples$_.clear();
            for (let t = 0; t < this._$_transitionKeyframes$_.length - 1; t++) {
                const s = this._$_transitionKeyframes$_[t];
                if (s._$GetStartEnable$_()) {
                    const i = s, e = this._$_transitionKeyframes$_[t + 1];
                    if (e._$GetEndEnable$_()) {
                        const n = i._$GetValueX$_(), h = i._$GetValueX$_() + i._$GetStartAnchorX$_(), r = e._$GetValueX$_() + e._$GetEndAnchorX$_(), o = e._$GetValueX$_();
                        this._$_precalculatedSamples$_.set(i, Wr._$GetBezierSamples$_(n, h, r, o));
                    }
                }
            }
        }
    };
}

{
    const Qr = self._$C3$_;
    Qr._$TransitionKeyframe$_ = class extends Qr._$DefendedBase$_ {
        constructor(t, s) {
            super(), this._$_transition$_ = t, this._$_valueX$_ = s[0], this._$_valueY$_ = s[1], 
            this._$_startAnchorX$_ = s[2], this._$_startAnchorY$_ = s[3], this._$_endAnchorX$_ = s[4], 
            this._$_endAnchorY$_ = s[5], this._$_startEnable$_ = s[6], this._$_endEnable$_ = s[7], 
            this._$_segmentMode$_ = s[8], this._$_next$_ = null, this._$_prev$_ = null;
        }
        _$Release$_() {
            this._$_transition$_ = null;
        }
        static _$Create$_(t, s) {
            return Qr._$New$_(Qr._$TransitionKeyframe$_, t, s);
        }
        _$SetNext$_(t) {
            this._$_next$_ = t;
        }
        _$GetNext$_() {
            return this._$_next$_;
        }
        _$SetPrevious$_(t) {
            this._$_prev$_ = t;
        }
        _$GetPrevious$_() {
            return this._$_prev$_;
        }
        _$GetValueX$_() {
            return this._$_valueX$_;
        }
        _$GetValueY$_() {
            return this._$_valueY$_;
        }
        _$GetStartAnchorX$_() {
            return this._$_startAnchorX$_;
        }
        _$GetStartAnchorY$_() {
            return this._$_startAnchorY$_;
        }
        _$GetEndAnchorX$_() {
            return this._$_endAnchorX$_;
        }
        _$GetEndAnchorY$_() {
            return this._$_endAnchorY$_;
        }
        _$GetStartEnable$_() {
            return this._$_startEnable$_;
        }
        _$GetEndEnable$_() {
            return this._$_endEnable$_;
        }
        _$IsSegmentLinear$_() {
            return "linear" === this._$_segmentMode$_;
        }
        _$IsSegmentCubic$_() {
            return "cubic" === this._$_segmentMode$_;
        }
    };
}

{
    const Vr = self._$C3$_;
    Vr._$TransitionManager$_ = class extends Vr._$DefendedBase$_ {
        constructor(t) {
            super(), this._$_runtime$_ = t, this._$_transitions$_ = [];
        }
        _$Release$_() {
            for (const t of this._$_transitions$_) t._$Release$_();
            Vr._$clearArray$_(this._$_transitions$_), this._$_transitions$_ = null;
        }
        _$Create$_(t) {
            this._$_transitions$_.push(Vr._$Transition$_._$Create$_(t));
        }
    };
}

{
    const Jr = self._$C3$_;
    Jr._$TemplateManager$_ = class extends Jr._$DefendedBase$_ {
        constructor(t) {
            super(), this._$_runtime$_ = t, this._$_templateDataMap$_ = null, this._$_instanceToTemplateNameMap$_ = null, 
            this._$_instanceDestroy$_ = t => this._$_OnInstanceDestroy$_(t._$instance$_);
        }
        _$Release$_() {
            if (this._$RemoveRuntimeListeners$_(), this._$_templateDataMap$_) {
                for (const t of this._$_templateDataMap$_.values()) t.clear();
                this._$_templateDataMap$_.clear();
            }
            this._$_templateDataMap$_ = null, this._$_runtime$_ = null;
        }
        _$Create$_(t) {
            if (this._$_templateDataMap$_ || (this._$_templateDataMap$_ = new Map()), 
            t) {
                const s = t[0][16], i = s[0], e = t[1], n = (this._$_templateDataMap$_.has(e) || this._$_templateDataMap$_.set(e, new Map()), 
                this._$_templateDataMap$_.get(e));
                n.set(i, t);
            }
        }
        _$AddRuntimeListeners$_() {
            const t = this._$_runtime$_._$Dispatcher$_();
            t && t.addEventListener("instancedestroy", this._$_instanceDestroy$_);
        }
        _$RemoveRuntimeListeners$_() {
            const t = this._$_runtime$_._$Dispatcher$_();
            t && t.removeEventListener("instancedestroy", this._$_instanceDestroy$_);
        }
        _$HasTemplates$_() {
            return !!this._$_templateDataMap$_ && 0 !== this._$_templateDataMap$_.size;
        }
        _$GetTemplateData$_(t, s) {
            let i;
            if (i = t instanceof Jr._$ObjectClass$_ ? t._$GetIndex$_() : t, this._$_templateDataMap$_.has(i)) {
                const e = this._$_templateDataMap$_.get(i).get(s);
                return e ? JSON.parse(JSON.stringify(e)) : void 0;
            }
        }
        _$MapInstanceToTemplateName$_(t, s) {
            this._$_instanceToTemplateNameMap$_ || (this._$_instanceToTemplateNameMap$_ = new WeakMap()), 
            this._$_instanceToTemplateNameMap$_.has(t) || this._$_instanceToTemplateNameMap$_.set(t, s);
        }
        _$GetInstanceTemplateName$_(t) {
            if (!this._$_instanceToTemplateNameMap$_) return "";
            const s = this._$_instanceToTemplateNameMap$_.get(t);
            return s || "";
        }
        _$_OnInstanceDestroy$_(t) {
            this._$_instanceToTemplateNameMap$_ && this._$_instanceToTemplateNameMap$_.has(t) && this._$_instanceToTemplateNameMap$_.delete(t);
        }
    };
}

{
    const Yr = self._$C3$_;
    Yr._$FlowchartManager$_ = class {
        constructor(t) {
            this._$_runtime$_ = t, this._$_flowchartDataManager$_ = new Yr._$FlowchartDataManager$_();
        }
        _$Release$_() {
            this._$_flowchartDataManager$_._$Release$_(), this._$_flowchartDataManager$_ = null, 
            this._$_runtime$_ = null;
        }
        _$GetRuntime$_() {
            return this._$_runtime$_;
        }
        _$Create$_(t) {
            this._$_flowchartDataManager$_._$Add$_(t);
        }
        _$GetFlowchartDataItemByName$_(t) {
            return this._$_flowchartDataManager$_._$Get$_(t);
        }
        _$HasFlowcharts$_() {
            return this._$_flowchartDataManager$_._$HasFlowcharts$_();
        }
    };
}

{
    const T = self._$C3$_;
    T._$FlowchartState$_ = class {
        constructor(t, s, i, e, n, h, r) {
            this._$_runtime$_ = n._$GetRuntime$_(), this._$_flowchartManager$_ = n, 
            this._$_flowchartName$_ = t, this._$_startNodeTag$_ = i, this._$_flowchartDataItem$_ = e, 
            this._$_tag$_ = s, this._$_pluginInstance$_ = h, this._$_pluginUID$_ = r ?? h._$GetInstance$_()._$GetUID$_(), 
            this._$_SetStartFlowchartNode$_(), this._$_currentFlowchartNodeId$_ = this._$_startFlowchartNode$_?._$GetFlowchartId$_() ?? -1, 
            this._$_previousFlowchartNodeIds$_ = [], this._$_previousFlowchartState$_ = null, 
            this._$_previousFlowchartStateStartNodeId$_ = NaN, this._$_referenceFlowchartStates$_ = null, 
            this._$_currentReferenceFlowchartState$_ = null, this._$_rootFlowchartState$_ = null, 
            this._$_previousFlowchartStateTag$_ = "", this._$_referenceFlowchartStatesJson$_ = null, 
            this._$_currentReferenceFlowchartStateTag$_ = "", this._$_rootFlowchartStateTag$_ = "", 
            this._$_triggerCount$_ = 0, this._$_markForRelease$_ = !1, this._$_released$_ = !1;
        }
        _$Release$_() {
            this._$_released$_ || (T._$clearArray$_(this._$_previousFlowchartNodeIds$_), 
            this._$_previousFlowchartNodeIds$_ = null, this._$_runtime$_ = null, 
            this._$_flowchartManager$_ = null, this._$_flowchartDataItem$_ = null, 
            this._$_pluginInstance$_ = null, this._$_previousFlowchartState$_ = null, 
            this._$_previousFlowchartStateStartNodeId$_ = NaN, this._$_referenceFlowchartStates$_ && this._$_referenceFlowchartStates$_.clear(), 
            this._$_referenceFlowchartStates$_ = null, this._$_currentReferenceFlowchartState$_ = null, 
            this._$_rootFlowchartState$_ = null, this._$_previousFlowchartStateTag$_ = "", 
            this._$_referenceFlowchartStatesJson$_ = null, this._$_currentReferenceFlowchartStateTag$_ = "", 
            this._$_rootFlowchartStateTag$_ = "", this._$_released$_ = !0);
        }
        _$WasReleased$_() {
            return this._$_released$_;
        }
        _$GetFlowchartManager$_() {
            return this._$_flowchartManager$_;
        }
        _$GetRuntime$_() {
            return this._$_runtime$_;
        }
        _$GetName$_() {
            return this._$_flowchartName$_;
        }
        _$GetFlowchartDataItem$_() {
            return this._$_flowchartDataItem$_;
        }
        _$GetTag$_() {
            return this._$_tag$_;
        }
        _$GetPluginInstance$_() {
            return this._$_pluginInstance$_ || (this._$_pluginInstance$_ = this._$_runtime$_._$GetInstanceByUID$_(this._$_pluginUID$_)._$GetSdkInstance$_()), 
            this._$_pluginInstance$_;
        }
        _$GetCurrentNode$_() {
            return this._$GetFlowchartElementById$_(this._$_currentFlowchartNodeId$_);
        }
        _$GetCurrentNodeTag$_() {
            const t = this._$GetCurrentNode$_();
            return t ? t._$GetTag$_() : "";
        }
        _$GetCurrentNodeTags$_() {
            const t = this._$GetCurrentNode$_();
            return t ? t._$GetTags$_() : [];
        }
        _$CurrentNodeHasTags$_(t) {
            const s = this._$GetCurrentNodeTags$_();
            if (!s) return !1;
            if (!s.length) return !1;
            const i = T._$FlowchartState$_._$_GetTagArray$_(t);
            return !(!i || !i.length) && i.every(T._$FlowchartState$_._$_HasTag$_, s);
        }
        _$CurrentNodeCompareTags$_(t, s) {
            const i = this._$GetCurrentNodeTags$_();
            if (!i) return !1;
            if (!i.length) return !1;
            const e = T._$FlowchartState$_._$_GetTagArray$_(t);
            return !(!e || !e.length) && e.every(t => T._$FlowchartState$_._$_CompareTag$_.call(i, t, s));
        }
        static _$_HasTag$_(t) {
            return "" === t ? 1 === this.length && "" === this[0] : this.map(t => t.trim().toLowerCase()).includes(t.trim().toLowerCase());
        }
        static _$_GetTagArray$_(t) {
            return t.trim().split(" ");
        }
        static _$_CompareTag$_(s, i) {
            return "" === s ? 1 === this.length && "" === this[0] : this.some(t => T.compare(t.trim(), i, s.trim()));
        }
        _$GetCurrentNodeParent$_(t) {
            const s = this._$GetCurrentNode$_();
            if (s) {
                if (T._$IsFiniteNumber$_(t)) {
                    const i = s._$GetParentFlowchartIds$_(), e = i ? i[t] : void 0;
                    if (T._$IsFiniteNumber$_(e)) return this._$GetFlowchartElementById$_(e);
                }
                if ("string" == typeof t) for (const n of s._$GetParentFlowchartIds$_()) {
                    const h = this._$GetFlowchartElementById$_(n);
                    if (h._$HasTags$_(t)) return this._$GetFlowchartElementById$_(h._$GetFlowchartId$_());
                }
            }
        }
        _$GetCurrentNodeParentTag$_(t) {
            const s = this._$GetCurrentNodeParent$_(t);
            return s ? s._$GetTag$_() : "";
        }
        _$GetCurrentNodeParentTags$_(t) {
            const s = this._$GetCurrentNodeParent$_(t);
            return s ? s._$GetTags$_() : "";
        }
        _$GetCurrentNodeParentIndex$_(t) {
            const s = this._$GetCurrentNode$_();
            if (!s) return -1;
            const i = s._$GetParentFlowchartIds$_();
            if (!i) return -1;
            const e = this._$GetCurrentNodeParent$_(t);
            return e ? i.indexOf(e._$GetFlowchartId$_()) : -1;
        }
        _$GetCurrentNodeParentCount$_() {
            const t = this._$GetCurrentNode$_();
            if (!t) return 0;
            const s = t._$GetParentFlowchartIds$_();
            return s ? s.length : 0;
        }
        _$GetFlowchartElementById$_(t) {
            return this._$_flowchartDataItem$_._$GetFlowchartElementById$_(t);
        }
        _$Reset$_() {
            const t = this._$_GetRootFlowchartState$_();
            t._$_Reset$_(!0);
        }
        _$_Reset$_(t) {
            if (this._$_GetReferenceFlowchartStates$_()) {
                for (const [ s, i ] of this._$_GetReferenceFlowchartStates$_().entries()) i._$_Reset$_(!1);
                this._$_GetReferenceFlowchartStates$_().clear();
            }
            if (this._$_referenceFlowchartStates$_ = null, this._$_previousFlowchartState$_ = null, 
            this._$_previousFlowchartStateStartNode$_ = null, this._$_currentReferenceFlowchartState$_ = null, 
            this._$_previousFlowchartStateTag$_ = "", this._$_referenceFlowchartStatesJson$_ = null, 
            this._$_currentReferenceFlowchartStateTag$_ = "", this._$_rootFlowchartStateTag$_ = "", 
            this._$_previousFlowchartNodeIds$_ = [], t) {
                this._$_flowchartManager$_._$SetCurrentFlowchartState$_(this);
                const e = this._$_startFlowchartNode$_._$GetFlowchartId$_();
                e !== this._$_currentFlowchartNodeId$_ && this._$_GotoFlowchartNode$_(e);
            } else this._$_currentFlowchartNodeId$_ = this._$_startFlowchartNode$_._$GetFlowchartId$_();
        }
        _$GetCurrentNodeOutputCount$_() {
            const t = this._$_flowchartDataItem$_._$GetFlowchartElementById$_(this._$_currentFlowchartNodeId$_);
            return t ? t._$GetFlowchartNodeOutputData$_()._$GetFlowchartNodeOutputDataItemCount$_() : 0;
        }
        _$GetCurrentNodeOutputNameAt$_(t) {
            const s = this._$_GetFlowchartNodeOutputAt$_(t);
            return s ? s._$GetName$_() : "";
        }
        _$GetCurrentNodeOutputValueAt$_(t) {
            let s;
            return T._$IsFiniteNumber$_(t) && (s = this._$_GetFlowchartNodeOutputAt$_(t)), 
            "string" == typeof t && (s = this._$_GetFlowchartNodeOutputByName$_(t)), 
            "number" != typeof t && "string" != typeof t && console.warn("[Flowcharts] unexpected argument type in GetCurrentNodeOutputValueAt expression"), 
            s ? s._$GetValue$_() : "";
        }
        _$GotoNextFlowchartNode$_(t) {
            let s;
            if (T._$IsFiniteNumber$_(t) && (s = this._$_GetFlowchartNodeOutputAt$_(t)), 
            s = "string" == typeof t ? this._$_GetFlowchartNodeOutputByName$_(t) : s) {
                const i = s._$GetConnectedFlowchartNodeFlowchartId$_();
                T._$IsFiniteNumber$_(i) && (this._$_previousFlowchartNodeIds$_.push(this._$_currentFlowchartNodeId$_), 
                this._$_GotoFlowchartNode$_(i));
            }
        }
        _$GotoAnyFlowchartNode$_(t) {
            const s = this._$_flowchartDataItem$_._$GetFlowchartNodeByTags$_(t);
            if (s) {
                const i = this._$_flowchartDataItem$_._$GetFlowchartElementById$_(s._$GetFlowchartId$_());
                i && (this._$_previousFlowchartNodeIds$_.push(this._$_currentFlowchartNodeId$_), 
                this._$_GotoFlowchartNode$_(i._$GetFlowchartId$_()));
            }
        }
        _$GotoPreviousFlowchartNode$_() {
            const t = this._$_previousFlowchartNodeIds$_.pop();
            T._$IsFiniteNumber$_(t) ? this._$_GotoFlowchartNode$_(t) : this._$_GetPreviousFlowchartState$_() && (this._$_flowchartManager$_._$SetCurrentFlowchartState$_(this._$_GetPreviousFlowchartState$_(), !0, !1, !1), 
            this._$_GetPreviousFlowchartState$_()._$_GotoFlowchartNode$_(this._$_GetPreviousFlowchartStateStartNodeId$_()), 
            this._$_GetRootFlowchartState$_()._$_SetCurrentReferenceFlowchart$_(this._$_GetPreviousFlowchartState$_()));
        }
        _$GotoParentFlowchartNode$_(t) {
            const s = this._$GetCurrentNode$_();
            if (s) {
                s._$GetFlowchartId$_();
                const i = this._$GetCurrentNodeParent$_(t);
                i && (this._$_previousFlowchartNodeIds$_.push(this._$_currentFlowchartNodeId$_), 
                this._$_GotoFlowchartNode$_(i._$GetFlowchartId$_()));
            }
        }
        _$HasOutput$_(s) {
            if (T._$IsFiniteNumber$_(s)) {
                const t = this._$_flowchartDataItem$_._$GetFlowchartElementById$_(this._$_currentFlowchartNodeId$_), i = t._$GetFlowchartNodeOutputData$_()._$GetFlowchartNodeOutputDataItems$_();
                return !!i[s];
            }
            if ("string" == typeof s) {
                const e = this._$_flowchartDataItem$_._$GetFlowchartElementById$_(this._$_currentFlowchartNodeId$_), n = e._$GetFlowchartNodeOutputData$_()._$GetFlowchartNodeOutputDataItems$_();
                for (let t = 0; t < n.length; t++) if (n[t]._$GetName$_() === s) return !0;
            }
            return !1;
        }
        _$MarkForRelease$_() {
            this._$_markForRelease$_ = !0;
        }
        _$IsInTriggerState$_() {
            return 0 < this._$_triggerCount$_;
        }
        _$PushIsTriggerState$_() {
            this._$_triggerCount$_++;
        }
        _$PopIsTriggerState$_() {
            this._$_triggerCount$_--, 0 === this._$_triggerCount$_ && this._$_markForRelease$_ && this._$_flowchartManager$_._$RemoveFlowchartState$_(this);
        }
        _$_GotoFlowchartNode$_(t) {
            const i = this._$_currentFlowchartNodeId$_, s = this._$GetPluginInstance$_()._$GetInstance$_();
            if (this._$PushIsTriggerState$_(), this._$_flowchartManager$_._$PushFlowchartState$_(this), 
            this._$_runtime$_._$Trigger$_(T._$Plugins$_.Flowchart._$Cnds$_.OnBeforeAnyNodeChange, s), 
            this._$_runtime$_._$Trigger$_(T._$Plugins$_.Flowchart._$Cnds$_.OnBeforeTaggedNodeChange, s), 
            this._$_runtime$_._$Trigger$_(T._$Plugins$_.Flowchart._$Cnds$_.OnBeforeAnyNodeChangeInFlowchart, s), 
            this._$_runtime$_._$Trigger$_(T._$Plugins$_.Flowchart._$Cnds$_.OnBeforeTaggedNodeChangeInFlowchart, s), 
            this._$_currentFlowchartNodeId$_ = t, this._$_runtime$_._$Trigger$_(T._$Plugins$_.Flowchart._$Cnds$_.OnAnyNodeChange, s), 
            this._$_runtime$_._$Trigger$_(T._$Plugins$_.Flowchart._$Cnds$_.OnTaggedNodeChange, s), 
            this._$_runtime$_._$Trigger$_(T._$Plugins$_.Flowchart._$Cnds$_.OnAnyNodeChangeInFlowchart, s), 
            this._$_runtime$_._$Trigger$_(T._$Plugins$_.Flowchart._$Cnds$_.OnTaggedNodeChangeInFlowchart, s), 
            this._$_flowchartManager$_._$PopFlowchartState$_(), this._$PopIsTriggerState$_(), 
            !this._$WasReleased$_()) {
                const e = this._$GetFlowchartElementById$_(this._$_currentFlowchartNodeId$_);
                if ("reference" === e._$GetType$_()) {
                    const n = e._$GetReferenceFlowchartName$_();
                    if (this._$_HasReferenceFlowchartState$_(e)) {
                        this._$_previousFlowchartNodeIds$_.pop();
                        const h = this._$_GetReferenceFlowchartState$_(e), r = (this._$_flowchartManager$_._$SetCurrentFlowchartState$_(h, !0, !0, !1), 
                        h._$_SetPreviousFlowchart$_(this, i), this._$_GetRootFlowchartState$_());
                        r._$_SetCurrentReferenceFlowchart$_(h);
                    } else {
                        const o = e._$GetReferenceFlowchartStartNodeTag$_();
                        if (n) {
                            this._$_previousFlowchartNodeIds$_.pop();
                            let s = e._$GetReferenceFlowchartTag$_();
                            if (s) {
                                let t = this._$_flowchartManager$_._$GetFlowchartState$_(s);
                                for (;t; ) s = T._$IncrementNumberAtEndOf$_(s), 
                                t = this._$_flowchartManager$_._$GetFlowchartState$_(s);
                            } else {
                                s = n + "-ref";
                                let t = this._$_flowchartManager$_._$GetFlowchartState$_(s);
                                for (;t; ) s = T._$IncrementNumberAtEndOf$_(s), 
                                t = this._$_flowchartManager$_._$GetFlowchartState$_(s);
                            }
                            const a = this._$_flowchartManager$_._$AddFlowchartState$_(n, o, s, this._$_pluginInstance$_, !0), l = (a._$_SetPreviousFlowchart$_(this, i), 
                            this._$_SetReferenceFlowchartState$_(e, a), this._$_GetRootFlowchartState$_());
                            a._$_SetRootFlowchartState$_(l), l._$_SetCurrentReferenceFlowchart$_(a);
                        }
                    }
                }
            }
        }
        _$_GetFlowchartNodeOutputAt$_(t) {
            const s = this._$_flowchartDataItem$_._$GetFlowchartElementById$_(this._$_currentFlowchartNodeId$_);
            if (!s) return null;
            const i = s._$GetFlowchartNodeOutputData$_()._$GetFlowchartNodeOutputDataItems$_();
            if (!i) return null;
            const e = i[t];
            return e || null;
        }
        _$_GetFlowchartNodeOutputByName$_(t) {
            const s = this._$_flowchartDataItem$_._$GetFlowchartElementById$_(this._$_currentFlowchartNodeId$_);
            if (!s) return null;
            const i = s._$GetFlowchartNodeOutputData$_()._$GetFlowchartNodeOutputDataItemByName$_(t);
            return i || null;
        }
        _$_SetStartFlowchartNode$_(s) {
            if ("number" == typeof s) {
                let t = this._$GetFlowchartElementById$_(s);
                t = t || this._$_flowchartDataItem$_._$GetFlowchartStartNode$_(), 
                this._$_startFlowchartNode$_ = t;
            } else {
                let t = this._$_flowchartDataItem$_._$GetFlowchartNodeByTags$_(this._$_startNodeTag$_);
                t = t || this._$_flowchartDataItem$_._$GetFlowchartStartNode$_(), 
                this._$_startFlowchartNode$_ = t;
            }
        }
        _$_SaveToJson$_() {
            return this._$_markForRelease$_ ? null : {
                flowchartName: this._$_flowchartName$_,
                flowchartTag: this._$_tag$_,
                startNodeTag: this._$_startNodeTag$_,
                currentNodeId: this._$_currentFlowchartNodeId$_,
                previousNodeIds: this._$_previousFlowchartNodeIds$_,
                pluginUID: this._$_pluginInstance$_._$GetInstance$_()._$GetUID$_(),
                reference: {
                    previousFlowchartTag: this._$_GetPreviousFlowchartState$_() ? this._$_GetPreviousFlowchartState$_()._$GetTag$_() : "",
                    previousStartNodeId: T._$IsFiniteNumber$_(this._$_GetPreviousFlowchartStateStartNodeId$_()) ? this._$_GetPreviousFlowchartStateStartNodeId$_() : NaN,
                    referencesJson: this._$_GetFlowchartReferencesJson$_(),
                    currentReferenceFlowchartTag: this._$GetCurrentReferenceFlowchart$_() ? this._$GetCurrentReferenceFlowchart$_()._$GetTag$_() : "",
                    rootFlowchartTag: this._$_GetRootFlowchartState$_() ? this._$_GetRootFlowchartState$_()._$GetTag$_() : ""
                }
            };
        }
        _$_GetFlowchartReferencesJson$_() {
            if (!this._$_HasReferenceFlowchartStates$_()) return null;
            const t = [];
            for (const [ s, i ] of this._$_GetReferenceFlowchartStates$_().entries()) t.push({
                flowchartElementId: s._$GetFlowchartId$_(),
                flowchartStateTag: i._$GetTag$_()
            });
            return t.length ? t : null;
        }
        _$_LoadFromJson$_(t) {
            if (t) {
                if (this._$_flowchartName$_ = t.flowchartName, this._$_tag$_ = t.flowchartTag, 
                this._$_startNodeTag$_ = t.startNodeTag, this._$_currentFlowchartNodeId$_ = t.currentNodeId, 
                this._$_previousFlowchartNodeIds$_ = t.previousNodeIds, this._$_pluginUID$_ = t.pluginUID, 
                t.hasOwnProperty("reference")) {
                    const s = t.reference;
                    this._$_previousFlowchartStateTag$_ = s.previousFlowchartTag, 
                    this._$_previousFlowchartStateStartNodeId$_ = s.previousStartNodeId, 
                    this._$_referenceFlowchartStatesJson$_ = s.referencesJson, this._$_currentReferenceFlowchartStateTag$_ = s.currentReferenceFlowchartTag, 
                    this._$_rootFlowchartStateTag$_ = s.rootFlowchartTag;
                }
                this._$_SetStartFlowchartNode$_();
            }
        }
        _$_GetPreviousFlowchartState$_() {
            return "string" == typeof this._$_previousFlowchartStateTag$_ && this._$_previousFlowchartStateTag$_ && (this._$_previousFlowchartState$_ = this._$_flowchartManager$_._$GetFlowchartState$_(this._$_previousFlowchartStateTag$_), 
            this._$_previousFlowchartStateTag$_ = ""), this._$_previousFlowchartState$_;
        }
        _$_GetPreviousFlowchartStateStartNodeId$_() {
            return this._$_previousFlowchartStateStartNodeId$_;
        }
        _$_SetPreviousFlowchart$_(t, s) {
            this._$_previousFlowchartState$_ = t, this._$_previousFlowchartStateStartNodeId$_ = s;
        }
        _$GetCurrentReferenceFlowchart$_() {
            return "string" == typeof this._$_currentReferenceFlowchartStateTag$_ && this._$_currentReferenceFlowchartStateTag$_ && (this._$_currentReferenceFlowchartState$_ = this._$_flowchartManager$_._$GetFlowchartState$_(this._$_currentReferenceFlowchartStateTag$_), 
            this._$_currentReferenceFlowchartStateTag$_ = ""), this._$_currentReferenceFlowchartState$_;
        }
        _$_SetCurrentReferenceFlowchart$_(t) {
            this._$_currentReferenceFlowchartState$_ = t, this._$_currentReferenceFlowchartState$_ === this && (this._$_currentReferenceFlowchartState$_ = null);
        }
        _$_GetRootFlowchartState$_() {
            return "string" == typeof this._$_rootFlowchartStateTag$_ && this._$_rootFlowchartStateTag$_ && (this._$_rootFlowchartState$_ = this._$_flowchartManager$_._$GetFlowchartState$_(this._$_rootFlowchartStateTag$_), 
            this._$_rootFlowchartStateTag$_ = ""), this._$_rootFlowchartState$_ || this;
        }
        _$_SetRootFlowchartState$_(t) {
            this._$_rootFlowchartState$_ = t;
        }
        _$_HasReferenceFlowchartStates$_() {
            return this._$_RebuildReferenceFlowchartStates$_(), !!this._$_referenceFlowchartStates$_;
        }
        _$_HasReferenceFlowchartState$_(t) {
            return this._$_RebuildReferenceFlowchartStates$_(), this._$_referenceFlowchartStates$_ && this._$_referenceFlowchartStates$_.has(t);
        }
        _$_RebuildReferenceFlowchartStates$_() {
            if (this._$_referenceFlowchartStatesJson$_) {
                this._$_referenceFlowchartStates$_ && this._$_referenceFlowchartStates$_.clear(), 
                this._$_referenceFlowchartStates$_ || (this._$_referenceFlowchartStates$_ = new Map());
                for (const t of this._$_referenceFlowchartStatesJson$_) {
                    const s = this._$_flowchartManager$_._$GetFlowchartState$_(t.flowchartStateTag), i = s._$GetFlowchartElementById$_(t.flowchartElementId);
                    this._$_referenceFlowchartStates$_.set(i, s);
                }
                this._$_referenceFlowchartStatesJson$_ = null;
            }
        }
        _$_GetReferenceFlowchartStates$_() {
            return this._$_RebuildReferenceFlowchartStates$_(), this._$_referenceFlowchartStates$_;
        }
        _$_GetReferenceFlowchartState$_(t) {
            return this._$_RebuildReferenceFlowchartStates$_(), this._$_referenceFlowchartStates$_.get(t);
        }
        _$_SetReferenceFlowchartState$_(t, s) {
            this._$_referenceFlowchartStates$_ || (this._$_referenceFlowchartStates$_ = new Map()), 
            this._$_referenceFlowchartStates$_.set(t, s);
        }
    };
}

{
    const Hr = self._$C3$_;
    Hr._$FlowchartStateManager$_ = class {
        constructor(t) {
            this._$_runtime$_ = t, this._$_flowchartStates$_ = new Map(), this._$_currentFlowchartState$_ = null, 
            this._$_flowchartStateStack$_ = [], this._$_on_after_load$_ = () => this._$_OnAfterLoad$_(), 
            this._$_loadJson$_ = null;
        }
        _$Release$_() {
            Hr._$clearArray$_(this._$_flowchartStateStack$_), this._$_flowchartStateStack$_ = null, 
            this._$_flowchartStates$_.clear(), this._$_flowchartStates$_ = null, 
            this._$_currentFlowchartState$_ = null, this._$_runtime$_ = null, this._$_loadJson$_ = null;
        }
        _$GetRuntime$_() {
            return this._$_runtime$_;
        }
        _$AddFlowchartState$_(t, s, i, e, n, h) {
            const r = this._$_runtime$_._$GetFlowchartManager$_()._$GetFlowchartDataItemByName$_(t);
            if (r) {
                if (!this._$_flowchartStates$_.has(i)) {
                    const o = new Hr._$FlowchartState$_(t, i, s, r, this, e, h);
                    return this._$_flowchartStates$_.set(i, o), n && this._$SetCurrentFlowchartState$_(o, !0), 
                    o;
                }
                {
                    const a = this._$_flowchartStates$_.get(i);
                    a && this._$RemoveFlowchartState$_(a);
                }
            } else console.warn(`[Flowcharts] no flowchart found with name '${t}'`);
        }
        _$RemoveFlowchartState$_(t) {
            if (t._$MarkForRelease$_(), !t._$IsInTriggerState$_()) {
                const s = t._$GetTag$_();
                this._$_flowchartStates$_.delete(s), t._$Release$_(), this._$_currentFlowchartState$_ === t && (this._$_currentFlowchartState$_ = null);
            }
        }
        _$ResetFlowchartState$_(t) {
            t._$Reset$_();
        }
        _$GetFlowchartState$_(t) {
            return this._$_flowchartStates$_.get(t);
        }
        _$PushFlowchartState$_(t) {
            this._$_flowchartStateStack$_.push(t);
        }
        _$PopFlowchartState$_() {
            this._$_flowchartStateStack$_.pop();
        }
        _$SetCurrentFlowchartState$_(t, s = !1, i = !1, e = !0) {
            if (e) {
                const n = t._$GetCurrentReferenceFlowchart$_();
                t = n || t;
            }
            t !== this._$_currentFlowchartState$_ && (this._$_TriggerBeforeFlowchartChange$_(), 
            this._$_TriggerAfterFlowchartChange$_(t, s, i));
        }
        _$GetCurrentFlowchartState$_(t) {
            return "string" == typeof t ? this._$GetFlowchartState$_(t) : this._$_flowchartStateStack$_.length ? this._$_flowchartStateStack$_[this._$_flowchartStateStack$_.length - 1] : this._$_currentFlowchartState$_;
        }
        _$_TriggerBeforeFlowchartChange$_() {
            if (this._$_currentFlowchartState$_ && !this._$_currentFlowchartState$_._$WasReleased$_()) {
                const t = this._$_currentFlowchartState$_._$GetPluginInstance$_()._$GetInstance$_();
                this._$_currentFlowchartState$_._$PushIsTriggerState$_(), this._$PushFlowchartState$_(this._$_currentFlowchartState$_), 
                this._$_runtime$_._$Trigger$_(Hr._$Plugins$_.Flowchart._$Cnds$_.OnBeforeFlowchartChange, t), 
                this._$PopFlowchartState$_(), this._$_currentFlowchartState$_._$PopIsTriggerState$_();
            }
        }
        _$_TriggerAfterFlowchartChange$_(t, s = !1, i = !1) {
            if (this._$_currentFlowchartState$_ = t, this._$_currentFlowchartState$_ && !this._$_currentFlowchartState$_._$WasReleased$_()) {
                const e = this._$_currentFlowchartState$_._$GetPluginInstance$_()._$GetInstance$_();
                this._$_currentFlowchartState$_._$PushIsTriggerState$_(), this._$PushFlowchartState$_(this._$_currentFlowchartState$_), 
                this._$_runtime$_._$Trigger$_(Hr._$Plugins$_.Flowchart._$Cnds$_.OnFlowchartChange, e), 
                !0 !== i && "number" != typeof i || this._$_currentFlowchartState$_._$_SetStartFlowchartNode$_(i), 
                s && (this._$_runtime$_._$Trigger$_(Hr._$Plugins$_.Flowchart._$Cnds$_.OnAnyNodeChange, e), 
                this._$_runtime$_._$Trigger$_(Hr._$Plugins$_.Flowchart._$Cnds$_.OnTaggedNodeChange, e)), 
                this._$PopFlowchartState$_(), this._$_currentFlowchartState$_._$PopIsTriggerState$_();
            }
        }
        _$_SaveToJson$_() {
            return {
                flowchartJsonObjects: [ ...this._$_flowchartStates$_.values() ].map(t => t._$_SaveToJson$_()),
                currentFlowchartTag: this._$_currentFlowchartState$_ ? this._$_currentFlowchartState$_._$GetTag$_() : null
            };
        }
        _$_LoadFromJson$_(t) {
            if (t) {
                this._$_loadJson$_ = t;
                const s = new Map();
                for (const i of this._$_loadJson$_.flowchartJsonObjects) {
                    const e = i.flowchartTag;
                    if (this._$_flowchartStates$_.has(e)) {
                        const n = this._$_flowchartStates$_.get(e);
                        n._$_LoadFromJson$_(i), s.set(e, n);
                    } else {
                        const h = this._$AddFlowchartState$_(i.flowchartName, i.startNodeTag, i.flowchartTag, null, !1, i.pluginUID);
                        h._$_LoadFromJson$_(i), s.set(i.flowchartTag, h);
                    }
                }
                for (const [ r, o ] of this._$_flowchartStates$_.entries()) s.has(r) || o._$Release$_();
                this._$_flowchartStates$_.clear(), this._$_flowchartStates$_ = s, 
                this._$_runtime$_._$IsLoadingState$_() ? this._$_runtime$_._$Dispatcher$_().addEventListener("afterload", this._$_on_after_load$_) : this._$_OnAfterLoad$_();
            }
        }
        _$_OnAfterLoad$_() {
            this._$_runtime$_._$Dispatcher$_().removeEventListener("afterload", this._$_on_after_load$_);
            const t = this._$_flowchartStates$_.get(this._$_loadJson$_.currentFlowchartTag);
            t && this._$SetCurrentFlowchartState$_(t, !0), this._$_loadJson$_ = null;
        }
    };
}

{
    const qr = self._$C3$_;
    qr._$FlowchartDataManager$_ = class {
        constructor() {
            this._$_flowchartDataItems$_ = new Map();
        }
        _$Release$_() {
            for (const t of this._$_flowchartDataItems$_.values()) t._$Release$_();
            this._$_flowchartDataItems$_.clear(), this._$_flowchartDataItems$_ = null;
        }
        _$Add$_(t) {
            const s = new qr._$FlowchartDataItem$_(t), i = s._$GetName$_();
            this._$_flowchartDataItems$_.set(i, s);
        }
        _$Get$_(t) {
            return this._$_flowchartDataItems$_.get(t);
        }
        _$HasFlowcharts$_() {
            return !!this._$_flowchartDataItems$_.size;
        }
        static _$CreateDataItems$_(t, s, i, e) {
            if (s) for (const n of s) {
                const h = new i(n, e);
                t.push(h);
            }
        }
    };
}

{
    const Zr = self._$C3$_;
    Zr._$FlowchartDataItem$_ = class {
        constructor(t) {
            this._$_name$_ = t[0], this._$_flowchartNodeData$_ = new Zr._$FlowchartNodeData$_(t[1], this);
        }
        _$Release$_() {
            this._$_flowchartNodeData$_._$Release$_(), this._$_flowchartNodeData$_ = null;
        }
        _$GetFlowchartNodeData$_() {
            return this._$_flowchartNodeData$_;
        }
        _$GetFlowchartElementById$_(t) {
            return this._$_flowchartNodeData$_._$GetFlowchartElementById$_(t);
        }
        _$GetFlowchartNodeByTags$_(t) {
            return this._$_flowchartNodeData$_._$GetFlowchartNodeByTags$_(t);
        }
        _$GetFlowchartStartNode$_() {
            return this._$_flowchartNodeData$_._$GetFlowchartStartNode$_();
        }
        _$GetName$_() {
            return this._$_name$_;
        }
    };
}

{
    const Xr = self._$C3$_;
    class Kr {
        constructor(t, s) {
            this._$_flowchartNodeData$_ = s, this._$_type$_ = t[7], this._$_flowchartId$_ = t[0], 
            this._$_tag$_ = t[1], this._$_tag$_ ? this._$_tags$_ = this._$_tag$_.trim().split(" ").map(t => t.trim()) : this._$_tags$_ = [], 
            this._$_parentFlowchartIds$_ = t[2], this._$_parentOutputFlowchartIds$_ = null, 
            this._$_childrenFlowchartIds$_ = null, "dictionary" === this._$_type$_ && (this._$_parentOutputFlowchartIds$_ = t[3], 
            this._$_childrenFlowchartIds$_ = t[4]), this._$_isStart$_ = t[6], this._$_referenceFlowchartName$_ = null, 
            this._$_referenceFlowchartStartNodeTag$_ = null, this._$_referenceFlowchartTag$_ = null, 
            "reference" === this._$_type$_ && (this._$_referenceFlowchartName$_ = t[8], 
            this._$_referenceFlowchartStartNodeTag$_ = t[9], this._$_referenceFlowchartTag$_ = t[10]), 
            this._$_flowchartNodeOutputData$_ = new Xr._$FlowchartNodeOutputData$_(t[5], this);
        }
        _$Release$_() {
            this._$_flowchartNodeData$_ = null;
        }
        _$GetFlowchartNodeData$_() {
            return this._$_flowchartNodeData$_;
        }
        _$GetFlowchartNodeOutputData$_() {
            return this._$_flowchartNodeOutputData$_;
        }
        _$GetFlowchartId$_() {
            return this._$_flowchartId$_;
        }
        _$GetTag$_() {
            return this._$_tag$_;
        }
        _$GetTags$_() {
            return this._$_tags$_;
        }
        _$HasTags$_(t) {
            if (!this._$_tags$_) return !1;
            if (!this._$_tags$_.length) return !1;
            const s = Xr._$FlowchartState$_._$_GetTagArray$_(t);
            return !(!s || !s.length) && s.every(Xr._$FlowchartState$_._$_HasTag$_, this._$_tags$_);
        }
        _$GetIsStart$_() {
            return this._$_isStart$_;
        }
        _$SetIsStart$_(t) {
            this._$_isStart$_ = !!t;
        }
        _$CanBeStartNode$_() {
            if ("dictionary" === this._$_type$_) return !0;
            if ("reference" === this._$_type$_) return !1;
            throw new Error("unexpected flowchart node type: " + this._$_type$_);
        }
        _$GetParentFlowchartIds$_() {
            return this._$_parentFlowchartIds$_;
        }
        _$GetParentOutputFlowchartIds$_() {
            return this._$_parentOutputFlowchartIds$_;
        }
        _$GetChildrenFlowchartIds$_() {
            return this._$_childrenFlowchartIds$_;
        }
        _$GetType$_() {
            return this._$_type$_;
        }
        _$GetReferenceFlowchartName$_() {
            return this._$_referenceFlowchartName$_;
        }
        _$GetReferenceFlowchartStartNodeTag$_() {
            return this._$_referenceFlowchartStartNodeTag$_;
        }
        _$GetReferenceFlowchartTag$_() {
            return this._$_referenceFlowchartTag$_;
        }
    }
    Xr._$FlowchartNodeData$_ = class {
        constructor(t, s) {
            this._$_flowchartDataItem$_ = s, this._$_flowchartNodeItems$_ = [], 
            this._$_flowchartNodeItemsIdMap$_ = new Map(), this._$_flowchartNodeItemsTagMap$_ = new Map(), 
            this._$_flowchartNodeStartItem$_ = null, Xr._$FlowchartDataManager$_._$CreateDataItems$_(this._$_flowchartNodeItems$_, t, Kr, this);
            for (const i of this._$_flowchartNodeItems$_) {
                const e = i._$GetFlowchartId$_(), n = i._$GetTag$_(), h = i._$GetTags$_(), r = i._$GetIsStart$_();
                if (this._$_flowchartNodeItemsIdMap$_.set(e, i), n) for (const a of h) this._$_flowchartNodeItemsTagMap$_.has(a) || this._$_flowchartNodeItemsTagMap$_.set(a, new Set()), 
                this._$_flowchartNodeItemsTagMap$_.get(a).add(i);
                r && (this._$_flowchartNodeStartItem$_ = i);
                const o = i._$GetFlowchartNodeOutputData$_();
                for (const l of o._$flowchartNodeOutputDataItems$_()) {
                    const u = l._$GetFlowchartId$_();
                    this._$_flowchartNodeItemsIdMap$_.set(u, l);
                }
            }
            this._$_flowchartNodeStartItem$_ || this._$_SetStartNodeIfMissing$_();
        }
        _$Release$_() {
            this._$_flowchartDataItem$_ = null;
            for (const t of this._$_flowchartNodeItems$_) t._$Release$_();
            Xr._$clearArray$_(this._$_flowchartNodeItems$_), this._$_flowchartNodeItems$_ = null;
        }
        _$GetFlowchartDataItem$_() {
            return this._$_flowchartDataItem$_;
        }
        _$GetFlowchartElementById$_(t) {
            return this._$_flowchartNodeItemsIdMap$_.get(t);
        }
        _$GetFlowchartNodeByTags$_(t) {
            if (!t || !t.length) return null;
            const i = [];
            for (const e of t.trim().split(" ")) {
                let t = this._$_flowchartNodeItemsTagMap$_.get(e.trim()) ?? new Set();
                if (0 === t.size) return null;
                i.push(t);
            }
            const s = i.reduce((t, s) => s.size < t.size ? s : t);
            return [ ...s ].filter(s => i.every(t => t.has(s)))[0];
        }
        _$GetFlowchartStartNode$_() {
            return this._$_flowchartNodeStartItem$_;
        }
        *_$flowchartNodeDataItems$_() {
            for (const t of this._$_flowchartNodeItems$_) yield t;
        }
        _$_SetStartNodeIfMissing$_() {
            let t = 0;
            for (const s of this._$flowchartNodeDataItems$_()) s._$GetIsStart$_() && t++;
            if (0 === t) {
                for (const i of this._$flowchartNodeDataItems$_()) if (i._$CanBeStartNode$_() && !i._$GetIsStart$_()) return void i._$SetIsStart$_(!0);
            } else {
                if (1 === t) return;
                if (1 < t) {
                    let t = !0;
                    for (const e of this._$flowchartNodeDataItems$_()) e._$CanBeStartNode$_() && (e._$GetIsStart$_() && t ? t = !1 : e._$GetIsStart$_() && !t && e._$SetIsStart$_(!1));
                }
            }
            for (const n of this._$flowchartNodeDataItems$_()) if (n._$CanBeStartNode$_() && n._$GetIsStart$_()) return void (this._$_flowchartNodeStartItem$_ = n);
        }
    };
}

{
    const $r = self._$C3$_;
    class to {
        constructor(t, s) {
            this._$_flowchartNodeOutputData$_ = s, this._$_flowchartId$_ = t[0], 
            this._$_name$_ = t[1], this._$_value$_ = t[2], this._$_connectedFlowchartNodeFlowchartId$_ = t[3];
        }
        _$Release$_() {
            this._$_flowchartNodeOutputData$_ = null;
        }
        _$GetFlowchartNodeOutputData$_() {
            return this._$_flowchartNodeOutputData$_;
        }
        _$GetFlowchartId$_() {
            return this._$_flowchartId$_;
        }
        _$GetName$_() {
            return this._$_name$_;
        }
        _$GetValue$_() {
            return this._$_value$_;
        }
        _$GetConnectedFlowchartNodeFlowchartId$_() {
            return this._$_connectedFlowchartNodeFlowchartId$_;
        }
    }
    $r._$FlowchartNodeOutputData$_ = class {
        constructor(t, s) {
            this._$_flowchartDataNodeItem$_ = s, this._$_flowchartNodeOutputItems$_ = [], 
            this._$_flowchartNodeOutputItemsNameMap$_ = new Map(), $r._$FlowchartDataManager$_._$CreateDataItems$_(this._$_flowchartNodeOutputItems$_, t, to, this);
            for (const i of this._$_flowchartNodeOutputItems$_) this._$_flowchartNodeOutputItemsNameMap$_.set(i._$GetName$_(), i);
        }
        _$Release$_() {
            this._$_flowchartDataNodeItem$_ = null;
            for (const t of this._$_flowchartNodeOutputItems$_) t._$Release$_();
            $r._$clearArray$_(this._$_flowchartNodeOutputItems$_), this._$_flowchartNodeOutputItems$_ = null;
        }
        _$GetFlowchartNodeDataItem$_() {
            return this._$_flowchartDataNodeItem$_;
        }
        _$GetFlowchartNodeOutputDataItemCount$_() {
            return this._$_flowchartNodeOutputItems$_.length;
        }
        _$GetFlowchartNodeOutputDataItems$_() {
            return this._$_flowchartNodeOutputItems$_;
        }
        _$GetFlowchartNodeOutputDataItemByName$_(t) {
            return this._$_flowchartNodeOutputItemsNameMap$_.get(t);
        }
        *_$flowchartNodeOutputDataItems$_() {
            for (const t of this._$_flowchartNodeOutputItems$_) yield t;
        }
    };
}

{
    const so = self._$C3$_;
    so._$SolStack$_ = class extends so._$DefendedBase$_ {
        constructor(t) {
            super(), this._$_objectClass$_ = t, this._$_stack$_ = [], this._$_stack$_.push(so._$New$_(so._$Sol$_, this)), 
            this._$_index$_ = 0, this._$_current$_ = this._$_stack$_[0];
        }
        _$Release$_() {
            for (const t of this._$_stack$_) t._$Release$_();
            so._$clearArray$_(this._$_stack$_), this._$_current$_ = null, this._$_objectClass$_ = null;
        }
        _$GetObjectClass$_() {
            return this._$_objectClass$_;
        }
        _$GetCurrentSol$_() {
            return this._$_current$_;
        }
        _$GetOneBelowCurrentSol$_() {
            return this._$_stack$_[this._$_index$_ - 1];
        }
        _$Clear$_() {
            this._$GetCurrentSol$_()._$Clear$_();
        }
        _$PushClean$_() {
            const t = this._$_stack$_, s = ++this._$_index$_;
            if (s === t.length) {
                const i = so._$New$_(so._$Sol$_, this);
                t.push(i), this._$_current$_ = i;
            } else {
                const e = t[s];
                e._$Reset$_(), this._$_current$_ = e;
            }
        }
        _$PushCopy$_() {
            const t = this._$_stack$_, s = ++this._$_index$_, i = (s === t.length && t.push(so._$New$_(so._$Sol$_, this)), 
            t[s]);
            i._$Copy$_(t[s - 1]), this._$_current$_ = i;
        }
        _$Pop$_() {
            this._$_current$_ = this._$_stack$_[--this._$_index$_];
        }
        _$RemoveInstances$_(i) {
            const e = this._$_stack$_;
            for (let t = 0, s = e.length; t < s; ++t) e[t]._$RemoveInstances$_(i);
        }
    };
}

{
    const io = self._$C3$_;
    io._$Sol$_ = class extends io._$DefendedBase$_ {
        constructor(t) {
            super(), this._$_stack$_ = t, this._$_objectClass$_ = this._$_stack$_._$GetObjectClass$_(), 
            this._$_eventStack$_ = this._$_objectClass$_._$GetRuntime$_()._$GetEventStack$_(), 
            this._$_selectAll$_ = !0, this._$_instances$_ = [], this._$_elseInstances$_ = [];
        }
        _$Release$_() {
            this._$ClearArrays$_(), this._$_stack$_ = null, this._$_objectClass$_ = null, 
            this._$_eventStack$_ = null;
        }
        _$ClearArrays$_() {
            io._$clearArray$_(this._$_instances$_), io._$clearArray$_(this._$_elseInstances$_);
        }
        _$GetObjectClass$_() {
            return this._$_objectClass$_;
        }
        _$IsSelectAll$_() {
            return this._$_selectAll$_;
        }
        _$HasAnyInstances$_() {
            return this._$_selectAll$_ ? !!this._$_objectClass$_._$GetInstanceCount$_() : !!this._$_instances$_.length;
        }
        _$GetInstances$_() {
            return this._$_selectAll$_ ? this._$_objectClass$_._$GetInstances$_() : this._$_instances$_;
        }
        _$HasAnyElseInstances$_() {
            return !!this._$_elseInstances$_.length;
        }
        _$GetElseInstances$_() {
            return this._$_elseInstances$_;
        }
        _$GetExpressionInstances$_() {
            const t = this._$GetInstances$_();
            return t.length ? t : this._$_elseInstances$_;
        }
        _$Reset$_() {
            this._$_selectAll$_ = !0, io._$clearArray$_(this._$_elseInstances$_);
        }
        _$Clear$_() {
            this._$_selectAll$_ = !0;
        }
        _$Copy$_(t) {
            t._$IsSelectAll$_() ? this._$Reset$_() : (this._$_selectAll$_ = !1, 
            io._$shallowAssignArray$_(this._$_instances$_, t._$_instances$_), io._$clearArray$_(this._$_elseInstances$_));
        }
        _$_PushInstance$_(t) {
            this._$_instances$_.push(t);
        }
        _$_PushElseInstance$_(t) {
            this._$_elseInstances$_.push(t);
        }
        _$_SetSelectAll$_(t) {
            this._$_selectAll$_ = !!t;
        }
        _$_GetOwnInstances$_() {
            return this._$_instances$_;
        }
        _$_GetOwnElseInstances$_() {
            return this._$_elseInstances$_;
        }
        _$SetSinglePicked$_(t) {
            this._$_selectAll$_ = !1, io._$clearArray$_(this._$_instances$_), this._$_instances$_.push(t);
        }
        _$SetArrayPicked$_(t) {
            this._$_selectAll$_ = !1, io._$shallowAssignArray$_(this._$_instances$_, t);
        }
        _$SetSetPicked$_(t) {
            this._$_selectAll$_ = !1, io._$clearArray$_(this._$_instances$_);
            for (const s of t) this._$_instances$_.push(s);
        }
        _$AddElseInstances$_(t, s) {
            for (const i of s) t.has(i) || this._$_elseInstances$_.push(i);
        }
        _$TransferElseInstancesToOwn$_(t) {
            for (const s of t) this._$_instances$_.push(s);
            io._$arrayRemoveAllInSet$_(this._$_elseInstances$_, t);
        }
        _$ClearElseInstances$_() {
            io._$clearArray$_(this._$_elseInstances$_);
        }
        _$PickOne$_(t) {
            if (t) if (this._$_eventStack$_._$GetCurrentStackFrame$_()._$GetCurrentEvent$_()._$IsOrBlock$_()) {
                this._$IsSelectAll$_() && (io._$clearArray$_(this._$_instances$_), 
                io._$shallowAssignArray$_(this._$_elseInstances$_, t._$GetObjectClass$_()._$GetInstances$_()), 
                this._$_selectAll$_ = !1);
                const s = this._$_elseInstances$_.indexOf(t);
                -1 !== s && (this._$_instances$_.push(this._$_elseInstances$_[s]), 
                this._$_elseInstances$_.splice(s, 1));
            } else this._$SetSinglePicked$_(t);
        }
        _$RemoveInstances$_(t) {
            io._$arrayRemoveAllInSet$_(this._$_instances$_, t), io._$arrayRemoveAllInSet$_(this._$_elseInstances$_, t);
        }
    };
}

{
    const eo = self._$C3$_;
    eo._$EventStack$_ = class extends eo._$DefendedBase$_ {
        constructor(t) {
            super(), this._$_eventSheetManager$_ = t, this._$_runtime$_ = this._$_eventSheetManager$_._$GetRuntime$_(), 
            this._$_stack$_ = [], this._$_stack$_.push(eo._$New$_(eo._$EventStackFrame$_, this, null)), 
            this._$_index$_ = 0, this._$_expFuncStack$_ = [];
        }
        _$Release$_() {
            for (const t of this._$_stack$_) t._$Release$_();
            eo._$clearArray$_(this._$_stack$_), eo._$clearArray$_(this._$_expFuncStack$_), 
            this._$_eventSheetManager$_ = null, this._$_runtime$_ = null;
        }
        _$GetEventSheetManager$_() {
            return this._$_eventSheetManager$_;
        }
        _$GetRuntime$_() {
            return this._$_runtime$_;
        }
        _$GetCurrentStackFrame$_() {
            return this._$_stack$_[this._$_index$_];
        }
        _$GetAllStackFrames$_() {
            return this._$_stack$_;
        }
        _$GetCurrentStackFrameIndex$_() {
            return this._$_index$_;
        }
        _$Push$_(t) {
            const s = this._$_stack$_, i = ++this._$_index$_;
            if (i === s.length) {
                const e = eo._$New$_(eo._$EventStackFrame$_, this, t);
                return s.push(e), e;
            }
            {
                const n = s[i];
                return n._$Reset$_(t), n;
            }
        }
        _$Pop$_() {
            --this._$_index$_;
        }
        _$PushExpFunc$_(t) {
            this._$_expFuncStack$_.push(t);
        }
        _$PopExpFunc$_() {
            this._$_expFuncStack$_.pop();
        }
        _$GetCurrentExpFuncStackFrame$_() {
            const t = this._$_expFuncStack$_;
            return 0 === t.length ? null : t.at(-1);
        }
    };
}

{
    const no = self._$C3$_;
    no._$EventStackFrame$_ = class extends no._$DefendedBase$_ {
        constructor(t, s) {
            super(), this._$_stack$_ = t, this._$_runtime$_ = this._$_stack$_._$GetRuntime$_(), 
            this._$_currentEvent$_ = s, this._$_cndIndex$_ = 0, this._$_actIndex$_ = 0, 
            this._$_lastEventTrue$_ = !1, this._$_elseBranchRan$_ = !1, this._$_expressionObjectClass$_ = null, 
            this._$_functionReturnType$_ = 0, this._$_functionReturnValue$_ = 0, 
            this._$_dynamicSolModifiers$_ = null;
        }
        _$Release$_() {
            this._$Reset$_(null), this._$_stack$_ = null, this._$_runtime$_ = null;
        }
        _$Reset$_(t) {
            this._$_currentEvent$_ = t, this._$_cndIndex$_ = 0, this._$_actIndex$_ = 0, 
            this._$_lastEventTrue$_ = !1, this._$_elseBranchRan$_ = !1, this._$_dynamicSolModifiers$_ = null;
        }
        _$_Restore$_(t, s) {
            this._$_currentEvent$_ = t, this._$_cndIndex$_ = 0, this._$_actIndex$_ = s;
        }
        _$ResetQuick$_() {
            this._$_cndIndex$_ = 0, this._$_actIndex$_ = 0;
        }
        _$GetCurrentEvent$_() {
            return this._$_currentEvent$_;
        }
        _$SetCurrentEvent$_(t) {
            this._$_currentEvent$_ = t;
        }
        _$GetConditionIndex$_() {
            return this._$_cndIndex$_;
        }
        _$SetConditionIndex$_(t) {
            this._$_cndIndex$_ = t;
        }
        _$GetActionIndex$_() {
            return this._$_actIndex$_;
        }
        _$SetActionIndex$_(t) {
            this._$_actIndex$_ = t;
        }
        _$SetLastEventTrue$_(t) {
            this._$_lastEventTrue$_ = !!t;
        }
        _$GetLastEventTrue$_() {
            return this._$_lastEventTrue$_;
        }
        _$SetElseBranchRan$_(t) {
            this._$_elseBranchRan$_ = !!t;
        }
        _$GetElseBranchRan$_() {
            return this._$_elseBranchRan$_;
        }
        _$SetExpressionObjectClass$_(t) {
            this._$_expressionObjectClass$_ = t;
        }
        _$GetExpressionObjectClass$_() {
            return this._$_expressionObjectClass$_;
        }
        _$InitCallFunctionExpression$_(t, s) {
            this._$_functionReturnType$_ = t, this._$_functionReturnValue$_ = s;
        }
        _$GetFunctionReturnType$_() {
            return this._$_functionReturnType$_;
        }
        _$SetFunctionReturnValue$_(t) {
            this._$_functionReturnValue$_ = t;
        }
        _$GetFunctionReturnValue$_() {
            return this._$_functionReturnValue$_;
        }
        _$IsSolModifierAfterCnds$_() {
            const t = this._$_currentEvent$_;
            return !!t._$IsSolWriterAfterCnds$_() || this._$_cndIndex$_ < t._$GetConditionCount$_() - 1 && !!t._$GetSolModifiers$_().length;
        }
        _$SetDynamicSolModifiers$_(t) {
            this._$_dynamicSolModifiers$_ = t;
        }
        _$GetDynamicSolModifiers$_() {
            return this._$_dynamicSolModifiers$_;
        }
    };
}

{
    const ho = self._$C3$_;
    ho._$LocalVarStack$_ = class extends ho._$DefendedBase$_ {
        constructor(t) {
            super(), this._$_eventSheetManager$_ = t, this._$_runtime$_ = this._$_eventSheetManager$_._$GetRuntime$_(), 
            this._$_stack$_ = [], this._$_index$_ = -1, this._$_current$_ = null, 
            this._$_initialValues$_ = [];
        }
        _$Release$_() {
            ho._$clearArray$_(this._$_stack$_), this._$_eventSheetManager$_ = null, 
            this._$_runtime$_ = null;
        }
        _$_SetInitialValues$_(t) {
            this._$_initialValues$_ = t;
            const s = this._$_initialValues$_.slice(0);
            this._$_stack$_.push(s), this._$_index$_ = 0, this._$_current$_ = s;
        }
        _$GetEventSheetManager$_() {
            return this._$_eventSheetManager$_;
        }
        _$GetRuntime$_() {
            return this._$_runtime$_;
        }
        _$GetCurrent$_() {
            return this._$_current$_;
        }
        _$Push$_() {
            const t = ++this._$_index$_, s = this._$_stack$_;
            t === s.length ? s.push(this._$_initialValues$_.slice(0)) : ho._$shallowAssignArray$_(s[t], this._$_initialValues$_), 
            this._$_current$_ = s[t];
        }
        _$Pop$_() {
            this._$_current$_ = this._$_stack$_[--this._$_index$_];
        }
    };
}

{
    const ro = self._$C3$_;
    ro._$LoopStack$_ = class extends ro._$DefendedBase$_ {
        constructor(t) {
            super(), this._$_eventSheetManager$_ = t, this._$_runtime$_ = this._$_eventSheetManager$_._$GetRuntime$_(), 
            this._$_stack$_ = [], this._$_index$_ = -1;
        }
        _$Release$_() {
            ro._$clearArray$_(this._$_stack$_), this._$_eventSheetManager$_ = null, 
            this._$_runtime$_ = null;
        }
        _$GetEventSheetManager$_() {
            return this._$_eventSheetManager$_;
        }
        _$GetRuntime$_() {
            return this._$_runtime$_;
        }
        _$IsInLoop$_() {
            return 0 <= this._$_index$_;
        }
        _$GetCurrent$_() {
            return this._$_stack$_[this._$_index$_];
        }
        _$Push$_() {
            if (++this._$_index$_, this._$_index$_ === this._$_stack$_.length) {
                const t = ro._$New$_(ro._$Loop$_, this);
                return this._$_stack$_.push(t), t;
            }
            {
                const s = this._$_stack$_[this._$_index$_];
                return s._$Reset$_(), s;
            }
        }
        _$Pop$_() {
            --this._$_index$_;
        }
        _$FindByName$_(s) {
            const i = this._$_stack$_;
            for (let t = this._$_index$_; 0 <= t; --t) {
                const e = i[t];
                if (e._$GetName$_() === s) return e;
            }
            return null;
        }
        _$_GetStack$_() {
            return this._$_stack$_.slice(0, this._$_index$_ + 1);
        }
    };
}

{
    const oo = self._$C3$_;
    oo._$Loop$_ = class extends oo._$DefendedBase$_ {
        constructor(t) {
            super(), this._$_loopStack$_ = t, this._$_name$_ = "", this._$_index$_ = 0, 
            this._$_isStopped$_ = !1, this._$_end$_ = NaN;
        }
        _$Reset$_() {
            this._$_name$_ = "", this._$_index$_ = 0, this._$_isStopped$_ = !1, 
            this._$_end$_ = NaN;
        }
        _$SetName$_(t) {
            this._$_name$_ = t;
        }
        _$GetName$_() {
            return this._$_name$_;
        }
        _$SetIndex$_(t) {
            this._$_index$_ = t;
        }
        _$GetIndex$_() {
            return this._$_index$_;
        }
        _$Stop$_() {
            this._$_isStopped$_ = !0;
        }
        _$IsStopped$_() {
            return this._$_isStopped$_;
        }
        _$SetEnd$_(t) {
            this._$_end$_ = t;
        }
        _$GetEnd$_() {
            return this._$_end$_;
        }
    };
}

{
    const ao = self._$C3$_;
    ao._$ArrayStack$_ = class extends ao._$DefendedBase$_ {
        constructor() {
            super(), this._$_stack$_ = [], this._$_index$_ = -1;
        }
        _$Release$_() {
            ao._$clearArray$_(this._$_stack$_);
        }
        _$GetCurrent$_() {
            return this._$_stack$_[this._$_index$_];
        }
        _$Push$_() {
            if (++this._$_index$_, this._$_index$_ !== this._$_stack$_.length) return this._$_stack$_[this._$_index$_];
            {
                const t = [];
                return this._$_stack$_.push(t), t;
            }
        }
        _$Pop$_() {
            --this._$_index$_;
        }
    };
}

{
    let t = function(t, s) {
        return t._$GetIndex$_() - s._$GetIndex$_();
    }, h = function(i, e) {
        for (let t = 0, s = i.length; t < s; ++t) if (i[t] !== e[t]) return !1;
        return !0;
    };
    t, h;
    const lo = self._$C3$_;
    lo._$EventSheetManager$_ = class extends lo._$DefendedBase$_ {
        constructor(t) {
            super(), this._$_runtime$_ = t, this._$_allSheets$_ = [], this._$_sheetsByName$_ = new Map(), 
            this._$_allGroups$_ = [], this._$_groupsByName$_ = new Map(), this._$_blocksBySid$_ = new Map(), 
            this._$_cndsBySid$_ = new Map(), this._$_actsBySid$_ = new Map(), this._$_allUniqueSolModifiers$_ = new Map(), 
            this._$_eventVarsBySid$_ = new Map(), this._$_nextLocalVarIndex$_ = 0, 
            this._$_allGlobalVars$_ = [], this._$_allLocalVars$_ = [], this._$_localVarInitialValues$_ = [], 
            this._$_functionBlocksByName$_ = new Map(), this._$_customActionBlocksMap$_ = new Map(), 
            this._$_eventStack$_ = lo._$New$_(lo._$EventStack$_, this), this._$_localVarStack$_ = lo._$New$_(lo._$LocalVarStack$_, this), 
            this._$_loopStack$_ = lo._$New$_(lo._$LoopStack$_, this), this._$_triggersToPostInit$_ = [], 
            this._$_queuedTriggers$_ = [], this._$_queuedDebugTriggers$_ = [], this._$_runningEventsDepth$_ = 0, 
            this._$_executingTriggerDepth$_ = 0, this._$_blockFlushingDepth$_ = 0, 
            this._$_scheduledWaits$_ = [], this._$_asyncActionPromises$_ = [], this._$_signalTags$_ = [], 
            this._$_signalPromises$_ = new Map(), this._$_instSignals$_ = new Map(), 
            self.c3_callFunction = (t, s) => this._$_InvokeFunctionFromJS$_(t, s);
        }
        _$Release$_() {
            this._$ClearAllScheduledWaits$_(), this._$_eventStack$_._$Release$_(), 
            this._$_eventStack$_ = null, this._$_localVarStack$_._$Release$_(), 
            this._$_localVarStack$_ = null, lo._$clearArray$_(this._$_queuedTriggers$_), 
            lo._$clearArray$_(this._$_queuedDebugTriggers$_), this._$_runtime$_ = null, 
            lo._$clearArray$_(this._$_allSheets$_), this._$_sheetsByName$_.clear();
        }
        _$Create$_(t) {
            const s = lo._$New$_(lo._$EventSheet$_, this, t);
            this._$_allSheets$_.push(s), this._$_sheetsByName$_.set(s._$GetName$_().toLowerCase(), s);
        }
        _$_AddTriggerToPostInit$_(t) {
            this._$_triggersToPostInit$_.push(t);
        }
        _$_PostInit$_() {
            for (const t of this._$_customActionBlocksMap$_.values()) t._$_CheckOverrideState$_();
            for (const s of this._$_functionBlocksByName$_.values()) s._$_PostInit$_();
            for (const i of this._$_customActionBlocksMap$_.values()) i._$_PostInit$_();
            for (const e of this._$_allSheets$_) e._$_PostInit$_();
            for (const n of this._$_allSheets$_) n._$_UpdateDeepIncludes$_();
            for (const h of this._$_triggersToPostInit$_) h._$_PostInit$_(!1);
            lo._$clearArray$_(this._$_triggersToPostInit$_), this._$_localVarStack$_._$_SetInitialValues$_(this._$_localVarInitialValues$_);
        }
        _$GetRuntime$_() {
            return this._$_runtime$_;
        }
        _$GetEventSheetByName$_(t) {
            return this._$_sheetsByName$_.get(t.toLowerCase()) || null;
        }
        _$_RegisterGroup$_(t) {
            this._$_allGroups$_.push(t), this._$_groupsByName$_.set(t._$GetGroupName$_(), t);
        }
        _$_RegisterEventBlock$_(t) {
            this._$_blocksBySid$_.set(t._$GetSID$_(), t);
        }
        _$_RegisterCondition$_(t) {
            this._$_cndsBySid$_.set(t._$GetSID$_(), t);
        }
        _$_RegisterAction$_(t) {
            this._$_actsBySid$_.set(t._$GetSID$_(), t);
        }
        _$_RegisterFunctionBlock$_(t) {
            switch (t._$GetFunctionType$_()) {
              case 0:
                this._$_functionBlocksByName$_.set(t._$GetFunctionName$_().toLowerCase(), t);
                break;

              case 1:
                this._$_customActionBlocksMap$_.set(t._$GetFunctionName$_().toLowerCase(), t);
            }
        }
        _$_RegisterEventVariable$_(t) {
            this._$_eventVarsBySid$_.set(t._$GetSID$_(), t), (t._$IsGlobal$_() ? this._$_allGlobalVars$_ : this._$_allLocalVars$_).push(t);
        }
        _$_DeduplicateSolModifierList$_(i) {
            2 <= i.length && i.sort(t);
            let e = this._$_allUniqueSolModifiers$_.get(i.length);
            e || (e = [], this._$_allUniqueSolModifiers$_.set(i.length, e));
            for (let t = 0, s = e.length; t < s; ++t) {
                const n = e[t];
                if (h(i, n)) return n;
            }
            return e.push(i), i;
        }
        _$_GetNextLocalVarIndex$_(t) {
            return this._$_localVarInitialValues$_.push(t._$GetInitialValue$_()), 
            this._$_nextLocalVarIndex$_++;
        }
        _$GetEventStack$_() {
            return this._$_eventStack$_;
        }
        _$GetCurrentEventStackFrame$_() {
            return this._$GetEventStack$_()._$GetCurrentStackFrame$_();
        }
        _$GetCurrentEvent$_() {
            return this._$GetCurrentEventStackFrame$_()._$GetCurrentEvent$_();
        }
        _$GetCurrentCondition$_() {
            const t = this._$GetCurrentEventStackFrame$_(), s = t._$GetCurrentEvent$_();
            return s._$GetConditionAt$_(t._$GetConditionIndex$_());
        }
        _$GetCurrentAction$_() {
            const t = this._$GetCurrentEventStackFrame$_(), s = t._$GetCurrentEvent$_();
            return s._$GetActionAt$_(t._$GetActionIndex$_());
        }
        _$GetLocalVarStack$_() {
            return this._$_localVarStack$_;
        }
        _$GetLoopStack$_() {
            return this._$_loopStack$_;
        }
        _$GetAllLocalVariablesInScope$_(t) {
            const s = [];
            for (t = t._$GetScopeParent$_(); t; ) lo._$appendArray$_(s, t._$_GetAllLocalVariablesInScope$_()), 
            t = t._$GetScopeParent$_();
            return s;
        }
        _$_GetLocalVariablesScriptInterface$_(t) {
            const s = {};
            for (const i of this._$GetAllLocalVariablesInScope$_(t)) s[i._$GetJsPropName$_()] = i._$_GetScriptInterfaceDescriptor$_();
            return Object.create(Object.prototype, s);
        }
        _$GetEventVariableBySID$_(t) {
            return this._$_eventVarsBySid$_.get(t) || null;
        }
        _$GetEventBlockBySID$_(t) {
            return this._$_blocksBySid$_.get(t) || null;
        }
        _$GetConditionBySID$_(t) {
            return this._$_cndsBySid$_.get(t) || null;
        }
        _$GetActionBySID$_(t) {
            return this._$_actsBySid$_.get(t) || null;
        }
        _$GetFunctionBlockByName$_(t) {
            return this._$_functionBlocksByName$_.get(t.toLowerCase()) || null;
        }
        _$GetCustomActionBlockByName$_(t, s) {
            let i = this._$_customActionBlocksMap$_.get((t._$GetName$_() + "." + s).toLowerCase());
            if (i) return i;
            if (!t._$IsFamily$_()) for (const e of t._$GetFamilies$_()) if (i = this._$_customActionBlocksMap$_.get((e._$GetName$_() + "." + s).toLowerCase())) return i;
            return null;
        }
        _$GetAllGlobalVariables$_() {
            return this._$_allGlobalVars$_;
        }
        _$GetAllLocalVariables$_() {
            return this._$_allLocalVars$_;
        }
        _$ResetAllGlobalsToInitialValue$_(t) {
            for (const s of this._$_allGlobalVars$_) s._$ResetToInitialValue$_();
            if (t) for (const i of this._$_allLocalVars$_) i._$IsStatic$_() && i._$ResetToInitialValue$_();
        }
        _$GetEventGroupByName$_(t) {
            return this._$_groupsByName$_.get(t.toLowerCase()) || null;
        }
        _$GetEventGroupBySID$_(t) {
            const s = this._$_blocksBySid$_.get(t);
            return s && s._$IsGroup$_() ? s : null;
        }
        _$GetAllGroups$_() {
            return this._$_allGroups$_;
        }
        _$ResetAllGroupsInitialActivation$_() {
            for (const t of this._$_allGroups$_) t._$ResetInitialActivation$_();
        }
        _$_ResetAllHasRunFlags$_() {
            for (const t of this._$_allSheets$_) t._$_ResetHasRunFlag$_();
        }
        _$RunEvents$_(t) {
            this._$_ResetAllHasRunFlags$_(), this._$_runningEventsDepth$_++;
            for (const s of t._$runningLayouts$_()) {
                const i = s._$GetEventSheet$_();
                i && (this._$_runtime$_._$PushCurrentLayout$_(s), i._$Run$_(), this._$_runtime$_._$PopCurrentLayout$_());
            }
            this._$_runningEventsDepth$_--;
        }
        async _$DebugRunEvents$_(t) {
            this._$_ResetAllHasRunFlags$_(), this._$_runningEventsDepth$_++;
            for (const s of this._$_DebugRunEventsGen$_(t)) await this._$_runtime$_._$DebugBreak$_(s);
            this._$_runningEventsDepth$_--;
        }
        *_$_DebugRunEventsGen$_(t) {
            for (const s of t._$runningLayouts$_()) {
                const i = s._$GetEventSheet$_();
                i && (this._$_runtime$_._$PushCurrentLayout$_(s), yield* i._$DebugRun$_(), 
                this._$_runtime$_._$PopCurrentLayout$_());
            }
        }
        _$_Trigger$_(t, s, i, e) {
            let n = !1;
            if (!t._$GetMainRunningLayout$_()) return this._$QueueTrigger$_(s, i, e);
            this._$_executingTriggerDepth$_++;
            for (const h of t._$runningLayouts$_()) {
                const r = h._$GetEventSheet$_();
                if (r) {
                    this._$_runtime$_._$PushCurrentLayout$_(h);
                    for (const a of r._$deepIncludes$_()) {
                        const l = a._$_Trigger$_(s, i, e);
                        n = n || l;
                    }
                    const o = r._$_Trigger$_(s, i, e);
                    n = n || o, this._$_runtime$_._$PopCurrentLayout$_();
                }
            }
            return this._$_executingTriggerDepth$_--, n;
        }
        *_$_DebugTrigger$_(t, s, i, e) {
            let n = !1;
            if (!t._$GetMainRunningLayout$_()) return this._$QueueTrigger$_(s, i, e);
            this._$_executingTriggerDepth$_++;
            for (const h of t._$runningLayouts$_()) {
                const r = h._$GetEventSheet$_();
                if (r) {
                    this._$_runtime$_._$PushCurrentLayout$_(h);
                    for (const a of r._$deepIncludes$_()) {
                        const l = yield* a._$_DebugTrigger$_(s, i, e);
                        n = n || l;
                    }
                    const o = yield* r._$_DebugTrigger$_(s, i, e);
                    n = n || o, this._$_runtime$_._$PopCurrentLayout$_();
                }
            }
            return this._$_executingTriggerDepth$_--, n;
        }
        _$QueueTrigger$_(t, s, i) {
            return this._$_queuedTriggers$_.push([ t, s, i ]), !1;
        }
        _$QueueDebugTrigger$_(t, s, i) {
            let e = null, n = new Promise(t => e = t);
            return this._$_queuedDebugTriggers$_.push([ t, s, i, e ]), n;
        }
        *_$_RunQueuedDebugTriggersGen$_() {
            if (this._$_runtime$_._$HitBreakpoint$_()) throw new Error("should not be in breakpoint");
            const t = this._$_runtime$_._$GetLayoutManager$_();
            for (;this._$_queuedDebugTriggers$_.length; ) {
                const [ s, i, e, n ] = this._$_queuedDebugTriggers$_.shift(), h = yield* this._$_DebugTrigger$_(t, s, i, e);
                n(h);
            }
        }
        async _$RunQueuedDebugTriggersAsync$_() {
            for (const t of this._$_RunQueuedDebugTriggersGen$_()) await this._$_runtime$_._$DebugBreak$_(t);
        }
        _$_FastTrigger$_(t, i, e, n) {
            let h = !1, s = t._$GetMainRunningLayout$_(), r = s._$GetEventSheet$_();
            if (r) {
                this._$_executingTriggerDepth$_++, this._$_runtime$_._$PushCurrentLayout$_(s);
                const o = r._$deepIncludes$_();
                for (let t = 0, s = o.length; t < s; ++t) {
                    const l = o[t]._$_FastTrigger$_(i, e, n);
                    h = h || l;
                }
                const a = r._$_FastTrigger$_(i, e, n);
                return h = h || a, this._$_runtime$_._$PopCurrentLayout$_(), this._$_executingTriggerDepth$_--, 
                h;
            }
        }
        *_$_DebugFastTrigger$_(t, i, e, n) {
            let h = !1, s = t._$GetMainRunningLayout$_(), r = s._$GetEventSheet$_();
            if (r) {
                this._$_executingTriggerDepth$_++, this._$_runtime$_._$PushCurrentLayout$_(s);
                const o = r._$deepIncludes$_();
                for (let t = 0, s = o.length; t < s; ++t) {
                    const l = yield* o[t]._$_DebugFastTrigger$_(i, e, n);
                    h = h || l;
                }
                const a = yield* r._$_DebugFastTrigger$_(i, e, n);
                return h = h || a, this._$_runtime$_._$PopCurrentLayout$_(), this._$_executingTriggerDepth$_--, 
                h;
            }
        }
        _$GetTriggerDepth$_() {
            return this._$_executingTriggerDepth$_;
        }
        _$IsInTrigger$_() {
            return 0 < this._$GetTriggerDepth$_();
        }
        _$_IncTriggerDepth$_() {
            return ++this._$_executingTriggerDepth$_;
        }
        _$_DecTriggerDepth$_() {
            --this._$_executingTriggerDepth$_;
        }
        _$IsRunningEvents$_() {
            return 0 < this._$_runningEventsDepth$_;
        }
        _$IsInEventEngine$_() {
            return this._$IsRunningEvents$_() || this._$IsInTrigger$_();
        }
        _$_RunQueuedTriggers$_(t) {
            for (const [ s, i, e ] of this._$_queuedTriggers$_) this._$_Trigger$_(t, s, i, e);
            lo._$clearArray$_(this._$_queuedTriggers$_);
        }
        _$BlockFlushingInstances$_(t) {
            t ? this._$_blockFlushingDepth$_++ : this._$_blockFlushingDepth$_--;
        }
        _$IsFlushingBlocked$_() {
            return 0 < this._$_blockFlushingDepth$_;
        }
        _$ClearSol$_(i) {
            for (let t = 0, s = i.length; t < s; ++t) i[t]._$GetSolStack$_()._$Clear$_();
        }
        _$PushCleanSol$_(i) {
            for (let t = 0, s = i.length; t < s; ++t) i[t]._$GetSolStack$_()._$PushClean$_();
        }
        _$PushCopySol$_(i) {
            for (let t = 0, s = i.length; t < s; ++t) i[t]._$GetSolStack$_()._$PushCopy$_();
        }
        _$PopSol$_(i) {
            for (let t = 0, s = i.length; t < s; ++t) i[t]._$GetSolStack$_()._$Pop$_();
        }
        _$GetDynamicSolModifiersSet$_(s) {
            const i = new Set(), e = this._$_eventStack$_._$GetAllStackFrames$_(), n = this._$_eventStack$_._$GetCurrentStackFrameIndex$_();
            for (let t = 0; t <= n; ++t) {
                const h = e[t]._$GetDynamicSolModifiers$_();
                if (h) for (const r of h) s && s.has(r) || i.add(r);
            }
            return i;
        }
        _$PushCleanSolDynamic$_(t) {
            const s = new Set([ ...t ]), i = this._$GetDynamicSolModifiersSet$_(s);
            if (0 < i.size) {
                for (const e of i) e._$GetSolStack$_()._$PushClean$_();
                return [ ...i ];
            }
            return null;
        }
        _$AddScheduledWait$_() {
            const t = lo._$New$_(lo._$ScheduledWait$_, this);
            return this._$_scheduledWaits$_.push(t), t;
        }
        _$scheduledWaits$_() {
            return this._$_scheduledWaits$_;
        }
        _$RunScheduledWaits$_() {
            if (this._$_scheduledWaits$_.length) {
                let i = this._$GetCurrentEventStackFrame$_(), e = !1;
                this._$_runningEventsDepth$_++;
                for (let t = 0, s = this._$_scheduledWaits$_.length; t < s; ++t) {
                    const n = this._$_scheduledWaits$_[t];
                    n._$_ShouldRun$_() && n._$_Run$_(i), n._$ShouldRelease$_() && (e = !0);
                }
                e && (this._$_FilterScheduledWaitsToRelease$_(), i._$Reset$_(null)), 
                this._$_runningEventsDepth$_--;
            }
        }
        async _$DebugRunScheduledWaits$_() {
            if (this._$_scheduledWaits$_.length) {
                let i = this._$GetCurrentEventStackFrame$_(), e = !1;
                this._$_runningEventsDepth$_++;
                for (let t = 0, s = this._$_scheduledWaits$_.length; t < s; ++t) {
                    const n = this._$_scheduledWaits$_[t];
                    n._$_ShouldRun$_() && await n._$_DebugRun$_(i), n._$ShouldRelease$_() && (e = !0);
                }
                e && (this._$_FilterScheduledWaitsToRelease$_(), i._$Reset$_(null)), 
                this._$_runningEventsDepth$_--;
            }
        }
        _$_FilterScheduledWaitsToRelease$_() {
            const t = lo._$arrayFilterOut$_(this._$_scheduledWaits$_, t => t._$ShouldRelease$_());
            for (const s of t) s._$Release$_();
        }
        _$ClearAllScheduledWaits$_() {
            for (const t of this._$_scheduledWaits$_) t._$Release$_();
            lo._$clearArray$_(this._$_scheduledWaits$_);
        }
        _$_OnInstancesReleased$_(t) {
            for (const s of this._$_scheduledWaits$_) s._$RemoveInstances$_(t);
            for (const i of t) {
                const e = this._$_instSignals$_.get(i);
                if (this._$_instSignals$_.delete(i), e) for (const {
                    resolve: n
                } of e._$signalPromises$_.values()) n(!0);
            }
        }
        _$AddAsyncActionPromise$_(t) {
            this._$_asyncActionPromises$_.push({
                promise: t,
                _$triggerDepth$_: this._$GetTriggerDepth$_()
            });
        }
        _$ClearAsyncActionPromises$_() {
            lo._$clearArray$_(this._$_asyncActionPromises$_);
        }
        _$ClearNestedAsyncActionPromises$_() {
            const s = this._$GetTriggerDepth$_();
            this._$_asyncActionPromises$_ = this._$_asyncActionPromises$_.filter(t => t._$triggerDepth$_ <= s);
        }
        _$GetPromiseForAllAsyncActions$_() {
            const t = Promise.all(this._$_asyncActionPromises$_.map(t => t.promise));
            return this._$_asyncActionPromises$_ = [], t;
        }
        _$Signal$_(t) {
            const s = t.toLowerCase();
            this._$_signalTags$_.push(s), this._$_runtime$_._$Trigger$_(lo._$Plugins$_._$System$_._$Cnds$_._$OnSignal$_, null), 
            this._$_signalTags$_.pop();
            for (const e of this._$_runtime$_._$GetEventSheetManager$_()._$scheduledWaits$_()) e._$IsSignal$_() && e._$GetSignalTag$_() === s && e._$SetSignalled$_();
            const i = this._$_signalPromises$_.get(s);
            i && (i.resolve(), this._$_signalPromises$_.delete(s));
        }
        _$WaitForSignal$_(t) {
            const i = t.toLowerCase(), s = this._$_signalPromises$_.get(i);
            if (s) return s.promise;
            {
                let s = null, t = new Promise(t => s = t);
                return this._$_signalPromises$_.set(i, {
                    promise: t,
                    resolve: s
                }), t;
            }
        }
        _$GetCurrentSignalTag$_() {
            if (0 === this._$_signalTags$_.length) throw new Error("not in a signal");
            return this._$_signalTags$_.at(-1);
        }
        _$_GetInstanceSignalState$_(t) {
            let s = this._$_instSignals$_.get(t);
            return s || (s = {
                _$signalTags$_: [],
                _$signalPromises$_: new Map()
            }, this._$_instSignals$_.set(t, s)), s;
        }
        _$InstanceSignal$_(t, s) {
            const i = this._$_GetInstanceSignalState$_(t), e = s.toLowerCase();
            i._$signalTags$_.push(e), this._$_runtime$_._$Trigger$_(t._$GetPlugin$_()._$GetConstructor$_()._$Cnds$_._$OnInstanceSignal$_, t), 
            i._$signalTags$_.pop();
            for (const h of this._$_runtime$_._$GetEventSheetManager$_()._$scheduledWaits$_()) h._$IsInstanceSignals$_() && h._$GetSignalTag$_() === e && h._$SetInstanceSignalled$_(t);
            const n = i._$signalPromises$_.get(e);
            n && (n.resolve(!1), i._$signalPromises$_.delete(e)), 0 === i._$signalTags$_.length && 0 === i._$signalPromises$_.size && this._$_instSignals$_.delete(t);
        }
        _$WaitForInstanceSignal$_(t, s) {
            const i = this._$_GetInstanceSignalState$_(t), e = s.toLowerCase(), n = i._$signalPromises$_.get(e);
            if (n) return n.promise;
            {
                let s = null, t = new Promise(t => s = t);
                return i._$signalPromises$_.set(e, {
                    promise: t,
                    resolve: s
                }), t;
            }
        }
        _$GetCurrentInstanceSignalTag$_(t) {
            const s = this._$_GetInstanceSignalState$_(t);
            if (s && 0 !== s._$signalTags$_.length) return s._$signalTags$_.at(-1);
            throw new Error("not in a signal");
        }
        _$_SaveToJson$_() {
            return {
                groups: this._$_SaveGroupsToJson$_(),
                cnds: this._$_SaveCndsToJson$_(),
                acts: this._$_SaveActsToJson$_(),
                vars: this._$_SaveVarsToJson$_(),
                waits: this._$_SaveScheduledWaitsToJson$_()
            };
        }
        _$_LoadFromJson$_(t) {
            this._$_LoadGroupsFromJson$_(t.groups), this._$_LoadCndsFromJson$_(t.cnds), 
            this._$_LoadActsFromJson$_(t.acts), this._$_LoadVarsFromJson$_(t.vars), 
            this._$_LoadScheduledWaitsFromJson$_(t.waits);
        }
        _$_SaveGroupsToJson$_() {
            const t = {};
            for (const s of this._$GetAllGroups$_()) t[s._$GetSID$_().toString()] = s._$IsGroupActive$_();
            return t;
        }
        _$_LoadGroupsFromJson$_(t) {
            for (const [ s, i ] of Object.entries(t)) {
                const e = parseInt(s, 10), n = this._$GetEventGroupBySID$_(e);
                n && n._$SetGroupActive$_(i);
            }
        }
        _$_SaveCndsToJson$_() {
            const t = {};
            for (const [ s, i ] of this._$_cndsBySid$_) {
                const e = i._$_SaveToJson$_();
                e && (t[s.toString()] = e);
            }
            return t;
        }
        _$_LoadCndsFromJson$_(t) {
            const s = new Map();
            for (const [ i, e ] of Object.entries(t)) s.set(parseInt(i, 10), e);
            for (const [ n, h ] of this._$_cndsBySid$_) h._$_LoadFromJson$_(s.get(n) || null);
        }
        _$_SaveActsToJson$_() {
            const t = {};
            for (const [ s, i ] of this._$_actsBySid$_) {
                const e = i._$_SaveToJson$_();
                e && (t[s.toString()] = e);
            }
            return t;
        }
        _$_LoadActsFromJson$_(t) {
            const s = new Map();
            for (const [ i, e ] of Object.entries(t)) s.set(parseInt(i, 10), e);
            for (const [ n, h ] of this._$_actsBySid$_) h._$_LoadFromJson$_(s.get(n) || null);
        }
        _$_SaveVarsToJson$_() {
            const t = {};
            for (const [ s, i ] of this._$_eventVarsBySid$_) i._$IsConstant$_() || !i._$IsGlobal$_() && !i._$IsStatic$_() || (t[s.toString()] = i._$GetValue$_());
            return t;
        }
        _$_LoadVarsFromJson$_(t) {
            for (const [ s, i ] of Object.entries(t)) {
                const e = parseInt(s, 10), n = this._$GetEventVariableBySID$_(e);
                n && n._$SetValue$_(i);
            }
        }
        _$_SaveScheduledWaitsToJson$_() {
            return this._$_scheduledWaits$_.filter(t => !t._$IsPromise$_()).map(t => t._$_SaveToJson$_());
        }
        _$_LoadScheduledWaitsFromJson$_(t) {
            this._$ClearAllScheduledWaits$_();
            for (const s of t) {
                const i = lo._$ScheduledWait$_._$_CreateFromJson$_(this, s);
                i && this._$_scheduledWaits$_.push(i);
            }
        }
        _$_GetPerfRecords$_() {
            return [ ...this._$_runtime$_._$GetLayoutManager$_()._$runningLayouts$_() ].map(t => t._$GetEventSheet$_()).filter(t => t).map(t => t._$_GetPerfRecord$_());
        }
        _$FindFirstFunctionBlockParent$_(t) {
            for (;t; ) {
                const s = t._$GetScopeParent$_();
                if (s instanceof lo._$FunctionBlock$_) return s;
                t = s;
            }
            return null;
        }
        _$_InvokeFunctionFromJS$_(t, s) {
            Array.isArray(s) || (s = []);
            const i = this._$GetFunctionBlockByName$_(t.toLowerCase());
            if (!i) return null;
            if (!i._$IsEnabled$_()) return i._$GetDefaultReturnValue$_();
            const e = i._$GetFunctionParameters$_();
            if (s.length < e.length) for (s = s.slice(0); s.push(e[s.length]._$GetInitialValue$_()), 
            s.length < e.length; );
            const n = i._$GetEventBlock$_();
            return n._$RunAsExpressionFunctionCall$_(n._$GetSolModifiersIncludingParents$_(), !1, i._$GetReturnType$_(), i._$GetDefaultReturnValue$_(), ...s);
        }
    };
}

{
    const uo = self._$C3$_;
    uo._$EventSheet$_ = class extends uo._$DefendedBase$_ {
        constructor(t, s) {
            super(), this._$_eventSheetManager$_ = t, this._$_runtime$_ = t._$GetRuntime$_(), 
            this._$_name$_ = s[0], this._$_events$_ = [], this._$_triggers$_ = new Map(), 
            this._$_fastTriggers$_ = new Map(), this._$_eventsByDisplayNumber$_ = new Map(), 
            this._$_hasRun$_ = !1, this._$_shallowIncludes$_ = [], this._$_deepIncludes$_ = [], 
            this._$_alreadyIncludedSheets$_ = new Set();
            for (const i of s[1]) this._$_CreateEvent$_(i, null, this._$_events$_);
            this._$_perfRecord$_ = this._$_runtime$_._$IsDebug$_() ? {
                type: "sheet",
                name: this._$_name$_,
                _$totalTimeCounter$_: 0,
                children: []
            } : null;
        }
        _$Release$_() {
            this._$_eventSheetManager$_ = null, this._$_runtime$_ = null;
        }
        _$_CreateEvent$_(t, s, i) {
            switch (t[0]) {
              case 0:
              case 3:
                this._$_CreateEventBlock$_(t, s, i);
                break;

              case 1:
                this._$_CreateEventVariable$_(t, s, i);
                break;

              case 2:
                this._$_CreateInclude$_(t, s, i);
                break;

              case 4:
                this._$_CreateFunctionBlock$_(t, s);
                break;

              case 5:
                this._$_CreateScriptBlock$_(t, s, i);
                break;

              case 6:
                this._$_CreateCustomACEBlock$_(t, s);
                break;

              default:
                throw new Error("invalid event type");
            }
        }
        _$_CreateEventBlock$_(t, s, i) {
            const e = uo._$EventBlock$_._$Create$_(this, s, t);
            if (e._$IsOrBlock$_()) {
                i.push(e);
                const n = e._$GetConditions$_();
                for (let t = 0, s = n.length; t < s; ++t) n[t]._$IsTrigger$_() && this._$_InitTrigger$_(e, t);
            } else e._$IsTrigger$_() ? this._$_InitTrigger$_(e, 0) : i.push(e);
        }
        _$_CreateFunctionBlock$_(t, s) {
            const i = uo._$FunctionBlock$_._$CreateFunctionBlock$_(this, s, t);
            this._$_eventSheetManager$_._$_RegisterFunctionBlock$_(i);
        }
        _$_CreateCustomACEBlock$_(t, s) {
            const i = uo._$FunctionBlock$_._$CreateCustomACEBlock$_(this, s, t);
            this._$_eventSheetManager$_._$_RegisterFunctionBlock$_(i);
        }
        _$_CreateEventVariable$_(t, s, i) {
            const e = uo._$EventVariable$_._$Create$_(this, s, t);
            i.push(e);
        }
        _$_CreateInclude$_(t, s, i) {
            const e = uo._$EventInclude$_._$Create$_(this, s, t);
            i.push(e);
        }
        _$_CreateScriptBlock$_(t, s, i) {
            const e = uo._$EventScript$_._$Create$_(this, s, t);
            i.push(e);
        }
        _$_InitTrigger$_(n, h) {
            n._$IsOrBlock$_() || this._$_eventSheetManager$_._$_AddTriggerToPostInit$_(n);
            const r = n._$GetConditionAt$_(h), o = r._$_GetFunc$_(), a = r._$GetObjectClass$_();
            if (r._$IsFastTrigger$_()) {
                let t = this._$_fastTriggers$_.get(a), s = (t || (t = new Map(), 
                this._$_fastTriggers$_.set(a, t)), r._$GetFastTriggerValue$_().toLowerCase()), i = t.get(o), e = (i || (i = new Map(), 
                t.set(o, i)), i.get(s));
                e || (e = [], i.set(s, e)), e.push([ n, h ]);
            } else {
                let t = this._$_triggers$_.get(a), s = (t || (t = {
                    _$methodMap$_: new Map(),
                    _$behaviors$_: new Map()
                }, this._$_triggers$_.set(a, t)), r._$GetBehaviorType$_()), i, e = (s ? (i = t._$behaviors$_.get(s)) || (i = new Map(), 
                t._$behaviors$_.set(s, i)) : i = t._$methodMap$_, i.get(o));
                e || (e = [], i.set(o, e)), e.push([ n, h ]);
            }
        }
        _$_PostInit$_() {
            const i = this._$_events$_;
            for (let t = 0, s = i.length; t < s; ++t) {
                const e = t < s - 1 && i[t + 1] instanceof uo._$EventBlock$_ && i[t + 1]._$IsElseBlock$_();
                i[t]._$_PostInit$_(e);
            }
        }
        _$_AddShallowInclude$_(t) {
            this._$_shallowIncludes$_.push(t);
        }
        _$_UpdateDeepIncludes$_() {
            uo._$clearArray$_(this._$_deepIncludes$_), this._$_AddDeepIncludes$_(this), 
            this._$_alreadyIncludedSheets$_.clear();
        }
        _$_AddDeepIncludes$_(t) {
            const s = t._$_deepIncludes$_, i = t._$_alreadyIncludedSheets$_;
            for (const e of this._$_shallowIncludes$_) {
                const n = e._$GetIncludeSheet$_();
                e._$IsActive$_() && t !== n && !i.has(n) && (i.add(n), n._$_AddDeepIncludes$_(t), 
                s.push(n));
            }
        }
        _$deepIncludes$_() {
            return this._$_deepIncludes$_;
        }
        _$GetEventSheetManager$_() {
            return this._$_eventSheetManager$_;
        }
        _$GetRuntime$_() {
            return this._$_runtime$_;
        }
        _$GetName$_() {
            return this._$_name$_;
        }
        _$_RegisterEventByDisplayNumber$_(t, s) {
            this._$_eventsByDisplayNumber$_.set(s, t);
        }
        _$_GetEventByDisplayNumber$_(t) {
            return this._$_eventsByDisplayNumber$_.get(t) || null;
        }
        _$_ResetHasRunFlag$_() {
            this._$_hasRun$_ = !1;
        }
        _$Run$_() {
            if (!this._$_hasRun$_) {
                const t = this._$_runtime$_, s = t._$IsCPUProfiling$_(), i = s ? performance.now() : 0, e = (this._$_hasRun$_ = !0, 
                this._$GetEventSheetManager$_()), n = e._$GetCurrentEventStackFrame$_();
                for (const h of this._$_events$_) h._$Run$_(n), e._$ClearSol$_(h._$GetSolModifiers$_()), 
                e._$ClearAsyncActionPromises$_(), t._$FlushPendingInstances$_();
                n._$Reset$_(null), s && (this._$_perfRecord$_._$totalTimeCounter$_ += performance.now() - i);
            }
        }
        *_$DebugRun$_() {
            if (!this._$_hasRun$_) {
                this._$_hasRun$_ = !0;
                const t = this._$_runtime$_, s = this._$GetEventSheetManager$_(), i = s._$GetCurrentEventStackFrame$_();
                for (const e of this._$_events$_) yield* e._$DebugRun$_(i), s._$ClearSol$_(e._$GetSolModifiers$_()), 
                s._$ClearAsyncActionPromises$_(), t._$FlushPendingInstances$_();
                i._$Reset$_(null);
            }
        }
        _$_Trigger$_(e, n, h) {
            if (!n) return this._$_TriggerForClass$_(e, n, null, null);
            {
                let t = n._$GetObjectClass$_(), s = !1, i = this._$_TriggerForClass$_(e, n, t, h);
                s = s || i;
                for (const r of t._$GetFamilies$_()) i = this._$_TriggerForClass$_(e, n, r, h), 
                s = s || i;
            }
        }
        _$_TriggerForClass$_(t, s, i, e) {
            const n = this._$_triggers$_.get(i);
            if (!n) return !1;
            const h = e ? n._$behaviors$_.get(e) : n._$methodMap$_;
            if (!h) return !1;
            const r = h.get(t);
            if (!r) return !1;
            let o = !1;
            for (const [ a, l ] of r) {
                const u = this._$_ExecuteTrigger$_(s, a, l);
                o = o || u;
            }
            return o;
        }
        *_$_DebugTrigger$_(e, n, h) {
            if (!n) return yield* this._$_DebugTriggerForClass$_(e, n, null, null);
            {
                let t = n._$GetObjectClass$_(), s = !1, i = yield* this._$_DebugTriggerForClass$_(e, n, t, h);
                s = s || i;
                for (const r of t._$GetFamilies$_()) i = yield* this._$_DebugTriggerForClass$_(e, n, r, h), 
                s = s || i;
            }
        }
        *_$_DebugTriggerForClass$_(t, s, i, e) {
            const n = this._$_triggers$_.get(i);
            if (!n) return !1;
            const h = e ? n._$behaviors$_.get(e) : n._$methodMap$_;
            if (!h) return !1;
            const r = h.get(t);
            if (!r) return !1;
            let o = !1;
            for (const [ a, l ] of r) {
                let t;
                t = a._$DebugCanRunFast$_() ? this._$_ExecuteTrigger$_(s, a, l) : yield* this._$_DebugExecuteTrigger$_(s, a, l), 
                o = o || t;
            }
            return o;
        }
        _$_FastTrigger$_(t, s, i) {
            const e = s._$GetObjectClass$_(), n = this._$_fastTriggers$_.get(e);
            if (!n) return !1;
            const h = n.get(t);
            if (!h) return !1;
            const r = h.get(i);
            if (!r) return !1;
            let o = !1;
            for (let t = 0, s = r.length; t < s; ++t) {
                const a = r[t], l = this._$_ExecuteTrigger$_(null, a[0], a[1]);
                o = o || l;
            }
            return o;
        }
        *_$_DebugFastTrigger$_(t, s, i) {
            const e = s._$GetObjectClass$_(), n = this._$_fastTriggers$_.get(e);
            if (!n) return !1;
            const h = n.get(t);
            if (!h) return !1;
            const r = h.get(i);
            if (!r) return !1;
            let o = !1;
            for (let n = 0, t = r.length; n < t; ++n) {
                let t = r[n], s = t[0], i = t[1], e;
                e = s._$DebugCanRunFast$_() ? this._$_ExecuteTrigger$_(null, s, i) : yield* this._$_DebugExecuteTrigger$_(null, s, i), 
                o = o || e;
            }
            return o;
        }
        _$_ExecuteTrigger$_(t, s, i) {
            let e = this._$_runtime$_, n = this._$_eventSheetManager$_, h = n._$GetCurrentEvent$_(), r = n._$GetEventStack$_(), o = n._$GetTriggerDepth$_(), a = !1;
            h && n._$PushCleanSol$_(h._$GetSolModifiersIncludingParents$_()), n._$PushCleanSol$_(s._$GetSolModifiersIncludingParents$_());
            const l = 1 < o, u = (l && n._$GetLocalVarStack$_()._$Push$_(), r._$Push$_(s));
            if (t) {
                const f = s._$GetConditions$_()[i]._$GetObjectClass$_(), d = f._$GetCurrentSol$_();
                d._$SetSinglePicked$_(t), t._$IsInContainer$_() && t._$SetSiblingsSinglePicked$_();
            }
            let c = !0;
            if (s._$GetParent$_()) {
                const p = s._$GetTriggerParents$_();
                for (let t = 0, s = p.length; t < s; ++t) if (!p[t]._$RunPreTrigger$_(u)) {
                    c = !1;
                    break;
                }
            }
            return c && (s._$IsOrBlock$_() ? s._$RunOrBlockTrigger$_(u, i) : s._$Run$_(u), 
            a = u._$GetLastEventTrue$_()), r._$Pop$_(), l && n._$GetLocalVarStack$_()._$Pop$_(), 
            n._$PopSol$_(s._$GetSolModifiersIncludingParents$_()), h && n._$PopSol$_(h._$GetSolModifiersIncludingParents$_()), 
            h || 1 !== o || (n._$ClearAsyncActionPromises$_(), n._$IsFlushingBlocked$_()) || e._$FlushPendingInstances$_(), 
            a;
        }
        *_$_DebugExecuteTrigger$_(t, s, i) {
            let e = this._$_runtime$_, n = this._$_eventSheetManager$_, h = n._$GetCurrentEvent$_(), r = n._$GetEventStack$_(), o = n._$GetTriggerDepth$_(), a = !1;
            h && n._$PushCleanSol$_(h._$GetSolModifiersIncludingParents$_()), n._$PushCleanSol$_(s._$GetSolModifiersIncludingParents$_());
            const l = 1 < o, u = (l && n._$GetLocalVarStack$_()._$Push$_(), r._$Push$_(s));
            if (t) {
                const f = s._$GetConditions$_()[i]._$GetObjectClass$_(), d = f._$GetCurrentSol$_();
                d._$SetSinglePicked$_(t), t._$IsInContainer$_() && t._$SetSiblingsSinglePicked$_();
            }
            let c = !0;
            if (s._$GetParent$_()) {
                const p = s._$GetTriggerParents$_();
                for (let t = 0, s = p.length; t < s; ++t) if (!(yield* p[t]._$DebugRunPreTrigger$_(u))) {
                    c = !1;
                    break;
                }
            }
            return c && (s._$IsOrBlock$_() ? yield* s._$DebugRunOrBlockTrigger$_(u, i) : yield* s._$DebugRun$_(u), 
            a = u._$GetLastEventTrue$_()), r._$Pop$_(), l && n._$GetLocalVarStack$_()._$Pop$_(), 
            n._$PopSol$_(s._$GetSolModifiersIncludingParents$_()), h && n._$PopSol$_(h._$GetSolModifiersIncludingParents$_()), 
            h || 1 !== o || (n._$ClearAsyncActionPromises$_(), n._$IsFlushingBlocked$_()) || e._$FlushPendingInstances$_(), 
            a;
        }
        _$_GetPerfRecord$_() {
            return this._$_perfRecord$_;
        }
    };
}

{
    let u = function(t, s) {
        return !0;
    };
    u;
    const co = self._$C3$_, fo = [];
    function* j(t, s) {
        return !0;
    }
    co._$EventBlock$_ = class extends co._$DefendedBase$_ {
        constructor(t, s, i) {
            super(), this._$_eventSheet$_ = t, this._$_runtime$_ = t._$GetRuntime$_(), 
            this._$_parent$_ = s, this._$_scopeParent$_ = null, this._$_eventStack$_ = this._$_runtime$_._$GetEventSheetManager$_()._$GetEventStack$_(), 
            this._$_solModifiers$_ = [], this._$_solModifiersIncludingParents$_ = [], 
            this._$_hasGotSolModifiersIncludingParents$_ = !1, this._$_isSolWriterAfterCnds$_ = !1, 
            this._$_isTopLevelGroup$_ = !1, this._$_hasElseBlock$_ = !1, this._$_isOrBlock$_ = !!i[2], 
            this._$_isElseBlock$_ = !1, this._$_triggerParents$_ = null, this._$_conditions$_ = [], 
            this._$_actions$_ = [], this._$_subEvents$_ = [], this._$_RunActions$_ = u, 
            this._$_DebugRunActions$_ = j, this._$_isGroup$_ = !1, this._$_isInitiallyActive$_ = !1, 
            this._$_groupName$_ = "", this._$_isGroupActive$_ = !1, this._$_containedIncludes$_ = null, 
            this._$_perfRecord$_ = null, this._$_sid$_ = i[4], this._$_displayNumber$_ = i[5], 
            this._$_eventSheet$_._$_RegisterEventByDisplayNumber$_(this, this._$_displayNumber$_), 
            this._$_debugData$_ = this._$_runtime$_._$IsDebug$_() ? {
                _$isBreakpoint$_: i[3][0],
                _$isBreakable$_: i[3][1],
                _$canRunAllConditionsFast$_: !1,
                _$canRunAllActionsFast$_: !1,
                _$canRunAllSubEventsFast$_: !1,
                _$canRunSelfFast$_: !1
            } : null, this._$GetEventSheetManager$_()._$_RegisterEventBlock$_(this), 
            3 === i[0] && this._$_InitGroup$_(i[1]);
            let e = 0;
            for (const n of i[6]) {
                const h = co._$Condition$_._$Create$_(this, n, e++);
                this._$_conditions$_.push(h), this._$_AddSolModifier$_(h._$GetObjectClass$_());
            }
            e = 0;
            for (const r of i[7]) {
                const o = co._$Action$_._$Create$_(this, r, e++);
                this._$_actions$_.push(o);
            }
            if (9 === i.length) {
                const a = i[8];
                for (const l of a) this._$_eventSheet$_._$_CreateEvent$_(l, this, this._$_subEvents$_);
            }
            this._$_conditions$_.length && (this._$_isElseBlock$_ = null === this._$_conditions$_[0]._$GetObjectClass$_() && this._$_conditions$_[0]._$_GetFunc$_() === co._$Plugins$_._$System$_._$Cnds$_._$Else$_), 
            0 === this._$_conditions$_.length && (this._$_conditions$_ = fo), 0 === this._$_actions$_.length && (this._$_actions$_ = fo), 
            0 === this._$_subEvents$_.length && (this._$_subEvents$_ = fo);
        }
        static _$Create$_(t, s, i) {
            return co._$New$_(co._$EventBlock$_, t, s, i);
        }
        _$_InitGroup$_(t) {
            this._$_isGroup$_ = !0, this._$_isInitiallyActive$_ = !!t[0], this._$_isGroupActive$_ = this._$_isInitiallyActive$_, 
            this._$_groupName$_ = t[1].toLowerCase(), this._$_containedIncludes$_ = [], 
            this._$GetEventSheetManager$_()._$_RegisterGroup$_(this), this._$_runtime$_._$IsDebug$_() && (this._$_perfRecord$_ = {
                type: "group",
                name: t[1],
                _$totalTimeCounter$_: 0,
                children: []
            });
        }
        _$_AddContainedInclude$_(t) {
            this._$_containedIncludes$_.push(t);
        }
        _$_AddContainerSolModifierToList$_(t, s) {
            for (const i of t._$GetContainer$_()._$objectTypes$_()) s.includes(i) || s.push(i);
        }
        _$_AddSolModifierToList$_(t, s) {
            if (t) if (s.includes(t) || s.push(t), t._$IsFamily$_()) for (const i of t._$GetFamilyMembers$_()) i._$IsInContainer$_() && this._$_AddContainerSolModifierToList$_(i, s); else t._$IsInContainer$_() && this._$_AddContainerSolModifierToList$_(t, s);
        }
        _$_AddSolModifier$_(t) {
            this._$_AddSolModifierToList$_(t, this._$_solModifiers$_);
        }
        _$_AddParentSolModifier$_(t) {
            this._$_AddSolModifierToList$_(t, this._$_solModifiersIncludingParents$_);
        }
        _$SetAllSolModifiers$_() {
            this._$_solModifiers$_ = this._$_runtime$_._$GetAllObjectClasses$_();
        }
        _$_PostInit$_(t) {
            this._$_hasElseBlock$_ = !!t, this._$_IdentifyTopLevelGroup$_(), this._$_IdentifyTriggerParents$_();
            for (const s of this._$_conditions$_) s._$_PostInit$_();
            if (0 < this._$_actions$_.length) {
                let t = !1;
                for (const e of this._$_actions$_) e._$_PostInit$_(), e._$HasReturnType$_() && (t = !0);
                t ? (this._$_RunActions$_ = this._$_RunActions_ReturnValue$_, this._$_DebugRunActions$_ = this._$_DebugRunActions_ReturnValue$_) : (this._$_RunActions$_ = this._$_RunActions_Fast$_, 
                this._$_DebugRunActions$_ = this._$_DebugRunActions_Fast$_);
            }
            const i = this._$_subEvents$_;
            for (let t = 0, s = i.length; t < s; ++t) {
                const n = t < s - 1 && i[t + 1] instanceof co._$EventBlock$_ && i[t + 1]._$IsElseBlock$_();
                i[t]._$_PostInit$_(n);
            }
            this._$_debugData$_ && this._$_UpdateCanRunFast$_(), this._$_perfRecord$_ && this._$_GetPerfRecordParent$_()._$_GetPerfRecord$_().children.push(this._$_perfRecord$_);
        }
        _$_GetPerfRecord$_() {
            return this._$_perfRecord$_;
        }
        _$_GetPerfRecordParent$_() {
            let t = this._$GetParent$_();
            for (;t; ) {
                if (t._$IsGroup$_()) return t;
                t = t._$GetParent$_();
            }
            return this._$_eventSheet$_;
        }
        _$_UpdateCanRunFast$_() {
            const t = this._$_debugData$_;
            t._$canRunAllConditionsFast$_ = this._$_conditions$_.every(t => t._$DebugCanRunFast$_()), 
            t._$canRunAllActionsFast$_ = this._$_actions$_.every(t => t._$DebugCanRunFast$_()), 
            t._$canRunAllSubEventsFast$_ = this._$_subEvents$_.every(t => t._$DebugCanRunFast$_()), 
            t._$canRunSelfFast$_ = t._$canRunAllConditionsFast$_ && t._$canRunAllActionsFast$_ && t._$canRunAllSubEventsFast$_;
        }
        _$_UpdateCanRunFastRecursive$_() {
            let t = this;
            for (;t._$_UpdateCanRunFast$_(), t = t._$GetParent$_(); );
        }
        _$_IdentifyTopLevelGroup$_() {
            if (this._$IsGroup$_()) {
                let t = this._$GetParent$_();
                for (this._$_isTopLevelGroup$_ = !0; t; ) {
                    if (!t._$IsGroup$_()) {
                        this._$_isTopLevelGroup$_ = !1;
                        break;
                    }
                    t = t._$GetParent$_();
                }
            }
        }
        _$_IdentifySolModifiersIncludingParents$_() {
            const t = this._$_runtime$_._$GetAllObjectClasses$_();
            if (this._$_solModifiers$_ === t) this._$_solModifiersIncludingParents$_ = t; else {
                this._$_solModifiersIncludingParents$_ = co._$cloneArray$_(this._$_solModifiers$_);
                let t = this._$GetParent$_();
                for (;t; ) {
                    for (const i of t._$_solModifiers$_) this._$_AddParentSolModifier$_(i);
                    t = t._$GetParent$_();
                }
                const s = this._$GetEventSheetManager$_();
                this._$_solModifiers$_ = s._$_DeduplicateSolModifierList$_(this._$_solModifiers$_), 
                this._$_solModifiersIncludingParents$_ = s._$_DeduplicateSolModifierList$_(this._$_solModifiersIncludingParents$_);
            }
        }
        _$_IdentifyTriggerParents$_() {
            if (this._$HasAnyTriggeredCondition$_()) {
                this._$_triggerParents$_ = [];
                let t = this._$GetParent$_();
                for (;t; ) this._$_triggerParents$_.push(t), t = t._$GetParent$_();
                this._$_triggerParents$_.reverse();
            }
        }
        _$SetSolWriterAfterCnds$_() {
            this._$_isSolWriterAfterCnds$_ = !0, this._$_parent$_ && this._$_parent$_._$SetSolWriterAfterCnds$_();
        }
        _$IsSolWriterAfterCnds$_() {
            return this._$_isSolWriterAfterCnds$_;
        }
        _$GetSolModifiers$_() {
            return this._$_solModifiers$_;
        }
        _$GetSolModifiersIncludingParents$_() {
            return this._$_hasGotSolModifiersIncludingParents$_ || (this._$_hasGotSolModifiersIncludingParents$_ = !0, 
            this._$_IdentifySolModifiersIncludingParents$_()), this._$_solModifiersIncludingParents$_;
        }
        _$HasSolModifier$_(t) {
            return this._$_solModifiers$_.includes(t);
        }
        _$GetTriggerParents$_() {
            return this._$_triggerParents$_;
        }
        _$GetEventSheet$_() {
            return this._$_eventSheet$_;
        }
        _$GetEventSheetManager$_() {
            return this._$_eventSheet$_._$GetEventSheetManager$_();
        }
        _$GetRuntime$_() {
            return this._$_runtime$_;
        }
        _$GetParent$_() {
            return this._$_parent$_;
        }
        _$_SetScopeParent$_(t) {
            this._$_scopeParent$_ = t;
        }
        _$GetScopeParent$_() {
            return this._$_scopeParent$_ || this._$_parent$_;
        }
        _$GetDisplayNumber$_() {
            return this._$_displayNumber$_;
        }
        _$IsDebugBreakable$_() {
            return this._$_debugData$_ && this._$_debugData$_._$isBreakable$_;
        }
        _$IsDebugBreakpoint$_() {
            return this._$IsDebugBreakable$_() && this._$_debugData$_._$isBreakpoint$_;
        }
        _$_SetDebugBreakpoint$_(t) {
            this._$_debugData$_._$isBreakpoint$_ = !!t, this._$_UpdateCanRunFastRecursive$_();
        }
        _$IsGroup$_() {
            return this._$_isGroup$_;
        }
        _$IsTopLevelGroup$_() {
            return this._$_isTopLevelGroup$_;
        }
        _$IsElseBlock$_() {
            return this._$_isElseBlock$_;
        }
        _$HasElseBlock$_() {
            return this._$_hasElseBlock$_;
        }
        _$GetGroupName$_() {
            return this._$_groupName$_;
        }
        _$IsGroupActive$_() {
            return this._$_isGroupActive$_;
        }
        _$ResetInitialActivation$_() {
            this._$SetGroupActive$_(this._$_isInitiallyActive$_);
        }
        _$SetGroupActive$_(t) {
            if (t = !!t, !this._$_isGroup$_) throw new Error("not a group");
            if (this._$_isGroupActive$_ !== t) {
                this._$_isGroupActive$_ = t;
                for (const s of this._$_containedIncludes$_) s._$UpdateActive$_();
                if (this._$_containedIncludes$_.length) {
                    const i = this._$_runtime$_._$GetCurrentLayout$_(), e = i._$GetEventSheet$_();
                    e && e._$_UpdateDeepIncludes$_();
                }
            }
        }
        _$GetSID$_() {
            return this._$_sid$_;
        }
        _$IsOrBlock$_() {
            return this._$_isOrBlock$_;
        }
        _$IsTrigger$_() {
            return this._$_conditions$_.length && this._$_conditions$_[0]._$IsTrigger$_();
        }
        _$IsForFunctionBlock$_() {
            return this._$_scopeParent$_ && this._$_scopeParent$_ instanceof co._$FunctionBlock$_;
        }
        _$HasAnyTriggeredCondition$_() {
            return this._$IsForFunctionBlock$_() || this._$_conditions$_.some(t => t._$IsTrigger$_());
        }
        _$GetConditions$_() {
            return this._$_conditions$_;
        }
        _$GetConditionCount$_() {
            return this._$_conditions$_.length;
        }
        _$GetConditionAt$_(t) {
            if ((t = Math.floor(t)) < 0 || t >= this._$_conditions$_.length) throw new RangeError("invalid condition index");
            return this._$_conditions$_[t];
        }
        _$GetConditionByDebugIndex$_(t) {
            return this._$GetConditionAt$_(t);
        }
        _$IsFirstConditionOfType$_(t) {
            let s = t._$GetIndex$_();
            if (0 !== s) {
                --s;
                const i = t._$IsSystemOrSingleGlobalCondition$_() ? t._$GetFirstObjectParameterObjectClass$_() : t._$GetObjectClass$_();
                for (;0 <= s; --s) {
                    const e = this._$_conditions$_[s];
                    if (i === e._$GetObjectClass$_() || e._$IsSystemOrSingleGlobalCondition$_() && e._$GetFirstObjectParameterObjectClass$_() === i) return !1;
                }
            }
            return !0;
        }
        _$GetActions$_() {
            return this._$_actions$_;
        }
        _$GetActionCount$_() {
            return this._$_actions$_.length;
        }
        _$GetActionAt$_(t) {
            if ((t = Math.floor(t)) < 0 || t >= this._$_actions$_.length) throw new RangeError("invalid action index");
            return this._$_actions$_[t];
        }
        _$GetActionByDebugIndex$_(s) {
            s = Math.floor(s);
            const t = this._$_actions$_.find(t => t._$GetDebugIndex$_() === s);
            if (t) return t;
            throw new RangeError("invalid action debug index");
        }
        _$_HasActionIndex$_(t) {
            return 0 <= (t = Math.floor(t)) && t < this._$_actions$_.length;
        }
        _$GetSubEvents$_() {
            return this._$_subEvents$_;
        }
        _$_GetAllLocalVariablesInScope$_() {
            return this._$_subEvents$_.filter(t => t instanceof co._$EventVariable$_);
        }
        _$RunPreTrigger$_(i) {
            i._$SetCurrentEvent$_(this);
            let e = this._$_conditions$_, n = 0 === e.length;
            for (let t = 0, s = e.length; t < s; ++t) {
                const h = e[t];
                if (i._$SetConditionIndex$_(t), h._$IsLooping$_()) throw new Error("trigger cannot be used as sub-event to a loop");
                if (h._$Run$_()) n = !0; else if (!this._$_isOrBlock$_) return !1;
            }
            return !this._$_isOrBlock$_ || n;
        }
        _$RunOrBlockTrigger$_(t, s) {
            t._$SetCurrentEvent$_(this), t._$SetConditionIndex$_(s), this._$_conditions$_[s]._$Run$_() && (this._$_RunActions$_(t, 0) && this._$_RunSubEvents$_(t), 
            t._$SetLastEventTrue$_(!0));
        }
        *_$DebugRunPreTrigger$_(i) {
            i._$SetCurrentEvent$_(this);
            let e = this._$_conditions$_, n = 0 === e.length;
            for (let t = 0, s = e.length; t < s; ++t) {
                const h = e[t];
                if (i._$SetConditionIndex$_(t), h._$IsLooping$_()) throw new Error("trigger cannot be used as sub-event to a loop");
                if (h._$DebugCanRunFast$_() ? h._$Run$_() : yield* h._$DebugRun$_()) n = !0; else if (!this._$_isOrBlock$_) return !1;
            }
            return !this._$_isOrBlock$_ || n;
        }
        *_$DebugRunOrBlockTrigger$_(t, s) {
            t._$SetCurrentEvent$_(this), t._$SetConditionIndex$_(s);
            let i = this._$_conditions$_[s];
            if (i._$DebugCanRunFast$_() ? i._$Run$_() : yield* i._$DebugRun$_()) (this._$DebugCanRunActionsFast$_() ? this._$_RunActions$_(t, 0) : yield* this._$_DebugRunActions$_(t, 0)) && (this._$DebugCanRunSubEventsFast$_() ? this._$_RunSubEvents$_() : yield* this._$_DebugRunSubEvents$_()), 
            t._$SetLastEventTrue$_(!0);
        }
        _$Run$_(t) {
            t._$SetCurrentEvent$_(this), this._$_isElseBlock$_ || t._$SetElseBranchRan$_(!1), 
            this._$_isOrBlock$_ ? this._$_RunOrBlock$_(t) : this._$_RunAndBlock$_(t);
        }
        *_$DebugRun$_(t) {
            (this._$IsDebugBreakpoint$_() || this._$_runtime$_._$DebugBreakNext$_()) && (yield this), 
            t._$SetCurrentEvent$_(this), this._$_isElseBlock$_ || t._$SetElseBranchRan$_(!1), 
            this._$_isOrBlock$_ ? yield* this._$_DebugRunOrBlock$_(t) : yield* this._$_DebugRunAndBlock$_(t);
        }
        _$_RunOrBlock$_(i) {
            let e = this._$_conditions$_, n = 0 === e.length;
            for (let t = 0, s = e.length; t < s; ++t) {
                const h = e[t];
                if (!h._$IsTrigger$_()) {
                    i._$SetConditionIndex$_(t);
                    const r = h._$Run$_();
                    n = n || r;
                }
            }
            i._$SetLastEventTrue$_(n), n && (this._$_RunActions$_(i, 0) && this._$_RunSubEvents$_(i), 
            this._$_hasElseBlock$_) && i._$SetElseBranchRan$_(!0);
        }
        *_$_DebugRunOrBlock$_(i) {
            let e = this._$_conditions$_, n = 0 === e.length;
            for (let s = 0, t = e.length; s < t; ++s) {
                const h = e[s];
                if (!h._$IsTrigger$_()) {
                    i._$SetConditionIndex$_(s);
                    let t;
                    t = h._$DebugCanRunFast$_() ? h._$Run$_() : yield* h._$DebugRun$_(), 
                    n = n || t;
                }
            }
            if (i._$SetLastEventTrue$_(n), n) (this._$DebugCanRunActionsFast$_() ? this._$_RunActions$_(i, 0) : yield* this._$_DebugRunActions$_(i, 0)) && (this._$DebugCanRunSubEventsFast$_() ? this._$_RunSubEvents$_() : yield* this._$_DebugRunSubEvents$_()), 
            this._$_hasElseBlock$_ && i._$SetElseBranchRan$_(!0);
        }
        _$_RunAndBlock$_(i) {
            const e = this._$_conditions$_;
            for (let t = 0, s = e.length; t < s; ++t) {
                const n = e[t], h = (i._$SetConditionIndex$_(t), n._$Run$_());
                if (!h) return void i._$SetLastEventTrue$_(!1);
            }
            i._$SetLastEventTrue$_(!0), this._$_RunActions$_(i, 0) && this._$_RunSubEvents$_(i), 
            i._$GetLastEventTrue$_() && this._$_hasElseBlock$_ && i._$SetElseBranchRan$_(!0);
        }
        *_$_DebugRunAndBlock$_(i) {
            const e = this._$_conditions$_;
            for (let t = 0, s = e.length; t < s; ++t) {
                const n = e[t];
                i._$SetConditionIndex$_(t);
                if (!(n._$DebugCanRunFast$_() ? n._$Run$_() : yield* n._$DebugRun$_())) return void i._$SetLastEventTrue$_(!1);
            }
            i._$SetLastEventTrue$_(!0);
            (this._$DebugCanRunActionsFast$_() ? this._$_RunActions$_(i, 0) : yield* this._$_DebugRunActions$_(i, 0)) && (this._$DebugCanRunSubEventsFast$_() ? this._$_RunSubEvents$_() : yield* this._$_DebugRunSubEvents$_()), 
            i._$GetLastEventTrue$_() && this._$_hasElseBlock$_ && i._$SetElseBranchRan$_(!0);
        }
        _$_RunActions_Fast$_(i, e) {
            const n = this._$_actions$_;
            for (let t = e, s = n.length; t < s; ++t) {
                const h = n[t];
                i._$SetActionIndex$_(t), h._$Run$_();
            }
            return !0;
        }
        *_$_DebugRunActions_Fast$_(i, e) {
            const n = this._$_actions$_;
            for (let t = e, s = n.length; t < s; ++t) {
                const h = n[t];
                i._$SetActionIndex$_(t), h._$DebugCanRunFast$_() ? h._$Run$_() : yield* h._$DebugRun$_();
            }
            return !0;
        }
        _$_RunActions_ReturnValue$_(i, e) {
            const n = this._$GetEventSheetManager$_(), h = this._$_actions$_;
            for (let t = e, s = h.length; t < s; ++t) {
                const r = h[t], o = (i._$SetActionIndex$_(t), r._$Run$_());
                if (r._$CanBailOut$_() && !0 === o) return !1;
                r._$IsAsync$_() && o instanceof Promise && n._$AddAsyncActionPromise$_(o);
            }
            return !0;
        }
        *_$_DebugRunActions_ReturnValue$_(i, e) {
            const n = this._$GetEventSheetManager$_(), h = this._$_actions$_;
            for (let s = e, t = h.length; s < t; ++s) {
                const r = h[s];
                i._$SetActionIndex$_(s);
                let t;
                if (t = r._$DebugCanRunFast$_() ? r._$Run$_() : yield* r._$DebugRun$_(), 
                r._$CanBailOut$_() && !0 === t) return !1;
                r._$IsAsync$_() && t instanceof Promise && n._$AddAsyncActionPromise$_(t);
            }
            return !0;
        }
        _$_ResumeActionsAndSubEvents$_(t) {
            this._$_RunActions$_(t, t._$GetActionIndex$_()) && this._$_RunSubEvents$_();
        }
        *_$_DebugResumeActionsAndSubEvents$_(t) {
            (yield* this._$_DebugRunActions$_(t, t._$GetActionIndex$_())) && (yield* this._$_DebugRunSubEvents$_());
        }
        _$_RunSubEvents$_() {
            if (this._$_subEvents$_.length) {
                const t = this._$IsGroup$_() && this._$_runtime$_._$IsCPUProfiling$_(), s = t ? performance.now() : 0, i = this._$_eventStack$_, e = i._$Push$_(this);
                this._$_isSolWriterAfterCnds$_ ? this._$_RunSubEvents_SolWriterAfterCnds$_(e) : this._$_RunSubEvents_Fast$_(e), 
                i._$Pop$_(), t && (this._$_perfRecord$_._$totalTimeCounter$_ += performance.now() - s);
            }
        }
        _$_RunSubEvents_SolWriterAfterCnds$_(e) {
            const n = this._$_isGroup$_, h = this._$_isTopLevelGroup$_, r = this._$GetEventSheetManager$_(), o = this._$_subEvents$_;
            for (let t = 0, s = o.length, i = s - 1; t < s; ++t) {
                const a = o[t], l = a._$GetSolModifiers$_(), u = !h || !n && t < i;
                u && r._$PushCopySol$_(l), a._$Run$_(e), u ? r._$PopSol$_(l) : r._$ClearSol$_(l);
            }
        }
        _$_RunSubEvents_Fast$_(i) {
            const e = this._$_subEvents$_;
            for (let t = 0, s = e.length; t < s; ++t) e[t]._$Run$_(i);
        }
        *_$_DebugRunSubEvents$_() {
            if (this._$_subEvents$_.length) {
                const t = this._$_eventStack$_, s = t._$Push$_(this);
                this._$_isSolWriterAfterCnds$_ ? yield* this._$_DebugRunSubEvents_SolWriterAfterCnds$_(s) : yield* this._$_DebugRunSubEvents_Fast$_(s), 
                t._$Pop$_();
            }
        }
        *_$_DebugRunSubEvents_SolWriterAfterCnds$_(e) {
            const n = this._$_isGroup$_, h = this._$_isTopLevelGroup$_, r = this._$GetEventSheetManager$_(), o = this._$_subEvents$_;
            for (let t = 0, s = o.length, i = s - 1; t < s; ++t) {
                const a = o[t], l = a._$GetSolModifiers$_(), u = !h || !n && t < i;
                u && r._$PushCopySol$_(l), yield* a._$DebugRun$_(e), u ? r._$PopSol$_(l) : r._$ClearSol$_(l);
            }
        }
        *_$_DebugRunSubEvents_Fast$_(i) {
            const e = this._$_subEvents$_;
            for (let t = 0, s = e.length; t < s; ++t) yield* e[t]._$DebugRun$_(i);
        }
        _$Retrigger$_(i, e) {
            e._$ResetQuick$_();
            const n = this._$_conditions$_;
            if (!this._$IsOrBlock$_()) for (let t = i._$GetConditionIndex$_() + 1, s = n.length; t < s; ++t) {
                const h = n[t], r = (e._$SetConditionIndex$_(t), h._$Run$_());
                if (!r) return !1;
            }
            return this._$_RunActions$_(e, 0) && this._$_RunSubEvents$_(e), !0;
        }
        *_$DebugRetrigger$_(i, e) {
            e._$ResetQuick$_();
            const n = this._$_conditions$_;
            if (!this._$IsOrBlock$_()) for (let t = i._$GetConditionIndex$_() + 1, s = n.length; t < s; ++t) {
                const h = n[t];
                e._$SetConditionIndex$_(t);
                if (!(h._$DebugCanRunFast$_() ? h._$Run$_() : yield* h._$DebugRun$_())) return !1;
            }
            return (this._$DebugCanRunActionsFast$_() ? this._$_RunActions$_(e, 0) : yield* this._$_DebugRunActions$_(e, 0)) && (this._$DebugCanRunSubEventsFast$_() ? this._$_RunSubEvents$_() : yield* this._$_DebugRunSubEvents$_()), 
            !0;
        }
        _$DebugCanRunFast$_() {
            return !this._$IsDebugBreakpoint$_() && !this._$_runtime$_._$DebugBreakNext$_() && this._$_debugData$_._$canRunSelfFast$_;
        }
        _$DebugCanRunActionsFast$_() {
            return !this._$_runtime$_._$DebugBreakNext$_() && this._$_debugData$_._$canRunAllActionsFast$_;
        }
        _$DebugCanRunSubEventsFast$_() {
            return !this._$_runtime$_._$DebugBreakNext$_() && this._$_debugData$_._$canRunAllSubEventsFast$_;
        }
        _$_CheckParentsOKToRun$_(i) {
            if (this._$GetParent$_()) {
                const e = this._$GetTriggerParents$_();
                for (let t = 0, s = e.length; t < s; ++t) if (!e[t]._$RunPreTrigger$_(i)) return !1;
            }
            return !0;
        }
        *_$_DebugCheckParentsOKToRun$_(i) {
            if (this._$GetParent$_()) {
                const e = this._$GetTriggerParents$_();
                for (let t = 0, s = e.length; t < s; ++t) if (!(yield* e[t]._$DebugRunPreTrigger$_(i))) return !1;
            }
            return !0;
        }
        _$_EvaluateFunctionCallParameters$_(t, s, i) {
            if (0 < s.length) if (i) {
                const e = s.map(t => t._$Get$_(0));
                t._$GetLocalVarStack$_()._$Push$_(), this._$_scopeParent$_._$SetFunctionParameters$_(e);
            } else this._$_scopeParent$_._$EvaluateFunctionParameters$_(s); else i && t._$GetLocalVarStack$_()._$Push$_();
        }
        _$RunAsFunctionCall$_(t, s, i, e) {
            let n, h, r = 0 < t.length, o = null, a = this._$_runtime$_, l = this._$_eventStack$_, u = a._$GetEventSheetManager$_(), c = this._$_scopeParent$_, f = c._$IsAsync$_(), d = u._$_IncTriggerDepth$_(), p = 1 < d;
            if (this._$_EvaluateFunctionCallParameters$_(u, s, p), r && (i ? u._$PushCopySol$_(t) : u._$PushCleanSol$_(t)), 
            null !== e) {
                if (e._$copyFromObjectClass$_) {
                    const g = i ? e._$copyFromObjectClass$_._$GetCurrentSol$_() : e._$copyFromObjectClass$_._$GetSolStack$_()._$GetOneBelowCurrentSol$_(), y = e._$copyToObjectClass$_._$GetCurrentSol$_();
                    y._$SetArrayPicked$_(g._$GetInstances$_()), y._$ClearElseInstances$_(), 
                    i || e._$copyToObjectClass$_._$ApplySolToContainer$_();
                } else if (e._$pickObjectClass$_) {
                    const M = e._$pickObjectClass$_._$GetCurrentSol$_();
                    M._$SetArrayPicked$_(e._$pickInstances$_), M._$ClearElseInstances$_();
                }
                e._$pushCleanSolDynamic$_ && (o = u._$PushCleanSolDynamic$_(t));
            }
            const m = l._$Push$_(this);
            return i && m._$SetDynamicSolModifiers$_(t), this._$_CheckParentsOKToRun$_(m) && (m._$SetCurrentEvent$_(this), 
            f && ([ h, n ] = c._$StartAsyncFunctionCall$_()), this._$_RunAndBlock$_(m), 
            f) && c._$MaybeFinishAsyncFunctionCall$_(h), l._$Pop$_(), p && u._$GetLocalVarStack$_()._$Pop$_(), 
            null !== o && u._$PopSol$_(o), r && u._$PopSol$_(t), u._$_DecTriggerDepth$_(), 
            f || u._$ClearNestedAsyncActionPromises$_(), n;
        }
        *_$DebugRunAsFunctionCall$_(t, s, i, e) {
            let n, h, r = ((this._$IsDebugBreakpoint$_() || this._$_runtime$_._$DebugBreakNext$_()) && (yield this), 
            0 < t.length), o = null, a = this._$_runtime$_, l = this._$_eventStack$_, u = a._$GetEventSheetManager$_(), c = this._$_scopeParent$_, f = c._$IsAsync$_(), d = u._$_IncTriggerDepth$_(), p = 1 < d;
            if (this._$_EvaluateFunctionCallParameters$_(u, s, p), r && (i ? u._$PushCopySol$_(t) : u._$PushCleanSol$_(t)), 
            null !== e) {
                if (e._$copyFromObjectClass$_) {
                    const g = i ? e._$copyFromObjectClass$_._$GetCurrentSol$_() : e._$copyFromObjectClass$_._$GetSolStack$_()._$GetOneBelowCurrentSol$_(), y = e._$copyToObjectClass$_._$GetCurrentSol$_();
                    y._$SetArrayPicked$_(g._$GetInstances$_()), y._$ClearElseInstances$_(), 
                    i || e._$copyToObjectClass$_._$ApplySolToContainer$_();
                } else if (e._$pickObjectClass$_) {
                    const M = e._$pickObjectClass$_._$GetCurrentSol$_();
                    M._$SetArrayPicked$_(e._$pickInstances$_), M._$ClearElseInstances$_();
                }
                e._$pushCleanSolDynamic$_ && (o = u._$PushCleanSolDynamic$_(t));
            }
            const m = l._$Push$_(this);
            return i && m._$SetDynamicSolModifiers$_(t), (yield* this._$_DebugCheckParentsOKToRun$_(m)) && (m._$SetCurrentEvent$_(this), 
            f && ([ h, n ] = c._$StartAsyncFunctionCall$_()), yield* this._$_DebugRunAndBlock$_(m), 
            f) && c._$MaybeFinishAsyncFunctionCall$_(h), l._$Pop$_(), p && u._$GetLocalVarStack$_()._$Pop$_(), 
            null !== o && u._$PopSol$_(o), r && u._$PopSol$_(t), u._$_DecTriggerDepth$_(), 
            f || u._$ClearNestedAsyncActionPromises$_(), n;
        }
        _$RunAsMappedFunctionCall$_(t, s) {
            const i = this._$GetSolModifiersIncludingParents$_(), e = 0 < i.length, n = this._$_runtime$_, h = this._$_eventStack$_, r = n._$GetEventSheetManager$_(), o = r._$_IncTriggerDepth$_(), a = 1 < o, l = (a && r._$GetLocalVarStack$_()._$Push$_(), 
            this._$_scopeParent$_._$SetFunctionParameters$_(t), e && (s ? r._$PushCopySol$_(i) : r._$PushCleanSol$_(i)), 
            h._$Push$_(this));
            this._$_CheckParentsOKToRun$_(l) && (l._$SetCurrentEvent$_(this), this._$_RunAndBlock$_(l)), 
            h._$Pop$_(), a && r._$GetLocalVarStack$_()._$Pop$_(), e && r._$PopSol$_(i), 
            r._$_DecTriggerDepth$_(), r._$ClearNestedAsyncActionPromises$_();
        }
        *_$DebugRunAsMappedFunctionCall$_(t, s) {
            (this._$IsDebugBreakpoint$_() || this._$_runtime$_._$DebugBreakNext$_()) && (yield this);
            const i = this._$GetSolModifiersIncludingParents$_(), e = 0 < i.length, n = this._$_runtime$_, h = this._$_eventStack$_, r = n._$GetEventSheetManager$_(), o = r._$_IncTriggerDepth$_(), a = 1 < o, l = (a && r._$GetLocalVarStack$_()._$Push$_(), 
            this._$_scopeParent$_._$SetFunctionParameters$_(t), e && (s ? r._$PushCopySol$_(i) : r._$PushCleanSol$_(i)), 
            h._$Push$_(this));
            (yield* this._$_DebugCheckParentsOKToRun$_(l)) && (l._$SetCurrentEvent$_(this), 
            yield* this._$_DebugRunAndBlock$_(l)), h._$Pop$_(), a && r._$GetLocalVarStack$_()._$Pop$_(), 
            e && r._$PopSol$_(i), r._$_DecTriggerDepth$_(), r._$ClearNestedAsyncActionPromises$_();
        }
        _$RunAsExpressionFunctionCall$_(t, s, i, e, ...n) {
            let h, r, o = 0 < t.length, a = this._$_runtime$_, l = this._$_eventStack$_, u = a._$GetEventSheetManager$_(), c = this._$_scopeParent$_, f = c._$IsAsync$_(), d = u._$_IncTriggerDepth$_(), p = 1 < d, m = (p && u._$GetLocalVarStack$_()._$Push$_(), 
            0 < n.length && this._$_scopeParent$_._$SetFunctionParameters$_(n), 
            o && (s ? u._$PushCopySol$_(t) : u._$PushCleanSol$_(t)), l._$Push$_(this));
            return m._$InitCallFunctionExpression$_(i, e), l._$PushExpFunc$_(m), 
            a._$SetDebuggingEnabled$_(!1), this._$_CheckParentsOKToRun$_(m) && (m._$SetCurrentEvent$_(this), 
            f && ([ r, h ] = c._$StartAsyncFunctionCall$_()), this._$_RunAndBlock$_(m), 
            f) && c._$MaybeFinishAsyncFunctionCall$_(r), a._$SetDebuggingEnabled$_(!0), 
            l._$Pop$_(), l._$PopExpFunc$_(), p && u._$GetLocalVarStack$_()._$Pop$_(), 
            o && u._$PopSol$_(t), u._$_DecTriggerDepth$_(), f || u._$ClearNestedAsyncActionPromises$_(), 
            h || m._$GetFunctionReturnValue$_();
        }
    };
}

{
    let e = self._$C3$_, t = [], s = !1;
    e._$EventScript$_ = class extends e._$DefendedBase$_ {
        constructor(t, s, i) {
            super();
            const e = t._$GetRuntime$_(), n = t._$GetEventSheetManager$_(), h = (this._$_eventSheet$_ = t, 
            this._$_eventSheetManager$_ = n, this._$_runtime$_ = t._$GetRuntime$_(), 
            this._$_parent$_ = s, e._$GetObjectReference$_(i[1]));
            this._$_func$_ = h, this._$_displayNumber$_ = i[2], this._$_eventSheet$_._$_RegisterEventByDisplayNumber$_(this, this._$_displayNumber$_), 
            this._$_debugData$_ = e._$IsDebug$_() ? {
                _$isBreakpoint$_: i[3][0],
                _$isBreakable$_: i[3][1]
            } : null;
        }
        static _$Create$_(t, s, i) {
            return e._$New$_(e._$EventScript$_, t, s, i);
        }
        _$_PostInit$_() {
            const t = this._$_func$_, s = this._$_runtime$_._$GetEventSheetManager$_()._$_GetLocalVariablesScriptInterface$_(this);
            this._$_func$_ = t.bind(null, this._$_runtime$_._$GetIRuntime$_(), s);
        }
        _$GetParent$_() {
            return this._$_parent$_;
        }
        _$GetScopeParent$_() {
            return this._$_parent$_;
        }
        _$GetEventSheet$_() {
            return this._$_eventSheet$_;
        }
        _$GetDisplayNumber$_() {
            return this._$_displayNumber$_;
        }
        _$IsDebugBreakable$_() {
            return this._$_debugData$_ && this._$_debugData$_._$isBreakable$_;
        }
        _$IsDebugBreakpoint$_() {
            return this._$IsDebugBreakable$_() && this._$_debugData$_._$isBreakpoint$_;
        }
        _$_SetDebugBreakpoint$_(t) {
            this._$_debugData$_._$isBreakpoint$_ = !!t;
        }
        _$IsElseBlock$_() {
            return !1;
        }
        _$GetSolModifiers$_() {
            return t;
        }
        _$GetSolModifiersIncludingParents$_() {
            return this._$_parent$_ ? this._$_parent$_._$GetSolModifiersIncludingParents$_() : t;
        }
        _$Run$_(t) {
            t._$SetCurrentEvent$_(this), this._$_eventSheetManager$_._$AddAsyncActionPromise$_(this._$_RunUserScript$_());
        }
        async _$_RunUserScript$_() {
            try {
                await this._$_func$_();
            } catch (t) {
                console.error(`Unhandled exception running script %c${this._$GetEventSheet$_()._$GetName$_()}, event ${this._$GetDisplayNumber$_()}:`, "font-size: 1.2em; font-weight: bold;", t), 
                self.C3Debugger && self.C3Debugger._SetLastErrorScript(this), s || (console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()", "font-weight: bold; text-decoration: underline", "", "font-weight: bold"), 
                s = !0);
            }
        }
        *_$DebugRun$_(t) {
            t._$SetCurrentEvent$_(this), (this._$IsDebugBreakpoint$_() || this._$_runtime$_._$DebugBreakNext$_()) && (yield this), 
            this._$Run$_(t);
        }
        _$DebugCanRunFast$_() {
            return !this._$IsDebugBreakpoint$_() && !this._$_runtime$_._$DebugBreakNext$_();
        }
        static _$HadUserScriptException$_() {
            return s;
        }
        static _$SetHadUserScriptException$_() {
            s = !0;
        }
    };
}

{
    const po = self._$C3$_;
    po._$FunctionBlock$_ = class extends po._$DefendedBase$_ {
        constructor(t, s, i) {
            super(), this._$_eventSheet$_ = t, this._$_runtime$_ = t._$GetRuntime$_(), 
            this._$_parent$_ = s, this._$_functionType$_ = 0, this._$_functionName$_ = "", 
            this._$_returnType$_ = 0, this._$_functionParameters$_ = [], this._$_isEnabled$_ = !0, 
            this._$_aceName$_ = "", this._$_objectClass$_ = null, this._$_hasOverrides$_ = !1, 
            this._$_innerLocalVariables$_ = [], this._$_isCopyPicked$_ = !1, this._$_isAsync$_ = !1, 
            this._$_nextAsyncId$_ = 0, this._$_currentAsyncId$_ = -1, this._$_asyncMap$_ = new Map(), 
            this._$_eventBlock$_ = po._$EventBlock$_._$Create$_(t, s, i), this._$_eventBlock$_._$_SetScopeParent$_(this);
        }
        _$InitFunctionBlock$_(t) {
            this._$_functionType$_ = 0, this._$_functionName$_ = t[0], this._$_returnType$_ = t[1], 
            this._$_functionParameters$_ = t[2].map(t => po._$EventVariable$_._$Create$_(this._$_eventSheet$_, this, t)), 
            this._$_isEnabled$_ = t[3], this._$_isAsync$_ = t[4], this._$_isCopyPicked$_ = t[5];
        }
        _$InitCustomACEBlock$_(t) {
            this._$_functionType$_ = 1, this._$_aceName$_ = t[1], this._$_objectClass$_ = this._$_runtime$_._$GetObjectClassByIndex$_(t[2]), 
            this._$_eventBlock$_._$_AddSolModifier$_(this._$_objectClass$_), this._$_functionName$_ = this._$_objectClass$_._$GetName$_() + "." + this._$_aceName$_, 
            this._$_returnType$_ = t[3], this._$_functionParameters$_ = t[4].map(t => po._$EventVariable$_._$Create$_(this._$_eventSheet$_, this, t)), 
            this._$_isEnabled$_ = t[5], this._$_isAsync$_ = t[6], this._$_isCopyPicked$_ = t[7], 
            this._$_objectClass$_._$AddCustomAction$_(this);
        }
        static _$CreateFunctionBlock$_(t, s, i) {
            const e = po._$New$_(po._$FunctionBlock$_, t, s, i), n = i[1];
            return e._$InitFunctionBlock$_(n), e;
        }
        static _$CreateCustomACEBlock$_(t, s, i) {
            const e = po._$New$_(po._$FunctionBlock$_, t, s, i), n = i[1];
            return e._$InitCustomACEBlock$_(n), e;
        }
        _$_CheckOverrideState$_() {
            if (this._$_objectClass$_ && this._$_objectClass$_._$IsFamily$_()) for (const t of this._$_objectClass$_._$GetFamilyMembers$_()) if (t._$HasOwnCustomActionByName$_(this._$_aceName$_)) {
                this._$_hasOverrides$_ = !0;
                break;
            }
        }
        _$_PostInit$_() {
            for (const t of this._$_functionParameters$_) t._$_PostInit$_();
            this._$_eventBlock$_._$_PostInit$_(!1);
        }
        _$GetFunctionType$_() {
            return this._$_functionType$_;
        }
        _$_GetAllLocalVariablesInScope$_() {
            return this._$_functionParameters$_;
        }
        _$GetFunctionParameters$_() {
            return this._$_functionParameters$_;
        }
        _$GetFunctionParameterCount$_() {
            return this._$_functionParameters$_.length;
        }
        _$_RegisterLocalVariable$_(t) {
            this._$_innerLocalVariables$_.push(t);
        }
        _$_GetAllInnerLocalVariables$_() {
            return this._$_innerLocalVariables$_;
        }
        _$EvaluateFunctionParameters$_(i) {
            const e = this._$_functionParameters$_;
            for (let t = 0, s = e.length; t < s; ++t) e[t]._$SetValue$_(i[t]._$Get$_(0));
        }
        _$SetFunctionParameters$_(i) {
            const e = this._$_functionParameters$_;
            for (let t = 0, s = e.length; t < s; ++t) e[t]._$SetValue$_(i[t]);
        }
        _$CaptureFunctionParameters$_() {
            return this._$_functionParameters$_.map(t => t._$GetValue$_());
        }
        _$GetParent$_() {
            return this._$_parent$_;
        }
        _$GetScopeParent$_() {
            return this._$_parent$_;
        }
        _$GetFunctionName$_() {
            return this._$_functionName$_;
        }
        _$GetACEName$_() {
            return this._$_aceName$_;
        }
        _$HasCustomACEOverrides$_() {
            return this._$_hasOverrides$_;
        }
        _$GetReturnType$_() {
            return this._$_returnType$_;
        }
        _$GetObjectClass$_() {
            return this._$_objectClass$_;
        }
        _$IsEnabled$_() {
            return this._$_isEnabled$_;
        }
        _$GetDefaultReturnValue$_() {
            switch (this._$_returnType$_) {
              case 0:
                return null;

              case 2:
                return "";

              default:
                return 0;
            }
        }
        _$GetEventBlock$_() {
            return this._$_eventBlock$_;
        }
        _$IsCopyPicked$_() {
            return this._$_isCopyPicked$_;
        }
        _$IsAsync$_() {
            return this._$_isAsync$_;
        }
        _$StartAsyncFunctionCall$_() {
            const t = this._$_nextAsyncId$_++;
            this._$_currentAsyncId$_ = t;
            let s, i = new Promise(t => s = t);
            return this._$_asyncMap$_.set(t, {
                resolve: s,
                _$pauseCount$_: 0
            }), [ t, i ];
        }
        _$MaybeFinishAsyncFunctionCall$_(t) {
            const s = this._$_asyncMap$_.get(t);
            0 === s._$pauseCount$_ && (s.resolve(), this._$_asyncMap$_.delete(t)), 
            this._$_currentAsyncId$_ = -1;
        }
        _$PauseCurrentAsyncFunction$_() {
            const t = this._$_asyncMap$_.get(this._$_currentAsyncId$_);
            return t._$pauseCount$_++, this._$_currentAsyncId$_;
        }
        _$ResumeAsyncFunction$_(t) {
            this._$_currentAsyncId$_ = t;
            const s = this._$_asyncMap$_.get(t);
            s._$pauseCount$_--;
        }
        _$RunAsFamilyCustomActionWithOverrides$_(t, s) {
            const i = new Map(), e = [];
            for (const n of this._$_objectClass$_._$GetCurrentSol$_()._$GetInstances$_()) {
                const h = n._$GetObjectClass$_();
                if (h._$HasOwnCustomActionByName$_(this._$_aceName$_)) {
                    const r = i.get(h);
                    Array.isArray(r) ? r.push(n) : i.set(h, [ n ]);
                } else e.push(n);
            }
            if (0 < e.length && this._$_eventBlock$_._$RunAsFunctionCall$_(t, s, this._$_isCopyPicked$_, {
                _$pickObjectClass$_: this._$_objectClass$_,
                _$pickInstances$_: e
            }), 0 < i.size) for (const [ o, a ] of i) {
                const l = o._$GetOwnCustomActionByName$_(this._$_aceName$_)._$GetEventBlock$_(), u = [ ...new Set([ ...t, ...l._$GetSolModifiers$_() ]) ];
                l._$RunAsFunctionCall$_(u, s, this._$_isCopyPicked$_, {
                    _$pickObjectClass$_: o,
                    _$pickInstances$_: a
                });
            }
        }
        *_$DebugRunAsFamilyCustomActionWithOverrides$_(t, s) {
            const i = new Map(), e = [];
            for (const n of this._$_objectClass$_._$GetCurrentSol$_()._$GetInstances$_()) {
                const h = n._$GetObjectClass$_();
                if (h._$HasOwnCustomActionByName$_(this._$_aceName$_)) {
                    const r = i.get(h);
                    Array.isArray(r) ? r.push(n) : i.set(h, [ n ]);
                } else e.push(n);
            }
            if (0 < e.length && (yield* this._$_eventBlock$_._$DebugRunAsFunctionCall$_(t, s, this._$_isCopyPicked$_, {
                _$pickObjectClass$_: this._$_objectClass$_,
                _$pickInstances$_: e
            })), 0 < i.size) for (const [ o, a ] of i) {
                const l = o._$GetOwnCustomActionByName$_(this._$_aceName$_)._$GetEventBlock$_(), u = [ ...new Set([ ...t, ...l._$GetSolModifiers$_() ]) ];
                yield* l._$DebugRunAsFunctionCall$_(u, s, this._$_isCopyPicked$_, {
                    _$pickObjectClass$_: o,
                    _$pickInstances$_: a
                });
            }
        }
    };
}

{
    const mo = self._$C3$_, go = [];
    mo._$EventVariable$_ = class extends mo._$DefendedBase$_ {
        constructor(t, s, i) {
            super();
            const e = t._$GetEventSheetManager$_();
            this._$_eventSheet$_ = t, this._$_eventSheetManager$_ = e, this._$_runtime$_ = t._$GetRuntime$_(), 
            this._$_parent$_ = s, this._$_localVarStack$_ = e._$GetLocalVarStack$_(), 
            this._$_name$_ = i[1], this._$_type$_ = i[2], this._$_initialValue$_ = i[3], 
            this._$_isStatic$_ = !!i[4], this._$_isConstant$_ = !!i[5], this._$_isFunctionParameter$_ = s instanceof mo._$FunctionBlock$_, 
            this._$_sid$_ = i[6], this._$_jsPropName$_ = this._$_runtime$_._$GetJsPropName$_(i[8]), 
            this._$_scriptSetter$_ = t => this._$SetValue$_(t), this._$_scriptGetter$_ = () => this._$GetValue$_(), 
            this._$_hasSingleValue$_ = !this._$_parent$_ || this._$_isStatic$_ || this._$_isConstant$_, 
            this._$_value$_ = this._$_initialValue$_, this._$_localIndex$_ = -1, 
            this._$IsBoolean$_() && (this._$_value$_ = this._$_value$_ ? 1 : 0), 
            !this._$IsLocal$_() || this._$IsStatic$_() || this._$IsConstant$_() || (this._$_localIndex$_ = e._$_GetNextLocalVarIndex$_(this)), 
            e._$_RegisterEventVariable$_(this);
        }
        static _$Create$_(t, s, i) {
            return mo._$New$_(mo._$EventVariable$_, t, s, i);
        }
        _$_PostInit$_() {
            if (this._$IsLocal$_() && !this._$IsStatic$_() && !this._$IsConstant$_() && !this._$IsFunctionParameter$_()) {
                const t = this._$_eventSheetManager$_._$FindFirstFunctionBlockParent$_(this);
                t && t._$_RegisterLocalVariable$_(this);
            }
        }
        _$GetName$_() {
            return this._$_name$_;
        }
        _$GetJsPropName$_() {
            return this._$_jsPropName$_;
        }
        _$GetParent$_() {
            return this._$_parent$_;
        }
        _$GetScopeParent$_() {
            return this._$GetParent$_();
        }
        _$IsGlobal$_() {
            return !this._$GetParent$_();
        }
        _$IsLocal$_() {
            return !this._$IsGlobal$_();
        }
        _$IsFunctionParameter$_() {
            return this._$_isFunctionParameter$_;
        }
        _$IsStatic$_() {
            return this._$_isStatic$_;
        }
        _$IsConstant$_() {
            return this._$_isConstant$_;
        }
        _$IsNumber$_() {
            return 0 === this._$_type$_;
        }
        _$IsString$_() {
            return 1 === this._$_type$_;
        }
        _$IsBoolean$_() {
            return 2 === this._$_type$_;
        }
        _$IsElseBlock$_() {
            return !1;
        }
        _$GetSID$_() {
            return this._$_sid$_;
        }
        _$GetInitialValue$_() {
            return this._$_initialValue$_;
        }
        _$GetSolModifiers$_() {
            return go;
        }
        _$Run$_(t) {
            !this._$IsLocal$_() || this._$IsStatic$_() || this._$IsConstant$_() || this._$SetValue$_(this._$GetInitialValue$_());
        }
        _$DebugCanRunFast$_() {
            return !0;
        }
        *_$DebugRun$_(t) {
            this._$Run$_(t);
        }
        _$SetValue$_(t) {
            this._$IsNumber$_() ? "number" != typeof t && (t = parseFloat(t)) : this._$IsString$_() ? "string" != typeof t && (t = t.toString()) : this._$IsBoolean$_() && (t = t ? 1 : 0), 
            this._$_hasSingleValue$_ ? this._$_value$_ = t : this._$_localVarStack$_._$GetCurrent$_()[this._$_localIndex$_] = t;
        }
        _$GetValue$_() {
            return this._$_hasSingleValue$_ ? this._$_value$_ : this._$_localVarStack$_._$GetCurrent$_()[this._$_localIndex$_];
        }
        _$GetTypedValue$_() {
            let t = this._$GetValue$_();
            return this._$IsBoolean$_() ? !!t : t;
        }
        _$ResetToInitialValue$_() {
            this._$_value$_ = this._$_initialValue$_;
        }
        _$_GetScriptInterfaceDescriptor$_() {
            return {
                configurable: !1,
                enumerable: !0,
                get: this._$_scriptGetter$_,
                set: this._$_scriptSetter$_
            };
        }
    };
}

{
    const yo = self._$C3$_, Mo = [];
    yo._$EventInclude$_ = class extends yo._$DefendedBase$_ {
        constructor(t, s, i) {
            super();
            const e = t._$GetEventSheetManager$_();
            this._$_eventSheet$_ = t, this._$_eventSheetManager$_ = e, this._$_runtime$_ = t._$GetRuntime$_(), 
            this._$_parent$_ = s, this._$_includeSheet$_ = null, this._$_includeSheetName$_ = i[1], 
            this._$_isActive$_ = !0;
        }
        static _$Create$_(t, s, i) {
            return yo._$New$_(yo._$EventInclude$_, t, s, i);
        }
        _$_PostInit$_() {
            this._$_includeSheet$_ = this._$_eventSheetManager$_._$GetEventSheetByName$_(this._$_includeSheetName$_), 
            this._$_eventSheet$_._$_AddShallowInclude$_(this);
            let t = this._$GetParent$_();
            for (;t; ) t instanceof yo._$EventBlock$_ && t._$IsGroup$_() && t._$_AddContainedInclude$_(this), 
            t = t._$GetParent$_();
            this._$UpdateActive$_(), this._$_runtime$_._$IsDebug$_() && this._$_eventSheet$_._$_GetPerfRecord$_().children.push(this._$_includeSheet$_._$_GetPerfRecord$_());
        }
        _$GetParent$_() {
            return this._$_parent$_;
        }
        _$GetSolModifiers$_() {
            return Mo;
        }
        _$GetIncludeSheet$_() {
            return this._$_includeSheet$_;
        }
        _$Run$_(t) {
            const s = !!this._$GetParent$_(), i = this._$_runtime$_._$GetAllObjectClasses$_();
            s && this._$_eventSheetManager$_._$PushCleanSol$_(i), this._$_includeSheet$_._$Run$_(), 
            s && this._$_eventSheetManager$_._$PopSol$_(i);
        }
        *_$DebugRun$_(t) {
            const s = !!this._$GetParent$_(), i = this._$_runtime$_._$GetAllObjectClasses$_();
            s && this._$_eventSheetManager$_._$PushCleanSol$_(i), yield* this._$_includeSheet$_._$DebugRun$_(), 
            s && this._$_eventSheetManager$_._$PopSol$_(i);
        }
        _$DebugCanRunFast$_() {
            return !1;
        }
        _$IsActive$_() {
            return this._$_isActive$_;
        }
        _$UpdateActive$_() {
            let t = this._$GetParent$_();
            for (;t; ) {
                if (t instanceof yo._$EventBlock$_ && t._$IsGroup$_() && !t._$IsGroupActive$_()) return void (this._$_isActive$_ = !1);
                t = t._$GetParent$_();
            }
            this._$_isActive$_ = !0;
        }
    };
}

{
    let a = function(t, s) {
        return s <= t ? t % s : (t < 0 && (t <= -s && (t %= s), t < 0) && (t += s), 
        t);
    };
    a;
    const wo = self._$C3$_;
    wo._$ExpNode$_ = class extends wo._$DefendedBase$_ {
        constructor(t) {
            super(), this._$_owner$_ = t, this._$_runtime$_ = t._$GetRuntime$_();
        }
        _$_PostInit$_() {}
        static _$CreateNode$_(t, s) {
            const i = s[0], e = [ vo, To, bo, Co, xo, So ];
            return wo._$New$_(e[i], t, s);
        }
    };
    class xo extends wo._$ExpNode$_ {
        constructor(t, s) {
            super(t), this._$_systemPlugin$_ = this._$_runtime$_._$GetSystemPlugin$_(), 
            this._$_func$_ = this._$_runtime$_._$GetObjectReference$_(s[1]), this._$_func$_ !== wo._$Plugins$_._$System$_._$Exps$_.random && this._$_func$_ !== wo._$Plugins$_._$System$_._$Exps$_._$choose$_ || this._$_owner$_._$SetVariesPerInstance$_();
        }
        _$GetBoundMethod$_() {
            return this._$_systemPlugin$_._$_GetBoundACEMethod$_(this._$_func$_, this._$_systemPlugin$_);
        }
    }
    class So extends wo._$ExpNode$_ {
        constructor(t, s) {
            super(t), this._$_functionBlock$_ = null, this._$_functionName$_ = s[1], 
            this._$_owner$_._$SetVariesPerInstance$_();
        }
        _$_PostInit$_() {
            const t = this._$_runtime$_._$GetEventSheetManager$_(), s = (this._$_functionBlock$_ = t._$GetFunctionBlockByName$_(this._$_functionName$_), 
            this._$_functionName$_ = null, this._$_owner$_._$GetEventBlock$_()), i = this._$_functionBlock$_._$GetEventBlock$_();
            this._$_combinedSolModifiers$_ = [ ...new Set([ ...s._$GetSolModifiersIncludingParents$_(), ...i._$GetSolModifiersIncludingParents$_() ]) ], 
            this._$_combinedSolModifiers$_ = t._$_DeduplicateSolModifierList$_(this._$_combinedSolModifiers$_);
        }
        _$GetBoundMethod$_() {
            const t = this._$_functionBlock$_;
            if (t._$IsEnabled$_()) {
                const s = t._$GetEventBlock$_();
                return wo._$EventBlock$_.prototype._$RunAsExpressionFunctionCall$_.bind(s, this._$_combinedSolModifiers$_, t._$IsCopyPicked$_(), t._$GetReturnType$_(), t._$GetDefaultReturnValue$_());
            }
            {
                const i = t._$GetDefaultReturnValue$_();
                return () => i;
            }
        }
    }
    class To extends wo._$ExpNode$_ {
        constructor(t, s) {
            super(t), this._$_objectClass$_ = this._$_runtime$_._$GetObjectClassByIndex$_(s[1]), 
            this._$_func$_ = this._$_runtime$_._$GetObjectReference$_(s[2]), this._$_returnsString$_ = !!s[3], 
            this._$_eventStack$_ = this._$_runtime$_._$GetEventSheetManager$_()._$GetEventStack$_(), 
            this._$_owner$_._$_MaybeVaryFor$_(this._$_objectClass$_);
        }
        _$GetBoundMethod$_() {
            return this._$_objectClass$_._$GetPlugin$_()._$_GetBoundACEMethod$_(this._$_func$_, this._$_objectClass$_._$GetSingleGlobalInstance$_()._$GetSdkInstance$_());
        }
        _$ExpObject$_(...t) {
            const s = this._$_objectClass$_, i = s._$GetCurrentSol$_()._$GetExpressionInstances$_(), e = i.length;
            if (0 === e) return this._$_returnsString$_ ? "" : 0;
            const n = a(this._$_owner$_._$GetSolIndex$_(), e);
            return this._$_eventStack$_._$GetCurrentStackFrame$_()._$SetExpressionObjectClass$_(s), 
            this._$_func$_.apply(i[n]._$GetSdkInstance$_(), t);
        }
        _$ExpObject_InstExpr$_(t, ...s) {
            const i = this._$_objectClass$_, e = i._$GetInstances$_(), n = e.length;
            if (0 === n || "number" != typeof t) return this._$_returnsString$_ ? "" : 0;
            const h = a(t, n);
            return this._$_eventStack$_._$GetCurrentStackFrame$_()._$SetExpressionObjectClass$_(i), 
            this._$_func$_.apply(e[h]._$GetSdkInstance$_(), s);
        }
    }
    class bo extends wo._$ExpNode$_ {
        constructor(t, s) {
            super(t), this._$_objectClass$_ = this._$_runtime$_._$GetObjectClassByIndex$_(s[1]), 
            this._$_varIndex$_ = s[3], this._$_returnsString$_ = !!s[2], this._$_owner$_._$_MaybeVaryFor$_(this._$_objectClass$_);
        }
        _$ExpInstVar$_() {
            const t = this._$_objectClass$_._$GetCurrentSol$_()._$GetExpressionInstances$_(), s = t.length;
            if (0 === s) return this._$_returnsString$_ ? "" : 0;
            const i = a(this._$_owner$_._$GetSolIndex$_(), s);
            return t[i]._$_GetInstanceVariableValueUnchecked$_(this._$_varIndex$_);
        }
        _$ExpInstVar_Family$_() {
            const t = this._$_objectClass$_, s = t._$GetCurrentSol$_()._$GetExpressionInstances$_(), i = s.length;
            if (0 === i) return this._$_returnsString$_ ? "" : 0;
            const e = a(this._$_owner$_._$GetSolIndex$_(), i), n = s[e], h = n._$GetObjectClass$_()._$GetFamilyInstanceVariableOffset$_(t._$GetFamilyIndex$_());
            return n._$_GetInstanceVariableValueUnchecked$_(this._$_varIndex$_ + h);
        }
        _$ExpInstVar_InstExpr$_(t) {
            const s = this._$_objectClass$_, i = s._$GetInstances$_(), e = i.length;
            if (0 === e || "number" != typeof t) return this._$_returnsString$_ ? "" : 0;
            let n = a(t, e), h = i[n], r = 0;
            return s._$IsFamily$_() && (r = h._$GetObjectClass$_()._$GetFamilyInstanceVariableOffset$_(s._$GetFamilyIndex$_())), 
            h._$_GetInstanceVariableValueUnchecked$_(this._$_varIndex$_ + r);
        }
    }
    class vo extends wo._$ExpNode$_ {
        constructor(t, s) {
            super(t), this._$_objectClass$_ = this._$_runtime$_._$GetObjectClassByIndex$_(s[1]), 
            this._$_behaviorType$_ = this._$_objectClass$_._$GetBehaviorTypeByName$_(s[2]), 
            this._$_behaviorIndex$_ = this._$_objectClass$_._$GetBehaviorIndexByName$_(s[2]), 
            this._$_func$_ = this._$_runtime$_._$GetObjectReference$_(s[3]), this._$_returnsString$_ = !!s[4], 
            this._$_eventStack$_ = this._$_runtime$_._$GetEventSheetManager$_()._$GetEventStack$_(), 
            this._$_owner$_._$_MaybeVaryFor$_(this._$_objectClass$_);
        }
        _$ExpBehavior$_(...t) {
            const s = this._$_objectClass$_, i = s._$GetCurrentSol$_()._$GetExpressionInstances$_(), e = i.length;
            if (0 === e) return this._$_returnsString$_ ? "" : 0;
            let n = a(this._$_owner$_._$GetSolIndex$_(), e), h = (this._$_eventStack$_._$GetCurrentStackFrame$_()._$SetExpressionObjectClass$_(s), 
            i[n]), r = 0;
            return s._$IsFamily$_() && (r = h._$GetObjectClass$_()._$GetFamilyBehaviorOffset$_(s._$GetFamilyIndex$_())), 
            this._$_func$_.apply(h._$GetBehaviorInstances$_()[this._$_behaviorIndex$_ + r]._$GetSdkInstance$_(), t);
        }
        _$ExpBehavior_InstExpr$_(t, ...s) {
            const i = this._$_objectClass$_, e = i._$GetInstances$_(), n = e.length;
            if (0 === n || "number" != typeof t) return this._$_returnsString$_ ? "" : 0;
            let h = a(t, n), r = (this._$_eventStack$_._$GetCurrentStackFrame$_()._$SetExpressionObjectClass$_(i), 
            e[h]), o = 0;
            return i._$IsFamily$_() && (o = r._$GetObjectClass$_()._$GetFamilyBehaviorOffset$_(i._$GetFamilyIndex$_())), 
            this._$_func$_.apply(r._$GetBehaviorInstances$_()[this._$_behaviorIndex$_ + o]._$GetSdkInstance$_(), s);
        }
    }
    class Co extends wo._$ExpNode$_ {
        constructor(t, s) {
            super(t), this._$_eventVar$_ = null, this._$_eventVarSid$_ = s[1];
        }
        _$_PostInit$_() {
            this._$_eventVar$_ = this._$_runtime$_._$GetEventSheetManager$_()._$GetEventVariableBySID$_(this._$_eventVarSid$_);
        }
        _$GetVar$_() {
            return this._$_eventVar$_;
        }
    }
}

{
    let h = function(t) {
        const s = self._$C3_ExpressionFuncs$_[t];
        if (s) return s;
        throw new Error("invalid expression number");
    };
    h;
    const Go = self._$C3$_;
    Go._$Parameter$_ = class extends Go._$DefendedBase$_ {
        constructor(t, s, i) {
            super(), this._$_owner$_ = t, this._$_index$_ = i, this._$_type$_ = s, 
            this._$Get$_ = null, this._$_variesPerInstance$_ = !1, this._$_isConstant$_ = !1;
        }
        static _$Create$_(t, s, i) {
            const e = s[0], n = [ Io, _o, Po, No, Ao, Eo, Lo, Io, No, No, Ro, ko, Po, jo, _o, Oo, Do, Fo, zo, Bo, Uo, Wo ];
            return Go._$New$_(n[e], t, e, i, s);
        }
        _$_PostInit$_() {}
        _$SetVariesPerInstance$_() {
            this._$_variesPerInstance$_ = !0;
        }
        _$_MaybeVaryFor$_(t) {
            this._$_variesPerInstance$_ || !t || t._$GetPlugin$_()._$IsSingleGlobal$_() || (this._$_variesPerInstance$_ = !0);
        }
        _$VariesPerInstance$_() {
            return this._$_variesPerInstance$_;
        }
        _$GetIndex$_() {
            return this._$_index$_;
        }
        _$GetRuntime$_() {
            return this._$_owner$_._$GetRuntime$_();
        }
        _$GetEventBlock$_() {
            return this._$_owner$_._$GetEventBlock$_();
        }
        _$IsConstant$_() {
            return this._$_isConstant$_;
        }
        _$IsObjectParameter$_() {
            return 4 === this._$_type$_;
        }
    };
    class Io extends Go._$Parameter$_ {
        constructor(t, s, i, e) {
            super(t, s, i), this._$_solIndex$_ = 0;
            const n = e[1];
            this._$_expressionNumber$_ = n[0], this._$_numberedNodes$_ = [], this._$_expressionFunc$_ = null;
            for (let t = 1, s = n.length; t < s; ++t) this._$_numberedNodes$_.push(Go._$ExpNode$_._$CreateNode$_(this, n[t]));
            this._$_numberedNodes$_.length ? this._$Get$_ = this._$GetExpression$_ : (this._$Get$_ = h(this._$_expressionNumber$_), 
            this._$_isConstant$_ = !0);
        }
        _$_GetNode$_(t) {
            if (t < 0 || t >= this._$_numberedNodes$_.length) throw new RangeError("invalid numbered node");
            return this._$_numberedNodes$_[t];
        }
        _$_PostInit$_() {
            for (const s of this._$_numberedNodes$_) s._$_PostInit$_();
            const t = h(this._$_expressionNumber$_);
            this._$_numberedNodes$_.length ? this._$_expressionFunc$_ = t(this) : this._$_expressionFunc$_ = t;
        }
        _$GetSolIndex$_() {
            return this._$_solIndex$_;
        }
        _$GetExpression$_(t) {
            return this._$_solIndex$_ = t, this._$_expressionFunc$_();
        }
    }
    class _o extends Io {
        constructor(t, s, i, e) {
            super(t, s, i, e), this._$Get$_ = this._$GetStringExpression$_, 14 === s && (this._$GetEventBlock$_()._$SetAllSolModifiers$_(), 
            this._$_owner$_ instanceof Go._$Action$_) && this._$GetEventBlock$_()._$SetSolWriterAfterCnds$_();
        }
        _$GetStringExpression$_(t) {
            this._$_solIndex$_ = t;
            const s = this._$_expressionFunc$_();
            return "string" == typeof s ? s : "";
        }
        _$_GetFastTriggerValue$_() {
            return h(this._$_expressionNumber$_)();
        }
    }
    class Eo extends Io {
        constructor(t, s, i, e) {
            super(t, s, i, e), 2 <= t._$GetImplementationSdkVersion$_() ? this._$Get$_ = this._$GetILayer$_ : this._$Get$_ = this._$GetLayer$_, 
            this._$_isConstant$_ = !1;
        }
        _$GetLayer$_(t) {
            this._$_solIndex$_ = t;
            const s = this._$_expressionFunc$_(), i = this._$GetRuntime$_()._$GetCurrentLayout$_();
            return i._$GetLayer$_(s);
        }
        _$GetILayer$_(t) {
            const s = this._$GetLayer$_(t);
            return s ? s._$GetILayer$_() : null;
        }
    }
    class No extends Go._$Parameter$_ {
        constructor(t, s, i, e) {
            super(t, s, i), this._$_combo$_ = e[1], this._$Get$_ = this._$GetCombo$_, 
            this._$_isConstant$_ = !0;
        }
        _$GetCombo$_() {
            return this._$_combo$_;
        }
    }
    class Do extends Go._$Parameter$_ {
        constructor(t, s, i, e) {
            super(t, s, i), this._$_bool$_ = e[1], this._$Get$_ = this._$GetBoolean$_, 
            this._$_isConstant$_ = !0;
        }
        _$GetBoolean$_() {
            return this._$_bool$_;
        }
    }
    class Ao extends Go._$Parameter$_ {
        constructor(t, s, i, e) {
            super(t, s, i), this._$_objectClass$_ = this._$GetRuntime$_()._$GetObjectClassByIndex$_(e[1]), 
            2 <= t._$GetImplementationSdkVersion$_() ? this._$Get$_ = this._$GetIObjectClass$_ : this._$Get$_ = this._$GetObjectClass$_;
            const n = this._$GetEventBlock$_();
            n._$_AddSolModifier$_(this._$_objectClass$_), this._$_owner$_ instanceof Go._$Action$_ ? n._$SetSolWriterAfterCnds$_() : n._$GetParent$_() && n._$GetParent$_()._$SetSolWriterAfterCnds$_(), 
            this._$_isConstant$_ = !0;
        }
        _$GetObjectClass$_() {
            return this._$_objectClass$_;
        }
        _$GetIObjectClass$_() {
            return this._$_objectClass$_ ? this._$_objectClass$_._$GetIObjectClass$_() : null;
        }
    }
    class Lo extends Go._$Parameter$_ {
        constructor(t, s, i, e) {
            super(t, s, i), this._$_layout$_ = this._$GetRuntime$_()._$GetLayoutManager$_()._$GetLayoutByName$_(e[1]), 
            2 <= t._$GetImplementationSdkVersion$_() ? this._$Get$_ = this._$GetILayout$_ : this._$Get$_ = this._$GetLayout$_, 
            this._$_isConstant$_ = !0;
        }
        _$GetLayout$_() {
            return this._$_layout$_;
        }
        _$GetILayout$_() {
            return this._$_layout$_ ? this._$_layout$_._$GetILayout$_() : null;
        }
    }
    class Oo extends Go._$Parameter$_ {
        constructor(t, s, i, e) {
            super(t, s, i), this._$_timeline$_ = this._$GetRuntime$_()._$GetTimelineManager$_()._$GetTimelineByName$_(e[1]), 
            2 <= t._$GetImplementationSdkVersion$_() ? this._$Get$_ = this._$GetITimelineState$_ : this._$Get$_ = this._$GetTimeline$_, 
            this._$_isConstant$_ = !0;
        }
        _$GetTimeline$_() {
            return this._$_timeline$_;
        }
        _$GetITimelineState$_() {
            return this._$_timeline$_ ? this._$_timeline$_._$GetITimelineState$_() : null;
        }
    }
    class Po extends Go._$Parameter$_ {
        constructor(t, s, i, e) {
            super(t, s, i), this._$_fileInfo$_ = e[1], this._$Get$_ = this._$GetFile$_, 
            this._$_isConstant$_ = !0;
        }
        _$GetFile$_() {
            return this._$_fileInfo$_;
        }
    }
    class Ro extends Go._$Parameter$_ {
        constructor(t, s, i, e) {
            super(t, s, i), this._$_instVarIndex$_ = e[1];
            const n = this._$_owner$_._$GetObjectClass$_();
            this._$_owner$_ instanceof Go._$Condition$_ && this._$_owner$_._$IsStatic$_() || !n || !n._$IsFamily$_() ? (this._$Get$_ = this._$GetInstanceVariable$_, 
            this._$_isConstant$_ = !0) : (this._$Get$_ = this._$GetFamilyInstanceVariable$_, 
            this._$SetVariesPerInstance$_());
        }
        _$GetInstanceVariable$_() {
            return this._$_instVarIndex$_;
        }
        _$GetFamilyInstanceVariable$_(t) {
            t = t || 0;
            let s = this._$_owner$_._$GetObjectClass$_(), i = s._$GetCurrentSol$_(), e = i._$GetInstances$_(), n = null;
            if (e.length) n = e[t % e.length]._$GetObjectClass$_(); else if (i._$HasAnyElseInstances$_()) {
                const h = i._$GetElseInstances$_();
                n = h[t % h.length]._$GetObjectClass$_();
            } else {
                if (!(0 < s._$GetInstanceCount$_())) return 0;
                {
                    const r = s._$GetInstances$_();
                    n = r[t % r.length]._$GetObjectClass$_();
                }
            }
            return this._$_instVarIndex$_ + n._$GetFamilyInstanceVariableOffset$_(s._$GetFamilyIndex$_());
        }
    }
    class ko extends Go._$Parameter$_ {
        constructor(t, s, i, e) {
            super(t, s, i), this._$_eventVarSid$_ = e[1], this._$_eventVar$_ = null, 
            2 <= t._$GetImplementationSdkVersion$_() ? this._$Get$_ = this._$GetIEventVariable$_ : this._$Get$_ = this._$GetEventVariable$_, 
            this._$_isConstant$_ = !0;
        }
        _$_PostInit$_() {
            this._$_eventVar$_ = this._$GetRuntime$_()._$GetEventSheetManager$_()._$GetEventVariableBySID$_(this._$_eventVarSid$_);
        }
        _$GetEventVariable$_() {
            return this._$_eventVar$_;
        }
        _$GetIEventVariable$_() {
            return null;
        }
    }
    class Fo extends Go._$Parameter$_ {
        constructor(t, s, i, e) {
            super(t, s, i), this._$_functionBlockName$_ = e[1], this._$_functionBlock$_ = null, 
            2 <= t._$GetImplementationSdkVersion$_() ? this._$Get$_ = this._$GetIFunction$_ : this._$Get$_ = this._$GetFunction$_, 
            this._$_isConstant$_ = !0;
        }
        _$_PostInit$_() {
            this._$_functionBlock$_ = this._$GetRuntime$_()._$GetEventSheetManager$_()._$GetFunctionBlockByName$_(this._$_functionBlockName$_), 
            this._$_functionBlockName$_ = null;
        }
        _$GetFunction$_() {
            return this._$_functionBlock$_;
        }
        _$GetIFunction$_() {
            return null;
        }
    }
    class jo extends Go._$Parameter$_ {
        constructor(t, s, i, e) {
            super(t, s, i), this._$_subParams$_ = [], this._$_variadicRet$_ = [], 
            this._$_isConstant$_ = !0;
            for (let t = 1, s = e.length; t < s; ++t) {
                const n = Go._$Parameter$_._$Create$_(this._$_owner$_, e[t], 0);
                this._$_subParams$_.push(n), this._$_variadicRet$_.push(0), n._$IsConstant$_() || (this._$_isConstant$_ = !1);
            }
            this._$Get$_ = this._$GetVariadic$_;
        }
        _$_PostInit$_() {
            for (const t of this._$_subParams$_) t._$_PostInit$_();
        }
        _$GetVariadic$_() {
            const i = this._$_subParams$_, e = this._$_variadicRet$_;
            for (let t = 0, s = i.length; t < s; ++t) e[t] = i[t]._$Get$_(0);
            return e;
        }
    }
    class zo extends Go._$Parameter$_ {
        constructor(t, s, i, e) {
            super(t, s, i), this._$_easeIndex$_ = e[1], this._$Get$_ = this._$GetEase$_, 
            this._$_isConstant$_ = !0;
        }
        _$GetEase$_() {
            return this._$_easeIndex$_;
        }
    }
    class Bo extends Go._$Parameter$_ {
        constructor(t, s, i, e) {
            super(t, s, i), this._$_brushIndex$_ = e[1], this._$Get$_ = this._$GetTilemapBrush$_, 
            this._$_isConstant$_ = !0;
        }
        _$GetTilemapBrush$_() {
            return this._$_brushIndex$_;
        }
    }
    class Uo extends Io {
        constructor(t, s, i, e) {
            super(t, s, i, e), this._$Get$_ = this._$GetTemplateName$_, this._$_isConstant$_ = !1;
        }
        _$GetTemplateName$_() {
            return this._$_expressionFunc$_();
        }
    }
    class Wo extends Go._$Parameter$_ {
        constructor(t, s, i, e) {
            super(t, s, i), this._$_flowchartDataItem$_ = this._$GetRuntime$_()._$GetFlowchartManager$_()._$GetFlowchartDataItemByName$_(e[1]), 
            this._$Get$_ = this._$GetFlowchartName$_, this._$_isConstant$_ = !0;
        }
        _$GetFlowchartName$_() {
            return this._$_flowchartDataItem$_._$GetName$_();
        }
    }
}

{
    let e = function(i, e) {
        for (let t = 0, s = i.length; t < s; ++t) e[t] = i[t]._$Get$_(0);
    };
    e;
    const Qo = self._$C3$_, Vo = [], Jo = function() {};
    Qo._$Condition$_ = class extends Qo._$DefendedBase$_ {
        constructor(t, i, s) {
            if (super(), this._$_eventBlock$_ = t, this._$_runtime$_ = t._$GetRuntime$_(), 
            this._$_index$_ = s, this._$_func$_ = this._$_runtime$_._$GetObjectReference$_(i[1]), 
            this._$_isTrigger$_ = 0 < i[3], this._$_isFastTrigger$_ = 2 === i[3], 
            this._$_isLooping$_ = !!i[4], this._$_isInverted$_ = !!i[5], this._$_isStatic$_ = !!i[6], 
            this._$_sid$_ = i[7], this._$_isInOrBlock$_ = this._$_eventBlock$_._$IsOrBlock$_(), 
            this._$_objectClass$_ = null, this._$_behaviorType$_ = null, this._$_behaviorIndex$_ = -1, 
            this._$_systemPlugin$_ = null, this._$Run$_ = Jo, this._$DebugRun$_ = Jo, 
            this._$_parameters$_ = [], this._$_results$_ = [], this._$_anyParamVariesPerInstance$_ = !1, 
            this._$_savedData$_ = null, this._$_unsavedData$_ = null, this._$_debugData$_ = this._$_runtime$_._$IsDebug$_() ? {
                _$isBreakpoint$_: i[8][0],
                _$canDebug$_: i[8][1]
            } : null, -1 === i[0] ? this._$_systemPlugin$_ = this._$_runtime$_._$GetSystemPlugin$_() : (this._$_objectClass$_ = this._$_runtime$_._$GetObjectClassByIndex$_(i[0]), 
            i[2] && (this._$_behaviorType$_ = this._$_objectClass$_._$GetBehaviorTypeByName$_(i[2]), 
            this._$_behaviorIndex$_ = this._$_objectClass$_._$GetBehaviorIndexByName$_(i[2])), 
            this._$_eventBlock$_._$GetParent$_() && this._$_eventBlock$_._$GetParent$_()._$SetSolWriterAfterCnds$_()), 
            10 === i.length) {
                let s = i[9];
                for (let t of s) this._$_parameters$_.push(Qo._$Parameter$_._$Create$_(this, t, this._$_parameters$_.length)), 
                this._$_results$_.push(0);
            }
            0 === this._$_parameters$_.length && (this._$_parameters$_ = Vo, this._$_results$_ = Vo), 
            this._$_eventBlock$_._$GetEventSheetManager$_()._$_RegisterCondition$_(this);
        }
        static _$Create$_(t, s, i) {
            return Qo._$New$_(Qo._$Condition$_, t, s, i);
        }
        _$_PostInit$_() {
            for (const t of this._$_parameters$_) t._$_PostInit$_(), t._$VariesPerInstance$_() && (this._$_anyParamVariesPerInstance$_ = !0);
            this._$_isFastTrigger$_ ? (this._$Run$_ = this._$_RunFastTrigger$_, 
            this._$DebugRun$_ = this._$_DebugRunFastTrigger$_) : this._$_systemPlugin$_ ? (this._$_SetSystemRunMethod$_(), 
            this._$DebugRun$_ = this._$_DebugRunSystem$_) : this._$_objectClass$_._$GetPlugin$_()._$IsSingleGlobal$_() ? (this._$_SetSingleGlobalRunMethod$_(), 
            this._$DebugRun$_ = this._$_DebugRunSingleGlobal$_) : this._$_isStatic$_ ? (this._$Run$_ = this._$_RunStatic$_, 
            this._$DebugRun$_ = this._$_DebugRunStatic$_) : (this._$Run$_ = this._$_RunObject$_, 
            this._$DebugRun$_ = this._$_DebugRunObject$_);
        }
        _$_SetSystemRunMethod$_() {
            const t = this._$_systemPlugin$_, s = this._$_systemPlugin$_;
            this._$_SetRunMethodForBoundFunc$_(t, s, this._$_RunSystem$_);
        }
        _$_SetSingleGlobalRunMethod$_() {
            const t = this._$_objectClass$_._$GetPlugin$_(), s = this._$_objectClass$_._$GetSingleGlobalInstance$_()._$GetSdkInstance$_();
            this._$_SetRunMethodForBoundFunc$_(t, s, this._$_RunSingleGlobal$_);
        }
        _$_SetRunMethodForBoundFunc$_(t, s, i) {
            const e = this._$_func$_, n = this._$_isInverted$_, h = this._$_parameters$_;
            if (0 === h.length) {
                const r = t._$_GetBoundACEMethod$_(e, s);
                n ? this._$Run$_ = function() {
                    return Qo.xor(r(), n);
                } : this._$Run$_ = r;
            } else if (1 === h.length) {
                const o = h[0];
                if (!n && o._$IsConstant$_()) this._$Run$_ = t._$_GetBoundACEMethod_1param$_(e, s, o._$Get$_(0)); else {
                    const a = t._$_GetBoundACEMethod$_(e, s);
                    this._$Run$_ = function() {
                        return Qo.xor(a(o._$Get$_(0)), n);
                    };
                }
            } else if (2 === h.length) {
                const l = h[0], u = h[1];
                if (!n && l._$IsConstant$_() && u._$IsConstant$_()) this._$Run$_ = t._$_GetBoundACEMethod_2params$_(e, s, l._$Get$_(0), u._$Get$_(0)); else {
                    const c = t._$_GetBoundACEMethod$_(e, s);
                    this._$Run$_ = function() {
                        return Qo.xor(c(l._$Get$_(0), u._$Get$_(0)), n);
                    };
                }
            } else if (3 === h.length) {
                const f = h[0], d = h[1], p = h[2];
                if (!n && f._$IsConstant$_() && d._$IsConstant$_() && p._$IsConstant$_()) this._$Run$_ = t._$_GetBoundACEMethod_3params$_(e, s, f._$Get$_(0), d._$Get$_(0), p._$Get$_(0)); else {
                    const m = t._$_GetBoundACEMethod$_(e, s);
                    this._$Run$_ = function() {
                        return Qo.xor(m(f._$Get$_(0), d._$Get$_(0), p._$Get$_(0)), n);
                    };
                }
            } else this._$Run$_ = i;
        }
        _$GetSID$_() {
            return this._$_sid$_;
        }
        _$_GetFunc$_() {
            return this._$_func$_;
        }
        _$GetObjectClass$_() {
            return this._$_objectClass$_;
        }
        _$GetBehaviorType$_() {
            return this._$_behaviorType$_;
        }
        _$GetImplementationAddon$_() {
            return this._$_behaviorType$_ ? this._$_behaviorType$_._$GetBehavior$_() : this._$_objectClass$_ ? this._$_objectClass$_._$GetPlugin$_() : null;
        }
        _$GetImplementationSdkVersion$_() {
            const t = this._$GetImplementationAddon$_();
            return t ? t._$GetSdkVersion$_() : 1;
        }
        _$GetEventBlock$_() {
            return this._$_eventBlock$_;
        }
        _$GetRuntime$_() {
            return this._$_runtime$_;
        }
        _$GetIndex$_() {
            return this._$_index$_;
        }
        _$GetDebugIndex$_() {
            return this._$GetIndex$_();
        }
        _$IsTrigger$_() {
            return this._$_isTrigger$_;
        }
        _$IsFastTrigger$_() {
            return this._$_isFastTrigger$_;
        }
        _$IsInverted$_() {
            return this._$_isInverted$_;
        }
        _$IsLooping$_() {
            return this._$_isLooping$_;
        }
        _$IsStatic$_() {
            return this._$_isStatic$_;
        }
        _$IsBreakpoint$_() {
            return this._$_debugData$_._$isBreakpoint$_;
        }
        _$IsSystemCondition$_() {
            return !!this._$_systemPlugin$_;
        }
        _$IsSystemOrSingleGlobalCondition$_() {
            return this._$IsSystemCondition$_() || this._$_objectClass$_._$GetPlugin$_()._$IsSingleGlobal$_();
        }
        _$GetFirstObjectParameterObjectClass$_() {
            for (const t of this._$_parameters$_) if (t._$IsObjectParameter$_()) return t._$GetObjectClass$_();
            return null;
        }
        _$_SetBreakpoint$_(t) {
            this._$_debugData$_._$isBreakpoint$_ = !!t, this._$_eventBlock$_._$_UpdateCanRunFastRecursive$_();
        }
        _$_DebugReturnsGenerator$_() {
            return this._$_debugData$_._$canDebug$_;
        }
        _$DebugCanRunFast$_() {
            return !this._$IsBreakpoint$_() && !this._$_runtime$_._$DebugBreakNext$_() && !this._$_DebugReturnsGenerator$_();
        }
        _$GetSavedDataMap$_() {
            return this._$_savedData$_ || (this._$_savedData$_ = new Map()), this._$_savedData$_;
        }
        _$GetUnsavedDataMap$_() {
            return this._$_unsavedData$_ || (this._$_unsavedData$_ = new Map()), 
            this._$_unsavedData$_;
        }
        _$_RunSystem$_() {
            const t = this._$_results$_;
            return e(this._$_parameters$_, t), Qo.xor(this._$_func$_.apply(this._$_systemPlugin$_, t), this._$_isInverted$_);
        }
        *_$_DebugRunSystem$_() {
            if ((this._$IsBreakpoint$_() || this._$_runtime$_._$DebugBreakNext$_()) && (yield this), 
            this._$_DebugReturnsGenerator$_()) {
                const s = this._$_results$_;
                e(this._$_parameters$_, s);
                let t = this._$_func$_.apply(this._$_systemPlugin$_, s);
                return Qo._$IsIterator$_(t) && (t = yield* t), Qo.xor(t, this._$_isInverted$_);
            }
            return this._$Run$_();
        }
        _$_RunSingleGlobal$_() {
            const t = this._$_results$_, s = (e(this._$_parameters$_, t), this._$_objectClass$_._$GetSingleGlobalInstance$_()._$GetSdkInstance$_());
            return Qo.xor(this._$_func$_.apply(s, t), this._$_isInverted$_);
        }
        *_$_DebugRunSingleGlobal$_() {
            if ((this._$IsBreakpoint$_() || this._$_runtime$_._$DebugBreakNext$_()) && (yield this), 
            this._$_DebugReturnsGenerator$_()) {
                let t = this._$_results$_, s = (e(this._$_parameters$_, t), this._$_objectClass$_._$GetSingleGlobalInstance$_()._$GetSdkInstance$_()), i = this._$_func$_.apply(s, t);
                return Qo._$IsIterator$_(i) && (i = yield* i), Qo.xor(i, this._$_isInverted$_);
            }
            return this._$Run$_();
        }
        _$_RunFastTrigger$_() {
            return !0;
        }
        *_$_DebugRunFastTrigger$_() {
            return (this._$IsBreakpoint$_() || this._$_runtime$_._$DebugBreakNext$_()) && (yield this), 
            !0;
        }
        _$_GetStaticConditionThis$_() {
            return this._$_behaviorType$_ ? 2 <= this._$_behaviorType$_._$GetBehavior$_()._$GetSdkVersion$_() ? this._$_behaviorType$_._$GetIBehaviorType$_() : this._$_behaviorType$_ : 2 <= this._$_objectClass$_._$GetPlugin$_()._$GetSdkVersion$_() ? this._$_objectClass$_._$GetIObjectClass$_() : this._$_objectClass$_;
        }
        _$_RunStatic$_() {
            const t = this._$_results$_, s = (e(this._$_parameters$_, t), this._$_func$_.apply(this._$_GetStaticConditionThis$_(), t));
            return this._$_objectClass$_._$ApplySolToContainer$_(), s;
        }
        *_$_DebugRunStatic$_() {
            if ((this._$IsBreakpoint$_() || this._$_runtime$_._$DebugBreakNext$_()) && (yield this), 
            this._$_DebugReturnsGenerator$_()) {
                const s = this._$_results$_;
                e(this._$_parameters$_, s);
                let t = this._$_func$_.apply(this._$_GetStaticConditionThis$_(), s);
                return Qo._$IsIterator$_(t) && (t = yield* t), this._$_objectClass$_._$ApplySolToContainer$_(), 
                t;
            }
            return this._$Run$_();
        }
        _$_RunObject$_() {
            const i = this._$_parameters$_, e = this._$_results$_, t = this._$_objectClass$_._$GetCurrentSol$_();
            for (let t = 0, s = i.length; t < s; ++t) {
                const n = i[t];
                n._$VariesPerInstance$_() || (e[t] = n._$Get$_(0));
            }
            return t._$IsSelectAll$_() ? this._$_RunObject_FirstFilter$_(t) : this._$_RunObject_NextFilter$_(t);
        }
        *_$_DebugRunObject$_() {
            return (this._$IsBreakpoint$_() || this._$_runtime$_._$DebugBreakNext$_()) && (yield this), 
            this._$_RunObject$_();
        }
        _$_EvaluateVaryingParameters$_(i) {
            const e = this._$_parameters$_, n = this._$_results$_;
            for (let t = 0, s = e.length; t < s; ++t) {
                const h = e[t];
                h._$VariesPerInstance$_() && (n[t] = h._$Get$_(i));
            }
        }
        _$_RunObject_FirstFilter$_(i) {
            const t = this._$_objectClass$_, e = t._$IsFamily$_(), n = t._$GetFamilyIndex$_(), h = this._$_behaviorIndex$_, r = 0 <= h, o = t._$GetInstances$_(), a = this._$_anyParamVariesPerInstance$_, l = this._$_results$_, u = this._$_func$_, c = this._$_isInverted$_, f = this._$_isInOrBlock$_ && !this._$_isTrigger$_;
            i._$ClearArrays$_();
            for (let s = 0, t = o.length; s < t; ++s) {
                const d = o[s];
                a && this._$_EvaluateVaryingParameters$_(s);
                let t;
                if (r) {
                    const p = e ? d._$GetObjectClass$_()._$GetFamilyBehaviorOffset$_(n) : 0;
                    t = u.apply(d._$GetBehaviorInstances$_()[h + p]._$GetSdkInstance$_(), l);
                } else t = u.apply(d._$GetSdkInstance$_(), l);
                Qo.xor(t, c) ? i._$_PushInstance$_(d) : f && i._$_PushElseInstance$_(d);
            }
            return t._$FinishCondition$_(!0), i._$_SetSelectAll$_(!1), t._$ApplySolToContainer$_(), 
            i._$HasAnyInstances$_();
        }
        _$_RunObject_NextFilter$_(t) {
            let s = this._$_objectClass$_, i = s._$IsFamily$_(), e = s._$GetFamilyIndex$_(), n = s._$IsInContainer$_(), h = this._$_behaviorIndex$_, r = 0 <= h, o = this._$_anyParamVariesPerInstance$_, a = this._$_results$_, l = this._$_func$_, u = this._$_isInverted$_, c = this._$_isInOrBlock$_ && !this._$_isTrigger$_, f = t._$_GetOwnInstances$_(), d = t._$_GetOwnElseInstances$_(), p = c && !this._$_eventBlock$_._$IsFirstConditionOfType$_(this), m = p ? d : f, g = 0, y = !1;
            for (let s = 0, t = m.length; s < t; ++s) {
                const w = m[s];
                o && this._$_EvaluateVaryingParameters$_(s);
                let t;
                if (r) {
                    const x = i ? w._$GetObjectClass$_()._$GetFamilyBehaviorOffset$_(e) : 0;
                    t = l.apply(w._$GetBehaviorInstances$_()[h + x]._$GetSdkInstance$_(), a);
                } else t = l.apply(w._$GetSdkInstance$_(), a);
                Qo.xor(t, u) ? (y = !0, p ? (f.push(w), n && w._$_PushSiblingsToSolInstances$_()) : (m[g] = w, 
                n && w._$_SetSiblingsToSolInstancesIndex$_(g), ++g)) : p ? (m[g] = w, 
                n && w._$_SetSiblingsToSolElseInstancesIndex$_(g), ++g) : c && (d.push(w), 
                n) && w._$_PushSiblingsToSolElseInstances$_();
            }
            Qo._$truncateArray$_(m, g), n && s._$_TruncateContainerSols$_(p, g);
            const M = y;
            return p && !y && (y = this._$_OrBlockCheckInstances$_(f)), s._$FinishCondition$_(M || c), 
            c ? y : t._$HasAnyInstances$_();
        }
        _$_OrBlockCheckInstances$_(i) {
            const t = this._$_objectClass$_, e = t._$IsFamily$_(), n = t._$GetFamilyIndex$_(), h = this._$_anyParamVariesPerInstance$_, r = this._$_behaviorIndex$_, o = 0 <= r, a = this._$_results$_, l = this._$_func$_, u = this._$_isInverted$_;
            for (let s = 0, t = i.length; s < t; ++s) {
                const c = i[s];
                h && this._$_EvaluateVaryingParameters$_(s);
                let t;
                if (o) {
                    const f = e ? c._$GetObjectClass$_()._$GetFamilyBehaviorOffset$_(n) : 0;
                    t = l.apply(c._$GetBehaviorInstances$_()[r + f]._$GetSdkInstance$_(), a);
                } else t = l.apply(c._$GetSdkInstance$_(), a);
                if (Qo.xor(t, u)) return !0;
            }
            return !1;
        }
        _$ReevaluateParameter$_(t, s) {
            return this._$_parameters$_[t]._$Get$_(s);
        }
        _$GetFastTriggerValue$_() {
            const t = this._$_parameters$_;
            if (t.length) return t[0]._$_GetFastTriggerValue$_();
            throw new Error("no parameters");
        }
        _$_SaveToJson$_() {
            if (!this._$_savedData$_ || !this._$_savedData$_.size) return null;
            const s = {};
            for (const [ i, e ] of this._$_savedData$_.entries()) {
                let t = e;
                "collmemory" === i && (t = [ ...e.entries() ].map(t => [ t[0]._$GetUID$_(), t[1]._$GetUID$_(), t[2] ])), 
                s[i] = t;
            }
            return {
                ex: s
            };
        }
        _$_LoadFromJson$_(t) {
            if (this._$_savedData$_ && (this._$_savedData$_.clear(), this._$_savedData$_ = null), 
            t) {
                const s = this._$_runtime$_, i = t.ex;
                if (i) {
                    const e = this._$GetSavedDataMap$_();
                    e.clear();
                    for (const [ n, h ] of Object.entries(i)) {
                        let t = h;
                        "collmemory" === n && (t = Qo._$New$_(Qo._$PairMap$_, h.map(t => [ s._$GetInstanceByUID$_(t[0]), s._$GetInstanceByUID$_(t[1]), t[2] ]).filter(t => t[0] && t[1]))), 
                        e.set(n, t);
                    }
                }
            }
        }
    };
}

{
    let n = function(i, e) {
        for (let t = 0, s = i.length; t < s; ++t) e[t] = i[t]._$Get$_(0);
    };
    n;
    const Yo = self._$C3$_, Ho = [], qo = function() {}, Zo = function*() {};
    Yo._$Action$_ = class extends Yo._$DefendedBase$_ {
        constructor(t, s, i) {
            super();
            const e = (this._$_eventBlock$_ = t)._$GetRuntime$_(), n = (this._$_runtime$_ = e, 
            this._$_index$_ = i, this._$_sid$_ = 4 <= s.length ? s[3] : -1, this._$_actionType$_ = 5 <= s.length ? 255 & s[4] : 0, 
            this._$_flags$_ = 5 <= s.length ? s[4] >> 8 : 0, this._$_func$_ = null, 
            this._$_objectClass$_ = null, this._$_behaviorType$_ = null, this._$_behaviorIndex$_ = -1, 
            this._$_systemPlugin$_ = null, this._$_callFunctionName$_ = "", this._$_callCustomAceObjectClass$_ = null, 
            this._$_callEventBlock$_ = null, this._$Run$_ = qo, this._$DebugRun$_ = qo, 
            this._$_parameters$_ = [], this._$_results$_ = [], this._$_anyParamVariesPerInstance$_ = !1, 
            this._$_savedData$_ = null, this._$_unsavedData$_ = null, -3 === s[0]), h = n ? s[2] : s[5];
            if (this._$_debugData$_ = e._$IsDebug$_() || n ? {
                _$isBreakpoint$_: h[0],
                _$canDebug$_: h[1],
                index: h[2]
            } : null, -1 === s[0]) this._$_systemPlugin$_ = e._$GetSystemPlugin$_(), 
            this._$_func$_ = e._$GetObjectReference$_(s[1]); else if (-2 === s[0]) this._$_callFunctionName$_ = s[1]; else if (n) {
                const r = e._$GetObjectReference$_(s[1]);
                this._$_func$_ = r, this._$Run$_ = this._$RunUserScript$_, this._$DebugRun$_ = this._$DebugRunUserScript$_, 
                this._$_flags$_ |= 8;
            } else this._$_objectClass$_ = e._$GetObjectClassByIndex$_(s[0]), 4 & this._$_flags$_ ? (this._$_callFunctionName$_ = s[1], 
            this._$_callCustomAceObjectClass$_ = e._$GetObjectClassByIndex$_(s[2])) : (s[2] && (this._$_behaviorType$_ = this._$_objectClass$_._$GetBehaviorTypeByName$_(s[2]), 
            this._$_behaviorIndex$_ = this._$_objectClass$_._$GetBehaviorIndexByName$_(s[2])), 
            this._$_func$_ = e._$GetObjectReference$_(s[1]));
            if (7 === s.length) {
                const o = s[6];
                for (const a of o) this._$_parameters$_.push(Yo._$Parameter$_._$Create$_(this, a, this._$_parameters$_.length)), 
                this._$_results$_.push(0);
            }
            0 === this._$_parameters$_.length && (this._$_parameters$_ = Ho, this._$_results$_ = Ho), 
            this._$CanPickAnyObjectClass$_() && (this._$_eventBlock$_._$SetAllSolModifiers$_(), 
            this._$_eventBlock$_._$SetSolWriterAfterCnds$_()), this._$_eventBlock$_._$GetEventSheetManager$_()._$_RegisterAction$_(this);
        }
        static _$Create$_(t, s, i) {
            return Yo._$New$_(Yo._$Action$_, t, s, i);
        }
        _$_PostInit$_() {
            for (const t of this._$_parameters$_) t._$_PostInit$_(), t._$VariesPerInstance$_() && (this._$_anyParamVariesPerInstance$_ = !0);
            if (this._$_systemPlugin$_) this._$_SetSystemRunMethod$_(), this._$DebugRun$_ = this._$_DebugRunSystem$_; else if (this._$_callFunctionName$_) 4 & this._$_flags$_ ? this._$_SetCallCustomActionRunMethod$_() : this._$_SetCallFunctionRunMethod$_(), 
            this._$_callFunctionName$_ = "", this._$_callCustomAceObjectClass$_ = null; else if (this._$Run$_ === this._$RunUserScript$_) {
                const s = this._$_func$_, i = this._$_runtime$_._$GetEventSheetManager$_()._$_GetLocalVariablesScriptInterface$_(this._$_eventBlock$_);
                this._$_func$_ = s.bind(null, this._$_runtime$_._$GetIRuntime$_(), i);
            } else this._$_behaviorType$_ ? this._$IsAsync$_() ? (this._$Run$_ = this._$_RunBehavior_Async$_, 
            this._$DebugRun$_ = this._$_DebugRunBehavior_Async$_) : (this._$Run$_ = this._$_RunBehavior$_, 
            this._$DebugRun$_ = this._$_DebugRunBehavior$_) : this._$_objectClass$_._$GetPlugin$_()._$IsSingleGlobal$_() ? (this._$_SetSingleGlobalRunMethod$_(), 
            this._$DebugRun$_ = this._$_DebugRunSingleGlobal$_) : this._$IsStatic$_() ? (this._$Run$_ = this._$_RunObject_Static$_, 
            this._$DebugRun$_ = this._$_DebugRunObject_Static$_) : this._$IsAsync$_() ? (this._$Run$_ = this._$_RunObject_Async$_, 
            this._$DebugRun$_ = this._$_DebugRunObject_Async$_) : this._$CallBeforeAfterHooks$_() ? (this._$Run$_ = this._$_RunObject_BeforeAfterHooks$_, 
            this._$DebugRun$_ = this._$_DebugRunObject_BeforeAfterHooks$_) : this._$_parameters$_.length ? this._$_parameters$_.every(t => t._$VariesPerInstance$_()) ? (this._$Run$_ = this._$_RunObject_AllParamsVary$_, 
            this._$DebugRun$_ = this._$_DebugRunObject_AllParamsVary$_) : this._$_anyParamVariesPerInstance$_ ? (this._$Run$_ = this._$_RunObject_SomeParamsVary$_, 
            this._$DebugRun$_ = this._$_DebugRunObject_SomeParamsVary$_) : this._$_parameters$_.every(t => t._$IsConstant$_()) ? (n(this._$_parameters$_, this._$_results$_), 
            this._$Run$_ = this._$_RunObject_ParamsConst$_, this._$DebugRun$_ = this._$_DebugRunObject_ParamsConst$_) : (this._$Run$_ = this._$_RunObject_ParamsDontVary$_, 
            this._$DebugRun$_ = this._$_DebugRunObject_ParamsDontVary$_) : (this._$Run$_ = this._$_RunObject_ParamsConst$_, 
            this._$DebugRun$_ = this._$_DebugRunObject_ParamsConst$_);
        }
        _$_SetSystemRunMethod$_() {
            const t = this._$_systemPlugin$_, s = this._$_systemPlugin$_;
            this._$_SetRunMethodForBoundFunc$_(t, s, this._$_RunSystem$_);
        }
        _$_SetSingleGlobalRunMethod$_() {
            const t = this._$_objectClass$_._$GetPlugin$_(), s = this._$_objectClass$_._$GetSingleGlobalInstance$_()._$GetSdkInstance$_();
            this._$_SetRunMethodForBoundFunc$_(t, s, this._$_RunSingleGlobal$_);
        }
        _$_SetCallFunctionRunMethod$_() {
            const t = this._$_eventBlock$_._$GetEventSheetManager$_(), i = t._$GetFunctionBlockByName$_(this._$_callFunctionName$_);
            if (i._$IsEnabled$_()) {
                const e = 0 != (2 & this._$_flags$_);
                this._$_callEventBlock$_ = i._$GetEventBlock$_();
                let s = [ ...new Set([ ...this._$_eventBlock$_._$GetSolModifiersIncludingParents$_(), ...this._$_callEventBlock$_._$GetSolModifiersIncludingParents$_() ]) ];
                s = t._$_DeduplicateSolModifierList$_(s);
                const n = !i._$IsCopyPicked$_() && this._$_HasCopyPickedParent$_() ? {
                    _$pushCleanSolDynamic$_: !0
                } : null;
                if (this._$Run$_ = Yo._$EventBlock$_.prototype._$RunAsFunctionCall$_.bind(this._$_callEventBlock$_, s, this._$_parameters$_, e, n), 
                this._$_runtime$_._$IsDebug$_()) {
                    const h = this;
                    this._$DebugRun$_ = function*() {
                        (h._$IsBreakpoint$_() || h._$_runtime$_._$DebugBreakNext$_()) && (yield h);
                        const t = yield* h._$_callEventBlock$_._$DebugRunAsFunctionCall$_(s, h._$_parameters$_, e, n);
                        return t;
                    };
                } else this._$DebugRun$_ = Zo;
            } else this._$Run$_ = qo, this._$DebugRun$_ = Zo;
        }
        _$_SetCallCustomActionRunMethod$_() {
            const h = this._$_eventBlock$_._$GetEventSheetManager$_(), r = h._$GetCustomActionBlockByName$_(this._$_callCustomAceObjectClass$_, this._$_callFunctionName$_);
            if (r._$IsEnabled$_()) {
                const o = 0 != (2 & this._$_flags$_);
                this._$_callEventBlock$_ = r._$GetEventBlock$_();
                let s = [ ...new Set([ ...this._$_eventBlock$_._$GetSolModifiersIncludingParents$_(), ...this._$_callEventBlock$_._$GetSolModifiersIncludingParents$_(), this._$_objectClass$_, r._$GetObjectClass$_() ]) ], t = (s = h._$_DeduplicateSolModifierList$_(s), 
                !this._$_objectClass$_._$IsFamily$_() && !r._$GetObjectClass$_()._$IsFamily$_()), i = !this._$_objectClass$_._$IsFamily$_() && r._$GetObjectClass$_()._$IsFamily$_(), e = this._$_objectClass$_._$IsFamily$_(), n = null;
                if (!r._$IsCopyPicked$_() && this._$_HasCopyPickedParent$_() && ((n = n || {})._$pushCleanSolDynamic$_ = !0), 
                !i && o || ((n = n || {})._$copyFromObjectClass$_ = this._$_objectClass$_, 
                n._$copyToObjectClass$_ = r._$GetObjectClass$_()), t || i || e && !r._$HasCustomACEOverrides$_() ? this._$Run$_ = Yo._$EventBlock$_.prototype._$RunAsFunctionCall$_.bind(this._$_callEventBlock$_, s, this._$_parameters$_, o, n) : e && (this._$Run$_ = Yo._$FunctionBlock$_.prototype._$RunAsFamilyCustomActionWithOverrides$_.bind(r, s, this._$_parameters$_)), 
                this._$_runtime$_._$IsDebug$_()) {
                    const a = this;
                    t || i || e && !r._$HasCustomACEOverrides$_() ? this._$DebugRun$_ = function*() {
                        (a._$IsBreakpoint$_() || a._$_runtime$_._$DebugBreakNext$_()) && (yield a);
                        const t = yield* a._$_callEventBlock$_._$DebugRunAsFunctionCall$_(s, a._$_parameters$_, o, n);
                        return t;
                    } : e && (this._$DebugRun$_ = function*() {
                        (a._$IsBreakpoint$_() || a._$_runtime$_._$DebugBreakNext$_()) && (yield a);
                        const t = yield* r._$DebugRunAsFamilyCustomActionWithOverrides$_(s, a._$_parameters$_);
                        return t;
                    });
                } else this._$DebugRun$_ = Zo;
            } else this._$Run$_ = qo, this._$DebugRun$_ = Zo;
        }
        _$_SetRunMethodForBoundFunc$_(t, s, i) {
            const e = this._$_func$_, n = this._$_parameters$_;
            if (0 === n.length) this._$Run$_ = t._$_GetBoundACEMethod$_(e, s); else if (1 === n.length) {
                const h = n[0];
                if (h._$IsConstant$_()) this._$Run$_ = t._$_GetBoundACEMethod_1param$_(e, s, h._$Get$_(0)); else {
                    const r = t._$_GetBoundACEMethod$_(e, s);
                    this._$Run$_ = function() {
                        return r(h._$Get$_(0));
                    };
                }
            } else if (2 === n.length) {
                const o = n[0], a = n[1];
                if (o._$IsConstant$_() && a._$IsConstant$_()) this._$Run$_ = t._$_GetBoundACEMethod_2params$_(e, s, o._$Get$_(0), a._$Get$_(0)); else {
                    const l = t._$_GetBoundACEMethod$_(e, s);
                    this._$Run$_ = function() {
                        return l(o._$Get$_(0), a._$Get$_(0));
                    };
                }
            } else if (3 === n.length) {
                const u = n[0], c = n[1], f = n[2];
                if (u._$IsConstant$_() && c._$IsConstant$_() && f._$IsConstant$_()) this._$Run$_ = t._$_GetBoundACEMethod_3params$_(e, s, u._$Get$_(0), c._$Get$_(0), f._$Get$_(0)); else {
                    const d = t._$_GetBoundACEMethod$_(e, s);
                    this._$Run$_ = function() {
                        return d(u._$Get$_(0), c._$Get$_(0), f._$Get$_(0));
                    };
                }
            } else this._$Run$_ = i;
        }
        _$GetSID$_() {
            return this._$_sid$_;
        }
        _$IsAsync$_() {
            return 0 != (8 & this._$_flags$_);
        }
        _$CanBailOut$_() {
            return 0 != (16 & this._$_flags$_);
        }
        _$CallBeforeAfterHooks$_() {
            return 1 === this._$_actionType$_;
        }
        _$IsStatic$_() {
            return 2 === this._$_actionType$_;
        }
        _$CanPickAnyObjectClass$_() {
            return 0 != (1 & this._$_flags$_);
        }
        _$HasReturnType$_() {
            return this._$IsAsync$_() || this._$CanBailOut$_();
        }
        _$GetObjectClass$_() {
            return this._$_objectClass$_;
        }
        _$GetImplementationAddon$_() {
            return this._$_behaviorType$_ ? this._$_behaviorType$_._$GetBehavior$_() : this._$_objectClass$_ ? this._$_objectClass$_._$GetPlugin$_() : null;
        }
        _$GetImplementationSdkVersion$_() {
            const t = this._$GetImplementationAddon$_();
            return t ? t._$GetSdkVersion$_() : 1;
        }
        _$GetEventBlock$_() {
            return this._$_eventBlock$_;
        }
        _$_HasCopyPickedParent$_() {
            let t = this._$_eventBlock$_;
            do {
                if (t instanceof Yo._$FunctionBlock$_ && t._$IsCopyPicked$_()) return !0;
            } while (t = t._$GetScopeParent$_());
            return !1;
        }
        _$GetRuntime$_() {
            return this._$_runtime$_;
        }
        _$GetIndex$_() {
            return this._$_index$_;
        }
        _$GetDebugIndex$_() {
            return this._$_debugData$_.index;
        }
        _$IsBreakpoint$_() {
            return this._$_debugData$_._$isBreakpoint$_;
        }
        _$_SetBreakpoint$_(t) {
            this._$_debugData$_._$isBreakpoint$_ = !!t, this._$_eventBlock$_._$_UpdateCanRunFastRecursive$_();
        }
        _$_DebugReturnsGenerator$_() {
            return this._$_debugData$_._$canDebug$_;
        }
        _$DebugCanRunFast$_() {
            return !this._$IsBreakpoint$_() && !this._$_runtime$_._$DebugBreakNext$_() && !this._$_DebugReturnsGenerator$_();
        }
        _$GetSavedDataMap$_() {
            return this._$_savedData$_ || (this._$_savedData$_ = new Map()), this._$_savedData$_;
        }
        _$GetUnsavedDataMap$_() {
            return this._$_unsavedData$_ || (this._$_unsavedData$_ = new Map()), 
            this._$_unsavedData$_;
        }
        _$_RunSystem$_() {
            const t = this._$_results$_;
            return n(this._$_parameters$_, t), this._$_func$_.apply(this._$_systemPlugin$_, t);
        }
        *_$_DebugRunSystem$_() {
            if ((this._$IsBreakpoint$_() || this._$_runtime$_._$DebugBreakNext$_()) && (yield this), 
            this._$_DebugReturnsGenerator$_()) {
                const t = this._$_results$_, s = (n(this._$_parameters$_, t), yield* this._$_func$_.apply(this._$_systemPlugin$_, t));
                return s;
            }
            return this._$Run$_();
        }
        _$_RunSingleGlobal$_() {
            const t = this._$_results$_;
            return n(this._$_parameters$_, t), this._$_func$_.apply(this._$_objectClass$_._$GetSingleGlobalInstance$_()._$GetSdkInstance$_(), t);
        }
        *_$_DebugRunSingleGlobal$_() {
            if ((this._$IsBreakpoint$_() || this._$_runtime$_._$DebugBreakNext$_()) && (yield this), 
            this._$_DebugReturnsGenerator$_()) {
                const t = this._$_results$_, s = (n(this._$_parameters$_, t), yield* this._$_func$_.apply(this._$_objectClass$_._$GetSingleGlobalInstance$_()._$GetSdkInstance$_(), t));
                return s;
            }
            return this._$Run$_();
        }
        _$_RunObject_ParamsConst$_() {
            const i = this._$_results$_, e = this._$_objectClass$_._$GetCurrentSol$_()._$GetInstances$_();
            for (let t = 0, s = e.length; t < s; ++t) this._$_func$_.apply(e[t]._$GetSdkInstance$_(), i);
        }
        *_$_DebugRunObject_ParamsConst$_() {
            if ((this._$IsBreakpoint$_() || this._$_runtime$_._$DebugBreakNext$_()) && (yield this), 
            this._$_DebugReturnsGenerator$_()) {
                const i = this._$_results$_, e = this._$_objectClass$_._$GetCurrentSol$_()._$GetInstances$_();
                for (let t = 0, s = e.length; t < s; ++t) yield* this._$_func$_.apply(e[t]._$GetSdkInstance$_(), i);
            } else this._$_RunObject_ParamsConst$_();
        }
        _$_RunObject_ParamsDontVary$_() {
            const i = this._$_results$_, e = (n(this._$_parameters$_, i), this._$_objectClass$_._$GetCurrentSol$_()._$GetInstances$_());
            for (let t = 0, s = e.length; t < s; ++t) this._$_func$_.apply(e[t]._$GetSdkInstance$_(), i);
        }
        *_$_DebugRunObject_ParamsDontVary$_() {
            if ((this._$IsBreakpoint$_() || this._$_runtime$_._$DebugBreakNext$_()) && (yield this), 
            this._$_DebugReturnsGenerator$_()) {
                const i = this._$_results$_, e = (n(this._$_parameters$_, i), this._$_objectClass$_._$GetCurrentSol$_()._$GetInstances$_());
                for (let t = 0, s = e.length; t < s; ++t) yield* this._$_func$_.apply(e[t]._$GetSdkInstance$_(), i);
            } else this._$_RunObject_ParamsDontVary$_();
        }
        _$_RunObject_AllParamsVary$_() {
            const e = this._$_parameters$_, n = this._$_results$_, s = this._$_func$_, h = this._$_objectClass$_._$GetCurrentSol$_()._$GetInstances$_();
            for (let i = 0, t = h.length; i < t; ++i) {
                const r = h[i];
                for (let t = 0, s = e.length; t < s; ++t) n[t] = e[t]._$Get$_(i);
                s.apply(r._$GetSdkInstance$_(), n);
            }
        }
        *_$_DebugRunObject_AllParamsVary$_() {
            if ((this._$IsBreakpoint$_() || this._$_runtime$_._$DebugBreakNext$_()) && (yield this), 
            this._$_DebugReturnsGenerator$_()) {
                const e = this._$_parameters$_, n = this._$_results$_, s = this._$_func$_, h = this._$_objectClass$_._$GetCurrentSol$_()._$GetInstances$_();
                for (let i = 0, t = h.length; i < t; ++i) {
                    const r = h[i];
                    for (let t = 0, s = e.length; t < s; ++t) n[t] = e[t]._$Get$_(i);
                    yield* s.apply(r._$GetSdkInstance$_(), n);
                }
            } else this._$_RunObject_AllParamsVary$_();
        }
        _$_RunObject_SomeParamsVary$_() {
            const e = this._$_parameters$_, n = this._$_results$_, s = this._$_func$_, h = this._$_objectClass$_._$GetCurrentSol$_()._$GetInstances$_();
            for (let t = 0, s = e.length; t < s; ++t) {
                const i = e[t];
                i._$VariesPerInstance$_() || (n[t] = i._$Get$_(0));
            }
            for (let i = 0, t = h.length; i < t; ++i) {
                const r = h[i];
                for (let t = 0, s = e.length; t < s; ++t) {
                    const o = e[t];
                    o._$VariesPerInstance$_() && (n[t] = o._$Get$_(i));
                }
                s.apply(r._$GetSdkInstance$_(), n);
            }
        }
        *_$_DebugRunObject_SomeParamsVary$_() {
            if ((this._$IsBreakpoint$_() || this._$_runtime$_._$DebugBreakNext$_()) && (yield this), 
            this._$_DebugReturnsGenerator$_()) {
                const e = this._$_parameters$_, n = this._$_results$_, s = this._$_func$_, h = this._$_objectClass$_._$GetCurrentSol$_()._$GetInstances$_();
                for (let t = 0, s = e.length; t < s; ++t) {
                    const i = e[t];
                    i._$VariesPerInstance$_() || (n[t] = i._$Get$_(0));
                }
                for (let i = 0, t = h.length; i < t; ++i) {
                    const r = h[i];
                    for (let t = 0, s = e.length; t < s; ++t) {
                        const o = e[t];
                        o._$VariesPerInstance$_() && (n[t] = o._$Get$_(i));
                    }
                    yield* s.apply(r._$GetSdkInstance$_(), n);
                }
            } else this._$_RunObject_SomeParamsVary$_();
        }
        _$_RunObject_BeforeAfterHooks$_() {
            const e = this._$_parameters$_, n = this._$_results$_, s = this._$_func$_, t = this._$_objectClass$_, i = t._$GetSdkType$_(), h = t._$GetCurrentSol$_()._$GetInstances$_();
            i._$BeforeRunAction$_(s);
            for (let i = 0, t = h.length; i < t; ++i) {
                const r = h[i];
                for (let t = 0, s = e.length; t < s; ++t) n[t] = e[t]._$Get$_(i);
                s.apply(r._$GetSdkInstance$_(), n);
            }
            i._$AfterRunAction$_(s);
        }
        *_$_DebugRunObject_BeforeAfterHooks$_() {
            if ((this._$IsBreakpoint$_() || this._$_runtime$_._$DebugBreakNext$_()) && (yield this), 
            this._$_DebugReturnsGenerator$_()) {
                const e = this._$_parameters$_, n = this._$_results$_, s = this._$_func$_, t = this._$_objectClass$_, i = t._$GetSdkType$_(), h = t._$GetCurrentSol$_()._$GetInstances$_();
                i._$BeforeRunAction$_(s);
                for (let i = 0, t = h.length; i < t; ++i) {
                    const r = h[i];
                    for (let t = 0, s = e.length; t < s; ++t) n[t] = e[t]._$Get$_(i);
                    yield* s.apply(r._$GetSdkInstance$_(), n);
                }
                i._$AfterRunAction$_(s);
            } else this._$_RunObject_BeforeAfterHooks$_();
        }
        _$_GetStaticActionThis$_() {
            return this._$_behaviorType$_ ? 2 <= this._$_behaviorType$_._$GetBehavior$_()._$GetSdkVersion$_() ? this._$_behaviorType$_._$GetIBehaviorType$_() : this._$_behaviorType$_ : 2 <= this._$_objectClass$_._$GetPlugin$_()._$GetSdkVersion$_() ? this._$_objectClass$_._$GetIObjectClass$_() : this._$_objectClass$_;
        }
        _$_RunObject_Static$_() {
            const t = this._$_results$_;
            return n(this._$_parameters$_, t), this._$_func$_.apply(this._$_GetStaticActionThis$_(), t);
        }
        *_$_DebugRunObject_Static$_() {
            if ((this._$IsBreakpoint$_() || this._$_runtime$_._$DebugBreakNext$_()) && (yield this), 
            this._$_DebugReturnsGenerator$_()) {
                const s = this._$_results$_;
                n(this._$_parameters$_, s);
                let t = this._$_func$_.apply(this._$_GetStaticActionThis$_(), s);
                return Yo._$IsIterator$_(t) ? yield* t : t;
            }
            return this._$_RunObject_Static$_();
        }
        _$_RunBehavior$_() {
            const t = this._$_objectClass$_, s = t._$IsFamily$_(), e = t._$GetFamilyIndex$_(), n = this._$_parameters$_, h = this._$_anyParamVariesPerInstance$_, r = this._$_results$_, o = this._$_func$_, a = this._$_behaviorIndex$_, l = t._$GetCurrentSol$_()._$GetInstances$_();
            for (let t = 0, s = n.length; t < s; ++t) {
                const i = n[t];
                i._$VariesPerInstance$_() || (r[t] = i._$Get$_(0));
            }
            for (let i = 0, t = l.length; i < t; ++i) {
                const u = l[i];
                if (h) for (let t = 0, s = n.length; t < s; ++t) {
                    const f = n[t];
                    f._$VariesPerInstance$_() && (r[t] = f._$Get$_(i));
                }
                const c = s ? u._$GetObjectClass$_()._$GetFamilyBehaviorOffset$_(e) : 0;
                o.apply(u._$GetBehaviorInstances$_()[a + c]._$GetSdkInstance$_(), r);
            }
        }
        *_$_DebugRunBehavior$_() {
            if ((this._$IsBreakpoint$_() || this._$_runtime$_._$DebugBreakNext$_()) && (yield this), 
            this._$_DebugReturnsGenerator$_()) {
                const t = this._$_objectClass$_, s = t._$IsFamily$_(), e = t._$GetFamilyIndex$_(), n = this._$_parameters$_, h = this._$_anyParamVariesPerInstance$_, r = this._$_results$_, o = this._$_func$_, a = this._$_behaviorIndex$_, l = t._$GetCurrentSol$_()._$GetInstances$_();
                for (let t = 0, s = n.length; t < s; ++t) {
                    const i = n[t];
                    i._$VariesPerInstance$_() || (r[t] = i._$Get$_(0));
                }
                for (let i = 0, t = l.length; i < t; ++i) {
                    const u = l[i];
                    if (h) for (let t = 0, s = n.length; t < s; ++t) {
                        const f = n[t];
                        f._$VariesPerInstance$_() && (r[t] = f._$Get$_(i));
                    }
                    const c = s ? u._$GetObjectClass$_()._$GetFamilyBehaviorOffset$_(e) : 0;
                    yield* o.apply(u._$GetBehaviorInstances$_()[a + c]._$GetSdkInstance$_(), r);
                }
            } else this._$_RunBehavior$_();
        }
        _$_RunObject_Async$_() {
            const e = this._$_parameters$_, n = this._$_results$_, s = this._$_func$_, h = this._$_objectClass$_._$GetCurrentSol$_()._$GetInstances$_(), r = [];
            for (let i = 0, t = h.length; i < t; ++i) {
                const o = h[i];
                for (let t = 0, s = e.length; t < s; ++t) n[t] = e[t]._$Get$_(i);
                r.push(s.apply(o._$GetSdkInstance$_(), n));
            }
            return Promise.all(r);
        }
        *_$_DebugRunObject_Async$_() {
            if ((this._$IsBreakpoint$_() || this._$_runtime$_._$DebugBreakNext$_()) && (yield this), 
            this._$_DebugReturnsGenerator$_()) {
                const e = this._$_parameters$_, n = this._$_results$_, s = this._$_func$_, h = this._$_objectClass$_._$GetCurrentSol$_()._$GetInstances$_(), r = [];
                for (let i = 0, t = h.length; i < t; ++i) {
                    const o = h[i];
                    for (let t = 0, s = e.length; t < s; ++t) n[t] = e[t]._$Get$_(i);
                    r.push(yield* s.apply(o._$GetSdkInstance$_(), n));
                }
                return Promise.all(r);
            }
            return this._$_RunObject_Async$_();
        }
        _$_RunBehavior_Async$_() {
            const t = this._$_objectClass$_, s = t._$IsFamily$_(), e = t._$GetFamilyIndex$_(), n = this._$_parameters$_, h = this._$_results$_, r = this._$_func$_, o = this._$_behaviorIndex$_, a = t._$GetCurrentSol$_()._$GetInstances$_(), l = [];
            for (let i = 0, t = a.length; i < t; ++i) {
                const u = a[i];
                for (let t = 0, s = n.length; t < s; ++t) h[t] = n[t]._$Get$_(i);
                const c = s ? u._$GetObjectClass$_()._$GetFamilyBehaviorOffset$_(e) : 0;
                l.push(r.apply(u._$GetBehaviorInstances$_()[o + c]._$GetSdkInstance$_(), h));
            }
            return Promise.all(l);
        }
        *_$_DebugRunBehavior_Async$_() {
            if ((this._$IsBreakpoint$_() || this._$_runtime$_._$DebugBreakNext$_()) && (yield this), 
            this._$_DebugReturnsGenerator$_()) {
                const t = this._$_objectClass$_, s = t._$IsFamily$_(), e = t._$GetFamilyIndex$_(), n = this._$_parameters$_, h = this._$_results$_, r = this._$_func$_, o = this._$_behaviorIndex$_, a = t._$GetCurrentSol$_()._$GetInstances$_(), l = [];
                for (let i = 0, t = a.length; i < t; ++i) {
                    const u = a[i];
                    for (let t = 0, s = n.length; t < s; ++t) h[t] = n[t]._$Get$_(i);
                    const c = s ? u._$GetObjectClass$_()._$GetFamilyBehaviorOffset$_(e) : 0;
                    l.push(yield* r.apply(u._$GetBehaviorInstances$_()[o + c]._$GetSdkInstance$_(), h));
                }
                return Promise.all(l);
            }
            return this._$_RunBehavior_Async$_();
        }
        async _$RunUserScript$_() {
            try {
                await this._$_func$_();
            } catch (t) {
                console.error(`Unhandled exception running script %c${this._$_eventBlock$_._$GetEventSheet$_()._$GetName$_()}, event ${this._$_eventBlock$_._$GetDisplayNumber$_()}, action ${this._$GetDebugIndex$_() + 1}:`, "font-size: 1.2em; font-weight: bold;", t), 
                self.C3Debugger && self.C3Debugger._SetLastErrorScript(this), Yo._$EventScript$_._$HadUserScriptException$_() || (console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()", "font-weight: bold; text-decoration: underline", "", "font-weight: bold"), 
                Yo._$EventScript$_._$SetHadUserScriptException$_());
            }
        }
        *_$DebugRunUserScript$_() {
            return (this._$IsBreakpoint$_() || this._$_runtime$_._$DebugBreakNext$_()) && (yield this), 
            this._$RunUserScript$_();
        }
        _$_SaveToJson$_() {
            return this._$_savedData$_ && this._$_savedData$_.size ? {
                ex: Yo._$ToSuperJSON$_(this._$_savedData$_)
            } : null;
        }
        _$_LoadFromJson$_(t) {
            if (this._$_savedData$_ && (this._$_savedData$_.clear(), this._$_savedData$_ = null), 
            t) {
                const s = t.ex;
                s && (this._$_savedData$_ = Yo._$FromSuperJSON$_(s));
            }
        }
    };
}

{
    let d = function(t) {
        return t instanceof o ? M._$_UnwrapScriptInterface$_(t) : t._$GetInstance$_();
    }, u = function(t) {
        return d(t)._$GetWorldInfo$_();
    }, n = function(t) {
        return M._$_UnwrapScriptInterface$_(t);
    }, m = function(t) {
        return t instanceof a ? M._$_UnwrapScriptInterface$_(t) : t;
    }, s = function(t) {
        return t instanceof c ? M._$_UnwrapScriptInterface$_(t) : t;
    }, _ = function(t, s, i, e) {
        const n = s._$GetUID$_(), h = i._$GetUID$_();
        n < h ? t.Set(s, i, e) : t.Set(i, s, e);
    }, E = function(t, s, i) {
        const e = s._$GetUID$_(), n = i._$GetUID$_();
        e < n ? t._$Delete$_(s, i) : t._$Delete$_(i, s);
    }, N = function(t, s) {
        t._$DeleteEither$_(s);
    }, D = function(t, s, i) {
        const e = s._$GetUID$_(), n = i._$GetUID$_();
        return e < n ? t._$Get$_(s, i) : t._$Get$_(i, s);
    }, e = function(t, s, i, e) {
        if (!s) return !1;
        const n = 0 !== i || 0 !== e, h = t._$GetWorldInfo$_(), r = M._$GetCollisionEngine$_(), o = M._$GetCurrentCondition$_(), a = o._$GetEventBlock$_()._$IsOrBlock$_(), l = o._$GetObjectClass$_(), u = o._$IsInverted$_(), c = s._$GetCurrentSol$_(), f = l !== s;
        G = s, C = f && !u;
        let d, p = 0, m = 0, g = I = !1;
        c._$IsSelectAll$_() ? (w._$copy$_(h._$GetBoundingBox$_()), w.offset(i, e), 
        r._$GetCollisionCandidates$_(h._$GetLayer$_(), s, w, x), d = x) : !a || M._$IsCurrentConditionFirst$_() && !c._$_GetOwnElseInstances$_().length && c._$_GetOwnInstances$_().length ? d = c._$_GetOwnInstances$_() : (d = c._$_GetOwnElseInstances$_(), 
        I = !0), n && (p = h._$GetX$_(), m = h._$GetY$_(), h._$OffsetXY$_(i, e), 
        h._$SetBboxChanged$_());
        for (const y of d) if (r._$TestOverlap$_(t, y)) {
            if (g = !0, u) break;
            f && O.add(y);
        }
        return n && (h._$SetXY$_(p, m), h._$SetBboxChanged$_()), A._$clearArray$_(x), 
        g;
    }, i = function(t) {
        const s = M._$GetCurrentEvent$_()._$IsOrBlock$_(), i = G._$GetCurrentSol$_(), e = i._$_GetOwnInstances$_(), n = i._$_GetOwnElseInstances$_();
        i._$IsSelectAll$_() ? (i._$SetSetPicked$_(O), s && (A._$clearArray$_(n), 
        i._$AddElseInstances$_(O, G._$GetInstances$_()))) : s ? I ? i._$TransferElseInstancesToOwn$_(O) : (i._$AddElseInstances$_(O, e), 
        i._$SetSetPicked$_(O)) : i._$SetSetPicked$_(O), G._$ApplySolToContainer$_();
    }, S = function(t, s) {
        C && (s && i(), O.clear(), G = null, C = !1);
    }, h = function(t, s) {
        const i = M._$GetInstanceByUID$_(s);
        if (i) {
            const e = t._$GetCurrentSol$_();
            if (e._$IsSelectAll$_() || e._$_GetOwnInstances$_().includes(i)) if (t._$IsFamily$_()) {
                if (i._$GetObjectClass$_()._$BelongsToFamily$_(t)) return e._$PickOne$_(i), 
                t._$ApplySolToContainer$_(), !0;
            } else if (i._$GetObjectClass$_() === t) return e._$PickOne$_(i), t._$ApplySolToContainer$_(), 
            !0;
        }
        return !1;
    }, r = function(t, n) {
        const h = t._$GetCurrentSol$_();
        if (h._$IsSelectAll$_()) {
            h._$_SetSelectAll$_(!1), h._$ClearArrays$_();
            const i = t._$GetInstances$_();
            for (let t = 0, s = i.length; t < s; ++t) {
                const e = i[t];
                e._$GetUID$_() === n ? h._$_PushElseInstance$_(e) : h._$_PushInstance$_(e);
            }
            return t._$ApplySolToContainer$_(), !!h._$_GetOwnInstances$_().length;
        }
        {
            let i = h._$_GetOwnInstances$_(), e = 0;
            for (let t = 0, s = i.length; t < s; ++t) {
                const r = i[t];
                (i[e] = r)._$GetUID$_() === n ? h._$_PushElseInstance$_(r) : ++e;
            }
            return A._$truncateArray$_(i, e), t._$ApplySolToContainer$_(), !!i.length;
        }
    }, A = (d, u, n, m, s, _, E, N, D, e, i, S, h, r, self._$C3$_), l = new A._$Color$_(), T = {}, b = {}, v = {}, M = null, o = (A._$CommonACES_SetRuntime$_ = function(t) {
        M = t;
    }, self._$IInstance$_), a = self._$IObjectClass$_, c = self._$ILayer$_, w = (b._$CompareX$_ = function(t, s) {
        return A.compare(this._$GetWorldInfo$_()._$GetX$_(), t, s);
    }, v._$CompareX$_ = function(t, s) {
        return A.compare(this.x, t, s);
    }, b._$CompareY$_ = function(t, s) {
        return A.compare(this._$GetWorldInfo$_()._$GetY$_(), t, s);
    }, v._$CompareY$_ = function(t, s) {
        return A.compare(this.y, t, s);
    }, b._$IsOnScreen$_ = function() {
        return this._$GetWorldInfo$_()._$IsInViewport2$_();
    }, v._$IsOnScreen$_ = function() {
        return this._$isOnScreen$_();
    }, T._$IsOutsideLayout$_ = function() {
        const t = u(this), s = t._$GetLayout$_(), i = t._$GetBoundingBox$_();
        return i._$getRight$_() < 0 || i._$getBottom$_() < 0 || i._$getLeft$_() > s._$GetWidth$_() || i._$getTop$_() > s._$GetHeight$_();
    }, T._$PickDistance$_ = function(i, e, n) {
        const t = m(this), s = t._$GetCurrentSol$_(), h = s._$GetInstances$_();
        if (!h.length) return !1;
        let r = h[0], o = r._$GetWorldInfo$_(), a = r, l = A._$distanceSquared$_(o._$GetX$_(), o._$GetY$_(), e, n);
        for (let t = 1, s = h.length; t < s; ++t) {
            r = h[t], o = r._$GetWorldInfo$_();
            const u = A._$distanceSquared$_(o._$GetX$_(), o._$GetY$_(), e, n);
            (0 === i && u < l || 1 === i && u > l) && (l = u, a = r);
        }
        return s._$PickOne$_(a), !0;
    }, b._$SetX$_ = function(t) {
        const s = this._$GetWorldInfo$_();
        s._$GetX$_() !== t && (s._$SetX$_(t), s._$SetBboxChanged$_());
    }, v._$SetX$_ = function(t) {
        this.x = +t;
    }, b._$SetY$_ = function(t) {
        const s = this._$GetWorldInfo$_();
        s._$GetY$_() !== t && (s._$SetY$_(t), s._$SetBboxChanged$_());
    }, v._$SetY$_ = function(t) {
        this.y = +t;
    }, b._$SetPos$_ = function(t, s) {
        const i = this._$GetWorldInfo$_();
        i._$EqualsXY$_(t, s) || (i._$SetXY$_(t, s), i._$SetBboxChanged$_());
    }, v._$SetPos$_ = function(t, s) {
        this.setPosition(t, s);
    }, T._$SetPosToObject$_ = function(t, s) {
        if (t = m(t)) {
            const i = d(this), e = t._$GetPairedInstance$_(i);
            if (e) {
                const [ n, h ] = e._$GetImagePoint$_(s), r = i._$GetWorldInfo$_();
                r._$GetX$_() === n && r._$GetY$_() === h || (r._$SetXY$_(n, h), 
                r._$SetBboxChanged$_());
            }
        }
    }, T._$MoveForward$_ = function(t) {
        if (0 !== t) {
            const s = u(this);
            s._$OffsetXY$_(s._$GetCosAngle$_() * t, s._$GetSinAngle$_() * t), s._$SetBboxChanged$_();
        }
    }, b._$MoveAtAngle$_ = function(t, s) {
        if (0 !== s) {
            const i = this._$GetWorldInfo$_();
            t = A._$toRadians$_(t), i._$OffsetXY$_(Math.cos(t) * s, Math.sin(t) * s), 
            i._$SetBboxChanged$_();
        }
    }, v._$MoveAtAngle$_ = function(t, s) {
        0 !== s && (t = A._$toRadians$_(t), this._$offsetPosition$_(Math.cos(t) * s, Math.sin(t) * s));
    }, b._$GetX$_ = function() {
        return this._$GetWorldInfo$_()._$GetX$_();
    }, v._$GetX$_ = function() {
        return this.x;
    }, b._$GetY$_ = function() {
        return this._$GetWorldInfo$_()._$GetY$_();
    }, v._$GetY$_ = function() {
        return this.y;
    }, T._$GetDt$_ = function() {
        return M._$GetDt$_(d(this));
    }, b._$CompareWidth$_ = function(t, s) {
        return A.compare(this._$GetWorldInfo$_()._$GetWidth$_(), t, s);
    }, v._$CompareWidth$_ = function(t, s) {
        return A.compare(this.width, t, s);
    }, b._$CompareHeight$_ = function(t, s) {
        return A.compare(this._$GetWorldInfo$_()._$GetHeight$_(), t, s);
    }, v._$CompareHeight$_ = function(t, s) {
        return A.compare(this.height, t, s);
    }, b._$SetWidth$_ = function(t) {
        const s = this._$GetWorldInfo$_();
        s._$GetWidth$_() !== t && (s._$SetWidth$_(t), s._$SetBboxChanged$_());
    }, v._$SetWidth$_ = function(t) {
        this.width = t;
    }, b._$SetHeight$_ = function(t) {
        const s = this._$GetWorldInfo$_();
        s._$GetHeight$_() !== t && (s._$SetHeight$_(t), s._$SetBboxChanged$_());
    }, v._$SetHeight$_ = function(t) {
        this.height = t;
    }, b._$SetSize$_ = function(t, s) {
        const i = u(this);
        i._$GetWidth$_() === t && i._$GetHeight$_() === s || (i._$SetSize$_(t, s), 
        i._$SetBboxChanged$_());
    }, v._$SetSize$_ = function(t, s) {
        this._$setSize$_(t, s);
    }, b._$GetWidth$_ = function() {
        return this._$GetWorldInfo$_()._$GetWidth$_();
    }, v._$GetWidth$_ = function() {
        return this.width;
    }, b._$GetHeight$_ = function() {
        return this._$GetWorldInfo$_()._$GetHeight$_();
    }, v._$GetHeight$_ = function() {
        return this.height;
    }, T._$GetBboxLeft$_ = function() {
        return u(this)._$GetBoundingBox$_()._$getLeft$_();
    }, T._$GetBboxTop$_ = function() {
        return u(this)._$GetBoundingBox$_()._$getTop$_();
    }, T._$GetBboxRight$_ = function() {
        return u(this)._$GetBoundingBox$_()._$getRight$_();
    }, T._$GetBboxBottom$_ = function() {
        return u(this)._$GetBoundingBox$_()._$getBottom$_();
    }, T._$GetBboxMidX$_ = function() {
        const t = u(this)._$GetBoundingBox$_();
        return (t._$getLeft$_() + t._$getRight$_()) / 2;
    }, T._$GetBboxMidY$_ = function() {
        const t = u(this)._$GetBoundingBox$_();
        return (t._$getTop$_() + t._$getBottom$_()) / 2;
    }, T._$IsAngleWithin$_ = function(t, s) {
        return A._$angleDiff$_(u(this)._$GetAngle$_(), A._$toRadians$_(s)) <= A._$toRadians$_(t);
    }, T._$IsAngleClockwiseFrom$_ = function(t) {
        return A._$angleClockwise$_(u(this)._$GetAngle$_(), A._$toRadians$_(t));
    }, T._$IsBetweenAngles$_ = function(t, s) {
        const i = A._$toRadians$_(t), e = A._$toRadians$_(s), n = u(this)._$GetAngle$_(), h = !A._$angleClockwise$_(e, i);
        return h ? !(!A._$angleClockwise$_(n, i) && A._$angleClockwise$_(n, e)) : A._$angleClockwise$_(n, i) && !A._$angleClockwise$_(n, e);
    }, b._$SetAngle$_ = function(t) {
        const s = this._$GetWorldInfo$_(), i = A._$clampAngle$_(A._$toRadians$_(t));
        isNaN(i) || s._$GetAngle$_() === i || (s._$SetAngle$_(i), s._$SetBboxChanged$_());
    }, v._$SetAngle$_ = function(t) {
        this._$angleDegrees$_ = t;
    }, T._$RotateClockwise$_ = function(t) {
        if (!isNaN(t) && 0 !== t) {
            const s = u(this);
            s._$SetAngle$_(s._$GetAngle$_() + A._$toRadians$_(t)), s._$SetBboxChanged$_();
        }
    }, T._$RotateCounterclockwise$_ = function(t) {
        if (!isNaN(t) && 0 !== t) {
            const s = u(this);
            s._$SetAngle$_(s._$GetAngle$_() - A._$toRadians$_(t)), s._$SetBboxChanged$_();
        }
    }, T._$RotateTowardAngle$_ = function(t, s) {
        const i = u(this), e = i._$GetAngle$_(), n = A._$angleRotate$_(e, A._$toRadians$_(s), A._$toRadians$_(t));
        isNaN(n) || e === n || (i._$SetAngle$_(n), i._$SetBboxChanged$_());
    }, T._$RotateTowardPosition$_ = function(t, s, i) {
        const e = u(this), n = e._$GetAngle$_(), h = s - e._$GetX$_(), r = i - e._$GetY$_(), o = Math.atan2(r, h), a = A._$angleRotate$_(n, o, A._$toRadians$_(t));
        isNaN(a) || n === a || (e._$SetAngle$_(a), e._$SetBboxChanged$_());
    }, T._$SetTowardPosition$_ = function(t, s) {
        const i = u(this), e = i._$GetAngle$_(), n = t - i._$GetX$_(), h = s - i._$GetY$_(), r = Math.atan2(h, n);
        isNaN(r) || e === r || (i._$SetAngle$_(r), i._$SetBboxChanged$_());
    }, b._$GetAngle$_ = function() {
        return A._$toDegrees$_(this._$GetWorldInfo$_()._$GetAngle$_());
    }, v._$GetAngle$_ = function() {
        return this._$angleDegrees$_;
    }, T._$CompareOpacity$_ = function(t, s) {
        return A.compare(A._$roundToDp$_(100 * u(this)._$GetOpacity$_(), 6), t, s);
    }, b._$IsVisible$_ = function() {
        return this._$GetWorldInfo$_()._$IsVisible$_();
    }, v._$IsVisible$_ = function() {
        return this.isVisible;
    }, T._$SetVisible$_ = function(t) {
        const s = u(this);
        t = 2 === t ? !s._$IsVisible$_() : 0 !== t, s._$IsVisible$_() !== t && (s._$SetVisible$_(t), 
        M._$UpdateRender$_());
    }, T._$SetOpacity$_ = function(t) {
        const s = A._$clamp$_(t / 100, 0, 1), i = u(this);
        if (i._$GetTransformWithParentOpacity$_()) {
            if (i._$_GetSceneGraphInfo$_()._$GetOwnOpacity$_() === s) return;
        } else if (i._$GetOpacity$_() === s) return;
        i._$SetOpacity$_(s), M._$UpdateRender$_();
    }, T._$SetDefaultColor$_ = function(t) {
        l._$setFromRgbValue$_(t);
        const s = u(this);
        s._$GetUnpremultipliedColor$_()._$equalsIgnoringAlpha$_(l) || (s._$SetUnpremultipliedColor$_(l), 
        M._$UpdateRender$_());
    }, T._$GetColor$_ = function() {
        const t = u(this)._$GetUnpremultipliedColor$_();
        return A._$PackRGBAEx$_(t._$getR$_(), t._$getG$_(), t._$getB$_(), t._$getA$_());
    }, T._$GetOpacity$_ = function() {
        return A._$roundToDp$_(100 * u(this)._$GetOpacity$_(), 6);
    }, T._$IsOnLayer$_ = function(t) {
        return !!(t = s(t)) && u(this)._$GetLayer$_() === t;
    }, T._$PickTopBottom$_ = function(i) {
        const t = m(this), s = t._$GetCurrentSol$_(), e = s._$GetInstances$_();
        if (!e.length) return !1;
        let n = e[0], h = n;
        for (let t = 1, s = e.length; t < s; ++t) {
            const r = e[t], o = r._$GetWorldInfo$_(), a = h._$GetWorldInfo$_(), l = o._$GetLayer$_()._$GetIndex$_(), u = a._$GetLayer$_()._$GetIndex$_();
            0 === i ? (u < l || l === u && o._$GetZIndex$_() > a._$GetZIndex$_()) && (h = r) : (l < u || l === u && o._$GetZIndex$_() < a._$GetZIndex$_()) && (h = r);
        }
        return s._$PickOne$_(h), !0;
    }, b._$CompareZElevation$_ = function(t, s, i) {
        const e = this._$GetWorldInfo$_(), n = 0 === t ? e._$GetZElevation$_() : e._$GetTotalZElevation$_();
        return A.compare(n, s, i);
    }, v._$CompareZElevation$_ = function(t, s, i) {
        const e = 0 === t ? this._$zElevation$_ : this._$totalZElevation$_;
        return A.compare(e, s, i);
    }, b._$MoveToTop$_ = function() {
        this._$GetWorldInfo$_()._$ZOrderMoveToTop$_();
    }, v._$MoveToTop$_ = function() {
        this._$moveToTop$_();
    }, b._$MoveToBottom$_ = function() {
        this._$GetWorldInfo$_()._$ZOrderMoveToBottom$_();
    }, v._$MoveToBottom$_ = function() {
        this._$moveToBottom$_();
    }, T._$MoveToLayer$_ = function(t) {
        (t = s(t)) && u(this)._$ZOrderMoveToLayer$_(t);
    }, T._$ZMoveToObject$_ = function(t, s) {
        const i = 0 === t;
        if (s = m(s)) {
            const e = d(this), n = s._$GetFirstPicked$_(e);
            n && e._$GetWorldInfo$_()._$ZOrderMoveAdjacentToInstance$_(n, i);
        }
    }, b._$SetZElevation$_ = function(t) {
        const s = this._$GetWorldInfo$_();
        s._$GetZElevation$_() !== t && (s._$SetZElevation$_(t), M._$UpdateRender$_());
    }, v._$SetZElevation$_ = function(t) {
        this._$zElevation$_ = t;
    }, T._$LayerNumber$_ = function() {
        return u(this)._$GetLayer$_()._$GetIndex$_();
    }, T._$LayerName$_ = function() {
        return u(this)._$GetLayer$_()._$GetName$_();
    }, b._$ZIndex$_ = function() {
        return this._$GetWorldInfo$_()._$GetZIndex$_();
    }, v._$ZIndex$_ = function() {
        return this.zIndex;
    }, b._$ZElevation$_ = function() {
        return this._$GetWorldInfo$_()._$GetZElevation$_();
    }, v._$ZElevation$_ = function() {
        return this._$zElevation$_;
    }, b._$TotalZElevation$_ = function() {
        return this._$GetWorldInfo$_()._$GetTotalZElevation$_();
    }, v._$TotalZElevation$_ = function() {
        return this._$totalZElevation$_;
    }, T._$IsEffectEnabled$_ = function(t) {
        const s = d(this), i = s._$GetObjectClass$_()._$GetEffectList$_()._$GetEffectTypeByName$_(t);
        if (i) {
            const e = i._$GetIndex$_(), n = s._$GetWorldInfo$_()._$GetInstanceEffectList$_();
            return n._$IsEffectIndexActive$_(e);
        }
    }, T._$SetEffectEnabled$_ = function(t, s) {
        const i = d(this), e = i._$GetObjectClass$_()._$GetEffectList$_()._$GetEffectTypeByName$_(s);
        if (e) {
            const n = e._$GetIndex$_(), h = 1 === t, r = i._$GetWorldInfo$_()._$GetInstanceEffectList$_();
            r._$IsEffectIndexActive$_(n) !== h && (r._$SetEffectIndexActive$_(n, h), 
            r._$UpdateActiveEffects$_(), M._$UpdateRender$_());
        }
    }, T._$SetEffectParam$_ = function(t, s, i) {
        const e = d(this), n = e._$GetObjectClass$_()._$GetEffectList$_()._$GetEffectTypeByName$_(t);
        if (n) {
            s = Math.floor(s);
            const h = n._$GetShaderProgram$_()._$GetParameterType$_(s);
            if (h) {
                "color" === h ? (l._$setFromRgbValue$_(i), i = l) : "percent" === h && (i /= 100);
                const r = n._$GetIndex$_(), o = e._$GetWorldInfo$_()._$GetInstanceEffectList$_(), a = o._$SetEffectParameter$_(r, s, i);
                a && o._$IsEffectIndexActive$_(r) && M._$UpdateRender$_();
            }
        }
    }, A._$New$_(A.Rect)), L = [], x = [], C = !1, G = null, I = !1, O = new Set();
    T._$OnCollision$_ = function(y) {
        const t = m(this), M = (y = m(y), t._$GetRuntime$_());
        if (M._$IsDebugging$_()) return function*(M) {
            if (M) {
                let t = this._$GetRuntime$_(), s = t._$GetCollisionEngine$_(), e = t._$GetEventSheetManager$_(), i = e._$GetEventStack$_(), n = e._$GetCurrentCondition$_(), h = n._$GetObjectClass$_(), r = n._$GetSavedDataMap$_(), o = n._$GetUnsavedDataMap$_(), a = i._$GetCurrentStackFrame$_(), l = t._$GetTickCount$_(), u = l - 1, c = a._$GetCurrentEvent$_(), f = i._$Push$_(c), d = r.get("collmemory"), p = (d || (d = A._$New$_(A._$PairMap$_), 
                r.set("collmemory", d)), o.get("collisionCreatedDestroyCallback") || (o.set("collisionCreatedDestroyCallback", !0), 
                t._$Dispatcher$_().addEventListener("instancedestroy", t => N(d, t._$instance$_))), 
                h._$GetCurrentSol$_()), m = M._$GetCurrentSol$_(), g = p._$GetInstances$_(), y = null;
                for (let t = 0; t < g.length; ++t) {
                    const w = g[t];
                    m._$IsSelectAll$_() ? (s._$GetCollisionCandidates$_(w._$GetWorldInfo$_()._$GetLayer$_(), M, w._$GetWorldInfo$_()._$GetBoundingBox$_(), L), 
                    y = L, s._$AddRegisteredCollisionCandidates$_(w, M, y)) : y = m._$GetInstances$_();
                    for (let t = 0; t < y.length; ++t) {
                        const x = y[t];
                        if (s._$TestOverlap$_(w, x) || s._$CheckRegisteredCollision$_(w, x)) {
                            let t = D(d, w, x), s = !1, i = -2;
                            "number" == typeof t && (s = !0, i = t);
                            const S = !s || i < u;
                            if (_(d, w, x, l), S) {
                                const T = c._$GetSolModifiers$_(), b = (e._$PushCopySol$_(T), 
                                h._$GetCurrentSol$_()), v = M._$GetCurrentSol$_();
                                if (b._$_SetSelectAll$_(!1), v._$_SetSelectAll$_(!1), 
                                h === M) {
                                    const C = b._$_GetOwnInstances$_();
                                    A._$clearArray$_(C), C.push(w), C.push(x), h._$ApplySolToContainer$_();
                                } else {
                                    const G = b._$_GetOwnInstances$_(), I = v._$_GetOwnInstances$_();
                                    A._$clearArray$_(G), A._$clearArray$_(I), G.push(w), 
                                    I.push(x), h._$ApplySolToContainer$_(), M._$ApplySolToContainer$_();
                                }
                                yield* c._$DebugRetrigger$_(a, f), e._$PopSol$_(T);
                            }
                        } else E(d, w, x);
                    }
                    A._$clearArray$_(L);
                }
                i._$Pop$_();
            }
            return !1;
        }.call(t, y);
        if (y) {
            let s = M._$GetCollisionEngine$_(), e = M._$GetEventSheetManager$_(), t = e._$GetEventStack$_(), i = e._$GetCurrentCondition$_(), n = i._$GetObjectClass$_(), h = i._$GetSavedDataMap$_(), r = i._$GetUnsavedDataMap$_(), o = t._$GetCurrentStackFrame$_(), a = M._$GetTickCount$_(), l = a - 1, u = o._$GetCurrentEvent$_(), c = t._$Push$_(u), f = h.get("collmemory"), d = (f || (f = A._$New$_(A._$PairMap$_), 
            h.set("collmemory", f)), r.get("collisionCreatedDestroyCallback") || (r.set("collisionCreatedDestroyCallback", !0), 
            M._$Dispatcher$_().addEventListener("instancedestroy", t => N(f, t._$instance$_))), 
            n._$GetCurrentSol$_()), p = y._$GetCurrentSol$_(), m = d._$GetInstances$_(), g = null;
            for (let t = 0; t < m.length; ++t) {
                const w = m[t];
                p._$IsSelectAll$_() ? (s._$GetCollisionCandidates$_(w._$GetWorldInfo$_()._$GetLayer$_(), y, w._$GetWorldInfo$_()._$GetBoundingBox$_(), L), 
                g = L, s._$AddRegisteredCollisionCandidates$_(w, y, g)) : g = p._$GetInstances$_();
                for (let t = 0; t < g.length; ++t) {
                    const x = g[t];
                    if (s._$TestOverlap$_(w, x) || s._$CheckRegisteredCollision$_(w, x)) {
                        let t = D(f, w, x), s = !1, i = -2;
                        "number" == typeof t && (s = !0, i = t);
                        const S = !s || i < l;
                        if (_(f, w, x, a), S) {
                            const T = u._$GetSolModifiers$_(), b = (e._$PushCopySol$_(T), 
                            n._$GetCurrentSol$_()), v = y._$GetCurrentSol$_();
                            if (b._$_SetSelectAll$_(!1), v._$_SetSelectAll$_(!1), 
                            n === y) {
                                const C = b._$_GetOwnInstances$_();
                                A._$clearArray$_(C), C.push(w), C.push(x), n._$ApplySolToContainer$_();
                            } else {
                                const G = b._$_GetOwnInstances$_(), I = v._$_GetOwnInstances$_();
                                A._$clearArray$_(G), A._$clearArray$_(I), G.push(w), 
                                I.push(x), n._$ApplySolToContainer$_(), y._$ApplySolToContainer$_();
                            }
                            u._$Retrigger$_(o, c), e._$PopSol$_(T);
                        }
                    } else E(f, w, x);
                }
                A._$clearArray$_(L);
            }
            t._$Pop$_();
        }
        return !1;
    }, T._$IsOverlapping$_ = function(t) {
        return t = m(t), e(d(this), t, 0, 0);
    }, T._$IsOverlappingOffset$_ = function(t, s, i) {
        return t = m(t), e(d(this), t, s, i);
    }, T._$OnHierarchyReady$_ = function() {
        return !0;
    }, T._$HasParent$_ = function() {
        return u(this)._$HasParent$_();
    }, T._$HasChildren$_ = function() {
        return u(this)._$HasChildren$_();
    }, T._$PickParent$_ = function(i, e) {
        const t = m(this), s = (i = m(i), t._$GetRuntime$_()), n = this._$GetCurrentSol$_(), h = n._$GetInstances$_();
        if (0 === h.length) return !1;
        let r = i._$GetCurrentSol$_(), o = r._$GetInstances$_();
        if (r._$IsSelectAll$_()) {
            const u = [ ...s._$instancesPendingCreateForObjectClass$_(i) ];
            0 < u.length && (o = o.concat(u));
        }
        if (0 === o.length) return !1;
        const a = r._$IsSelectAll$_() ? null : new Set(o), l = new Set();
        for (let t = 0, s = h.length; t < s; ++t) {
            const c = h[t];
            if (1 === e) for (const f of c._$parents$_()) f._$BelongsToObjectClass$_(i) && (null === a || a.has(f)) && l.add(f); else {
                let t;
                if (0 === e) {
                    if (null === (t = c._$GetParent$_())) continue;
                } else t = c._$GetTopParent$_();
                t._$BelongsToObjectClass$_(i) && (null === a || a.has(t)) && l.add(t);
            }
        }
        return 0 !== l.size && (r._$SetSetPicked$_(l), i._$ApplySolToContainer$_(), 
        !0);
    }, T._$PickChildren$_ = function(i, e) {
        const t = m(this), s = (i = m(i), t._$GetRuntime$_()), n = t._$GetCurrentSol$_(), h = n._$GetInstances$_();
        if (0 === h.length) return !1;
        let r = i._$GetCurrentSol$_(), o = r._$GetInstances$_();
        if (r._$IsSelectAll$_()) {
            const u = [ ...s._$instancesPendingCreateForObjectClass$_(i) ];
            0 < u.length && (o = o.concat(u));
        }
        if (0 === o.length) return !1;
        const a = r._$IsSelectAll$_() ? null : new Set(o), l = new Set();
        for (let t = 0, s = h.length; t < s; ++t) {
            const c = h[t];
            2 !== e || c._$HasChildren$_() || !c._$BelongsToObjectClass$_(i) || null !== a && !a.has(c) || l.add(c);
            for (const f of 0 === e ? c.children() : c._$allChildren$_()) 2 === e && f._$HasChildren$_() || f._$BelongsToObjectClass$_(i) && (null === a || a.has(f)) && l.add(f);
        }
        return 0 !== l.size && (r._$SetSetPicked$_(l), i._$ApplySolToContainer$_(), 
        !0);
    }, T._$PickNthChild$_ = function(i, e, n) {
        const t = m(this), s = (i = m(i), t._$GetRuntime$_()), h = t._$GetCurrentSol$_(), r = h._$GetInstances$_();
        if (0 === r.length) return !1;
        let o = i._$GetCurrentSol$_(), a = o._$GetInstances$_();
        if (o._$IsSelectAll$_()) {
            const c = [ ...s._$instancesPendingCreateForObjectClass$_(i) ];
            0 < c.length && (a = a.concat(c));
        }
        if (0 === a.length) return !1;
        const l = o._$IsSelectAll$_() ? null : new Set(a), u = [];
        for (let t = 0, s = r.length; t < s; ++t) {
            const f = r[t];
            if (0 === e) {
                const d = f._$GetChildAt$_(n);
                null !== d && d._$BelongsToObjectClass$_(i) && (null === l || l.has(d)) && u.push(d);
            } else if (1 === e) for (const p of f.children()) if (p._$BelongsToObjectClass$_(i)) {
                if (0 === n) {
                    null !== l && !l.has(p) || u.push(p);
                    break;
                }
                --n;
            }
        }
        return 0 !== u.length && (o._$SetArrayPicked$_(u), i._$ApplySolToContainer$_(), 
        !0);
    }, T._$CompareChildCount$_ = function(t, s, i) {
        const e = d(this);
        switch (t) {
          case 0:
          default:
            return A.compare(e._$GetChildCount$_(), s, i);

          case 1:
            return A.compare(e._$GetAllChildCount$_(), s, i);
        }
    }, T._$AddChild$_ = function(t, s, i, e, n, h, r, o, a, l) {
        t = m(t);
        const u = d(this), c = M._$GetCurrentAction$_()._$GetObjectClass$_();
        for (const f of t._$allCorrespondingInstances$_(u, c)) {
            if (!f._$GetPlugin$_()._$SupportsSceneGraph$_()) return;
            u._$AddChild$_(f, {
                _$transformX$_: s,
                _$transformY$_: i,
                _$transformWidth$_: e,
                _$transformHeight$_: n,
                _$transformAngle$_: h,
                _$transformOpacity$_: r,
                _$transformZElevation$_: o,
                _$transformVisibility$_: a,
                _$destroyWithParent$_: l
            });
        }
    }, T._$RemoveChild$_ = function(t) {
        t = m(t);
        const s = d(this), i = M._$GetCurrentAction$_()._$GetObjectClass$_();
        for (const e of t._$allCorrespondingInstances$_(s, i)) s._$RemoveChild$_(e);
    }, T._$RemoveFromParent$_ = function() {
        const t = d(this);
        if (t._$HasParent$_()) {
            const s = t._$GetParent$_();
            s._$RemoveChild$_(t);
        }
    }, T._$ParentUID$_ = function() {
        const t = d(this)._$GetParent$_();
        return t ? t._$GetUID$_() : -1;
    }, T._$ChildCount$_ = function() {
        return d(this)._$GetChildCount$_();
    }, T._$AllChildCount$_ = function() {
        return d(this)._$GetAllChildCount$_();
    }, T._$SetMeshSize$_ = function(t, s) {
        t = Math.floor(t), s = Math.floor(s);
        const i = u(this);
        t < 2 || s < 2 || !isFinite(t) || !isFinite(s) ? (i._$ReleaseMesh$_(), i._$SetBboxChanged$_()) : i._$CreateMesh$_(t, s);
    }, T._$SetMeshPoint$_ = function(t, s, i, e, n, h, r, o) {
        const a = u(this), l = a._$SetMeshPoint$_(t, s, {
            mode: 0 === i ? "absolute" : "relative",
            x: e,
            y: n,
            _$zElevation$_: h,
            u: r,
            v: o
        });
        l && a._$SetBboxChanged$_();
    }, T._$MeshColumns$_ = function() {
        const t = u(this);
        return t._$HasMesh$_() ? t._$GetSourceMesh$_()._$GetHSize$_() : 0;
    }, T._$MeshRows$_ = function() {
        const t = u(this);
        return t._$HasMesh$_() ? t._$GetSourceMesh$_()._$GetVSize$_() : 0;
    }, T._$SetElementVisible$_ = function(t) {
        const s = u(this);
        t = 2 === t ? !s._$IsVisible$_() : 0 !== t, s._$IsVisible$_() !== t && s._$SetVisible$_(t);
    }, T._$SetElementCSSStyle$_ = function(t, s) {
        this instanceof self._$IInstance$_ ? this._$setElementCSSStyle$_(t, s) : this._$SetElementCSSStyle$_(t, s);
    }, T._$SetElementAttribute$_ = function(t, s) {
        this instanceof self._$IInstance$_ ? this._$setElementAttribute$_(t, "" + s) : this._$SetElementAttribute$_(t, "" + s);
    }, T._$RemoveElementAttribute$_ = function(t) {
        this instanceof self._$IInstance$_ ? this._$removeElementAttribute$_(t) : this._$RemoveElementAttribute$_(t);
    }, T._$SetElementFocus$_ = function() {
        this instanceof self._$IInstance$_ ? this._$focusElement$_() : this._$FocusElement$_();
    }, T._$SetElementBlur$_ = function() {
        this instanceof self._$IInstance$_ ? this._$blurElement$_() : this._$BlurElement$_();
    }, T._$IsElementFocused$_ = function() {
        return this instanceof self._$IInstance$_ ? this._$isElementFocused$_() : this._$IsElementFocused$_();
    }, T._$SetElementEnabled$_ = function(t) {
        this instanceof self._$IInstance$_ ? this._setEnabled(0 !== t) : this._SetEnabled(0 !== t);
    }, T._$IsElementEnabled$_ = function() {
        return this instanceof self._$IInstance$_ ? this._$_isEnabled$_() : this._IsEnabled();
    }, b._$CompareInstanceVar$_ = function(t, s, i) {
        return A.compare(this._$GetInstance$_()._$GetInstanceVariableValue$_(t), s, i);
    }, v._$CompareInstanceVar$_ = function(t, s, i) {
        return A.compare(n(this)._$GetInstanceVariableValue$_(t), s, i);
    }, b._$IsBoolInstanceVarSet$_ = function(t) {
        return !!this._$GetInstance$_()._$GetInstanceVariableValue$_(t);
    }, v._$IsBoolInstanceVarSet$_ = function(t) {
        return !!n(this)._$GetInstanceVariableValue$_(t);
    }, T._$PickInstVarHiLow$_ = function(i, e) {
        const n = m(this), t = n._$GetCurrentSol$_(), h = t._$GetInstances$_();
        if (!h.length) return !1;
        let r = n._$IsFamily$_(), o = null, a = 0;
        for (let t = 0, s = h.length; t < s; ++t) {
            const l = h[t], u = r ? l._$GetObjectClass$_()._$GetFamilyInstanceVariableOffset$_(n._$GetFamilyIndex$_()) : 0, c = l._$GetInstanceVariableValue$_(u + e);
            (null === o || 0 === i && c < a || 1 === i && c > a) && (a = c, o = l);
        }
        return t._$PickOne$_(o), !0;
    }, T._$PickByUID$_ = function(t) {
        const s = m(this);
        return (s._$GetRuntime$_()._$GetCurrentCondition$_()._$IsInverted$_() ? r : h)(s, t);
    }, T._$HasTags$_ = function(t) {
        const s = new Set(A._$splitStringAndNormalize$_(t)), i = d(this)._$GetTagsSet$_();
        return s.isSubsetOf(i);
    }, T._$Tags$_ = function() {
        return d(this)._$GetTagsString$_();
    }, T._$TagsCount$_ = function() {
        return d(this)._$GetTagsSet$_().size;
    }, T._$TagAt$_ = function(t) {
        return d(this)._$GetTagAt$_(t);
    }, T._$ChangeTags$_ = function(t, s) {
        const i = A._$splitStringAndNormalize$_(s);
        if (0 !== i.length) {
            const e = d(this), n = new Set(e._$GetTagsSet$_());
            if (0 === t) for (const h of i) n.add(h); else if (1 === t) for (const r of i) n.delete(r);
            e._$SetTagsSet$_(n);
        }
    }, T._$Destroy$_ = function() {
        M._$DestroyInstance$_(d(this));
    }, T._$OnCreated$_ = function() {
        return !0;
    }, T._$OnDestroyed$_ = function() {
        return !0;
    }, b._$SetInstanceVar$_ = function(t, s) {
        this._$GetInstance$_()._$SetInstanceVariableValue$_(t, s);
    }, v._$SetInstanceVar$_ = function(t, s) {
        n(this)._$SetInstanceVariableValue$_(t, s);
    }, b._$AddInstanceVar$_ = function(t, s) {
        const i = this._$GetInstance$_(), e = i._$GetInstanceVariableValue$_(t);
        "number" == typeof e && "number" != typeof s ? s = parseFloat(s) : "string" == typeof e && "string" != typeof s && (s = s.toString()), 
        i._$SetInstanceVariableValue$_(t, e + s);
    }, v._$AddInstanceVar$_ = function(t, s) {
        const i = n(this), e = i._$GetInstanceVariableValue$_(t);
        "number" == typeof e && "number" != typeof s ? s = parseFloat(s) : "string" == typeof e && "string" != typeof s && (s = s.toString()), 
        i._$SetInstanceVariableValue$_(t, e + s);
    }, b._$SubInstanceVar$_ = function(t, s) {
        const i = this._$GetInstance$_(), e = i._$GetInstanceVariableValue$_(t);
        "number" == typeof e && ("number" != typeof s && (s = parseFloat(s)), i._$SetInstanceVariableValue$_(t, e - s));
    }, v._$SubInstanceVar$_ = function(t, s) {
        const i = n(this), e = i._$GetInstanceVariableValue$_(t);
        "number" == typeof e && ("number" != typeof s && (s = parseFloat(s)), i._$SetInstanceVariableValue$_(t, e - s));
    }, b._$SetBoolInstanceVar$_ = function(t, s) {
        this._$GetInstance$_()._$SetInstanceVariableValue$_(t, s ? 1 : 0);
    }, v._$SetBoolInstanceVar$_ = function(t, s) {
        n(this)._$SetInstanceVariableValue$_(t, s ? 1 : 0);
    }, b._$ToggleBoolInstanceVar$_ = function(t) {
        const s = this._$GetInstance$_();
        s._$SetInstanceVariableValue$_(t, 0 === s._$GetInstanceVariableValue$_(t) ? 1 : 0);
    }, v._$ToggleBoolInstanceVar$_ = function(t) {
        const s = n(this);
        s._$SetInstanceVariableValue$_(t, 0 === s._$GetInstanceVariableValue$_(t) ? 1 : 0);
    }, T._$LoadFromJsonString$_ = function(t) {
        let s;
        try {
            s = JSON.parse(t);
        } catch (t) {
            return void console.error("Failed to load from JSON string: ", t);
        }
        const i = d(this);
        M._$ClearIntancesNeedingAfterLoad$_(), i._$_OnBeforeLoad$_("state"), i._$LoadFromJson$_(s, "state"), 
        M._$DoAfterLoad$_("state", {
            _$setFromJson$_: !0
        });
    }, T._$AsJSON$_ = function() {
        return JSON.stringify(d(this)._$SaveToJson$_("state"));
    }, T._$ObjectTypeName$_ = function() {
        return d(this)._$GetObjectClass$_()._$GetName$_();
    }, T._$Count$_ = function() {
        let t = M._$GetCurrentEventStackFrame$_()._$GetExpressionObjectClass$_(), s = t._$GetInstanceCount$_();
        for (const i of M._$instancesPendingCreateForObjectClass$_(t)) ++s;
        return s;
    }, T._$PickedCount$_ = function() {
        return M._$GetCurrentEventStackFrame$_()._$GetExpressionObjectClass$_()._$GetCurrentSol$_()._$GetInstances$_().length;
    }, b._$GetIID$_ = function() {
        return this._$GetInstance$_()._$GetIID$_();
    }, v._$GetIID$_ = function() {
        return n(this)._$GetIID$_();
    }, b._$GetUID$_ = function() {
        return this._$GetInstance$_()._$GetUID$_();
    }, v._$GetUID$_ = function() {
        return n(this)._$GetUID$_();
    }, T._$OnInstanceSignal$_ = function(t) {
        const s = d(this);
        return t.toLowerCase() === M._$GetEventSheetManager$_()._$GetCurrentInstanceSignalTag$_(s);
    }, T._$InstanceSignal$_ = function(t) {
        const s = d(this);
        M._$GetEventSheetManager$_()._$InstanceSignal$_(s, t);
    }, T._$InstanceWaitForSignal$_ = function(t) {
        const s = m(this);
        return M._$GetEventSheetManager$_()._$AddScheduledWait$_()._$InitInstanceSignals$_(s._$GetCurrentSol$_()._$GetInstances$_(), t), 
        !0;
    }, T._$TemplateName$_ = function() {
        return d(this)._$GetTemplateName$_();
    }, A._$AddCommonACEs$_ = function(t, s, i) {
        const e = t[1], n = t[3], h = t[4], r = t[5], o = t[6], a = t[7], l = t[8], u = t[10], c = t[11], f = t[12], d = t[13], p = t[14], m = t[15], g = t[16], y = s._$Cnds$_, M = s._$Acts$_, w = s._$Exps$_, x = Object.assign({}, T, 2 <= i ? v : b);
        n && (y._$CompareX$_ = x._$CompareX$_, y._$CompareY$_ = x._$CompareY$_, 
        y._$IsOnScreen$_ = x._$IsOnScreen$_, y._$IsOutsideLayout$_ = x._$IsOutsideLayout$_, 
        y._$PickDistance$_ = x._$PickDistance$_, M._$SetX$_ = x._$SetX$_, M._$SetY$_ = x._$SetY$_, 
        M._$SetPos$_ = x._$SetPos$_, M._$SetPosToObject$_ = x._$SetPosToObject$_, 
        M._$MoveForward$_ = x._$MoveForward$_, M._$MoveAtAngle$_ = x._$MoveAtAngle$_, 
        w._$X$_ = x._$GetX$_, w._$Y$_ = x._$GetY$_, w._$dt$_ = x._$GetDt$_), h && (y._$CompareWidth$_ = x._$CompareWidth$_, 
        y._$CompareHeight$_ = x._$CompareHeight$_, M._$SetWidth$_ = x._$SetWidth$_, 
        M._$SetHeight$_ = x._$SetHeight$_, M._$SetSize$_ = x._$SetSize$_, w._$Width$_ = x._$GetWidth$_, 
        w._$Height$_ = x._$GetHeight$_, w._$BBoxLeft$_ = x._$GetBboxLeft$_, w._$BBoxTop$_ = x._$GetBboxTop$_, 
        w._$BBoxRight$_ = x._$GetBboxRight$_, w._$BBoxBottom$_ = x._$GetBboxBottom$_, 
        w._$BBoxMidX$_ = x._$GetBboxMidX$_, w._$BBoxMidY$_ = x._$GetBboxMidY$_), 
        r && (y._$AngleWithin$_ = x._$IsAngleWithin$_, y._$IsClockwiseFrom$_ = x._$IsAngleClockwiseFrom$_, 
        y._$IsBetweenAngles$_ = x._$IsBetweenAngles$_, M._$SetAngle$_ = x._$SetAngle$_, 
        M._$RotateClockwise$_ = x._$RotateClockwise$_, M._$RotateCounterclockwise$_ = x._$RotateCounterclockwise$_, 
        M._$RotateTowardAngle$_ = x._$RotateTowardAngle$_, M._$RotateTowardPosition$_ = x._$RotateTowardPosition$_, 
        M._$SetTowardPosition$_ = x._$SetTowardPosition$_, w._$Angle$_ = x._$GetAngle$_), 
        o && (y._$IsVisible$_ = x._$IsVisible$_, y._$CompareOpacity$_ = x._$CompareOpacity$_, 
        M._$SetVisible$_ = x._$SetVisible$_, M._$SetOpacity$_ = x._$SetOpacity$_, 
        M._$SetDefaultColor$_ = x._$SetDefaultColor$_, w.Opacity = x._$GetOpacity$_, 
        w._$ColorValue$_ = x._$GetColor$_), a && (y._$IsOnLayer$_ = x._$IsOnLayer$_, 
        y._$PickTopBottom$_ = x._$PickTopBottom$_, y._$CompareZElevation$_ = x._$CompareZElevation$_, 
        M._$MoveToTop$_ = x._$MoveToTop$_, M._$MoveToBottom$_ = x._$MoveToBottom$_, 
        M._$MoveToLayer$_ = x._$MoveToLayer$_, M._$ZMoveToObject$_ = x._$ZMoveToObject$_, 
        M._$SetZElevation$_ = x._$SetZElevation$_, w._$LayerNumber$_ = x._$LayerNumber$_, 
        w._$LayerName$_ = x._$LayerName$_, w._$ZIndex$_ = x._$ZIndex$_, w._$ZElevation$_ = x._$ZElevation$_, 
        w._$TotalZElevation$_ = x._$TotalZElevation$_), l && (y._$IsEffectEnabled$_ = x._$IsEffectEnabled$_, 
        M._$SetEffectEnabled$_ = x._$SetEffectEnabled$_, M._$SetEffectParam$_ = x._$SetEffectParam$_), 
        d && (y._$OnHierarchyReady$_ = x._$OnHierarchyReady$_, y._$HasParent$_ = x._$HasParent$_, 
        y._$HasChildren$_ = x._$HasChildren$_, y._$PickParent$_ = x._$PickParent$_, 
        y._$PickChildren$_ = x._$PickChildren$_, y._$PickNthChild$_ = x._$PickNthChild$_, 
        y._$CompareChildCount$_ = x._$CompareChildCount$_, M._$AddChild$_ = x._$AddChild$_, 
        M._$RemoveChild$_ = x._$RemoveChild$_, M._$RemoveFromParent$_ = x._$RemoveFromParent$_, 
        w._$ParentUID$_ = x._$ParentUID$_, w._$ChildCount$_ = x._$ChildCount$_, 
        w._$AllChildCount$_ = x._$AllChildCount$_), p && (M._$SetMeshSize$_ = x._$SetMeshSize$_, 
        M._$SetMeshPoint$_ = x._$SetMeshPoint$_, w._$MeshColumns$_ = x._$MeshColumns$_, 
        w._$MeshRows$_ = x._$MeshRows$_), u && (y._$IsVisible$_ = x._$IsVisible$_, 
        M._$SetVisible$_ = x._$SetElementVisible$_, M._$SetCSSStyle$_ = x._$SetElementCSSStyle$_, 
        M._$SetElemAttribute$_ = x._$SetElementAttribute$_, M._$RemoveElemAttribute$_ = x._$RemoveElementAttribute$_), 
        c && (y._$IsFocused$_ = x._$IsElementFocused$_, M._$SetFocus$_ = x._$SetElementFocus$_, 
        M._$SetBlur$_ = x._$SetElementBlur$_), f && (y._$IsEnabled$_ = x._$IsElementEnabled$_, 
        M._$SetEnabled$_ = x._$SetElementEnabled$_), m && (y._$OnCollision$_ = x._$OnCollision$_, 
        y._$IsOverlapping$_ = x._$IsOverlapping$_, y._$IsOverlappingOffset$_ = x._$IsOverlappingOffset$_, 
        s._$FinishCollisionCondition$_ = S), e || (y._$CompareInstanceVar$_ = x._$CompareInstanceVar$_, 
        y._$IsBoolInstanceVarSet$_ = x._$IsBoolInstanceVarSet$_, y._$PickInstVarHiLow$_ = x._$PickInstVarHiLow$_, 
        y._$PickByUID$_ = x._$PickByUID$_, y._$HasTags$_ = x._$HasTags$_, M._$SetInstanceVar$_ = x._$SetInstanceVar$_, 
        M._$AddInstanceVar$_ = x._$AddInstanceVar$_, M._$SubInstanceVar$_ = x._$SubInstanceVar$_, 
        M._$SetBoolInstanceVar$_ = x._$SetBoolInstanceVar$_, M._$ToggleBoolInstanceVar$_ = x._$ToggleBoolInstanceVar$_, 
        M._$ChangeTags$_ = x._$ChangeTags$_, y._$OnCreated$_ = x._$OnCreated$_, 
        y._$OnDestroyed$_ = x._$OnDestroyed$_, M._$Destroy$_ = x._$Destroy$_, M._$LoadFromJsonString$_ || (M._$LoadFromJsonString$_ = x._$LoadFromJsonString$_), 
        w._$AsJSON$_ || (w._$AsJSON$_ = x._$AsJSON$_), w._$Count$_ = x._$Count$_, 
        w._$PickedCount$_ = x._$PickedCount$_, w._$IID$_ = x._$GetIID$_, w._$UID$_ = x._$GetUID$_, 
        w._$ObjectTypeName$_ = x._$ObjectTypeName$_, w._$Tags$_ = x._$Tags$_, w._$TagsCount$_ = x._$TagsCount$_, 
        w._$TagAt$_ = x._$TagAt$_, y._$OnInstanceSignal$_ = x._$OnInstanceSignal$_, 
        M._$InstanceSignal$_ = x._$InstanceSignal$_, M._$InstanceWaitForSignal$_ = x._$InstanceWaitForSignal$_), 
        g && (w._$TemplateName$_ = x._$TemplateName$_);
    };
}

{
    const Xo = self._$C3$_;
    Xo._$ScheduledWait$_ = class extends Xo._$DefendedBase$_ {
        constructor(t) {
            super(), this._$_eventSheetManager$_ = t, this._$_type$_ = "", this._$_time$_ = -1, 
            this._$_signalTag$_ = "", this._$_isSignalled$_ = !1, this._$_event$_ = null, 
            this._$_actIndex$_ = 0, this._$_solModifiers$_ = [], this._$_dynamicSolModifiers$_ = null, 
            this._$_sols$_ = new Map(), this._$_pendingInstances$_ = null, this._$_callingFunctionBlock$_ = null, 
            this._$_asyncId$_ = -1, this._$_functionParameters$_ = null, this._$_functionInnerLocalVars$_ = null, 
            this._$_shouldRelease$_ = !1;
        }
        _$Release$_() {
            this._$_type$_ = "", this._$_time$_ = -1, this._$_signalTag$_ = "", 
            this._$_event$_ = null, this._$_callingFunctionBlock$_ = null, this._$_functionParameters$_ = null, 
            this._$_functionInnerLocalVars$_ = null, this._$_asyncId$_ = -1, Xo._$clearArray$_(this._$_solModifiers$_), 
            this._$_dynamicSolModifiers$_ && (this._$_dynamicSolModifiers$_.clear(), 
            this._$_dynamicSolModifiers$_ = null);
            for (const t of this._$_sols$_.values()) t._$Release$_();
            this._$_sols$_.clear(), this._$_pendingInstances$_ = null;
        }
        _$_Init$_() {
            const t = this._$_eventSheetManager$_, s = t._$GetRuntime$_()._$GetAllObjectClasses$_(), i = t._$GetCurrentEventStackFrame$_(), e = (this._$_event$_ = i._$GetCurrentEvent$_(), 
            this._$_actIndex$_ = i._$GetActionIndex$_() + 1, t._$FindFirstFunctionBlockParent$_(this._$_event$_));
            e && (this._$_callingFunctionBlock$_ = e, this._$_functionParameters$_ = e._$CaptureFunctionParameters$_(), 
            this._$_functionInnerLocalVars$_ = e._$_GetAllInnerLocalVariables$_().map(t => t._$GetValue$_()), 
            e._$IsAsync$_()) && (this._$_asyncId$_ = e._$PauseCurrentAsyncFunction$_());
            for (const h of s) {
                const r = h._$GetCurrentSol$_();
                r._$IsSelectAll$_() && !this._$_event$_._$HasSolModifier$_(h) || (this._$_solModifiers$_.push(h), 
                this._$_sols$_.set(h, Xo._$New$_(Xo._$SolState$_, r)));
            }
            const n = t._$GetDynamicSolModifiersSet$_();
            this._$_dynamicSolModifiers$_ = 0 < n.size ? n : null;
        }
        _$InitTimer$_(t) {
            this._$_type$_ = "timer", this._$_Init$_(), this._$_time$_ = this._$_eventSheetManager$_._$GetRuntime$_()._$GetGameTime$_() + t;
        }
        _$InitWallTimer$_(t) {
            this._$_type$_ = "walltimer", this._$_Init$_(), this._$_time$_ = this._$_eventSheetManager$_._$GetRuntime$_()._$GetWallTime$_() + t;
        }
        _$InitSignal$_(t) {
            this._$_type$_ = "signal", this._$_Init$_(), this._$_signalTag$_ = t.toLowerCase();
        }
        _$InitInstanceSignals$_(t, s) {
            this._$_type$_ = "instance-signals", this._$_Init$_(), this._$_signalTag$_ = s.toLowerCase(), 
            this._$_pendingInstances$_ = new Set(t);
        }
        _$InitPromise$_(t) {
            this._$_type$_ = "promise", this._$_Init$_(), t.then(() => this._$SetSignalled$_()).catch(t => {
                console.warn("[C3 runtime] Promise rejected in 'Wait for previous actions to complete': ", t), 
                this._$SetSignalled$_();
            });
        }
        _$IsTimer$_() {
            return "timer" === this._$_type$_;
        }
        _$IsWallTimer$_() {
            return "walltimer" === this._$_type$_;
        }
        _$IsSignal$_() {
            return "signal" === this._$_type$_;
        }
        _$IsInstanceSignals$_() {
            return "instance-signals" === this._$_type$_;
        }
        _$IsPromise$_() {
            return "promise" === this._$_type$_;
        }
        _$GetSignalTag$_() {
            return this._$_signalTag$_;
        }
        _$IsSignalled$_() {
            return this._$_isSignalled$_;
        }
        _$SetSignalled$_() {
            this._$_isSignalled$_ = !0;
        }
        _$SetInstanceSignalled$_(t) {
            this._$_pendingInstances$_.delete(t), 0 === this._$_pendingInstances$_.size && this._$SetSignalled$_();
        }
        _$_ShouldRun$_() {
            return this._$IsTimer$_() ? this._$_time$_ <= this._$_eventSheetManager$_._$GetRuntime$_()._$GetGameTime$_() : this._$IsWallTimer$_() ? this._$_time$_ <= this._$_eventSheetManager$_._$GetRuntime$_()._$GetWallTime$_() : this._$IsSignalled$_();
        }
        _$_RestoreState$_(t) {
            t._$_Restore$_(this._$_event$_, this._$_actIndex$_);
            for (const [ i, e ] of this._$_sols$_.entries()) {
                const n = i._$GetCurrentSol$_();
                e._$_Restore$_(n);
            }
            this._$_dynamicSolModifiers$_ && t._$SetDynamicSolModifiers$_([ ...this._$_dynamicSolModifiers$_ ]);
            const s = this._$_callingFunctionBlock$_;
            s && (s._$SetFunctionParameters$_(this._$_functionParameters$_), s._$_GetAllInnerLocalVariables$_().map((t, s) => t._$SetValue$_(this._$_functionInnerLocalVars$_[s])), 
            s._$IsAsync$_()) && s._$ResumeAsyncFunction$_(this._$_asyncId$_);
        }
        _$_Run$_(t) {
            this._$_RestoreState$_(t), this._$_event$_._$_ResumeActionsAndSubEvents$_(t), 
            this._$_callingFunctionBlock$_ && this._$_callingFunctionBlock$_._$IsAsync$_() && this._$_callingFunctionBlock$_._$MaybeFinishAsyncFunctionCall$_(this._$_asyncId$_), 
            this._$_eventSheetManager$_._$ClearSol$_(this._$_solModifiers$_), this._$_shouldRelease$_ = !0;
        }
        async _$_DebugRun$_(t) {
            this._$_RestoreState$_(t);
            for (const s of this._$_event$_._$_DebugResumeActionsAndSubEvents$_(t)) await this._$_eventSheetManager$_._$GetRuntime$_()._$DebugBreak$_(s);
            this._$_callingFunctionBlock$_ && this._$_callingFunctionBlock$_._$IsAsync$_() && this._$_callingFunctionBlock$_._$MaybeFinishAsyncFunctionCall$_(this._$_asyncId$_), 
            this._$_eventSheetManager$_._$ClearSol$_(this._$_solModifiers$_), this._$_shouldRelease$_ = !0;
        }
        _$ShouldRelease$_() {
            return this._$_shouldRelease$_;
        }
        _$RemoveInstances$_(t) {
            for (const s of this._$_sols$_.values()) s._$RemoveInstances$_(t);
            if ("instance-signals" === this._$_type$_) {
                for (const i of t) this._$_pendingInstances$_.delete(i);
                0 === this._$_pendingInstances$_.size && this._$SetSignalled$_();
            }
        }
        _$_SaveToJson$_() {
            const t = {}, s = {
                wt: this._$_type$_,
                t: this._$_time$_,
                st: this._$_signalTag$_,
                s: this._$_isSignalled$_,
                ev: this._$_event$_._$GetSID$_(),
                sm: this._$_solModifiers$_.map(t => t._$GetSID$_()),
                dsm: this._$_dynamicSolModifiers$_ ? [ ...this._$_dynamicSolModifiers$_ ].map(t => t._$GetSID$_()) : null,
                sols: t
            };
            this._$_event$_._$_HasActionIndex$_(this._$_actIndex$_) && (s.act = this._$_event$_._$GetActionAt$_(this._$_actIndex$_)._$GetSID$_());
            for (const [ i, e ] of this._$_sols$_) t[i._$GetSID$_().toString()] = e._$_SaveToJson$_();
            return "instance-signals" === this._$_type$_ && (s.pi = [ ...this._$_pendingInstances$_ ].map(t => t._$GetUID$_())), 
            s;
        }
        static _$_CreateFromJson$_(t, s) {
            const i = t._$GetRuntime$_(), e = t._$GetEventBlockBySID$_(s.ev);
            if (!e) return null;
            let n = 0;
            if (s.hasOwnProperty("act")) {
                const r = t._$GetActionBySID$_(s.act);
                if (!r) return null;
                n = r._$GetIndex$_();
            }
            const h = Xo._$New$_(Xo._$ScheduledWait$_, t);
            h._$_time$_ = s.t, s.hasOwnProperty("wt") ? h._$_type$_ = s.wt : h._$_type$_ = -1 === h._$_time$_ ? "signal" : "timer", 
            h._$_signalTag$_ = s.st, h._$_isSignalled$_ = s.s, h._$_event$_ = e, 
            h._$_actIndex$_ = n;
            for (const o of s.sm) {
                const a = i._$GetObjectClassBySID$_(o);
                a && h._$_solModifiers$_.push(a);
            }
            if (Array.isArray(s.dsm)) for (const l of s.dsm) {
                const u = i._$GetObjectClassBySID$_(l);
                u && (h._$_dynamicSolModifiers$_ || (h._$_dynamicSolModifiers$_ = new Set()), 
                h._$_dynamicSolModifiers$_.add(u));
            }
            for (const [ c, f ] of Object.entries(s.sols)) {
                const d = parseInt(c, 10), p = i._$GetObjectClassBySID$_(d);
                if (p) {
                    const m = Xo._$New$_(Xo._$SolState$_, null);
                    m._$_LoadFromJson$_(t, f), h._$_sols$_.set(p, m);
                }
            }
            if ("instance-signals" === h._$_type$_) {
                h._$_pendingInstances$_ = new Set();
                for (const g of s.pi) {
                    const y = i._$GetInstanceByUID$_(g);
                    y && h._$_pendingInstances$_.add(y);
                }
            }
            return h;
        }
    };
}

{
    const Ko = self._$C3$_;
    Ko._$SolState$_ = class extends Ko._$DefendedBase$_ {
        constructor(t) {
            super(), this._$_objectClass$_ = null, this._$_isSelectAll$_ = !0, this._$_instances$_ = [], 
            t && (this._$_objectClass$_ = t._$GetObjectClass$_(), this._$_isSelectAll$_ = t._$IsSelectAll$_(), 
            Ko._$shallowAssignArray$_(this._$_instances$_, t._$_GetOwnInstances$_()));
        }
        _$Release$_() {
            this._$_objectClass$_ = null, Ko._$clearArray$_(this._$_instances$_);
        }
        _$_Restore$_(t) {
            t._$_SetSelectAll$_(this._$_isSelectAll$_), Ko._$shallowAssignArray$_(t._$_GetOwnInstances$_(), this._$_instances$_);
        }
        _$RemoveInstances$_(t) {
            Ko._$arrayRemoveAllInSet$_(this._$_instances$_, t);
        }
        _$_SaveToJson$_() {
            return {
                sa: this._$_isSelectAll$_,
                insts: this._$_instances$_.map(t => t._$GetUID$_())
            };
        }
        _$_LoadFromJson$_(t, s) {
            const i = t._$GetRuntime$_();
            this._$_isSelectAll$_ = !!s.sa, Ko._$clearArray$_(this._$_instances$_);
            for (const e of s.insts) {
                const n = i._$GetInstanceByUID$_(e);
                n && this._$_instances$_.push(n);
            }
        }
    };
}

{
    let l = function(t, s) {
        let i = t.get(s);
        return i || (i = new Map(), t.set(s, i)), i;
    };
    l;
    const $o = self._$C3$_;
    $o._$SDKPluginBase$_ = class extends $o._$DefendedBase$_ {
        constructor(t) {
            super(), this._$_runtime$_ = t.runtime, this._$_name$_ = t.name ?? "", 
            this._$_isSingleGlobal$_ = !!t._$isSingleGlobal$_, this._$_isWorldType$_ = !!t._$isWorld$_, 
            this._$_isRotatable$_ = !!t._$isRotatable$_, this._$_mustPredraw$_ = !!t._$mustPredraw$_, 
            this._$_hasEffects$_ = !!t._$hasEffects$_, this._$_supportsSceneGraph$_ = !!t._$supportsSceneGraph$_, 
            this._$_supportsMesh$_ = !!t._$supportsMesh$_, this._$_isHTMLElementType$_ = !!t._$isHTMLElementType$_, 
            this._$_is3d$_ = !!t._$is3d$_, this._$_sdkVersion$_ = t._$sdkVersion$_, 
            this._$_singleGlobalObjectClass$_ = null, this._$_boundACEMethodCache$_ = new Map(), 
            this._$_boundACEMethodCache_1param$_ = new Map(), this._$_boundACEMethodCache_2params$_ = new Map(), 
            this._$_boundACEMethodCache_3params$_ = new Map(), this._$_scriptInterfaceClass$_ = t._$scriptInterfaceClass$_, 
            this._$_iPlugin$_ = null;
        }
        _$Release$_() {
            this._$_runtime$_ = null;
        }
        _$GetRuntime$_() {
            return this._$_runtime$_;
        }
        _$GetName$_() {
            return this._$_name$_;
        }
        _$OnCreate$_() {}
        _$GetConstructor$_() {
            return (2 <= this._$GetSdkVersion$_() ? this._$_iPlugin$_ : this).constructor;
        }
        _$GetSdkVersion$_() {
            return this._$_sdkVersion$_;
        }
        _$GetScriptInterfaceClass$_(t = !1) {
            let s = this._$_scriptInterfaceClass$_;
            return t && "function" != typeof s && 2 <= this._$GetSdkVersion$_() ? globalThis._$ISDKPluginBase$_ : s;
        }
        _$IsSingleGlobal$_() {
            return this._$_isSingleGlobal$_;
        }
        _$IsWorldType$_() {
            return this._$_isWorldType$_;
        }
        _$IsHTMLElementType$_() {
            return this._$_isHTMLElementType$_;
        }
        _$Is3D$_() {
            return this._$_is3d$_;
        }
        _$IsRotatable$_() {
            return this._$_isRotatable$_;
        }
        _$MustPreDraw$_() {
            return this._$_mustPredraw$_;
        }
        _$HasEffects$_() {
            return this._$_hasEffects$_;
        }
        _$SupportsSceneGraph$_() {
            return this._$_supportsSceneGraph$_;
        }
        _$SupportsMesh$_() {
            return this._$_supportsMesh$_;
        }
        _$_GetBoundACEMethod$_(t, s) {
            if (!s) throw new Error("missing 'this' binding");
            let i = this._$_boundACEMethodCache$_.get(t);
            return i || (i = t.bind(s), this._$_boundACEMethodCache$_.set(t, i)), 
            i;
        }
        _$_GetBoundACEMethod_1param$_(t, s, i) {
            if (!s) throw new Error("missing 'this' binding");
            let e = l(this._$_boundACEMethodCache_1param$_, t), n = e.get(i);
            return n || (n = t.bind(s, i), e.set(i, n)), n;
        }
        _$_GetBoundACEMethod_2params$_(t, s, i, e) {
            if (!s) throw new Error("missing 'this' binding");
            let n = l(this._$_boundACEMethodCache_2params$_, t), h = l(n, i), r = h.get(e);
            return r || (r = t.bind(s, i, e), h.set(e, r)), r;
        }
        _$_GetBoundACEMethod_3params$_(t, s, i, e, n) {
            if (!s) throw new Error("missing 'this' binding");
            let h = l(this._$_boundACEMethodCache_3params$_, t), r = l(h, i), o = l(r, e), a = o.get(n);
            return a || (a = t.bind(s, i, e, n), o.set(n, a)), a;
        }
        _$_SetSingleGlobalObjectClass$_(t) {
            if (!this._$IsSingleGlobal$_()) throw new Error("must be single-global plugin");
            this._$_singleGlobalObjectClass$_ = t;
        }
        _$GetSingleGlobalObjectClass$_() {
            if (this._$IsSingleGlobal$_()) return this._$_singleGlobalObjectClass$_;
            throw new Error("must be single-global plugin");
        }
        _$GetSingleGlobalInstance$_() {
            if (this._$IsSingleGlobal$_()) return this._$_singleGlobalObjectClass$_._$GetSingleGlobalInstance$_();
            throw new Error("must be single-global plugin");
        }
        _$_InitScriptInterface$_() {
            const t = this._$GetSdkVersion$_(), s = ($o._$AddonManager$_._$_PushInitObject$_(this, t), 
            this._$GetScriptInterfaceClass$_(!0));
            if (s) {
                if (this._$_iPlugin$_ = new s(), !(this._$_iPlugin$_ instanceof self._$IPlugin$_)) throw new TypeError("plugin class must derive from IPlugin");
            } else this._$_iPlugin$_ = new self._$IPlugin$_();
            $o._$AddonManager$_._$_PopInitObject$_(t);
        }
        _$GetIPlugin$_() {
            return this._$_iPlugin$_;
        }
    };
}

{
    const ta = self._$C3$_;
    ta._$SDKDOMPluginBase$_ = class extends ta._$SDKPluginBase$_ {
        constructor(t, s) {
            super(t), this._$_domComponentId$_ = s, this._$_nextElementId$_ = 0, 
            this._$_instMap$_ = new Map(), this._$AddElementMessageHandler$_("elem-focused", t => t._$_OnElemFocused$_()), 
            this._$AddElementMessageHandler$_("elem-blurred", t => {
                t && t._$_OnElemBlurred$_();
            });
        }
        _$Release$_() {
            super._$Release$_();
        }
        _$_AddElement$_(t) {
            const s = this._$_nextElementId$_++;
            return this._$_instMap$_.set(s, t), s;
        }
        _$_RemoveElement$_(t) {
            this._$_instMap$_.delete(t);
        }
        _$AddElementMessageHandler$_(t, i) {
            this._$_runtime$_._$AddDOMComponentMessageHandler$_(this._$_domComponentId$_, t, t => {
                const s = this._$_instMap$_.get(t.elementId);
                i(s, t);
            });
        }
    };
}

{
    const sa = self._$C3$_;
    sa._$SDKTypeBase$_ = class extends sa._$DefendedBase$_ {
        constructor(t) {
            super(), this._$_objectClass$_ = t, this._$_runtime$_ = t._$GetRuntime$_(), 
            this._$_plugin$_ = t._$GetPlugin$_();
        }
        _$Release$_() {
            this._$_objectClass$_ = null, this._$_runtime$_ = null, this._$_plugin$_ = null;
        }
        _$GetObjectClass$_() {
            return this._$_objectClass$_;
        }
        _$GetRuntime$_() {
            return this._$_runtime$_;
        }
        _$GetPlugin$_() {
            return this._$_plugin$_;
        }
        _$GetImageInfo$_() {
            return this._$_objectClass$_._$GetImageInfo$_();
        }
        _$OnCreate$_() {}
        _$FinishCondition$_(t) {}
        _$BeforeRunAction$_(t) {}
        _$AfterRunAction$_(t) {}
        _$LoadTextures$_(t) {}
        _$ReleaseTextures$_() {}
        _$OnDynamicTextureLoadComplete$_() {}
        _$PreloadTexturesWithInstances$_(t) {}
        _$LoadTilemapData$_() {}
        _$GetScriptInterfaceClass$_() {
            return null;
        }
        _$DispatchScriptEvent$_(t, s, i) {
            const e = sa._$New$_(sa.Event, t, s);
            e._$objectClass$_ = this, i && Object.assign(e, i), this._$GetObjectClass$_()._$DispatchUserScriptEvent$_(e);
        }
    };
}

{
    const ia = self._$C3$_;
    ia._$SDKInstanceBase$_ = class extends ia._$DefendedBase$_ {
        constructor(t, s) {
            super(), this._$_inst$_ = t, this._$_domComponentId$_ = s, this._$_wrapperComponentId$_ = null, 
            this._$_runtime$_ = t._$GetRuntime$_(), this._$_objectClass$_ = this._$_inst$_._$GetObjectClass$_(), 
            this._$_sdkType$_ = this._$_objectClass$_._$GetSdkType$_(), this._$_tickFunc$_ = null, 
            this._$_tick2Func$_ = null, this._$_isTicking$_ = !1, this._$_isTicking2$_ = !1, 
            this._$_disposables$_ = null, this._$_wasReleased$_ = !1;
        }
        _$Release$_() {
            this._$_wasReleased$_ = !0, this._$_StopTicking$_(), this._$_StopTicking2$_(), 
            this._$_tickFunc$_ = null, this._$_tick2Func$_ = null, this._$_disposables$_ && (this._$_disposables$_._$Release$_(), 
            this._$_disposables$_ = null), this._$_inst$_ = null, this._$_runtime$_ = null, 
            this._$_objectClass$_ = null, this._$_sdkType$_ = null;
        }
        _$WasReleased$_() {
            return this._$_wasReleased$_;
        }
        _$GetInstance$_() {
            return this._$_inst$_;
        }
        _$GetRuntime$_() {
            return this._$_runtime$_;
        }
        _$GetObjectClass$_() {
            return this._$_objectClass$_;
        }
        _$GetPlugin$_() {
            return this._$_sdkType$_._$GetPlugin$_();
        }
        _$GetSdkType$_() {
            return this._$_sdkType$_;
        }
        _$GetScriptInterface$_() {
            return this._$_inst$_._$GetInterfaceClass$_();
        }
        _$Trigger$_(t) {
            return this._$_runtime$_._$Trigger$_(t, this._$_inst$_, null);
        }
        _$DebugTrigger$_(t) {
            return this._$_runtime$_._$DebugTrigger$_(t, this._$_inst$_, null);
        }
        _$TriggerAsync$_(t) {
            return this._$_runtime$_._$TriggerAsync$_(t, this._$_inst$_, null);
        }
        _$FastTrigger$_(t, s) {
            return this._$_runtime$_._$FastTrigger$_(t, this._$_inst$_, s);
        }
        _$DebugFastTrigger$_(t, s) {
            return this._$_runtime$_._$DebugFastTrigger$_(t, this._$_inst$_, s);
        }
        _$ScheduleTriggers$_(t) {
            return this._$_runtime$_._$ScheduleTriggers$_(t);
        }
        _$AddDOMMessageHandler$_(t, s) {
            this._$_runtime$_._$AddDOMComponentMessageHandler$_(this._$_domComponentId$_, t, s);
        }
        _$AddDOMMessageHandlers$_(t) {
            for (const [ s, i ] of t) this._$AddDOMMessageHandler$_(s, i);
        }
        _$PostToDOM$_(t, s) {
            this._$_runtime$_._$PostComponentMessageToDOM$_(this._$_domComponentId$_, t, s);
        }
        _$PostToDOMAsync$_(t, s) {
            return this._$_runtime$_._$PostComponentMessageToDOMAsync$_(this._$_domComponentId$_, t, s);
        }
        _$_PostToDOMMaybeSync$_(t, s) {
            if (!this._$_runtime$_._$IsInWorker$_()) return window.c3_runtimeInterface._OnMessageFromRuntime({
                type: "event",
                component: this._$_domComponentId$_,
                handler: t,
                data: s,
                responseId: null
            });
            this._$PostToDOM$_(t, s);
        }
        _$SetWrapperExtensionComponentId$_(t) {
            if (!t) throw new Error("cannot set empty component id");
            this._$_wrapperComponentId$_ = t;
        }
        _$IsWrapperExtensionAvailable$_() {
            if (this._$_wrapperComponentId$_) return this._$_runtime$_._$HasWrapperComponentId$_(this._$_wrapperComponentId$_);
            throw new Error("wrapper extension component id not set");
        }
        _$AddWrapperExtensionMessageHandler$_(t, s) {
            if (!this._$_wrapperComponentId$_) throw new Error("wrapper extension component id not set");
            this._$_runtime$_._$AddWrapperExtensionMessageHandler$_(this._$_wrapperComponentId$_, t, s);
        }
        _$AddWrapperExtensionMessageHandlers$_(t) {
            for (const [ s, i ] of t) this._$AddWrapperExtensionMessageHandler$_(s, i);
        }
        _$SendWrapperExtensionMessage$_(t, s) {
            if (!this._$_wrapperComponentId$_) throw new Error("wrapper extension component id not set");
            this._$_runtime$_._$SendWrapperExtensionMessage$_(this._$_wrapperComponentId$_, t, s);
        }
        _$SendWrapperExtensionMessageAsync$_(t, s) {
            if (this._$_wrapperComponentId$_) return this._$_runtime$_._$SendWrapperExtensionMessageAsync$_(this._$_wrapperComponentId$_, t, s);
            throw new Error("wrapper extension component id not set");
        }
        _$Tick$_() {}
        _$Tick2$_() {}
        _$_StartTicking$_() {
            if (!this._$_isTicking$_) {
                if (!this._$_tickFunc$_) if (this._$_runtime$_._$IsDebug$_()) {
                    const s = globalThis.C3Debugger, i = this._$GetPlugin$_();
                    this._$_tickFunc$_ = () => {
                        const t = performance.now();
                        this._$Tick$_(), s.AddIndividualPluginTickTime(i, performance.now() - t);
                    };
                } else this._$_tickFunc$_ = () => this._$Tick$_();
                this._$_runtime$_._$Dispatcher$_().addEventListener("tick", this._$_tickFunc$_), 
                this._$_isTicking$_ = !0;
            }
        }
        _$_StopTicking$_() {
            this._$_isTicking$_ && (this._$_runtime$_._$Dispatcher$_().removeEventListener("tick", this._$_tickFunc$_), 
            this._$_isTicking$_ = !1);
        }
        _$IsTicking$_() {
            return this._$_isTicking$_;
        }
        _$_StartTicking2$_() {
            if (!this._$_isTicking2$_) {
                if (!this._$_tick2Func$_) if (this._$_runtime$_._$IsDebug$_()) {
                    const s = globalThis.C3Debugger, i = this._$GetPlugin$_();
                    this._$_tick2Func$_ = () => {
                        const t = performance.now();
                        this._$Tick2$_(), s.AddIndividualPluginTickTime(i, performance.now() - t);
                    };
                } else this._$_tick2Func$_ = () => this._$Tick2$_();
                this._$_runtime$_._$Dispatcher$_().addEventListener("tick2", this._$_tick2Func$_), 
                this._$_isTicking2$_ = !0;
            }
        }
        _$_StopTicking2$_() {
            this._$_isTicking2$_ && (this._$_runtime$_._$Dispatcher$_().removeEventListener("tick2", this._$_tick2Func$_), 
            this._$_isTicking2$_ = !1);
        }
        _$IsTicking2$_() {
            return this._$_isTicking2$_;
        }
        _$GetDebuggerProperties$_() {
            return [];
        }
        _$SaveToJson$_() {
            return null;
        }
        _$LoadFromJson$_(t) {}
        _$GetPropertyValueByIndex$_(t) {}
        _$SetPropertyValueByIndex$_(t, s) {}
        _$OffsetPropertyValueByIndex$_(t, s, i) {
            if (0 !== s) {
                const e = this._$GetPropertyValueByIndex$_(t);
                if ("number" != typeof e) throw new Error("expected number");
                this._$SetPropertyValueByIndex$_(t, e + s, i);
            }
        }
        _$SetPropertyColorOffsetValueByIndex$_(t, s, i, e) {}
        _$CallAction$_(t, ...s) {
            t.call(this, ...s);
        }
        _$CallExpression$_(t, ...s) {
            return t.call(this, ...s);
        }
        _$GetScriptInterfaceClass$_() {
            return null;
        }
        _$DispatchScriptEvent$_(t, s, i) {
            if (this._$_inst$_._$HasScriptInterface$_()) {
                const e = this._$GetScriptInterface$_(), n = ia._$New$_(ia.Event, t, s);
                n._$instance$_ = e, i && Object.assign(n, i), e.dispatchEvent(n);
            }
        }
        _$MustPreDraw$_() {
            return !1;
        }
    };
}

{
    const ea = self._$C3$_;
    ea._$SDKWorldInstanceBase$_ = class extends ea._$SDKInstanceBase$_ {
        constructor(t, s) {
            super(t, s), this._$_worldInfo$_ = t._$GetWorldInfo$_(), this._$_renderercontextlost_handler$_ = null, 
            this._$_renderercontextrestored_handler$_ = null;
        }
        _$Release$_() {
            if (this._$_renderercontextlost_handler$_) {
                const t = this._$_runtime$_._$Dispatcher$_();
                t.removeEventListener("renderercontextlost", this._$_renderercontextlost_handler$_), 
                t.removeEventListener("renderercontextrestored", this._$_renderercontextrestored_handler$_), 
                this._$_renderercontextlost_handler$_ = null, this._$_renderercontextrestored_handler$_ = null;
            }
            this._$_worldInfo$_ = null, super._$Release$_();
        }
        _$HandleWebGLContextLoss$_() {
            this._$HandleRendererContextLoss$_();
        }
        _$OnWebGLContextLost$_() {}
        _$OnWebGLContextRestored$_() {}
        _$HandleRendererContextLoss$_() {
            if (!this._$_renderercontextlost_handler$_) {
                this._$_renderercontextlost_handler$_ = () => this._$OnRendererContextLost$_(), 
                this._$_renderercontextrestored_handler$_ = () => this._$OnRendererContextRestored$_();
                const t = this._$_runtime$_._$Dispatcher$_();
                t.addEventListener("renderercontextlost", this._$_renderercontextlost_handler$_), 
                t.addEventListener("renderercontextrestored", this._$_renderercontextrestored_handler$_);
            }
        }
        _$OnRendererContextLost$_() {
            this._$OnWebGLContextLost$_();
        }
        _$OnRendererContextRestored$_() {
            this._$OnWebGLContextRestored$_();
        }
        _$GetWorldInfo$_() {
            return this._$_worldInfo$_;
        }
        _$IsOriginalSizeKnown$_() {
            return !1;
        }
        _$GetOriginalWidth$_() {
            if (!this._$IsOriginalSizeKnown$_()) throw new Error("original size not known");
            const t = this._$GetCurrentImageInfo$_();
            if (t) return t._$GetWidth$_();
        }
        _$GetOriginalHeight$_() {
            if (!this._$IsOriginalSizeKnown$_()) throw new Error("original size not known");
            const t = this._$GetCurrentImageInfo$_();
            if (t) return t._$GetHeight$_();
        }
        _$GetCurrentImageInfo$_() {
            return null;
        }
        _$GetCurrentSurfaceSize$_() {
            const t = this._$GetCurrentImageInfo$_();
            if (t) {
                const s = t._$GetTexture$_();
                if (s) return [ s._$GetWidth$_(), s._$GetHeight$_() ];
            }
            return [ 100, 100 ];
        }
        _$GetCurrentTexRect$_() {
            const t = this._$GetCurrentImageInfo$_();
            return t ? t._$GetTexRect$_() : null;
        }
        _$GetCurrentTexQuad$_() {
            const t = this._$GetCurrentImageInfo$_();
            return t ? t._$GetTexQuad$_() : null;
        }
        _$IsCurrentTexRotated$_() {
            const t = this._$GetCurrentImageInfo$_();
            return !!t && t._$IsRotated$_();
        }
        _$GetImagePoint$_(t) {
            const s = this._$_inst$_._$GetWorldInfo$_();
            return [ s._$GetX$_(), s._$GetY$_(), s._$GetTotalZElevation$_() ];
        }
        _$LoadTilemapData$_(t, s, i) {}
        _$TestPointOverlapTile$_(t, s) {}
        _$RendersToOwnZPlane$_() {
            return !0;
        }
    };
}

{
    const na = self._$C3$_, ha = na._$New$_(na.Rect);
    na._$SDKDOMInstanceBase$_ = class extends na._$SDKWorldInstanceBase$_ {
        constructor(t, s) {
            super(t, s), this._$_elementId$_ = this._$GetPlugin$_()._$_AddElement$_(this), 
            this._$_isElementShowing$_ = !0, this._$_elemHasFocus$_ = !1, this._$_autoFontSize$_ = !1, 
            this._$_autoFontSizeOffset$_ = -.2, this._$_lastRect$_ = na._$New$_(na.Rect, 0, 0, -1, -1);
            const i = this._$_runtime$_._$GetCanvasManager$_();
            this._$_lastWindowWidth$_ = i._$GetLastWidth$_(), this._$_lastWindowHeight$_ = i._$GetLastHeight$_(), 
            this._$_lastHTMLIndex$_ = -1, this._$_lastHTMLZIndex$_ = -1, this._$_isPendingUpdateState$_ = !1, 
            this._$_StartTicking$_();
        }
        _$Release$_() {
            this._$GetPlugin$_()._$_RemoveElement$_(this._$_elementId$_), this._$PostToDOMElement$_("destroy"), 
            this._$_elementId$_ = -1, super._$Release$_();
        }
        _$_GetElementInDOMMode$_() {
            if (this._$_runtime$_._$IsInWorker$_()) throw new Error("not valid in worker mode");
            return this._$_PostToDOMElementMaybeSync$_("get-element");
        }
        _$PostToDOMElement$_(t, s) {
            (s = s || {}).elementId = this._$_elementId$_, this._$PostToDOM$_(t, s);
        }
        _$_PostToDOMElementMaybeSync$_(t, s) {
            return (s = s || {}).elementId = this._$_elementId$_, this._$_PostToDOMMaybeSync$_(t, s);
        }
        _$PostToDOMElementAsync$_(t, s) {
            return (s = s || {}).elementId = this._$_elementId$_, this._$PostToDOMAsync$_(t, s);
        }
        _$CreateElement$_(t) {
            t = t || {};
            const s = this._$GetWorldInfo$_();
            t.elementId = this._$_elementId$_, t.isVisible = s._$IsVisible$_(), 
            t.htmlIndex = s._$GetLayer$_()._$GetHTMLIndex$_(), t.htmlZIndex = s._$GetHTMLZIndex$_(), 
            Object.assign(t, this._$GetElementState$_()), this._$_isElementShowing$_ = !!t.isVisible, 
            this._$_PostToDOMMaybeSync$_("create", t), this._$_UpdatePosition$_(!0);
        }
        _$SetElementVisible$_(t) {
            this._$_isElementShowing$_ !== (t = !!t) && (this._$_isElementShowing$_ = t, 
            this._$PostToDOMElement$_("set-visible", {
                isVisible: t
            }));
        }
        _$Tick$_() {
            this._$_UpdatePosition$_(!1);
        }
        _$_ShouldPreserveElement$_() {
            const t = this._$_runtime$_._$GetCanvasManager$_()._$GetFullscreenMode$_();
            return "Android" === na._$Platform$_._$OS$_ && ("scale-inner" === t || "scale-outer" === t || "crop" === t);
        }
        _$_UpdatePosition$_(u) {
            if (!this._$GetInstance$_()._$IsDestroyed$_()) {
                let t = this._$GetWorldInfo$_(), s = t._$GetLayer$_(), i = t._$GetBoundingBox$_(), [ e, n ] = s._$LayerToCanvasCss$_(i._$getLeft$_(), i._$getTop$_()), [ h, r ] = s._$LayerToCanvasCss$_(i._$getRight$_(), i._$getBottom$_()), o = this._$_runtime$_._$GetCanvasManager$_(), a = o._$GetCssWidth$_(), l = o._$GetCssHeight$_();
                if (t._$IsVisible$_() && s._$IsVisible$_()) if (!this._$_ShouldPreserveElement$_() && (h <= 0 || r <= 0 || a <= e || l <= n)) this._$SetElementVisible$_(!1); else {
                    ha.set(e, n, h, r);
                    const c = o._$GetLastWidth$_(), f = o._$GetLastHeight$_(), d = s._$GetHTMLIndex$_(), p = t._$GetHTMLZIndex$_();
                    if (!u && ha.equals(this._$_lastRect$_) && this._$_lastWindowWidth$_ === c && this._$_lastWindowHeight$_ === f && this._$_lastHTMLIndex$_ === d && this._$_lastHTMLZIndex$_ === p) this._$SetElementVisible$_(!0); else {
                        this._$_lastRect$_._$copy$_(ha), this._$_lastWindowWidth$_ = c, 
                        this._$_lastWindowHeight$_ = f, this._$_lastHTMLIndex$_ = d, 
                        this._$_lastHTMLZIndex$_ = p, this._$SetElementVisible$_(!0);
                        let t = null;
                        this._$_autoFontSize$_ && (t = s._$GetDisplayScale$_() + this._$_autoFontSizeOffset$_), 
                        this._$PostToDOMElement$_("update-position", {
                            left: Math.round(this._$_lastRect$_._$getLeft$_()),
                            top: Math.round(this._$_lastRect$_._$getTop$_()),
                            width: Math.round(this._$_lastRect$_.width()),
                            height: Math.round(this._$_lastRect$_.height()),
                            htmlIndex: d,
                            htmlZIndex: p,
                            fontSize: t
                        });
                    }
                } else this._$SetElementVisible$_(!1);
            }
        }
        _$FocusElement$_() {
            this._$_PostToDOMElementMaybeSync$_("focus", {
                focus: !0
            });
        }
        _$BlurElement$_() {
            this._$_PostToDOMElementMaybeSync$_("focus", {
                focus: !1
            });
        }
        _$_OnElemFocused$_() {
            this._$_elemHasFocus$_ = !0;
        }
        _$_OnElemBlurred$_() {
            this._$_elemHasFocus$_ = !1;
        }
        _$IsElementFocused$_() {
            return this._$_elemHasFocus$_;
        }
        _$SetElementCSSStyle$_(t, s) {
            this._$PostToDOMElement$_("set-css-style", {
                prop: na._$CSSToCamelCase$_(t),
                val: s
            });
        }
        _$SetElementAttribute$_(t, s) {
            this._$PostToDOMElement$_("set-attribute", {
                name: t,
                val: s
            });
        }
        _$RemoveElementAttribute$_(t) {
            this._$PostToDOMElement$_("remove-attribute", {
                name: t
            });
        }
        _$UpdateElementState$_() {
            this._$_isPendingUpdateState$_ || (this._$_isPendingUpdateState$_ = !0, 
            Promise.resolve().then(() => {
                this._$_isPendingUpdateState$_ = !1, this._$PostToDOMElement$_("update-state", this._$GetElementState$_());
            }));
        }
        _$GetElementState$_() {}
        _$GetElementId$_() {
            return this._$_elementId$_;
        }
    };
}

{
    const ra = self._$C3$_, oa = self._$IBehavior$_;
    ra._$SDKBehaviorBase$_ = class extends ra._$DefendedBase$_ {
        constructor(t) {
            super(), this._$_runtime$_ = t.runtime, this._$_name$_ = t.name ?? "", 
            this._$_myObjectClasses$_ = ra._$New$_(ra._$ArraySet$_), this._$_myInstances$_ = ra._$New$_(ra._$ArraySet$_), 
            this._$_sdkVersion$_ = t._$sdkVersion$_, this._$_scriptInterfaceClass$_ = t._$scriptInterfaceClass$_, 
            this._$_iBehavior$_ = null;
        }
        _$Release$_() {
            this._$_myInstances$_._$Release$_(), this._$_myObjectClasses$_._$Release$_(), 
            this._$_runtime$_ = null;
        }
        _$GetRuntime$_() {
            return this._$_runtime$_;
        }
        _$GetName$_() {
            return this._$_name$_;
        }
        _$OnCreate$_() {}
        _$GetSdkVersion$_() {
            return this._$_sdkVersion$_;
        }
        _$GetScriptInterfaceClass$_(t = !1) {
            let s = this._$_scriptInterfaceClass$_;
            return t && "function" != typeof s && 2 <= this._$GetSdkVersion$_() ? globalThis._$ISDKBehaviorBase$_ : s;
        }
        _$_AddObjectClass$_(t) {
            this._$_myObjectClasses$_._$Add$_(t);
        }
        _$GetObjectClasses$_() {
            return this._$_myObjectClasses$_._$GetArray$_();
        }
        _$_AddInstance$_(t) {
            this._$_myInstances$_._$Add$_(t);
        }
        _$_RemoveInstance$_(t) {
            this._$_myInstances$_._$Delete$_(t);
        }
        _$GetInstances$_() {
            return this._$_myInstances$_._$GetArray$_();
        }
        _$_InitScriptInterface$_() {
            const t = this._$GetSdkVersion$_(), s = (ra._$AddonManager$_._$_PushInitObject$_(this, t), 
            this._$GetScriptInterfaceClass$_(!0));
            if (s) {
                if (this._$_iBehavior$_ = new s(), !(this._$_iBehavior$_ instanceof oa)) throw new TypeError("behavior class must derive from IBehavior");
            } else this._$_iBehavior$_ = new oa();
            ra._$AddonManager$_._$_PopInitObject$_(t);
        }
        _$GetIBehavior$_() {
            return this._$_iBehavior$_;
        }
    };
}

{
    const aa = self._$C3$_;
    aa._$SDKBehaviorTypeBase$_ = class extends aa._$DefendedBase$_ {
        constructor(t) {
            super(), this._$_runtime$_ = t._$GetRuntime$_(), this._$_behaviorType$_ = t, 
            this._$_objectClass$_ = t._$GetObjectClass$_(), this._$_behavior$_ = t._$GetBehavior$_(), 
            this._$_behavior$_._$_AddObjectClass$_(this._$_objectClass$_);
        }
        _$Release$_() {
            this._$_runtime$_ = null, this._$_behaviorType$_ = null, this._$_objectClass$_ = null, 
            this._$_behavior$_ = null;
        }
        _$OnCreate$_() {}
        _$GetBehaviorType$_() {
            return this._$_behaviorType$_;
        }
        _$GetObjectClass$_() {
            return this._$_objectClass$_;
        }
        _$GetRuntime$_() {
            return this._$_runtime$_;
        }
        _$GetBehavior$_() {
            return this._$_behavior$_;
        }
    };
}

{
    const la = self._$C3$_;
    la._$SDKBehaviorInstanceBase$_ = class extends la._$DefendedBase$_ {
        constructor(t, s) {
            super(), this._$_behInst$_ = t, this._$_domComponentId$_ = s, this._$_inst$_ = t._$GetObjectInstance$_(), 
            this._$_runtime$_ = t._$GetRuntime$_(), this._$_behaviorType$_ = t._$GetBehaviorType$_(), 
            this._$_sdkType$_ = this._$_behaviorType$_._$GetSdkType$_(), this._$_isTicking$_ = !1, 
            this._$_isTicking2$_ = !1, this._$_isPostTicking$_ = !1, this._$_disposables$_ = null;
        }
        _$Release$_() {
            this._$_StopTicking$_(), this._$_StopTicking2$_(), this._$_StopPostTicking$_(), 
            this._$_disposables$_ && (this._$_disposables$_._$Release$_(), this._$_disposables$_ = null), 
            this._$_behInst$_ = null, this._$_inst$_ = null, this._$_runtime$_ = null, 
            this._$_behaviorType$_ = null, this._$_sdkType$_ = null;
        }
        _$GetBehavior$_() {
            return this._$_behaviorType$_._$GetBehavior$_();
        }
        _$GetBehaviorInstance$_() {
            return this._$_behInst$_;
        }
        _$GetObjectInstance$_() {
            return this._$_inst$_;
        }
        _$GetObjectClass$_() {
            return this._$_inst$_._$GetObjectClass$_();
        }
        _$GetWorldInfo$_() {
            return this._$_inst$_._$GetWorldInfo$_();
        }
        _$GetRuntime$_() {
            return this._$_runtime$_;
        }
        _$GetBehaviorType$_() {
            return this._$_behaviorType$_;
        }
        _$GetSdkType$_() {
            return this._$_sdkType$_;
        }
        _$GetScriptInterface$_() {
            return this._$_behInst$_._$GetScriptInterface$_();
        }
        _$Trigger$_(t) {
            return this._$_runtime$_._$Trigger$_(t, this._$_inst$_, this._$_behaviorType$_);
        }
        _$DebugTrigger$_(t) {
            return this._$_runtime$_._$DebugTrigger$_(t, this._$_inst$_, this._$_behaviorType$_);
        }
        _$TriggerAsync$_(t) {
            return this._$_runtime$_._$TriggerAsync$_(t, this._$_inst$_, this._$_behaviorType$_);
        }
        _$PostCreate$_() {}
        _$Tick$_() {}
        _$Tick2$_() {}
        _$PostTick$_() {}
        _$_StartTicking$_() {
            this._$_isTicking$_ || (this._$_runtime$_._$_AddBehInstToTick$_(this), 
            this._$_isTicking$_ = !0);
        }
        _$_StopTicking$_() {
            this._$_isTicking$_ && (this._$_runtime$_._$_RemoveBehInstToTick$_(this), 
            this._$_isTicking$_ = !1);
        }
        _$IsTicking$_() {
            return this._$_isTicking$_;
        }
        _$_StartTicking2$_() {
            this._$_isTicking2$_ || (this._$_runtime$_._$_AddBehInstToTick2$_(this), 
            this._$_isTicking2$_ = !0);
        }
        _$_StopTicking2$_() {
            this._$_isTicking2$_ && (this._$_runtime$_._$_RemoveBehInstToTick2$_(this), 
            this._$_isTicking2$_ = !1);
        }
        _$IsTicking2$_() {
            return this._$_isTicking2$_;
        }
        _$_StartPostTicking$_() {
            this._$_isPostTicking$_ || (this._$_runtime$_._$_AddBehInstToPostTick$_(this), 
            this._$_isPostTicking$_ = !0);
        }
        _$_StopPostTicking$_() {
            this._$_isPostTicking$_ && (this._$_runtime$_._$_RemoveBehInstToPostTick$_(this), 
            this._$_isPostTicking$_ = !1);
        }
        _$IsPostTicking$_() {
            return this._$_isPostTicking$_;
        }
        _$GetDebuggerProperties$_() {
            return [];
        }
        _$AddDOMMessageHandler$_(t, s) {
            this._$_runtime$_._$AddDOMComponentMessageHandler$_(this._$_domComponentId$_, t, s);
        }
        _$OnSpriteFrameChanged$_(t, s) {}
        _$SaveToJson$_() {
            return null;
        }
        _$LoadFromJson$_(t) {}
        _$GetPropertyValueByIndex$_(t) {}
        _$SetPropertyValueByIndex$_(t, s) {}
        _$OffsetPropertyValueByIndex$_(t, s) {
            if (0 !== s) {
                const i = this._$GetPropertyValueByIndex$_(t);
                if ("number" != typeof i) throw new Error("expected number");
                this._$SetPropertyValueByIndex$_(t, i + s);
            }
        }
        _$SetPropertyColorOffsetValueByIndex$_(t, s, i, e) {}
        _$CallAction$_(t, ...s) {
            t.call(this, ...s);
        }
        _$CallExpression$_(t, ...s) {
            return t.call(this, ...s);
        }
        _$GetScriptInterfaceClass$_() {
            return null;
        }
        _$DispatchScriptEvent$_(t, s, i) {
            if (this._$_behInst$_._$HasScriptInterface$_()) {
                const e = this._$GetScriptInterface$_(), n = la._$New$_(la.Event, t, s);
                n._$behaviorInstance$_ = e, n._$instance$_ = e._$instance$_, i && Object.assign(n, i), 
                e.dispatchEvent(n);
            }
        }
    };
}

{
    let s = function(t) {
        if (t !== i) throw new Error("invalid internal API token");
    }, h = (s, self._$C3$_), i = (h._$Plugins$_ = {}, h._$Behaviors$_ = {}, h._$_GetInternalAPIToken$_()), e = [], n = [], r = [], o = null, a = null, t = null, l = null, u = new Map(), c = new Map();
    h._$AddonManager$_ = class extends h._$DefendedBase$_ {
        constructor(t, s) {
            super(), this._$_runtime$_ = t, this._$_allPlugins$_ = [], this._$_systemPlugin$_ = null, 
            this._$_allBehaviors$_ = [], this._$_delayCreateBehaviors$_ = new Map(), 
            this._$_solidBehavior$_ = null, this._$_jumpthruBehavior$_ = null, this._$_wrapperComponentIds$_ = new Set(s);
        }
        _$CreatePlugin$_(t) {
            const s = t[19], i = this._$_runtime$_._$GetObjectReference$_(t[0]);
            if (!i) throw new Error("missing plugin");
            h._$AddCommonACEs$_(t, i, s);
            const e = 2 <= s ? h._$SDKPluginBase$_ : i, n = h._$New$_(e, {
                runtime: this._$_runtime$_,
                _$isSingleGlobal$_: t[1],
                _$isWorld$_: t[2],
                _$isRotatable$_: t[5],
                _$hasEffects$_: t[8],
                _$mustPredraw$_: t[9],
                _$supportsSceneGraph$_: t[13],
                _$supportsMesh$_: t[14],
                _$isHTMLElementType$_: t[17],
                _$is3d$_: t[18],
                _$sdkVersion$_: s,
                name: t[20],
                _$scriptInterfaceClass$_: 2 <= s ? i : null
            });
            n._$OnCreate$_(), this._$_allPlugins$_.push(n), u.set(i, n);
        }
        _$CreateSystemPlugin$_() {
            this._$_systemPlugin$_ = h._$New$_(h._$Plugins$_._$System$_, {
                runtime: this._$_runtime$_,
                _$isSingleGlobal$_: !0
            }), this._$_systemPlugin$_._$OnCreate$_();
        }
        _$CreateBehavior$_(t) {
            const i = t[1], e = t[2], n = this._$_runtime$_._$GetObjectReference$_(t[0]);
            if (!n) throw new Error("missing behavior");
            this._$_delayCreateBehaviors$_.set(n, () => {
                const t = 2 <= i ? h._$SDKBehaviorBase$_ : n, s = h._$New$_(t, {
                    runtime: this._$_runtime$_,
                    name: e,
                    _$sdkVersion$_: i,
                    _$scriptInterfaceClass$_: 2 <= i ? n : null
                });
                s._$OnCreate$_(), this._$_allBehaviors$_.push(s), c.set(n, s), !this._$_solidBehavior$_ && h._$Behaviors$_.solid && s instanceof h._$Behaviors$_.solid ? this._$_solidBehavior$_ = s : !this._$_jumpthruBehavior$_ && h._$Behaviors$_.jumpthru && s instanceof h._$Behaviors$_.jumpthru && (this._$_jumpthruBehavior$_ = s), 
                s._$_InitScriptInterface$_();
            });
        }
        _$_DelayCreateBehavior$_(t) {
            const s = this._$_delayCreateBehaviors$_.get(t);
            s && (s(), this._$_delayCreateBehaviors$_.delete(t));
        }
        static _$_PushInitObject$_(t, s = 1) {
            if (h._$AddonManager$_._$_PushInitObject$_ !== o) throw new Error("invalid method");
            1 === s && e.push(t), n.push(t);
        }
        static _$_PopInitObject$_(t = 1) {
            if (h._$AddonManager$_._$_PopInitObject$_ !== a) throw new Error("invalid method");
            1 === t && e.pop(), n.pop();
        }
        static _$_GetInitObject$_() {
            if (h._$AddonManager$_._$_GetInitObject$_ !== t) throw new Error("invalid method");
            if (0 === e.length) throw new Error("no init object set");
            return e.at(-1);
        }
        static _$_GetInitObject2$_(t) {
            if (h._$AddonManager$_._$_GetInitObject2$_ !== l) throw new Error("invalid method");
            if (s(t), 0 === n.length) throw new Error("no init object set");
            return n.at(-1);
        }
        static _$_PushInitProperties$_(t) {
            r.push(t);
        }
        static _$_PopInitProperties$_() {
            r.pop();
        }
        static _$_GetInitProperties$_() {
            if (0 === r.length) throw new Error("no init properties set");
            return r.at(-1);
        }
        _$_InitAddonScriptInterfaces$_() {
            for (const t of this._$_allPlugins$_) t._$_InitScriptInterface$_();
        }
        static _$GetPluginByConstructorFunction$_(t) {
            return u.get(t) || null;
        }
        static _$GetBehaviorByConstructorFunction$_(t) {
            return c.get(t) || null;
        }
        _$GetSystemPlugin$_() {
            return this._$_systemPlugin$_;
        }
        _$GetSolidBehavior$_() {
            return this._$_solidBehavior$_;
        }
        _$GetJumpthruBehavior$_() {
            return this._$_jumpthruBehavior$_;
        }
        _$HasWrapperComponentId$_(t) {
            return this._$_wrapperComponentIds$_.has(t);
        }
    }, o = h._$AddonManager$_._$_PushInitObject$_, a = h._$AddonManager$_._$_PopInitObject$_, 
    t = h._$AddonManager$_._$_GetInitObject$_, l = h._$AddonManager$_._$_GetInitObject2$_;
}

{
    const ua = self._$C3$_, ca = new Set();
    ua._$ImageInfo$_ = class extends ua._$DefendedBase$_ {
        constructor() {
            super(), this._$_generation$_ = 0, this._$_url$_ = "", this._$_size$_ = 0, 
            this._$_offsetX$_ = 0, this._$_offsetY$_ = 0, this._$_width$_ = 0, this._$_height$_ = 0, 
            this._$_isRotated$_ = !1, this._$_hasMetaData$_ = !1, this._$_imageAsset$_ = null, 
            this._$_textureState$_ = "", this._$_rcTex$_ = ua._$New$_(ua.Rect), 
            this._$_quadTex$_ = ua._$New$_(ua._$Quad$_), this._$_blobUrl$_ = "", 
            this._$_iImageInfo$_ = new self._$IImageInfo$_(this), ca.add(this);
        }
        _$Release$_() {
            this._$ReleaseTexture$_(), this._$_imageAsset$_ && 0 === this._$_imageAsset$_._$GetRefCount$_() && this._$_imageAsset$_._$Release$_(), 
            this._$_imageAsset$_ = null, ca.delete(this), this._$ReleaseBlobURL$_();
        }
        static _$OnRendererContextLost$_() {
            for (const t of ca) t._$_textureState$_ = "", t._$_rcTex$_.set(0, 0, 0, 0), 
            t._$_quadTex$_._$setFromRect$_(t._$_rcTex$_);
        }
        _$LoadData$_(t) {
            this._$_url$_ = t[0], this._$_size$_ = t[1], this._$_offsetX$_ = t[2], 
            this._$_offsetY$_ = t[3], this._$_width$_ = t[4], this._$_height$_ = t[5], 
            this._$_isRotated$_ = t[6], this._$_hasMetaData$_ = !0;
        }
        _$LoadDynamicAsset$_(t, s) {
            if (this._$_imageAsset$_) throw new Error("already loaded asset");
            this._$_url$_ = s;
            const i = {};
            return ua._$IsAbsoluteURL$_(s) && (i._$loadPolicy$_ = "remote"), this._$LoadAsset$_(t, i), 
            this._$_imageAsset$_._$Load$_();
        }
        _$LoadDynamicBlobAsset$_(t, s) {
            if (this._$_imageAsset$_) throw new Error("already loaded asset");
            this._$_url$_ = "", this._$_size$_ = s.size, this._$_imageAsset$_ = ua._$New$_(ua._$ImageAsset$_, t._$GetAssetManager$_(), {
                blob: s,
                size: this._$_size$_,
                _$loadPolicy$_: "local"
            });
        }
        _$ReplaceWith$_(t) {
            if (t === this) throw new Error("cannot replace with self");
            this._$_generation$_++, this._$ReleaseTexture$_(), this._$_url$_ = t._$_url$_, 
            this._$_size$_ = t._$_size$_, this._$_offsetX$_ = t._$_offsetX$_, this._$_offsetY$_ = t._$_offsetY$_, 
            this._$_width$_ = t._$_width$_, this._$_height$_ = t._$_height$_, this._$_isRotated$_ = t._$_isRotated$_, 
            this._$_hasMetaData$_ = t._$_hasMetaData$_, this._$_imageAsset$_ = t._$_imageAsset$_, 
            this._$_textureState$_ = t._$_textureState$_, this._$_rcTex$_ = t._$_rcTex$_, 
            this._$_quadTex$_ = t._$_quadTex$_, this._$ReleaseBlobURL$_();
        }
        _$GetURL$_() {
            return this._$_url$_;
        }
        _$GetSize$_() {
            return this._$_size$_;
        }
        _$GetOffsetX$_() {
            return this._$_offsetX$_;
        }
        _$GetOffsetY$_() {
            return this._$_offsetY$_;
        }
        _$IsRotated$_() {
            return this._$_isRotated$_;
        }
        _$GetWidth$_() {
            return this._$_width$_;
        }
        _$GetHeight$_() {
            return this._$_height$_;
        }
        _$GetSheetWidth$_() {
            return this._$_imageAsset$_._$GetWidth$_();
        }
        _$GetSheetHeight$_() {
            return this._$_imageAsset$_._$GetHeight$_();
        }
        _$LoadAsset$_(t, s) {
            if (this._$_imageAsset$_) throw new Error("already got asset");
            s = Object.assign({}, s, {
                url: this._$GetURL$_(),
                size: this._$GetSize$_()
            }), this._$_imageAsset$_ = t._$LoadImage$_(s);
        }
        _$IsLoaded$_() {
            return this._$_imageAsset$_ && this._$_imageAsset$_._$IsLoaded$_();
        }
        async _$LoadStaticTexture$_(t, s) {
            if (!this._$_imageAsset$_) throw new Error("no asset");
            if (this._$_textureState$_) throw new Error("already loaded texture");
            const i = this._$_generation$_, e = (this._$_textureState$_ = "loading", 
            await this._$_imageAsset$_._$LoadStaticTexture$_(t, s));
            if (this._$_generation$_ !== i) return null;
            if (!e) return this._$_textureState$_ = "", null;
            this._$_textureState$_ = "loaded", this._$_hasMetaData$_ || (this._$_width$_ = e._$GetWidth$_(), 
            this._$_height$_ = e._$GetHeight$_(), this._$_hasMetaData$_ = !0);
            const n = this._$_isRotated$_ ? this._$_height$_ : this._$_width$_, h = this._$_isRotated$_ ? this._$_width$_ : this._$_height$_;
            return this._$_rcTex$_.set(this._$_offsetX$_, this._$_offsetY$_, this._$_offsetX$_ + n, this._$_offsetY$_ + h), 
            this._$_rcTex$_._$divide$_(e._$GetWidth$_(), e._$GetHeight$_()), this._$_quadTex$_._$setFromRect$_(this._$_rcTex$_), 
            this._$_isRotated$_ && this._$_quadTex$_._$rotatePointsAnticlockwise$_(), 
            e;
        }
        _$ReleaseTexture$_() {
            this._$_textureState$_ && (this._$_imageAsset$_ && this._$_imageAsset$_._$ReleaseTexture$_(), 
            this._$_textureState$_ = "", this._$_rcTex$_.set(0, 0, 0, 0), this._$_quadTex$_._$setFromRect$_(this._$_rcTex$_));
        }
        _$GetTexture$_() {
            return this._$_imageAsset$_ && "loaded" === this._$_textureState$_ ? this._$_imageAsset$_._$GetTexture$_() : null;
        }
        _$GetTexRect$_() {
            return this._$_rcTex$_;
        }
        _$GetTexQuad$_() {
            return this._$_quadTex$_;
        }
        _$GetIImageInfo$_() {
            return this._$_iImageInfo$_;
        }
        _$GetImageAsset$_() {
            return this._$_imageAsset$_;
        }
        async _$ExtractImageToCanvas$_(t) {
            t = t || await this._$_imageAsset$_._$LoadToDrawable$_();
            const s = ua._$CreateCanvas$_(this._$_width$_, this._$_height$_), i = s.getContext("2d");
            return this._$_isRotated$_ ? (i.rotate(Math.PI / -2), i.translate(-this._$_height$_, 0), 
            i.drawImage(t, this._$_offsetX$_, this._$_offsetY$_, this._$_height$_, this._$_width$_, 0, 0, this._$_height$_, this._$_width$_)) : i.drawImage(t, this._$_offsetX$_, this._$_offsetY$_, this._$_width$_, this._$_height$_, 0, 0, this._$_width$_, this._$_height$_), 
            s;
        }
        async _$ExtractImageToBlobURL$_(t) {
            if (!this._$_blobUrl$_) {
                const s = await this._$ExtractImageToCanvas$_(t), i = await ua._$CanvasToBlob$_(s);
                this._$_blobUrl$_ = URL.createObjectURL(i);
            }
            return this._$_blobUrl$_;
        }
        _$ReleaseBlobURL$_() {
            this._$_blobUrl$_ && (URL.revokeObjectURL(this._$_blobUrl$_), this._$_blobUrl$_ = "");
        }
    };
}

{
    const fa = self._$C3$_;
    fa._$AnimationInfo$_ = class extends fa._$DefendedBase$_ {
        constructor(t) {
            super(), this._$_name$_ = t[0], this._$_speed$_ = t[1], this._$_isLooping$_ = !!t[2], 
            this._$_repeatCount$_ = t[3], this._$_repeatTo$_ = t[4], this._$_isPingPong$_ = !!t[5], 
            this._$_sid$_ = t[6], this._$_frames$_ = t[7].map(t => fa._$New$_(fa._$AnimationFrameInfo$_, t)), 
            this._$_iAnimation$_ = new self._$IAnimation$_(this);
        }
        static _$CreateDynamic$_(t, s) {
            const i = fa._$New$_(fa._$AnimationInfo$_, [ s, 0, !1, 0, 0, !1, Math.floor(1e15 * Math.random()), [] ]);
            return i._$_frames$_.push(fa._$AnimationFrameInfo$_._$CreateDynamic$_(t)), 
            i;
        }
        _$Release$_() {
            for (const t of this._$_frames$_) t._$Release$_();
            fa._$clearArray$_(this._$_frames$_);
        }
        _$LoadAllAssets$_(t) {
            for (const s of this._$_frames$_) s._$GetImageInfo$_()._$LoadAsset$_(t);
        }
        _$LoadAllTextures$_(s, i) {
            return Promise.all(this._$_frames$_.map(t => t._$GetImageInfo$_()._$LoadStaticTexture$_(s, i)));
        }
        _$ReleaseAllTextures$_() {
            for (const t of this._$_frames$_) t._$GetImageInfo$_()._$ReleaseTexture$_();
        }
        _$GetName$_() {
            return this._$_name$_;
        }
        _$GetSID$_() {
            return this._$_sid$_;
        }
        _$GetFrameCount$_() {
            return this._$_frames$_.length;
        }
        _$GetFrames$_() {
            return this._$_frames$_;
        }
        _$GetFrameAt$_(t) {
            if ((t = Math.floor(t)) < 0 || t >= this._$_frames$_.length) throw new RangeError("invalid frame");
            return this._$_frames$_[t];
        }
        _$InsertFrameAt$_(t, s) {
            (s = Math.floor(s)) < 0 ? this._$_frames$_.unshift(t) : s >= this._$_frames$_.length ? this._$_frames$_.push(t) : this._$_frames$_.splice(s, 0, t);
        }
        _$RemoveFrameAt$_(t) {
            if ((t = Math.floor(t)) < 0 || t >= this._$_frames$_.length) throw new RangeError("invalid frame");
            this._$_frames$_[t]._$Release$_(), this._$_frames$_.splice(t, 1);
        }
        _$GetFrameIndexByTag$_(i) {
            for (let t = 0, s = this._$_frames$_.length; t < s; ++t) if (fa._$equalsNoCase$_(this._$_frames$_[t]._$GetTag$_(), i)) return t;
            return -1;
        }
        _$FrameTagOrIndexToIndex$_(t) {
            if ("string" != typeof t) return t;
            {
                const s = this._$GetFrameIndexByTag$_(t);
                if (-1 === s) throw new Error("cannot find animation frame with tag " + t);
                return s;
            }
        }
        _$GetSpeed$_() {
            return this._$_speed$_;
        }
        _$IsLooping$_() {
            return this._$_isLooping$_;
        }
        _$GetRepeatCount$_() {
            return this._$_repeatCount$_;
        }
        _$GetRepeatTo$_() {
            return this._$_repeatTo$_;
        }
        _$IsPingPong$_() {
            return this._$_isPingPong$_;
        }
        _$GetIAnimation$_() {
            return this._$_iAnimation$_;
        }
    };
}

{
    const da = self._$C3$_, pa = (() => {
        const i = atob("iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAANQTFRFAAAAp3o92gAAAAF0Uk5TAEDm2GYAAAATSURBVBgZYxgFo2AUjIJRQFcAAAV4AAHcRQIbAAAAAElFTkSuQmCC"), e = new Uint8Array(i.length);
        for (let t = 0, s = i.length; t < s; ++t) e[t] = i.charCodeAt(t);
        return new Blob([ e ], {
            type: "image/png"
        });
    })();
    da._$AnimationFrameInfo$_ = class extends da._$DefendedBase$_ {
        constructor(t) {
            super(), this._$_imageInfo$_ = da._$New$_(da._$ImageInfo$_), this._$_imageInfo$_._$LoadData$_(t), 
            this._$_duration$_ = t[7], this._$_origin$_ = da._$New$_(da._$Vector2$_, t[8], t[9]), 
            this._$_imagePoints$_ = t[10].map(t => da._$New$_(da._$ImagePoint$_, this, t)), 
            this._$_imagePointsByName$_ = new Map();
            for (const i of this._$_imagePoints$_) this._$_imagePointsByName$_.set(i._$GetName$_().toLowerCase(), i);
            this._$_collisionPoly$_ = null;
            const s = t[11];
            6 <= s.length && (this._$_collisionPoly$_ = da._$New$_(da._$CollisionPoly$_, s)), 
            this._$_tag$_ = t[12] || "", this._$_iAnimationFrame$_ = new self._$IAnimationFrame$_(this);
        }
        static _$CreateDynamic$_(t) {
            const s = da._$New$_(da._$AnimationFrameInfo$_, [ "", 0, 0, 0, 100, 100, !1, 1, 0, 0, [], [], "" ]);
            return s._$_imageInfo$_._$LoadDynamicBlobAsset$_(t, pa), s;
        }
        _$Release$_() {
            this._$_collisionPoly$_ && (this._$_collisionPoly$_._$Release$_(), this._$_collisionPoly$_ = null), 
            this._$_imageInfo$_._$Release$_(), this._$_imageInfo$_ = null;
        }
        _$GetImageInfo$_() {
            return this._$_imageInfo$_;
        }
        _$GetDuration$_() {
            return this._$_duration$_;
        }
        _$GetOriginX$_() {
            return this._$_origin$_._$getX$_();
        }
        _$GetOriginY$_() {
            return this._$_origin$_._$getY$_();
        }
        _$GetCollisionPoly$_() {
            return this._$_collisionPoly$_;
        }
        _$GetImagePointByName$_(t) {
            return this._$_imagePointsByName$_.get(t.toLowerCase()) || null;
        }
        _$GetImagePointByIndex$_(t) {
            return (t = Math.floor(t)) < 0 || t >= this._$_imagePoints$_.length ? null : this._$_imagePoints$_[t];
        }
        _$GetImagePointCount$_() {
            return this._$_imagePoints$_.length;
        }
        _$GetTag$_() {
            return this._$_tag$_;
        }
        _$GetIAnimationFrame$_() {
            return this._$_iAnimationFrame$_;
        }
    };
}

{
    const ma = self._$C3$_;
    ma._$ImagePoint$_ = class extends ma._$DefendedBase$_ {
        constructor(t, s) {
            super(), this._$_afi$_ = t, this._$_name$_ = s[0], this._$_pos$_ = ma._$New$_(ma._$Vector2$_, s[1], s[2]);
        }
        _$Release$_() {}
        _$GetName$_() {
            return this._$_name$_;
        }
        _$GetX$_() {
            return this._$_pos$_._$getX$_();
        }
        _$GetY$_() {
            return this._$_pos$_._$getY$_();
        }
        _$GetVec2$_() {
            return this._$_pos$_;
        }
    };
}

{
    const b = self._$C3$_, ga = self.C3Debugger, ya = self._$IObjectClass$_;
    b._$ObjectClass$_ = class extends b._$DefendedBase$_ {
        constructor(s, t, i) {
            super();
            const e = s._$GetObjectReference$_(i[1]), [ n, h ] = (this._$_runtime$_ = s, 
            this._$_plugin$_ = b._$AddonManager$_._$GetPluginByConstructorFunction$_(e), 
            this._$_sdkType$_ = null, this._$_instSdkCtor$_ = e.Instance, this._$_index$_ = t, 
            this._$_sid$_ = i[11], this._$_name$_ = i[0], this._$_jsPropName$_ = this._$_runtime$_._$GetJsPropName$_(i[14]), 
            this._$_isGlobal$_ = !!i[9], this._$_isFamily$_ = !!i[2], this._$_isOnLoaderLayout$_ = !!i[10], 
            this._$_instVars$_ = i[3].map(t => ({
                sid: t[0],
                type: t[1],
                name: t[2],
                _$jsPropName$_: s._$GetJsPropName$_(t[3])
            })), this._$_behaviorsCount$_ = i[4], this._$_effectsCount$_ = i[5], 
            this._$_isWorldType$_ = this._$_plugin$_._$IsWorldType$_(), this._$_dispatcher$_ = b._$New$_(b.Event._$Dispatcher$_), 
            this._$_effectList$_ = null, s._$GetCollisionEngine$_()._$GetCollisionCellSize$_());
            if (this._$_collisionGrid$_ = b._$New$_(b._$SparseGrid$_, n, h), this._$_anyCollisionCellChanged$_ = !0, 
            this._$_familyMembers$_ = null, this._$_familyMembersSet$_ = null, this._$_familyIndex$_ = -1, 
            this._$_families$_ = null, this._$_familiesSet$_ = null, this._$_familyInstVarMap$_ = null, 
            this._$_familyBehaviorMap$_ = null, this._$_familyEffectMap$_ = null, 
            this._$_isInContainer$_ = !1, this._$_container$_ = null, this._$_behaviorTypes$_ = i[8].map(t => b._$BehaviorType$_._$Create$_(this, t)), 
            this._$_behaviorTypesIncludingInherited$_ = [], this._$_behaviorsByName$_ = new Map(), 
            this._$_behaviorNameToIndex$_ = new Map(), this._$_usedBehaviorCtors$_ = new Set(), 
            this._$_customActionMap$_ = new Map(), this._$_solStack$_ = b._$New$_(b._$SolStack$_, this), 
            this._$_defaultInstanceData$_ = null, this._$_defaultLayerIndex$_ = 0, 
            this._$_isContained$_ = !1, this._$_container$_ = null, this._$_imageInfo$_ = null, 
            this._$_animations$_ = null, this._$_animationsByName$_ = null, this._$_animationsBySid$_ = null, 
            this._$_textureRefCount$_ = 0, this._$_savedData$_ = new Map(), this._$_unsavedData$_ = new Map(), 
            this._$_instances$_ = [], this._$_worldInfosByLayer$_ = new Map(), this._$_iidsStale$_ = !0, 
            this._$_plugin$_._$HasEffects$_() && (this._$_effectList$_ = b._$New$_(b._$EffectList$_, this, i[12])), 
            i[6] && (this._$_imageInfo$_ = b._$New$_(b._$ImageInfo$_), this._$_imageInfo$_._$LoadData$_(i[6])), 
            i[7]) {
                this._$_animations$_ = i[7].map(t => b._$New$_(b._$AnimationInfo$_, t)), 
                this._$_animationsByName$_ = new Map(), this._$_animationsBySid$_ = new Map();
                for (const a of this._$_animations$_) this._$_animationsByName$_.set(a._$GetName$_().toLowerCase(), a), 
                this._$_animationsBySid$_.set(a._$GetSID$_(), a);
            }
            this._$_isFamily$_ ? (this._$_familyMembers$_ = [], this._$_familyMembersSet$_ = new Set(), 
            this._$_familyIndex$_ = this._$_runtime$_._$_GetNextFamilyIndex$_()) : (this._$_families$_ = [], 
            this._$_familiesSet$_ = new Set(), this._$_familyInstVarMap$_ = [], 
            this._$_familyBehaviorMap$_ = [], this._$_familyEffectMap$_ = []);
            const r = this._$_plugin$_._$GetSdkVersion$_();
            if (r < 2 && (this._$_sdkType$_ = b._$New$_(e._$Type$_, this, i[15]), 
            !(this._$_sdkType$_ instanceof b._$SDKTypeBase$_))) throw new Error("v1 sdk type must derive from SDKTypeBase");
            this._$_iObjectClass$_ = null, this._$_instanceUserScriptClass$_ = null, 
            this._$_userScriptDispatcher$_ = b._$New$_(b.Event._$Dispatcher$_), 
            b._$AddonManager$_._$_PushInitObject$_(this, r);
            let o;
            if (o = 2 <= r ? (o = e._$Type$_) || globalThis._$ISDKObjectTypeBase$_ : this._$_sdkType$_._$GetScriptInterfaceClass$_()) {
                if (this._$_iObjectClass$_ = new o(r < 2 ? this : null), r < 2 && !(this._$_iObjectClass$_ instanceof ya)) throw new TypeError("script interface class must derive from IObjectClass");
                if (2 <= r && !(this._$_iObjectClass$_ instanceof globalThis._$ISDKObjectTypeBase$_)) throw new TypeError("script interface class must derive from ISDKObjectTypeBase");
            } else this._$_iObjectClass$_ = new ya();
            if (b._$AddonManager$_._$_PopInitObject$_(r), i[13]) {
                const l = i[13];
                if (l) {
                    const u = l[0], c = l[1], f = l[2];
                    this._$_sdkType$_._$LoadTilemapData$_(u, c, f);
                }
            }
            this._$_runtime$_._$UsesLoaderLayout$_() && !this._$_isFamily$_ && !this._$_isOnLoaderLayout$_ && this._$_isWorldType$_ || this._$OnCreate$_(), 
            this._$_plugin$_._$IsSingleGlobal$_() && (this._$_plugin$_._$_SetSingleGlobalObjectClass$_(this), 
            this._$_CreateSingleGlobalInstance$_(i)), this._$_loadInstancesJson$_ = null;
        }
        static _$Create$_(t, s, i) {
            return b._$New$_(b._$ObjectClass$_, t, s, i);
        }
        _$Release$_() {
            if (this._$_dispatcher$_._$Release$_(), this._$_dispatcher$_ = null, 
            this._$_imageInfo$_ && (this._$_imageInfo$_._$Release$_(), this._$_imageInfo$_ = null), 
            this._$_animations$_) {
                for (const t of this._$_animations$_) t._$Release$_();
                b._$clearArray$_(this._$_animations$_), this._$_animationsByName$_.clear(), 
                this._$_animationsBySid$_.clear();
            }
            this._$_loadInstancesJson$_ = null, this._$_solStack$_._$Release$_(), 
            this._$_solStack$_ = null, this._$_savedData$_.clear(), this._$_unsavedData$_.clear(), 
            this._$_container$_ = null, this._$_runtime$_ = null;
        }
        _$_LoadFamily$_(i) {
            for (let t = 1, s = i.length; t < s; ++t) {
                const e = this._$_runtime$_._$GetObjectClassByIndex$_(i[t]);
                this._$_familyMembers$_.push(e), this._$_familyMembersSet$_.add(e), 
                e._$_families$_.push(this), e._$_familiesSet$_.add(this);
            }
        }
        _$_SetContainer$_(t) {
            this._$_isInContainer$_ = !0, this._$_container$_ = t;
        }
        _$IsInContainer$_() {
            return this._$_isInContainer$_;
        }
        _$GetContainer$_() {
            return this._$_container$_;
        }
        _$_OnAfterCreate$_() {
            let t = 0;
            if (!this._$_isFamily$_) for (const s of this._$_families$_) for (const i of s._$GetBehaviorTypes$_()) {
                const e = i._$GetName$_().toLowerCase();
                this._$_behaviorsByName$_.set(e, i), this._$_behaviorNameToIndex$_.set(e, t), 
                this._$_behaviorTypesIncludingInherited$_.push(i), ++t;
            }
            for (const n of this._$GetBehaviorTypes$_()) {
                const h = n._$GetName$_().toLowerCase();
                this._$_behaviorsByName$_.set(h, n), this._$_behaviorNameToIndex$_.set(h, t), 
                this._$_behaviorTypesIncludingInherited$_.push(n), ++t;
            }
            for (const r of this._$_behaviorTypesIncludingInherited$_) this._$_usedBehaviorCtors$_.add(r._$GetBehavior$_().constructor);
            if (!this._$_isFamily$_ && this._$_families$_.length) {
                let t = this._$_runtime$_._$GetFamilyCount$_(), s = (b._$extendArray$_(this._$_familyInstVarMap$_, t, 0), 
                b._$extendArray$_(this._$_familyBehaviorMap$_, t, 0), b._$extendArray$_(this._$_familyEffectMap$_, t, 0), 
                []), i = 0, e = 0, n = 0;
                for (const o of this._$_families$_) {
                    const a = o._$GetFamilyIndex$_(), l = (this._$_familyInstVarMap$_[a] = i, 
                    i += o._$GetInstanceVariablesCount$_(), this._$_familyBehaviorMap$_[a] = e, 
                    e += o._$GetBehaviorTypesCount$_(), this._$_familyEffectMap$_[a] = n, 
                    n += o._$GetEffectTypesCount$_(), o._$GetEffectList$_());
                    if (l && this._$_effectList$_) for (const u of l._$GetAllEffectTypes$_()) s.push(u._$Clone$_(this._$_effectList$_));
                }
                this._$_effectList$_ && this._$_effectList$_._$PrependEffectTypes$_(s);
            }
        }
        _$_CreateSingleGlobalInstance$_(t) {
            const s = this._$_runtime$_._$_GetNewUID$_(), i = b._$New$_(b.Instance, {
                runtime: this._$_runtime$_,
                _$objectType$_: this,
                uid: s
            });
            i._$_CreateSdkInstance$_(t[16], []), this._$_runtime$_._$_MapInstanceByUID$_(s, i), 
            this._$_instances$_.push(i);
        }
        _$GetSdkType$_() {
            return this._$_sdkType$_;
        }
        _$IsOnLoaderLayout$_() {
            return this._$_isOnLoaderLayout$_;
        }
        _$Dispatcher$_() {
            return this._$_dispatcher$_;
        }
        _$OnCreate$_() {
            this._$_isFamily$_ || (this._$_sdkType$_ ? this._$_sdkType$_._$OnCreate$_() : this._$_iObjectClass$_._$_onCreate$_());
        }
        _$HasLoadedTextures$_() {
            return 0 < this._$_textureRefCount$_;
        }
        async _$LoadTextures$_(t) {
            this._$_isFamily$_ || (this._$_textureRefCount$_++, 1 === this._$_textureRefCount$_ && (this._$_sdkType$_ ? await this._$_sdkType$_._$LoadTextures$_(t) : await this._$_iObjectClass$_._$_loadTextures$_(this._$_runtime$_._$GetCanvasManager$_()._$GetIRenderer$_())));
        }
        _$ReleaseTextures$_() {
            if (!this._$_isFamily$_) {
                if (this._$_textureRefCount$_--, this._$_textureRefCount$_ < 0) throw new Error("released textures too many times");
                0 === this._$_textureRefCount$_ && (this._$_sdkType$_ ? this._$_sdkType$_._$ReleaseTextures$_() : this._$_iObjectClass$_._$_releaseTextures$_(this._$_runtime$_._$GetCanvasManager$_()._$GetIRenderer$_()));
            }
        }
        _$OnDynamicTextureLoadComplete$_() {
            if (this._$_isFamily$_) throw new Error("not applicable to family");
            this._$_sdkType$_ ? this._$_sdkType$_._$OnDynamicTextureLoadComplete$_() : this._$_iObjectClass$_._$_onDynamicTextureLoadComplete$_();
        }
        async _$PreloadTexturesWithInstances$_(t) {
            this._$_isFamily$_ || (this._$_sdkType$_ ? await this._$_sdkType$_._$PreloadTexturesWithInstances$_(t) : await this._$_iObjectClass$_._$_preloadTexturesWithInstances$_(this._$_runtime$_._$GetCanvasManager$_()._$GetIRenderer$_()));
        }
        _$GetRuntime$_() {
            return this._$_runtime$_;
        }
        _$GetPlugin$_() {
            return this._$_plugin$_;
        }
        _$GetInstanceSdkCtor$_() {
            return this._$_instSdkCtor$_;
        }
        _$GetName$_() {
            return this._$_name$_;
        }
        _$GetJsPropName$_() {
            return this._$_jsPropName$_;
        }
        _$GetIndex$_() {
            return this._$_index$_;
        }
        _$GetSID$_() {
            return this._$_sid$_;
        }
        _$IsFamily$_() {
            return this._$_isFamily$_;
        }
        _$IsGlobal$_() {
            return this._$_isGlobal$_;
        }
        _$IsWorldType$_() {
            return this._$_isWorldType$_;
        }
        _$GetFamilyIndex$_() {
            return this._$_familyIndex$_;
        }
        _$GetBehaviorTypes$_() {
            return this._$_behaviorTypes$_;
        }
        _$GetBehaviorTypesCount$_() {
            return this._$_behaviorsCount$_;
        }
        _$UsesBehaviorByCtor$_(t) {
            return t && this._$_usedBehaviorCtors$_.has(t);
        }
        _$GetInstanceVariablesCount$_() {
            return this._$_instVars$_.length;
        }
        _$GetInstanceVariableSIDs$_() {
            return this._$_instVars$_.map(t => t.sid);
        }
        _$GetInstanceVariableIndexBySID$_(s) {
            return this._$_instVars$_.findIndex(t => t.sid === s);
        }
        _$GetInstanceVariableIndexByName$_(s) {
            return this._$_instVars$_.findIndex(t => t.name === s);
        }
        _$_GetAllInstanceVariableNames$_() {
            return this._$_instVars$_.map(t => t.name);
        }
        _$_GetAllInstanceVariableJsPropNames$_() {
            return this._$_instVars$_.map(t => t._$jsPropName$_);
        }
        _$GetInstanceVariableType$_(t) {
            if ((t = Math.floor(t)) < 0 || t >= this._$_instVars$_.length) throw new RangeError("invalid instance variable index");
            return this._$_instVars$_[t].type;
        }
        _$GetInstanceVariableName$_(t) {
            if ((t = Math.floor(t)) < 0 || t >= this._$_instVars$_.length) throw new RangeError("invalid instance variable index");
            return this._$_instVars$_[t].name;
        }
        _$GetEffectTypesCount$_() {
            return this._$_effectsCount$_;
        }
        _$GetBehaviorTypesIncludingInherited$_() {
            return this._$_behaviorTypesIncludingInherited$_;
        }
        _$GetBehaviorTypeByName$_(t) {
            return this._$_behaviorsByName$_.get(t.toLowerCase()) || null;
        }
        _$GetBehaviorIndexByName$_(t) {
            const s = this._$_behaviorNameToIndex$_.get(t.toLowerCase());
            return void 0 === s ? -1 : s;
        }
        _$GetEffectList$_() {
            return this._$_effectList$_;
        }
        _$HasEffects$_() {
            return this._$_plugin$_._$HasEffects$_();
        }
        _$UsesEffects$_() {
            return this._$_effectList$_ && this._$_effectList$_._$HasAnyEffectType$_();
        }
        _$GetSolStack$_() {
            return this._$_solStack$_;
        }
        _$GetCurrentSol$_() {
            return this._$_solStack$_._$GetCurrentSol$_();
        }
        _$GetImageInfo$_() {
            return this._$_imageInfo$_;
        }
        _$SetDefaultInstanceData$_(t) {
            this._$_defaultInstanceData$_ = t;
        }
        _$GetDefaultInstanceData$_() {
            return this._$_defaultInstanceData$_;
        }
        _$_SetDefaultLayerIndex$_(t) {
            this._$_defaultLayerIndex$_ = t;
        }
        _$GetDefaultLayerIndex$_() {
            return this._$_defaultLayerIndex$_;
        }
        _$GetAnimations$_() {
            return this._$_animations$_;
        }
        _$GetAnimationCount$_() {
            return this._$_animations$_.length;
        }
        _$GetFamilies$_() {
            return this._$_families$_;
        }
        _$BelongsToFamily$_(t) {
            return this._$_familiesSet$_.has(t);
        }
        _$GetFamilyMembers$_() {
            return this._$_familyMembers$_;
        }
        _$FamilyHasMember$_(t) {
            return this._$_familyMembersSet$_.has(t);
        }
        _$GetFamilyBehaviorOffset$_(t) {
            return this._$_familyBehaviorMap$_[t];
        }
        _$GetFamilyInstanceVariableOffset$_(t) {
            return this._$_familyInstVarMap$_[t];
        }
        _$AddCustomAction$_(t) {
            this._$_customActionMap$_.set(t._$GetACEName$_().toLowerCase(), t);
        }
        _$HasOwnCustomActionByName$_(t) {
            return !!this._$GetOwnCustomActionByName$_(t);
        }
        _$GetOwnCustomActionByName$_(t) {
            const s = this._$_customActionMap$_.get(t.toLowerCase());
            return s && s._$IsEnabled$_() ? s : null;
        }
        _$GetAllAnimations$_() {
            return this._$_animations$_;
        }
        _$GetAnimationByName$_(t) {
            if (this._$_animations$_) return this._$_animationsByName$_.get(t.toLowerCase()) || null;
            throw new Error("no animations");
        }
        _$GetAnimationBySID$_(t) {
            if (this._$_animations$_) return this._$_animationsBySid$_.get(t) || null;
            throw new Error("no animations");
        }
        _$AddAnimation$_(t) {
            if (this._$GetAnimationByName$_(t)) throw new Error(`animation name '${t}' already exists`);
            const s = b._$AnimationInfo$_._$CreateDynamic$_(this._$GetRuntime$_(), t);
            return this._$_animations$_.push(s), this._$_animationsByName$_.set(s._$GetName$_().toLowerCase(), s), 
            this._$_animationsBySid$_.set(s._$GetSID$_(), s), s;
        }
        _$RemoveAnimation$_(t) {
            const s = this._$GetAnimationByName$_(t);
            if (!s) throw new Error(`animation name '${t}' does not exist`);
            if (1 === this._$_animations$_.length) throw new Error("cannot remove last animation");
            const i = this._$_animations$_.indexOf(s);
            this._$_animations$_.splice(i, 1), this._$_animationsByName$_.delete(s._$GetName$_().toLowerCase()), 
            this._$_animationsBySid$_.delete(s._$GetSID$_()), s._$Release$_();
        }
        _$GetFirstAnimation$_() {
            if (this._$_animations$_) return this._$_animations$_[0];
            throw new Error("no animations");
        }
        _$GetFirstAnimationFrame$_() {
            return this._$GetFirstAnimation$_()._$GetFrameAt$_(0);
        }
        _$GetDefaultInstanceSize$_() {
            if (this._$_animations$_) {
                const t = this._$GetFirstAnimationFrame$_()._$GetImageInfo$_();
                return [ t._$GetWidth$_(), t._$GetHeight$_() ];
            }
            return this._$_imageInfo$_ ? [ this._$_imageInfo$_._$GetWidth$_(), this._$_imageInfo$_._$GetHeight$_() ] : [ 100, 100 ];
        }
        _$GetSingleGlobalInstance$_() {
            if (this._$_plugin$_._$IsSingleGlobal$_()) return this._$_instances$_[0];
            throw new Error("not a single-global plugin");
        }
        _$GetInstances$_() {
            return this._$_instances$_;
        }
        *instances() {
            yield* this._$_instances$_;
        }
        *_$instancesIncludingPendingCreate$_() {
            yield* this._$_instances$_, yield* this._$_runtime$_._$instancesPendingCreateForObjectClass$_(this);
        }
        _$GetInstanceCount$_() {
            return this._$_instances$_.length;
        }
        _$_AddInstance$_(t) {
            this._$_instances$_.push(t);
        }
        _$_SetIIDsStale$_() {
            this._$_iidsStale$_ = !0;
        }
        _$_UpdateIIDs$_() {
            if (this._$_iidsStale$_ && !this._$_isFamily$_) {
                let s = this._$_instances$_, i = 0;
                for (let t = s.length; i < t; ++i) s[i]._$_SetIID$_(i);
                const t = this._$_runtime$_._$_GetInstancesPendingCreate$_();
                for (const e of t) e._$GetObjectClass$_() === this && e._$_SetIID$_(i++);
                this._$_iidsStale$_ = !1;
            }
        }
        _$GetInstanceByIID$_(t) {
            const s = this._$_instances$_;
            if (t < s.length) return s[t];
            t -= s.length;
            const i = this._$_runtime$_._$_GetInstancesPendingCreate$_();
            for (const e of i) if (e._$GetObjectClass$_() === this) {
                if (0 === t) return e;
                --t;
            }
            return null;
        }
        _$GetFirstPicked$_(t) {
            if (t && t._$IsInContainer$_() && t._$GetObjectClass$_() !== this) for (const i of t._$siblings$_()) if (i._$GetObjectClass$_() === this) return i;
            const s = this._$GetCurrentSol$_()._$GetInstances$_();
            return s.length ? s[0] : null;
        }
        _$GetPairedInstance$_(t) {
            const s = this._$GetCurrentSol$_()._$GetInstances$_();
            return 0 < s.length ? s[t._$GetIID$_() % s.length] : null;
        }
        *_$allCorrespondingInstances$_(t, s) {
            let i = this._$GetCurrentSol$_()._$GetInstances$_(), e = i.length, n = s._$GetCurrentSol$_(), h = s._$GetCurrentSol$_()._$GetInstances$_(), r = h.length, o = t._$GetIID$_(), a = (!s._$IsFamily$_() && n._$IsSelectAll$_() || (o = h.indexOf(t)), 
            Math.ceil(e / r)), l = e % r, u = 0, c;
            c = 0 == l || o < l ? (u = o * a, a) : (u = l * a + (o - l) * (a - 1), 
            a - 1);
            for (let t = u, s = u + c; t < s; ++t) yield i[t];
        }
        _$FinishCondition$_(t) {
            this._$_sdkType$_?._$FinishCondition$_(t);
        }
        _$ApplySolToContainer$_() {
            if (this._$_isInContainer$_ && !this._$_isFamily$_) {
                this._$_UpdateIIDs$_();
                const t = this._$GetCurrentSol$_(), s = t._$_GetOwnInstances$_(), i = t._$IsSelectAll$_(), e = this._$_runtime$_._$GetCurrentEventStackFrame$_(), n = e && e._$GetCurrentEvent$_() && e._$GetCurrentEvent$_()._$IsOrBlock$_();
                for (const h of this._$_container$_._$objectTypes$_()) if (h !== this) {
                    h._$_UpdateIIDs$_();
                    const r = h._$GetCurrentSol$_();
                    if (r._$_SetSelectAll$_(i), !i) {
                        const o = r._$_GetOwnInstances$_();
                        b._$clearArray$_(o);
                        for (const a of s) o.push(h._$GetInstanceByIID$_(a._$GetIID$_()));
                        if (n) {
                            const l = t._$_GetOwnElseInstances$_(), u = r._$_GetOwnElseInstances$_();
                            b._$clearArray$_(u);
                            for (const c of l) u.push(h._$GetInstanceByIID$_(c._$GetIID$_()));
                        }
                    }
                }
            }
        }
        _$_TruncateContainerSols$_(t, s) {
            for (const i of this._$GetContainer$_()._$objectTypes$_()) {
                const e = i._$GetCurrentSol$_();
                t ? b._$truncateArray$_(e._$_GetOwnElseInstances$_(), s) : b._$truncateArray$_(e._$_GetOwnInstances$_(), s);
            }
        }
        _$_GetCollisionCellGrid$_() {
            return this._$_collisionGrid$_;
        }
        _$_SetAnyCollisionCellChanged$_(t) {
            this._$_anyCollisionCellChanged$_ = !!t;
        }
        _$_UpdateAllCollisionCells$_() {
            if (this._$_anyCollisionCellChanged$_ && this._$_isWorldType$_) {
                for (const t of this._$_instances$_) t._$GetWorldInfo$_()._$_UpdateCollisionCell$_();
                for (const s of this._$_runtime$_._$_GetInstancesPendingCreate$_()) s._$GetObjectClass$_() === this && s._$GetWorldInfo$_()._$_UpdateCollisionCell$_();
                this._$_anyCollisionCellChanged$_ = !1;
            }
        }
        _$_OnWorldInstanceLayerChanged$_(s, t, i) {
            if (t) {
                const e = this._$_worldInfosByLayer$_.get(t);
                e && (e.delete(s), 0 === e.size) && this._$_worldInfosByLayer$_.delete(t);
            }
            if (i) {
                let t = this._$_worldInfosByLayer$_.get(i);
                t || (t = new Set(), this._$_worldInfosByLayer$_.set(i, t)), t.add(s);
            }
        }
        _$layersHasInstancesOn$_() {
            if (this._$IsFamily$_()) {
                const t = new Set();
                for (const s of this._$_familyMembers$_) for (const i of s._$layersHasInstancesOn$_()) t.add(i);
                return t.values();
            }
            return this._$_worldInfosByLayer$_.keys();
        }
        _$GetSavedDataMap$_() {
            return this._$_savedData$_ || (this._$_savedData$_ = new Map()), this._$_savedData$_;
        }
        _$GetUnsavedDataMap$_() {
            return this._$_unsavedData$_ || (this._$_unsavedData$_ = new Map()), 
            this._$_unsavedData$_;
        }
        _$HasSolidBehavior$_() {
            return this._$UsesBehaviorByCtor$_(b._$Behaviors$_.solid);
        }
        _$HasJumpthruBehavior$_() {
            return this._$UsesBehaviorByCtor$_(b._$Behaviors$_.jumpthru);
        }
        _$HasNoSaveBehavior$_() {
            return this._$UsesBehaviorByCtor$_(b._$Behaviors$_.NoSave);
        }
        _$HasPersistBehavior$_() {
            return this._$UsesBehaviorByCtor$_(b._$Behaviors$_.Persist);
        }
        _$_SaveToJson$_() {
            const t = {
                instances: this._$_instances$_.map(t => t._$SaveToJson$_())
            };
            return this._$_savedData$_ && this._$_savedData$_.size && (t.ex = b._$ToSuperJSON$_(this._$_savedData$_)), 
            t;
        }
        _$_LoadFromJson$_(t, e) {
            this._$_savedData$_ && (this._$_savedData$_.clear(), this._$_savedData$_ = null);
            const s = t.ex, n = (s && (this._$_savedData$_ = b._$FromSuperJSON$_(s)), 
            this._$_instances$_), h = t.instances;
            for (let t = 0, s = Math.min(n.length, h.length); t < s; ++t) n[t]._$LoadFromJson$_(h[t]);
            for (let t = h.length, s = n.length; t < s; ++t) this._$_runtime$_._$DestroyInstance$_(n[t]);
            for (let i = n.length, t = h.length; i < t; ++i) {
                let t = h[i], s = null;
                if (!this._$IsWorldType$_() || (s = this._$_runtime$_._$GetMainRunningLayout$_()._$GetLayerBySID$_(t.w.l))) {
                    const r = this._$_runtime$_._$CreateInstanceFromData$_(this._$_defaultInstanceData$_ || this, s, !1, 0, 0, !0);
                    r._$LoadFromJson$_(t), e && e.add(r);
                }
            }
            this._$_loadInstancesJson$_ = h, this._$_SetIIDsStale$_();
        }
        _$_GetLoadInstancesJson$_() {
            return this._$_loadInstancesJson$_;
        }
        _$_ClearLoadInstancesJson$_() {
            this._$_loadInstancesJson$_ = null;
        }
        _$_SetupSceneGraphConnectionsOnChangeOfLayout$_() {
            for (let t = 0, s = this._$_instances$_; t < s; ++t) this._$_instances$_[t]._$_SetupSceneGraphConnectionsOnChangeOfLayout$_();
        }
        _$GetIObjectClass$_() {
            return this._$_iObjectClass$_;
        }
        _$UserScriptDispatcher$_() {
            return this._$_userScriptDispatcher$_;
        }
        _$_GetUserScriptInstanceClass$_() {
            return this._$_instanceUserScriptClass$_;
        }
        _$_SetUserScriptInstanceClass$_(t) {
            this._$_instanceUserScriptClass$_ = t;
        }
        _$DispatchUserScriptEvent$_(t) {
            const s = this._$_runtime$_, i = s._$IsDebug$_() && !s._$GetEventSheetManager$_()._$IsInEventEngine$_();
            i && ga.StartMeasuringScriptTime(), this._$_userScriptDispatcher$_.dispatchEvent(t), 
            i && ga.AddScriptTime();
        }
    };
}

{
    const Ma = self._$C3$_;
    Ma._$Container$_ = class extends Ma._$DefendedBase$_ {
        constructor(t, s) {
            super(), this._$_runtime$_ = t, this._$_objectTypes$_ = s;
            for (const i of this._$_objectTypes$_) i._$_SetContainer$_(this);
        }
        _$Release$_() {
            this._$_runtime$_ = null;
        }
        _$GetRuntime$_() {
            return this._$_runtime$_;
        }
        _$GetObjectTypes$_() {
            return this._$_objectTypes$_;
        }
        _$objectTypes$_() {
            return this._$_objectTypes$_;
        }
        _$HasAnyWorldType$_() {
            return this._$_objectTypes$_.some(t => t._$IsWorldType$_());
        }
    };
}

{
    let w = self._$C3$_, n = self.C3Debugger, r = w._$AddonManager$_, o = [], a = 0, x = new WeakMap(), e = new WeakMap();
    w.Instance = class extends w._$DefendedBase$_ {
        constructor(t) {
            if (w._$AddonManager$_ !== r) throw new Error("invalid addon manager");
            super(), this._$_runtime$_ = t.runtime, this._$_objectType$_ = t._$objectType$_, 
            this._$_worldInfo$_ = null, this._$_sdkInst$_ = null, this._$_iScriptInterface$_ = null, 
            this._$_iid$_ = 0, this._$_uid$_ = t.uid, this._$_puid$_ = a++, this._$_flags$_ = 0, 
            this._$_tagsSet$_ = null;
            const s = w._$splitStringAndNormalize$_(t.tags), i = (0 < s.length && (this._$_tagsSet$_ = new Set(s)), 
            this._$_instVarValues$_ = o, this._$_behaviorInstances$_ = o, this._$_objectType$_._$GetBehaviorTypesIncludingInherited$_()), e = (0 < i.length && (this._$_behaviorInstances$_ = i.map((t, s) => w._$New$_(w._$BehaviorInstance$_, {
                runtime: this._$_runtime$_,
                _$behaviorType$_: t,
                _$instance$_: this,
                index: s
            }))), this._$_siblings$_ = this._$_objectType$_._$IsInContainer$_() ? [] : null, 
            this._$_timeScale$_ = -1, this._$_dispatcher$_ = null, this._$GetPlugin$_());
            if (e._$MustPreDraw$_() && (this._$_flags$_ |= 4), e._$IsWorldType$_()) if (this._$_worldInfo$_ = w._$New$_(w._$WorldInfo$_, this, t._$layer$_), 
            t._$worldData$_) this._$_worldInfo$_._$Init$_(t._$worldData$_); else {
                this._$_worldInfo$_._$InitNoData$_();
                const [ n, h ] = this._$_objectType$_._$GetDefaultInstanceSize$_();
                this._$_worldInfo$_._$SetSize$_(n, h), this._$GetObjectClass$_()._$UsesEffects$_() && this._$_worldInfo$_._$GetInstanceEffectList$_()._$LoadDefaultEffectParameters$_();
            }
            t._$instVarData$_ ? this._$_LoadInstanceVariableData$_(t._$instVarData$_) : this._$_LoadDefaultInstanceVariables$_();
        }
        _$Release$_() {
            if (this._$_iScriptInterface$_ && (this._$_iScriptInterface$_._$_release$_(), 
            this._$_iScriptInterface$_ = null), 0 < this._$_behaviorInstances$_.length) {
                for (const i of this._$_behaviorInstances$_) i._$Release$_();
                w._$clearArray$_(this._$_behaviorInstances$_);
            }
            this._$_sdkInst$_ && (this._$_sdkInst$_._$Release$_(), this._$_sdkInst$_ = null);
            const t = x.get(this), s = (t && (t.clear(), x.delete(this)), e.get(this));
            s && (s.clear(), e.delete(this)), this._$_siblings$_ && w._$clearArray$_(this._$_siblings$_), 
            this._$_dispatcher$_ && (this._$_dispatcher$_._$Release$_(), this._$_dispatcher$_ = null), 
            this._$_tagsSet$_ && this._$_tagsSet$_.clear(), this._$_tagsSet$_ = null, 
            this._$_runtime$_ = null, this._$_objectType$_ = null, 0 < this._$_instVarValues$_.length && w._$clearArray$_(this._$_instVarValues$_), 
            this._$_worldInfo$_ && (this._$_worldInfo$_._$Release$_(), this._$_worldInfo$_ = null);
        }
        _$_LoadInstanceVariableData$_(t) {
            0 < t.length && (this._$_instVarValues$_ = [], w._$shallowAssignArray$_(this._$_instVarValues$_, t));
        }
        _$_LoadDefaultInstanceVariables$_() {
            const s = this._$_objectType$_._$GetInstanceVariablesCount$_();
            if (0 !== s) {
                this._$_instVarValues$_ = [];
                const i = [ 0, 0, "" ];
                for (let t = 0; t < s; ++t) this._$_instVarValues$_.push(i[this._$_objectType$_._$GetInstanceVariableType$_(t)]);
            }
        }
        _$_CreateSdkInstance$_(t, i) {
            if (this._$_sdkInst$_) throw new Error("already got sdk instance");
            for (let t = 0, s = this._$_behaviorInstances$_.length; t < s; ++t) {
                const e = this._$_behaviorInstances$_[t];
                e._$_CreateSdkInstance$_(i ? i[t] : null);
            }
            const s = this._$GetPlugin$_()._$GetSdkVersion$_();
            if (s < 2) {
                if (this._$_sdkInst$_ = w._$New$_(this._$_objectType$_._$GetInstanceSdkCtor$_(), this, t), 
                !(this._$_sdkInst$_ instanceof w._$SDKInstanceBase$_)) throw new Error("sdk type must derive from SDKInstanceBase");
                !this._$GetPlugin$_()._$IsWorldType$_() && this._$_objectType$_._$_GetUserScriptInstanceClass$_() && this._$GetInterfaceClass$_();
            } else {
                const n = this._$GetPlugin$_()._$GetScriptInterfaceClass$_();
                this._$_InitUserScriptInterface$_(n.Instance, t);
            }
        }
        _$GetSdkInstance$_() {
            return this._$_sdkInst$_ ?? this._$_iScriptInterface$_;
        }
        _$GetWorldInfo$_() {
            return this._$_worldInfo$_;
        }
        _$GetRuntime$_() {
            return this._$_runtime$_;
        }
        _$GetTimeScale$_() {
            return this._$_timeScale$_;
        }
        _$GetActiveTimeScale$_() {
            const t = this._$_timeScale$_;
            return -1 === t ? this._$GetRuntime$_()._$GetTimeScale$_() : t;
        }
        _$SetTimeScale$_(t) {
            ((t = +t) < 0 || !isFinite(t)) && (t = 0), this._$_timeScale$_ = t, 
            this._$GetObjectClass$_()._$UsesEffects$_() && this._$_runtime$_._$_SetTrackingInstanceTime$_(this, !0);
        }
        _$RestoreTimeScale$_() {
            this._$_timeScale$_ = -1, this._$GetObjectClass$_()._$UsesEffects$_() && this._$_runtime$_._$_SetTrackingInstanceTime$_(this, !1);
        }
        _$GetInstanceGameTime$_() {
            return this._$_runtime$_._$_GetInstanceGameTime$_(this);
        }
        _$Dispatcher$_() {
            return this._$_dispatcher$_ || (this._$_dispatcher$_ = w._$New$_(w.Event._$Dispatcher$_)), 
            this._$_dispatcher$_;
        }
        _$Draw$_(t) {
            this._$_sdkInst$_ ? this._$_sdkInst$_._$Draw$_(t) : this._$_iScriptInterface$_._$_draw$_(this._$_runtime$_._$GetCanvasManager$_()._$GetIRenderer$_());
        }
        _$OnCreate$_(t) {
            this._$_sdkInst$_._$OnCreate$_(t);
        }
        _$_SetHasTilemap$_() {
            this._$_flags$_ |= 2;
        }
        _$HasTilemap$_() {
            return 0 != (2 & this._$_flags$_);
        }
        _$_MarkDestroyed$_() {
            this._$_flags$_ |= 1;
        }
        _$IsDestroyed$_() {
            return 0 != (1 & this._$_flags$_);
        }
        _$MustPreDraw$_() {
            return 0 != (4 & this._$_flags$_) || this._$_sdkInst$_._$MustPreDraw$_();
        }
        _$SetMustMitigateZFighting$_() {
            this._$_flags$_ |= 32;
        }
        _$MustMitigateZFighting$_() {
            return 0 != (32 & this._$_flags$_);
        }
        _$_IsSolidEnabled$_() {
            return 0 != (8 & this._$_flags$_);
        }
        _$_SetSolidEnabled$_(t) {
            t ? this._$_flags$_ |= 8 : this._$_flags$_ &= -9;
        }
        _$_IsJumpthruEnabled$_() {
            return 0 != (16 & this._$_flags$_);
        }
        _$_SetJumpthruEnabled$_(t) {
            t ? this._$_flags$_ |= 16 : this._$_flags$_ &= -17;
        }
        _$_IsDrawingWithEffects$_() {
            return 0 != (64 & this._$_flags$_);
        }
        _$_SetIsDrawingWithEffects$_(t) {
            t ? this._$_flags$_ |= 64 : this._$_flags$_ &= -65;
        }
        _$SetFlag$_(t, s) {
            t <<= 16, s ? this._$_flags$_ |= t : this._$_flags$_ &= ~t;
        }
        _$GetFlag$_(t) {
            return 0 != (this._$_flags$_ & t << 16);
        }
        _$GetCurrentImageInfo$_() {
            return this._$_sdkInst$_._$GetCurrentImageInfo$_();
        }
        _$GetCurrentSurfaceSize$_() {
            return this._$_sdkInst$_._$GetCurrentSurfaceSize$_();
        }
        _$GetCurrentTexRect$_() {
            return this._$_sdkInst$_._$GetCurrentTexRect$_();
        }
        _$GetCurrentTexQuad$_() {
            return this._$_sdkInst$_._$GetCurrentTexQuad$_();
        }
        _$IsCurrentTexRotated$_() {
            return this._$_sdkInst$_._$IsCurrentTexRotated$_();
        }
        _$GetImagePoint$_(t) {
            return this._$_sdkInst$_._$GetImagePoint$_(t);
        }
        _$GetObjectClass$_() {
            return this._$_objectType$_;
        }
        _$RendersToOwnZPlane$_() {
            return this._$_sdkInst$_._$RendersToOwnZPlane$_();
        }
        _$BelongsToObjectClass$_(t) {
            return t._$IsFamily$_() ? t._$FamilyHasMember$_(this._$GetObjectClass$_()) : this._$GetObjectClass$_() === t;
        }
        _$CollectInstancesToPick$_(n, t, s) {
            const i = (t, s) => {
                const i = s || t._$GetObjectClass$_(), e = n.get(i);
                e ? e.add(t) : n.set(i, new Set([ t ]));
            };
            if (i(this, t), this._$IsInContainer$_()) for (const e of this._$siblings$_()) i(e);
            if (s) for (const h of this._$allChildren$_()) i(h);
        }
        _$VerifySupportsSceneGraph$_() {
            if (!this._$GetPlugin$_()._$SupportsSceneGraph$_()) throw new Error("object does not support scene graph");
        }
        _$HasParent$_() {
            return null !== this._$GetParent$_();
        }
        _$GetParent$_() {
            const t = this._$GetWorldInfo$_();
            if (!t) return null;
            const s = t._$GetParent$_();
            return s ? s._$GetInstance$_() : null;
        }
        _$GetTopParent$_() {
            const t = this._$GetWorldInfo$_();
            if (!t) return null;
            const s = t._$GetTopParent$_();
            return s ? s._$GetInstance$_() : null;
        }
        *_$parents$_() {
            const t = this._$GetWorldInfo$_();
            if (t) for (const s of t._$parents$_()) yield s._$GetInstance$_();
        }
        _$HasChild$_(t) {
            if (t) for (const s of this.children()) if (s === t) return !0;
            return !1;
        }
        _$HasChildren$_() {
            const t = this._$GetWorldInfo$_();
            return !!t && t._$HasChildren$_();
        }
        _$GetChildrenOfObjectClass$_(t) {
            const s = this._$GetWorldInfo$_();
            if (!s) return [];
            const i = t._$GetName$_();
            return s._$GetChildren$_().map(t => t._$GetInstance$_()).filter(t => t._$GetObjectClass$_()._$GetName$_() === i);
        }
        _$GetChildren$_() {
            const t = this._$GetWorldInfo$_();
            return t ? t._$GetChildren$_().map(t => t._$GetInstance$_()) : [];
        }
        *children() {
            const t = this._$GetWorldInfo$_();
            if (t) for (const s of t.children()) yield s._$GetInstance$_();
        }
        *_$allChildren$_() {
            const t = this._$GetWorldInfo$_();
            if (t) for (const s of t._$allChildren$_()) yield s._$GetInstance$_();
        }
        _$GetChildCount$_() {
            const t = this._$GetWorldInfo$_();
            return t ? t._$GetChildCount$_() : 0;
        }
        _$GetParentCount$_() {
            return [ ...this._$parents$_() ].length;
        }
        _$GetAllChildCount$_() {
            const t = this._$GetWorldInfo$_();
            return t ? t._$GetAllChildCount$_() : 0;
        }
        _$GetChildAt$_(t) {
            const s = this._$GetWorldInfo$_();
            if (!s) return null;
            const i = s._$GetChildAt$_(t);
            return i ? i._$GetInstance$_() : null;
        }
        _$GetIndexInParent$_() {
            const t = this._$GetWorldInfo$_();
            if (!t) return NaN;
            const s = t._$GetParent$_();
            return s ? s._$GetChildIndex$_(t) : NaN;
        }
        _$HasChildWithUID$_(t) {
            for (const s of this._$GetWorldInfo$_()._$GetChildren$_()) if (s._$GetInstance$_()._$GetUID$_() === t) return !0;
            return !1;
        }
        _$AddChild$_(t, s) {
            this._$VerifySupportsSceneGraph$_(), t._$VerifySupportsSceneGraph$_(), 
            this._$GetWorldInfo$_()._$AddChild$_(t._$GetWorldInfo$_(), s || {});
        }
        _$RemoveChild$_(t) {
            const s = this._$GetWorldInfo$_();
            s && s._$RemoveChild$_(t._$GetWorldInfo$_());
        }
        _$GetDestroyWithParent$_() {
            const t = this._$GetWorldInfo$_();
            return !!t && t._$GetDestroyWithParent$_();
        }
        _$SetupInitialSceneGraphConnections$_() {
            const t = this._$GetWorldInfo$_();
            if (t) {
                const s = t._$GetSceneGraphChildrenExportData$_();
                if (s) for (const i of s) {
                    const e = this._$_runtime$_._$GetInstanceByUID$_(i[2]);
                    if (e) {
                        const n = i[3];
                        this._$AddChild$_(e, {
                            _$transformX$_: !!(n >> 0 & 1),
                            _$transformY$_: !!(n >> 1 & 1),
                            _$transformWidth$_: !!(n >> 2 & 1),
                            _$transformHeight$_: !!(n >> 3 & 1),
                            _$transformAngle$_: !!(n >> 4 & 1),
                            _$destroyWithParent$_: !!(n >> 5 & 1),
                            _$transformZElevation$_: !!(n >> 6 & 1),
                            _$transformOpacity$_: !!(n >> 7 & 1),
                            _$transformVisibility$_: !!(n >> 8 & 1)
                        });
                    }
                }
            }
        }
        _$SetupPersistedSceneGraphConnections$_(t, s) {
            const i = t.get(this);
            if (i) for (const e of i.sceneGraphJson.children) {
                const n = s.get(e.index);
                if (n) {
                    const h = e.flags;
                    this._$AddChild$_(n, {
                        _$transformX$_: !!(h >> 0 & 1),
                        _$transformY$_: !!(h >> 1 & 1),
                        _$transformWidth$_: !!(h >> 2 & 1),
                        _$transformHeight$_: !!(h >> 3 & 1),
                        _$transformAngle$_: !!(h >> 4 & 1),
                        _$destroyWithParent$_: !!(h >> 5 & 1),
                        _$transformZElevation$_: !!(h >> 6 & 1),
                        _$transformOpacity$_: !!(h >> 7 & 1),
                        _$transformVisibility$_: !!(h >> 8 & 1)
                    });
                }
            }
        }
        _$GetTemplateName$_() {
            const t = this._$_runtime$_._$GetTemplateManager$_();
            return t ? t._$GetInstanceTemplateName$_(this) : "";
        }
        _$IsInContainer$_() {
            return null !== this._$_siblings$_;
        }
        _$_AddSibling$_(t) {
            this._$_siblings$_.push(t);
        }
        _$GetSiblings$_() {
            return this._$_siblings$_;
        }
        _$HasSibling$_(t) {
            return !!this._$GetSibling$_(t);
        }
        _$GetSibling$_(t) {
            const s = this._$siblings$_();
            if (null === s || 0 === s.length) return !1;
            for (const i of s) if (i._$GetObjectClass$_() === t) return i;
            return null;
        }
        _$siblings$_() {
            return this._$_siblings$_;
        }
        _$SetSiblingsSinglePicked$_() {
            for (const t of this._$siblings$_()) t._$GetObjectClass$_()._$GetCurrentSol$_()._$SetSinglePicked$_(t);
        }
        _$_PushSiblingsToSolInstances$_() {
            for (const t of this._$siblings$_()) t._$GetObjectClass$_()._$GetCurrentSol$_()._$_PushInstance$_(t);
        }
        _$_SetSiblingsToSolInstancesIndex$_(t) {
            for (const s of this._$siblings$_()) s._$GetObjectClass$_()._$GetCurrentSol$_()._$_GetOwnInstances$_()[t] = s;
        }
        _$_PushSiblingsToSolElseInstances$_() {
            for (const t of this._$siblings$_()) t._$GetObjectClass$_()._$GetCurrentSol$_()._$_PushElseInstance$_(t);
        }
        _$_SetSiblingsToSolElseInstancesIndex$_(t) {
            for (const s of this._$siblings$_()) s._$GetObjectClass$_()._$GetCurrentSol$_()._$_GetOwnElseInstances$_()[t] = s;
        }
        _$GetPlugin$_() {
            return this._$_objectType$_._$GetPlugin$_();
        }
        _$_SetIID$_(t) {
            this._$_iid$_ = t;
        }
        _$GetIID$_() {
            return this._$_objectType$_._$_UpdateIIDs$_(), this._$_iid$_;
        }
        _$GetUID$_() {
            return this._$_uid$_;
        }
        _$GetPUID$_() {
            return this._$_puid$_;
        }
        _$_SetTagsSetFromJson$_(t) {
            t ? this._$SetTagsSet$_(new Set(t)) : this._$_tagsSet$_ = null;
        }
        _$SetTagsSet$_(t) {
            if (0 === t.size) this._$_tagsSet$_ = null; else {
                this._$_tagsSet$_ ? this._$_tagsSet$_.clear() : this._$_tagsSet$_ = new Set();
                for (const s of t) this._$_tagsSet$_.add(s);
            }
        }
        _$GetTagsSet$_() {
            return this._$_tagsSet$_ ?? new Set();
        }
        _$GetTagsString$_() {
            return Array.from(this._$GetTagsSet$_()).join(" ");
        }
        _$GetTagAt$_(t) {
            t = Math.floor(t);
            for (const s of this._$GetTagsSet$_()) {
                if (0 === t) return s;
                --t;
            }
            return "";
        }
        _$GetBehaviorInstances$_() {
            return this._$_behaviorInstances$_;
        }
        _$GetBehaviorInstanceFromCtor$_(t) {
            if (t) for (const s of this._$_behaviorInstances$_) if (s._$GetBehavior$_() instanceof t) return s;
            return null;
        }
        _$GetBehaviorSdkInstanceFromCtor$_(t) {
            if (!t) return null;
            const s = this._$GetBehaviorInstanceFromCtor$_(t);
            return s ? s._$GetSdkInstance$_() : null;
        }
        _$GetBehaviorIndexBySID$_(i) {
            const e = this._$_behaviorInstances$_;
            for (let t = 0, s = e.length; t < s; ++t) if (e[t]._$GetBehaviorType$_()._$GetSID$_() === i) return t;
            return -1;
        }
        _$GetAllInstanceVariableValues$_() {
            return this._$_instVarValues$_;
        }
        _$_GetAllInstanceVariableNames$_() {
            return this._$_objectType$_._$_GetAllInstanceVariableNames$_();
        }
        _$GetInstanceVariableCount$_() {
            return this._$_instVarValues$_.length;
        }
        _$GetInstanceVariableValue$_(t) {
            const s = this._$_instVarValues$_;
            if ((t |= 0) < 0 || t >= s.length) throw new RangeError("invalid instance variable");
            return s[t];
        }
        _$_GetInstanceVariableValueUnchecked$_(t) {
            return this._$_instVarValues$_[t];
        }
        _$_GetInstanceVariableTypedValue$_(t) {
            const s = this._$_instVarValues$_[t];
            return 0 === this._$_objectType$_._$GetInstanceVariableType$_(t) ? !!s : s;
        }
        _$SetInstanceVariableValue$_(t, s) {
            const i = this._$_instVarValues$_;
            if ((t |= 0) < 0 || t >= i.length) throw new RangeError("invalid instance variable");
            const e = this._$_objectType$_._$GetInstanceVariableType$_(t);
            switch (e) {
              case 0:
                i[t] = s ? 1 : 0;
                break;

              case 1:
                i[t] = "number" == typeof s ? s : parseFloat(s);
                break;

              case 2:
                i[t] = "string" == typeof s ? s : s.toString();
                break;

              default:
                throw new Error("unknown instance variable type");
            }
        }
        _$SetInstanceVariableOffset$_(t, s) {
            if (0 !== s) {
                const i = this._$_instVarValues$_;
                if ((t |= 0) < 0 || t >= i.length) throw new RangeError("invalid instance variable");
                const e = i[t];
                if ("number" != typeof e) throw "boolean" == typeof e ? new Error("can not set offset of boolean variable") : "string" == typeof e ? new Error("can not set offset of string variable") : new Error("unknown instance variable type");
                i[t] += "number" == typeof s ? s : parseFloat(s);
            }
        }
        _$GetSavedDataMap$_() {
            let t = x.get(this);
            return t || (t = new Map(), x.set(this, t)), t;
        }
        _$GetUnsavedDataMap$_() {
            let t = e.get(this);
            return t || (t = new Map(), e.set(this, t)), t;
        }
        _$_HasAnyCreateDestroyHandler$_(t) {
            const s = this._$GetObjectClass$_();
            if (s._$UserScriptDispatcher$_()._$HasAnyHandlerFor$_(t)) return !0;
            for (const i of s._$GetFamilies$_()) if (i._$UserScriptDispatcher$_()._$HasAnyHandlerFor$_(t)) return !0;
            return !!this._$_runtime$_._$UserScriptDispatcher$_()._$HasAnyHandlerFor$_(t);
        }
        _$_TriggerOnCreatedOnSelfAndRelated$_() {
            const t = new Set(), s = (t.add(this), this._$GetWorldInfo$_());
            if (s && s._$HasChildren$_()) for (const i of this._$allChildren$_()) if (t.add(i), 
            i._$IsInContainer$_()) for (const e of i._$siblings$_()) t.add(e);
            if (this._$IsInContainer$_()) for (const n of this._$siblings$_()) t.add(n);
            for (const h of t.values()) h._$_TriggerOnCreated$_();
            this._$_OnHierarchyReady$_();
        }
        _$_OnCreatedCommon$_() {
            this._$_objectType$_._$_GetUserScriptInstanceClass$_() && this._$GetInterfaceClass$_();
            for (const t of this._$_behaviorInstances$_) t._$PostCreate$_();
        }
        _$_OnCreatedForLoadingSavegame$_() {
            this._$_OnCreatedCommon$_();
        }
        _$_TriggerOnCreated$_() {
            if (this._$_OnCreatedCommon$_(), this._$_HasAnyCreateDestroyHandler$_("instancecreate")) {
                const t = this._$GetObjectClass$_(), s = new w.Event("instancecreate");
                s._$instance$_ = this._$GetInterfaceClass$_(), t._$DispatchUserScriptEvent$_(s);
                for (const i of t._$GetFamilies$_()) i._$DispatchUserScriptEvent$_(s);
                this._$_runtime$_._$DispatchUserScriptEvent$_(s);
            }
            this._$_runtime$_._$Trigger$_(this._$GetPlugin$_()._$GetConstructor$_()._$Cnds$_._$OnCreated$_, this, null);
        }
        _$_OnHierarchyReady$_() {
            if (this._$GetPlugin$_()._$SupportsSceneGraph$_()) {
                if (this._$DispatchUserScriptEvent$_(new w.Event("hierarchyready")), 
                this._$_HasAnyCreateDestroyHandler$_("hierarchyready")) {
                    const t = this._$GetObjectClass$_(), s = new w.Event("hierarchyready");
                    s._$instance$_ = this._$GetInterfaceClass$_(), t._$DispatchUserScriptEvent$_(s);
                    for (const i of t._$GetFamilies$_()) i._$DispatchUserScriptEvent$_(s);
                    this._$_runtime$_._$DispatchUserScriptEvent$_(s);
                }
                this._$_runtime$_._$Trigger$_(this._$GetPlugin$_()._$GetConstructor$_()._$Cnds$_._$OnHierarchyReady$_, this, null);
            }
        }
        _$_TriggerOnDestroyed$_() {
            this._$_runtime$_._$Trigger$_(this._$GetPlugin$_()._$GetConstructor$_()._$Cnds$_._$OnDestroyed$_, this, null);
        }
        _$_FireDestroyedScriptEvents$_(t) {
            if (this._$_iScriptInterface$_) {
                const s = new w.Event("destroy");
                s._$isEndingLayout$_ = t, this._$DispatchUserScriptEvent$_(s);
            }
            if (this._$_HasAnyCreateDestroyHandler$_("instancedestroy")) {
                const i = this._$GetObjectClass$_(), e = new w.Event("instancedestroy");
                e._$instance$_ = this._$GetInterfaceClass$_(), e._$isEndingLayout$_ = t, 
                i._$DispatchUserScriptEvent$_(e);
                for (const n of i._$GetFamilies$_()) n._$DispatchUserScriptEvent$_(e);
                this._$_runtime$_._$DispatchUserScriptEvent$_(e);
            }
        }
        _$_GetDebuggerProperties$_() {
            return this._$_sdkInst$_ ? this._$_sdkInst$_._$GetDebuggerProperties$_() : this._$_iScriptInterface$_._$_getDebuggerProperties$_();
        }
        _$SaveToJson$_(t = "full", s = null) {
            const i = {}, e = ("full" === t ? i.uid = this._$GetUID$_() : i.c3 = !0, 
            this._$GetTagsSet$_());
            if (0 < e.size && (i.tags = Array.from(e)), "visual-state" !== t) {
                const h = x.get(this);
                if (h && h.size && (i.ex = w._$ToSuperJSON$_(h)), -1 !== this._$GetTimeScale$_() && (i.mts = this._$GetTimeScale$_()), 
                0 < this._$_objectType$_._$GetInstanceVariablesCount$_()) {
                    const r = {}, o = this._$_objectType$_._$GetInstanceVariableSIDs$_();
                    for (let t = 0, s = this._$_instVarValues$_.length; t < s; ++t) r[o[t].toString()] = this._$_instVarValues$_[t];
                    i.ivs = r;
                }
                if (this._$_behaviorInstances$_.length) {
                    const a = {};
                    for (const l of this._$_behaviorInstances$_) {
                        const u = l._$SaveToJson$_(t);
                        u && (a[l._$GetBehaviorType$_()._$GetSID$_().toString()] = u);
                    }
                    i.behs = a;
                }
            }
            this._$_worldInfo$_ && (i.w = this._$_worldInfo$_._$_SaveToJson$_(t, s));
            const n = this._$_sdkInst$_ ? this._$_sdkInst$_._$SaveToJson$_() : this._$_iScriptInterface$_._$_saveToJson$_();
            return n && (i.data = n), i;
        }
        _$_OnBeforeLoad$_(t = "full", s) {
            this._$_worldInfo$_ && this._$_worldInfo$_._$_OnBeforeLoad$_(t);
        }
        _$_OnAfterLoad$_(t, s = "full", i = null) {
            this._$_worldInfo$_ && this._$_worldInfo$_._$_OnAfterLoad$_(t, s, i);
        }
        _$_OnAfterLoad2$_(t, s = "full", i = null) {
            this._$_worldInfo$_ && this._$_worldInfo$_._$_OnAfterLoad2$_(t, s, i);
        }
        _$_SetupSceneGraphConnectionsOnChangeOfLayout$_() {
            this._$GetPlugin$_()._$IsWorldType$_() && this._$_worldInfo$_._$_SetupSceneGraphConnectionsOnChangeOfLayout$_();
        }
        _$LoadFromJson$_(s, t = "full", i) {
            if ("full" === t) this._$_uid$_ = s.uid; else if (!s.c3) return;
            if (this._$_SetTagsSetFromJson$_(s.tags), "visual-state" !== t) {
                let t = x.get(this);
                t && (t.clear(), x.delete(this));
                const n = s.ex, h = (n && (t = w._$FromSuperJSON$_(n), x.set(this, t)), 
                this._$_timeScale$_ = s.hasOwnProperty("mts") ? s.mts : -1, s.ivs);
                if (h) for (const [ r, o ] of Object.entries(h)) {
                    const a = parseInt(r, 10), l = this._$_objectType$_._$GetInstanceVariableIndexBySID$_(a);
                    if (!(l < 0 || l >= this._$_instVarValues$_.length)) {
                        let t = o;
                        null === t && (t = NaN), this._$_instVarValues$_[l] = t;
                    }
                }
            }
            if (this._$GetPlugin$_()._$IsWorldType$_()) {
                const u = s.w;
                if (u) {
                    const c = u.l;
                    if (this._$_worldInfo$_._$GetLayer$_()._$GetSID$_() !== c) {
                        const f = this._$_worldInfo$_._$GetLayer$_(), d = f._$GetLayout$_()._$GetLayerBySID$_(c);
                        d ? (this._$_worldInfo$_._$_SetLayer$_(d), f._$_RemoveInstance$_(this, !0), 
                        d._$_AddInstance$_(this, !0), d._$SetZIndicesChanged$_(this), 
                        this._$_worldInfo$_._$SetBboxChanged$_()) : "full" === t && this._$_runtime$_._$DestroyInstance$_(this);
                    }
                    this._$_worldInfo$_._$_LoadFromJson$_(u, t);
                }
            }
            if ("visual-state" !== t) {
                const p = s.behs;
                if (p) for (const [ m, g ] of Object.entries(p)) {
                    const y = parseInt(m, 10), M = this._$GetBehaviorIndexBySID$_(y);
                    M < 0 || M >= this._$_behaviorInstances$_.length || this._$_behaviorInstances$_[M]._$LoadFromJson$_(g, t);
                }
            }
            const e = s.data;
            e && (this._$_sdkInst$_ ? this._$_sdkInst$_._$LoadFromJson$_(e, t) : this._$_iScriptInterface$_._$_loadFromJson$_(e));
        }
        _$GetInterfaceClass$_() {
            return this._$_iScriptInterface$_ || this._$_InitUserScriptInterface$_();
        }
        _$HasScriptInterface$_() {
            return !!this._$_iScriptInterface$_;
        }
        _$_InitUserScriptInterface$_(t, s) {
            const i = this._$_worldInfo$_ ? t ? self._$ISDKWorldInstanceBase$_ : self._$IWorldInstance$_ : t ? self._$ISDKInstanceBase$_ : self._$IInstance$_, e = t || this._$_sdkInst$_._$GetScriptInterfaceClass$_(), n = this._$_objectType$_._$_GetUserScriptInstanceClass$_(), h = n || e || i, r = this._$GetPlugin$_()._$GetSdkVersion$_();
            if (w._$AddonManager$_._$_PushInitObject$_(this, r), w._$AddonManager$_._$_PushInitProperties$_(s), 
            this._$_iScriptInterface$_ = new h(), w._$AddonManager$_._$_PopInitProperties$_(), 
            w._$AddonManager$_._$_PopInitObject$_(r), e && !(this._$_iScriptInterface$_ instanceof i)) throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`);
            if (n) {
                const o = e || i;
                if (!(this._$_iScriptInterface$_ instanceof o)) throw new TypeError(`setInstanceClass(): class '${n.name}' does not extend the right base class - check it extends the right class, e.g. globalThis.InstanceType.MyObjectName`);
            }
            return this._$_iScriptInterface$_;
        }
        _$_GetInstVarsScriptDescriptor$_(t) {
            if (0 !== this._$_instVarValues$_.length) {
                const i = {}, e = this._$_objectType$_._$_GetAllInstanceVariableJsPropNames$_();
                for (let t = 0, s = e.length; t < s; ++t) i[e[t]] = {
                    configurable: !1,
                    enumerable: !0,
                    get: w.Instance.prototype._$_GetInstanceVariableTypedValue$_.bind(this, t),
                    set: w.Instance.prototype._$SetInstanceVariableValue$_.bind(this, t)
                };
                const s = Object.create(Object.prototype, i);
                t._$instVars$_ = {
                    value: s,
                    writable: !1
                };
            }
        }
        _$_GetBehaviorsScriptDescriptor$_(t) {
            const s = this._$_behaviorInstances$_;
            if (0 !== s.length) {
                const i = {};
                for (const n of s) i[n._$GetBehaviorType$_()._$GetJsPropName$_()] = {
                    value: n._$GetScriptInterface$_(),
                    writable: !1
                };
                const e = Object.create(Object.prototype, i);
                t._$behaviors$_ = {
                    value: e,
                    writable: !1
                };
            }
        }
        _$DispatchUserScriptEvent$_(t) {
            if (this._$HasScriptInterface$_()) {
                const s = this._$GetInterfaceClass$_(), i = (t._$instance$_ = s, 
                this._$_runtime$_), e = i._$IsDebug$_() && !i._$GetEventSheetManager$_()._$IsInEventEngine$_();
                e && n.StartMeasuringScriptTime(), s.dispatchEvent(t), e && n.AddScriptTime();
            }
        }
    };
}

{
    const wa = self._$C3$_;
    wa._$SceneGraphInfo$_ = class extends wa._$DefendedBase$_ {
        constructor(e) {
            super(), this._$_owner$_ = e, this._$_parent$_ = null, this._$_children$_ = [], 
            this._$_startWidth$_ = e._$GetWidth$_(), this._$_startHeight$_ = e._$GetHeight$_(), 
            this._$_startScaleX$_ = 1, this._$_startScaleY$_ = 1, this._$_parentStartAngle$_ = 0, 
            this._$_ownOpacity$_ = 1, this._$_startOpacity$_ = e._$GetOpacity$_(), 
            this._$_tmpSceneGraphChildren$_ = null, this._$_tmpSceneGraphChildrenIndexes$_ = null, 
            this._$_indexInParent$_ = NaN, this._$_originalSizeKnown$_ = !1, this._$_originalWidth$_ = NaN, 
            this._$_originalHeight$_ = NaN, this._$_on_instance_create$_ = t => {
                if (t._$instance$_ === this._$_parent$_._$GetInstance$_()) {
                    const s = e._$GetRuntime$_(), i = (s._$Dispatcher$_().removeEventListener("instancecreate", this._$_on_instance_create$_), 
                    this._$_parent$_._$GetInstance$_()._$GetSdkInstance$_());
                    this._$_originalSizeKnown$_ = !!i._$IsOriginalSizeKnown$_(), 
                    this._$_originalWidth$_ = this._$_originalSizeKnown$_ ? i._$GetOriginalWidth$_() : NaN, 
                    this._$_originalHeight$_ = this._$_originalSizeKnown$_ ? i._$GetOriginalHeight$_() : NaN;
                }
            };
        }
        _$Release$_() {
            this._$_parent$_ = null, this._$_tmpSceneGraphChildren$_ = null, this._$_tmpSceneGraphChildrenIndexes$_ = null, 
            this._$_indexInParent$_ = NaN, this._$_originalSizeKnown$_ = !1, this._$_originalWidth$_ = NaN, 
            this._$_originalHeight$_ = NaN, wa._$clearArray$_(this._$_children$_);
        }
        _$SetParent$_(t) {
            if (this._$_ownOpacity$_ = this._$_owner$_._$GetOpacity$_(), this._$_startOpacity$_ = this._$_ownOpacity$_, 
            this._$_parent$_ = t, this._$_parentStartAngle$_ = t ? t._$GetAngle$_() : 0, 
            this._$_parent$_) {
                const s = this._$_owner$_, i = s._$GetRuntime$_(), e = this._$_parent$_._$GetInstance$_()._$GetPlugin$_()._$GetSdkVersion$_();
                if (e < 2) {
                    const n = this._$_parent$_._$GetInstance$_()._$GetSdkInstance$_();
                    n ? (this._$_originalSizeKnown$_ = !!n._$IsOriginalSizeKnown$_(), 
                    this._$_originalWidth$_ = this._$_originalSizeKnown$_ ? n._$GetOriginalWidth$_() : NaN, 
                    this._$_originalHeight$_ = this._$_originalSizeKnown$_ ? n._$GetOriginalHeight$_() : NaN) : this._$_parent$_._$GetInstance$_()._$IsDestroyed$_() || i._$Dispatcher$_().addEventListener("instancecreate", this._$_on_instance_create$_);
                } else this._$_originalSizeKnown$_ = !1, this._$_originalWidth$_ = NaN, 
                this._$_originalHeight$_ = NaN;
            } else this._$_originalSizeKnown$_ = !1, this._$_originalWidth$_ = NaN, 
            this._$_originalHeight$_ = NaN;
        }
        _$GetParent$_() {
            return this._$_parent$_;
        }
        _$HasChildren$_() {
            return 0 < this._$_children$_.length;
        }
        _$GetChildren$_() {
            return this._$_children$_;
        }
        _$_MaybeSortChildren$_() {
            this._$HasChildren$_() && 1 !== this._$_children$_.length && (this._$_tmpSceneGraphChildrenIndexes$_ ? this._$_children$_.sort((t, s) => {
                const i = this._$_tmpSceneGraphChildrenIndexes$_.get(t._$GetInstance$_()), e = this._$_tmpSceneGraphChildrenIndexes$_.get(s._$GetInstance$_());
                return wa._$IsFiniteNumber$_(i) && wa._$IsFiniteNumber$_(e) ? i - e : 0;
            }) : this._$_children$_.sort((t, s) => {
                const i = t._$_GetSceneGraphInfo$_()._$_GetIndexInParent$_(), e = s._$_GetSceneGraphInfo$_()._$_GetIndexInParent$_();
                return wa._$IsFiniteNumber$_(i) && wa._$IsFiniteNumber$_(e) ? i - e : 0;
            }));
        }
        _$_GetIndexInParent$_() {
            return this._$_indexInParent$_;
        }
        _$GetStartScaleX$_() {
            return this._$_startScaleX$_;
        }
        _$SetStartScaleX$_(t) {
            this._$_startScaleX$_ = t;
        }
        _$GetStartScaleY$_() {
            return this._$_startScaleY$_;
        }
        _$SetStartScaleY$_(t) {
            this._$_startScaleY$_ = t;
        }
        _$GetStartOpacity$_() {
            return this._$_startOpacity$_;
        }
        _$GetOwnOpacity$_() {
            return this._$_ownOpacity$_;
        }
        _$SetOwnOpacity$_(t) {
            this._$_ownOpacity$_ = t;
        }
        _$_GetStartWidth$_() {
            return 0 === this._$_startWidth$_ ? Number.EPSILON : this._$_startWidth$_;
        }
        _$_GetStartHeight$_() {
            return 0 === this._$_startHeight$_ ? Number.EPSILON : this._$_startHeight$_;
        }
        _$GetParentScaleX$_() {
            if (this._$_owner$_._$GetTransformWithParentWidth$_()) {
                let t = this._$_parent$_, s = t._$GetWidth$_(), i = t._$_GetSceneGraphInfo$_()._$_GetStartWidth$_();
                return 0 === s && (s = Number.EPSILON), i === Number.EPSILON && s === Number.EPSILON ? 1 : i === Number.EPSILON && s !== Number.EPSILON && this._$_originalSizeKnown$_ ? 1 + s / this._$_originalWidth$_ : s / i;
            }
            return 1;
        }
        _$GetParentScaleY$_() {
            if (this._$_owner$_._$GetTransformWithParentHeight$_()) {
                let t = this._$_parent$_, s = t._$GetHeight$_(), i = t._$_GetSceneGraphInfo$_()._$_GetStartHeight$_();
                return 0 === s && (s = Number.EPSILON), i === Number.EPSILON && s === Number.EPSILON ? 1 : i === Number.EPSILON && s !== Number.EPSILON && this._$_originalSizeKnown$_ ? 1 + s / this._$_originalHeight$_ : s / i;
            }
            return 1;
        }
        _$GetParentStartAngle$_() {
            return 0;
        }
        _$_SaveToJsonProperties$_() {
            return {
                sw: this._$_startWidth$_,
                sh: this._$_startHeight$_,
                sx: this._$_startScaleX$_,
                sy: this._$_startScaleY$_,
                psa: this._$_parentStartAngle$_,
                oo: this._$_ownOpacity$_,
                so: this._$_startOpacity$_,
                pi: this._$_owner$_._$GetInstance$_()._$GetIndexInParent$_()
            };
        }
        _$_SaveToJson$_(t, s = null) {
            const i = this._$_SaveToJsonProperties$_();
            return s && s.selfOnly ? Object.assign(i, {
                p: null,
                c: []
            }) : Object.assign(i, {
                p: this._$_GetParentJson$_(t),
                c: this._$_GetChildrenJson$_(t)
            });
        }
        _$_GetFlagsString$_(t) {
            let s = "";
            return t._$GetTransformWithParentX$_() && (s += "x"), t._$GetTransformWithParentY$_() && (s += "y"), 
            t._$GetTransformWithParentWidth$_() && (s += "w"), t._$GetTransformWithParentHeight$_() && (s += "h"), 
            t._$GetTransformWithParentAngle$_() && (s += "a"), t._$GetTransformWithParentZElevation$_() && (s += "z"), 
            t._$GetDestroyWithParent$_() && (s += "d"), t._$GetTransformWithParentOpacity$_() && (s += "o"), 
            t._$GetTransformWithParentVisibility$_() && (s += "v"), s;
        }
        _$_GetParentJson$_(t) {
            return this._$_parent$_ && this._$_parent$_._$GetInstance$_() && !this._$_parent$_._$GetInstance$_()._$IsDestroyed$_() ? this._$_GetInstanceJson$_(this._$_parent$_, this._$_owner$_, t) : null;
        }
        _$_GetChildrenJson$_(s) {
            return this._$_children$_.map(t => this._$_GetInstanceJson$_(t, t, s)).filter(t => t);
        }
        _$_GetInstanceJson$_(t, s, i) {
            const e = t._$GetInstance$_();
            if (e && e._$IsDestroyed$_()) return null;
            const n = {};
            return n.uid = e._$GetUID$_(), n.f = this._$_GetFlagsString$_(s), n.offsets = s._$_SaveSceneGraphPropertiesToJson$_(), 
            n.data = wa._$SceneGraphInfo$_._$GetSceneGraphInstanceDataFromInstance$_(e), 
            n.oci = e._$GetObjectClass$_()._$GetIndex$_(), "state" === i ? (n.inst = e._$SaveToJson$_("full", {
                selfOnly: !0
            }), n.instIndex = NaN) : (n.instIndex = e._$GetObjectClass$_()._$GetInstances$_().indexOf(e), 
            n.inst = null), n;
        }
        _$_LoadFromJson$_(t) {
            this._$_startWidth$_ = t.sw, this._$_startHeight$_ = t.sh, this._$_startScaleX$_ = t.sx, 
            this._$_startScaleY$_ = t.sy, this._$_parentStartAngle$_ = t.psa, this._$_ownOpacity$_ = t.oo, 
            this._$_startOpacity$_ = t.so, this._$_indexInParent$_ = wa._$IsFiniteNumber$_(t.pi) ? t.pi : NaN;
        }
        _$_SetTmpSceneGraphChildren$_(t, s) {
            if (!t && !s && this._$_tmpSceneGraphChildren$_) for (const i of this._$_tmpSceneGraphChildren$_) i._$IsDestroyed$_() || i._$HasParent$_() || i._$GetRuntime$_()._$DestroyInstance$_(i);
            this._$_tmpSceneGraphChildren$_ = t, this._$_tmpSceneGraphChildrenIndexes$_ = s;
        }
        _$_OnAfterLoad$_(t, s) {
            const i = this._$_owner$_, e = i._$GetRuntime$_(), n = new Set();
            if (t.p && !this._$_parent$_) {
                const o = t.p.uid, a = e._$GetInstanceByUID$_(o);
                if (s?._$setFromJson$_, a) {
                    const l = a._$GetWorldInfo$_();
                    if (a._$HasChild$_(i._$GetInstance$_())) this._$_parent$_ = l; else {
                        a._$HasChildWithUID$_(i._$GetInstance$_()._$GetUID$_()) ? e._$DestroyInstance$_(i._$GetInstance$_()) : a._$AddChild$_(i._$GetInstance$_(), this._$_GetFlagsObj$_(t.p.f)), 
                        n.has(i) || (i._$_LoadSceneGraphPropertiesFromJson$_(t.p.offsets), 
                        this._$_LoadInstancePropertiesFromJson$_(a, t.p, s)), n.add(i);
                        const u = a._$GetWorldInfo$_();
                        u._$_GetSceneGraphInfo$_()._$_MaybeSortChildren$_();
                    }
                } else if (wa._$IsFiniteNumber$_(t.p.oci)) {
                    const c = e._$GetObjectClassByIndex$_(t.p.oci), f = (e._$GetSystemPlugin$_(), 
                    e._$CreateInstance$_(c, i._$GetLayer$_(), 0, 0, !0));
                    if (s?._$setFromJson$_, f) {
                        const d = this._$_GetInstanceData$_(t.p, e), p = (d && f._$LoadFromJson$_(d), 
                        f._$GetWorldInfo$_()), m = (p._$GetLayer$_()._$SortAndAddInstancesByZIndex$_(f), 
                        f._$AddChild$_(i._$GetInstance$_(), this._$_GetFlagsObj$_(t.p.f)), 
                        f._$GetWorldInfo$_());
                        m._$_GetSceneGraphInfo$_()._$_MaybeSortChildren$_();
                    }
                }
            }
            const h = [];
            for (const g of t.c) {
                const y = g.uid, M = e._$GetInstanceByUID$_(y);
                M && h.push(M);
            }
            let r = 0;
            for (const w of t.c) {
                const x = w.uid, S = e._$GetInstanceByUID$_(x);
                if (s?._$setFromJson$_, S) {
                    if (this._$_tmpSceneGraphChildren$_) {
                        if (this._$_tmpSceneGraphChildren$_.includes(S)) {
                            const C = S;
                            if (C._$GetObjectClass$_() !== S._$GetObjectClass$_()) {
                                r++;
                                continue;
                            }
                            if (C._$IsDestroyed$_()) {
                                r++;
                                continue;
                            }
                            const G = t.c[r];
                            if (!s?._$setFromJson$_ && this._$_HasAllChildrenOfType$_(C, h, i)) {
                                this._$_UpdateInstance$_(r, G, i, n, s), r++;
                                continue;
                            }
                            if (C._$HasParent$_() && C._$GetParent$_() !== i._$GetInstance$_()) {
                                const I = this._$_CreateNewChildInstance$_(G, s);
                                this._$_AddAndSetChildInstance$_(I, G, n, s), r++;
                                continue;
                            }
                            this._$_AddAndSetChildInstance$_(C._$GetWorldInfo$_(), G, n, s, !0), 
                            r++;
                            continue;
                        }
                        if (this._$_tmpSceneGraphChildren$_[r]) {
                            const _ = this._$_tmpSceneGraphChildren$_[r];
                            if (_._$GetObjectClass$_() !== S._$GetObjectClass$_()) {
                                r++;
                                continue;
                            }
                            if (_._$IsDestroyed$_()) {
                                r++;
                                continue;
                            }
                            const E = t.c[r];
                            if (!s?._$setFromJson$_ && this._$_HasAllChildrenOfType$_(_, h, i)) {
                                this._$_UpdateInstance$_(r, E, i, n, s), r++;
                                continue;
                            }
                            if (_._$HasParent$_() && _._$GetParent$_() !== i._$GetInstance$_()) {
                                const N = this._$_CreateNewChildInstance$_(E, s);
                                this._$_AddAndSetChildInstance$_(N, E, n, s), r++;
                                continue;
                            }
                            this._$_AddAndSetChildInstance$_(_._$GetWorldInfo$_(), E, n, s, !0), 
                            r++;
                            continue;
                        }
                    }
                    const T = S._$GetObjectClass$_(), b = this._$_GetInstancesOfObjectClassCount$_(h, T), v = i._$GetInstance$_()._$GetChildrenOfObjectClass$_(T).length;
                    if (b === v) {
                        const D = i._$GetInstance$_()._$GetChildAt$_(r);
                        if (D) {
                            const A = D._$GetWorldInfo$_();
                            A && (n.has(A) || (A._$_LoadSceneGraphPropertiesFromJson$_(w.offsets), 
                            this._$_LoadInstancePropertiesFromJson$_(D, w, s)), 
                            n.add(A));
                        }
                        r++;
                        continue;
                    }
                    if (S._$HasParent$_() && S._$GetParent$_() !== i._$GetInstance$_()) {
                        const L = this._$_CreateNewChildInstance$_(w, s);
                        this._$_AddAndSetChildInstance$_(L, w, n, s), r++;
                        continue;
                    }
                    this._$_AddAndSetChildInstance$_(S._$GetWorldInfo$_(), w, n, s);
                } else if (this._$_tmpSceneGraphChildren$_ && this._$_tmpSceneGraphChildren$_[r]) {
                    const O = this._$_tmpSceneGraphChildren$_[r], R = e._$GetObjectClassByIndex$_(this._$_GetObjectClassIndex$_(w));
                    if (O._$GetObjectClass$_() !== R) {
                        r++;
                        continue;
                    }
                    if (O._$IsDestroyed$_()) {
                        r++;
                        continue;
                    }
                    const P = t.c[r];
                    if (!s?._$setFromJson$_ && this._$_HasAllChildrenOfType$_(O, h, i)) {
                        this._$_UpdateInstance$_(r, P, i, n, s), r++;
                        continue;
                    }
                    if (O._$HasParent$_() && O._$GetParent$_() !== i._$GetInstance$_()) {
                        const k = this._$_CreateNewChildInstance$_(P, s);
                        this._$_AddAndSetChildInstance$_(k, P, n, s), r++;
                        continue;
                    }
                    this._$_AddAndSetChildInstance$_(O._$GetWorldInfo$_(), P, n, s);
                } else {
                    const F = this._$_CreateNewChildInstance$_(w, s);
                    this._$_AddAndSetChildInstance$_(F, w, n, s);
                }
                r++;
            }
        }
        _$_HasAllChildrenOfType$_(t, s, i) {
            const e = t._$GetObjectClass$_(), n = this._$_GetInstancesOfObjectClassCount$_(s, e), h = i._$GetInstance$_()._$GetChildrenOfObjectClass$_(e).length;
            return n === h;
        }
        _$_UpdateInstance$_(t, s, i, e, n) {
            const h = i._$GetInstance$_()._$GetChildAt$_(t, s);
            if (h) {
                const r = h._$GetWorldInfo$_();
                r && (e.has(r) || (r._$_LoadSceneGraphPropertiesFromJson$_(s.offsets), 
                this._$_LoadInstancePropertiesFromJson$_(h, s, n)), e.add(r));
            }
        }
        _$_GetFlagsObj$_(t) {
            const s = {};
            return s._$transformX$_ = t.includes("x"), s._$transformY$_ = t.includes("y"), 
            s._$transformWidth$_ = t.includes("w"), s._$transformHeight$_ = t.includes("h"), 
            s._$transformAngle$_ = t.includes("a"), s._$transformZElevation$_ = t.includes("z"), 
            s._$destroyWithParent$_ = t.includes("d"), s._$transformOpacity$_ = t.includes("o"), 
            s._$transformVisibility$_ = t.includes("v"), s;
        }
        _$_GetObjectClassIndex$_(t) {
            return wa._$IsFiniteNumber$_(t.oci) ? t.oci : t[1];
        }
        _$_CreateNewChildInstance$_(e, n) {
            if (wa._$IsFiniteNumber$_(e.oci)) {
                let t = this._$_owner$_, s = t._$GetRuntime$_(), i;
                if (e.data) i = s._$CreateInstanceFromData$_(e.data, t._$GetLayer$_(), !1, 0, 0, !1, !0); else {
                    const h = s._$GetObjectClassByIndex$_(e.oci);
                    i = s._$CreateInstance$_(h, t._$GetLayer$_(), 0, 0, !0);
                }
                if (n?._$setFromJson$_, i) {
                    const r = this._$_GetInstanceData$_(e, s), o = (r && i._$LoadFromJson$_(r), 
                    i._$GetWorldInfo$_());
                    return o._$GetLayer$_()._$SortAndAddInstancesByZIndex$_(i, !0), 
                    o;
                }
            }
        }
        _$_AddAndSetChildInstance$_(t, s, i, e, n = !0) {
            const h = this._$_owner$_, r = h._$AddChild$_(t, this._$_GetFlagsObj$_(s.f));
            r && n && (i.has(t) || (t._$_LoadSceneGraphPropertiesFromJson$_(s.offsets), 
            this._$_LoadInstancePropertiesFromJson$_(t._$GetInstance$_(), s, e)), 
            i.add(t)), this._$_MaybeSortChildren$_();
        }
        _$_LoadInstancePropertiesFromJson$_(t, s, i) {
            let e = this._$_GetInstanceData$_(s, this._$_owner$_._$GetRuntime$_());
            e && ((e = JSON.parse(JSON.stringify(e))).w = null, t._$LoadFromJson$_(e));
        }
        _$_GetInstancesOfObjectClassCount$_(t, s) {
            return t.filter(t => t._$GetObjectClass$_()._$GetName$_() === s._$GetName$_()).length;
        }
        _$_GetInstanceData$_(t, s) {
            if (wa._$IsFiniteNumber$_(t.instIndex)) {
                const i = s._$GetObjectClassByIndex$_(t.oci), e = i._$_GetLoadInstancesJson$_();
                return e ? e[t.instIndex] : null;
            }
            return wa._$IsString$_(t.inst) ? JSON.parse(t.inst) : t.inst || void 0;
        }
        static _$GetSceneGraphInstanceDataFromInstance$_(t) {
            let s = t._$GetWorldInfo$_()._$GetLayer$_()._$GetInitialInstanceData$_(t._$GetUID$_());
            if (!s) return null;
            s = JSON.parse(JSON.stringify(s));
            const i = [];
            for (const e of [ ...t._$GetChildren$_() ]) {
                const n = e._$GetWorldInfo$_();
                i.push([ n._$GetLayout$_()._$GetSID$_(), n._$GetLayer$_()._$GetIndex$_(), e._$GetUID$_(), wa._$SceneGraphInfo$_._$_GetFlagsNumber$_(n), e._$GetObjectClass$_()._$IsInContainer$_() ? 1 : 0, n._$GetZIndex$_(), wa._$SceneGraphInfo$_._$GetSceneGraphInstanceDataFromInstance$_(e) ]);
            }
            return wa._$IsArray$_(s[0][14]) ? s[0][14][1] = i : (s[0][14] = [], 
            s[0][14][0] = wa._$SceneGraphInfo$_._$_GetDefaultFlagsNumber$_(), s[0][14][1] = i, 
            s[0][14][2] = t._$GetWorldInfo$_()._$GetZIndex$_()), s;
        }
        static _$_GetFlagsNumber$_(t) {
            let s = 0;
            return (s |= Number(t._$GetTransformWithParentVisibility$_()) << 8) | Number(t._$GetTransformWithParentOpacity$_()) << 7 | Number(t._$GetTransformWithParentZElevation$_()) << 6 | Number(t._$GetDestroyWithParent$_()) << 5 | Number(t._$GetTransformWithParentAngle$_()) << 4 | Number(t._$GetTransformWithParentHeight$_()) << 3 | Number(t._$GetTransformWithParentWidth$_()) << 2 | Number(t._$GetTransformWithParentY$_()) << 1 | Number(t._$GetTransformWithParentX$_()) << 0;
        }
        static _$_GetDefaultFlagsNumber$_(t) {
            let s = 0;
            return s, 511;
        }
    };
}

{
    let d = self._$C3$_, t = self._$glMatrix$_, h = (t._$vec3$_, d._$New$_(d.Rect)), r = d._$New$_(d._$Quad$_), s = d._$New$_(d.Event, "bboxchange", !1), f = d._$New$_(d._$Color$_, 0, 0, 0, 0), u = d._$New$_(d._$CollisionPoly$_), i = d._$New$_(d._$Color$_, 1, 1, 1, 1), o = d._$New$_(d.Rect, 0, 0, -1, -1), n = d._$New$_(d.Rect, 0, 0, -1, -1), p = new Set([ "absolute", "relative" ]), e = [], m = !0, g = new WeakMap(), a = new WeakMap();
    d._$WorldInfo$_ = class extends d._$DefendedBase$_ {
        constructor(t, s) {
            super(), this._$_inst$_ = t, this._$_objectClass$_ = t._$GetObjectClass$_(), 
            this._$_runtime$_ = t._$GetRuntime$_(), this._$_layer$_ = s, this._$_objectClass$_._$_OnWorldInstanceLayerChanged$_(this, null, s), 
            this._$_zIndex$_ = -1, this._$_htmlZIndex$_ = -1, this._$_flags$_ = 196635, 
            this._$_objectClass$_._$GetPlugin$_()._$IsRotatable$_() && (this._$_flags$_ |= 128), 
            this._$_x$_ = NaN, this._$_y$_ = NaN, this._$_zElevation$_ = NaN, this._$_w$_ = NaN, 
            this._$_h$_ = NaN, this._$_depth$_ = NaN, this._$_a$_ = NaN, this._$_sinA$_ = NaN, 
            this._$_cosA$_ = NaN, this._$_ox$_ = NaN, this._$_oy$_ = NaN, this._$_boundingBox$_ = d._$New$_(d.Rect), 
            this._$_boundingQuad$_ = d._$New$_(d._$Quad$_), this._$_collisionCells$_ = n, 
            this._$_renderCells$_ = o, this._$_sourceCollisionPoly$_ = null, this._$_transformedPolyInfo$_ = null, 
            this._$_solidFilterTags$_ = null, this._$_color$_ = i, this._$_colorPremultiplied$_ = i, 
            this._$_stateGroup$_ = null, this._$_instanceEffectList$_ = null, this._$_inst$_._$GetObjectClass$_()._$UsesEffects$_() && (this._$_instanceEffectList$_ = d._$New$_(d._$InstanceEffectList$_, this._$_inst$_, this)), 
            this._$_sceneGraphInfo$_ = null, this._$_tmpSceneGraphChildren$_ = null, 
            this._$_tmpSceneGraphChildrenIndexes$_ = null, this._$_tmpHierarchyPosition$_ = -1, 
            this._$_meshInfo$_ = null;
        }
        _$_MarkDestroyed$_() {
            this._$_flags$_ |= 256;
        }
        _$Release$_() {
            if (this._$_objectClass$_._$_OnWorldInstanceLayerChanged$_(this, this._$_layer$_, null), 
            this._$_stateGroup$_ && (this._$_runtime$_._$GetRenderer$_()._$ReleaseStateGroup$_(this._$_stateGroup$_), 
            this._$_stateGroup$_ = null), this._$_sourceCollisionPoly$_ = null, 
            this._$_transformedPolyInfo$_ && (this._$_transformedPolyInfo$_._$poly$_._$Release$_(), 
            this._$_transformedPolyInfo$_ = null), this._$_solidFilterTags$_ && (this._$_solidFilterTags$_.clear(), 
            this._$_solidFilterTags$_ = null), this._$ReleaseMesh$_(), this._$_instanceEffectList$_ && this._$_instanceEffectList$_._$Release$_(), 
            this._$HasParent$_() && this._$GetParent$_()._$RemoveChild$_(this), 
            this._$HasChildren$_()) {
                const t = [ ...this._$GetChildren$_() ];
                for (const s of t) this._$RemoveChild$_(s);
            }
            this._$_ReleaseSceneGraphInfo$_(), this._$_ReleaseTmpSceneGraphInfo$_(), 
            g.delete(this), a.delete(this), this._$_inst$_ = null, this._$_objectClass$_ = null, 
            this._$_runtime$_ = null, this._$_layer$_ = null;
        }
        _$Init$_(t) {
            if (m = !1, this._$SetXY$_(t[0], t[1]), this._$SetZElevation$_(t[2]), 
            this._$SetSize$_(t[3], t[4]), this._$_depth$_ = 0, this._$IsRotatable$_() ? this._$SetAngle$_(t[6]) : this._$_a$_ = 0, 
            f._$setFromJSON$_(t[7]), this._$_SetColor$_(f), this._$SetOriginX$_(t[8]), 
            this._$SetOriginY$_(t[9]), this._$SetBlendMode$_(t[10]), this._$_instanceEffectList$_ && this._$_instanceEffectList$_._$_LoadEffectParameters$_(t[12]), 
            t[14] && g.set(this, {
                _$childrenData$_: t[14][1],
                _$zIndexData$_: t[14][2]
            }), t[15]) {
                const s = t[15], e = (this._$CreateMesh$_(s[0], s[1]), this._$GetSourceMesh$_()), n = s[2];
                for (let i = 0, t = n.length; i < t; ++i) {
                    const h = n[i];
                    for (let t = 0, s = h.length; t < s; ++t) {
                        const r = h[t], o = e._$GetMeshPointAt$_(t, i);
                        o._$SetX$_(r[0]), o._$SetY$_(r[1]), o._$SetZElevation$_(r[2]), 
                        o._$SetU$_(r[3]), o._$SetV$_(r[4]);
                    }
                }
            }
            if (t[16]) {
                const i = t[16][0], a = t[16][1], l = !!a, u = !l, c = this._$_runtime$_._$GetTemplateManager$_();
                l && c && c._$MapInstanceToTemplateName$_(this._$GetInstance$_(), a), 
                u && c && c._$MapInstanceToTemplateName$_(this._$GetInstance$_(), i);
            }
            m = !0, this._$_UpdateRendererStateGroup$_();
        }
        _$InitNoData$_() {
            this._$_x$_ = 0, this._$_y$_ = 0, this._$_zElevation$_ = 0, this._$_w$_ = 0, 
            this._$_h$_ = 0, this._$_depth$_ = 0, this._$_a$_ = 0, this._$_sinA$_ = 0, 
            this._$_cosA$_ = 1, this._$_ox$_ = 0, this._$_oy$_ = 0, this._$_UpdateRendererStateGroup$_();
        }
        _$GetRuntime$_() {
            return this._$_runtime$_;
        }
        _$GetObjectClass$_() {
            return this._$_objectClass$_;
        }
        _$GetInstance$_() {
            return this._$_inst$_;
        }
        _$_GetParentOffsetAngle$_() {
            return this._$GetTransformWithParentAngle$_() ? this._$_MaybeReflectAngleForMirrorFlip$_(this._$GetParent$_()._$_GetAngleNoReflect$_() - this._$_sceneGraphInfo$_._$GetParentStartAngle$_()) : 0;
        }
        _$SetX$_(t) {
            if (t = +t, this._$GetTransformWithParentX$_()) {
                const s = this._$_sceneGraphInfo$_, i = t - this._$GetX$_(), e = -this._$_GetParentOffsetAngle$_();
                0 == e ? this._$_x$_ += i / s._$GetParentScaleX$_() : (this._$_x$_ += Math.cos(e) * i / s._$GetParentScaleX$_(), 
                this._$GetTransformWithParentY$_() && (this._$_y$_ += Math.sin(e) * i / s._$GetParentScaleY$_()));
            } else this._$_x$_ = t;
        }
        _$OffsetX$_(t, s = !1) {
            t = +t, !s && this._$GetTransformWithParentX$_() ? this._$SetX$_(this._$GetX$_() + t) : this._$_x$_ += t;
        }
        _$GetX$_() {
            if (this._$GetTransformWithParentX$_()) {
                let t = this._$_x$_, s = this._$_sceneGraphInfo$_, i = this._$GetParent$_(), e = this._$_GetParentOffsetAngle$_();
                return 0 === e ? t *= s._$GetParentScaleX$_() : (t = t * s._$GetParentScaleX$_() * Math.cos(e), 
                this._$GetTransformWithParentY$_() && (t -= this._$_y$_ * s._$GetParentScaleY$_() * Math.sin(e))), 
                i._$GetX$_() + t;
            }
            return this._$_x$_;
        }
        _$SetY$_(t) {
            if (t = +t, this._$GetTransformWithParentY$_()) {
                const s = this._$_sceneGraphInfo$_, i = t - this._$GetY$_(), e = -this._$_GetParentOffsetAngle$_();
                0 == e ? this._$_y$_ += i / s._$GetParentScaleY$_() : (this._$GetTransformWithParentX$_() && (this._$_x$_ -= Math.sin(e) * i / s._$GetParentScaleX$_()), 
                this._$_y$_ += Math.cos(e) * i / s._$GetParentScaleY$_());
            } else this._$_y$_ = t;
        }
        _$OffsetY$_(t, s = !1) {
            t = +t, !s && this._$GetTransformWithParentY$_() ? this._$SetY$_(this._$GetY$_() + t) : this._$_y$_ += t;
        }
        _$GetY$_() {
            if (this._$GetTransformWithParentY$_()) {
                let t = this._$_y$_, s = this._$_sceneGraphInfo$_, i = this._$GetParent$_(), e = this._$_GetParentOffsetAngle$_();
                return 0 === e ? t *= s._$GetParentScaleY$_() : (t = t * s._$GetParentScaleY$_() * Math.cos(e), 
                this._$GetTransformWithParentX$_() && (t += this._$_x$_ * s._$GetParentScaleX$_() * Math.sin(e))), 
                i._$GetY$_() + t;
            }
            return this._$_y$_;
        }
        _$SetXY$_(t, s) {
            if (t = +t, s = +s, this._$GetTransformWithParentXOrY$_()) {
                const i = this._$GetTransformWithParentX$_(), e = this._$GetTransformWithParentY$_(), n = this._$_sceneGraphInfo$_, h = t - this._$GetX$_(), r = s - this._$GetY$_(), o = -this._$_GetParentOffsetAngle$_();
                if (0 == o) i ? this._$_x$_ += h / n._$GetParentScaleX$_() : this._$_x$_ = t, 
                e ? this._$_y$_ += r / n._$GetParentScaleY$_() : this._$_y$_ = s; else {
                    const a = Math.sin(o), l = Math.cos(o);
                    i ? this._$_x$_ += e ? (l * h - a * r) / n._$GetParentScaleX$_() : l * h / n._$GetParentScaleX$_() : this._$_x$_ = t, 
                    e ? this._$_y$_ += i ? (a * h + l * r) / n._$GetParentScaleY$_() : l * r / n._$GetParentScaleY$_() : this._$_y$_ = s;
                }
            } else this._$_x$_ = t, this._$_y$_ = s;
        }
        _$GetXY$_() {
            return [ this._$GetX$_(), this._$GetY$_() ];
        }
        _$OffsetXY$_(t, s) {
            t = +t, s = +s, this._$GetTransformWithParentXOrY$_() ? this._$SetXY$_(this._$GetX$_() + t, this._$GetY$_() + s) : (this._$_x$_ += t, 
            this._$_y$_ += s);
        }
        _$EqualsXY$_(t, s) {
            return this._$GetX$_() === t && this._$GetY$_() === s;
        }
        _$SetZElevation$_(t) {
            if (t = +t, this._$GetTransformWithParentZElevation$_() && (t -= this._$GetParent$_()._$GetZElevation$_()), 
            this._$_zElevation$_ !== t) {
                this._$_zElevation$_ = t, this._$_UpdateZElevation$_();
                const s = this._$GetLayer$_();
                0 !== this._$_zElevation$_ && s._$_SetAnyInstanceZElevated$_(), 
                s._$SetZIndicesChanged$_(this);
            }
        }
        _$_UpdateZElevation$_() {
            if (this._$_UpdateRendererStateGroup$_(), this._$HasChildren$_()) {
                const i = this._$GetChildren$_();
                for (let t = 0, s = i.length; t < s; t++) {
                    const e = i[t];
                    e._$GetTransformWithParentZElevation$_() && e._$_UpdateZElevation$_();
                }
            }
        }
        _$OffsetZElevation$_(t) {
            this._$SetZElevation$_(this._$GetZElevation$_() + t);
        }
        _$GetZElevation$_() {
            return this._$GetTransformWithParentZElevation$_() ? this._$GetParent$_()._$GetZElevation$_() + this._$_zElevation$_ : this._$_zElevation$_;
        }
        _$GetTotalZElevation$_() {
            return this._$GetLayer$_()._$GetZElevation$_() + this._$GetZElevation$_();
        }
        _$IsOriginalSizeKnown$_() {
            const t = this._$GetInstance$_()._$GetPlugin$_()._$GetSdkVersion$_();
            return t < 2 && this._$GetInstance$_()._$GetSdkInstance$_()._$IsOriginalSizeKnown$_();
        }
        _$SetWidth$_(t) {
            if (t = +t, this._$GetTransformWithParentWidth$_()) {
                const s = this._$GetWidth$_();
                0 === s ? this._$_w$_ = Number.EPSILON : this._$_w$_ *= t / s;
            } else this._$_w$_ = t;
            this._$_MarkSinCosAngleChanged$_();
        }
        _$OffsetWidth$_(t, s) {
            t = +t, !s && this._$GetTransformWithParentWidth$_() ? this._$SetWidth$_(this._$GetWidth$_() + t) : this._$_w$_ += t, 
            this._$_MarkSinCosAngleChanged$_();
        }
        _$GetWidth$_() {
            if (this._$GetTransformWithParentWidth$_()) {
                const t = this._$GetParent$_(), s = t._$GetWidth$_(), i = t._$_GetSceneGraphInfo$_()._$_GetStartWidth$_();
                return i === Number.EPSILON ? (this._$_GetSceneGraphInfo$_()._$_GetStartWidth$_() + s) * this._$_w$_ : s * this._$_w$_;
            }
            return this._$_w$_;
        }
        _$SetHeight$_(t) {
            if (t = +t, this._$GetTransformWithParentHeight$_()) {
                const s = this._$GetHeight$_();
                0 === s ? this._$_h$_ = Number.EPSILON : this._$_h$_ *= t / s;
            } else this._$_h$_ = t;
            this._$_MarkSinCosAngleChanged$_();
        }
        _$OffsetHeight$_(t, s) {
            t = +t, !s && this._$GetTransformWithParentHeight$_() ? this._$SetHeight$_(this._$GetHeight$_() + t) : this._$_h$_ += t, 
            this._$_MarkSinCosAngleChanged$_();
        }
        _$GetHeight$_() {
            if (this._$GetTransformWithParentHeight$_()) {
                const t = this._$GetParent$_(), s = t._$GetHeight$_(), i = t._$_GetSceneGraphInfo$_()._$_GetStartHeight$_();
                return i === Number.EPSILON ? (this._$_GetSceneGraphInfo$_()._$_GetStartHeight$_() + s) * this._$_h$_ : s * this._$_h$_;
            }
            return this._$_h$_;
        }
        _$SetSize$_(t, s) {
            if (t = +t, s = +s, this._$GetTransformWithParentWidth$_()) {
                const i = this._$GetWidth$_();
                0 === i ? this._$_w$_ = Number.EPSILON : this._$_w$_ *= t / i;
            } else this._$_w$_ = t;
            if (this._$GetTransformWithParentHeight$_()) {
                const e = this._$GetHeight$_();
                0 === e ? this._$_h$_ = Number.EPSILON : this._$_h$_ *= s / e;
            } else this._$_h$_ = s;
            this._$_MarkSinCosAngleChanged$_();
        }
        _$GetSize$_() {
            return [ this._$GetWidth$_(), this._$GetHeight$_() ];
        }
        _$GetDepth$_() {
            return this._$_depth$_;
        }
        _$SetDepth$_(t) {
            if (t < 0) throw new RangeError("invalid depth");
            this._$_depth$_ = t;
        }
        _$GetSceneGraphScale$_() {
            if (this._$HasParent$_()) {
                const t = this._$_sceneGraphInfo$_;
                return Math.min(t._$GetParentScaleX$_(), t._$GetParentScaleY$_());
            }
            return 1;
        }
        _$IsRotatable$_() {
            return 0 != (128 & this._$_flags$_);
        }
        _$SetAngle$_(t) {
            t = +t, this._$IsRotatable$_() && (this._$GetTransformWithParentAngle$_() && (t -= this._$GetParent$_()._$GetAngle$_()), 
            t = d._$clampAngle$_(t), this._$_a$_ !== t) && (this._$_a$_ = t, this._$_MarkSinCosAngleChanged$_());
        }
        _$OffsetAngle$_(t) {
            0 != (t = +t) && this._$IsRotatable$_() && (this._$_a$_ = d._$clampAngle$_(this._$_a$_ + t), 
            this._$_MarkSinCosAngleChanged$_());
        }
        _$_MarkSinCosAngleChanged$_() {
            if (this._$_flags$_ |= 1 << 18, this._$HasChildren$_()) {
                const i = this._$GetChildren$_();
                for (let t = 0, s = i.length; t < s; t++) i[t]._$_MarkSinCosAngleChanged$_();
            }
        }
        _$GetAngle$_() {
            return this._$GetTransformWithParentAngle$_() && this._$IsRotatable$_() ? this._$_MaybeReflectAngleForMirrorFlip$_(d._$clampAngle$_(this._$GetParent$_()._$_GetAngleNoReflect$_() + this._$_a$_)) : this._$_a$_;
        }
        _$_GetAngleNoReflect$_() {
            return this._$GetTransformWithParentAngle$_() && this._$IsRotatable$_() ? d._$clampAngle$_(this._$GetParent$_()._$_GetAngleNoReflect$_() + this._$_a$_) : this._$_a$_;
        }
        _$_MaybeReflectAngleForMirrorFlip$_(t) {
            return this._$GetTransformWithParentWidth$_() && this._$GetTopParent$_()._$GetWidth$_() < 0 && (t = d._$clampAngle$_(d._$angleReflect$_(t, this._$GetTopParent$_()._$GetAngle$_() + Math.PI))), 
            this._$GetTransformWithParentHeight$_() && this._$GetTopParent$_()._$GetHeight$_() < 0 ? d._$angleReflect$_(t, this._$GetTopParent$_()._$GetAngle$_()) : t;
        }
        _$_NeedsReflectAngleForMirrorOrFlip$_() {
            const t = this._$GetParent$_();
            return !!(this._$GetTransformWithParentWidth$_() && t._$GetWidth$_() < 0) || !!(this._$GetTransformWithParentHeight$_() && t._$GetHeight$_() < 0);
        }
        _$_NeedsReflectAngleForMirrorAndFlip$_() {
            const t = this._$GetParent$_();
            return !!(this._$GetTransformWithParentWidth$_() && t._$GetWidth$_() < 0 && this._$GetTransformWithParentHeight$_() && t._$GetHeight$_() < 0);
        }
        _$_MaybeUpdateSinCosAngle$_() {
            const t = this._$_flags$_;
            if (0 != (t & 1 << 18)) {
                const s = this._$GetAngle$_();
                this._$_sinA$_ = Math.sin(s), this._$_cosA$_ = Math.cos(s), this._$_flags$_ = -262145 & t;
            }
        }
        _$GetSinAngle$_() {
            return this._$_MaybeUpdateSinCosAngle$_(), this._$_sinA$_;
        }
        _$GetCosAngle$_() {
            return this._$_MaybeUpdateSinCosAngle$_(), this._$_cosA$_;
        }
        _$SetOriginX$_(t) {
            this._$_ox$_ = +t;
        }
        _$OffsetOriginX$_(t) {
            this._$_ox$_ += +t;
        }
        _$GetOriginX$_() {
            return this._$_ox$_;
        }
        _$SetOriginY$_(t) {
            this._$_oy$_ = +t;
        }
        _$OffsetOriginY$_(t) {
            this._$_oy$_ += +t;
        }
        _$GetOriginY$_() {
            return this._$_oy$_;
        }
        _$_SetColor$_(t) {
            this._$_color$_.equals(t) || (this._$_color$_ === i ? (this._$_color$_ = d._$New$_(d._$Color$_, t), 
            this._$_colorPremultiplied$_ = d._$New$_(d._$Color$_, t), this._$_colorPremultiplied$_._$premultiply$_()) : t._$equalsRgba$_(1, 1, 1, 1) ? (this._$_color$_ = i, 
            this._$_colorPremultiplied$_ = i) : (this._$_color$_.set(t), this._$_colorPremultiplied$_.set(t), 
            this._$_colorPremultiplied$_._$premultiply$_()), this._$_UpdateRendererStateGroup$_());
        }
        _$SetOpacity$_(t) {
            if (t = d._$clamp$_(+t, 0, 1), this._$GetTransformWithParentOpacity$_()) {
                if (this._$_GetSceneGraphInfo$_()._$GetOwnOpacity$_() === t) return;
                this._$_GetSceneGraphInfo$_()._$SetOwnOpacity$_(t), t = this._$GetOpacity$_();
            } else if (this._$_color$_.a === t) return;
            this._$_SetColorWithOpacity$_(t);
        }
        _$_SetOpacityOfChildren$_() {
            if (this._$HasChildren$_()) {
                const i = this._$GetChildren$_();
                for (let t = 0, s = i.length; t < s; t++) {
                    const e = i[t];
                    e._$_SetColorWithOpacity$_(e._$GetOpacity$_());
                }
            }
        }
        _$_SetColorWithOpacity$_(t) {
            f._$copyRgb$_(this._$_color$_), f.a = t, this._$_SetColor$_(f), this._$_SetOpacityOfChildren$_();
        }
        _$OffsetOpacity$_(t) {
            this._$GetTransformWithParentOpacity$_() ? this._$SetOpacity$_(this._$_GetSceneGraphInfo$_()._$GetOwnOpacity$_() + t) : this._$SetOpacity$_(this._$GetOpacity$_() + t);
        }
        _$GetOpacity$_() {
            return this._$GetTransformWithParentOpacity$_() ? this._$GetParent$_()._$GetOpacity$_() * this._$_GetSceneGraphInfo$_()._$GetOwnOpacity$_() : this._$_color$_.a;
        }
        _$SetUnpremultipliedColor$_(t) {
            this._$_color$_._$equalsIgnoringAlpha$_(t) || (f._$copyRgb$_(t), f.a = this._$GetOpacity$_(), 
            this._$_SetColor$_(f));
        }
        _$SetUnpremultipliedColorRGB$_(t, s, i) {
            f._$setRgb$_(t, s, i), this._$SetUnpremultipliedColor$_(f);
        }
        _$OffsetUnpremultipliedColorRGB$_(t, s, i) {
            0 === t && 0 === s && 0 === i || (f._$copyRgb$_(this._$_color$_), f.r += t, 
            f._$g$_ += s, f.b += i, this._$SetUnpremultipliedColor$_(f));
        }
        _$GetUnpremultipliedColor$_() {
            return this._$_color$_;
        }
        _$GetPremultipliedColor$_() {
            return this._$_colorPremultiplied$_;
        }
        _$GetDestroyWithParent$_() {
            return 0 != (512 & this._$_flags$_);
        }
        _$SetDestroyWithParent$_(t) {
            this._$_SetFlag$_(512, t);
        }
        _$GetTransformWithParentX$_() {
            return 0 != (1024 & this._$_flags$_);
        }
        _$SetTransformWithParentX$_(t) {
            this._$_SetFlag$_(1024, t);
        }
        _$GetTransformWithParentY$_() {
            return 0 != (2048 & this._$_flags$_);
        }
        _$GetTransformWithParentXOrY$_() {
            return 0 != (3072 & this._$_flags$_);
        }
        _$SetTransformWithParentY$_(t) {
            this._$_SetFlag$_(2048, t);
        }
        _$GetTransformWithParentWidth$_() {
            return 0 != (4096 & this._$_flags$_);
        }
        _$SetTransformWithParentWidth$_(t) {
            this._$_SetFlag$_(4096, t);
        }
        _$GetTransformWithParentHeight$_() {
            return 0 != (8192 & this._$_flags$_);
        }
        _$SetTransformWithParentHeight$_(t) {
            this._$_SetFlag$_(8192, t);
        }
        _$GetTransformWithParentAngle$_() {
            return 0 != (16384 & this._$_flags$_);
        }
        _$SetTransformWithParentAngle$_(t) {
            this._$_SetFlag$_(16384, t);
        }
        _$GetTransformWithParentZElevation$_() {
            return 0 != (32768 & this._$_flags$_);
        }
        _$SetTransformWithParentZElevation$_(t) {
            this._$_SetFlag$_(32768, t);
        }
        _$GetTransformWithParentOpacity$_() {
            return 0 != (this._$_flags$_ & 1 << 22);
        }
        _$SetTransformWithParentOpacity$_(t) {
            this._$_SetFlag$_(1 << 22, t);
        }
        _$GetTransformWithParentVisibility$_() {
            return 0 != (this._$_flags$_ & 1 << 23);
        }
        _$SetTransformWithParentVisibility$_(t) {
            this._$_SetFlag$_(1 << 23, t);
        }
        _$_ClearAllSceneGraphFlags$_() {
            this._$_flags$_ &= -12647937;
        }
        _$AddChild$_(t, s) {
            if (t === this) return !1;
            if (t._$HasParent$_()) return !1;
            if (this._$_HasChildRecursive$_(t)) return !1;
            if (this._$_HasAnyParent$_(t)) return !1;
            const i = t._$GetX$_(), e = t._$GetY$_(), n = t._$GetWidth$_(), h = t._$GetHeight$_(), r = t._$GetAngle$_(), o = t._$GetZElevation$_(), a = t._$GetOpacity$_(), l = (t._$_SetParent$_(this), 
            t._$SetTransformWithParentX$_(s._$transformX$_), t._$SetTransformWithParentY$_(s._$transformY$_), 
            t._$SetTransformWithParentWidth$_(s._$transformWidth$_), t._$SetTransformWithParentHeight$_(s._$transformHeight$_), 
            t._$SetTransformWithParentAngle$_(s._$transformAngle$_), t._$SetTransformWithParentZElevation$_(s._$transformZElevation$_), 
            t._$SetTransformWithParentOpacity$_(s._$transformOpacity$_), t._$SetTransformWithParentVisibility$_(s._$transformVisibility$_), 
            t._$SetDestroyWithParent$_(s._$destroyWithParent$_), i - this._$GetX$_()), u = e - this._$GetY$_(), c = -this._$GetAngle$_(), f = Math.cos(c), d = Math.sin(c);
            if (s._$transformX$_ && (s._$transformAngle$_ ? t._$_x$_ = l * f - u * d : t._$_x$_ = l, 
            s._$transformWidth$_)) {
                const p = this._$GetWidth$_() / this._$_sceneGraphInfo$_._$_GetStartWidth$_();
                0 != p && (t._$_x$_ /= p);
            }
            if (s._$transformY$_ && (s._$transformAngle$_ ? t._$_y$_ = l * d + u * f : t._$_y$_ = u, 
            s._$transformHeight$_)) {
                const m = this._$GetHeight$_() / this._$_sceneGraphInfo$_._$_GetStartHeight$_();
                0 != m && (t._$_y$_ /= m);
            }
            if (s._$transformWidth$_) {
                const g = this._$GetWidth$_();
                0 === g || g === Number.EPSILON ? (t._$_w$_ = 1, t._$_sceneGraphInfo$_._$SetStartScaleX$_(1)) : (t._$_w$_ = n / this._$GetWidth$_(), 
                t._$_sceneGraphInfo$_._$SetStartScaleX$_(t._$_w$_));
            }
            if (s._$transformHeight$_) {
                const y = this._$GetHeight$_();
                0 === y || y === Number.EPSILON ? (t._$_h$_ = 1, t._$_sceneGraphInfo$_._$SetStartScaleY$_(1)) : (t._$_h$_ = h / this._$GetHeight$_(), 
                t._$_sceneGraphInfo$_._$SetStartScaleY$_(t._$_h$_));
            }
            return s._$transformAngle$_ && (t._$_a$_ = r - this._$GetAngle$_()), 
            s._$transformZElevation$_ && (t._$_zElevation$_ = o - this._$GetZElevation$_()), 
            s._$transformOpacity$_ && t._$_sceneGraphInfo$_._$SetOwnOpacity$_(a), 
            s._$transformVisibility$_ && t._$SetVisible$_(this._$IsVisible$_()), 
            this._$_AddChildToSceneGraphInfo$_(t), this._$SetBboxChanged$_(), this._$_SetOpacityOfChildren$_(), 
            !0;
        }
        _$RemoveChild$_(t) {
            if (t._$GetParent$_() === this) {
                const s = t._$GetX$_(), i = t._$GetY$_(), e = t._$GetWidth$_(), n = t._$GetHeight$_(), h = t._$GetAngle$_(), r = t._$GetZElevation$_(), o = t._$GetOpacity$_();
                t._$_SetParent$_(null), t._$_ClearAllSceneGraphFlags$_(), t._$SetXY$_(s, i), 
                t._$SetSize$_(e, n), t._$SetAngle$_(h), t._$SetZElevation$_(r), 
                t._$SetOpacity$_(o), this._$_RemoveChildFromSceneGraphInfo$_(t), 
                this._$SetBboxChanged$_();
            }
        }
        _$GetTmpHierarchyPosition$_() {
            return this._$_tmpHierarchyPosition$_;
        }
        _$_ResetAllSceneGraphState$_() {
            this._$_BuildTmpSceneGraphData$_();
            const t = [ ...this.children() ];
            for (const i of t) this._$RemoveChild$_(i);
            const s = this._$GetParent$_();
            s && s._$RemoveChild$_(this), this._$_ClearAllSceneGraphFlags$_();
        }
        _$_BuildTmpSceneGraphData$_() {
            if (this._$_SetTmpHierarchyPosition$_(), !this._$_tmpSceneGraphChildren$_) {
                const s = [ ...this.children() ];
                s.length && (this._$_tmpSceneGraphChildren$_ = [], this._$_tmpSceneGraphChildrenIndexes$_ = new WeakMap());
                let t = 0;
                for (const i of s) {
                    const e = i._$GetInstance$_();
                    this._$_tmpSceneGraphChildren$_.push(e), this._$_tmpSceneGraphChildrenIndexes$_.set(e, t), 
                    t++;
                }
            }
            const t = this._$GetParent$_();
            t && t._$_BuildTmpSceneGraphData$_();
        }
        _$_SetTmpHierarchyPosition$_() {
            if (-1 === this._$_tmpHierarchyPosition$_) {
                const t = [ ...this._$parents$_() ];
                this._$_tmpHierarchyPosition$_ = t.length;
                for (const i of t) i._$_SetTmpHierarchyPosition$_();
                const s = [ ...this.children() ];
                for (const e of s) e._$_SetTmpHierarchyPosition$_();
            }
        }
        _$_ReleaseTmpSceneGraphInfo$_() {
            this._$_tmpSceneGraphChildren$_ && (this._$_tmpSceneGraphChildren$_.length = 0), 
            this._$_tmpSceneGraphChildren$_ = null, this._$_tmpSceneGraphChildrenIndexes$_ = null;
            const t = this._$GetParent$_();
            t && t._$_ReleaseTmpSceneGraphInfo$_(), this._$_tmpHierarchyPosition$_ = -1;
        }
        _$HasParent$_() {
            return null !== this._$GetParent$_();
        }
        _$GetParent$_() {
            const t = this._$_sceneGraphInfo$_;
            return null !== t ? t._$GetParent$_() : null;
        }
        _$GetTopParent$_() {
            let t = this;
            for (;t._$HasParent$_(); ) t = t._$GetParent$_();
            return t;
        }
        *_$parents$_() {
            let t = this._$GetParent$_();
            for (;t; ) yield t, t = t._$GetParent$_();
        }
        _$HasChild$_(t) {
            return this._$GetChildren$_().includes(t);
        }
        _$HasChildren$_() {
            const t = this._$_sceneGraphInfo$_;
            return null !== t && t._$HasChildren$_();
        }
        _$GetChildren$_() {
            const t = this._$_sceneGraphInfo$_;
            return null !== t ? t._$GetChildren$_() : e;
        }
        children() {
            return this._$GetChildren$_();
        }
        *_$allChildren$_() {
            for (const t of this.children()) yield t, yield* t._$allChildren$_();
        }
        _$GetChildCount$_() {
            return this._$GetChildren$_().length;
        }
        _$GetAllChildCount$_() {
            return [ ...this._$allChildren$_() ].length;
        }
        _$GetChildAt$_(t) {
            const s = this._$GetChildren$_();
            return (t = Math.floor(+t)) < 0 || t >= s.length ? null : s[t];
        }
        _$GetChildIndex$_(s) {
            if (s) {
                const i = this._$GetChildren$_();
                if (i) for (let t = 0; t < i.length; t++) if (s === i[t]) return t;
            }
            return NaN;
        }
        _$_CreateSceneGraphInfo$_(t) {
            this._$_sceneGraphInfo$_ || (this._$_sceneGraphInfo$_ = d._$New$_(d._$SceneGraphInfo$_, this)), 
            t && this._$_sceneGraphInfo$_._$SetParent$_(t);
        }
        _$_GetSceneGraphInfo$_() {
            return this._$_sceneGraphInfo$_;
        }
        _$_ReleaseSceneGraphInfo$_() {
            this._$_sceneGraphInfo$_ && (this._$_sceneGraphInfo$_._$Release$_(), 
            this._$_sceneGraphInfo$_ = null);
        }
        _$_SetParent$_(t) {
            t ? (t._$_CreateSceneGraphInfo$_(null), this._$_CreateSceneGraphInfo$_(t)) : (this._$_sceneGraphInfo$_ && this._$_sceneGraphInfo$_._$SetParent$_(null), 
            this._$HasChildren$_() || this._$_ReleaseSceneGraphInfo$_());
        }
        _$_HasAnyParent$_(t) {
            if (!this._$HasParent$_()) return !1;
            const s = this._$GetParent$_();
            return s === t || s._$_HasAnyParent$_(t);
        }
        _$_HasChildRecursive$_(t) {
            if (this._$HasChild$_(t)) return !0;
            for (const s of this._$GetChildren$_()) if (s._$_HasChildRecursive$_(t)) return !0;
            return !1;
        }
        _$_AddChildToSceneGraphInfo$_(t) {
            this._$_sceneGraphInfo$_._$GetChildren$_().push(t);
        }
        _$_RemoveChildFromSceneGraphInfo$_(t) {
            const s = this._$_sceneGraphInfo$_._$GetChildren$_(), i = s.indexOf(t);
            -1 !== i && s.splice(i, 1), 0 !== s.length || this._$HasParent$_() || this._$_ReleaseSceneGraphInfo$_(), 
            t._$HasChildren$_() || t._$_ReleaseSceneGraphInfo$_();
        }
        _$GetSceneGraphChildrenExportData$_() {
            const t = g.get(this);
            return t ? t._$childrenData$_ : null;
        }
        _$GetSceneGraphZIndexExportData$_() {
            const t = g.get(this);
            return t ? t._$zIndexData$_ : NaN;
        }
        _$GetSceneGraphZIndex$_() {
            const t = a.get(this);
            return d._$IsFiniteNumber$_(t) ? t : NaN;
        }
        _$SetSceneGraphZIndex$_(t) {
            a.set(this, t);
        }
        _$SetUsePointsShaderProgram$_() {
            this._$_SetFlag$_(1 << 19, !0), this._$_UpdateRendererStateGroup$_();
        }
        _$_UpdateRendererStateGroup$_() {
            if (m) {
                const s = this._$_runtime$_._$GetRenderer$_();
                this._$_stateGroup$_ && s._$ReleaseStateGroup$_(this._$_stateGroup$_);
                let t;
                t = 0 != (this._$_flags$_ & 1 << 19) ? s._$GetPointsRenderingProgram$_() || "<point>" : s._$GetTextureFillShaderProgram$_() || "<default>", 
                this._$_stateGroup$_ = s._$AcquireStateGroup$_(t, this._$GetBlendMode$_(), this._$_colorPremultiplied$_, this._$GetZElevation$_());
            }
        }
        _$GetRendererStateGroup$_() {
            return this._$_stateGroup$_;
        }
        _$HasDefaultColor$_() {
            return this._$_color$_ === i;
        }
        _$SetBlendMode$_(t) {
            if ((t |= 0) < 0 || 31 < t) throw new RangeError("invalid blend mode");
            this._$GetBlendMode$_() !== t && (this._$_flags$_ = this._$_flags$_ & ~(31 << 26) | t << 26, 
            this._$_UpdateRendererStateGroup$_());
        }
        _$GetBlendMode$_() {
            return (this._$_flags$_ & 31 << 26) >> 26;
        }
        _$_SetLayer$_(t, s) {
            const i = s && this._$_layer$_ !== t;
            i && this._$_RemoveFromRenderCells$_(), this._$_objectClass$_._$_OnWorldInstanceLayerChanged$_(this, this._$_layer$_, t), 
            this._$_layer$_ = t, i && this._$_UpdateRenderCell$_(), 0 !== this._$GetZElevation$_() && this._$_layer$_._$_SetAnyInstanceZElevated$_();
        }
        _$GetLayer$_() {
            return this._$_layer$_;
        }
        _$GetLayout$_() {
            return this._$GetLayer$_()._$GetLayout$_();
        }
        _$_SetZIndex$_(t) {
            this._$_zIndex$_ = 0 | t;
        }
        _$GetZIndex$_() {
            return this._$_layer$_._$_UpdateZIndices$_(), this._$_zIndex$_;
        }
        _$_SetHTMLZIndex$_(t) {
            this._$_htmlZIndex$_ = 0 | t;
        }
        _$GetHTMLZIndex$_() {
            return this._$_layer$_._$_UpdateHTMLZIndices$_(), this._$_htmlZIndex$_;
        }
        _$_GetLastCachedZIndex$_() {
            return this._$_zIndex$_;
        }
        _$_SetFlag$_(t, s) {
            s ? this._$_flags$_ |= t : this._$_flags$_ &= ~t;
        }
        _$IsVisible$_() {
            return 0 != (1 & this._$_flags$_);
        }
        _$SetVisible$_(t) {
            if (this._$_SetFlag$_(1, t), this._$HasChildren$_()) for (const s of this._$GetChildren$_()) s._$GetTransformWithParentVisibility$_() && s._$SetVisible$_(t);
        }
        _$IsCollisionEnabled$_() {
            return 0 != (8 & this._$_flags$_);
        }
        _$SetCollisionEnabled$_(t) {
            t = !!t, this._$IsCollisionEnabled$_() !== t && (this._$_SetFlag$_(8, t), 
            t ? this._$SetBboxChanged$_() : this._$_RemoveFromCollisionCells$_());
        }
        _$SetSolidCollisionFilter$_(t, s) {
            if (this._$_SetFlag$_(32, t), this._$_solidFilterTags$_ && this._$_solidFilterTags$_.clear(), 
            s.trim()) {
                this._$_solidFilterTags$_ || (this._$_solidFilterTags$_ = new Set());
                for (const i of s.split(" ")) i && this._$_solidFilterTags$_.add(i.toLowerCase());
            } else this._$_solidFilterTags$_ = null;
        }
        _$IsSolidCollisionAllowed$_(t) {
            const s = 0 != (32 & this._$_flags$_), i = this._$_solidFilterTags$_;
            if (t && i) for (const e of i) if (t.has(e)) return s;
            return !s;
        }
        _$SetBboxChanged$_() {
            if (this._$_flags$_ |= 65554, this._$_objectClass$_._$_SetAnyCollisionCellChanged$_(!0), 
            this._$_runtime$_._$UpdateRender$_(), this._$_layer$_._$UsesRenderCells$_() && (this._$CalculateBbox$_(this._$_boundingBox$_, this._$_boundingQuad$_, !0), 
            this._$_flags$_ &= -3, this._$_UpdateRenderCell$_()), 0 != (4 & this._$_flags$_) && this._$_inst$_._$Dispatcher$_().dispatchEvent(s), 
            null !== this._$_sceneGraphInfo$_) {
                const i = this._$_sceneGraphInfo$_._$GetChildren$_();
                for (let t = 0, s = i.length; t < s; ++t) i[t]._$SetBboxChanged$_();
            }
        }
        _$CalculateBbox$_(t, s, i) {
            const e = this._$GetX$_(), n = this._$GetY$_(), h = this._$GetWidth$_(), r = this._$GetHeight$_(), o = this._$GetAngle$_();
            t._$setWH$_(e - this._$_ox$_ * h, n - this._$_oy$_ * r, h, r), i && this._$HasMesh$_() && this._$_ExpandBboxForMesh$_(t), 
            0 === o ? s._$setFromRect$_(t) : (t.offset(-e, -n), s._$setFromRotatedRectPrecalc$_(t, this._$GetSinAngle$_(), this._$GetCosAngle$_()), 
            s.offset(e, n), s._$getBoundingBox$_(t)), t.normalize();
        }
        _$_UpdateBbox$_() {
            const t = this._$_flags$_;
            0 != (2 & t) && (this._$CalculateBbox$_(this._$_boundingBox$_, this._$_boundingQuad$_, !0), 
            this._$_flags$_ = -3 & t);
        }
        _$GetBoundingBox$_() {
            return this._$_UpdateBbox$_(), this._$_boundingBox$_;
        }
        _$GetBoundingQuad$_() {
            return this._$_UpdateBbox$_(), this._$_boundingQuad$_;
        }
        _$PixelRoundQuad$_(t) {
            const s = this._$GetX$_(), i = this._$GetY$_(), e = Math.round(s) - s, n = Math.round(i) - i;
            return 0 == e && 0 == n ? t : (r._$copy$_(t), r.offset(e, n), r);
        }
        _$OverwriteBoundingBox$_(t) {
            this._$_boundingBox$_._$copy$_(t), this._$_boundingQuad$_._$setFromRect$_(this._$_boundingBox$_), 
            this._$_flags$_ &= -3, this._$_UpdateCollisionCell$_(), this._$_UpdateRenderCell$_();
        }
        _$SetBboxChangeEventEnabled$_(t) {
            this._$_SetFlag$_(4, t);
        }
        _$IsBboxChangeEventEnabled$_() {
            return 0 != (4 & this._$_flags$_);
        }
        _$IsInViewport$_(t, s, i) {
            return s && 0 !== this._$GetDepth$_() ? this._$IsInViewport3D$_(this._$GetLayer$_()._$_GetViewFrustum$_()) : 0 === this._$GetZElevation$_() || i ? t._$intersectsRect$_(this._$GetBoundingBox$_()) : this._$_IsInViewport_ZElevated$_();
        }
        _$_IsInViewport_ZElevated$_() {
            const t = this._$GetLayer$_(), s = this._$GetTotalZElevation$_();
            return !(s >= t._$Get2DCameraZ$_()) && (t._$GetViewportForZ$_(s, h), 
            h._$intersectsRect$_(this._$GetBoundingBox$_()));
        }
        _$IsInViewport3D$_(t) {
            const s = this._$GetBoundingBox$_(), i = s._$getLeft$_(), e = s._$getRight$_(), n = s._$getTop$_(), h = s._$getBottom$_(), r = this._$GetTotalZElevation$_(), o = r + this._$GetDepth$_();
            return t._$ContainsAABB$_(i, n, r, e, h, o);
        }
        _$IsInViewport2$_() {
            const t = this._$GetLayer$_();
            if (t._$Has3DCamera$_()) return this._$IsInViewport3D$_(t._$_GetViewFrustum$_());
            {
                const s = t._$GetLayout$_();
                return this._$IsInViewport$_(t._$GetViewport$_(), s._$HasVanishingPointOutsideViewport$_(), s._$IsOrthographicProjection$_());
            }
        }
        _$_SetDrawBackFaceOnly$_(t) {
            this._$_SetFlag$_(1 << 20, t);
        }
        _$_SetDrawNonBackFacesOnly$_(t) {
            this._$_SetFlag$_(1 << 21, t);
        }
        _$IsDrawBackFaceOnly$_() {
            return 0 != (this._$_flags$_ & 1 << 20);
        }
        _$IsDrawNonBackFacesOnly$_() {
            return 0 != (this._$_flags$_ & 1 << 21);
        }
        _$SetSourceCollisionPoly$_(t) {
            this._$_sourceCollisionPoly$_ = t, this._$_DiscardTransformedCollisionPoly$_(), 
            this._$HasMesh$_() && (this._$_meshInfo$_._$meshPoly$_ = null);
        }
        _$GetSourceCollisionPoly$_() {
            return this._$_sourceCollisionPoly$_;
        }
        _$HasOwnCollisionPoly$_() {
            return null !== this._$_sourceCollisionPoly$_ || this._$HasMesh$_();
        }
        _$GetTransformedCollisionPoly$_() {
            return this._$_GetCustomTransformedCollisionPolyPrecalc$_(this._$GetWidth$_(), this._$GetHeight$_(), this._$GetAngle$_(), this._$GetSinAngle$_(), this._$GetCosAngle$_());
        }
        _$GetCustomTransformedCollisionPoly$_(t, s, i) {
            let e = 0, n = 1;
            return 0 !== i && (e = Math.sin(i), n = Math.cos(i)), this._$_GetCustomTransformedCollisionPolyPrecalc$_(t, s, i, e, n);
        }
        _$_GetCustomTransformedCollisionPolyPrecalc$_(n, h, t, r, o) {
            let s = this._$_transformedPolyInfo$_;
            null === s && (s = {
                _$poly$_: d._$New$_(d._$CollisionPoly$_),
                width: NaN,
                height: NaN,
                angle: NaN
            }, this._$_transformedPolyInfo$_ = s);
            const a = s._$poly$_;
            if (s.width !== n || s.height !== h || s.angle !== t) {
                const l = this._$_sourceCollisionPoly$_;
                if (this._$HasMesh$_()) {
                    let t = this._$GetOriginX$_(), s = this._$GetOriginY$_(), i = this._$GetSourceMesh$_(), e = this._$_meshInfo$_._$meshPoly$_;
                    e || (l ? (u._$copy$_(l), u.offset(t, s)) : u._$setDefaultPoints$_(), 
                    e = i._$InsertPolyMeshVertices$_(u), this._$_meshInfo$_._$meshPoly$_ = e), 
                    i._$TransformCollisionPoly$_(e, a), a.offset(-t, -s), a._$transformPrecalc$_(n, h, r, o);
                } else l ? (a._$copy$_(l), a._$transformPrecalc$_(n, h, r, o)) : a._$setFromQuad$_(this._$GetBoundingQuad$_(), -this._$GetX$_(), -this._$GetY$_());
                s.width = n, s.height = h, s.angle = t;
            }
            return a;
        }
        _$_DiscardTransformedCollisionPoly$_() {
            this._$SetPhysicsBodyChanged$_(!0);
            const t = this._$_transformedPolyInfo$_;
            null !== t && (t.width = NaN);
        }
        _$CreateMesh$_(t, s) {
            if (t = Math.floor(t), s = Math.floor(s), !this._$GetInstance$_()._$GetPlugin$_()._$SupportsMesh$_()) throw new Error("object does not support mesh");
            this._$ReleaseMesh$_(), this._$_meshInfo$_ = {
                _$sourceMesh$_: d._$New$_(d._$Gfx$_._$Mesh$_, t, s),
                _$transformedMesh$_: d._$New$_(d._$Gfx$_._$Mesh$_, t, s),
                _$meshPoly$_: null
            };
        }
        _$HasMesh$_() {
            return null !== this._$_meshInfo$_;
        }
        _$GetSourceMesh$_() {
            if (this._$HasMesh$_()) return this._$_meshInfo$_._$sourceMesh$_;
            throw new Error("no mesh");
        }
        _$GetTransformedMesh$_() {
            if (this._$HasMesh$_()) return this._$_meshInfo$_._$transformedMesh$_;
            throw new Error("no mesh");
        }
        _$SetMeshChanged$_(t) {
            this._$_SetFlag$_(65536, t);
        }
        _$IsMeshChanged$_() {
            return 0 != (65536 & this._$_flags$_);
        }
        _$SetPhysicsBodyChanged$_(t) {
            this._$_SetFlag$_(1 << 17, t);
        }
        _$IsPhysicsBodyChanged$_() {
            return 0 != (this._$_flags$_ & 1 << 17);
        }
        _$_ExpandBboxForMesh$_(t) {
            const s = this._$_meshInfo$_._$sourceMesh$_, i = Math.min(s._$GetMinX$_(), 0), e = Math.min(s._$GetMinY$_(), 0), n = Math.max(s._$GetMaxX$_(), 1), h = Math.max(s._$GetMaxY$_(), 1), r = t.width(), o = t.height();
            t.offsetLeft(i * r), t.offsetTop(e * o), t._$offsetRight$_((n - 1) * r), 
            t._$offsetBottom$_((h - 1) * o), this._$_depth$_ = s._$GetMaxZ$_();
        }
        _$ReleaseMesh$_() {
            this._$_meshInfo$_ && (this._$_meshInfo$_._$sourceMesh$_._$Release$_(), 
            this._$_meshInfo$_._$transformedMesh$_._$Release$_(), this._$_meshInfo$_ = null, 
            this._$_DiscardTransformedCollisionPoly$_());
        }
        _$SetMeshPoint$_(t, s, i) {
            t = Math.floor(t), s = Math.floor(s);
            const e = i.mode || "absolute";
            if (!p.has(e)) throw new Error("invalid mode");
            let n = "relative" === e, h = i.x, r = i.y, o = i._$zElevation$_, a = "number" == typeof i.u ? i.u : n ? 0 : -1, l = "number" == typeof i.v ? i.v : n ? 0 : -1;
            if (!this._$HasMesh$_()) return !1;
            const u = this._$GetSourceMesh$_(), c = u._$GetMeshPointAt$_(t, s);
            if (null === c) return !1;
            let f = !1;
            return "number" == typeof o && c._$GetZElevation$_() !== o && (c._$SetZElevation$_(o), 
            f = !0), n && (h += t / (u._$GetHSize$_() - 1), r += s / (u._$GetVSize$_() - 1)), 
            a = -1 !== a || n ? (n && (a += t / (u._$GetHSize$_() - 1)), d._$clamp$_(a, 0, 1)) : c._$GetU$_(), 
            l = -1 !== l || n ? (n && (l += s / (u._$GetVSize$_() - 1)), d._$clamp$_(l, 0, 1)) : c._$GetV$_(), 
            c._$GetX$_() === h && c._$GetY$_() === r && c._$GetU$_() === a && c._$GetV$_() === l ? f : (c._$SetX$_(h), 
            c._$SetY$_(r), c._$SetU$_(a), c._$SetV$_(l), this._$_DiscardTransformedCollisionPoly$_(), 
            !0);
        }
        _$HasTilemap$_() {
            return this._$_inst$_._$HasTilemap$_();
        }
        _$ContainsPoint$_(t, s) {
            return !!this._$GetBoundingBox$_()._$containsPoint$_(t, s) && !!this._$GetBoundingQuad$_()._$containsPoint$_(t, s) && (this._$HasTilemap$_() ? this._$_inst$_._$GetSdkInstance$_()._$TestPointOverlapTile$_(t, s) : !this._$HasOwnCollisionPoly$_() || this._$GetTransformedCollisionPoly$_()._$containsPoint$_(t - this._$GetX$_(), s - this._$GetY$_()));
        }
        _$_IsCollisionCellChanged$_() {
            return 0 != (16 & this._$_flags$_);
        }
        _$_UpdateCollisionCell$_() {
            if (this._$_IsCollisionCellChanged$_() && this._$IsCollisionEnabled$_() && 0 == (256 & this._$_flags$_)) {
                const t = this._$GetBoundingBox$_(), s = this._$_objectClass$_._$_GetCollisionCellGrid$_(), i = this._$_collisionCells$_;
                if (h.set(s._$XToCell$_(t._$getLeft$_()), s._$YToCell$_(t._$getTop$_()), s._$XToCell$_(t._$getRight$_()), s._$YToCell$_(t._$getBottom$_())), 
                !i.equals(h)) {
                    const e = this._$_inst$_;
                    i === n ? (s._$Update$_(e, null, h), this._$_collisionCells$_ = d._$New$_(d.Rect, h)) : (s._$Update$_(e, i, h), 
                    i._$copy$_(h)), this._$_flags$_ &= -17;
                }
            }
        }
        _$_SetCollisionCellChanged$_() {
            this._$_flags$_ |= 16;
        }
        _$_RemoveFromCollisionCells$_() {
            const t = this._$_collisionCells$_;
            t !== n && (this._$_objectClass$_._$_GetCollisionCellGrid$_()._$Update$_(this._$_inst$_, t, null), 
            this._$_collisionCells$_ = n);
        }
        _$_UpdateRenderCell$_() {
            const t = this._$GetLayer$_();
            if (t._$UsesRenderCells$_() && 0 == (256 & this._$_flags$_)) {
                const s = t._$GetRenderGrid$_(), i = this._$GetBoundingBox$_(), e = this._$_renderCells$_;
                if (h.set(s._$XToCell$_(i._$getLeft$_()), s._$YToCell$_(i._$getTop$_()), s._$XToCell$_(i._$getRight$_()), s._$YToCell$_(i._$getBottom$_())), 
                !e.equals(h)) {
                    const n = this._$_inst$_;
                    e === o ? (s._$Update$_(n, null, h), this._$_renderCells$_ = d._$New$_(d.Rect, h)) : (s._$Update$_(n, e, h), 
                    e._$copy$_(h)), t._$SetRenderListStale$_();
                }
            }
        }
        _$_RemoveFromRenderCells$_() {
            const t = this._$_renderCells$_;
            t !== o && (this._$GetLayer$_()._$GetRenderGrid$_()._$Update$_(this._$_inst$_, t, null), 
            this._$_renderCells$_ = o);
        }
        _$GetRenderCellRange$_() {
            return this._$_renderCells$_;
        }
        _$ZOrderMoveToTop$_() {
            const t = this._$_inst$_, s = this._$_layer$_, i = s._$_GetInstances$_();
            i.length && i.at(-1) === t || (s._$_RemoveInstance$_(t, !1), s._$_AddInstance$_(t, !1), 
            this._$_runtime$_._$UpdateRender$_());
        }
        _$ZOrderMoveToBottom$_() {
            const t = this._$_inst$_, s = this._$_layer$_, i = s._$_GetInstances$_();
            i.length && i[0] === t || (s._$_RemoveInstance$_(t, !1), s._$_PrependInstance$_(t, !1), 
            this._$_runtime$_._$UpdateRender$_());
        }
        _$ZOrderMoveToLayer$_(t) {
            const s = this._$_inst$_, i = this._$_layer$_;
            if (i._$GetLayout$_() !== t._$GetLayout$_()) throw new Error("layer from different layout");
            t !== i && (i._$_RemoveInstance$_(s, !0), this._$_SetLayer$_(t), t._$_AddInstance$_(s, !0), 
            this._$_runtime$_._$UpdateRender$_());
        }
        _$ZOrderMoveAdjacentToInstance$_(t, s) {
            let i = this._$_inst$_, e = !1, n = this._$_layer$_;
            if (t._$GetUID$_() !== i._$GetUID$_()) {
                const h = t._$GetWorldInfo$_();
                if (!h) throw new Error("expected world instance");
                const r = h._$GetLayer$_(), o = (n._$GetIndex$_() !== r._$GetIndex$_() && (n._$_RemoveInstance$_(i, !0), 
                this._$_SetLayer$_(r), r._$_AddInstance$_(i, !0), e = !0), r._$MoveInstanceAdjacent$_(i, t, !!s));
                (e || o) && this._$_runtime$_._$UpdateRender$_();
            }
        }
        _$GetInstanceEffectList$_() {
            return this._$_instanceEffectList$_;
        }
        _$_SetHasAnyActiveEffect$_(t) {
            this._$_SetFlag$_(64, t);
        }
        _$HasAnyActiveEffect$_() {
            return 0 != (64 & this._$_flags$_);
        }
        _$_SaveToJson$_(t, s = null) {
            const i = {
                x: this._$GetX$_(),
                y: this._$GetY$_(),
                w: this._$GetWidth$_(),
                h: this._$GetHeight$_(),
                l: this._$GetLayer$_()._$GetSID$_(),
                zi: this._$GetZIndex$_()
            }, e = (0 !== this._$GetZElevation$_() && (i.ze = this._$GetZElevation$_()), 
            0 !== this._$GetAngle$_() && (i.a = this._$_GetAngleNoReflect$_()), 
            this._$HasDefaultColor$_() || (i.c = this._$_color$_.toJSON()), .5 !== this._$GetOriginX$_() && (i.oX = this._$GetOriginX$_()), 
            .5 !== this._$GetOriginY$_() && (i.oY = this._$GetOriginY$_()), 0 !== this._$GetBlendMode$_() && (i.bm = this._$GetBlendMode$_()), 
            this._$IsVisible$_() || (i.v = this._$IsVisible$_()), this._$IsCollisionEnabled$_() || (i.ce = this._$IsCollisionEnabled$_()), 
            this._$IsBboxChangeEventEnabled$_() && (i.be = this._$IsBboxChangeEventEnabled$_()), 
            this._$_instanceEffectList$_ && (i.fx = this._$_instanceEffectList$_._$_SaveToJson$_()), 
            0 != (32 & this._$_flags$_));
            return e && (i.sfi = e), this._$_solidFilterTags$_ && (i.sft = [ ...this._$_solidFilterTags$_ ].join(" ")), 
            this._$_sceneGraphInfo$_ && "visual-state" !== t && (i.sgi = this._$_sceneGraphInfo$_._$_SaveToJson$_(t, s), 
            g.has(this)) && (i.sgcd = g.get(this)._$childrenData$_, i.sgzid = g.get(this)._$zIndexData$_), 
            this._$HasMesh$_() && (i.mesh = this._$GetSourceMesh$_()._$SaveToJson$_()), 
            i;
        }
        _$_SaveSceneGraphPropertiesToJson$_() {
            return {
                x: this._$_x$_,
                y: this._$_y$_,
                z: this._$_zElevation$_,
                w: this._$_w$_,
                h: this._$_h$_,
                a: this._$_a$_,
                sgi: this._$_GetSceneGraphInfo$_() ? this._$_GetSceneGraphInfo$_()._$_SaveToJsonProperties$_() : null
            };
        }
        _$_LoadSceneGraphPropertiesFromJson$_(t) {
            t && (this._$_x$_ = t.x, this._$_y$_ = t.y, this._$_zElevation$_ = t.z, 
            this._$_w$_ = t.w, this._$_h$_ = t.h, this._$_a$_ = t.a, t.sgi && this._$_GetSceneGraphInfo$_() && this._$_GetSceneGraphInfo$_()._$_LoadFromJson$_(t.sgi), 
            this._$_MarkSinCosAngleChanged$_(), this._$SetBboxChanged$_());
        }
        _$_SetupSceneGraphConnectionsOnChangeOfLayout$_() {
            this._$_ReleaseTmpSceneGraphInfo$_(), this._$_ResetAllSceneGraphState$_(), 
            this._$_CreateSceneGraphInfo$_(null), this._$_sceneGraphInfo$_ && this._$_sceneGraphInfo$_._$_SetTmpSceneGraphChildren$_(this._$_tmpSceneGraphChildren$_, this._$_tmpSceneGraphChildrenIndexes$_);
        }
        _$_OnBeforeLoad$_(t) {
            "visual-state" !== t && this._$_ResetAllSceneGraphState$_();
        }
        _$_OnAfterLoad$_(t, s = "full", i = null) {
            t.hasOwnProperty("sgi") && "visual-state" !== s && 0 == (256 & this._$_flags$_) && this._$_sceneGraphInfo$_._$_OnAfterLoad$_(t.sgi, i);
        }
        _$_OnAfterLoad2$_(t, s = "full", i) {
            t.hasOwnProperty("sgi") && "visual-state" !== s && 0 == (256 & this._$_flags$_) && (this._$_sceneGraphInfo$_._$_SetTmpSceneGraphChildren$_(null, null), 
            this._$_ReleaseTmpSceneGraphInfo$_(), this._$SetBboxChanged$_());
        }
        _$_LoadFromJson$_(t, s) {
            if (m = !1, this._$SetX$_(t.x), this._$SetY$_(t.y), this._$SetWidth$_(t.w), 
            this._$SetHeight$_(t.h), this._$_SetZIndex$_(t.zi), this._$SetZElevation$_(t.hasOwnProperty("ze") ? t.ze : 0), 
            this._$SetAngle$_(t.hasOwnProperty("a") ? t.a : 0), t.hasOwnProperty("c") ? f._$setFromJSON$_(t.c) : t.hasOwnProperty("o") ? (f._$copyRgb$_(this._$_color$_), 
            f.a = t.o) : f._$setRgba$_(1, 1, 1, 1), this._$_SetColor$_(f), this._$SetOriginX$_(t.hasOwnProperty("oX") ? t.oX : .5), 
            this._$SetOriginY$_(t.hasOwnProperty("oY") ? t.oY : .5), this._$SetBlendMode$_(t.hasOwnProperty("bm") ? t.bm : 0), 
            this._$SetVisible$_(!t.hasOwnProperty("v") || t.v), this._$SetCollisionEnabled$_(!t.hasOwnProperty("ce") || t.ce), 
            this._$SetBboxChangeEventEnabled$_(!!t.hasOwnProperty("be") && t.be), 
            this._$SetSolidCollisionFilter$_(!!t.hasOwnProperty("sfi") && t.sfi, t.hasOwnProperty("sft") ? t.sft : ""), 
            this._$_instanceEffectList$_ && t.hasOwnProperty("fx") && this._$_instanceEffectList$_._$_LoadFromJson$_(t.fx), 
            !t.hasOwnProperty("sgi") && "visual-state" !== s && this._$_tmpSceneGraphChildren$_) for (const i of this._$_tmpSceneGraphChildren$_) i._$IsDestroyed$_() || this._$_runtime$_._$DestroyInstance$_(i);
            if (t.hasOwnProperty("sgi") && "visual-state" !== s) {
                this._$_CreateSceneGraphInfo$_(null);
                const e = this._$_sceneGraphInfo$_, n = t.sgi;
                e._$_LoadFromJson$_(n), e._$_SetTmpSceneGraphChildren$_(this._$_tmpSceneGraphChildren$_, this._$_tmpSceneGraphChildrenIndexes$_), 
                t.sgcd && d._$IsFiniteNumber$_(t.sgzid) && g.set(this, {
                    _$childrenData$_: t.sgcd,
                    _$zIndexData$_: t.sgzid
                });
            }
            if (t.hasOwnProperty("mesh")) {
                const h = t.mesh;
                this._$CreateMesh$_(h.cols, h.rows), this._$GetSourceMesh$_()._$LoadFromJson$_(h);
            } else this._$ReleaseMesh$_();
            this._$SetBboxChanged$_(), m = !0, this._$_UpdateRendererStateGroup$_(), 
            "visual-state" !== s && this._$_runtime$_._$AddInstanceNeedingAfterLoad$_(this._$GetInstance$_(), t);
        }
    };
}

{
    const xa = self._$C3$_;
    xa._$BehaviorType$_ = class extends xa._$DefendedBase$_ {
        constructor(t, s) {
            super();
            const i = t._$GetRuntime$_(), e = i._$GetObjectReference$_(s[1]), n = (i._$GetAddonManager$_()._$_DelayCreateBehavior$_(e), 
            this._$_runtime$_ = i, this._$_objectClass$_ = t, this._$_behavior$_ = xa._$AddonManager$_._$GetBehaviorByConstructorFunction$_(e), 
            this._$_sdkType$_ = null, this._$_iBehaviorType$_ = null, this._$_instSdkCtor$_ = e.Instance, 
            this._$_sid$_ = s[2], this._$_name$_ = s[0], this._$_jsPropName$_ = this._$_runtime$_._$GetJsPropName$_(s[3]), 
            this._$_behavior$_._$GetSdkVersion$_());
            if (n < 2 && (this._$_sdkType$_ = xa._$New$_(e._$Type$_, this), !(this._$_sdkType$_ instanceof xa._$SDKBehaviorTypeBase$_))) throw new Error("v1 sdk type must derive from SDKBehaviorBase");
            if (xa._$AddonManager$_._$_PushInitObject$_(this, n), 2 <= n) {
                const h = e._$Type$_ ?? globalThis._$ISDKBehaviorTypeBase$_;
                if (this._$_iBehaviorType$_ = new h(), !(this._$_iBehaviorType$_ instanceof globalThis._$ISDKBehaviorTypeBase$_)) throw new Error("script interface class must derive from ISDKBehaviorTypeBase");
            } else this._$_iBehaviorType$_ = new globalThis._$IBehaviorType$_();
            xa._$AddonManager$_._$_PopInitObject$_(n), this._$OnCreate$_();
        }
        static _$Create$_(t, s) {
            return xa._$New$_(xa._$BehaviorType$_, t, s);
        }
        _$Release$_() {
            this._$_runtime$_ = null, this._$_behavior$_ = null, this._$_sdkType$_ && (this._$_sdkType$_._$Release$_(), 
            this._$_sdkType$_ = null), this._$_instSdkCtor$_ = null;
        }
        _$GetSdkType$_() {
            return this._$_sdkType$_;
        }
        _$OnCreate$_() {
            this._$_sdkType$_ ? this._$_sdkType$_._$OnCreate$_() : this._$_iBehaviorType$_ && this._$_iBehaviorType$_._$_onCreate$_();
        }
        _$GetRuntime$_() {
            return this._$_runtime$_;
        }
        _$GetObjectClass$_() {
            return this._$_objectClass$_;
        }
        _$GetBehavior$_() {
            return this._$_behavior$_;
        }
        _$GetInstanceSdkCtor$_() {
            return this._$_instSdkCtor$_;
        }
        _$GetName$_() {
            return this._$_name$_;
        }
        _$GetSID$_() {
            return this._$_sid$_;
        }
        _$GetIBehaviorType$_() {
            return this._$_iBehaviorType$_;
        }
        _$GetJsPropName$_() {
            return this._$_jsPropName$_;
        }
    };
}

{
    const Sa = self._$C3$_, Ta = self._$IBehaviorInstance$_;
    Sa._$BehaviorInstance$_ = class extends Sa._$DefendedBase$_ {
        constructor(t) {
            super(), this._$_runtime$_ = t.runtime, this._$_behaviorType$_ = t._$behaviorType$_, 
            this._$_behavior$_ = this._$_behaviorType$_._$GetBehavior$_(), this._$_inst$_ = t._$instance$_, 
            this._$_index$_ = t.index, this._$_sdkInst$_ = null, this._$_iScriptInterface$_ = null, 
            this._$_behavior$_._$_AddInstance$_(this._$_inst$_);
        }
        _$Release$_() {
            this._$_iScriptInterface$_ && (this._$_iScriptInterface$_._$_release$_(), 
            this._$_iScriptInterface$_ = null), this._$_behavior$_._$_RemoveInstance$_(this._$_inst$_), 
            this._$_sdkInst$_ && (this._$_sdkInst$_._$Release$_(), this._$_sdkInst$_ = null), 
            this._$_runtime$_ = null, this._$_behaviorType$_ = null, this._$_behavior$_ = null, 
            this._$_inst$_ = null;
        }
        _$_CreateSdkInstance$_(t) {
            if (this._$_sdkInst$_) throw new Error("already got sdk instance");
            const s = this._$GetBehavior$_()._$GetSdkVersion$_();
            if (s < 2) {
                if (this._$_sdkInst$_ = Sa._$New$_(this._$_behaviorType$_._$GetInstanceSdkCtor$_(), this, t), 
                !(this._$_sdkInst$_ instanceof Sa._$SDKBehaviorInstanceBase$_)) throw new Error("v1 sdk type must derive from SDKBehaviorInstanceBase");
            } else {
                const i = this._$GetBehavior$_()._$GetScriptInterfaceClass$_();
                this._$_InitScriptInterface$_(i.Instance, t);
            }
        }
        _$GetSdkInstance$_() {
            return this._$_sdkInst$_ ?? this._$_iScriptInterface$_;
        }
        _$GetObjectInstance$_() {
            return this._$_inst$_;
        }
        _$GetRuntime$_() {
            return this._$_runtime$_;
        }
        _$GetBehaviorType$_() {
            return this._$_behaviorType$_;
        }
        _$GetBehavior$_() {
            return this._$_behavior$_;
        }
        _$_GetIndex$_() {
            return this._$_index$_;
        }
        _$PostCreate$_() {
            this._$_sdkInst$_ ? this._$_sdkInst$_._$PostCreate$_() : this._$_iScriptInterface$_._$_postCreate$_();
        }
        _$OnSpriteFrameChanged$_(t, s) {
            this._$_sdkInst$_ && this._$_sdkInst$_._$OnSpriteFrameChanged$_(t, s);
        }
        _$_GetDebuggerProperties$_() {
            return this._$_sdkInst$_ ? this._$_sdkInst$_._$GetDebuggerProperties$_() : this._$_iScriptInterface$_._$_getDebuggerProperties$_();
        }
        _$SaveToJson$_(t = "full") {
            return this._$_sdkInst$_ ? this._$_sdkInst$_._$SaveToJson$_(t) : this._$_iScriptInterface$_._$_saveToJson$_(t);
        }
        _$LoadFromJson$_(t, s = "full") {
            if (this._$_sdkInst$_) return this._$_sdkInst$_._$LoadFromJson$_(t, s);
            this._$_iScriptInterface$_._$_loadFromJson$_(t, s);
        }
        static _$SortByTickSequence$_(t, s, i) {
            let e = globalThis._$ISDKBehaviorInstanceBase$_, n, h;
            n = s instanceof e ? t._$_UnwrapScriptInterface$_(s) : s._$GetBehaviorInstance$_(), 
            h = i instanceof e ? t._$_UnwrapScriptInterface$_(i) : i._$GetBehaviorInstance$_();
            const r = n._$GetObjectInstance$_(), o = h._$GetObjectInstance$_(), a = r._$GetObjectClass$_()._$GetIndex$_(), l = o._$GetObjectClass$_()._$GetIndex$_();
            if (a !== l) return a - l;
            const u = r._$GetPUID$_(), c = o._$GetPUID$_();
            return u !== c ? u - c : n._$_GetIndex$_() - h._$_GetIndex$_();
        }
        _$_InitScriptInterface$_(t, s) {
            const i = Ta, e = t ?? this._$_sdkInst$_._$GetScriptInterfaceClass$_(), n = e || i, h = this._$GetBehavior$_()._$GetSdkVersion$_();
            if (Sa._$AddonManager$_._$_PushInitObject$_(this, h), Sa._$AddonManager$_._$_PushInitProperties$_(s), 
            this._$_iScriptInterface$_ = new n(), Sa._$AddonManager$_._$_PopInitProperties$_(), 
            Sa._$AddonManager$_._$_PopInitObject$_(h), !e || this._$_iScriptInterface$_ instanceof i) return this._$_iScriptInterface$_;
            throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`);
        }
        _$GetScriptInterface$_() {
            return this._$_iScriptInterface$_ || this._$_InitScriptInterface$_();
        }
        _$HasScriptInterface$_() {
            return !!this._$_iScriptInterface$_;
        }
    };
}

{
    const ba = self._$C3$_;
    ba._$EffectList$_ = class extends ba._$DefendedBase$_ {
        constructor(t, s) {
            super(), this._$_owner$_ = t, this._$_allEffectTypes$_ = [], this._$_activeEffectTypes$_ = [], 
            this._$_effectTypesByName$_ = new Map(), this._$_effectParams$_ = [], 
            this._$_effectParamBuffers$_ = [], this._$_allInstanceEffectLists$_ = new Set(), 
            this._$_preservesOpaqueness$_ = !0;
            for (const i of s) {
                const e = ba._$New$_(ba._$EffectType$_, this, i, this._$_allEffectTypes$_.length);
                this._$_allEffectTypes$_.push(e), this._$_effectTypesByName$_.set(e._$GetName$_().toLowerCase(), e), 
                3 <= i.length && this._$_effectParams$_.push(this._$_LoadSingleEffectParameters$_(e, i[2]));
            }
            this._$GetRuntime$_()._$_AddEffectList$_(this);
        }
        _$Release$_() {
            this._$GetRuntime$_()._$_RemoveEffectList$_(this);
            for (const t of this._$_effectParamBuffers$_) t._$Release$_();
            ba._$clearArray$_(this._$_effectParamBuffers$_), ba._$clearArray$_(this._$_allEffectTypes$_), 
            ba._$clearArray$_(this._$_activeEffectTypes$_), this._$_effectTypesByName$_.clear(), 
            ba._$clearArray$_(this._$_effectParams$_), this._$_owner$_ = null;
        }
        _$_AddInstanceEffectList$_(t) {
            this._$_allInstanceEffectLists$_.add(t);
        }
        _$_RemoveInstanceEffectList$_(t) {
            this._$_allInstanceEffectLists$_.delete(t);
        }
        _$_InitRenderer$_(t) {
            t._$IsWebGPU$_() && (this._$_effectParamBuffers$_ = this._$_allEffectTypes$_.map(t => {
                const s = t._$GetShaderProgram$_();
                return 0 < s.GetCustomParametersByteSize() ? ba._$New$_(ba._$Gfx$_.WebGPUEffectCustomParamsBuffer, s) : null;
            }), this._$_UpdateAllEffectParamBuffers$_());
            for (const s of this._$_allInstanceEffectLists$_) s._$_InitRenderer$_(t);
        }
        _$PrependEffectTypes$_(t) {
            if (t.length) {
                this._$_allEffectTypes$_ = t.concat(this._$_allEffectTypes$_);
                for (const s of t) this._$_effectTypesByName$_.set(s._$GetName$_().toLowerCase(), s);
                for (let t = 0, s = this._$_allEffectTypes$_.length; t < s; ++t) this._$_allEffectTypes$_[t]._$_SetIndex$_(t);
            }
        }
        _$_LoadSingleEffectParameters$_(t, s) {
            t._$SetActive$_(s[0]);
            const i = s.slice(1);
            for (let t = 0, s = i.length; t < s; ++t) {
                const e = i[t];
                if (Array.isArray(e)) {
                    const n = ba._$New$_(ba._$Color$_);
                    n._$setFromJSON$_(e), i[t] = n;
                }
            }
            return i;
        }
        _$GetOwner$_() {
            return this._$_owner$_;
        }
        _$GetRuntime$_() {
            return this._$_owner$_._$GetRuntime$_();
        }
        _$UpdateActiveEffects$_() {
            ba._$clearArray$_(this._$_activeEffectTypes$_);
            let t = !0;
            for (const s of this._$_allEffectTypes$_) s._$IsActive$_() && (this._$_activeEffectTypes$_.push(s), 
            s._$GetShaderProgram$_()._$PreservesOpaqueness$_() || (t = !1));
            this._$_preservesOpaqueness$_ = t;
        }
        _$GetAllEffectTypes$_() {
            return this._$_allEffectTypes$_;
        }
        _$HasAnyEffectType$_() {
            return 0 < this._$_allEffectTypes$_.length;
        }
        _$GetEffectTypeByName$_(t) {
            return this._$_effectTypesByName$_.get(t.toLowerCase()) || null;
        }
        _$GetEffectTypeByIndex$_(t) {
            if ((t = Math.floor(+t)) < 0 || t >= this._$_allEffectTypes$_.length) throw new RangeError("invalid effect type index");
            return this._$_allEffectTypes$_[t];
        }
        _$IsEffectIndexActive$_(t) {
            return this._$GetEffectTypeByIndex$_(t)._$IsActive$_();
        }
        _$SetEffectIndexActive$_(t, s) {
            this._$GetEffectTypeByIndex$_(t)._$SetActive$_(s);
        }
        _$GetActiveEffectTypes$_() {
            return this._$_activeEffectTypes$_;
        }
        _$HasAnyActiveEffect$_() {
            return 0 < this._$_activeEffectTypes$_.length;
        }
        _$PreservesOpaqueness$_() {
            return this._$_preservesOpaqueness$_;
        }
        _$GetEffectParametersForIndex$_(t) {
            return this._$_effectParams$_[t];
        }
        _$_GetEffectChainShaderParametersForIndex$_(t) {
            return (t < this._$_effectParamBuffers$_.length ? this._$_effectParamBuffers$_ : this._$_effectParams$_)[t];
        }
        _$GetEffectParameter$_(t, s) {
            if (t < 0 || t >= this._$_effectParams$_.length) return null;
            const i = this._$_effectParams$_[t];
            return s < 0 || s >= i.length ? null : i[s];
        }
        _$SetEffectParameter$_(t, s, i) {
            if (t < 0 || t >= this._$_effectParams$_.length) return !1;
            const e = this._$_effectParams$_[t];
            if (s < 0 || s >= e.length) return !1;
            const n = e[s];
            if (n instanceof ba._$Color$_) {
                if (n._$equalsIgnoringAlpha$_(i)) return !1;
                n._$copyRgb$_(i);
            } else {
                if (n === i) return !1;
                e[s] = i;
            }
            return t < this._$_effectParamBuffers$_.length && this._$_effectParamBuffers$_[t].SetParameterValue(s, i), 
            !0;
        }
        _$_UpdateAllEffectParamBuffers$_() {
            const i = this._$_effectParams$_, e = this._$_effectParamBuffers$_;
            for (let t = 0, s = Math.min(i.length, e.length); t < s; ++t) {
                const n = e[t], h = i[t];
                for (let t = 0, s = h.length; t < s; ++t) n.SetParameterValue(t, h[t]);
            }
        }
        static _$SaveFxParamToJson$_(t) {
            return t && t instanceof ba._$Color$_ ? {
                t: "color",
                v: t.toJSON()
            } : t;
        }
        static _$LoadFxParamFromJson$_(t) {
            if (null === t) return NaN;
            if ("object" != typeof t) return t;
            {
                const s = t.t;
                if ("color" !== s) throw new Error("invalid effect parameter type");
                {
                    const i = ba._$New$_(ba._$Color$_);
                    return i._$setFromJSON$_(t.v), i;
                }
            }
        }
        static _$SaveFxParamsToJson$_(t) {
            return t.map(ba._$EffectList$_._$SaveFxParamToJson$_);
        }
        static _$LoadFxParamsFromJson$_(t) {
            return t.map(ba._$EffectList$_._$LoadFxParamFromJson$_);
        }
        _$SaveToJson$_() {
            return this._$_allEffectTypes$_.map(t => ({
                name: t._$GetName$_(),
                active: t._$IsActive$_(),
                params: ba._$EffectList$_._$SaveFxParamsToJson$_(this._$_effectParams$_[t._$GetIndex$_()])
            }));
        }
        _$LoadFromJson$_(t) {
            for (const s of t) {
                const i = this._$GetEffectTypeByName$_(s.name);
                i && (i._$SetActive$_(s.active), this._$_effectParams$_[i._$GetIndex$_()] = ba._$EffectList$_._$LoadFxParamsFromJson$_(s.params));
            }
            this._$UpdateActiveEffects$_(), this._$_UpdateAllEffectParamBuffers$_();
        }
    };
}

{
    const va = self._$C3$_;
    va._$EffectType$_ = class extends va._$DefendedBase$_ {
        constructor(t, s, i) {
            super(), this._$_effectList$_ = t, this._$_id$_ = s[0], this._$_name$_ = s[1], 
            this._$_index$_ = i, this._$_shaderProgram$_ = null, this._$_isActive$_ = !0;
        }
        _$Release$_() {
            this._$_effectList$_ = null, this._$_shaderProgram$_ = null;
        }
        _$Clone$_(t) {
            const s = va._$New$_(va._$EffectType$_, t, [ this._$_id$_, this._$_name$_ ], -1);
            return s._$_shaderProgram$_ = this._$_shaderProgram$_, s._$_isActive$_ = this._$_isActive$_, 
            s;
        }
        _$_InitRenderer$_(t) {
            const s = t._$GetShaderProgramByName$_(this._$_id$_);
            if (!s) throw new Error("failed to find shader program '" + this._$_id$_ + "'");
            this._$_shaderProgram$_ = s;
        }
        _$GetEffectList$_() {
            return this._$_effectList$_;
        }
        _$GetName$_() {
            return this._$_name$_;
        }
        _$_SetIndex$_(t) {
            this._$_index$_ = t;
        }
        _$GetIndex$_() {
            return this._$_index$_;
        }
        _$GetOwner$_() {
            return this._$_effectList$_._$GetOwner$_();
        }
        _$GetRuntime$_() {
            return this._$_effectList$_._$GetRuntime$_();
        }
        _$SetActive$_(t) {
            this._$_isActive$_ = !!t;
        }
        _$IsActive$_() {
            return this._$_isActive$_;
        }
        _$GetShaderProgram$_() {
            return this._$_shaderProgram$_;
        }
        _$GetDefaultParameterValues$_() {
            const i = [];
            for (let t = 0, s = this._$_shaderProgram$_._$GetParameterCount$_(); t < s; ++t) {
                const e = this._$_shaderProgram$_._$GetParameterType$_(t);
                if ("float" === e || "percent" === e) i.push(0); else {
                    if ("color" !== e) throw new TypeError("unknown effect parameter type");
                    i.push(va._$New$_(va._$Color$_, 1, 1, 1, 1));
                }
            }
            return i;
        }
    };
}

{
    const Ca = self._$C3$_;
    Ca._$InstanceEffectList$_ = class extends Ca._$DefendedBase$_ {
        constructor(t, s) {
            super(), this._$_inst$_ = t, this._$_wi$_ = s, this._$_effectList$_ = t._$GetObjectClass$_()._$GetEffectList$_(), 
            this._$_needsRebuildSteps$_ = !0, this._$_wasDefaultColor$_ = !0, this._$_was3D$_ = !1, 
            this._$_wasRotatedOrNegativeSize$_ = !1, this._$_wasTexRotated$_ = !1, 
            this._$_wasMustPreDraw$_ = !1, this._$_effectChain$_ = Ca._$New$_(Ca._$Gfx$_._$EffectChain$_, t._$GetRuntime$_()._$GetCanvasManager$_()._$GetEffectChainManager$_(), {
                _$drawContent$_: (t, s) => {
                    const i = s._$GetContentObject$_(), e = i._$GetWorldInfo$_();
                    t._$SetColor$_(e._$GetPremultipliedColor$_()), t._$SetCurrentZ$_(e._$GetTotalZElevation$_()), 
                    i._$Draw$_(t), t._$SetCurrentZ$_(0);
                },
                _$getSourceTextureInfo$_: t => {
                    const s = t._$GetCurrentTexRect$_(), [ i, e ] = t._$GetCurrentSurfaceSize$_();
                    return {
                        _$srcTexRect$_: s,
                        _$srcWidth$_: i,
                        _$srcHeight$_: e
                    };
                },
                _$getShaderParameters$_: t => this._$_GetEffectChainShaderParametersForIndex$_(t)
            }), this._$_activeEffectFlags$_ = [], this._$_activeEffectTypes$_ = [], 
            this._$_preservesOpaqueness$_ = !0, this._$_effectParams$_ = [], this._$_effectParamBuffers$_ = [], 
            this._$_InitRenderer$_(t._$GetRuntime$_()._$GetRenderer$_());
            for (let t = 0, s = this._$_effectList$_._$GetAllEffectTypes$_().length; t < s; ++t) this._$_activeEffectFlags$_.push(!0);
            this._$UpdateActiveEffects$_(), this._$_effectList$_._$_AddInstanceEffectList$_(this);
        }
        _$Release$_() {
            this._$_effectList$_._$_RemoveInstanceEffectList$_(this);
            for (const t of this._$_effectParamBuffers$_) t && t._$Release$_();
            Ca._$clearArray$_(this._$_effectParamBuffers$_), this._$_effectChain$_._$Release$_(), 
            this._$_effectChain$_ = null, Ca._$clearArray$_(this._$_activeEffectFlags$_), 
            Ca._$clearArray$_(this._$_activeEffectTypes$_), Ca._$clearArray$_(this._$_effectParams$_), 
            this._$_inst$_ = null, this._$_effectList$_ = null;
        }
        _$_InitRenderer$_(t) {
            t._$IsWebGPU$_() && (this._$_effectParamBuffers$_ = this._$_effectList$_._$GetAllEffectTypes$_().map(t => {
                const s = t._$GetShaderProgram$_();
                return 0 < s.GetCustomParametersByteSize() ? Ca._$New$_(Ca._$Gfx$_.WebGPUEffectCustomParamsBuffer, s) : null;
            }));
        }
        _$_LoadEffectParameters$_(t) {
            let s = 0;
            for (const i of t) this._$_effectParams$_.push(this._$_LoadSingleEffectParameters$_(s, i)), 
            ++s;
            this._$_UpdateAllEffectParamBuffers$_(), this._$UpdateActiveEffects$_();
        }
        _$_LoadSingleEffectParameters$_(t, s) {
            this._$_activeEffectFlags$_[t] = s[0];
            const i = s.slice(1);
            for (let t = 0, s = i.length; t < s; ++t) {
                const e = i[t];
                if (Array.isArray(e)) {
                    const n = Ca._$New$_(Ca._$Color$_);
                    n._$setFromJSON$_(e), i[t] = n;
                }
            }
            return i;
        }
        _$LoadDefaultEffectParameters$_() {
            for (const t of this._$_effectList$_._$GetAllEffectTypes$_()) this._$_effectParams$_.push(t._$GetDefaultParameterValues$_());
            this._$_UpdateAllEffectParamBuffers$_();
        }
        _$GetOwner$_() {
            return this._$_owner$_;
        }
        _$GetEffectList$_() {
            return this._$_effectList$_;
        }
        _$GetEffectChain$_() {
            return this._$_MaybeRebuildEffectChainSteps$_(), this._$_effectChain$_;
        }
        _$GetRuntime$_() {
            return this._$_inst$_._$GetRuntime$_();
        }
        _$UpdateActiveEffects$_() {
            Ca._$clearArray$_(this._$_activeEffectTypes$_);
            let t = this._$_wi$_, i = this._$_effectList$_._$GetAllEffectTypes$_(), e = this._$_activeEffectTypes$_, n = this._$_activeEffectFlags$_, h = !0;
            for (let t = 0, s = i.length; t < s; ++t) if (n[t]) {
                const r = i[t];
                e.push(r), r._$GetShaderProgram$_()._$PreservesOpaqueness$_() || (h = !1);
            }
            this._$_preservesOpaqueness$_ = h, t._$_SetHasAnyActiveEffect$_(!!e.length), 
            this._$_needsRebuildSteps$_ = !0;
        }
        _$_MaybeRebuildEffectChainSteps$_() {
            const t = this._$_inst$_, s = this._$_wi$_, i = s._$HasDefaultColor$_(), e = t._$GetPlugin$_()._$Is3D$_(), n = 0 !== s._$GetAngle$_() || 0 !== s._$GetLayer$_()._$GetAngle$_() || s._$GetWidth$_() < 0 || s._$GetHeight$_() < 0, h = t._$IsCurrentTexRotated$_(), r = t._$MustPreDraw$_();
            (this._$_needsRebuildSteps$_ || i !== this._$_wasDefaultColor$_ || e !== this._$_was3D$_ || n !== this._$_wasRotatedOrNegativeSize$_ || h !== this._$_wasTexRotated$_ || r !== this._$_wasMustPreDraw$_ || this._$_effectChain$_._$NeedsRebuild$_()) && (this._$_effectChain$_._$BuildSteps$_(this._$_activeEffectTypes$_.map(t => t._$GetShaderProgram$_()), {
                _$indexMap$_: this._$_activeEffectTypes$_.map(t => t._$GetIndex$_()),
                _$forcePreDraw$_: !i || r,
                _$is3D$_: e,
                _$isSourceTextureRotated$_: h,
                _$isRotatedOrNegativeSizeInstance$_: n
            }), this._$_needsRebuildSteps$_ = !1, this._$_wasDefaultColor$_ = i, 
            this._$_was3D$_ = e, this._$_wasRotatedOrNegativeSize$_ = n, this._$_wasTexRotated$_ = h, 
            this._$_wasMustPreDraw$_ = r);
        }
        _$GetActiveEffectTypes$_() {
            return this._$_activeEffectTypes$_;
        }
        _$GetEffectParametersForIndex$_(t) {
            return this._$_effectParams$_[t];
        }
        _$_GetEffectChainShaderParametersForIndex$_(t) {
            return (t < this._$_effectParamBuffers$_.length ? this._$_effectParamBuffers$_ : this._$_effectParams$_)[t];
        }
        _$GetEffectParameter$_(t, s) {
            if (t < 0 || t >= this._$_effectParams$_.length) return null;
            const i = this._$_effectParams$_[t];
            return s < 0 || s >= i.length ? null : i[s];
        }
        _$SetEffectParameter$_(t, s, i) {
            if (t < 0 || t >= this._$_effectParams$_.length) return !1;
            const e = this._$_effectParams$_[t];
            if (s < 0 || s >= e.length) return !1;
            const n = e[s];
            if (n instanceof Ca._$Color$_) {
                if (n._$equalsIgnoringAlpha$_(i)) return !1;
                n._$copyRgb$_(i);
            } else {
                if (n === i) return !1;
                e[s] = i;
            }
            return t < this._$_effectParamBuffers$_.length && this._$_effectParamBuffers$_[t].SetParameterValue(s, i), 
            !0;
        }
        _$_UpdateAllEffectParamBuffers$_() {
            const i = this._$_effectParams$_, e = this._$_effectParamBuffers$_;
            for (let t = 0, s = e.length; t < s; ++t) {
                const n = e[t], h = i[t];
                for (let t = 0, s = h.length; t < s; ++t) n.SetParameterValue(t, h[t]);
            }
        }
        _$PreservesOpaqueness$_() {
            return this._$_preservesOpaqueness$_;
        }
        _$HasAnyActiveBackgroundBlendingEffect$_() {
            return this._$_activeEffectTypes$_.some(t => t._$GetShaderProgram$_()._$BlendsBackground$_());
        }
        _$IsEffectIndexActive$_(t) {
            return this._$_activeEffectFlags$_[t];
        }
        _$SetEffectIndexActive$_(t, s) {
            this._$_activeEffectFlags$_[t] = !!s;
        }
        _$GetAllEffectTypes$_() {
            return this._$_effectList$_._$GetAllEffectTypes$_();
        }
        _$_SaveToJson$_() {
            return this._$_effectList$_._$GetAllEffectTypes$_().map(t => ({
                name: t._$GetName$_(),
                active: this._$_activeEffectFlags$_[t._$GetIndex$_()],
                params: Ca._$EffectList$_._$SaveFxParamsToJson$_(this._$_effectParams$_[t._$GetIndex$_()])
            }));
        }
        _$_LoadFromJson$_(t) {
            for (const s of t) {
                const i = this._$_effectList$_._$GetEffectTypeByName$_(s.name);
                i && (this._$_activeEffectFlags$_[i._$GetIndex$_()] = s.active, 
                this._$_effectParams$_[i._$GetIndex$_()] = Ca._$EffectList$_._$LoadFxParamsFromJson$_(s.params));
            }
            this._$UpdateActiveEffects$_(), this._$_UpdateAllEffectParamBuffers$_();
        }
    };
}

{
    let G = self._$C3$_, h = [], x = [], r = [], S = G._$New$_(G._$CollisionPoly$_), M = G._$New$_(G._$CollisionPoly$_), T = G._$New$_(G._$Quad$_), d = G._$New$_(G.Rect), p = G._$New$_(G.Rect), m = null, g = null, y = null;
    G._$CollisionEngine$_ = class extends G._$DefendedBase$_ {
        constructor(t) {
            super(), this._$_runtime$_ = t, this._$_collisionCellWidth$_ = 0, this._$_collisionCellHeight$_ = 0, 
            this._$_registeredCollisions$_ = [], this._$_collisionCheckCount$_ = 0, 
            this._$_collisionCheckSec$_ = 0, this._$_polyCheckCount$_ = 0, this._$_polyCheckSec$_ = 0, 
            this._$_iCollisionEngine$_ = new self._$ICollisionEngine$_(this);
        }
        _$Release$_() {
            this._$_runtime$_ = null;
        }
        _$GetRuntime$_() {
            return this._$_runtime$_;
        }
        _$GetICollisionEngine$_() {
            return this._$_iCollisionEngine$_;
        }
        _$_Update1sStats$_() {
            this._$_collisionCheckSec$_ = this._$_collisionCheckCount$_, this._$_collisionCheckCount$_ = 0, 
            this._$_polyCheckSec$_ = this._$_polyCheckCount$_, this._$_polyCheckCount$_ = 0;
        }
        _$Get1secCollisionChecks$_() {
            return this._$_collisionCheckSec$_;
        }
        _$Get1secPolyChecks$_() {
            return this._$_polyCheckSec$_;
        }
        _$RegisterCollision$_(t, s) {
            const i = t._$GetWorldInfo$_(), e = s._$GetWorldInfo$_();
            i && e && i._$IsCollisionEnabled$_() && e._$IsCollisionEnabled$_() && this._$_registeredCollisions$_.push([ t, s ]);
        }
        _$AddRegisteredCollisionCandidates$_(s, i, e) {
            for (const [ n, h ] of this._$_registeredCollisions$_) {
                let t = null;
                if (s === n) t = h; else {
                    if (s !== h) continue;
                    t = n;
                }
                t._$BelongsToObjectClass$_(i) && !e.includes(t) && e.push(t);
            }
        }
        _$CheckRegisteredCollision$_(t, s) {
            if (this._$_registeredCollisions$_.length) for (const [ i, e ] of this._$_registeredCollisions$_) if (t === i && s === e || t === e && s === i) return !0;
            return !1;
        }
        _$ClearRegisteredCollisions$_() {
            G._$clearArray$_(this._$_registeredCollisions$_);
        }
        _$TestOverlap$_(t, s) {
            if (!t || !s || t === s) return !1;
            const i = t._$GetWorldInfo$_(), e = s._$GetWorldInfo$_();
            if (!i._$IsCollisionEnabled$_() || !e._$IsCollisionEnabled$_()) return !1;
            this._$_collisionCheckCount$_++;
            const n = i._$GetLayer$_(), h = e._$GetLayer$_(), r = n._$IsTransformCompatibleWith$_(h);
            return r ? this._$_TestOverlap_SameLayers$_(i, e) : this._$_TestOverlap_DifferentLayers$_(i, e);
        }
        _$_TestOverlap_SameLayers$_(t, s) {
            if (!t._$GetBoundingBox$_()._$intersectsRect$_(s._$GetBoundingBox$_())) return !1;
            if (this._$_polyCheckCount$_++, !t._$GetBoundingQuad$_()._$intersectsQuad$_(s._$GetBoundingQuad$_())) return !1;
            if (t._$HasTilemap$_() && s._$HasTilemap$_()) return !1;
            if (t._$HasTilemap$_()) return this._$TestTilemapOverlap$_(t, s);
            if (s._$HasTilemap$_()) return this._$TestTilemapOverlap$_(s, t);
            if (!t._$HasOwnCollisionPoly$_() && !s._$HasOwnCollisionPoly$_()) return !0;
            const i = t._$GetTransformedCollisionPoly$_(), e = s._$GetTransformedCollisionPoly$_();
            return i._$intersectsPoly$_(e, s._$GetX$_() - t._$GetX$_(), s._$GetY$_() - t._$GetY$_());
        }
        _$_TestOverlap_DifferentLayers$_(i, e) {
            const t = i._$HasTilemap$_(), s = e._$HasTilemap$_();
            if (t && !s) return this._$TestTilemapOverlapDifferentLayers$_(i, e);
            if (s && !t) return this._$TestTilemapOverlapDifferentLayers$_(e, i);
            if (s || t) return !1;
            {
                const n = i._$GetLayer$_(), h = e._$GetLayer$_(), r = (S._$copy$_(i._$GetTransformedCollisionPoly$_()), 
                M._$copy$_(e._$GetTransformedCollisionPoly$_()), S._$pointsArr$_());
                for (let t = 0, s = r.length; t < s; t += 2) {
                    const a = t + 1, l = r[t], u = r[a], [ c, f ] = n._$LayerToCanvasCss$_(l + i._$GetX$_(), u + i._$GetY$_());
                    r[t] = c, r[a] = f;
                }
                const o = M._$pointsArr$_();
                for (let t = 0, s = o.length; t < s; t += 2) {
                    const d = t + 1, p = o[t], m = o[d], [ g, y ] = h._$LayerToCanvasCss$_(p + e._$GetX$_(), m + e._$GetY$_());
                    o[t] = g, o[d] = y;
                }
                return S._$setBboxChanged$_(), M._$setBboxChanged$_(), this._$_polyCheckCount$_++, 
                S._$intersectsPoly$_(M, 0, 0);
            }
        }
        _$TestTilemapOverlapDifferentLayers$_(t, s) {
            const i = t._$GetLayer$_(), e = s._$GetLayer$_(), n = (m = m || G._$New$_(G._$CollisionPoly$_), 
            g = g || G._$New$_(G.Rect), y = y || G._$New$_(G._$Quad$_), s._$GetX$_()), h = s._$GetY$_(), [ r, o ] = e._$LayerToCanvasCss$_(n, h), [ a, l ] = i._$CanvasCssToLayer$_(r, o), u = a - n, c = l - h;
            if (g._$copy$_(s._$GetBoundingBox$_()), g.offset(u, c), !t._$GetBoundingBox$_()._$intersectsRect$_(g)) return !1;
            if (y._$copy$_(s._$GetBoundingQuad$_()), y.offset(u, c), this._$_polyCheckCount$_++, 
            !t._$GetBoundingQuad$_()._$intersectsQuad$_(y)) return !1;
            m._$copy$_(s._$GetTransformedCollisionPoly$_());
            const f = m._$pointsArr$_();
            for (let t = 0, s = f.length; t < s; t += 2) {
                const d = t + 1;
                f[t] += u, f[d] += c;
            }
            return m._$setBboxChanged$_(), this._$TestTilemapOverlap$_(t, s, a, l, m, g, y);
        }
        _$TestTilemapOverlap$_(t, e, s, i, n, h, r) {
            const o = void 0 !== h ? h : e._$GetBoundingBox$_(), a = t._$GetX$_(), l = t._$GetY$_(), u = t._$GetInstance$_()._$GetSdkInstance$_(), c = void 0 !== s ? s : e._$GetX$_(), f = void 0 !== i ? i : e._$GetY$_(), d = e._$HasOwnCollisionPoly$_(), p = void 0 !== r ? r : e._$GetBoundingQuad$_(), m = x;
            u.GetCollisionRectCandidates(o, m);
            for (let t = 0, s = m.length; t < s; ++t) {
                const g = m[t], y = g.GetRect();
                if (this._$_collisionCheckCount$_++, o._$intersectsRectOffset$_(y, a, l) && (T._$setFromRect$_(y), 
                T.offset(a, l), T._$intersectsQuad$_(p))) if (d) {
                    let t = void 0 !== n ? n : e._$GetTransformedCollisionPoly$_(), s = c, i = f;
                    void 0 !== n && (s = e._$GetX$_(), i = e._$GetY$_());
                    const M = g.GetPoly();
                    if (M) {
                        if (this._$_polyCheckCount$_++, M._$intersectsPoly$_(t, s - (a + y._$getLeft$_()), i - (l + y._$getTop$_()))) return G._$clearArray$_(m), 
                        !0;
                    } else if (S._$setFromQuad$_(T, 0, 0), S._$intersectsPoly$_(t, s, i)) return G._$clearArray$_(m), 
                    !0;
                } else {
                    const w = g.GetPoly();
                    if (!w) return G._$clearArray$_(m), !0;
                    if (S._$setFromQuad$_(p, 0, 0), w._$intersectsPoly$_(S, -(a + y._$getLeft$_()), -(l + y._$getTop$_()))) return G._$clearArray$_(m), 
                    !0;
                }
            }
            return G._$clearArray$_(m), !1;
        }
        _$TestAndSelectCanvasPointOverlap$_(t, o, a) {
            const l = t._$GetCurrentSol$_(), s = this._$_runtime$_._$GetCurrentEvent$_();
            if (!s) throw new Error("cannot call outside event");
            const u = s._$IsOrBlock$_(), i = new Map(), c = t => {
                let s = i.get(t);
                return void 0 === s && (s = t._$IsSelfAndParentsInteractive$_(), 
                i.set(t, s)), s;
            };
            if (l._$IsSelectAll$_()) {
                a || (l._$_SetSelectAll$_(!1), G._$clearArray$_(l._$_GetOwnInstances$_())), 
                u && G._$clearArray$_(l._$_GetOwnElseInstances$_());
                for (const e of t._$GetInstances$_()) {
                    let n = e._$GetWorldInfo$_(), h = n._$GetLayer$_();
                    if (!(!c(h) || !n._$IsInViewport2$_()) && o.some(([ t, s ]) => {
                        const [ i, e ] = h._$CanvasCssToLayer$_(t, s, n._$GetTotalZElevation$_());
                        return n._$ContainsPoint$_(i, e);
                    })) {
                        if (a) return !1;
                        l._$_PushInstance$_(e);
                    } else u && l._$_PushElseInstance$_(e);
                }
            } else {
                let i, e = !1, r = (!u || s._$IsFirstConditionOfType$_(this._$_runtime$_._$GetCurrentCondition$_()) || this._$_runtime$_._$IsCurrentConditionFirst$_() && !l._$_GetOwnElseInstances$_().length && l._$_GetOwnInstances$_().length ? i = l._$_GetOwnInstances$_() : (i = l._$_GetOwnElseInstances$_(), 
                e = !0), 0);
                for (let s = 0, t = i.length; s < t; ++s) {
                    let t = i[s], n = t._$GetWorldInfo$_(), h = n._$GetLayer$_();
                    if (!(!c(h) || !n._$IsInViewport2$_()) && o.some(([ t, s ]) => {
                        const [ i, e ] = h._$CanvasCssToLayer$_(t, s, n._$GetTotalZElevation$_());
                        return n._$ContainsPoint$_(i, e);
                    })) {
                        if (a) return !1;
                        e ? l._$_PushInstance$_(t) : i[r++] = t;
                    } else e ? i[r++] = t : u && l._$_PushElseInstance$_(t);
                }
                a || (i.length = r);
            }
            return t._$ApplySolToContainer$_(), i.clear(), !!a || l._$HasAnyInstances$_();
        }
        _$_ObjectClassCanUseCollisionCells$_(t, s) {
            if (t) for (const i of s._$layersHasInstancesOn$_()) if (!t._$IsTransformCompatibleWith$_(i)) return !1;
            return !0;
        }
        _$GetCollisionCandidates$_(t, s, i, e) {
            if (s._$IsFamily$_()) for (const n of s._$GetFamilyMembers$_()) this._$_ObjectClassCanUseCollisionCells$_(t, n) ? (n._$_UpdateAllCollisionCells$_(), 
            n._$_GetCollisionCellGrid$_()._$QueryRange$_(i, e)) : G._$appendArray$_(e, n._$GetInstances$_()); else this._$_ObjectClassCanUseCollisionCells$_(t, s) ? (s._$_UpdateAllCollisionCells$_(), 
            s._$_GetCollisionCellGrid$_()._$QueryRange$_(i, e)) : G._$appendArray$_(e, s._$GetInstances$_());
        }
        _$GetObjectClassesCollisionCandidates$_(t, s, i, e) {
            for (const n of s) this._$GetCollisionCandidates$_(t, n, i, e);
        }
        _$GetSolidCollisionCandidates$_(t, s, i) {
            const e = this._$_runtime$_._$GetSolidBehavior$_();
            e && this._$GetObjectClassesCollisionCandidates$_(t, e._$GetObjectClasses$_(), s, i);
        }
        _$GetJumpthruCollisionCandidates$_(t, s, i) {
            const e = this._$_runtime$_._$GetJumpthruBehavior$_();
            e && this._$GetObjectClassesCollisionCandidates$_(t, e._$GetObjectClasses$_(), s, i);
        }
        _$IsSolidCollisionAllowed$_(t, s) {
            return t._$_IsSolidEnabled$_() && (!s || s._$GetWorldInfo$_()._$IsSolidCollisionAllowed$_(t._$GetSavedDataMap$_().get("solidTags")));
        }
        _$TestOverlapSolid$_(t) {
            const s = t._$GetWorldInfo$_();
            this._$GetSolidCollisionCandidates$_(s._$GetLayer$_(), s._$GetBoundingBox$_(), h);
            for (const i of h) if (this._$IsSolidCollisionAllowed$_(i, t) && this._$TestOverlap$_(t, i)) return G._$clearArray$_(h), 
            i;
            return G._$clearArray$_(h), null;
        }
        _$TestRectOverlapSolid$_(t, s) {
            this._$GetSolidCollisionCandidates$_(null, t, h);
            for (const i of h) if (this._$IsSolidCollisionAllowed$_(i, s) && this._$TestRectOverlap$_(t, i)) return G._$clearArray$_(h), 
            i;
            return G._$clearArray$_(h), null;
        }
        _$TestOverlapJumpthru$_(t, s) {
            let i = null;
            s && (i = r, G._$clearArray$_(i));
            const e = t._$GetWorldInfo$_();
            this._$GetJumpthruCollisionCandidates$_(e._$GetLayer$_(), e._$GetBoundingBox$_(), h);
            for (const n of h) if (n._$_IsJumpthruEnabled$_() && this._$TestOverlap$_(t, n)) {
                if (!s) return G._$clearArray$_(h), n;
                i.push(n);
            }
            return G._$clearArray$_(h), i;
        }
        _$PushOut$_(s, i, e, n, h) {
            n = n || 50;
            const r = s._$GetWorldInfo$_(), o = r._$GetX$_(), a = r._$GetY$_();
            for (let t = 0; t < n; ++t) if (r._$SetXY$_(o + i * t, a + e * t), r._$SetBboxChanged$_(), 
            !this._$TestOverlap$_(s, h)) return !0;
            return r._$SetXY$_(o, a), r._$SetBboxChanged$_(), !1;
        }
        _$PushOutSolid$_(s, i, e, n, h, r) {
            n = n || 50;
            let o = s._$GetWorldInfo$_(), a = o._$GetX$_(), l = o._$GetY$_(), u = null, c = null;
            for (let t = 0; t < n; ++t) if (o._$SetXY$_(a + i * t, l + e * t), o._$SetBboxChanged$_(), 
            !this._$TestOverlap$_(s, u)) if (u = this._$TestOverlapSolid$_(s)) c = u; else if (h && (u = r ? this._$TestOverlap$_(s, r) ? r : null : this._$TestOverlapJumpthru$_(s)) && (c = u), 
            !u) return c && this._$PushInFractional$_(s, i, e, c, 16, !0), !0;
            return o._$SetXY$_(a, l), o._$SetBboxChanged$_(), !1;
        }
        _$PushOutSolidAxis$_(i, e, n, t) {
            t = t || 50;
            let h = i._$GetWorldInfo$_(), r = h._$GetX$_(), o = h._$GetY$_(), a = null, l = null;
            for (let s = 0; s < t; ++s) for (let t = 0; t < 2; ++t) {
                const u = 2 * t - 1;
                if (h._$SetXY$_(r + e * s * u, o + n * s * u), h._$SetBboxChanged$_(), 
                !this._$TestOverlap$_(i, a)) {
                    if (!(a = this._$TestOverlapSolid$_(i))) return l && this._$PushInFractional$_(i, e * u, n * u, l, 16, !0), 
                    !0;
                    l = a;
                }
            }
            return h._$SetXY$_(r, o), h._$SetBboxChanged$_(), !1;
        }
        _$PushInFractional$_(t, s, i, e, n, h) {
            let r = 2, o = !1, a = !1, l = t._$GetWorldInfo$_(), u = l._$GetX$_(), c = l._$GetY$_();
            for (;r <= n; ) {
                const f = 1 / r;
                r *= 2, l._$OffsetXY$_(s * f * (o ? 1 : -1), i * f * (o ? 1 : -1)), 
                l._$SetBboxChanged$_(), this._$TestOverlap$_(t, e) || h && this._$TestOverlapSolid$_(t) ? (o = !0, 
                a = !0) : (o = !1, a = !1, u = l._$GetX$_(), c = l._$GetY$_());
            }
            a && (l._$SetXY$_(u, c), l._$SetBboxChanged$_());
        }
        _$PushOutSolidNearest$_(i, t = 100) {
            let e = 0, n = i._$GetWorldInfo$_(), h = n._$GetX$_(), r = n._$GetY$_(), o = 0, a = this._$TestOverlapSolid$_(i);
            if (!a) return !0;
            for (;e <= t; ) {
                let t = 0, s = 0;
                switch (o) {
                  case 0:
                    t = 0, s = -1, e++;
                    break;

                  case 1:
                    t = 1, s = -1;
                    break;

                  case 2:
                    t = 1, s = 0;
                    break;

                  case 3:
                    t = 1, s = 1;
                    break;

                  case 4:
                    t = 0, s = 1;
                    break;

                  case 5:
                    t = -1, s = 1;
                    break;

                  case 6:
                    t = -1, s = 0;
                    break;

                  case 7:
                    t = -1, s = -1;
                }
                if (o = (o + 1) % 8, n._$SetXY$_(Math.floor(h + t * e), Math.floor(r + s * e)), 
                n._$SetBboxChanged$_(), !this._$TestOverlap$_(i, a) && !(a = this._$TestOverlapSolid$_(i))) return !0;
            }
            return n._$SetXY$_(h, r), n._$SetBboxChanged$_(), !1;
        }
        _$CalculateBounceAngle$_(t, s, i, e) {
            const n = t._$GetWorldInfo$_(), h = n._$GetX$_(), r = n._$GetY$_(), o = Math.max(10, G._$distanceTo$_(s, i, h, r)), a = G._$angleTo$_(s, i, h, r), l = e || this._$TestOverlapSolid$_(t);
            if (!l) return G._$clampAngle$_(a + Math.PI);
            let u = l, c = 0, f = 0, d = G._$toRadians$_(5), p;
            for (p = 1; p < 36; ++p) {
                const v = a - p * d;
                if (n._$SetXY$_(s + Math.cos(v) * o, i + Math.sin(v) * o), n._$SetBboxChanged$_(), 
                !this._$TestOverlap$_(t, u) && !(u = e ? null : this._$TestOverlapSolid$_(t))) {
                    c = v;
                    break;
                }
            }
            for (36 === p && (c = G._$clampAngle$_(a + Math.PI)), u = l, p = 1; p < 36; ++p) {
                const C = a + p * d;
                if (n._$SetXY$_(s + Math.cos(C) * o, i + Math.sin(C) * o), n._$SetBboxChanged$_(), 
                !this._$TestOverlap$_(t, u) && !(u = e ? null : this._$TestOverlapSolid$_(t))) {
                    f = C;
                    break;
                }
            }
            if (36 === p && (f = G._$clampAngle$_(a + Math.PI)), n._$SetXY$_(h, r), 
            n._$SetBboxChanged$_(), f === c) return f;
            let m = G._$angleDiff$_(f, c) / 2, g;
            g = G._$angleClockwise$_(f, c) ? G._$clampAngle$_(c + m + Math.PI) : G._$clampAngle$_(f + m);
            const y = Math.cos(a), M = Math.sin(a), w = Math.cos(g), x = Math.sin(g), S = y * w + M * x, T = y - 2 * S * w, b = M - 2 * S * x;
            return G._$angleTo$_(0, 0, T, b);
        }
        _$TestSegmentOverlap$_(t, s, i, e, n) {
            if (!n) return !1;
            const h = n._$GetWorldInfo$_();
            if (!h._$IsCollisionEnabled$_()) return !1;
            if (this._$_collisionCheckCount$_++, d.set(Math.min(t, i), Math.min(s, e), Math.max(t, i), Math.max(s, e)), 
            !h._$GetBoundingBox$_()._$intersectsRect$_(d)) return !1;
            if (n._$HasTilemap$_()) return this._$_TestSegmentOverlapTilemap$_(t, s, i, e, n, h);
            if (this._$_polyCheckCount$_++, !h._$GetBoundingQuad$_()._$intersectsSegment$_(t, s, i, e)) return !1;
            if (!h._$HasOwnCollisionPoly$_()) return !0;
            const r = h._$GetTransformedCollisionPoly$_();
            return r._$intersectsSegment$_(h._$GetX$_(), h._$GetY$_(), t, s, i, e);
        }
        _$_TestSegmentOverlapTilemap$_(i, e, n, h, t, s) {
            const r = s._$GetX$_(), o = s._$GetY$_(), a = t._$GetSdkInstance$_(), l = x;
            p.set(i, e, n, h), p.normalize(), a.GetCollisionRectCandidates(p, l);
            for (let t = 0, s = l.length; t < s; ++t) {
                const u = l[t], c = u.GetRect();
                if (this._$_collisionCheckCount$_++, d._$intersectsRectOffset$_(c, r, o) && (T._$setFromRect$_(c), 
                T.offset(r, o), T._$intersectsSegment$_(i, e, n, h))) {
                    const f = u.GetPoly();
                    if (!f) return G._$clearArray$_(l), !0;
                    if (this._$_polyCheckCount$_++, f._$intersectsSegment$_(r + c._$getLeft$_(), o + c._$getTop$_(), i, e, n, h)) return G._$clearArray$_(l), 
                    !0;
                }
            }
            return G._$clearArray$_(l), !1;
        }
        _$TestRectOverlap$_(t, s) {
            if (!s) return !1;
            const i = s._$GetWorldInfo$_();
            if (!i._$IsCollisionEnabled$_()) return !1;
            if (this._$_collisionCheckCount$_++, !i._$GetBoundingBox$_()._$intersectsRect$_(t)) return !1;
            if (s._$HasTilemap$_()) return this._$_TestRectOverlapTilemap$_(t, s, i);
            if (this._$_polyCheckCount$_++, T._$setFromRect$_(t), !i._$GetBoundingQuad$_()._$intersectsQuad$_(T)) return !1;
            if (!i._$HasOwnCollisionPoly$_()) return !0;
            const e = S, n = (e._$setFromRect$_(t, i._$GetX$_(), i._$GetY$_()), 
            i._$GetTransformedCollisionPoly$_());
            return e._$intersectsPoly$_(n, 0, 0);
        }
        _$_TestRectOverlapTilemap$_(i, t, s) {
            const e = s._$GetX$_(), n = s._$GetY$_(), h = t._$GetSdkInstance$_(), r = x;
            h.GetCollisionRectCandidates(i, r);
            for (let t = 0, s = r.length; t < s; ++t) {
                const o = r[t], a = o.GetRect();
                if (this._$_collisionCheckCount$_++, i._$intersectsRectOffset$_(a, e, n)) {
                    const l = o.GetPoly();
                    if (!l) return G._$clearArray$_(r), !0;
                    if (this._$_polyCheckCount$_++, S._$setFromRect$_(i, 0, 0), 
                    l._$intersectsPoly$_(S, -(e + a._$getLeft$_()), -(n + a._$getTop$_()))) return G._$clearArray$_(r), 
                    !0;
                }
            }
            return G._$clearArray$_(r), !1;
        }
        _$TestRayIntersectsInstance$_(t, s) {
            if (t) {
                const i = t._$GetWorldInfo$_();
                i._$IsCollisionEnabled$_() && (this._$_collisionCheckCount$_++, 
                i._$GetBoundingBox$_()._$intersectsRect$_(s.rect)) && (t._$HasTilemap$_() ? this._$_TestRayIntersectsTilemap$_(t, i, s) : (this._$_polyCheckCount$_++, 
                i._$HasOwnCollisionPoly$_() ? s._$TestInstancePoly$_(t, i._$GetX$_(), i._$GetY$_(), i._$GetTransformedCollisionPoly$_()) : s._$TestInstanceQuad$_(t, i._$GetBoundingQuad$_())));
            }
        }
        _$_TestRayIntersectsTilemap$_(i, e, n) {
            const h = e._$GetX$_(), r = e._$GetY$_(), o = x;
            i._$GetSdkInstance$_().GetCollisionRectCandidates(n.rect, o);
            for (let t = 0, s = o.length; t < s; t++) {
                const a = o[t], l = a.GetRect();
                if (this._$_collisionCheckCount$_++, n.rect._$intersectsRectOffset$_(l, h, r)) {
                    const u = a.GetPoly();
                    this._$_polyCheckCount$_++, u ? n._$TestInstancePoly$_(i, h + l._$getLeft$_(), r + l._$getTop$_(), u) : n._$TestInstanceRect$_(i, e._$GetX$_(), e._$GetY$_(), l);
                }
            }
            G._$clearArray$_(o);
        }
        _$SetCollisionCellSize$_(t, s) {
            if (t !== this._$_collisionCellWidth$_ || s !== this._$_collisionCellHeight$_) {
                this._$_collisionCellWidth$_ = t, this._$_collisionCellHeight$_ = s;
                const i = this._$_runtime$_._$GetAllObjectClasses$_();
                for (const e of i) if (e._$IsWorldType$_()) {
                    for (const n of e._$instancesIncludingPendingCreate$_()) n._$GetWorldInfo$_()._$_RemoveFromCollisionCells$_();
                    e._$_GetCollisionCellGrid$_()._$SetCellSize$_(t, s), e._$_SetAnyCollisionCellChanged$_();
                    for (const h of e._$instancesIncludingPendingCreate$_()) {
                        const r = h._$GetWorldInfo$_();
                        r._$_SetCollisionCellChanged$_(), r._$_UpdateCollisionCell$_();
                    }
                }
            }
        }
        _$GetCollisionCellSize$_() {
            return [ this._$_collisionCellWidth$_, this._$_collisionCellHeight$_ ];
        }
        _$_InitCollisionCellSize$_(t, s) {
            this._$_collisionCellWidth$_ = t, this._$_collisionCellHeight$_ = s;
        }
    };
}

{
    const Ga = self._$C3$_;
    Ga._$SparseGrid$_ = class extends Ga._$DefendedBase$_ {
        constructor(t, s) {
            super(), this._$_cellWidth$_ = t, this._$_cellHeight$_ = s, this._$_cells$_ = Ga._$New$_(Ga._$PairMap$_);
        }
        _$Release$_() {
            this._$_cells$_._$Release$_(), this._$_cells$_ = null;
        }
        _$SetCellSize$_(t, s) {
            if (!this._$_cells$_._$IsEmpty$_()) throw new Error("grid not empty");
            this._$_cellWidth$_ = t, this._$_cellHeight$_ = s;
        }
        _$GetCell$_(t, s, i) {
            let e = this._$_cells$_._$Get$_(t, s);
            return e || (i ? (e = Ga._$New$_(Ga._$GridCell$_, this, t, s), this._$_cells$_.Set(t, s, e), 
            e) : null);
        }
        _$XToCell$_(t) {
            const s = Math.floor(t / this._$_cellWidth$_);
            return isFinite(s) ? s : 0;
        }
        _$YToCell$_(t) {
            const s = Math.floor(t / this._$_cellHeight$_);
            return isFinite(s) ? s : 0;
        }
        _$Update$_(e, n, h) {
            if (n) for (let i = n._$getLeft$_(), t = n._$getRight$_(); i <= t; ++i) for (let t = n._$getTop$_(), s = n._$getBottom$_(); t <= s; ++t) if (!h || !h._$containsPoint$_(i, t)) {
                const r = this._$GetCell$_(i, t, !1);
                r && (r._$Remove$_(e), r._$IsEmpty$_()) && this._$_cells$_._$Delete$_(i, t);
            }
            if (h) for (let i = h._$getLeft$_(), t = h._$getRight$_(); i <= t; ++i) for (let t = h._$getTop$_(), s = h._$getBottom$_(); t <= s; ++t) n && n._$containsPoint$_(i, t) || this._$GetCell$_(i, t, !0)._$Insert$_(e);
        }
        _$QueryRange$_(t, s) {
            let i = this._$XToCell$_(t._$getLeft$_()), e = this._$YToCell$_(t._$getTop$_()), n = this._$XToCell$_(t._$getRight$_()), h = this._$YToCell$_(t._$getBottom$_());
            if (isFinite(n) && isFinite(h)) for (;i <= n; ++i) for (let t = e; t <= h; ++t) {
                const r = this._$GetCell$_(i, t, !1);
                r && r._$Dump$_(s);
            }
        }
    };
}

{
    const Ia = self._$C3$_;
    Ia._$GridCell$_ = class extends Ia._$DefendedBase$_ {
        constructor(t, s, i) {
            super(), this._$_grid$_ = t, this._$_x$_ = s, this._$_y$_ = i, this._$_instances$_ = Ia._$New$_(Ia._$ArraySet$_);
        }
        _$Release$_() {
            this._$_instances$_._$Release$_(), this._$_instances$_ = null, this._$_grid$_ = null;
        }
        _$IsEmpty$_() {
            return this._$_instances$_._$IsEmpty$_();
        }
        _$Insert$_(t) {
            this._$_instances$_._$Add$_(t);
        }
        _$Remove$_(t) {
            this._$_instances$_._$Delete$_(t);
        }
        _$Dump$_(t) {
            Ia._$appendArray$_(t, this._$_instances$_._$GetArray$_());
        }
    };
}

{
    const _a = self._$C3$_;
    _a._$Ray$_ = class {
        constructor() {
            this.x1 = 0, this.y1 = 0, this.x2 = 0, this.y2 = 0, this.dx = 0, this.dy = 0, 
            this.rect = new _a.Rect(), this._$hitFraction$_ = 2, this._$hitUid$_ = null, 
            this._$hitNormal$_ = 0, this._$hitNormalDx$_ = 0, this._$hitNormalDy$_ = 0, 
            this._$hitX$_ = 0, this._$hitY$_ = 0, this._$distance$_ = 0, this._$normalX$_ = 1, 
            this._$normalY$_ = 0, this._$reflectionX$_ = 1, this._$reflectionY$_ = 0;
        }
        _$DidCollide$_() {
            return this._$hitFraction$_ < 1 + 1e-6;
        }
        _$Reset$_() {
            this._$hitFraction$_ = 2;
        }
        Set(t, s, i, e) {
            return this.x1 = t, this.y1 = s, this.x2 = i, this.y2 = e, this.dx = i - t, 
            this.dy = e - s, this.rect.set(t, s, i, e), this.rect.normalize(), this._$hitFraction$_ = 2, 
            this._$hitUid$_ = null, this._$hitNormal$_ = 0, this._$hitNormalDx$_ = 0, 
            this._$hitNormalDy$_ = 0, this._$hitX$_ = 0, this._$hitY$_ = 0, this._$distance$_ = 0, 
            this._$normalX$_ = 1, this._$normalY$_ = 0, this._$reflectionX$_ = 1, 
            this._$reflectionY$_ = 0, this;
        }
        _$Complete$_() {
            if (!1 !== this._$DidCollide$_()) {
                const t = this.dx * this._$hitFraction$_, s = this.dy * this._$hitFraction$_, i = _a._$hypot2DFast$_(t, s), e = t / i, n = s / i, h = (this._$distance$_ = i - 1e-6, 
                this._$hitX$_ = this.x1 + e * this._$distance$_, this._$hitY$_ = this.y1 + n * this._$distance$_, 
                this._$hitNormal$_ = Math.atan2(this._$hitNormalDy$_, this._$hitNormalDx$_) + Math.PI / 2, 
                this._$normalX$_ = Math.cos(this._$hitNormal$_), this._$normalY$_ = Math.sin(this._$hitNormal$_), 
                e * this._$normalX$_ + n * this._$normalY$_);
                if (this._$reflectionX$_ = e - 2 * this._$normalX$_ * h, this._$reflectionY$_ = n - 2 * this._$normalY$_ * h, 
                0 < h) {
                    const r = Math.PI;
                    this._$hitNormal$_ = _a._$clampAngle$_(this._$hitNormal$_ + r), 
                    this._$normalX$_ = -this._$normalX$_, this._$normalY$_ = -this._$normalY$_;
                }
            }
        }
        _$TestInstanceSegment$_(t, s, i, e, n) {
            const h = _a._$rayIntersect$_(this.x1, this.y1, this.x2, this.y2, s, i, e, n);
            0 <= h && h < this._$hitFraction$_ && (this._$hitFraction$_ = h, this._$hitUid$_ = t._$GetUID$_(), 
            this._$hitNormalDx$_ = s - e, this._$hitNormalDy$_ = i - n);
        }
        _$TestInstanceRect$_(t, s, i, e) {
            const n = s + e._$getLeft$_(), h = s + e._$getRight$_(), r = i + e._$getTop$_(), o = i + e._$getBottom$_();
            this._$TestInstanceSegment$_(t, n, r, h, r), this._$TestInstanceSegment$_(t, h, r, h, o), 
            this._$TestInstanceSegment$_(t, h, o, n, o), this._$TestInstanceSegment$_(t, n, o, n, r);
        }
        _$TestInstanceQuad$_(t, s) {
            const i = s._$getTlx$_(), e = s._$getTly$_(), n = s._$getTrx$_(), h = s._$getTry$_(), r = s._$getBrx$_(), o = s._$getBry$_(), a = s._$getBlx$_(), l = s._$getBly$_();
            this._$TestInstanceSegment$_(t, i, e, n, h), this._$TestInstanceSegment$_(t, n, h, r, o), 
            this._$TestInstanceSegment$_(t, r, o, a, l), this._$TestInstanceSegment$_(t, a, l, i, e);
        }
        _$TestInstancePoly$_(i, e, n, t) {
            const h = t._$pointsArr$_();
            for (let t = 0, s = h.length; t < s; t += 2) {
                const r = (t + 2) % s, o = h[t] + e, a = h[t + 1] + n, l = h[r] + e, u = h[1 + r] + n;
                this._$TestInstanceSegment$_(i, o, a, l, u);
            }
        }
    };
}

{
    const v = self._$C3$_, Ea = new Set([ "off", "crop", "scale-inner", "scale-outer", "letterbox-scale", "letterbox-integer-scale" ]), Na = new Set([ "high", "low" ]), Da = self._$glMatrix$_, vn = Da._$mat4$_, Cn = Da._$vec3$_, Aa = vn.create(), La = v._$New$_(v._$Quad$_), C = v._$New$_(v.Rect);
    v._$CanvasManager$_ = class extends v._$DefendedBase$_ {
        constructor(t) {
            super(), this._$_runtime$_ = t, this._$_canvasLayers$_ = [], this._$_isWebGPUEnabled$_ = !1, 
            this._$_webglRenderer$_ = null, this._$_webgpuRenderer$_ = null, this._$_iRenderer$_ = null, 
            this._$_gpuPreference$_ = "high-performance", this._$_isLimitedToWebGL1$_ = !1, 
            this._$_multitexturingMode$_ = "auto", this._$_windowInnerWidth$_ = 0, 
            this._$_windowInnerHeight$_ = 0, this._$_cssDisplayMode$_ = "", this._$_canvasCssWidth$_ = 0, 
            this._$_canvasCssHeight$_ = 0, this._$_canvasDeviceWidth$_ = 0, this._$_canvasDeviceHeight$_ = 0, 
            this._$_canvasCssOffsetX$_ = 0, this._$_canvasCssOffsetY$_ = 0, this._$_zAxisScale$_ = "normalized", 
            this._$_initFieldOfView$_ = 0, this._$_zNear$_ = 1, this._$_zFar$_ = 1e4, 
            this._$_enableMipmaps$_ = !0, this._$_textureAnisotropy$_ = 0, this._$_drawWidth$_ = 0, 
            this._$_drawHeight$_ = 0, this._$_fullscreenMode$_ = "letterbox-scale", 
            this._$_documentFullscreenMode$_ = "letterbox-scale", this._$_deviceTransformOffX$_ = 0, 
            this._$_deviceTransformOffY$_ = 0, this._$_defaultProjectionMatrix$_ = vn.create(), 
            this._$_wantFullscreenScalingQuality$_ = "high", this._$_fullscreenScalingQuality$_ = this._$_wantFullscreenScalingQuality$_, 
            this._$_isDocumentFullscreen$_ = !1, this._$_availableAdditionalRenderTargets$_ = [], 
            this._$_usedAdditionalRenderTargets$_ = new Set(), this._$_shaderData$_ = self.C3_Shaders, 
            this._$_effectChainManager$_ = v._$New$_(v._$Gfx$_._$EffectChainManager$_, {
                _$getDrawSize$_: () => [ this._$GetDrawWidth$_(), this._$GetDrawHeight$_() ],
                _$getRenderTarget$_: () => this._$GetEffectCompositorRenderTarget$_(),
                _$releaseRenderTarget$_: t => this._$ReleaseEffectCompositorRenderTarget$_(t),
                getTime: () => this._$GetRuntime$_()._$GetGameTime$_(),
                _$redraw$_: () => this._$GetRuntime$_()._$UpdateRender$_()
            }), this._$_gpuTimeStartFrame$_ = 0, this._$_gpuTimeEndFrame$_ = 0, 
            this._$_gpuLastUtilisation$_ = NaN, this._$_gpuFrameTimingsBuffer$_ = null, 
            this._$_layersGpuProfile$_ = new Map(), this._$_gpuCurUtilisation$_ = NaN, 
            this._$_webgpuFrameTimings$_ = new Map(), this._$_snapshotFormat$_ = "", 
            this._$_snapshotQuality$_ = 1, this._$_snapshotArea$_ = v._$New$_(v.Rect), 
            this._$_snapshotUrl$_ = "", this._$_snapshotPromise$_ = null, this._$_snapshotResolve$_ = null, 
            this._$_isPastingToDrawingCanvas$_ = 0, this._$_loaderStartTime$_ = 0, 
            this._$_rafId$_ = -1, this._$_loadingProgress$_ = 0, this._$_loadingprogress_handler$_ = t => this._$_loadingProgress$_ = t.progress, 
            this._$_percentText$_ = null, this._$_splashTextures$_ = {
                _$logo$_: null,
                _$powered$_: null,
                _$website$_: null
            }, this._$_splashFrameNumber$_ = 0, this._$_splashFadeInFinishTime$_ = 0, 
            this._$_splashFadeOutStartTime$_ = 0, this._$_splashState$_ = "fade-in", 
            this._$_splashDoneResolve$_ = null, this._$_splashDonePromise$_ = new Promise(t => this._$_splashDoneResolve$_ = t);
        }
        _$_SetGPUPowerPreference$_(t) {
            this._$_gpuPreference$_ = t;
        }
        _$_SetWebGPUEnabled$_(t) {
            this._$_isWebGPUEnabled$_ = !!t;
        }
        _$_SetZAxisScale$_(t) {
            this._$_zAxisScale$_ = t;
        }
        _$GetZAxisScale$_() {
            return this._$_zAxisScale$_;
        }
        _$_SetInitFieldOfView$_(t) {
            this._$_initFieldOfView$_ = t;
        }
        _$_SetZDistances$_(t, s) {
            this._$_zNear$_ = t, this._$_zFar$_ = s;
        }
        _$_SetLimitedToWebGL1$_(t) {
            this._$_isLimitedToWebGL1$_ = !!t;
        }
        _$_SetMultitexturingMode$_(t) {
            this._$_multitexturingMode$_ = t;
        }
        async _$CreateCanvas$_(t) {
            let s = t.canvas, i = (this._$_canvasLayers$_.push({
                canvas: s,
                _$ctx$_: null
            }), this._$_runtime$_._$AddDOMComponentMessageHandler$_("runtime", "window-resize", t => this._$_OnWindowResize$_(t)), 
            this._$_runtime$_._$AddDOMComponentMessageHandler$_("runtime", "fullscreenchange", t => this._$_OnFullscreenChange$_(t)), 
            this._$_runtime$_._$AddDOMComponentMessageHandler$_("runtime", "fullscreenerror", t => this._$_OnFullscreenError$_(t)), 
            s.addEventListener("webglcontextlost", t => this._$_OnWebGLContextLost$_(t)), 
            s.addEventListener("webglcontextrestored", t => this._$_OnWebGLContextRestored$_(t)), 
            this._$_isDocumentFullscreen$_ = !!t.isFullscreen, this._$_cssDisplayMode$_ = t.cssDisplayMode, 
            navigator.gpu && this._$_isWebGPUEnabled$_), e = !1;
            if (i) try {
                await this._$_InitWebGPUContext$_(!0);
            } catch (t) {
                this._$_MaybeLogRendererError$_("WebGPU", t), this._$_webgpuRenderer$_ = null;
            }
            if (!this._$GetRenderer$_()) try {
                await this._$_InitWebGLContext$_(!0);
            } catch (t) {
                this._$_MaybeLogRendererError$_("WebGL", t), this._$_webglRenderer$_ = null;
            }
            if (this._$GetRenderer$_() || (e = !0), !this._$GetRenderer$_() && i) try {
                await this._$_InitWebGPUContext$_(!1);
            } catch (t) {
                this._$_MaybeLogRendererError$_("WebGPU", t), this._$_webgpuRenderer$_ = null;
            }
            if (!this._$GetRenderer$_()) try {
                await this._$_InitWebGLContext$_(!1);
            } catch (t) {
                this._$_MaybeLogRendererError$_("WebGL", t), this._$_webglRenderer$_ = null;
            }
            const n = this._$GetRenderer$_();
            if (!n) throw new Error("failed to acquire a renderer - check WebGL or WebGPU is supported");
            n._$SetHasMajorPerformanceCaveat$_(e), this._$_webgpuRenderer$_ && (this._$_webgpuRenderer$_._$ondevicelost$_ = () => this._$_OnWebGPUDeviceLost$_(), 
            this._$_webgpuRenderer$_._$ondevicerestored$_ = () => this._$_OnWebGPUDeviceRestored$_()), 
            "normalized" === this._$_zAxisScale$_ ? n._$SetZAxisScaleNormalized$_() : (n._$SetZAxisScaleRegular$_(), 
            n._$SetFovY$_(this._$_initFieldOfView$_)), this._$SetSize$_(t.windowInnerWidth, t.windowInnerHeight, !0), 
            await this._$_InitRenderer$_();
        }
        _$_MaybeLogRendererError$_(t, s) {
            s && "string" == typeof s.message && s.message.startsWith("renderer-unavailable") || console.error(`Error creating ${t} renderer: `, s);
        }
        async _$_InitWebGPUContext$_(t) {
            let s = {
                _$nearZ$_: this._$_zNear$_,
                _$farZ$_: this._$_zFar$_
            }, i = !0;
            "no" === this._$_multitexturingMode$_ ? i = !1 : "auto" === this._$_multitexturingMode$_ && (i = v._$Platform$_._$IsDesktop$_);
            const e = {
                powerPreference: this._$_gpuPreference$_,
                depth: this._$_runtime$_._$Uses3DFeatures$_(),
                failIfMajorPerformanceCaveat: t,
                _$usesBackgroundBlending$_: this._$_runtime$_._$UsesAnyBackgroundBlending$_(),
                _$canSampleBackbuffer$_: this._$_runtime$_._$UsesAnyCrossSampling$_(),
                _$canSampleDepth$_: this._$_runtime$_._$UsesAnyDepthSampling$_(),
                _$isMultiTexturingAllowed$_: i
            };
            this._$_webgpuRenderer$_ = v._$New$_(v._$Gfx$_.WebGPURenderer, s), await this._$_webgpuRenderer$_._$Create$_(this._$_canvasLayers$_[0].canvas, e);
        }
        async _$_InitWebGLContext$_(t) {
            const s = {
                alpha: !0,
                powerPreference: this._$_gpuPreference$_,
                _$enableGpuProfiling$_: "xbox-uwp-webview2" !== this._$_runtime$_._$GetExportType$_(),
                depth: this._$_runtime$_._$Uses3DFeatures$_(),
                _$canSampleDepth$_: this._$_runtime$_._$UsesAnyDepthSampling$_(),
                failIfMajorPerformanceCaveat: t,
                _$nearZ$_: this._$_zNear$_,
                _$farZ$_: this._$_zFar$_
            };
            this._$_isLimitedToWebGL1$_ && (s._$maxWebGLVersion$_ = 1), this._$_webglRenderer$_ = v._$New$_(v._$Gfx$_._$WebGLRenderer$_, this._$_canvasLayers$_[0].canvas, s), 
            await this._$_webglRenderer$_._$InitState$_();
        }
        async _$_InitWebGPU$_() {
            if (this._$_shaderData$_) {
                const t = [];
                for (const [ s, i ] of Object.entries(this._$_shaderData$_)) {
                    i.src = i._$wgsl$_;
                    const e = v._$Gfx$_.WebGPUShaderProgram._$GetDefaultVertexShaderSource$_();
                    t.push(this._$_webgpuRenderer$_._$CreateShaderProgram$_(Object.assign({
                        _$vertexSrc$_: e,
                        name: s
                    }, i)));
                }
                await Promise.all(t);
            }
        }
        async _$_InitWebGL$_() {
            if (this._$_shaderData$_) {
                const s = [];
                for (const [ i, e ] of Object.entries(this._$_shaderData$_)) {
                    let t;
                    if (e._$glslWebGL2$_ && 2 <= this._$_webglRenderer$_._$GetWebGLVersionNumber$_()) e.src = e._$glslWebGL2$_, 
                    t = v._$Gfx$_._$WebGLShaderProgram$_._$GetDefaultVertexShaderSource_WebGL2$_(); else {
                        if (!e._$glsl$_) throw new Error(`shader '${i}' does not support WebGL 1`);
                        e.src = e._$glsl$_, t = v._$Gfx$_._$WebGLShaderProgram$_._$GetDefaultVertexShaderSource$_();
                    }
                    s.push(this._$_webglRenderer$_._$CreateShaderProgram$_(Object.assign({
                        _$vertexSrc$_: t,
                        name: i
                    }, e)));
                }
                await Promise.all(s), this._$_webglRenderer$_._$ResetLastProgram$_(), 
                this._$_webglRenderer$_._$SetTextureFillMode$_();
            }
            this._$_webglRenderer$_._$SupportsGPUProfiling$_() && (this._$_gpuFrameTimingsBuffer$_ = v._$New$_(v._$Gfx$_._$WebGLQueryResultBuffer$_, this._$_webglRenderer$_));
        }
        async _$_InitRenderer$_() {
            this._$_webgpuRenderer$_ ? await this._$_InitWebGPU$_() : this._$_webglRenderer$_ && await this._$_InitWebGL$_();
            const t = this._$GetRenderer$_();
            t._$SetMipmapsEnabled$_(this._$_enableMipmaps$_), t._$SupportsGPUProfiling$_() && (this._$_gpuLastUtilisation$_ = 0);
            for (const s of this._$_runtime$_._$_GetAllEffectLists$_()) {
                for (const i of s._$GetAllEffectTypes$_()) i._$_InitRenderer$_(t);
                s._$_InitRenderer$_(t), s._$UpdateActiveEffects$_();
            }
            this._$_iRenderer$_ = new self._$IRenderer$_(this._$_runtime$_, t);
        }
        _$Release$_() {
            this._$_runtime$_ = null, this._$_webglRenderer$_ = null, this._$_canvasLayers$_.length = 0;
        }
        _$IsInWorker$_() {
            return this._$_runtime$_._$IsInWorker$_();
        }
        _$_OnWindowResize$_(t) {
            const s = this._$_runtime$_;
            if (!s._$IsExportToVideo$_()) {
                const i = t.devicePixelRatio, e = (this._$IsInWorker$_() && (self.devicePixelRatio = i), 
                s._$_SetDevicePixelRatio$_(i), this._$_isDocumentFullscreen$_ = !!t.isFullscreen, 
                this._$_cssDisplayMode$_ = t.cssDisplayMode, this._$SetSize$_(t.innerWidth, t.innerHeight), 
                s._$UpdateRender$_(), new v.Event("window-resize")), n = (e.data = t, 
                s._$Dispatcher$_()._$dispatchEventAndWaitAsyncSequential$_(e), new v.Event("resize"));
                n._$cssWidth$_ = this._$GetCssWidth$_(), n._$cssHeight$_ = this._$GetCssHeight$_(), 
                n._$deviceWidth$_ = this._$GetDeviceWidth$_(), n._$deviceHeight$_ = this._$GetDeviceHeight$_(), 
                s._$DispatchUserScriptEvent$_(n), s._$IsDebug$_() && (s._$HitBreakpoint$_() || self.C3Debugger.IsDebuggerPaused()) && s._$Render$_();
            }
        }
        _$_OnFullscreenChange$_(t) {
            this._$_isDocumentFullscreen$_ = !!t.isFullscreen, this._$SetSize$_(t.innerWidth, t.innerHeight, !0), 
            this._$_runtime$_._$UpdateRender$_();
        }
        _$_OnFullscreenError$_(t) {
            this._$_isDocumentFullscreen$_ = !!t.isFullscreen, this._$SetSize$_(t.innerWidth, t.innerHeight, !0), 
            this._$_runtime$_._$UpdateRender$_();
        }
        _$SetSize$_(t, s, i = !1) {
            if (t = Math.floor(t), s = Math.floor(s), t <= 0 || s <= 0) throw new Error("invalid size");
            if (this._$_windowInnerWidth$_ !== t || this._$_windowInnerHeight$_ !== s || i) {
                this._$_windowInnerWidth$_ = t, this._$_windowInnerHeight$_ = s;
                const e = this._$GetCurrentFullscreenMode$_();
                "letterbox-scale" === e ? this._$_CalculateLetterboxScale$_(t, s) : "letterbox-integer-scale" === e ? this._$_CalculateLetterboxIntegerScale$_(t, s) : "off" === e ? this._$_CalculateFixedSizeCanvas$_(t, s) : this._$_CalculateFullsizeCanvas$_(t, s), 
                this._$_UpdateFullscreenScalingQuality$_(e);
                for (const {
                    canvas: r
                } of this._$_canvasLayers$_) r.width = this._$_canvasDeviceWidth$_, 
                r.height = this._$_canvasDeviceHeight$_;
                this._$_runtime$_._$PostComponentMessageToDOM$_("canvas", "update-size", {
                    marginLeft: this._$_canvasCssOffsetX$_,
                    marginTop: this._$_canvasCssOffsetY$_,
                    styleWidth: this._$_canvasCssWidth$_,
                    styleHeight: this._$_canvasCssHeight$_,
                    displayScale: this._$GetDisplayScale$_()
                });
                const n = this._$GetRenderer$_();
                n._$SetSize$_(this._$_canvasDeviceWidth$_, this._$_canvasDeviceHeight$_, !0);
                for (const o of this._$_availableAdditionalRenderTargets$_) n._$DeleteRenderTarget$_(o);
                v._$clearArray$_(this._$_availableAdditionalRenderTargets$_), this._$UpdateDefaultProjectionMatrix$_();
                const h = this._$_runtime$_._$GetLayoutManager$_();
                h._$SetAllLayerProjectionChanged$_(), h._$SetAllLayerMVChanged$_();
            }
        }
        _$UpdateDefaultProjectionMatrix$_() {
            this._$GetRenderer$_()._$CalculatePerspectiveMatrix$_(this._$_defaultProjectionMatrix$_, this._$GetDrawWidth$_() / this._$GetDrawHeight$_());
        }
        _$GetDefaultProjectionMatrix$_() {
            return this._$_defaultProjectionMatrix$_;
        }
        _$_CalculateLetterboxScale$_(t, s) {
            const i = this._$_runtime$_._$GetDevicePixelRatio$_(), e = this._$_runtime$_._$GetOriginalViewportWidth$_(), n = this._$_runtime$_._$GetOriginalViewportHeight$_(), h = e / n, r = t / s;
            if (h < r) {
                const o = s * h;
                this._$_canvasCssWidth$_ = Math.round(o), this._$_canvasCssHeight$_ = s, 
                this._$_canvasCssOffsetX$_ = Math.floor((t - this._$_canvasCssWidth$_) / 2), 
                this._$_canvasCssOffsetY$_ = 0;
            } else {
                const a = t / h;
                this._$_canvasCssWidth$_ = t, this._$_canvasCssHeight$_ = Math.round(a), 
                this._$_canvasCssOffsetX$_ = 0, this._$_canvasCssOffsetY$_ = Math.floor((s - this._$_canvasCssHeight$_) / 2);
            }
            this._$_canvasDeviceWidth$_ = Math.round(this._$_canvasCssWidth$_ * i), 
            this._$_canvasDeviceHeight$_ = Math.round(this._$_canvasCssHeight$_ * i), 
            this._$_runtime$_._$SetViewportSize$_(e, n);
        }
        _$_CalculateLetterboxIntegerScale$_(t, s) {
            let i = this._$_runtime$_._$GetDevicePixelRatio$_(), e = (1 !== i && (t += 1, 
            s += 1), this._$_runtime$_._$GetOriginalViewportWidth$_()), n = this._$_runtime$_._$GetOriginalViewportHeight$_(), h = e / n, r = t / s, o;
            if (h < r) {
                const a = s * h;
                o = a * i / e;
            } else {
                const l = t / h;
                o = l * i / n;
            }
            1 < o ? o = Math.floor(o) : o < 1 && (o = 1 / Math.ceil(1 / o)), this._$_canvasDeviceWidth$_ = Math.round(e * o), 
            this._$_canvasDeviceHeight$_ = Math.round(n * o), this._$_canvasCssWidth$_ = this._$_canvasDeviceWidth$_ / i, 
            this._$_canvasCssHeight$_ = this._$_canvasDeviceHeight$_ / i, this._$_canvasCssOffsetX$_ = Math.max(Math.floor((t - this._$_canvasCssWidth$_) / 2), 0), 
            this._$_canvasCssOffsetY$_ = Math.max(Math.floor((s - this._$_canvasCssHeight$_) / 2), 0), 
            this._$_runtime$_._$SetViewportSize$_(e, n);
        }
        _$_CalculateFullsizeCanvas$_(t, s) {
            const i = this._$_runtime$_._$GetDevicePixelRatio$_(), e = (this._$_canvasCssWidth$_ = t, 
            this._$_canvasCssHeight$_ = s, this._$_canvasDeviceWidth$_ = Math.round(this._$_canvasCssWidth$_ * i), 
            this._$_canvasDeviceHeight$_ = Math.round(this._$_canvasCssHeight$_ * i), 
            this._$_canvasCssOffsetX$_ = 0, this._$_canvasCssOffsetY$_ = 0, this._$GetDisplayScale$_());
            this._$_runtime$_._$SetViewportSize$_(this._$_canvasCssWidth$_ / e, this._$_canvasCssHeight$_ / e);
        }
        _$_CalculateFixedSizeCanvas$_(t, s) {
            const i = this._$_runtime$_._$GetDevicePixelRatio$_();
            this._$_canvasCssWidth$_ = this._$_runtime$_._$GetViewportWidth$_(), 
            this._$_canvasCssHeight$_ = this._$_runtime$_._$GetViewportHeight$_(), 
            this._$_canvasDeviceWidth$_ = Math.round(this._$_canvasCssWidth$_ * i), 
            this._$_canvasDeviceHeight$_ = Math.round(this._$_canvasCssHeight$_ * i), 
            this._$IsDocumentFullscreen$_() ? (this._$_canvasCssOffsetX$_ = Math.floor((t - this._$_canvasCssWidth$_) / 2), 
            this._$_canvasCssOffsetY$_ = Math.floor((s - this._$_canvasCssHeight$_) / 2)) : (this._$_canvasCssOffsetX$_ = 0, 
            this._$_canvasCssOffsetY$_ = 0), this._$_runtime$_._$SetViewportSize$_(this._$_runtime$_._$GetViewportWidth$_(), this._$_runtime$_._$GetViewportHeight$_());
        }
        _$_UpdateFullscreenScalingQuality$_(i) {
            if ("high" === this._$_wantFullscreenScalingQuality$_) this._$_drawWidth$_ = this._$_canvasDeviceWidth$_, 
            this._$_drawHeight$_ = this._$_canvasDeviceHeight$_, this._$_fullscreenScalingQuality$_ = "high"; else {
                let t, s;
                if (s = "off" === this._$GetCurrentFullscreenMode$_() ? (t = this._$_runtime$_._$GetViewportWidth$_(), 
                this._$_runtime$_._$GetViewportHeight$_()) : (t = this._$_runtime$_._$GetOriginalViewportWidth$_(), 
                this._$_runtime$_._$GetOriginalViewportHeight$_()), this._$_canvasDeviceWidth$_ < t || this._$_canvasDeviceHeight$_ < s) this._$_drawWidth$_ = this._$_canvasDeviceWidth$_, 
                this._$_drawHeight$_ = this._$_canvasDeviceHeight$_, this._$_fullscreenScalingQuality$_ = "high"; else if (this._$_drawWidth$_ = t, 
                this._$_drawHeight$_ = s, this._$_fullscreenScalingQuality$_ = "low", 
                "scale-inner" === i) {
                    const e = t / s, n = this._$_windowInnerWidth$_ / this._$_windowInnerHeight$_;
                    n < e ? this._$_drawWidth$_ = this._$_drawHeight$_ * n : e < n && (this._$_drawHeight$_ = this._$_drawWidth$_ / n);
                } else if ("scale-outer" === i) {
                    const h = t / s, r = this._$_windowInnerWidth$_ / this._$_windowInnerHeight$_;
                    h < r ? this._$_drawWidth$_ = this._$_drawHeight$_ * r : r < h && (this._$_drawHeight$_ = this._$_drawWidth$_ / r);
                }
            }
        }
        _$GetRuntime$_() {
            return this._$_runtime$_;
        }
        _$GetMainCanvas$_() {
            return this._$_canvasLayers$_[0].canvas;
        }
        _$GetEffectChainManager$_() {
            return this._$_effectChainManager$_;
        }
        _$IsDocumentFullscreen$_() {
            return this._$_isDocumentFullscreen$_;
        }
        _$GetCssDisplayMode$_() {
            return this._$_cssDisplayMode$_;
        }
        _$SetFullscreenMode$_(t) {
            if (!Ea.has(t)) throw new Error("invalid fullscreen mode");
            this._$_fullscreenMode$_ = t;
            const s = this._$_runtime$_._$GetLayoutManager$_();
            s._$SetAllLayerProjectionChanged$_(), s._$SetAllLayerMVChanged$_();
        }
        _$GetFullscreenMode$_() {
            return this._$_fullscreenMode$_;
        }
        _$SetDocumentFullscreenMode$_(t) {
            if (!Ea.has(t)) throw new Error("invalid fullscreen mode");
            this._$_documentFullscreenMode$_ = t;
            const s = this._$_runtime$_._$GetLayoutManager$_();
            s._$SetAllLayerProjectionChanged$_(), s._$SetAllLayerMVChanged$_();
        }
        _$GetDocumentFullscreenMode$_() {
            return this._$_documentFullscreenMode$_;
        }
        _$GetCurrentFullscreenMode$_() {
            return this._$IsDocumentFullscreen$_() ? this._$GetDocumentFullscreenMode$_() : this._$GetFullscreenMode$_();
        }
        _$SetFullscreenScalingQuality$_(t) {
            if (!Na.has(t)) throw new Error("invalid fullscreen scaling quality");
            this._$_wantFullscreenScalingQuality$_ = t, this._$_runtime$_._$GetLayoutManager$_()._$SetAllLayerProjectionChanged$_();
        }
        _$GetSetFullscreenScalingQuality$_() {
            return this._$_wantFullscreenScalingQuality$_;
        }
        _$GetCurrentFullscreenScalingQuality$_() {
            return this._$_fullscreenScalingQuality$_;
        }
        static _$_FullscreenModeNumberToString$_(t) {
            switch (t) {
              case 0:
                return "off";

              case 1:
                return "crop";

              case 2:
                return "scale-inner";

              case 3:
                return "scale-outer";

              case 4:
                return "letterbox-scale";

              case 5:
                return "letterbox-integer-scale";

              default:
                throw new Error("invalid fullscreen mode");
            }
        }
        _$GetLastWidth$_() {
            return this._$_windowInnerWidth$_;
        }
        _$GetLastHeight$_() {
            return this._$_windowInnerHeight$_;
        }
        _$GetDrawWidth$_() {
            return this._$_drawWidth$_;
        }
        _$GetDrawHeight$_() {
            return this._$_drawHeight$_;
        }
        _$SetMipmapsEnabled$_(t) {
            this._$_enableMipmaps$_ = !!t;
        }
        _$_SetTextureAnisotropy$_(t) {
            this._$_textureAnisotropy$_ = t;
        }
        _$GetTextureAnisotropy$_() {
            return this._$_textureAnisotropy$_;
        }
        _$IsRendererContextLost$_() {
            return this._$GetRenderer$_()._$IsContextLost$_();
        }
        _$_OnWebGLContextLost$_(t) {
            console.log("[Construct] WebGL context lost"), t.preventDefault(), this._$_availableAdditionalRenderTargets$_ = [], 
            this._$_usedAdditionalRenderTargets$_.clear(), this._$_effectChainManager$_._$OnContextLost$_(), 
            this._$_webglRenderer$_._$OnContextLost$_(), this._$_runtime$_._$_OnRendererContextLost$_();
        }
        _$_OnWebGPUDeviceLost$_() {
            console.log("[Construct] WebGPU device lost"), this._$_availableAdditionalRenderTargets$_ = [], 
            this._$_usedAdditionalRenderTargets$_.clear(), this._$_effectChainManager$_._$OnContextLost$_(), 
            this._$_runtime$_._$_OnRendererContextLost$_();
        }
        async _$_OnWebGLContextRestored$_(t) {
            await this._$_webglRenderer$_._$OnContextRestored$_(), await this._$_InitRenderer$_(), 
            await this._$_runtime$_._$_OnRendererContextRestored$_(), console.log("[Construct] WebGL context restored");
        }
        async _$_OnWebGPUDeviceRestored$_() {
            await this._$_InitRenderer$_(), await this._$_runtime$_._$_OnRendererContextRestored$_(), 
            console.log("[Construct] WebGPU device restored");
        }
        _$GetWebGLRenderer$_() {
            return this._$_webglRenderer$_;
        }
        _$GetWebGPURenderer$_() {
            return this._$_webgpuRenderer$_;
        }
        _$GetRenderer$_() {
            return this._$_webgpuRenderer$_ || this._$_webglRenderer$_;
        }
        _$GetIRenderer$_() {
            return this._$_iRenderer$_;
        }
        _$GetRendererString$_() {
            let t = "";
            return t = this._$_runtime$_._$GetWebGPURenderer$_() ? "webgpu" : "webgl" + this._$_runtime$_._$GetWebGLRenderer$_()._$GetWebGLVersionNumber$_(), 
            this._$_runtime$_._$GetRenderer$_()._$HasMajorPerformanceCaveat$_() && (t += "-software"), 
            t;
        }
        _$GetRendererDetailString$_() {
            return this._$_runtime$_._$GetWebGPURenderer$_() ? this._$_runtime$_._$GetWebGPURenderer$_().GetAdapterInfoString() : this._$_runtime$_._$GetWebGLRenderer$_()._$GetUnmaskedRenderer$_();
        }
        _$GetRenderScale$_() {
            return "low" === this._$_fullscreenScalingQuality$_ ? 1 / this._$_runtime$_._$GetDevicePixelRatio$_() : this._$GetDisplayScale$_();
        }
        _$GetDisplayScale$_() {
            const t = this._$GetCurrentFullscreenMode$_();
            if ("off" === t || "crop" === t) return 1;
            const s = this._$_runtime$_._$GetOriginalViewportWidth$_(), i = this._$_runtime$_._$GetOriginalViewportHeight$_(), e = s / i, n = this._$_canvasDeviceWidth$_ / this._$_canvasDeviceHeight$_;
            return "scale-inner" !== t && e < n || "scale-inner" === t && n < e ? this._$_canvasCssHeight$_ / i : this._$_canvasCssWidth$_ / s;
        }
        _$GetEffectLayerScaleParam$_() {
            return "low" === this._$GetCurrentFullscreenScalingQuality$_() ? 1 : this._$GetDisplayScale$_();
        }
        _$GetEffectDevicePixelRatioParam$_() {
            return "low" === this._$GetCurrentFullscreenScalingQuality$_() ? 1 : this._$_runtime$_._$GetDevicePixelRatio$_();
        }
        _$SetDeviceTransformOffset$_(t, s) {
            this._$_deviceTransformOffX$_ = t, this._$_deviceTransformOffY$_ = s;
        }
        _$SetDeviceTransform$_(s, i, e, t = !0) {
            i = i || this._$_drawWidth$_, e = e || this._$_drawHeight$_;
            const n = i / 2 + this._$_deviceTransformOffX$_, h = e / 2 + this._$_deviceTransformOffY$_;
            if (t) {
                let t = this._$GetDefaultProjectionMatrix$_();
                i === this._$_drawWidth$_ && e === this._$_drawHeight$_ || (s._$CalculatePerspectiveMatrix$_(Aa, i / e), 
                t = Aa), s._$SetProjectionMatrix$_(t);
            }
            const r = s._$CalculateLookAtModelView2$_(n, h, s._$GetDefaultCameraZ$_(e), n, h, 0, e);
            s._$SetModelViewMatrix$_(r);
        }
        _$SetCssTransform$_(t, s = !0) {
            const i = this._$GetCssWidth$_(), e = this._$GetCssHeight$_(), n = i / 2, h = e / 2, r = (s && t._$SetProjectionMatrix$_(this._$GetDefaultProjectionMatrix$_()), 
            t._$CalculateLookAtModelView2$_(n, h, t._$GetDefaultCameraZ$_(e), n, h, 0, e));
            t._$SetModelViewMatrix$_(r);
        }
        _$GetDeviceWidth$_() {
            return this._$_canvasDeviceWidth$_;
        }
        _$GetDeviceHeight$_() {
            return this._$_canvasDeviceHeight$_;
        }
        _$GetCssWidth$_() {
            return this._$_canvasCssWidth$_;
        }
        _$GetCssHeight$_() {
            return this._$_canvasCssHeight$_;
        }
        _$GetCanvasClientX$_() {
            return this._$_canvasCssOffsetX$_;
        }
        _$GetCanvasClientY$_() {
            return this._$_canvasCssOffsetY$_;
        }
        _$GetHTMLLayerCount$_() {
            return this._$_canvasLayers$_.length;
        }
        _$_CanUseImageBitmapRenderingContext$_() {
            return "undefined" != typeof OffscreenCanvas && this._$GetMainCanvas$_() instanceof OffscreenCanvas && ("Chromium" !== v._$Platform$_._$BrowserEngine$_ || 124 <= v._$Platform$_._$BrowserVersionNumber$_);
        }
        async _$SetHTMLLayerCount$_(e, n = !1) {
            if (e < 1) throw new Error("invalid HTML layer count");
            if (this._$_canvasLayers$_.length !== e) {
                let t = this._$_runtime$_._$GetLayoutManager$_()._$GetMainRunningLayout$_(), s = {
                    count: e,
                    layersDomState: t._$_GetRootLayers$_().filter(t => t._$IsHTMLElementsLayer$_()).map(t => t._$_GetHTMLLayerDOMState$_()),
                    immediate: n,
                    marginLeft: this._$_canvasCssOffsetX$_,
                    marginTop: this._$_canvasCssOffsetY$_,
                    styleWidth: this._$_canvasCssWidth$_,
                    styleHeight: this._$_canvasCssHeight$_
                }, i;
                if (i = this._$IsInWorker$_() ? await this._$_runtime$_._$PostComponentMessageToDOMAsync$_("canvas", "set-html-layer-count", s) : self.c3_runtimeInterface._OnSetHTMLLayerCount(s), 
                e < this._$_canvasLayers$_.length) this._$_canvasLayers$_.length = e; else for (const h of i.addedCanvases) {
                    h.width = this._$_canvasDeviceWidth$_, h.height = this._$_canvasDeviceHeight$_;
                    const r = this._$_CanUseImageBitmapRenderingContext$_() ? "bitmaprenderer" : "2d", o = h.getContext(r);
                    if (!o) throw new Error(`failed to acquire '${r}' canvas context`);
                    this._$_canvasLayers$_.push({
                        canvas: h,
                        _$ctx$_: o
                    });
                }
                this._$_runtime$_._$UpdateRender$_();
            }
        }
        _$BlitMainCanvasToHTMLLayerCanvas$_(t) {
            if (!(t >= this._$_canvasLayers$_.length)) {
                const s = this._$GetMainCanvas$_(), i = this._$_canvasLayers$_[t]._$ctx$_;
                this._$_CanUseImageBitmapRenderingContext$_() ? i.transferFromImageBitmap(s.transferToImageBitmap()) : (i.globalCompositeOperation = "copy", 
                i.drawImage(s, 0, 0));
            }
        }
        _$GetAdditionalRenderTarget$_(s) {
            s.depth = this._$_runtime$_._$Uses3DFeatures$_();
            let t = this._$_availableAdditionalRenderTargets$_, i = t.findIndex(t => t._$IsCompatibleWithOptions$_(s)), e;
            return -1 !== i ? (e = t[i], t.splice(i, 1)) : e = this._$GetRenderer$_()._$CreateRenderTarget$_(s), 
            this._$_usedAdditionalRenderTargets$_.add(e), e;
        }
        _$ReleaseAdditionalRenderTarget$_(t) {
            if (!this._$_usedAdditionalRenderTargets$_.has(t)) throw new Error("render target not in use");
            this._$_usedAdditionalRenderTargets$_.delete(t), this._$_availableAdditionalRenderTargets$_.push(t);
        }
        _$GetEffectCompositorRenderTarget$_() {
            const t = {
                _$sampling$_: this._$_runtime$_._$GetSampling$_()
            };
            return "low" === this._$GetCurrentFullscreenScalingQuality$_() && (t.width = this._$GetDrawWidth$_(), 
            t.height = this._$GetDrawHeight$_()), this._$GetAdditionalRenderTarget$_(t);
        }
        _$ReleaseEffectCompositorRenderTarget$_(t) {
            this._$ReleaseAdditionalRenderTarget$_(t);
        }
        *_$activeLayersGpuProfiles$_() {
            for (const t of this._$_runtime$_._$GetLayoutManager$_()._$runningLayouts$_()) for (const s of t._$GetLayers$_()) {
                const i = this._$_layersGpuProfile$_.get(s);
                i && (yield i);
            }
        }
        _$GetLayerTimingsBuffer$_(t) {
            if (!this._$GetRenderer$_()._$SupportsGPUProfiling$_()) return null;
            let s = this._$_layersGpuProfile$_.get(t);
            return s || (s = {
                _$layer$_: t,
                name: t._$GetName$_(),
                _$timingsBuffer$_: v._$New$_(v._$Gfx$_._$WebGLQueryResultBuffer$_, this._$_webglRenderer$_),
                _$curUtilisation$_: 0,
                _$lastTotalUtilisation$_: 0,
                _$lastSelfUtilisation$_: 0
            }, this._$_layersGpuProfile$_.set(t, s)), s._$timingsBuffer$_;
        }
        _$_Update1sFrameRange$_() {
            const t = this._$GetRenderer$_();
            if (t._$SupportsGPUProfiling$_() && 0 === this._$_gpuTimeEndFrame$_) {
                this._$_gpuTimeEndFrame$_ = t._$GetFrameNumber$_(), this._$_gpuCurUtilisation$_ = NaN;
                for (const s of this._$activeLayersGpuProfiles$_()) s._$curUtilisation$_ = NaN;
            }
        }
        _$_UpdateTick$_() {
            this._$_webglRenderer$_ && this._$_webglRenderer$_._$SupportsGPUProfiling$_() && this._$_UpdateTick_WebGL$_(), 
            this._$_webgpuRenderer$_ && this._$_webgpuRenderer$_._$SupportsGPUProfiling$_() && this._$_UpdateTick_WebGPU$_();
        }
        _$_UpdateTick_WebGL$_() {
            if (isNaN(this._$_gpuCurUtilisation$_) && (this._$_gpuCurUtilisation$_ = this._$_gpuFrameTimingsBuffer$_._$GetFrameRangeResultSum$_(this._$_gpuTimeStartFrame$_, this._$_gpuTimeEndFrame$_), 
            !isNaN(this._$_gpuCurUtilisation$_))) {
                if (this._$_runtime$_._$IsDebug$_()) for (const t of this._$activeLayersGpuProfiles$_()) if (t._$curUtilisation$_ = t._$timingsBuffer$_._$GetFrameRangeResultSum$_(this._$_gpuTimeStartFrame$_, this._$_gpuTimeEndFrame$_), 
                isNaN(t._$curUtilisation$_)) return;
                if (this._$_gpuFrameTimingsBuffer$_._$DeleteAllBeforeFrameNumber$_(this._$_gpuTimeEndFrame$_), 
                this._$_gpuLastUtilisation$_ = Math.min(this._$_gpuCurUtilisation$_, 1), 
                this._$_runtime$_._$IsDebug$_()) {
                    const i = new Map();
                    for (const n of this._$activeLayersGpuProfiles$_()) n._$timingsBuffer$_._$DeleteAllBeforeFrameNumber$_(this._$_gpuTimeEndFrame$_), 
                    n._$lastTotalUtilisation$_ = Math.min(n._$curUtilisation$_, 1), 
                    i.set(n._$layer$_, n._$lastTotalUtilisation$_);
                    for (const h of this._$activeLayersGpuProfiles$_()) {
                        const r = h._$layer$_, o = i.get(r) || 0, a = o - r._$GetSubLayers$_().reduce((t, s) => t + (i.get(s) || 0), 0);
                        h._$lastSelfUtilisation$_ = v._$clamp$_(a, 0, 1);
                    }
                    const s = this._$_runtime$_._$GetMainRunningLayout$_(), e = this._$_gpuLastUtilisation$_ - s._$_GetRootLayers$_().reduce((t, s) => t + (i.get(s) || 0), 0);
                    self.C3Debugger.UpdateGPUProfile(v._$clamp$_(e, 0, 1), this._$_gpuLastUtilisation$_, [ ...this._$activeLayersGpuProfiles$_() ]);
                }
                this._$_gpuTimeStartFrame$_ = this._$_gpuTimeEndFrame$_, this._$_gpuTimeEndFrame$_ = 0;
            }
        }
        _$GetGPUFrameTimingsBuffer$_() {
            return this._$_gpuFrameTimingsBuffer$_;
        }
        _$_UpdateTick_WebGPU$_() {
            if (0 !== this._$_gpuTimeEndFrame$_) {
                for (let t = this._$_gpuTimeStartFrame$_; t < this._$_gpuTimeEndFrame$_; ++t) {
                    const i = this._$_webgpuFrameTimings$_.get(t);
                    if (i && !i._$HasResult$_()) return;
                }
                let t = this._$_runtime$_._$GetMainRunningLayout$_(), r = v._$MakeFilledArray$_(t._$GetLayerCount$_() + 1, 0), s = 0;
                for (let t = this._$_gpuTimeStartFrame$_; t < this._$_gpuTimeEndFrame$_; ++t) {
                    const o = this._$_webgpuFrameTimings$_.get(t);
                    if (o) {
                        let i = o._$GetResult$_(), e = BigInt(0), n = BigInt(0), h = BigInt(0);
                        for (let t = 0, s = Math.min(r.length, i.length / 2); t < s; ++t) {
                            const u = i[2 * t], c = i[2 * t + 1], f = (u !== h && (e === h || u < e) && (e = u), 
                            c > n && (n = c), c - u), d = Number(f) / 1e9;
                            r[t] += d;
                        }
                        const a = n - e, l = Number(a) / 1e9;
                        s += l;
                    }
                }
                if (this._$_gpuLastUtilisation$_ = v._$clamp$_(s, 0, 1), this._$_runtime$_._$IsDebug$_()) {
                    const e = t._$GetLayers$_(), n = new Map();
                    for (let t = 0, s = Math.min(e.length, r.length - 1); t < s; ++t) {
                        const g = r[t + 1];
                        n.set(e[t], g);
                    }
                    const h = [], p = new Map();
                    for (const [ y, M ] of n) {
                        const w = [ ...y._$selfAndAllSubLayers$_() ].reduce((t, s) => t + (n.get(s) || 0), 0);
                        p.set(y, w), h.push({
                            name: y._$GetName$_(),
                            _$lastSelfUtilisation$_: v._$clamp$_(M, 0, 1),
                            _$lastTotalUtilisation$_: v._$clamp$_(w, 0, 1)
                        });
                    }
                    const m = this._$_gpuLastUtilisation$_ - t._$_GetRootLayers$_().reduce((t, s) => t + (p.get(s) || 0), 0);
                    self.C3Debugger.UpdateGPUProfile(v._$clamp$_(m, 0, 1), this._$_gpuLastUtilisation$_, h);
                }
                for (let t = this._$_gpuTimeStartFrame$_; t < this._$_gpuTimeEndFrame$_; ++t) this._$_webgpuFrameTimings$_.delete(t);
                this._$_gpuTimeStartFrame$_ = this._$_gpuTimeEndFrame$_, this._$_gpuTimeEndFrame$_ = 0;
            }
        }
        _$_AddWebGPUFrameTiming$_(t) {
            this._$_webgpuFrameTimings$_.set(this._$_webgpuRenderer$_._$GetFrameNumber$_(), t);
        }
        _$GetGPUUtilisation$_() {
            return this._$_gpuLastUtilisation$_;
        }
        _$SnapshotCanvas$_(t, s, i, e, n, h) {
            return this._$_snapshotFormat$_ = t, this._$_snapshotQuality$_ = s, 
            this._$_snapshotArea$_._$setWH$_(i, e, n, h), this._$_snapshotPromise$_ || (this._$_snapshotPromise$_ = new Promise(t => {
                this._$_snapshotResolve$_ = t;
            })), this._$_snapshotPromise$_;
        }
        _$_MaybeTakeSnapshot$_() {
            if (this._$_snapshotFormat$_) {
                let t = this._$GetMainCanvas$_(), s = this._$_snapshotArea$_, i = v._$clamp$_(Math.floor(s._$getLeft$_()), 0, t.width), e = v._$clamp$_(Math.floor(s._$getTop$_()), 0, t.height), n = s.width(), h = (n = 0 === n ? t.width - i : v._$clamp$_(Math.floor(n), 0, t.width - i), 
                s.height());
                if (h = 0 === h ? t.height - e : v._$clamp$_(Math.floor(h), 0, t.height - e), 
                (0 !== i || 0 !== e || n !== t.width || h !== t.height) && 0 < n && 0 < h) {
                    const r = v._$CreateCanvas$_(n, h), o = r.getContext("2d");
                    o.drawImage(t, i, e, n, h, 0, 0, n, h), t = r;
                }
                v._$CanvasToBlob$_(t, this._$_snapshotFormat$_, this._$_snapshotQuality$_).then(t => {
                    this._$_snapshotUrl$_ && URL.revokeObjectURL(this._$_snapshotUrl$_), 
                    this._$_snapshotUrl$_ = URL.createObjectURL(t), this._$_snapshotPromise$_ = null, 
                    this._$_snapshotResolve$_(this._$_snapshotUrl$_);
                }), this._$_snapshotFormat$_ = "", this._$_snapshotQuality$_ = 1;
            }
        }
        _$GetCanvasSnapshotUrl$_() {
            return this._$_snapshotUrl$_;
        }
        _$SetIsPastingToDrawingCanvas$_(t) {
            t ? this._$_isPastingToDrawingCanvas$_++ : this._$_isPastingToDrawingCanvas$_--;
        }
        _$IsPastingToDrawingCanvas$_() {
            return 0 < this._$_isPastingToDrawingCanvas$_;
        }
        _$InitLoadingScreen$_(t) {
            const s = this._$GetRenderer$_();
            if (2 === t) this._$_percentText$_ = v._$New$_(v._$Gfx$_._$RendererText$_, this._$GetRenderer$_()), 
            this._$_percentText$_._$SetFontName$_("Arial"), this._$_percentText$_._$SetFontSize$_(16), 
            this._$_percentText$_._$SetHorizontalAlignment$_("center"), this._$_percentText$_._$SetVerticalAlignment$_("center"), 
            this._$_percentText$_._$SetSize$_(300, 200); else if (0 === t) {
                const i = this._$_runtime$_._$GetLoadingLogoAsset$_();
                i && i._$LoadStaticTexture$_(s).catch(t => console.warn("[C3 runtime] Failed to create texture for loading logo: ", t));
            } else 4 === t && (this._$_LoadSvgSplashImage$_("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiDQoJIHdpZHRoPSIxNzAwLjc5MDA0cHgiIGhlaWdodD0iMTcwMC43OTAwNHB4IiB2aWV3Qm94PSIyODcgMzE3IDExMjUgMTEyNSINCgkgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTcwMC43OTAwNCAxNzAwLjc5MDA0IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnIGlkPSJsb2dvIj4NCgk8Zz4NCgkJPGc+DQoJCQk8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iI0ZGRkZGRiIgZD0iTTM1NC45Nzc1NCwxMTk1LjYyMzA1DQoJCQkJYzExLjM4NDc3LDAsMjIuMDEyNywzLjIzNzMsMzEuMDE3NTgsOC44Mzc4OWMxLjk0NjI5LDEuMjEwOTQsMi41ODQ5NiwzLjc0OTAyLDEuNDM4NDgsNS43MzQzOGwtNC45MzI2Miw4LjU0MTk5DQoJCQkJYy0zLjI3ODMyLDUuNjc5NjktMTAuMDMzMiw4LjM3Njk1LTE2LjMxNzM4LDYuNTAwOThjLTIuNzY0NjUtMC44MjUyLTUuNjkzMzYtMS4yNjg1NS04LjcyNjU2LTEuMjY4NTUNCgkJCQljLTE2LjgyOTEsMC0zMC40NzI2NiwxMy42NDM1NS0zMC40NzI2NiwzMC40NzI2NmMwLDE2LjgyODEzLDEzLjY0MzU1LDMwLjQ3MjY2LDMwLjQ3MjY2LDMwLjQ3MjY2DQoJCQkJYzMuMDMzMiwwLDUuOTYxOTEtMC40NDMzNiw4LjcyNjU2LTEuMjY4NTVjNi4yOTQ5Mi0xLjg3OTg4LDEzLjAzMzIsMC44MTE1MiwxNi4zMTczOCw2LjUwMDk4bDQuOTMxNjQsOC41NDE5OQ0KCQkJCWMxLjE0NzQ2LDEuOTg4MjgsMC41MTA3NCw0LjUyMzQ0LTEuNDM4NDgsNS43MzQzOGMtOS4wMDM5MSw1LjYwMTU2LTE5LjYzMTg0LDguODM3ODktMzEuMDE2Niw4LjgzNzg5DQoJCQkJYy0zMi40ODUzNSwwLTU4LjgxOTM0LTI2LjMzNDk2LTU4LjgxOTM0LTU4LjgxOTM0QzI5Ni4xNTgyLDEyMjEuOTU3MDMsMzIyLjQ5MjE5LDExOTUuNjIzMDUsMzU0Ljk3NzU0LDExOTUuNjIzMDUNCgkJCQlMMzU0Ljk3NzU0LDExOTUuNjIzMDV6IE03MDMuMjE0ODQsMTI1OS4xNzU3OGMtMTQuNTU5NTctOS44MTczOC0yMC4yMDMxMy0yMC4wMzIyMy0yMC4yMDMxMy0zMy4wODAwOA0KCQkJCWMwLTE4LjQ4OTI2LDE1LjcxNDg0LTI5Ljc2MzY3LDM4LjI2NjYtMjkuNzYzNjdjOS42NTcyMywwLDE4LjcyMTY4LDIuNTQyOTcsMjYuNTU5NTcsNi45OTQxNA0KCQkJCWMyLjA0OTgsMS4xNjQwNiwyLjc2MTcyLDMuNzgzMiwxLjU4MzAxLDUuODI0MjJsLTMuNDE3OTcsNS45MTk5MmMtMy4yNDcwNyw1LjYyNDAyLTkuOTA4Miw4LjMzMTA1LTE2LjE1MzMyLDYuNTQ4ODMNCgkJCQljLTIuNzIzNjMtMC43NzYzNy01LjU5ODYzLTEuMTkyMzgtOC41NzEyOS0xLjE5MjM4Yy0xMC40OTAyMywwLTExLjU5ODYzLDkuNTc2MTctNC44NTc0MiwxNC4xMjMwNWwyMy42ODY1MiwxNS45NzY1Ng0KCQkJCWM5Ljk5MDIzLDYuNzM4MjgsMTUuODk1NTEsMTcuMDY2NDEsMTUuODk1NTEsMjguNzE4NzVjMCwxOC43ODYxMy0xNS4wMDY4NCwzMy4zMDc2Mi0zOC4yNjc1OCwzMy4zMDc2Mg0KCQkJCWMtOS41MjI0NiwwLTE4LjU4Nzg5LTEuOTU3MDMtMjYuODE1NDMtNS40OTAyM2MtNy43ODEyNS0zLjMzOTg0LTEwLjkzMzU5LTEyLjc4MjIzLTYuNjk3MjctMjAuMTE4MTZsMy40ODczLTYuMDQxOTkNCgkJCQljMS4yMTM4Ny0yLjA5OTYxLDMuOTMxNjQtMi43NTk3Nyw1Ljk3NDYxLTEuNDU2MDVjNi44NTkzOCw0LjM4MjgxLDE2LjQ5MDIzLDcuNTk0NzMsMjQuNzU4NzksNy41OTQ3Mw0KCQkJCWMxMC41NDU5LDAsMTEuMzI4MTMtOS45NTg5OCwzLjc2NzU4LTE1LjA1NzYyTDcwMy4yMTQ4NCwxMjU5LjE3NTc4TDcwMy4yMTQ4NCwxMjU5LjE3NTc4eiBNOTg0LjYzMDg2LDEyMDIuMDAwOTgNCgkJCQljMC0yLjM0NzY2LDEuOTAzMzItNC4yNTE5NSw0LjI1MTk1LTQuMjUxOTVoOS45MjE4OGM3LjgyNzE1LDAsMTQuMTcyODUsNi4zNDU3LDE0LjE3Mjg1LDE0LjE3MzgzdjU3LjQwMTM3DQoJCQkJYzAsOC42MTAzNSw2Ljk4MDQ3LDE1LjU5MDgyLDE1LjU5MDgyLDE1LjU5MDgyczE1LjU5MDgyLTYuOTgwNDcsMTUuNTkwODItMTUuNTkwODJ2LTU3LjQwMTM3DQoJCQkJYzAtNy44MjgxMyw2LjM0NTctMTQuMTczODMsMTQuMTcyODUtMTQuMTczODNoOS45MjA5YzIuMzQ4NjMsMCw0LjI1MTk1LDEuOTA0Myw0LjI1MTk1LDQuMjUxOTV2NjcuMzIzMjQNCgkJCQljMCwyNC4yNjU2My0xOS42NzA5LDQzLjkzNzUtNDMuOTM2NTIsNDMuOTM3NXMtNDMuOTM3NS0xOS42NzE4OC00My45Mzc1LTQzLjkzNzVWMTIwMi4wMDA5OEw5ODQuNjMwODYsMTIwMi4wMDA5OHoNCgkJCQkgTTQ2Ni44NjkxNCwxMTk1LjYyMzA1YzMyLjQ4NDM4LDAsNTguODE4MzYsMjYuMzMzOTgsNTguODE4MzYsNTguODE5MzRjMCwzMi40ODQzOC0yNi4zMzM5OCw1OC44MTkzNC01OC44MTgzNiw1OC44MTkzNA0KCQkJCWMtMzIuNDg2MzMsMC01OC44MTkzNC0yNi4zMzQ5Ni01OC44MTkzNC01OC44MTkzNEM0MDguMDQ5OCwxMjIxLjk1NzAzLDQzNC4zODI4MSwxMTk1LjYyMzA1LDQ2Ni44NjkxNCwxMTk1LjYyMzA1DQoJCQkJTDQ2Ni44NjkxNCwxMTk1LjYyMzA1eiBNNDY2Ljg2OTE0LDEyMjUuMDMzMmMtMTYuMjQzMTYsMC0yOS40MTAxNiwxMy4xNjY5OS0yOS40MTAxNiwyOS40MDkxOA0KCQkJCXMxMy4xNjY5OSwyOS40MDgyLDI5LjQxMDE2LDI5LjQwODJjMTYuMjQxMjEsMCwyOS40MDgyLTEzLjE2NjAyLDI5LjQwODItMjkuNDA4MlM0ODMuMTEwMzUsMTIyNS4wMzMyLDQ2Ni44NjkxNCwxMjI1LjAzMzINCgkJCQlMNDY2Ljg2OTE0LDEyMjUuMDMzMnogTTU1Ni43MzI0MiwxMzExLjEzNDc3Yy0yLjM0NzY2LDAtNC4yNTE5NS0xLjkwMjM0LTQuMjUxOTUtNC4yNXYtOTQuOTYxOTENCgkJCQljMC03LjgyODEzLDYuMzQ1Ny0xNC4xNzM4MywxNC4xNzM4My0xNC4xNzM4M2gzLjk1ODk4YzQuNjI1LDAsOC45NTg5OCwyLjI1Njg0LDExLjYxMTMzLDYuMDQ1OWw0MS4xMjIwNyw1OC43NDcwN3YtNTAuNjE5MTQNCgkJCQljMC03LjgyODEzLDYuMzQ1Ny0xNC4xNzM4MywxNC4xNzI4NS0xNC4xNzM4M2g5LjkyMTg4YzIuMzQ3NjYsMCw0LjI1MTk1LDEuOTA0Myw0LjI1MTk1LDQuMjUxOTV2OTQuOTYwOTQNCgkJCQljMCw3LjgyOTEtNi4zNDU3LDE0LjE3Mjg1LTE0LjE3MzgzLDE0LjE3Mjg1aC0zLjk1ODk4Yy00LjYyNSwwLTguOTU4OTgtMi4yNTU4Ni0xMS42MTEzMy02LjA0NDkybC00MS4xMjIwNy01OC43NDYwOXY1MC42MTgxNg0KCQkJCWMwLDcuODI5MS02LjM0NTcsMTQuMTcyODUtMTQuMTcyODUsMTQuMTcyODVINTU2LjczMjQyTDU1Ni43MzI0MiwxMzExLjEzNDc3eiBNMTIxNS4wMjA1MSwxMjExLjkyMjg1DQoJCQkJYzAtNy44MjgxMyw2LjM0NTctMTQuMTczODMsMTQuMTcyODUtMTQuMTczODNoNTAuMzE1NDNjMi4zNDg2MywwLDQuMjUxOTUsMS45MDQzLDQuMjUxOTUsNC4yNTE5NXY1LjY2OTkyDQoJCQkJYzAsNy44MjcxNS02LjM0NTcsMTQuMTcyODUtMTQuMTcyODUsMTQuMTcyODVoLTYuMDI0NDF2NzUuMTE4MTZjMCw3LjgyOTEtNi4zNDU3LDE0LjE3Mjg1LTE0LjE3Mjg1LDE0LjE3Mjg1aC05LjkyMTg4DQoJCQkJYy0yLjM0ODYzLDAtNC4yNTE5NS0xLjkwMjM0LTQuMjUxOTUtNC4yNXYtODUuMDQxMDJoLTE1Ljk0NDM0Yy0yLjM0ODYzLDAtNC4yNTE5NS0xLjkwMzMyLTQuMjUxOTUtNC4yNTE5NVYxMjExLjkyMjg1DQoJCQkJTDEyMTUuMDIwNTEsMTIxMS45MjI4NXogTTc3Ni40NDkyMiwxMjExLjkyMjg1YzAtNy44MjgxMyw2LjM0NTctMTQuMTczODMsMTQuMTczODMtMTQuMTczODNoNTAuMzE0NDUNCgkJCQljMi4zNDk2MSwwLDQuMjUxOTUsMS45MDQzLDQuMjUxOTUsNC4yNTE5NXY1LjY2OTkyYzAsNy44MjcxNS02LjM0NTcsMTQuMTcyODUtMTQuMTcxODgsMTQuMTcyODVoLTYuMDI1Mzl2NzUuMTE4MTYNCgkJCQljMCw3LjgyOTEtNi4zNDU3LDE0LjE3Mjg1LTE0LjE3Mjg1LDE0LjE3Mjg1aC05LjkyMDljLTIuMzQ5NjEsMC00LjI1MTk1LTEuOTAyMzQtNC4yNTE5NS00LjI1di04NS4wNDEwMmgtMTUuOTQ1MzENCgkJCQljLTIuMzQ3NjYsMC00LjI1MTk1LTEuOTAzMzItNC4yNTE5NS00LjI1MTk1VjEyMTEuOTIyODVMNzc2LjQ0OTIyLDEyMTEuOTIyODV6IE05MjkuNjA0NDksMTI3Mi4wMjI0NmwyNi45NTgwMSwzMi4xMjc5Mw0KCQkJCWMyLjMxNDQ1LDIuNzU3ODEsMC4zNDM3NSw2Ljk4NDM4LTMuMjU2ODQsNi45ODQzOGgtMTkuNzA1MDhjLTQuMTg5NDUsMC04LjE2NTA0LTEuODUxNTYtMTAuODU3NDItNS4wNjA1NWwtMjIuNjgxNjQtMjcuMDMxMjUNCgkJCQl2MjcuODQxOGMwLDIuMzQ3NjYtMS45MDMzMiw0LjI1LTQuMjUxOTUsNC4yNWgtOS45MjA5Yy03LjgyNzE1LDAtMTQuMTcyODUtNi4zNDM3NS0xNC4xNzI4NS0xNC4xNzI4NXYtODUuMDM5MDYNCgkJCQljMC03LjgyODEzLDYuMzQ1Ny0xNC4xNzM4MywxNC4xNzI4NS0xNC4xNzM4M2gyOS43NjM2N2MyMi43MDAyLDAsNDEuMTAyNTQsMTcuMTMzNzksNDEuMTAyNTQsMzguMjY4NTUNCgkJCQlDOTU2Ljc1NDg4LDEyNTIuNTkwODIsOTQ1LjQzNjUyLDEyNjYuNzAyMTUsOTI5LjYwNDQ5LDEyNzIuMDIyNDZMOTI5LjYwNDQ5LDEyNzIuMDIyNDZ6IE05MDAuMDYxNTIsMTIyMS44NDM3NXYzMi41OTg2M2g4LjUwMzkxDQoJCQkJYzEwLjk1ODk4LDAsMTkuODQyNzctNy4yOTc4NSwxOS44NDI3Ny0xNi4yOTg4M2MwLTkuMDAxOTUtOC44ODM3OS0xNi4yOTk4LTE5Ljg0Mjc3LTE2LjI5OThIOTAwLjA2MTUyTDkwMC4wNjE1MiwxMjIxLjg0Mzc1eg0KCQkJCSBNMTE1OC4zNTkzOCwxMTk1LjYyMzA1YzExLjM4NDc3LDAsMjIuMDEyNywzLjIzNzMsMzEuMDE3NTgsOC44Mzc4OWMxLjk0NzI3LDEuMjEwOTQsMi41ODQ5NiwzLjc0OTAyLDEuNDM4NDgsNS43MzQzOA0KCQkJCWwtNC45MzI2Miw4LjU0MTk5Yy0zLjI3ODMyLDUuNjc5NjktMTAuMDMzMiw4LjM3Njk1LTE2LjMxNzM4LDYuNTAwOThjLTIuNzY0NjUtMC44MjUyLTUuNjkzMzYtMS4yNjg1NS04LjcyNTU5LTEuMjY4NTUNCgkJCQljLTE2LjgyOTEsMC0zMC40NzI2NiwxMy42NDM1NS0zMC40NzI2NiwzMC40NzI2NmMwLDE2LjgyODEzLDEzLjY0MzU1LDMwLjQ3MjY2LDMwLjQ3MjY2LDMwLjQ3MjY2DQoJCQkJYzMuMDMyMjMsMCw1Ljk2MDk0LTAuNDQzMzYsOC43MjU1OS0xLjI2ODU1YzYuMjk1OS0xLjg3OTg4LDEzLjAzMzIsMC44MTE1MiwxNi4zMTgzNiw2LjUwMDk4bDQuOTMwNjYsOC41NDE5OQ0KCQkJCWMxLjE0NzQ2LDEuOTg4MjgsMC41MTA3NCw0LjUyMzQ0LTEuNDM3NSw1LjczNDM4Yy05LjAwNDg4LDUuNjAxNTYtMTkuNjMyODEsOC44Mzc4OS0zMS4wMTc1OCw4LjgzNzg5DQoJCQkJYy0zMi40ODUzNSwwLTU4LjgxOTM0LTI2LjMzNDk2LTU4LjgxOTM0LTU4LjgxOTM0QzEwOTkuNTQwMDQsMTIyMS45NTcwMywxMTI1Ljg3NDAyLDExOTUuNjIzMDUsMTE1OC4zNTkzOCwxMTk1LjYyMzA1eiIvPg0KCQkJPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiMwMEZGREEiIGQ9Ik0xMzE4LjE5NzI3LDEyMDYuMDMyMjMNCgkJCQljMC03LjgyODEzLDYuMzQ1Ny0xNC4xNzM4MywxNC4xNzI4NS0xNC4xNzM4M2MyMC42NTYyNSwwLDQxLjMxMjUsMCw2MS45Njg3NSwwYzMuNDI5NjksMCw1LjQ1MDIsMy44ODA4NiwzLjQ4MzQsNi42OTA0Mw0KCQkJCWwtMTkuMjk2ODgsMjcuNTY3MzhjMTUuNTQyOTcsOC4zNzU5OCwyNi4xMDY0NSwyNC44MDA3OCwyNi4xMDY0NSw0My42OTUzMWMwLDI3LjM5NzQ2LTIyLjIwODk4LDQ5LjYwNjQ1LTQ5LjYwNjQ1LDQ5LjYwNjQ1DQoJCQkJYy0xNi42ODg0OCwwLTMxLjQ1MTE3LTguMjQwMjMtNDAuNDQzMzYtMjAuODc1OThjLTEuNDUwMi0yLjAzOTA2LTAuODMxMDUtNC44OTk0MSwxLjMzNTk0LTYuMTUyMzRsMTAuOTc3NTQtNi4zMzc4OQ0KCQkJCWM0Ljg4MTg0LTIuODE4MzYsMTAuOTc5NDktMi40NzU1OSwxNS41MTQ2NSwwLjg3MzA1YzMuNTI4MzIsMi42MDU0Nyw3Ljg5MTYsNC4xNDY0OCwxMi42MTUyMyw0LjE0NjQ4DQoJCQkJYzExLjc0MjE5LDAsMjEuMjU5NzctOS41MTg1NSwyMS4yNTk3Ny0yMS4yNTk3N3MtOS41MTc1OC0yMS4yNTk3Ny0yMS4yNTk3Ny0yMS4yNTk3N2gtMTUuMjE3NzcNCgkJCQljLTMuNDI5NjksMC01LjQ1MDItMy44ODA4Ni0zLjQ4NDM4LTYuNjkwNDNsMTguMTM1NzQtMjUuOTA4MmgtMzIuMDA5NzdjLTIuMzQ4NjMsMC00LjI1MTk1LTEuOTAzMzItNC4yNTE5NS00LjI1MTk1VjEyMDYuMDMyMjN6DQoJCQkJIi8+DQoJCTwvZz4NCgkJPGc+DQoJCQk8Zz4NCgkJCQk8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iI0RBRThGNyIgZD0iTTg1MC4zOTU1MSw4NTcuNTkxOA0KCQkJCQljLTUwLjM1NjQ1LDAtOTQuMzI1Mi0yNy4zNTY0NS0xMTcuODUyNTQtNjguMDIwNTFsLTgwLjAzMDI3LDQ2LjIwNDFjLTQuNjU1MjcsMi42ODk0NS02LjEzMTg0LDguNzE4NzUtMy4yNDkwMiwxMy4yNTU4Ng0KCQkJCQljNDIuMjM3Myw2Ni40ODYzMywxMTYuNTMzMiwxMTAuNjA3NDIsMjAxLjEzMTg0LDExMC42MDc0MmM4OC4xMjU5OCwwLDE2NS4wNzEyOS00Ny44NzUsMjA2LjI0MzE2LTExOS4wMzYxM2wtODAuNDg3My00Ni40Njk3Mw0KCQkJCQljLTQuMzEzNDgtMi40OTAyMy05LjgwMTc2LTEuMjA1MDgtMTIuNTcwMzEsMi45MzU1NUM5MzkuMTc1NzgsODMzLjU2MjUsODk3LjU5MTgsODU3LjU5MTgsODUwLjM5NTUxLDg1Ny41OTE4DQoJCQkJCUw4NTAuMzk1NTEsODU3LjU5MTh6IE0xMTM2LjcyMTY4LDU1Ni4yMTc3N2M0LjYxNDI2LTIuNjYzMDksNi4xMTAzNS04LjYxOTE0LDMuMzEyNS0xMy4xNTEzNw0KCQkJCQljLTU5LjkxNTA0LTk3LjAzMDI3LTE2Ny4yMjQ2MS0xNjEuNjk0MzQtMjg5LjYzODY3LTE2MS42OTQzNGMtMTI1Ljg5MzU1LDAtMjM1LjgxMzQ4LDY4LjM5MjU4LTI5NC42MzM3OSwxNzAuMDQ5OA0KCQkJCQlsODAuMzc2OTUsNDYuNDA2MjVjNC4zOTc0NiwyLjUzOTA2LDEwLjAwMTk1LDEuMTQ5NDEsMTIuNzEwOTQtMy4xNDU1MQ0KCQkJCQljNDIuMTY0MDYtNjYuODUxNTYsMTE2LjY2ODk1LTExMS4yNjM2NywyMDEuNTQ1OS0xMTEuMjYzNjdjODguMTI1OTgsMCwxNjUuMDcxMjksNDcuODc1OTgsMjA2LjI0MzE2LDExOS4wMzYxMw0KCQkJCQlMMTEzNi43MjE2OCw1NTYuMjE3Nzd6Ii8+DQoJCQkJPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiNBNUJBQzgiIGQ9Ik04NTAuMzk1NTEsOTU5LjYzODY3DQoJCQkJCWMtODQuNTk4NjMsMC0xNTguODk0NTMtNDQuMTIxMDktMjAxLjEzMTg0LTExMC42MDc0MmMtMi44NzY5NS00LjUzMDI3LTEuMzk5NDEtMTAuNTcwMzEsMy4yNDkwMi0xMy4yNTU4Nmw4MC4wMzAyNy00Ni4yMDQxDQoJCQkJCWMtMTEuNTgxMDUtMjAuMDE2Ni0xOC4yMDk5Ni00My4yNTQ4OC0xOC4yMDk5Ni02OC4wNDE5OWMwLTc0Ljc4NTE2LDYwLjU1NzYyLTEzNi4wNjI1LDEzNi4wNjI1LTEzNi4wNjI1DQoJCQkJCWM0Ny4xOTYyOSwwLDg4Ljc4MDI3LDI0LjAyOTMsMTEzLjE4NTU1LDYwLjUyMjQ2YzIuNzY0NjUsNC4xMzM3OSw4LjI2MzY3LDUuNDIxODgsMTIuNTcwMzEsMi45MzU1NWw4MC40ODczLTQ2LjQ2OTczDQoJCQkJCWMtNDEuMTcxODgtNzEuMTYwMTYtMTE4LjExNzE5LTExOS4wMzYxMy0yMDYuMjQzMTYtMTE5LjAzNjEzYy04NC44NzY5NSwwLTE1OS4zODE4NCw0NC40MTIxMS0yMDEuNTQ1OSwxMTEuMjYzNjcNCgkJCQkJYy0yLjcwNjA1LDQuMjkxMDItOC4zMTgzNiw1LjY4MTY0LTEyLjcxMDk0LDMuMTQ1NTFsLTgwLjM3Njk1LTQ2LjQwNjI1DQoJCQkJCWMtMjguOTUyMTUsNTAuMDQwMDQtNDUuNTIzNDQsMTA4LjEzOTY1LTQ1LjUyMzQ0LDE3MC4xMDc0MmMwLDE4Ni45NjM4NywxNTEuMzk0NTMsMzQwLjE1NzIzLDM0MC4xNTcyMywzNDAuMTU3MjMNCgkJCQkJYzEyMi40MTQwNiwwLDIyOS43MjM2My02NC42NjQwNiwyODkuNjM4NjctMTYxLjY5NTMxYzIuNzk0OTItNC41MjYzNywxLjI5NDkyLTEwLjQ5MDIzLTMuMzEyNS0xMy4xNTEzN2wtODAuMDgzMDEtNDYuMjM3Mw0KCQkJCQlDMTAxNS40NjY4LDkxMS43NjM2Nyw5MzguNTIxNDgsOTU5LjYzODY3LDg1MC4zOTU1MSw5NTkuNjM4Njd6Ii8+DQoJCQk8L2c+DQoJCQk8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iIzAwRkZEQSIgZD0iTTExMzcuMTg1NTUsNzU4LjExMzI4di03My4xNjc5N2wtNjMuMzY1MjMsMzYuNTgzOTgNCgkJCQlMMTEzNy4xODU1NSw3NTguMTEzMjhMMTEzNy4xODU1NSw3NTguMTEzMjh6IE0xMDI2LjU3NjE3LDcwNS4xNjQwNmwxMjAuMDU4NTktNjkuMzE2NDENCgkJCQljMTIuNTY4MzYtNy4yNTU4NiwyOC4zNDQ3MywxLjg1MjU0LDI4LjM0NTcsMTYuMzY2MjF2MTM4LjYzMDg2Yy0wLjAwMDk4LDE0LjUxMjctMTUuNzc3MzQsMjMuNjIyMDctMjguMzQ1NywxNi4zNjYyMQ0KCQkJCWwtMTIwLjA1ODU5LTY5LjMxNjQxQzEwMTQuMDI4MzIsNzMwLjY0OTQxLDEwMTQuMDI4MzIsNzEyLjQwOTE4LDEwMjYuNTc2MTcsNzA1LjE2NDA2eiIvPg0KCQk8L2c+DQoJPC9nPg0KPC9nPg0KPC9zdmc+DQo=").then(t => {
                "done" === this._$_splashState$_ ? s._$DeleteTexture$_(t) : this._$_splashTextures$_._$logo$_ = t;
            }).catch(t => console.warn("Failed to load splash image: ", t)), this._$_LoadBitmapSplashImage$_("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAABABAMAAACekdKMAAAAMFBMVEUAAAByfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYYgo7vbAAAAD3RSTlMAmd137hFVqjO7zCKIRGZ881JRAAAFY0lEQVR42u2aPW/bVhSGn1iiPizZ8D+QgSJBNglFmiboQA0NUKAD1XotYA0BOspAkZnqx24vnTrIQNCpg4QkQMcYKDoW9j9w5y6qLNqWFDlvh3tJUa6ddHBhAuS7SKBIQffhuee851CQKVOmTJkyZcqUKXmqa8O+uyNlABKsFRmdP0o5AOle2gHoWdoBzFrpBHACwPeetJNmAFSlt6kGwGH0LqUAVqRuqgHkpEaqAVRkfvOWr+Dh9Rc4j6VvwnrhPNAbgK2ezj+yx7Z6GjUuASi4Ch4lHQAGwBeRK1rROQAdUx5K0hE4NUkaAdS02ZEuoms2wkCSgvYSgFJfkn6CobkSPG0mEcAOrHnGFOxAToHNjk/MygLgO/PxL0BN9yRdQKlufMQAoCdJGi8BOJYknXTJ269cu9HtdqNb4Ni6oimUbFb0dAZQ1DmULJ+TFtT0qQHwg73mLlCMfFUMQPR5VWrbmttNHICC1KDiSZ+w3pMOwFPDhP4IYFtv4ZX0nIorbUBNmjWAiqdZg5fmNFd6jvPhJQDjAV9LI0r28IpmycsBZalNWfoRWJcuoKY9c7cCkwpOwdcIqNT1BmrSgQkNbQAvpAGOF+aHOIBpCxhKR/TVBNjVOHkAOgrg2N6aoU7sklmVidtD7bNm/fIrjaBmk+Sxea142iBnTyguAfjZZscNXLOdXFM8EgVgXRpDz/6yonTEts6AXdV1APTVoKigFSXEmj3XN0kSV01WFQwAHC8O4Mhagye8NgHS137SALzsS3dxwhtXkQ4oaw64eqomOFKXbc2xJbFLTX8DOHYnsKsJu2Gdu8IIuTqjrMB8eyM5ACIFXQo2S5t7lNMM6AdFTaCgADqahHW8EQIohBk9rzEdE+JXAtjVmHWpDTmplUAA96Ea/bJDnVKSWjgaFTSHqubgmjVDXQchgFy4wBXNcXV6LYC8RjbEypomcCAyBopRShxqAn21yenM8WawqjOoKVbmLYBFndeImsnyVwJY1RR8NW1FTRiA6UNTCsP6fKwLONQBZTXx1WVbT0KbtwygvAxg81oAZU0xe2QYxkmyrDDx2DzWBXTUZFs7dNQwHUEMwN4VAKb47wOQ1wj8Gx0+/Y8A8powVJtt7XOoxn8A8N4IqCrA8cJUmzgAl3JAUWN8tSjqDX0NwI/XbwugGLe178oBK7bBaBesm0gggOUqwLrOHe8c1jV2NAMOw/XFAFRth2dr/burANS1cSc0C8kDsB7zAZvgKCjoLTiaFqwpmvwLQC7e2b3PB4CrZj48KXkAKktOEPr6VqeAr680udzEWACluK0LreJ1ThBe6+w4HkfJAhD1AtbAu3qgPcDVX2oCK9bqxwFQ1+fRsVW7va/uBZpAWaND652TCGBoM1rHHN6VmQlsq6cdE+4mC75oLAC49prKB1zTDd6NukHIKahbIkkEsGrmAQWZbZqXNLClrg04dTP4KnjnCwBfmgkZT7WD45k94C8BmA3MPGBgeqcbfQBxwwDsRMi3N7Iqc3dzsuVhV5ofkevpJOoGKUn6Ax5L92F49USoayZCls08uQDiM0ETCWPb8k7DMmH02SICGC7ayVhnsABwEpsZQkfxUpI4ALGpsFn4xCbHcVjnwgnvAkBh0U6CbzqrXgzA1E6FB9YOJGcacgUAfl36t0Ro/SIDUDEL/D1WBcJr5q0oRoJ2LQZgZJ4LPIu2RCPJAJafDLm2Yr2OHmQ4H0vzBksA2PKl38L3fY0aLAFYejK0ZpJhelVKzkj8dlRNzkj8dpRP0DTkVjTUXroB9PVnqtefS9I05BZU8NOdAyUl5q8RtwUg6KYcwP1Up8CanpMpU6ZMmTLdgP4BRYsi23xEdOAAAAAASUVORK5CYII=").then(t => {
                "done" === this._$_splashState$_ ? s._$DeleteTexture$_(t) : this._$_splashTextures$_._$powered$_ = t;
            }).catch(t => console.warn("Failed to load splash image: ", t)), this._$_LoadBitmapSplashImage$_("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAABABAMAAACekdKMAAAAMFBMVEUAAAByfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYYgo7vbAAAAD3RSTlMAdxHdu4hmVZnuRMwzqiLYE4y2AAAFw0lEQVR42u2Yy+9LQRTHp6Xq0VIkXkFvwkYslAWJiGJj2a6sJJe/oF3YWGElEQmxkYi4ErFWNpatWFmIx9Lm1sJCLKgqraqv82h726l6hOuRzDf53TtnOr+ZOZ+ZOffca5ycnJycnJycnJycnJycnJz+pi7g2G9osxjvzX8qB8ABcAAcgH8XwDa85dspNOiaRDuAR4U0PnHtDuyy7IJRJS6gvVmL6TywVkp4ZxIhulUxFvlaXQTrgEHbnMDH5XRjlXCdb+uAnc2ojWgFFTYBZ8e9tzcaswAk6v/3K4sPfPNRFj87IXj+KXQUS9m2jXoH1lMuLq2DtEcAtNMBT9PjanFq7ySAhbABVEAaeDaAwkk2D7GRqctAMQJIq2sBauLnB/VxCfqKpWrbRhSC1W5SMQ9RTgBUwKpF1ccmAIQ2gCxE+20Au9nSESvDgeIDkJSBMpA9vgyXdsj0H0GORL3n2fbwPOKoSQS4Q2cBOGzSJbQYAHDbZEI+rEuBcyZRlF71fIP/x0wBuIBOw6xH3xu2GQFAP2cegmvSwHkeqBZjECzB46UXD3bg8UKJCT6QYzgDY9uiU7hC11doERq6MAZ2CPJ7ipEulOrteDcB4KOZBpBG7zrV1JGzATzmIdnrl/go3bRiBJBHlZc+6ItjuQQ+yFLz8Gka2LZFRVTFGdoQJQ0LPodHnXkS8AjlRWkBLwKQswAs0PDzGpcsAAMNuG+5WgdqxwjgEcp8qcBjN5oZdPhEvOfhU/hsbJuVloWV6WWgp2IBLxXQNEwLDfKqoMXrEQBjATiFA3qePlgAZJRl+EStdaAQjfgALOC1zfeX8ALV+7S69JdALWjxHGqztmxyMnTD6OOBWvAdGDkn60c6vrI5H4CPnOJsWQDe8G0hIU0MB8ojFx+AFAeqeitLy5FkL3w0yNNcSOx3oDxjjxaH9XxldZluY5NBfwrAQvQbRjQXAO8UqVq5dh6A7HCgWzgdFwBdgOX4lMZbTndkWWkDN07Bk+zItllLdHm1+FkLwBSADNDf8B0AnGOp5gFYgJEexwcgGQx4iyeD9ybFkWsbDZbv0+2Y8XvGtqMpWsUimpMAzA1AUrj5ALjm2wCoONKB+ACYsEeDlU04MMs4imeJQqljslSuD4xl/zgAsx6ku/8DgDwaO9AwFU56qhzOPiXpKCzCpSSdb8v+CQDmXshb99cARAPFCOA1chWaFXlP55yn2FqEgiFvOSzYtmiJzisKB7MxQPS8iO63YsD3AHDv8QPgjR92eKuf9vts1wdZjvZhN4XajD35FNDiR7ln0LYBaILY+OZT4DsA+BkTP4AUrgXkxSJcDFps+72X7EGlx6mBbU/lAbdQjvKA7hSAlSuHxdw0gORsHrAUnXkAUuj+AQAZdHGRp9bShX2ECz1JRSk4zNhRJqj5SZQJfpgCUNS2eRsAP/usTDAxPxFKA834AZgAOM1z6qGgxxpdmUDQNjP25LtAsojxu0AehSkAF6RLXWR/EkAdVYEevQtswVtpMwuAB1JGh2jbxQcgBKrig/qSxTD6o2Nm7fttSY6uUnErV+jb4CJyaArAI5luJkCDOy5HAPISSB5A3wYbhJERahvtPALAAw2EI9Vzsh2TTuk23qEceN9d4vVVv227hNroe0CRi/o9IKTZTQFIAc/M8jwGEiouG2/042u8u25uAuPvAavRH7XhzqcBpICdRpssRa+aNLFoh2JeyBzU08fih/ht20WZXghW34s+/ZQnAKhzojsSH4CC/sjARPKamLXacOfTAIwfNSkCbROLluG9Tm2gdl3PY178tu2SBIpFQ6fHH//2GAvAogCkjtGDEAFQYPsu6DdBqw11bgFIF8dNHsQGIEFRSDOe0RS9YYJk23JMrw+/Cr9bFX0VXmNsACbhA088qXhBrMYAlq8Gjhh//FX4YNSGO7cASO9n9B99AuHk5OTk5OTk5OTk5OTk5OTk5OT0VX0B7+fX+9cwWYYAAAAASUVORK5CYII=").then(t => {
                "done" === this._$_splashState$_ ? s._$DeleteTexture$_(t) : this._$_splashTextures$_._$website$_ = t;
            }).catch(t => console.warn("Failed to load splash image: ", t)));
        }
        async _$_LoadSvgSplashImage$_(t) {
            t = new URL(t, this._$_runtime$_._$GetRuntimeBaseURL$_()).toString();
            const s = await v._$FetchBlob$_(t), i = await this._$_runtime$_._$RasterSvgImage$_(s, 2048, 2048);
            return this._$GetRenderer$_()._$CreateStaticTextureAsync$_(i, {
                _$mipMapQuality$_: "high"
            });
        }
        async _$_LoadBitmapSplashImage$_(t) {
            t = new URL(t, this._$_runtime$_._$GetRuntimeBaseURL$_()).toString();
            const s = await v._$FetchBlob$_(t);
            return this._$GetRenderer$_()._$CreateStaticTextureAsync$_(s, {
                _$mipMapQuality$_: "high"
            });
        }
        _$HideCordovaSplashScreen$_() {
            this._$_runtime$_._$PostComponentMessageToDOM$_("runtime", "hide-cordova-splash");
        }
        _$StartLoadingScreen$_() {
            this._$_loaderStartTime$_ = Date.now(), this._$_runtime$_._$Dispatcher$_().addEventListener("loadingprogress", this._$_loadingprogress_handler$_), 
            this._$_rafId$_ = requestAnimationFrame(() => this._$_DrawLoadingScreen$_());
            const t = this._$_runtime$_._$GetLoaderStyle$_();
            3 !== t && this._$HideCordovaSplashScreen$_();
        }
        async _$EndLoadingScreen$_() {
            const t = this._$GetRenderer$_(), s = (this._$_loadingProgress$_ = 1, 
            this._$_runtime$_._$GetLoaderStyle$_());
            4 === s && await this._$_splashDonePromise$_, this._$_splashDoneResolve$_ = null, 
            this._$_splashDonePromise$_ = null, -1 !== this._$_rafId$_ && (cancelAnimationFrame(this._$_rafId$_), 
            this._$_rafId$_ = -1), this._$_runtime$_._$Dispatcher$_().removeEventListener("loadingprogress", this._$_loadingprogress_handler$_), 
            this._$_loadingprogress_handler$_ = null, this._$_percentText$_ && (this._$_percentText$_._$Release$_(), 
            this._$_percentText$_ = null), this._$_runtime$_._$ReleaseLoadingLogoAsset$_(), 
            t._$Start$_(), this._$_splashTextures$_._$logo$_ && (t._$DeleteTexture$_(this._$_splashTextures$_._$logo$_), 
            this._$_splashTextures$_._$logo$_ = null), this._$_splashTextures$_._$powered$_ && (t._$DeleteTexture$_(this._$_splashTextures$_._$powered$_), 
            this._$_splashTextures$_._$powered$_ = null), this._$_splashTextures$_._$website$_ && (t._$DeleteTexture$_(this._$_splashTextures$_._$website$_), 
            this._$_splashTextures$_._$website$_ = null), t._$ClearRgba$_(0, 0, 0, 0), 
            t._$Finish$_(), this._$_splashState$_ = "done", this._$_gpuTimeStartFrame$_ = t._$GetFrameNumber$_(), 
            3 === s && this._$HideCordovaSplashScreen$_();
        }
        _$_DrawLoadingScreen$_() {
            if (-1 !== this._$_rafId$_) {
                const t = this._$GetRenderer$_(), s = (t._$Start$_(), this._$_rafId$_ = -1, 
                this._$_runtime$_._$GetAssetManager$_()._$HasHadErrorLoading$_()), i = this._$_runtime$_._$GetLoaderStyle$_();
                if (3 !== i && (this._$SetCssTransform$_(t), t._$ClearRgba$_(0, 0, 0, 0), 
                t._$ResetColor$_(), t._$SetTextureFillMode$_(), t._$SetTexture$_(null)), 
                0 === i) this._$_DrawProgressBarAndLogoLoadingScreen$_(s); else if (1 === i) this._$_DrawProgressBarLoadingScreen$_(s, 120, 0); else if (2 === i) this._$_DrawPercentTextLoadingScreen$_(s); else if (3 === i) v._$noop$_(); else {
                    if (4 !== i) throw new Error("invalid loader style");
                    this._$_DrawSplashLoadingScreen$_(s);
                }
                t._$Finish$_(), this._$_rafId$_ = requestAnimationFrame(() => this._$_DrawLoadingScreen$_());
            }
        }
        _$_DrawPercentTextLoadingScreen$_(t) {
            t ? this._$_percentText$_._$SetColorRgb$_(1, 0, 0) : this._$_percentText$_._$SetColorRgb$_(.6, .6, .6), 
            this._$_percentText$_._$SetText$_(Math.round(100 * this._$_loadingProgress$_) + "%");
            const s = this._$_canvasCssWidth$_ / 2, i = this._$_canvasCssHeight$_ / 2, e = (La._$setRect$_(s - 150, i - 100, 150 + s, 100 + i), 
            this._$GetRenderer$_());
            e._$SetTexture$_(this._$_percentText$_._$GetTexture$_()), e._$Quad3$_(La, this._$_percentText$_._$GetTexRect$_());
        }
        _$_DrawProgressBarLoadingScreen$_(t, s, i) {
            const e = this._$GetRenderer$_(), n = (e._$SetColorFillMode$_(), t ? e._$SetColorRgba$_(1, 0, 0, 1) : e._$SetColorRgba$_(.118, .565, 1, 1), 
            this._$_canvasCssWidth$_ / 2), h = this._$_canvasCssHeight$_ / 2, r = s / 2;
            C._$setWH$_(n - r, h - 4 + i, Math.floor(s * this._$_loadingProgress$_), 8), 
            e.Rect(C), C._$setWH$_(n - r, h - 4 + i, s, 8), C.offset(-.5, -.5), 
            C._$inflate$_(.5, .5), e._$SetColorRgba$_(0, 0, 0, 1), e._$LineRect2$_(C), 
            C._$inflate$_(1, 1), e._$SetColorRgba$_(1, 1, 1, 1), e._$LineRect2$_(C);
        }
        _$_DrawProgressBarAndLogoLoadingScreen$_(t) {
            const s = this._$GetRenderer$_(), i = this._$_runtime$_._$GetLoadingLogoAsset$_();
            if (i) {
                const e = i._$GetTexture$_();
                if (e) {
                    const n = e._$GetWidth$_(), h = e._$GetHeight$_(), r = this._$_canvasCssWidth$_ / 2, o = this._$_canvasCssHeight$_ / 2, a = n / 2, l = h / 2;
                    La._$setRect$_(r - a, o - l, r + a, o + l), s._$SetTexture$_(e), 
                    s._$Quad$_(La), this._$_DrawProgressBarLoadingScreen$_(t, n, 16 + l);
                } else this._$_DrawProgressBarLoadingScreen$_(t, 120, 0);
            } else this._$_DrawProgressBarLoadingScreen$_(t, 120, 0);
        }
        _$_DrawSplashLoadingScreen$_(t) {
            let s = this._$GetRenderer$_(), i = this._$_splashTextures$_._$logo$_, e = this._$_splashTextures$_._$powered$_, n = this._$_splashTextures$_._$website$_, h = Date.now(), r = (0 === this._$_splashFrameNumber$_ && (this._$_loaderStartTime$_ = h), 
            this._$_runtime$_._$IsPreview$_() || this._$_runtime$_._$IsFBInstantAvailable$_() && !this._$_runtime$_._$IsCordova$_()), o = r ? 0 : 200, a = r ? 0 : 3e3, l = 1, u = ("fade-in" === this._$_splashState$_ ? l = Math.min((h - this._$_loaderStartTime$_) / 300, 1) : "fade-out" === this._$_splashState$_ && (l = Math.max(1 - (h - this._$_splashFadeOutStartTime$_) / 300, 0)), 
            s._$SetColorFillMode$_(), s._$SetColorRgba$_(.231 * l, .251 * l, .271 * l, l), 
            C.set(0, 0, this._$_canvasCssWidth$_, this._$_canvasCssHeight$_), s.Rect(C), 
            Math.ceil(this._$_canvasCssWidth$_)), c = Math.ceil(this._$_canvasCssHeight$_), f, d;
            256 < this._$_canvasCssHeight$_ ? (s._$SetColorRgba$_(.302 * l, .334 * l, .365 * l, l), 
            f = u, d = Math.max(.005 * c, 2), C._$setWH$_(0, .8 * c - d / 2, f, d), 
            s.Rect(C), t ? s._$SetColorRgba$_(l, 0, 0, l) : s._$SetColorRgba$_(.161 * l, .953 * l, .816 * l, l), 
            f = u * this._$_loadingProgress$_, C._$setWH$_(.5 * u - f / 2, .8 * c - d / 2, f, d), 
            s.Rect(C), s._$SetColorRgba$_(l, l, l, l), s._$SetTextureFillMode$_(), 
            e && (f = 1.5 * v._$clamp$_(.22 * c, 105, .6 * u), d = f / 8, C._$setWH$_(.5 * u - f / 2, .2 * c - d / 2, f, d), 
            s._$SetTexture$_(e), s.Rect(C)), i && (f = Math.min(.395 * c, .95 * u), 
            d = f, C._$setWH$_(.5 * u - f / 2, .485 * c - d / 2, f, d), s._$SetTexture$_(i), 
            s.Rect(C)), n && (f = 1.5 * v._$clamp$_(.22 * c, 105, .6 * u), d = f / 8, 
            C._$setWH$_(.5 * u - f / 2, .868 * c - d / 2, f, d), s._$SetTexture$_(n), 
            s.Rect(C))) : (s._$SetColorRgba$_(.302 * l, .334 * l, .365 * l, l), 
            f = u, d = Math.max(.005 * c, 2), C._$setWH$_(0, .85 * c - d / 2, f, d), 
            s.Rect(C), t ? s._$SetColorRgba$_(l, 0, 0, l) : s._$SetColorRgba$_(.161 * l, .953 * l, .816 * l, l), 
            f = u * this._$_loadingProgress$_, C._$setWH$_(.5 * u - f / 2, .85 * c - d / 2, f, d), 
            s.Rect(C), s._$SetColorRgba$_(l, l, l, l), s._$SetTextureFillMode$_(), 
            i && (f = .55 * c, d = f, C._$setWH$_(.5 * u - f / 2, .45 * c - d / 2, f, d), 
            s._$SetTexture$_(i), s.Rect(C))), this._$_splashFrameNumber$_++, "fade-in" === this._$_splashState$_ && 300 <= h - this._$_loaderStartTime$_ && 2 <= this._$_splashFrameNumber$_ && (this._$_splashState$_ = "wait", 
            this._$_splashFadeInFinishTime$_ = h), "wait" === this._$_splashState$_ && h - this._$_splashFadeInFinishTime$_ >= a && 1 <= this._$_loadingProgress$_ && (this._$_splashState$_ = "fade-out", 
            this._$_splashFadeOutStartTime$_ = h), ("fade-out" === this._$_splashState$_ && h - this._$_splashFadeOutStartTime$_ >= 300 + o || r && 1 <= this._$_loadingProgress$_ && h - this._$_loaderStartTime$_ < 500) && this._$_splashDoneResolve$_();
        }
    };
}

{
    let U = self._$C3$_, W = self.C3Debugger, n = self._$ISDKBehaviorInstanceBase$_, i = {
        messagePort: null,
        runtimeBaseUrl: "",
        headless: !1,
        hasDom: !0,
        isInWorker: !1,
        useAudio: !0,
        exportType: ""
    }, r = !0;
    U._$Runtime$_ = class extends U._$DefendedBase$_ {
        constructor(t) {
            t = Object.assign({}, i, t), super(), this._$_messagePort$_ = t.messagePort, 
            this._$_runtimeBaseUrl$_ = t.runtimeBaseUrl, this._$_previewUrl$_ = t.previewUrl, 
            this._$_isHeadless$_ = !!t.headless, this._$_hasDom$_ = !!t.hasDom, 
            this._$_isInWorker$_ = !!t.isInWorker, r = t.ife, this._$_useAudio$_ = !!t.useAudio, 
            this._$_exportType$_ = t.exportType, this._$_isNWjs$_ = t.isNWjs, this._$_isiOSCordova$_ = !!t.isiOSCordova, 
            this._$_isiOSWebView$_ = !!t.isiOSWebView, this._$_isWindowsWebView2$_ = !!t.isWindowsWebView2, 
            this._$_isAnyWebView2Wrapper$_ = !!t.isAnyWebView2Wrapper, this._$_isFBInstantAvailable$_ = !!t.isFBInstantAvailable, 
            this._$_isDebug$_ = !("preview" !== this._$_exportType$_ || !t.isDebug), 
            this._$_breakpointsEnabled$_ = this._$_isDebug$_, this._$_isDebugging$_ = this._$_isDebug$_, 
            this._$_debuggingDisabled$_ = 0, this._$_additionalLoadPromises$_ = [], 
            this._$_additionalCreatePromises$_ = [], this._$_isUsingCreatePromises$_ = !1, 
            this._$_projectName$_ = "", this._$_projectVersion$_ = "", this._$_projectUniqueId$_ = "", 
            this._$_appId$_ = "", this._$_exportTimestamp$_ = 0, this._$_originalViewportWidth$_ = 0, 
            this._$_originalViewportHeight$_ = 0, this._$_devicePixelRatio$_ = self.devicePixelRatio, 
            this._$_parallaxXorigin$_ = 0, this._$_parallaxYorigin$_ = 0, this._$_viewportWidth$_ = 0, 
            this._$_viewportHeight$_ = 0, this._$_loaderStyle$_ = 0, this._$_usesLoaderLayout$_ = !1, 
            this._$_isLoading$_ = !0, this._$_usesAnyBackgroundBlending$_ = !1, 
            this._$_usesAnyCrossSampling$_ = !1, this._$_usesAnyDepthSampling$_ = !1, 
            this._$_loadingLogoAsset$_ = null, this._$_assetManager$_ = U._$New$_(U._$AssetManager$_, this, t), 
            this._$_layoutManager$_ = U._$New$_(U._$LayoutManager$_, this), this._$_eventSheetManager$_ = U._$New$_(U._$EventSheetManager$_, this), 
            this._$_addonManager$_ = U._$New$_(U._$AddonManager$_, this, t.wrapperComponentIds), 
            this._$_collisionEngine$_ = U._$New$_(U._$CollisionEngine$_, this), 
            this._$_timelineManager$_ = U._$New$_(U._$TimelineManager$_, this), 
            this._$_transitionManager$_ = U._$New$_(U._$TransitionManager$_, this), 
            this._$_templateManager$_ = U._$New$_(U._$TemplateManager$_, this), 
            this._$_flowchartManager$_ = U._$New$_(U._$FlowchartManager$_, this), 
            this._$_textIconManager$_ = U._$New$_(U._$TextIconManager$_, {
                _$getIconSetMeta$_: t => this._$_GetTextIconSetMeta$_(t),
                _$getIconSetContent$_: t => this._$_GetTextIconSetContent$_(t)
            }), this._$_iconChangeHandlers$_ = new Map(), this._$_allObjectClasses$_ = [], 
            this._$_objectClassesByName$_ = new Map(), this._$_objectClassesBySid$_ = new Map(), 
            this._$_familyCount$_ = 0, this._$_allContainers$_ = [], this._$_allEffectLists$_ = new Set(), 
            this._$_currentLayoutStack$_ = [], this._$_instancesPendingCreate$_ = [], 
            this._$_instancesPendingDestroy$_ = new Map(), this._$_hasPendingInstances$_ = !1, 
            this._$_isFlushingPendingInstances$_ = !1, this._$_objectCount$_ = 0, 
            this._$_nextUid$_ = 0, this._$_instancesByUid$_ = new Map(), this._$_instancesPendingRelease$_ = new Set(), 
            this._$_instancesPendingReleaseAffectedObjectClasses$_ = new Set(), 
            this._$_objectReferenceTable$_ = [], this._$_jsPropNameTable$_ = [], 
            this._$_canvasManager$_ = null, this._$_uses3dFeatures$_ = !1, this._$_framerateMode$_ = "vsync", 
            this._$_sampling$_ = "trilinear", this._$_isPixelRoundingEnabled$_ = !1, 
            this._$_needRender$_ = !0, this._$_pauseOnBlur$_ = !1, this._$_isPausedOnBlur$_ = !1, 
            this._$_exportToVideo$_ = null, this._$_tickCallbacks$_ = {
                _$normal$_: t => {
                    this._$_rafId$_ = -1, this._$_ruafId$_ = -1, this._$Tick$_(t);
                },
                _$tickOnly$_: t => {
                    this._$_ruafId$_ = -1, this._$Tick$_(t, !1, "skip-render");
                },
                _$renderOnly$_: () => {
                    this._$_rafId$_ = -1, this._$Render$_();
                }
            }, this._$_rafId$_ = -1, this._$_ruafId$_ = -1, this._$_tickCount$_ = 0, 
            this._$_tickCountNoSave$_ = 0, this._$_hasStarted$_ = !1, this._$_isInTick$_ = !1, 
            this._$_hasStartedTicking$_ = !1, this._$_isLayoutFirstTick$_ = !0, 
            this._$_isAutoSuspendEnabled$_ = !0, this._$_isPageVisibilitySuspended$_ = !1, 
            this._$_suspendCount$_ = 0, this._$_scheduleTriggersThrottle$_ = new U._$PromiseThrottle$_(1), 
            this._$_randomNumberCallback$_ = () => Math.random(), this._$_startTime$_ = 0, 
            this._$_lastTickTime$_ = 0, this._$_dtRaw$_ = 0, this._$_dt1$_ = 0, 
            this._$_dt$_ = 0, this._$_timeScale$_ = 1, this._$_maxDt$_ = 1 / 30, 
            this._$_minDt$_ = 0, this._$_gameTime$_ = U._$New$_(U._$KahanSum$_), 
            this._$_gameTimeRaw$_ = U._$New$_(U._$KahanSum$_), this._$_wallTime$_ = U._$New$_(U._$KahanSum$_), 
            this._$_instanceTimes$_ = new Map(), this._$_fpsFrameCount$_ = -1, this._$_fpsLastTime$_ = 0, 
            this._$_fps$_ = 0, this._$_tpsTickCount$_ = -1, this._$_tps$_ = 0, this._$_mainThreadTimeCounter$_ = 0, 
            this._$_mainThreadTime$_ = 0, this._$_isLoadingState$_ = !1, this._$_saveToSlotName$_ = "", 
            this._$_saveToJsonString$_ = !1, this._$_loadFromSlotName$_ = "", this._$_loadFromJson$_ = null, 
            this._$_lastSaveJson$_ = "", this._$_projectStorage$_ = null, this._$_savegamesStorage$_ = null, 
            this._$_dispatcher$_ = U._$New$_(U.Event._$Dispatcher$_), this._$_domEventHandlers$_ = new Map(), 
            this._$_pendingResponsePromises$_ = new Map(), this._$_nextDomResponseId$_ = 0, 
            this._$_didRequestDeviceOrientationEvent$_ = !1, this._$_didRequestDeviceMotionEvent$_ = !1, 
            this._$_isReadyToHandleEvents$_ = !1, this._$_waitingToHandleEvents$_ = [], 
            this._$_eventObjects$_ = {
                pretick: U._$New$_(U.Event, "pretick", !1),
                tick: U._$New$_(U.Event, "tick", !1),
                tick2: U._$New$_(U.Event, "tick2", !1),
                instancecreate: U._$New$_(U.Event, "instancecreate", !1),
                instancedestroy: U._$New$_(U.Event, "instancedestroy", !1),
                beforelayoutchange: U._$New$_(U.Event, "beforelayoutchange", !1),
                layoutchange: U._$New$_(U.Event, "layoutchange", !1)
            }, this._$_eventObjects$_.instancecreate._$instance$_ = null, this._$_eventObjects$_.instancedestroy._$instance$_ = null, 
            this._$_userScriptDispatcher$_ = U._$New$_(U.Event._$Dispatcher$_), 
            this._$_userScriptEventObjects$_ = null;
            const s = (t, s) => U._$BehaviorInstance$_._$SortByTickSequence$_(this, t, s);
            this._$_behInstsToTick$_ = U._$New$_(U._$RedBlackSet$_, s), this._$_behInstsToPostTick$_ = U._$New$_(U._$RedBlackSet$_, s), 
            this._$_behInstsToTick2$_ = U._$New$_(U._$RedBlackSet$_, s), this._$_jobScheduler$_ = U._$New$_(U._$JobSchedulerRuntime$_, this, t.jobScheduler), 
            t.canvas && (this._$_canvasManager$_ = U._$New$_(U._$CanvasManager$_, this)), 
            this._$_messagePort$_.onmessage = t => this._OnMessageFromDOM(t.data), 
            this._$AddDOMComponentMessageHandler$_("runtime", "visibilitychange", t => this._$_OnVisibilityChange$_(t)), 
            this._$AddDOMComponentMessageHandler$_("runtime", "wrapper-extension-message", t => this._$_OnWrapperExtensionMessage$_(t)), 
            this._$AddDOMComponentMessageHandler$_("runtime", "get-remote-preview-status-info", () => this._$_GetRemotePreviewStatusInfo$_()), 
            this._$AddDOMComponentMessageHandler$_("runtime", "js-invoke-function", t => this._$_InvokeFunctionFromJS$_(t)), 
            this._$AddDOMComponentMessageHandler$_("runtime", "go-to-last-error-script", self.goToLastErrorScript), 
            this._$AddDOMComponentMessageHandler$_("runtime", "offline-audio-render-completed", t => this._$_OnOfflineAudioRenderCompleted$_(t)), 
            this._$_dispatcher$_.addEventListener("window-blur", t => this._$_OnWindowBlur$_(t)), 
            this._$_dispatcher$_.addEventListener("window-focus", () => this._$_OnWindowFocus$_()), 
            this._$_timelineManager$_._$AddRuntimeListeners$_(), this._$_templateManager$_._$AddRuntimeListeners$_(), 
            this._$_iRuntime$_ = null, this._$_interfaceMap$_ = new WeakMap(), this._$_commonScriptInterfaces$_ = {
                keyboard: null,
                _$mouse$_: null,
                _$touch$_: null,
                _$timelineController$_: null
            }, this._$_instancesNeedingAfterLoadMap$_ = new WeakMap(), this._$_instancesNeedingAfterLoadArray$_ = [];
        }
        static _$Create$_(t) {
            return U._$New$_(U._$Runtime$_, t);
        }
        _$Release$_() {
            U._$clearArray$_(this._$_allObjectClasses$_), this._$_objectClassesByName$_.clear(), 
            this._$_objectClassesBySid$_.clear(), this._$_layoutManager$_._$Release$_(), 
            this._$_layoutManager$_ = null, this._$_eventSheetManager$_._$Release$_(), 
            this._$_eventSheetManager$_ = null, this._$_addonManager$_._$Release$_(), 
            this._$_addonManager$_ = null, this._$_assetManager$_._$Release$_(), 
            this._$_assetManager$_ = null, this._$_collisionEngine$_._$Release$_(), 
            this._$_collisionEngine$_ = null, this._$_timelineManager$_._$Release$_(), 
            this._$_timelineManager$_ = null, this._$_transitionManager$_._$Release$_(), 
            this._$_transitionManager$_ = null, this._$_templateManager$_._$Release$_(), 
            this._$_templateManager$_ = null, this._$_flowchartManager$_._$Release$_(), 
            this._$_flowchartManager$_ = null, this._$_textIconManager$_._$Release$_(), 
            this._$_textIconManager$_ = null, this._$_canvasManager$_ && (this._$_canvasManager$_._$Release$_(), 
            this._$_canvasManager$_ = null), this._$_dispatcher$_._$Release$_(), 
            this._$_dispatcher$_ = null, this._$_tickEvent$_ = null;
        }
        ["_OnMessageFromDOM"](t) {
            const s = t.type;
            if ("event" === s) this._$_OnEventFromDOM$_(t); else {
                if ("result" !== s) throw new Error(`unknown message '${s}'`);
                this._$_OnResultFromDOM$_(t);
            }
        }
        _$_OnEventFromDOM$_(t) {
            if (this._$_isReadyToHandleEvents$_) {
                const s = t.component, i = t.handler, e = t.data, n = t.dispatchOpts, h = !(!n || !n.dispatchRuntimeEvent), r = !(!n || !n.dispatchUserScriptEvent), o = t.responseId;
                if ("runtime" === s) {
                    if (h) {
                        const l = new U.Event(i);
                        l.data = e, this._$_dispatcher$_._$dispatchEventAndWaitAsyncSequential$_(l);
                    }
                    if (r) {
                        const u = new U.Event(i, !0);
                        for (const [ c, f ] of Object.entries(e)) u[c] = f;
                        this._$DispatchUserScriptEvent$_(u);
                    }
                }
                const a = this._$_domEventHandlers$_.get(s);
                if (a) {
                    const d = a.get(i);
                    if (d) {
                        let t = null;
                        try {
                            t = d(e);
                        } catch (t) {
                            return console.error(`Exception in '${s}' handler '${i}':`, t), 
                            void (null !== o && this._$_PostResultToDOM$_(o, !1, "" + t));
                        }
                        null !== o && (t && t.then ? t.then(t => this._$_PostResultToDOM$_(o, !0, t)).catch(t => {
                            console.error(`Rejection from '${s}' handler '${i}':`, t), 
                            this._$_PostResultToDOM$_(o, !1, "" + t);
                        }) : this._$_PostResultToDOM$_(o, !0, t));
                    } else h || r || console.warn(`[Runtime] No DOM handler '${i}' for component '${s}'`);
                } else h || r || console.warn(`[Runtime] No DOM event handlers for component '${s}'`);
            } else this._$_waitingToHandleEvents$_.push(t);
        }
        _$_PostResultToDOM$_(t, s, i) {
            this._$_messagePort$_.postMessage({
                type: "result",
                responseId: t,
                isOk: s,
                result: i
            });
        }
        _$_OnResultFromDOM$_(t) {
            const s = t.responseId, i = t.isOk, e = t.result, n = this._$_pendingResponsePromises$_.get(s);
            i ? n.resolve(e) : n.reject(e), this._$_pendingResponsePromises$_.delete(s);
        }
        _$AddDOMComponentMessageHandler$_(t, s, i) {
            let e = this._$_domEventHandlers$_.get(t);
            if (e || (e = new Map(), this._$_domEventHandlers$_.set(t, e)), e.has(s)) throw new Error(`[Runtime] Component '${t}' already has handler '${s}'`);
            e.set(s, i);
        }
        _$PostComponentMessageToDOM$_(t, s, i, e) {
            this._$_messagePort$_.postMessage({
                type: "event",
                component: t,
                handler: s,
                data: i,
                responseId: null
            }, e);
        }
        _$PostComponentMessageToDOMAsync$_(t, s, i, e) {
            const n = this._$_nextDomResponseId$_++, h = new Promise((t, s) => {
                this._$_pendingResponsePromises$_.set(n, {
                    resolve: t,
                    reject: s
                });
            });
            return this._$_messagePort$_.postMessage({
                type: "event",
                component: t,
                handler: s,
                data: i,
                responseId: n
            }, e), h;
        }
        _$SendWrapperExtensionMessage$_(t, s, i, e = -1) {
            this._$PostComponentMessageToDOM$_("runtime", "send-wrapper-extension-message", {
                componentId: t,
                messageId: s,
                params: i,
                asyncId: e
            });
        }
        _$SendWrapperExtensionMessageAsync$_(t, s, i) {
            const e = this._$_nextDomResponseId$_++, n = new Promise((t, s) => {
                this._$_pendingResponsePromises$_.set(e, {
                    resolve: t,
                    reject: s
                });
            });
            return this._$SendWrapperExtensionMessage$_(t, s, i, e), n;
        }
        _$_OnWrapperExtensionMessage$_(t) {
            if (-1 !== t.asyncId) {
                const s = t.asyncId, i = this._$_pendingResponsePromises$_.get(s);
                i.resolve(t.params), this._$_pendingResponsePromises$_.delete(s);
            } else this._$_OnEventFromDOM$_({
                component: "wrapper-extension:" + t.componentId,
                handler: t.messageId,
                data: t.params,
                responseId: null
            });
        }
        _$AddWrapperExtensionMessageHandler$_(t, s, i) {
            this._$AddDOMComponentMessageHandler$_("wrapper-extension:" + t, s, i);
        }
        _$HasWrapperComponentId$_(t) {
            return this._$_addonManager$_._$HasWrapperComponentId$_(t);
        }
        _$PostToDebugger$_(t) {
            if (!this._$IsDebug$_()) throw new Error("not in debug mode");
            this._$PostComponentMessageToDOM$_("runtime", "post-to-debugger", t);
        }
        async _$Init$_(t) {
            U._$CommonACES_SetRuntime$_(this), this._$IsDebug$_() ? await W._$Init$_(this) : self.C3Debugger && self.C3Debugger.InitPreview(this);
            const s = await this._$_assetManager$_._$FetchJson$_("data.json");
            if (await this._$_LoadDataJson$_(s), await this._$_InitialiseCanvas$_(t), 
            this._$IsPreview$_() || console.info("%cMade with Construct, the game and animation creation tool. Visit: https://www.construct.net", "font-weight: bold"), 
            this._$GetWebGLRenderer$_()) {
                const i = this._$GetWebGLRenderer$_();
                console.info(`[C3 runtime] Hosted in ${this._$IsInWorker$_() ? "worker" : "DOM"}, rendering with WebGL ${i._$GetWebGLVersionNumber$_()} [${i._$GetUnmaskedRenderer$_()}]`);
            } else this._$GetWebGPURenderer$_() && console.info(`[C3 runtime] Hosted in ${this._$IsInWorker$_() ? "worker" : "DOM"}, rendering with WebGPU [${this._$GetWebGPURenderer$_().GetAdapterInfoString()}]`);
            this._$GetRenderer$_()._$HasMajorPerformanceCaveat$_() && console.warn("[C3 runtime] The renderer indicates a major performance caveat. Software rendering may be in use. This can result in significantly degraded performance."), 
            this._$_isReadyToHandleEvents$_ = !0;
            for (const e of this._$_waitingToHandleEvents$_) this._$_OnEventFromDOM$_(e);
            U._$clearArray$_(this._$_waitingToHandleEvents$_), this._$_canvasManager$_ && this._$_canvasManager$_._$StartLoadingScreen$_();
            for (const n of t.runOnStartupFunctions) this._$_additionalLoadPromises$_.push(this._$_RunOnStartupFunction$_(n));
            if (await Promise.all([ this._$_assetManager$_._$WaitForAllToLoad$_(), ...this._$_additionalLoadPromises$_ ]), 
            U._$clearArray$_(this._$_additionalLoadPromises$_), !this._$_assetManager$_._$HasHadErrorLoading$_()) return this._$_canvasManager$_ && await this._$_canvasManager$_._$EndLoadingScreen$_(), 
            await this._$_dispatcher$_._$dispatchEventAndWaitAsync$_(new U.Event("beforeruntimestart")), 
            await this._$Start$_(), this._$_messagePort$_.postMessage({
                type: "runtime-ready"
            }), this;
            this._$_canvasManager$_ && this._$_canvasManager$_._$HideCordovaSplashScreen$_();
        }
        async _$_RunOnStartupFunction$_(t) {
            try {
                await t(this._$_iRuntime$_);
            } catch (t) {
                console.error("[C3 runtime] Error in runOnStartup function: ", t);
            }
        }
        async _$_LoadDataJson$_(t) {
            const s = t.project, i = (this._$_projectName$_ = s[0], this._$_projectVersion$_ = s[16], 
            this._$_projectUniqueId$_ = s[31], this._$_appId$_ = s[38], this._$_exportTimestamp$_ = s[36], 
            s[39] || "loading-logo.png"), e = (this._$_isPixelRoundingEnabled$_ = !!s[9], 
            this._$_originalViewportWidth$_ = this._$_viewportWidth$_ = s[10], this._$_originalViewportHeight$_ = this._$_viewportHeight$_ = s[11], 
            this._$_collisionEngine$_._$_InitCollisionCellSize$_(this._$_originalViewportWidth$_, this._$_originalViewportHeight$_), 
            this._$_parallaxXorigin$_ = this._$_originalViewportWidth$_ / 2, this._$_parallaxYorigin$_ = this._$_originalViewportHeight$_ / 2, 
            this._$_framerateMode$_ = s[37], this._$_uses3dFeatures$_ = !!s[40], 
            this._$_sampling$_ = s[14], this._$_usesAnyBackgroundBlending$_ = s[15], 
            this._$_usesAnyCrossSampling$_ = s[42], this._$_usesAnyDepthSampling$_ = s[17], 
            this._$_usesLoaderLayout$_ = !!s[18], this._$_loaderStyle$_ = s[19], 
            this._$_nextUid$_ = s[21], this._$_pauseOnBlur$_ = s[22], this._$_assetManager$_);
            if (e._$_SetFileStructure$_(s[45]), e._$_SetAudioFiles$_(s[7], s[25]), 
            e._$_SetMediaSubfolder$_(s[8]), e._$_SetFontsSubfolder$_(s[32]), e._$_SetIconsSubfolder$_(s[28]), 
            e._$_SetWebFonts$_(s[29]), 0 === this._$_loaderStyle$_) {
                let t;
                (t = "flat" === e._$GetFileStructure$_() ? e._$GetIconsSubfolder$_() + i : i) && (this._$_loadingLogoAsset$_ = e._$LoadImage$_({
                    url: t
                }));
            }
            this._$_canvasManager$_ && (this._$_canvasManager$_._$SetFullscreenMode$_(U._$CanvasManager$_._$_FullscreenModeNumberToString$_(s[12])), 
            this._$_canvasManager$_._$SetFullscreenScalingQuality$_(s[23] ? "high" : "low"), 
            this._$_canvasManager$_._$SetMipmapsEnabled$_(0 !== s[24]), this._$_canvasManager$_._$_SetGPUPowerPreference$_(s[34]), 
            this._$_canvasManager$_._$_SetTextureAnisotropy$_(s[41]), this._$_canvasManager$_._$_SetWebGPUEnabled$_(s[13]), 
            this._$_canvasManager$_._$_SetZAxisScale$_(s[30]), this._$_canvasManager$_._$_SetZDistances$_(s[46], s[47]), 
            this._$_canvasManager$_._$_SetInitFieldOfView$_(s[26]), this._$_canvasManager$_._$_SetLimitedToWebGL1$_(s[48]), 
            this._$_canvasManager$_._$_SetMultitexturingMode$_(s[50]));
            const n = s[43], h = (n && await this._$_LoadExportToVideoData$_(n), 
            this._$_InitScriptInterfaces$_(), this._$_addonManager$_._$CreateSystemPlugin$_(), 
            this._$_objectReferenceTable$_ = self._$C3_GetObjectRefTable$_(), s[2]);
            for (const l of h[1]) this._$_addonManager$_._$CreateBehavior$_(l);
            for (const u of h[0]) this._$_addonManager$_._$CreatePlugin$_(u);
            this._$_objectReferenceTable$_ = self._$C3_GetObjectRefTable$_(), this._$_LoadJsPropNameTable$_(), 
            this._$_addonManager$_._$_InitAddonScriptInterfaces$_();
            for (const c of s[3]) {
                const f = U._$ObjectClass$_._$Create$_(this, this._$_allObjectClasses$_.length, c);
                this._$_allObjectClasses$_.push(f), this._$_objectClassesByName$_.set(f._$GetName$_().toLowerCase(), f), 
                this._$_objectClassesBySid$_.set(f._$GetSID$_(), f);
            }
            for (const d of s[4]) {
                const p = this._$_allObjectClasses$_[d[0]];
                p._$_LoadFamily$_(d);
            }
            for (const m of s[27]) {
                const g = m.map(t => this._$_allObjectClasses$_[t]);
                this._$_allContainers$_.push(U._$New$_(U._$Container$_, this, g));
            }
            this._$_InitObjectsScriptInterface$_();
            for (const y of this._$_allObjectClasses$_) y._$_OnAfterCreate$_();
            for (const M of s[5]) this._$_layoutManager$_._$Create$_(M);
            const r = s[1];
            if (r) {
                const w = this._$_layoutManager$_._$GetLayoutByName$_(r);
                w && this._$_layoutManager$_._$SetFirstLayout$_(w);
            }
            for (const x of s[35]) this._$_transitionManager$_._$Create$_(x);
            for (const S of s[33]) this._$_timelineManager$_._$Create$_(S);
            for (const T of s[44]) this._$_templateManager$_._$Create$_(T);
            this._$_templateManager$_._$HasTemplates$_() || (this._$_templateManager$_._$Release$_(), 
            this._$_templateManager$_ = null);
            for (const b of s[49]) this._$_flowchartManager$_._$Create$_(b);
            this._$_flowchartManager$_._$HasFlowcharts$_() || (this._$_flowchartManager$_._$Release$_(), 
            this._$_flowchartManager$_ = null);
            for (const v of s[6]) this._$_eventSheetManager$_._$Create$_(v);
            this._$_eventSheetManager$_._$_PostInit$_(), this._$_InitGlobalVariableScriptInterface$_(), 
            U._$clearArray$_(this._$_objectReferenceTable$_), this._$FlushPendingInstances$_();
            let o = "any", a = s[20];
            1 === a ? o = "portrait" : 2 === a && (o = "landscape"), this._$PostComponentMessageToDOM$_("runtime", "set-target-orientation", {
                targetOrientation: o
            });
        }
        async _$_LoadExportToVideoData$_(t) {
            const s = t.format;
            "image-sequence" === s ? this._$_exportToVideo$_ = new self.C3ExportToImageSequence(this, t) : "image-sequence-gif" === s ? this._$_exportToVideo$_ = new self.C3ExportToGIF(this, t) : "webm" === s ? this._$_exportToVideo$_ = new self.C3ExportToWebMVideo(this, t) : "mp4" === s && (this._$_exportToVideo$_ = new self.C3ExportToMP4Video(this, t)), 
            this._$_framerateMode$_ = "unlimited-frame", this._$_canvasManager$_._$SetFullscreenMode$_("off"), 
            this._$_devicePixelRatio$_ = 1, self.devicePixelRatio = 1, await this._$PostComponentMessageToDOMAsync$_("runtime", "set-exporting-to-video", {
                message: this._$_exportToVideo$_.GetExportingMessageForPercent(0),
                duration: this._$_exportToVideo$_._$GetDuration$_()
            });
        }
        _$GetLoaderStyle$_() {
            return this._$_loaderStyle$_;
        }
        _$IsExportToVideo$_() {
            return null !== this._$_exportToVideo$_;
        }
        _$GetExportVideoDuration$_() {
            return this._$_exportToVideo$_._$GetDuration$_();
        }
        _$GetExportVideoFramerate$_() {
            return this._$_exportToVideo$_.GetFramerate();
        }
        _$_InitExportToVideo$_() {
            return this._$_exportToVideo$_._$Init$_({
                width: this._$_canvasManager$_._$GetDeviceWidth$_(),
                height: this._$_canvasManager$_._$GetDeviceHeight$_()
            });
        }
        _$_ExportToVideoAddFrame$_() {
            const t = this._$_tickCount$_ / this._$GetExportVideoFramerate$_();
            return this._$_exportToVideo$_.AddFrame(this._$_canvasManager$_._$GetMainCanvas$_(), t);
        }
        _$_ExportToVideoAddKeyframe$_() {
            this._$_exportToVideo$_ && this._$_exportToVideo$_._$AddKeyframe$_();
        }
        _$_OnOfflineAudioRenderCompleted$_(t) {
            this._$_exportToVideo$_.OnOfflineAudioRenderCompleted(t);
        }
        _$_ExportToVideoFinish$_() {
            return this._$_exportToVideo$_._$Finish$_();
        }
        _$IsFBInstantAvailable$_() {
            return this._$_isFBInstantAvailable$_;
        }
        _$IsLoading$_() {
            return this._$_isLoading$_;
        }
        _$AddLoadPromise$_(t) {
            this._$_additionalLoadPromises$_.push(t);
        }
        _$SetUsingCreatePromises$_(t) {
            this._$_isUsingCreatePromises$_ = !!t;
        }
        _$AddCreatePromise$_(t) {
            this._$_isUsingCreatePromises$_ && this._$_additionalCreatePromises$_.push(t);
        }
        _$GetCreatePromises$_() {
            return this._$_additionalCreatePromises$_;
        }
        _$_GetNextFamilyIndex$_() {
            return this._$_familyCount$_++;
        }
        _$GetFamilyCount$_() {
            return this._$_familyCount$_;
        }
        _$_AddEffectList$_(t) {
            this._$_allEffectLists$_.add(t);
        }
        _$_RemoveEffectList$_(t) {
            this._$_allEffectLists$_.delete(t);
        }
        _$_GetAllEffectLists$_() {
            return this._$_allEffectLists$_;
        }
        async _$_InitialiseCanvas$_(t) {
            this._$_canvasManager$_ && (await this._$_canvasManager$_._$CreateCanvas$_(t), 
            this._$_canvasManager$_._$InitLoadingScreen$_(this._$_loaderStyle$_));
        }
        async _$Start$_() {
            this._$_hasStarted$_ = !0, this._$_startTime$_ = Date.now();
            let s = null, t = new Promise(t => s = t);
            if (this._$_usesLoaderLayout$_) {
                for (const n of this._$_allObjectClasses$_) n._$IsFamily$_() || n._$IsOnLoaderLayout$_() || !n._$IsWorldType$_() || n._$OnCreate$_();
                (async () => {
                    await this._$_assetManager$_._$WaitForAllToLoad$_(), await t, 
                    this._$_isLoading$_ = !1, this._$_OnLoadFinished$_();
                })();
            } else this._$_isLoading$_ = !1;
            this._$_assetManager$_._$SetInitialLoadFinished$_(), this._$IsDebug$_() && W.RuntimeInit(r);
            for (const h of this._$_layoutManager$_._$GetAllLayouts$_()) h._$_CreateGlobalNonWorlds$_();
            this._$IsExportToVideo$_() && await this._$_InitExportToVideo$_();
            const i = this._$_layoutManager$_._$GetFirstLayout$_(), e = (await i._$_Load$_(null, this._$GetRenderer$_()), 
            await i._$_StartRunning$_(!0), this._$_fpsLastTime$_ = performance.now(), 
            s(), this._$_usesLoaderLayout$_ || this._$_OnLoadFinished$_(), await this._$PostComponentMessageToDOMAsync$_("runtime", "before-start-ticking"));
            e.isSuspended && !this._$IsExportToVideo$_() ? (this._$_suspendCount$_++, 
            this._$_isPageVisibilitySuspended$_ = !0) : this._$Tick$_();
        }
        _$_OnLoadFinished$_() {
            this._$Trigger$_(U._$Plugins$_._$System$_._$Cnds$_._$OnLoadFinished$_, null, null), 
            this._$PostComponentMessageToDOM$_("runtime", "register-sw");
        }
        _$GetObjectReference$_(t) {
            t = Math.floor(t);
            const s = this._$_objectReferenceTable$_;
            if (t < 0 || t >= s.length) throw new Error("invalid object reference");
            return s[t];
        }
        _$_LoadJsPropNameTable$_() {
            for (const t of self._$C3_JsPropNameTable$_) {
                const s = U.first(Object.keys(t));
                this._$_jsPropNameTable$_.push(s);
            }
        }
        _$GetJsPropName$_(t) {
            t = Math.floor(t);
            const s = this._$_jsPropNameTable$_;
            if (t < 0 || t >= s.length) throw new Error("invalid prop reference");
            return s[t];
        }
        _$HasDOM$_() {
            return this._$_hasDom$_;
        }
        _$IsHeadless$_() {
            return this._$_isHeadless$_;
        }
        _$IsInWorker$_() {
            return this._$_isInWorker$_;
        }
        _$GetRuntimeBaseURL$_() {
            return this._$_runtimeBaseUrl$_;
        }
        _$GetPreviewURL$_() {
            return this._$_previewUrl$_;
        }
        _$GetEventSheetManager$_() {
            return this._$_eventSheetManager$_;
        }
        _$GetEventStack$_() {
            return this._$_eventSheetManager$_._$GetEventStack$_();
        }
        _$GetCurrentEventStackFrame$_() {
            return this._$_eventSheetManager$_._$GetCurrentEventStackFrame$_();
        }
        _$GetCurrentEvent$_() {
            return this._$_eventSheetManager$_._$GetCurrentEvent$_();
        }
        _$GetCurrentCondition$_() {
            return this._$_eventSheetManager$_._$GetCurrentCondition$_();
        }
        _$IsCurrentConditionFirst$_() {
            return 0 === this._$GetCurrentEventStackFrame$_()._$GetConditionIndex$_();
        }
        _$GetCurrentAction$_() {
            return this._$_eventSheetManager$_._$GetCurrentAction$_();
        }
        _$GetAddonManager$_() {
            return this._$_addonManager$_;
        }
        _$GetSystemPlugin$_() {
            return this._$_addonManager$_._$GetSystemPlugin$_();
        }
        _$GetObjectClassByIndex$_(t) {
            if ((t = Math.floor(t)) < 0 || t >= this._$_allObjectClasses$_.length) throw new RangeError("invalid index");
            return this._$_allObjectClasses$_[t];
        }
        _$GetObjectClassByName$_(t) {
            return this._$_objectClassesByName$_.get(t.toLowerCase()) || null;
        }
        _$GetObjectClassBySID$_(t) {
            return this._$_objectClassesBySid$_.get(t) || null;
        }
        _$GetSingleGlobalObjectClassByCtor$_(t) {
            const s = U._$AddonManager$_._$GetPluginByConstructorFunction$_(t);
            return s ? s._$GetSingleGlobalObjectClass$_() : null;
        }
        _$GetAllObjectClasses$_() {
            return this._$_allObjectClasses$_;
        }
        *_$allInstances$_() {
            for (const t of this._$_allObjectClasses$_) t._$IsFamily$_() || (yield* t.instances());
        }
        _$Dispatcher$_() {
            return this._$_dispatcher$_;
        }
        _$UserScriptDispatcher$_() {
            return this._$_userScriptDispatcher$_;
        }
        _$DispatchUserScriptEvent$_(t) {
            t.runtime = this._$GetIRuntime$_();
            const s = this._$IsDebug$_() && !this._$_eventSheetManager$_._$IsInEventEngine$_();
            s && W.StartMeasuringScriptTime(), this._$_userScriptDispatcher$_.dispatchEvent(t), 
            s && W.AddScriptTime();
        }
        _$DispatchUserScriptEventAsyncWait$_(t) {
            return t.runtime = this._$GetIRuntime$_(), this._$_userScriptDispatcher$_._$dispatchEventAndWaitAsync$_(t);
        }
        _$GetOriginalViewportWidth$_() {
            return this._$_originalViewportWidth$_;
        }
        _$GetOriginalViewportHeight$_() {
            return this._$_originalViewportHeight$_;
        }
        _$SetOriginalViewportSize$_(t, s) {
            if (this._$_originalViewportWidth$_ !== t || this._$_originalViewportHeight$_ !== s) {
                this._$_originalViewportWidth$_ = t, this._$_originalViewportHeight$_ = s;
                const i = this._$GetLayoutManager$_();
                i._$SetAllLayerProjectionChanged$_(), i._$SetAllLayerMVChanged$_();
            }
        }
        _$GetViewportWidth$_() {
            return this._$_viewportWidth$_;
        }
        _$GetViewportHeight$_() {
            return this._$_viewportHeight$_;
        }
        _$SetViewportSize$_(t, s) {
            if (this._$_viewportWidth$_ !== t || this._$_viewportHeight$_ !== s) {
                this._$_viewportWidth$_ = t, this._$_viewportHeight$_ = s;
                const i = this._$GetLayoutManager$_();
                i._$SetAllLayerProjectionChanged$_(), i._$SetAllLayerMVChanged$_();
            }
        }
        _$_SetDevicePixelRatio$_(t) {
            this._$IsExportToVideo$_() || (this._$_devicePixelRatio$_ = t);
        }
        _$GetDevicePixelRatio$_() {
            return this._$_devicePixelRatio$_;
        }
        _$GetParallaxXOrigin$_() {
            return this._$_parallaxXorigin$_;
        }
        _$GetParallaxYOrigin$_() {
            return this._$_parallaxYorigin$_;
        }
        _$GetCanvasManager$_() {
            return this._$_canvasManager$_;
        }
        _$GetDrawWidth$_() {
            return this._$_canvasManager$_ ? this._$_canvasManager$_._$GetDrawWidth$_() : this._$_viewportWidth$_;
        }
        _$GetDrawHeight$_() {
            return this._$_canvasManager$_ ? this._$_canvasManager$_._$GetDrawHeight$_() : this._$_viewportHeight$_;
        }
        _$GetRenderScale$_() {
            return this._$_canvasManager$_ ? this._$_canvasManager$_._$GetRenderScale$_() : 1;
        }
        _$GetDisplayScale$_() {
            return this._$_canvasManager$_ ? this._$_canvasManager$_._$GetDisplayScale$_() : 1;
        }
        _$GetEffectLayerScaleParam$_() {
            return this._$_canvasManager$_ ? this._$_canvasManager$_._$GetEffectLayerScaleParam$_() : 1;
        }
        _$GetEffectDevicePixelRatioParam$_() {
            return this._$_canvasManager$_ ? this._$_canvasManager$_._$GetEffectDevicePixelRatioParam$_() : 1;
        }
        _$GetCanvasClientX$_() {
            return this._$_canvasManager$_ ? this._$_canvasManager$_._$GetCanvasClientX$_() : 0;
        }
        _$GetCanvasClientY$_() {
            return this._$_canvasManager$_ ? this._$_canvasManager$_._$GetCanvasClientY$_() : 0;
        }
        _$GetCanvasCssWidth$_() {
            return this._$_canvasManager$_ ? this._$_canvasManager$_._$GetCssWidth$_() : 0;
        }
        _$GetCanvasCssHeight$_() {
            return this._$_canvasManager$_ ? this._$_canvasManager$_._$GetCssHeight$_() : 0;
        }
        _$GetFullscreenMode$_() {
            return this._$_canvasManager$_ ? this._$_canvasManager$_._$GetFullscreenMode$_() : "off";
        }
        _$GetAdditionalRenderTarget$_(t) {
            return this._$_canvasManager$_ ? this._$_canvasManager$_._$GetAdditionalRenderTarget$_(t) : null;
        }
        _$ReleaseAdditionalRenderTarget$_(t) {
            this._$_canvasManager$_ && this._$_canvasManager$_._$ReleaseAdditionalRenderTarget$_(t);
        }
        _$UsesAnyBackgroundBlending$_() {
            return this._$_usesAnyBackgroundBlending$_;
        }
        _$UsesAnyCrossSampling$_() {
            return this._$_usesAnyCrossSampling$_;
        }
        _$UsesAnyDepthSampling$_() {
            return this._$_usesAnyDepthSampling$_;
        }
        _$GetGPUUtilisation$_() {
            return this._$_canvasManager$_ ? this._$_canvasManager$_._$GetGPUUtilisation$_() : NaN;
        }
        _$IsLinearSampling$_() {
            return "nearest" !== this._$GetSampling$_();
        }
        _$GetFramerateMode$_() {
            return this._$_framerateMode$_;
        }
        _$_SetFramerateMode$_(t) {
            this._$_framerateMode$_ !== t && (this._$_framerateMode$_ = t, -1 !== this._$_rafId$_ || -1 !== this._$_ruafId$_) && (this._$_CancelAnimationFrame$_(), 
            this._$_RequestAnimationFrame$_());
        }
        _$GetSampling$_() {
            return this._$_sampling$_;
        }
        _$UsesLoaderLayout$_() {
            return this._$_usesLoaderLayout$_;
        }
        _$GetLoadingLogoAsset$_() {
            return this._$_loadingLogoAsset$_;
        }
        _$ReleaseLoadingLogoAsset$_() {
            this._$_loadingLogoAsset$_ && (this._$_loadingLogoAsset$_._$ReleaseTexture$_(), 
            this._$_loadingLogoAsset$_._$Release$_(), this._$_loadingLogoAsset$_ = null);
        }
        _$GetLayoutManager$_() {
            return this._$_layoutManager$_;
        }
        _$GetMainRunningLayout$_() {
            return this._$_layoutManager$_._$GetMainRunningLayout$_();
        }
        _$GetTimelineManager$_() {
            return this._$_timelineManager$_;
        }
        _$GetTransitionManager$_() {
            return this._$_transitionManager$_;
        }
        _$GetTemplateManager$_() {
            return this._$_templateManager$_;
        }
        _$GetFlowchartManager$_() {
            return this._$_flowchartManager$_;
        }
        _$GetAssetManager$_() {
            return this._$_assetManager$_;
        }
        _$LoadImage$_(t) {
            return this._$_assetManager$_._$LoadImage$_(t);
        }
        _$CreateInstance$_(t, s, i, e, n, h) {
            if (h && this._$_templateManager$_) {
                if (t instanceof U._$ObjectClass$_ && t._$IsFamily$_()) {
                    const o = t._$GetFamilyMembers$_(), a = Math.floor(this._$Random$_() * o.length);
                    return this._$CreateInstance$_(o[a], s, i, e, n, h);
                }
                const r = this._$_templateManager$_._$GetTemplateData$_(t, h);
                if (r) {
                    const l = this._$CreateInstanceFromData$_(r, s, !1, i, e, !1, n, void 0, n);
                    return this._$_templateManager$_._$MapInstanceToTemplateName$_(l, h), 
                    l;
                }
            }
            return this._$CreateInstanceFromData$_(t, s, !1, i, e, !1, n, void 0, n);
        }
        _$CreateInstanceFromData$_(t, s, i, e, n, h, r, o, a) {
            let l = null, u = null;
            if (t instanceof U._$ObjectClass$_) {
                if ((u = t)._$IsFamily$_()) {
                    const x = u._$GetFamilyMembers$_(), S = Math.floor(this._$Random$_() * x.length);
                    u = x[S];
                }
                l = u._$GetDefaultInstanceData$_();
            } else l = t, u = this._$GetObjectClassByIndex$_(l[1]);
            const c = u._$GetPlugin$_()._$IsWorldType$_();
            if (this._$_isLoading$_ && c && !u._$IsOnLoaderLayout$_()) return null;
            const f = s;
            c || (s = null);
            let d;
            d = i && !h && l && !this._$_instancesByUid$_.has(l[2]) ? l[2] : this._$_nextUid$_++;
            const p = l ? l[0] : null, m = U._$New$_(U.Instance, {
                runtime: this,
                _$objectType$_: u,
                _$layer$_: s,
                _$worldData$_: p,
                _$instVarData$_: l ? l[3] : null,
                uid: d,
                tags: l ? l[6] : null
            });
            this._$_instancesByUid$_.set(d, m);
            let g = null, y = (c && (g = m._$GetWorldInfo$_(), void 0 !== e && void 0 !== n && (g._$SetX$_(e), 
            g._$SetY$_(n)), u._$_SetAnyCollisionCellChanged$_(!0)), s && (a || s._$_AddInstance$_(m, !0), 
            s._$GetLayout$_()._$MaybeLoadTexturesFor$_(u)), this._$_objectCount$_++, 
            !0);
            if (o) {
                const T = o._$GetObjectClass$_();
                if (T._$IsInContainer$_() && u._$IsInContainer$_()) {
                    const b = u._$GetContainer$_(), v = T._$GetContainer$_();
                    b === v && (y = !1);
                }
            }
            if (u._$IsInContainer$_() && !i && !h && y) {
                const C = new Set();
                for (const G of u._$GetContainer$_()._$objectTypes$_()) if (G !== u) {
                    const I = this._$_MaybeGetChildInstanceForObjectTypeData$_(G, g, C);
                    if (I) {
                        const _ = this._$CreateInstanceFromData$_(I, f, !1, g ? g._$GetX$_() : e, g ? g._$GetY$_() : n, !0, !1, void 0, a);
                        m._$_AddSibling$_(_);
                    } else {
                        const F = this._$CreateInstanceFromData$_(G, f, !1, g ? g._$GetX$_() : e, g ? g._$GetY$_() : n, !0, !1, void 0, a);
                        m._$_AddSibling$_(F);
                    }
                }
                for (const E of m._$siblings$_()) {
                    E._$_AddSibling$_(m);
                    for (const N of m._$siblings$_()) E !== N && E._$_AddSibling$_(N);
                }
            }
            if (c && !i && r && this._$_CreateChildInstancesFromData$_(m, p, g, s, e, n, a), 
            u._$IsInContainer$_() && !i && !h && r) for (const D of m._$siblings$_()) {
                const A = D._$GetWorldInfo$_();
                if (A) {
                    const j = D._$GetPlugin$_(), L = D._$GetObjectClass$_()._$GetDefaultInstanceData$_()[0];
                    j._$IsWorldType$_() ? this._$_CreateChildInstancesFromData$_(D, L, A, s, A._$GetX$_(), A._$GetY$_(), a) : this._$_CreateChildInstancesFromData$_(D, L, A, s, void 0, void 0, a);
                }
            }
            if (!h && r) {
                void 0 === e && (e = p[0]), void 0 === n && (n = p[1]);
                const O = g._$GetTopParent$_(), z = e - g._$GetX$_() + O._$GetX$_(), B = n - g._$GetY$_() + O._$GetY$_();
                O._$SetXY$_(z, B);
            }
            u._$_SetIIDsStale$_();
            const R = l ? U._$cloneArray$_(l[5]) : null, k = l ? l[4].map(t => U._$cloneArray$_(t)) : null, M = c && p && p[13];
            if (M && m._$_SetHasTilemap$_(), m._$_CreateSdkInstance$_(R, k), M) {
                const P = p[13];
                m._$GetSdkInstance$_()._$LoadTilemapData$_(P[2], P[0], P[1]);
            }
            this._$_instancesPendingCreate$_.push(m), this._$_hasPendingInstances$_ = !0, 
            this._$IsDebug$_() && W.InstanceCreated(m);
            const w = this._$_eventObjects$_.instancecreate;
            return w._$instance$_ = m, this._$_dispatcher$_.dispatchEvent(w), m;
        }
        _$_GetInstanceData$_(t) {
            const s = t[0], i = t[1], e = t[2], n = t[6];
            if (n) return n;
            const h = this._$_layoutManager$_._$GetLayoutBySID$_(s), r = h._$GetLayer$_(i);
            return r._$GetInitialInstanceData$_(e);
        }
        _$_MaybeGetChildInstanceForObjectTypeData$_(t, s, i) {
            const e = s?._$GetSceneGraphChildrenExportData$_() ?? [];
            for (const n of e) {
                const h = this._$_GetInstanceData$_(n), r = !!n[4], o = this._$GetObjectClassByIndex$_(h[1]);
                if (!i.has(h) && t === o && r) return i.add(h), h;
            }
        }
        _$_CreateChildInstancesFromData$_(a, t, s, l, u, c, f) {
            const i = s._$GetSceneGraphZIndexExportData$_(), e = s._$GetSceneGraphChildrenExportData$_();
            if (a._$GetWorldInfo$_()._$SetSceneGraphZIndex$_(i), e) {
                void 0 === u && (u = t[0]), void 0 === c && (c = t[1]);
                const d = new Set(), p = t[0], m = t[1];
                for (const g of e) {
                    let t = g[0], s = g[1], i = g[2], e = g[3], n = !!g[4], h = g[5], r = g[6], o;
                    if (r) o = r; else {
                        const x = this._$_layoutManager$_._$GetLayoutBySID$_(t), S = x._$GetLayer$_(s);
                        o = S._$GetInitialInstanceData$_(i);
                    }
                    const y = this._$GetObjectClassByIndex$_(o[1]), M = a._$HasSibling$_(y), w = d.has(y);
                    if (M && !w && n) {
                        const T = a._$GetSibling$_(y), b = (T._$GetWorldInfo$_()._$Init$_(o[0]), 
                        u + o[0][0] - p), v = c + o[0][1] - m;
                        T._$GetWorldInfo$_()._$SetXY$_(b, v), T._$GetWorldInfo$_()._$SetSceneGraphZIndex$_(h), 
                        a._$AddChild$_(T, {
                            _$transformX$_: !!(e >> 0 & 1),
                            _$transformY$_: !!(e >> 1 & 1),
                            _$transformWidth$_: !!(e >> 2 & 1),
                            _$transformHeight$_: !!(e >> 3 & 1),
                            _$transformAngle$_: !!(e >> 4 & 1),
                            _$destroyWithParent$_: !!(e >> 5 & 1),
                            _$transformZElevation$_: !!(e >> 6 & 1),
                            _$transformOpacity$_: !!(e >> 7 & 1),
                            _$transformVisibility$_: !!(e >> 8 & 1)
                        }), d.add(y);
                    } else {
                        const C = u + o[0][0] - p, G = c + o[0][1] - m, I = this._$CreateInstanceFromData$_(o, l, !1, C, G, !1, !0, a, f);
                        I._$GetWorldInfo$_()._$SetSceneGraphZIndex$_(h), a._$AddChild$_(I, {
                            _$transformX$_: !!(e >> 0 & 1),
                            _$transformY$_: !!(e >> 1 & 1),
                            _$transformWidth$_: !!(e >> 2 & 1),
                            _$transformHeight$_: !!(e >> 3 & 1),
                            _$transformAngle$_: !!(e >> 4 & 1),
                            _$destroyWithParent$_: !!(e >> 5 & 1),
                            _$transformZElevation$_: !!(e >> 6 & 1),
                            _$transformOpacity$_: !!(e >> 7 & 1),
                            _$transformVisibility$_: !!(e >> 8 & 1)
                        });
                    }
                }
            }
        }
        _$DestroyInstance$_(i) {
            if (!this._$_instancesPendingRelease$_.has(i)) {
                let t = i._$GetObjectClass$_(), s = this._$_instancesPendingDestroy$_.get(t);
                if (s) {
                    if (s.has(i)) return;
                    s.add(i);
                } else (s = new Set()).add(i), this._$_instancesPendingDestroy$_.set(t, s);
                if (this._$IsDebug$_() && W.InstanceDestroyed(i), i._$_MarkDestroyed$_(), 
                this._$_hasPendingInstances$_ = !0, i._$IsInContainer$_()) for (const e of i._$siblings$_()) this._$DestroyInstance$_(e);
                for (const n of i.children()) n._$GetDestroyWithParent$_() && this._$DestroyInstance$_(n);
                if (!this._$_layoutManager$_._$IsEndingLayout$_() && !this._$_isLoadingState$_) {
                    const h = this._$GetEventSheetManager$_();
                    h._$BlockFlushingInstances$_(!0), i._$_TriggerOnDestroyed$_(), 
                    h._$BlockFlushingInstances$_(!1);
                }
                i._$_FireDestroyedScriptEvents$_(this._$_layoutManager$_._$IsEndingLayout$_());
            }
        }
        _$FlushPendingInstances$_() {
            this._$_hasPendingInstances$_ && (this._$_isFlushingPendingInstances$_ = !0, 
            this._$_FlushInstancesPendingCreate$_(), this._$_FlushInstancesPendingDestroy$_(), 
            this._$_isFlushingPendingInstances$_ = !1, this._$_hasPendingInstances$_ = !1, 
            this._$UpdateRender$_());
        }
        _$_FlushInstancesPendingCreate$_() {
            for (const t of this._$_instancesPendingCreate$_) {
                const s = t._$GetObjectClass$_();
                s._$_AddInstance$_(t);
                for (const i of s._$GetFamilies$_()) i._$_AddInstance$_(t), i._$_SetIIDsStale$_();
            }
            U._$clearArray$_(this._$_instancesPendingCreate$_);
        }
        _$_FlushInstancesPendingDestroy$_() {
            this._$_dispatcher$_._$SetDelayRemoveEventsEnabled$_(!0);
            for (const [ t, s ] of this._$_instancesPendingDestroy$_.entries()) this._$_FlushInstancesPendingDestroyForObjectClass$_(t, s), 
            s.clear();
            this._$_instancesPendingDestroy$_.clear(), this._$_dispatcher$_._$SetDelayRemoveEventsEnabled$_(!1);
        }
        _$_FlushInstancesPendingDestroyForObjectClass$_(t, s) {
            for (const i of s) {
                const e = this._$_eventObjects$_.instancedestroy, n = (e._$instance$_ = i, 
                this._$_dispatcher$_.dispatchEvent(e), this._$_instancesByUid$_.delete(i._$GetUID$_()), 
                this._$_instanceTimes$_.delete(i), i._$GetWorldInfo$_());
                n && (n._$_RemoveFromCollisionCells$_(), n._$_RemoveFromRenderCells$_(), 
                n._$_MarkDestroyed$_()), this._$_instancesPendingRelease$_.add(i), 
                this._$_objectCount$_--;
            }
            U._$arrayRemoveAllInSet$_(t._$GetInstances$_(), s), t._$_SetIIDsStale$_(), 
            this._$_instancesPendingReleaseAffectedObjectClasses$_.add(t);
            for (const h of t._$GetFamilies$_()) U._$arrayRemoveAllInSet$_(h._$GetInstances$_(), s), 
            h._$_SetIIDsStale$_(), this._$_instancesPendingReleaseAffectedObjectClasses$_.add(h);
            if (t._$GetPlugin$_()._$IsWorldType$_()) {
                const r = new Set([ ...s ].map(t => t._$GetWorldInfo$_()._$GetLayer$_()));
                for (const o of r) o._$_RemoveAllInstancesInSet$_(s);
            }
        }
        _$_GetInstancesPendingCreate$_() {
            return this._$_instancesPendingCreate$_;
        }
        *_$instancesPendingCreateForObjectClass$_(t) {
            for (const s of this._$_GetInstancesPendingCreate$_()) t._$IsFamily$_() ? s._$GetObjectClass$_()._$BelongsToFamily$_(t) && (yield s) : s._$GetObjectClass$_() === t && (yield s);
        }
        _$_GetNewUID$_() {
            return this._$_nextUid$_++;
        }
        _$_MapInstanceByUID$_(t, s) {
            this._$_instancesByUid$_.set(t, s);
        }
        _$_SetAutoSuspendEnabled$_(t) {
            this._$_isAutoSuspendEnabled$_ !== (t = !!t) && (this._$_isAutoSuspendEnabled$_ = !!t, 
            this._$_isAutoSuspendEnabled$_) && this._$_isPageVisibilitySuspended$_ && (this._$SetSuspended$_(!1), 
            this._$_isPageVisibilitySuspended$_ = !1);
        }
        _$_IsAutoSuspendEnabled$_() {
            return this._$_isAutoSuspendEnabled$_;
        }
        _$_OnRendererContextLost$_() {
            this._$_dispatcher$_.dispatchEvent(U._$New$_(U.Event, "renderercontextlost")), 
            this._$SetSuspended$_(!0);
            for (const s of this._$_allObjectClasses$_) !s._$IsFamily$_() && s._$HasLoadedTextures$_() && s._$ReleaseTextures$_();
            const t = this._$GetMainRunningLayout$_();
            t && t._$_OnRendererContextLost$_(), U._$ImageInfo$_._$OnRendererContextLost$_(), 
            U._$ImageAsset$_._$OnRendererContextLost$_();
        }
        async _$_OnRendererContextRestored$_() {
            await this._$GetMainRunningLayout$_()._$_Load$_(null, this._$GetRenderer$_()), 
            this._$_dispatcher$_.dispatchEvent(U._$New$_(U.Event, "renderercontextrestored")), 
            this._$SetSuspended$_(!1), this._$UpdateRender$_();
        }
        _$_OnVisibilityChange$_(t) {
            if (this._$_isAutoSuspendEnabled$_) {
                const s = t.hidden;
                this._$SetSuspended$_(s), (this._$_isPageVisibilitySuspended$_ = s) || this._$UpdateRender$_();
            }
        }
        _$_OnWindowBlur$_(t) {
            this._$IsPreview$_() && this._$_pauseOnBlur$_ && !U._$Platform$_._$IsMobile$_ && !t.data.parentHasFocus && (this._$SetSuspended$_(!0), 
            this._$_isPausedOnBlur$_ = !0);
        }
        _$_OnWindowFocus$_() {
            this._$_isPausedOnBlur$_ && (this._$SetSuspended$_(!1), this._$_isPausedOnBlur$_ = !1);
        }
        _$_RequestAnimationFrame$_() {
            const t = this._$_tickCallbacks$_;
            "vsync" === this._$_framerateMode$_ ? -1 === this._$_rafId$_ && (this._$_rafId$_ = self.requestAnimationFrame(t._$normal$_)) : "unlimited-tick" === this._$_framerateMode$_ ? (-1 === this._$_ruafId$_ && (this._$_ruafId$_ = U._$RequestUnlimitedAnimationFrame$_(t._$tickOnly$_)), 
            -1 === this._$_rafId$_ && (this._$_rafId$_ = self.requestAnimationFrame(t._$renderOnly$_))) : -1 === this._$_ruafId$_ && (this._$_ruafId$_ = U._$RequestUnlimitedAnimationFrame$_(t._$normal$_));
        }
        _$_CancelAnimationFrame$_() {
            -1 !== this._$_rafId$_ && (self.cancelAnimationFrame(this._$_rafId$_), 
            this._$_rafId$_ = -1), -1 !== this._$_ruafId$_ && (U._$CancelUnlimitedAnimationFrame$_(this._$_ruafId$_), 
            this._$_ruafId$_ = -1);
        }
        _$IsSuspended$_() {
            return 0 < this._$_suspendCount$_;
        }
        _$SetSuspended$_(t) {
            if (!this._$IsExportToVideo$_()) {
                const s = this._$IsSuspended$_(), i = (this._$_suspendCount$_ += t ? 1 : -1, 
                this._$_suspendCount$_ < 0 && (this._$_suspendCount$_ = 0), this._$IsSuspended$_());
                if (!s && i) console.log("[Construct] Suspending"), this._$_CancelAnimationFrame$_(), 
                this._$_dispatcher$_.dispatchEvent(U._$New$_(U.Event, "suspend")), 
                this._$Trigger$_(U._$Plugins$_._$System$_._$Cnds$_._$OnSuspend$_, null, null); else if (s && !i) {
                    console.log("[Construct] Resuming");
                    const e = performance.now();
                    this._$_lastTickTime$_ = e, this._$_fpsLastTime$_ = e, this._$_fpsFrameCount$_ = 0, 
                    this._$_fps$_ = 0, this._$_tpsTickCount$_ = 0, this._$_tps$_ = 0, 
                    this._$_mainThreadTime$_ = 0, this._$_mainThreadTimeCounter$_ = 0, 
                    this._$_dispatcher$_.dispatchEvent(U._$New$_(U.Event, "resume")), 
                    this._$Trigger$_(U._$Plugins$_._$System$_._$Cnds$_._$OnResume$_, null, null), 
                    this._$HitBreakpoint$_() || this._$Tick$_(e);
                }
            }
        }
        _$_AddBehInstToTick$_(t) {
            this._$_behInstsToTick$_._$Add$_(t);
        }
        _$_AddBehInstToPostTick$_(t) {
            this._$_behInstsToPostTick$_._$Add$_(t);
        }
        _$_AddBehInstToTick2$_(t) {
            this._$_behInstsToTick2$_._$Add$_(t);
        }
        _$_RemoveBehInstToTick$_(t) {
            this._$_behInstsToTick$_._$Remove$_(t);
        }
        _$_RemoveBehInstToPostTick$_(t) {
            this._$_behInstsToPostTick$_._$Remove$_(t);
        }
        _$_RemoveBehInstToTick2$_(t) {
            this._$_behInstsToTick2$_._$Remove$_(t);
        }
        _$_CallBehaviorTickMethod$_(t, s) {
            let i = s ? performance.now() : 0, e;
            return t instanceof n ? (e = t._$_tick$_(), s && W.AddIndividualBehaviorTickTime(t.behavior, performance.now() - i)) : (e = t._$Tick$_(), 
            s && W.AddIndividualBehaviorTickTime(t._$GetBehavior$_(), performance.now() - i)), 
            e;
        }
        _$_BehaviorTick$_() {
            const t = this._$IsDebug$_();
            this._$_behInstsToTick$_._$SetQueueingEnabled$_(!0);
            for (const s of this._$_behInstsToTick$_) this._$_CallBehaviorTickMethod$_(s, t);
            this._$_behInstsToTick$_._$SetQueueingEnabled$_(!1);
        }
        _$_CallBehaviorPostTickMethod$_(t, s) {
            let i = s ? performance.now() : 0, e;
            return t instanceof n ? (e = t._$_postTick$_(), s && W.AddIndividualBehaviorTickTime(t.behavior, performance.now() - i)) : (e = t._$PostTick$_(), 
            s && W.AddIndividualBehaviorTickTime(t._$GetBehavior$_(), performance.now() - i)), 
            e;
        }
        _$_BehaviorPostTick$_() {
            const t = this._$IsDebug$_();
            this._$_behInstsToPostTick$_._$SetQueueingEnabled$_(!0);
            for (const s of this._$_behInstsToPostTick$_) this._$_CallBehaviorPostTickMethod$_(s, t);
            this._$_behInstsToPostTick$_._$SetQueueingEnabled$_(!1);
        }
        _$_CallBehaviorTick2Method$_(t, s) {
            let i = s ? performance.now() : 0, e;
            return t instanceof n ? (e = t._$_tick2$_(), s && W.AddIndividualBehaviorTickTime(t.behavior, performance.now() - i)) : (e = t._$Tick2$_(), 
            s && W.AddIndividualBehaviorTickTime(t._$GetBehavior$_(), performance.now() - i)), 
            e;
        }
        _$_BehaviorTick2$_() {
            const t = this._$IsDebug$_();
            this._$_behInstsToTick2$_._$SetQueueingEnabled$_(!0);
            for (const s of this._$_behInstsToTick2$_) this._$_CallBehaviorTick2Method$_(s, t);
            this._$_behInstsToTick2$_._$SetQueueingEnabled$_(!1);
        }
        *_$_DebugBehaviorTick$_() {
            const t = this._$IsDebug$_();
            this._$_behInstsToTick$_._$SetQueueingEnabled$_(!0);
            for (const s of this._$_behInstsToTick$_) {
                const i = this._$_CallBehaviorTickMethod$_(s, t);
                U._$IsIterator$_(i) && (yield* i);
            }
            this._$_behInstsToTick$_._$SetQueueingEnabled$_(!1);
        }
        *_$_DebugBehaviorPostTick$_() {
            const t = this._$IsDebug$_();
            this._$_behInstsToPostTick$_._$SetQueueingEnabled$_(!0);
            for (const s of this._$_behInstsToPostTick$_) {
                const i = this._$_CallBehaviorPostTickMethod$_(s, t);
                U._$IsIterator$_(i) && (yield* i);
            }
            this._$_behInstsToPostTick$_._$SetQueueingEnabled$_(!1);
        }
        *_$_DebugBehaviorTick2$_() {
            const t = this._$IsDebug$_();
            this._$_behInstsToTick2$_._$SetQueueingEnabled$_(!0);
            for (const s of this._$_behInstsToTick2$_) {
                const i = this._$_CallBehaviorTick2Method$_(s, t);
                U._$IsIterator$_(i) && (yield* i);
            }
            this._$_behInstsToTick2$_._$SetQueueingEnabled$_(!1);
        }
        async _$Tick$_(a, t, s) {
            this._$_hasStartedTicking$_ = !0;
            const l = "background-wake" === s, u = "background-wake" !== s && "skip-render" !== s, c = this._$GetLayoutManager$_(), f = this._$GetCanvasManager$_();
            if (this._$_hasStarted$_ && (!this._$IsSuspended$_() || t || l)) {
                let t = performance.now(), s = (this._$_isInTick$_ = !0, this._$_MeasureDt$_(a || 0), 
                this._$_tpsTickCount$_++, this._$_ReleasePendingInstances$_(), this._$Step_BeforePreTick$_()), i = (this._$IsDebugging$_() && await s, 
                this._$_dispatcher$_._$dispatchEventAndWait_AsyncOptional$_(this._$_eventObjects$_.pretick)), e = (i instanceof Promise && await i, 
                this._$DispatchUserScriptEvent$_(this._$_userScriptEventObjects$_.pretick), 
                this._$Step_AfterPreTick$_()), n = (this._$IsDebugging$_() && await e, 
                this._$_NeedsHandleSaveOrLoad$_() && await this._$_HandleSaveOrLoad$_(), 
                c._$IsPendingChangeMainLayout$_() && await this._$_MaybeChangeLayout$_(), 
                this._$Step_RunEventsEtc$_()), h = (this._$IsDebugging$_() && await n, 
                c._$GetMainRunningLayout$_()), r = h._$_GetPendingSetHTMLLayerCount$_(), o = !1;
                if (-1 !== r && (h._$_ResetPendingHTMLLayerCount$_(), f._$GetHTMLLayerCount$_() !== r)) {
                    const d = this._$GetCanvasManager$_()._$SetHTMLLayerCount$_(r);
                    this._$IsInWorker$_() && (o = !0, await d);
                }
                this._$PostComponentMessageToDOM$_("canvas", "update-html-layer-dom-state", {
                    layersDomState: h._$_GetRootLayers$_().filter(t => t._$IsHTMLElementsLayer$_()).map(t => t._$_GetHTMLLayerDOMState$_())
                }), u && this._$Render$_(), o && this._$PostComponentMessageToDOM$_("canvas", "cleanup-html-layers"), 
                this._$IsExportToVideo$_() && (await this._$_ExportToVideoAddFrame$_(), 
                this._$GetGameTime$_() >= this._$GetExportVideoDuration$_()) ? this._$_ExportToVideoFinish$_() : (this._$IsSuspended$_() || l || this._$_RequestAnimationFrame$_(), 
                this._$_tickCount$_++, this._$_tickCountNoSave$_++, this._$_isInTick$_ = !1, 
                this._$_mainThreadTimeCounter$_ += performance.now() - t);
            }
        }
        async _$Step_BeforePreTick$_() {
            const t = this._$_eventSheetManager$_, s = this._$IsDebug$_();
            this._$FlushPendingInstances$_(), t._$BlockFlushingInstances$_(!0), 
            this._$PushCurrentLayout$_(this._$GetMainRunningLayout$_()), s && W.StartMeasuringTime(), 
            this._$IsDebugging$_() ? await t._$DebugRunScheduledWaits$_() : t._$RunScheduledWaits$_(), 
            s && W.AddEventsTime(), this._$PopCurrentLayout$_(), t._$BlockFlushingInstances$_(!1), 
            this._$FlushPendingInstances$_(), t._$BlockFlushingInstances$_(!0);
        }
        async _$Step_AfterPreTick$_() {
            const t = this._$_eventSheetManager$_, s = this._$IsDebug$_(), i = this._$IsDebugging$_(), e = this._$_dispatcher$_, n = this._$_eventObjects$_, h = this._$_userScriptEventObjects$_;
            s && W.StartMeasuringTime(), i ? await this._$DebugIterateAndBreak$_(this._$_DebugBehaviorTick$_()) : this._$_BehaviorTick$_(), 
            i ? await this._$DebugIterateAndBreak$_(this._$_DebugBehaviorPostTick$_()) : this._$_BehaviorPostTick$_(), 
            s && W.AddBehaviorTotalTickTime(), s && W.StartMeasuringTime(), i ? await this._$DebugFireGeneratorEventAndBreak$_(n.tick) : e.dispatchEvent(n.tick), 
            s && W.AddPluginTotalTickTime(), t._$BlockFlushingInstances$_(!1), this._$DispatchUserScriptEvent$_(h.tick);
        }
        async _$Step_RunEventsEtc$_() {
            const t = this._$_eventSheetManager$_, s = this._$_dispatcher$_, i = this._$_eventObjects$_, e = this._$_userScriptEventObjects$_, n = this._$IsDebug$_(), h = this._$IsDebugging$_();
            n && W.StartMeasuringTime(), h ? await t._$DebugRunEvents$_(this._$_layoutManager$_) : t._$RunEvents$_(this._$_layoutManager$_), 
            n && W.AddEventsTime(), this._$_collisionEngine$_._$ClearRegisteredCollisions$_(), 
            this._$_ReleasePendingInstances$_(), this._$_isLayoutFirstTick$_ = !1, 
            t._$BlockFlushingInstances$_(!0), n && W.StartMeasuringTime(), h ? await this._$DebugIterateAndBreak$_(this._$_DebugBehaviorTick2$_()) : this._$_BehaviorTick2$_(), 
            n && W.AddBehaviorTotalTickTime(), n && W.StartMeasuringTime(), h ? await this._$DebugFireGeneratorEventAndBreak$_(i.tick2) : s.dispatchEvent(i.tick2), 
            n && W.AddPluginTotalTickTime(), t._$BlockFlushingInstances$_(!1), this._$DispatchUserScriptEvent$_(e.tick2), 
            h && await t._$RunQueuedDebugTriggersAsync$_();
        }
        _$_ReleasePendingInstances$_() {
            if (0 !== this._$_instancesPendingRelease$_.size) {
                const t = this._$_dispatcher$_;
                t._$SetDelayRemoveEventsEnabled$_(!0);
                for (const s of this._$_instancesPendingReleaseAffectedObjectClasses$_) s._$GetSolStack$_()._$RemoveInstances$_(this._$_instancesPendingRelease$_);
                this._$_instancesPendingReleaseAffectedObjectClasses$_.clear(), 
                this._$_eventSheetManager$_._$_OnInstancesReleased$_(this._$_instancesPendingRelease$_);
                for (const i of this._$_instancesPendingRelease$_) i._$Release$_();
                this._$_instancesPendingRelease$_.clear(), t._$SetDelayRemoveEventsEnabled$_(!1);
            }
        }
        async _$_MaybeChangeLayout$_() {
            let t = this._$GetLayoutManager$_(), s = 0;
            for (;t._$IsPendingChangeMainLayout$_() && s++ < 10; ) await this._$_DoChangeLayout$_(t._$GetPendingChangeMainLayout$_());
        }
        _$_MeasureDt$_(t) {
            let s = 0;
            if (this._$IsExportToVideo$_()) s = 1 / this._$GetExportVideoFramerate$_(), 
            this._$_dtRaw$_ = s, this._$_dt1$_ = s; else if (0 !== this._$_lastTickTime$_) {
                const i = Math.max(t - this._$_lastTickTime$_, 0);
                .5 < (s = i / 1e3) && (s = 0), this._$_dtRaw$_ = s, this._$_dt1$_ = U._$clamp$_(s, this._$_minDt$_, this._$_maxDt$_);
            }
            this._$_lastTickTime$_ = t, this._$_dt$_ = this._$_dt1$_ * this._$_timeScale$_, 
            this._$_gameTime$_._$Add$_(this._$_dt$_), this._$_gameTimeRaw$_._$Add$_(s * this._$_timeScale$_), 
            this._$_wallTime$_._$Add$_(this._$_dt1$_);
            for (const [ e, n ] of this._$_instanceTimes$_) n._$Add$_(this._$_dt1$_ * e._$GetTimeScale$_());
            this._$_canvasManager$_ && this._$_canvasManager$_._$_UpdateTick$_(), 
            1e3 <= t - this._$_fpsLastTime$_ && (this._$_fpsLastTime$_ += 1e3, 1e3 <= t - this._$_fpsLastTime$_ && (this._$_fpsLastTime$_ = t), 
            this._$_fps$_ = this._$_fpsFrameCount$_, this._$_fpsFrameCount$_ = 0, 
            this._$_tps$_ = this._$_tpsTickCount$_, this._$_tpsTickCount$_ = 0, 
            this._$_mainThreadTime$_ = Math.min(this._$_mainThreadTimeCounter$_ / 1e3, 1), 
            this._$_mainThreadTimeCounter$_ = 0, this._$_canvasManager$_ && this._$_canvasManager$_._$_Update1sFrameRange$_(), 
            this._$_collisionEngine$_._$_Update1sStats$_(), this._$IsDebug$_()) && W.Update1sPerfStats();
        }
        _$_SetTrackingInstanceTime$_(t, s) {
            if (s) {
                if (!this._$_instanceTimes$_.has(t)) {
                    const i = U._$New$_(U._$KahanSum$_);
                    i._$Copy$_(this._$_gameTime$_), this._$_instanceTimes$_.set(t, i);
                }
            } else this._$_instanceTimes$_.delete(t);
        }
        _$_GetInstanceGameTime$_(t) {
            const s = this._$_instanceTimes$_.get(t);
            return s ? s._$Get$_() : this._$GetGameTime$_();
        }
        async _$_DoChangeLayout$_(t) {
            const s = this._$_dispatcher$_, i = this._$GetLayoutManager$_(), e = i._$GetMainRunningLayout$_();
            await e._$_StopRunning$_(), e._$_Unload$_(t, this._$GetRenderer$_()), 
            e === t && this._$_eventSheetManager$_._$ClearAllScheduledWaits$_(), 
            this._$_collisionEngine$_._$ClearRegisteredCollisions$_(), this._$_ReleasePendingInstances$_(), 
            s.dispatchEvent(this._$_eventObjects$_.beforelayoutchange), U._$Asyncify$_._$SetHighThroughputMode$_(!0), 
            await t._$_Load$_(e, this._$GetRenderer$_()), U._$Asyncify$_._$SetHighThroughputMode$_(!1), 
            await t._$_StartRunning$_(!1), s.dispatchEvent(this._$_eventObjects$_.layoutchange), 
            this._$UpdateRender$_(), this._$_isLayoutFirstTick$_ = !0, this._$FlushPendingInstances$_(), 
            this._$_ExportToVideoAddKeyframe$_();
        }
        _$UpdateRender$_() {
            this._$_needRender$_ = !0;
        }
        _$GetWebGLRenderer$_() {
            return this._$_canvasManager$_ ? this._$_canvasManager$_._$GetWebGLRenderer$_() : null;
        }
        _$GetWebGPURenderer$_() {
            return this._$_canvasManager$_ ? this._$_canvasManager$_._$GetWebGPURenderer$_() : null;
        }
        _$GetRenderer$_() {
            return this._$_canvasManager$_ ? this._$_canvasManager$_._$GetRenderer$_() : null;
        }
        _$Render$_() {
            const i = this._$_canvasManager$_;
            if (i && !i._$IsRendererContextLost$_()) {
                const e = this._$GetRenderer$_(), t = e._$SupportsGPUProfiling$_(), n = t && e._$IsWebGL$_(), h = t && e._$IsWebGPU$_();
                if (n && e._$CheckForQueryResults$_(), this._$_needRender$_ || this._$IsExportToVideo$_()) {
                    const r = this._$_layoutManager$_._$GetMainRunningLayout$_(), o = (this._$_fpsFrameCount$_++, 
                    e._$Start$_(), this._$IsDebug$_());
                    o && W.StartMeasuringTime(), this._$_needRender$_ = !1;
                    let t = null, s = (n && (t = i._$GetGPUFrameTimingsBuffer$_()._$AddTimeElapsedQuery$_(), 
                    e._$StartQuery$_(t)), null);
                    h && (s = e.StartFrameTiming(2 * (1 + r._$GetLayerCount$_())), 
                    e.StartMeasuringRenderPassTime(0, 1)), this._$Uses3DFeatures$_() && "low" === i._$GetCurrentFullscreenScalingQuality$_() ? e._$SetFixedSizeDepthBuffer$_(i._$GetDrawWidth$_(), i._$GetDrawHeight$_()) : e._$SetAutoSizeDepthBuffer$_(), 
                    this._$_Render$_(this._$GetRenderer$_(), r), t && e._$EndQuery$_(t), 
                    h && (e.StopMeasuringRenderPassTime(), this._$_canvasManager$_._$_AddWebGPUFrameTiming$_(s)), 
                    e._$Finish$_(), o && (W.AddDrawCallsTime(), W.UpdateInspectHighlight()), 
                    i && i._$_MaybeTakeSnapshot$_();
                } else e._$IncrementFrameNumber$_();
            }
        }
        _$_NeedsHTMLLayerCompositing$_(t) {
            return "low" === this._$GetCanvasManager$_()._$GetCurrentFullscreenScalingQuality$_() || t._$IsWebGL$_() && (this._$UsesAnyBackgroundBlending$_() || this._$Uses3DFeatures$_());
        }
        _$_Render$_(s, i) {
            s._$SetTextureFillMode$_(), s._$SetAlphaBlend$_(), s._$SetColorRgba$_(1, 1, 1, 1), 
            s._$SetRenderTarget$_(null), s._$SetTexture$_(null), s._$SetDepthEnabled$_(this._$Uses3DFeatures$_()), 
            this._$_NeedsHTMLLayerCompositing$_(s) && i._$_MaybeStartDrawToOwnTexture$_(s);
            const e = i._$GetHTMLLayerCount$_();
            for (let t = 1; t < e; ++t) i._$DrawForHTMLLayerIndex$_(s, t), s._$IsWebGPU$_() && s.Restart();
            this._$_NeedsHTMLLayerCompositing$_(s) || i._$_MaybeStartDrawToOwnTexture$_(s), 
            i._$DrawMain$_(s);
        }
        _$Trigger$_(t, s, i) {
            if (!this._$_hasStarted$_) return !1;
            let e = !this._$_isInTick$_ && !this._$_eventSheetManager$_._$IsInTrigger$_(), n = 0;
            e && (n = performance.now());
            const h = this._$IsDebug$_(), r = (h && this._$SetDebuggingEnabled$_(!1), 
            this._$_eventSheetManager$_._$_Trigger$_(this._$_layoutManager$_, t, s, i));
            if (e) {
                const o = performance.now() - n;
                this._$_mainThreadTimeCounter$_ += o, h && W.AddTriggersTime(o);
            }
            return h && this._$SetDebuggingEnabled$_(!0), r;
        }
        _$DebugTrigger$_(t, s, i) {
            if (!this._$IsDebugging$_()) return this._$Trigger$_(t, s, i);
            if (this._$HitBreakpoint$_()) throw new Error("called DebugTrigger() while stopped on breakpoint");
            if (this._$_isInTick$_ || this._$_eventSheetManager$_._$IsInTrigger$_()) return this._$_eventSheetManager$_._$_DebugTrigger$_(this._$_layoutManager$_, t, s, i);
            throw new Error("called DebugTrigger() outside of event code - use TriggerAsync() instead");
        }
        async _$TriggerAsync$_(t, s, i) {
            if (!this._$IsDebugging$_()) return this._$Trigger$_(t, s, i);
            if (!this._$_hasStarted$_) return !1;
            if (this._$HitBreakpoint$_()) return this._$_eventSheetManager$_._$QueueDebugTrigger$_(t, s, i);
            if (!this._$GetMainRunningLayout$_()) return this._$_eventSheetManager$_._$QueueTrigger$_(t, s, i);
            let e = performance.now(), n = this._$_eventSheetManager$_._$_DebugTrigger$_(this._$_layoutManager$_, t, s, i), h = n.next();
            for (;!h.done; ) await this._$DebugBreak$_(h.value), h = n.next();
            return this._$IsSuspended$_() || this._$_eventSheetManager$_._$IsInTrigger$_() || (await this._$_eventSheetManager$_._$RunQueuedDebugTriggersAsync$_(), 
            this._$_hasStartedTicking$_ && !this._$_isInTick$_ && this._$_RequestAnimationFrame$_()), 
            this._$_mainThreadTimeCounter$_ += performance.now() - e, h.value;
        }
        _$FastTrigger$_(t, s, i) {
            const e = this._$IsDebug$_(), n = (e && this._$SetDebuggingEnabled$_(!1), 
            this._$_eventSheetManager$_._$_FastTrigger$_(this._$_layoutManager$_, t, s, i));
            return e && this._$SetDebuggingEnabled$_(!0), n;
        }
        _$DebugFastTrigger$_(t, s, i) {
            return this._$_eventSheetManager$_._$_DebugFastTrigger$_(this._$_layoutManager$_, t, s, i);
        }
        _$ScheduleTriggers$_(t) {
            return this._$_scheduleTriggersThrottle$_._$Add$_(t);
        }
        _$PushCurrentLayout$_(t) {
            this._$_currentLayoutStack$_.push(t);
        }
        _$PopCurrentLayout$_() {
            if (!this._$_currentLayoutStack$_.length) throw new Error("layout stack empty");
            this._$_currentLayoutStack$_.pop();
        }
        _$GetCurrentLayout$_() {
            return this._$_currentLayoutStack$_.length ? this._$_currentLayoutStack$_.at(-1) : this._$GetMainRunningLayout$_();
        }
        _$GetDt$_(t) {
            return t && -1 !== t._$GetTimeScale$_() ? this._$_dt1$_ * t._$GetTimeScale$_() : this._$_dt$_;
        }
        _$_GetDtFast$_() {
            return this._$_dt$_;
        }
        _$GetDt1$_() {
            return this._$_dt1$_;
        }
        _$GetDtRaw$_() {
            return this._$_dtRaw$_;
        }
        _$GetTimeScale$_() {
            return this._$_timeScale$_;
        }
        _$SetTimeScale$_(t) {
            (isNaN(t) || t < 0) && (t = 0), this._$_timeScale$_ = t;
        }
        _$SetMinDt$_(t) {
            this._$_minDt$_ = Math.max(t, 0);
        }
        _$GetMinDt$_() {
            return this._$_minDt$_;
        }
        _$SetMaxDt$_(t) {
            this._$_maxDt$_ = Math.max(t, 0);
        }
        _$GetMaxDt$_() {
            return this._$_maxDt$_;
        }
        _$GetFramesPerSecond$_() {
            return this._$_fps$_;
        }
        _$GetTicksPerSecond$_() {
            return this._$_tps$_;
        }
        _$GetMainThreadTime$_() {
            return this._$_mainThreadTime$_;
        }
        _$GetStartTime$_() {
            return this._$_startTime$_;
        }
        _$GetGameTime$_() {
            return this._$_gameTime$_._$Get$_();
        }
        _$GetGameTimeRaw$_() {
            return this._$_gameTimeRaw$_._$Get$_();
        }
        _$GetWallTime$_() {
            return this._$_wallTime$_._$Get$_();
        }
        _$GetTickCount$_() {
            return this._$_tickCount$_;
        }
        _$GetTickCountNoSave$_() {
            return this._$_tickCountNoSave$_;
        }
        _$GetObjectCount$_() {
            return this._$_objectCount$_;
        }
        _$GetProjectName$_() {
            return this._$_projectName$_;
        }
        _$GetProjectVersion$_() {
            return this._$_projectVersion$_;
        }
        _$GetProjectUniqueId$_() {
            return this._$_projectUniqueId$_;
        }
        _$GetAppId$_() {
            return this._$_appId$_;
        }
        _$GetExportTimestamp$_() {
            return this._$_exportTimestamp$_;
        }
        _$GetInstanceByUID$_(t) {
            if (this._$_isLoadingState$_) throw new Error("cannot call while loading state - wait until afterload event");
            return this._$_instancesByUid$_.get(t) || null;
        }
        _$_RefreshUidMap$_() {
            this._$_instancesByUid$_.clear();
            for (const t of this._$_allObjectClasses$_) if (!t._$IsFamily$_()) for (const s of t._$GetInstances$_()) this._$_instancesByUid$_.set(s._$GetUID$_(), s);
        }
        _$IsPreview$_() {
            return "preview" === this._$_exportType$_;
        }
        _$IsDebug$_() {
            return this._$_isDebug$_;
        }
        _$GetExportType$_() {
            return this._$_exportType$_;
        }
        _$IsNWjs$_() {
            return "nwjs" === this._$GetExportType$_() || this._$_isNWjs$_;
        }
        _$IsCordova$_() {
            return "cordova" === this._$_exportType$_;
        }
        _$IsAndroidWebView$_() {
            return "Android" === U._$Platform$_._$OS$_ && ("cordova" === this._$_exportType$_ || "playable-ad-single-file" === this._$_exportType$_ || "playable-ad-zip" === this._$_exportType$_ || "instant-games" === this._$_exportType$_);
        }
        _$IsiOSCordova$_() {
            return this._$_isiOSCordova$_;
        }
        _$IsiOSWebView$_() {
            return this._$_isiOSWebView$_;
        }
        _$IsWindowsWebView2$_() {
            return this._$_isWindowsWebView2$_;
        }
        _$IsAnyWebView2Wrapper$_() {
            return this._$_isAnyWebView2Wrapper$_;
        }
        _$GetCollisionEngine$_() {
            return this._$_collisionEngine$_;
        }
        _$GetSolidBehavior$_() {
            return this._$_addonManager$_._$GetSolidBehavior$_();
        }
        _$GetJumpthruBehavior$_() {
            return this._$_addonManager$_._$GetJumpthruBehavior$_();
        }
        _$Uses3DFeatures$_() {
            return this._$_uses3dFeatures$_;
        }
        _$GetZScaleFactor$_() {
            return this._$GetRenderer$_()._$GetZAxisScaleFactor$_(this._$GetViewportHeight$_());
        }
        _$GetDefaultCameraZ$_(t) {
            return this._$GetRenderer$_()._$GetDefaultCameraZ$_(t || this._$GetViewportHeight$_());
        }
        _$IsLayoutFirstTick$_() {
            return this._$_isLayoutFirstTick$_;
        }
        _$SetPixelRoundingEnabled$_(t) {
            this._$_isPixelRoundingEnabled$_ !== (t = !!t) && (this._$_isPixelRoundingEnabled$_ = t, 
            this._$GetLayoutManager$_()._$SetAllLayerMVChanged$_(), this._$UpdateRender$_());
        }
        _$IsPixelRoundingEnabled$_() {
            return this._$_isPixelRoundingEnabled$_;
        }
        _$GetTextIconSet$_(t) {
            if (!this._$_iconChangeHandlers$_.has(t)) {
                const i = () => this._$DeleteTextIconSet$_(t);
                this._$_iconChangeHandlers$_.set(t, i), t._$Dispatcher$_().addEventListener("animationframeimagechange", i);
            }
            const s = this._$_textIconManager$_._$GetIconSet$_(t);
            return s._$HasLoaded$_() || s._$LoadContent$_().then(() => this._$UpdateRender$_()), 
            s;
        }
        _$DeleteTextIconSet$_(t) {
            this._$_textIconManager$_._$DeleteIconSet$_(t);
        }
        _$_GetTextIconSetMeta$_(t) {
            const s = [];
            for (const i of t._$GetAnimations$_()) for (const e of i._$GetFrames$_()) {
                const n = e._$GetImageInfo$_();
                s.push({
                    source: e,
                    width: n._$GetWidth$_(),
                    height: n._$GetHeight$_(),
                    tag: e._$GetTag$_()
                });
            }
            return {
                _$icons$_: s
            };
        }
        async _$_GetTextIconSetContent$_(t) {
            const s = U._$New$_(U._$PromiseThrottle$_), i = [], n = new Map();
            for (const r of t._$GetAnimations$_()) for (const o of r._$GetFrames$_()) {
                const a = o._$GetImageInfo$_()._$GetImageAsset$_();
                n.has(a) || (n.set(a, null), i.push(s._$Add$_(async () => {
                    const t = await a._$LoadToDrawable$_();
                    n.set(a, t);
                })));
            }
            await Promise.all(i);
            const e = [];
            for (const l of t._$GetAnimations$_()) for (const u of l._$GetFrames$_()) e.push(s._$Add$_(async () => {
                const t = u._$GetImageInfo$_(), s = n.get(t._$GetImageAsset$_()), i = await t._$ExtractImageToCanvas$_(s), e = await createImageBitmap(i);
                return {
                    _$drawable$_: e
                };
            }));
            const h = await Promise.all(e);
            for (const c of n.values()) c instanceof ImageBitmap && c.close && c.close();
            return {
                _$icons$_: h
            };
        }
        _$SaveToSlot$_(t) {
            this._$_saveToSlotName$_ = t, this._$_saveToJsonString$_ = !1;
        }
        _$SaveToJsonString$_() {
            this._$_saveToSlotName$_ = "", this._$_saveToJsonString$_ = !0;
        }
        _$LoadFromSlot$_(t) {
            this._$_loadFromSlotName$_ = t;
        }
        _$LoadFromJsonString$_(t) {
            this._$_loadFromJson$_ = t;
        }
        _$GetLastSaveJsonString$_() {
            return this._$_lastSaveJson$_;
        }
        _$_NeedsHandleSaveOrLoad$_() {
            return !!(this._$_saveToSlotName$_ || this._$_saveToJsonString$_ || this._$_loadFromSlotName$_ || null !== this._$_loadFromJson$_);
        }
        async _$_HandleSaveOrLoad$_() {
            if (this._$_saveToSlotName$_ && (this._$FlushPendingInstances$_(), await this._$_DoSaveToSlot$_(this._$_saveToSlotName$_), 
            this._$_ClearSaveOrLoad$_()), this._$_loadFromSlotName$_ && (await this._$_DoLoadFromSlot$_(this._$_loadFromSlotName$_), 
            this._$_ClearSaveOrLoad$_(), this._$IsDebug$_()) && W.StepIfPausedInDebugger(), 
            this._$_saveToJsonString$_) {
                const t = await this._$_SaveToJsonString$_();
                this._$_lastSaveJson$_ = t, await this._$TriggerAsync$_(U._$Plugins$_._$System$_._$Cnds$_._$OnSaveComplete$_, null), 
                this._$_lastSaveJson$_ = "", this._$_ClearSaveOrLoad$_();
            }
            if (null !== this._$_loadFromJson$_) {
                this._$FlushPendingInstances$_();
                try {
                    await this._$_DoLoadFromJsonString$_(this._$_loadFromJson$_), 
                    this._$_lastSaveJson$_ = this._$_loadFromJson$_, await this._$TriggerAsync$_(U._$Plugins$_._$System$_._$Cnds$_._$OnLoadComplete$_, null), 
                    this._$_lastSaveJson$_ = "";
                } catch (t) {
                    console.error("[Construct] Failed to load state from JSON string: ", t), 
                    await this._$TriggerAsync$_(U._$Plugins$_._$System$_._$Cnds$_._$OnLoadFailed$_, null);
                }
                this._$_ClearSaveOrLoad$_();
            }
        }
        _$_ClearSaveOrLoad$_() {
            this._$_saveToSlotName$_ = "", this._$_saveToJsonString$_ = !1, this._$_loadFromSlotName$_ = "", 
            this._$_loadFromJson$_ = null;
        }
        _$_GetProjectStorage$_() {
            return this._$_projectStorage$_ || (this._$_projectStorage$_ = localforage._$createInstance$_({
                name: "c3-localstorage-" + this._$GetProjectUniqueId$_(),
                description: this._$GetProjectName$_()
            })), this._$_projectStorage$_;
        }
        _$_GetSavegamesStorage$_() {
            return this._$_savegamesStorage$_ || (this._$_savegamesStorage$_ = localforage._$createInstance$_({
                name: "c3-savegames-" + this._$GetProjectUniqueId$_(),
                description: this._$GetProjectName$_()
            })), this._$_savegamesStorage$_;
        }
        async _$_DoSaveToSlot$_(t) {
            const s = await this._$_SaveToJsonString$_();
            try {
                await this._$_GetSavegamesStorage$_().setItem(t, s), console.log("[Construct] Saved state to storage (" + s.length + " chars)"), 
                this._$_lastSaveJson$_ = s, await this._$TriggerAsync$_(U._$Plugins$_._$System$_._$Cnds$_._$OnSaveComplete$_, null), 
                this._$_lastSaveJson$_ = "";
            } catch (t) {
                console.error("[Construct] Failed to save state to storage: ", t), 
                await this._$TriggerAsync$_(U._$Plugins$_._$System$_._$Cnds$_._$OnSaveFailed$_, null);
            }
        }
        async _$_DoLoadFromSlot$_(t) {
            try {
                const s = await this._$_GetSavegamesStorage$_().getItem(t);
                if (!s) throw new Error("empty slot");
                console.log("[Construct] Loaded state from storage (" + s.length + " chars)"), 
                await this._$_DoLoadFromJsonString$_(s), this._$_lastSaveJson$_ = s, 
                await this._$TriggerAsync$_(U._$Plugins$_._$System$_._$Cnds$_._$OnLoadComplete$_, null), 
                this._$_lastSaveJson$_ = "";
            } catch (t) {
                console.error("[Construct] Failed to load state from storage: ", t), 
                await this._$TriggerAsync$_(U._$Plugins$_._$System$_._$Cnds$_._$OnLoadFailed$_, null);
            }
        }
        async _$_SaveToJsonString$_() {
            const t = {
                c3save: !0,
                version: 1,
                rt: {
                    time: this._$GetGameTime$_(),
                    timeRaw: this._$GetGameTimeRaw$_(),
                    walltime: this._$GetWallTime$_(),
                    timescale: this._$GetTimeScale$_(),
                    tickcount: this._$GetTickCount$_(),
                    next_uid: this._$_nextUid$_,
                    running_layout: this._$GetMainRunningLayout$_()._$GetSID$_(),
                    start_time_offset: Date.now() - this._$_startTime$_
                },
                types: {},
                layouts: {},
                events: this._$_eventSheetManager$_._$_SaveToJson$_(),
                timelines: this._$_timelineManager$_._$_SaveToJson$_(),
                user_script_data: null
            };
            for (const i of this._$_allObjectClasses$_) i._$IsFamily$_() || i._$HasNoSaveBehavior$_() || (t.types[i._$GetSID$_().toString()] = i._$_SaveToJson$_());
            for (const e of this._$_layoutManager$_._$GetAllLayouts$_()) t.layouts[e._$GetSID$_().toString()] = e._$_SaveToJson$_();
            const s = this._$_CreateUserScriptEvent$_("save");
            return s.saveData = null, await this._$DispatchUserScriptEventAsyncWait$_(s), 
            t.user_script_data = s.saveData, JSON.stringify(t);
        }
        _$IsLoadingState$_() {
            return this._$_isLoadingState$_;
        }
        async _$_DoLoadFromJsonString$_(t) {
            const s = this._$GetLayoutManager$_(), i = JSON.parse(t);
            if (i.c2save) throw new Error("C2 saves are incompatible with C3 runtime");
            if (!i.c3save) throw new Error("not valid C3 save data");
            if (1 < i.version) throw new Error("C3 save data from future version");
            this._$ClearIntancesNeedingAfterLoad$_(), this._$_dispatcher$_.dispatchEvent(U._$New$_(U.Event, "beforeload"));
            for (const a of this._$allInstances$_()) {
                const l = a._$GetObjectClass$_();
                l._$HasNoSaveBehavior$_() || a._$_OnBeforeLoad$_();
            }
            let e = i.rt, n = (this._$_gameTime$_.Set(e.time), e.hasOwnProperty("timeRaw") && this._$_gameTimeRaw$_.Set(e.timeRaw), 
            this._$_wallTime$_.Set(e.walltime), this._$_timeScale$_ = e.timescale, 
            this._$_tickCount$_ = e.tickcount, this._$_startTime$_ = Date.now() - e.start_time_offset, 
            e.running_layout), h = !(this._$_isLoadingState$_ = !0);
            if (n !== this._$GetMainRunningLayout$_()._$GetSID$_()) {
                const u = s._$GetLayoutBySID$_(n);
                if (!u) return;
                await this._$_DoChangeLayout$_(u), h = !0;
            }
            for (const [ c, f ] of Object.entries(i.layouts)) {
                const d = parseInt(c, 10), p = s._$GetLayoutBySID$_(d);
                p && p._$_LoadFromJson$_(f);
            }
            const r = new Set();
            for (const [ m, g ] of Object.entries(i.types)) {
                const y = parseInt(m, 10), M = this._$GetObjectClassBySID$_(y);
                !M || M._$IsFamily$_() || M._$HasNoSaveBehavior$_() || M._$_LoadFromJson$_(g, r);
            }
            for (const w of this._$_layoutManager$_._$GetAllLayouts$_()) for (const x of w._$allLayers$_()) x._$_LoadFromJsonAfterInstances$_();
            if (this._$FlushPendingInstances$_(), this._$_RefreshUidMap$_(), this._$_isLoadingState$_ = !1, 
            h) {
                for (const S of this._$allInstances$_()) S._$SetupInitialSceneGraphConnections$_();
                for (const [ T, b ] of Object.entries(i.types)) {
                    const v = parseInt(T, 10), C = this._$GetObjectClassBySID$_(v);
                    !C || C._$IsFamily$_() || C._$HasNoSaveBehavior$_() || C._$_SetupSceneGraphConnectionsOnChangeOfLayout$_(b);
                }
            }
            this._$_nextUid$_ = e.next_uid, this._$_eventSheetManager$_._$_LoadFromJson$_(i.events);
            for (const G of this._$_allObjectClasses$_) if (!G._$IsFamily$_() && G._$IsInContainer$_()) for (const I of G._$GetInstances$_()) {
                const _ = I._$GetIID$_();
                for (const E of G._$GetContainer$_()._$objectTypes$_()) if (E !== G) {
                    const N = E._$GetInstances$_();
                    if (_ < 0 || _ >= N.length) throw new Error("missing sibling instance");
                    I._$_AddSibling$_(N[_]);
                }
            }
            this._$_timelineManager$_._$_LoadFromJson$_(i.timelines), s._$SetAllLayerProjectionChanged$_(), 
            s._$SetAllLayerMVChanged$_();
            for (const D of r) D._$_OnCreatedForLoadingSavegame$_();
            this._$DoAfterLoad$_(), this._$_dispatcher$_.dispatchEvent(U._$New$_(U.Event, "afterload")), 
            this._$DispatchUserScriptEvent$_(this._$_CreateUserScriptEvent$_("afterload"));
            for (const [ A, L ] of Object.entries(i.types)) {
                const O = parseInt(A, 10), P = this._$GetObjectClassBySID$_(O);
                P && P._$_ClearLoadInstancesJson$_();
            }
            const o = this._$_CreateUserScriptEvent$_("load");
            o.saveData = i.user_script_data, await this._$DispatchUserScriptEventAsyncWait$_(o), 
            this._$UpdateRender$_();
        }
        _$SortOnTmpHierarchyPosition$_(t, s) {
            return t._$GetWorldInfo$_()._$GetTmpHierarchyPosition$_() - s._$GetWorldInfo$_()._$GetTmpHierarchyPosition$_();
        }
        _$AddInstanceNeedingAfterLoad$_(t, s) {
            t._$GetWorldInfo$_() && !this._$_instancesNeedingAfterLoadMap$_.has(t) && (this._$_instancesNeedingAfterLoadMap$_.set(t, s), 
            this._$_instancesNeedingAfterLoadArray$_.push(t));
        }
        _$ClearIntancesNeedingAfterLoad$_() {
            this._$_instancesNeedingAfterLoadMap$_ = new WeakMap(), U._$clearArray$_(this._$_instancesNeedingAfterLoadArray$_);
        }
        _$DoAfterLoad$_(t = "full", s = null) {
            this._$_instancesNeedingAfterLoadArray$_.sort(this._$SortOnTmpHierarchyPosition$_);
            for (const i of this._$_instancesNeedingAfterLoadArray$_) i._$_OnAfterLoad$_(this._$_instancesNeedingAfterLoadMap$_.get(i), t, s);
            for (const e of this._$_instancesNeedingAfterLoadArray$_) e._$_OnAfterLoad2$_(this._$_instancesNeedingAfterLoadMap$_.get(e), t, s);
            this._$ClearIntancesNeedingAfterLoad$_();
        }
        async _$AddJobWorkerScripts$_(t) {
            const s = await Promise.all(t.map(async t => {
                const s = this._$IsCordova$_() && this._$_assetManager$_._$IsFileProtocol$_();
                if (s || "playable-ad-single-file" === this._$GetExportType$_()) {
                    const i = await this._$_assetManager$_._$FetchBlob$_(t);
                    return URL.createObjectURL(i);
                }
                return new URL(t, location.href).toString();
            }));
            this._$_jobScheduler$_._$ImportScriptsToJobWorkers$_(s);
        }
        _$AddJobWorkerBlob$_(t, s) {
            this._$_jobScheduler$_._$SendBlobToJobWorkers$_(t, s);
        }
        _$AddJobWorkerBuffer$_(t, s) {
            this._$_jobScheduler$_._$SendBufferToJobWorkers$_(t, s);
        }
        _$AddJob$_(t, s, i, e) {
            return this._$_jobScheduler$_._$AddJob$_(t, s, i, null, null, e);
        }
        _$BroadcastJob$_(t, s, i, e) {
            return this._$_jobScheduler$_._$BroadcastJob$_(t, s, i, e);
        }
        _$GetMaxNumJobWorkers$_() {
            return this._$_jobScheduler$_._$GetMaxNumWorkers$_();
        }
        _$InvokeDownload$_(t, s) {
            this._$PostComponentMessageToDOM$_("runtime", "invoke-download", {
                url: t,
                filename: s
            });
        }
        async _$RasterSvgImage$_(t, s, i, e, n, h) {
            if (e = e || s, n = n || i, this._$IsInWorker$_()) {
                const r = await this._$PostComponentMessageToDOMAsync$_("runtime", "raster-svg-image", {
                    blob: t,
                    imageWidth: s,
                    imageHeight: i,
                    surfaceWidth: e,
                    surfaceHeight: n,
                    imageBitmapOpts: h
                });
                return r.imageBitmap;
            }
            {
                const o = await self.C3_RasterSvgImageBlob(t, s, i, e, n);
                return h ? self.createImageBitmap(o, h) : o;
            }
        }
        async _$GetSvgImageSize$_(t) {
            return this._$IsInWorker$_() ? this._$PostComponentMessageToDOMAsync$_("runtime", "get-svg-image-size", {
                blob: t
            }) : self.C3_GetSvgImageSize(t);
        }
        _$RequestDeviceOrientationEvent$_() {
            this._$_didRequestDeviceOrientationEvent$_ || (this._$_didRequestDeviceOrientationEvent$_ = !0, 
            this._$PostComponentMessageToDOM$_("runtime", "enable-device-orientation"));
        }
        _$RequestDeviceMotionEvent$_() {
            this._$_didRequestDeviceMotionEvent$_ || (this._$_didRequestDeviceMotionEvent$_ = !0, 
            this._$PostComponentMessageToDOM$_("runtime", "enable-device-motion"));
        }
        _$Random$_() {
            return this._$_randomNumberCallback$_();
        }
        _$SetRandomNumberGeneratorCallback$_(t) {
            this._$_randomNumberCallback$_ = t;
        }
        _$_GetRemotePreviewStatusInfo$_() {
            const t = this._$GetRenderer$_();
            return {
                fps: this._$GetFramesPerSecond$_(),
                tps: this._$GetTicksPerSecond$_(),
                cpu: this._$GetMainThreadTime$_(),
                gpu: this._$GetGPUUtilisation$_(),
                layout: this._$GetMainRunningLayout$_() ? this._$GetMainRunningLayout$_()._$GetName$_() : "",
                renderer: t._$IsWebGL$_() ? t._$GetUnmaskedRenderer$_() : t.GetAdapterInfoString()
            };
        }
        _$HitBreakpoint$_() {
            return !!this._$IsDebug$_() && W._$HitBreakpoint$_();
        }
        _$DebugBreak$_(t) {
            return this._$IsDebugging$_() ? W._$DebugBreak$_(t) : Promise.resolve();
        }
        _$DebugBreakNext$_() {
            return !!this._$IsDebugging$_() && W.BreakNext();
        }
        _$SetDebugBreakpointsEnabled$_(t) {
            this._$_breakpointsEnabled$_ = !!t, this._$_UpdateDebuggingFlag$_();
        }
        _$AreDebugBreakpointsEnabled$_() {
            return this._$_breakpointsEnabled$_;
        }
        _$IsDebugging$_() {
            return this._$_isDebugging$_;
        }
        _$SetDebuggingEnabled$_(t) {
            t ? this._$_debuggingDisabled$_-- : this._$_debuggingDisabled$_++, this._$_UpdateDebuggingFlag$_();
        }
        _$_UpdateDebuggingFlag$_() {
            this._$_isDebugging$_ = this._$IsDebug$_() && this._$_breakpointsEnabled$_ && 0 === this._$_debuggingDisabled$_;
        }
        _$IsCPUProfiling$_() {
            return this._$IsDebug$_() && W._$IsCPUProfiling$_();
        }
        _$IsGPUProfiling$_() {
            return this._$IsDebug$_() && this._$GetRenderer$_()._$SupportsGPUProfiling$_() && W._$IsGPUProfiling$_();
        }
        async _$DebugIterateAndBreak$_(t) {
            if (t) for (const s of t) await this._$DebugBreak$_(s);
        }
        _$DebugFireGeneratorEventAndBreak$_(t) {
            return this._$DebugIterateAndBreak$_(this._$_dispatcher$_._$dispatchGeneratorEvent$_(t));
        }
        _$_InvokeFunctionFromJS$_(t) {
            return this._$_eventSheetManager$_._$_InvokeFunctionFromJS$_(t.name, t.params);
        }
        _$_GetHTMLLayerWrapElement$_(t) {
            if (this._$IsInWorker$_()) throw new Error("not supported in worker mode");
            return self.c3_runtimeInterface._GetHTMLWrapElement(t);
        }
        _$GetIRuntime$_() {
            return this._$_iRuntime$_;
        }
        _$_CreateUserScriptEvent$_(t) {
            const s = U._$New$_(U.Event, t, !1);
            return s.runtime = this._$_iRuntime$_, s;
        }
        _$_InitScriptInterfaces$_() {
            this._$_iRuntime$_ = new self._$IRuntime$_(this), this._$_userScriptEventObjects$_ = {
                pretick: this._$_CreateUserScriptEvent$_("pretick"),
                tick: this._$_CreateUserScriptEvent$_("tick"),
                tick2: this._$_CreateUserScriptEvent$_("tick2")
            };
        }
        _$_InitObjectsScriptInterface$_() {
            const t = {};
            for (const s of this._$_allObjectClasses$_) t[s._$GetJsPropName$_()] = {
                value: s._$GetIObjectClass$_(),
                enumerable: !0,
                writable: !1
            };
            this._$_iRuntime$_._$_InitObjects$_(t);
        }
        _$_InitGlobalVariableScriptInterface$_() {
            const t = {};
            for (const s of this._$GetEventSheetManager$_()._$GetAllGlobalVariables$_()) t[s._$GetJsPropName$_()] = s._$_GetScriptInterfaceDescriptor$_();
            this._$_iRuntime$_._$_InitGlobalVars$_(t);
        }
        _$_GetCommonScriptInterfaces$_() {
            return this._$_commonScriptInterfaces$_;
        }
        _$_MapScriptInterface$_(t, s) {
            this._$_interfaceMap$_.set(t, s);
        }
        _$_UnwrapScriptInterface$_(t) {
            return this._$_interfaceMap$_.get(t);
        }
        _$_UnwrapIObjectClass$_(t) {
            if (!(t instanceof self._$IObjectClass$_)) throw new TypeError("expected IObjectClass");
            const s = this._$_UnwrapScriptInterface$_(t);
            if (s && s instanceof U._$ObjectClass$_) return s;
            throw new Error("invalid IObjectClass");
        }
        _$_UnwrapIInstance$_(t) {
            if (!(t instanceof self._$IInstance$_)) throw new TypeError("expected IInstance");
            const s = this._$_UnwrapScriptInterface$_(t);
            if (s && s instanceof U.Instance) return s;
            throw new Error("invalid IInstance");
        }
        _$_UnwrapIWorldInstance$_(t) {
            if (!(t instanceof self._$IWorldInstance$_)) throw new TypeError("expected IWorldInstance");
            const s = this._$_UnwrapScriptInterface$_(t);
            if (s && s instanceof U.Instance) return s;
            throw new Error("invalid IInstance");
        }
    }, self.C3_CreateRuntime = U._$Runtime$_._$Create$_, self.C3_InitRuntime = (t, s) => t._$Init$_(s);
}

{
    const Oa = self._$C3$_;
    Oa._$JobSchedulerRuntime$_ = class extends Oa._$DefendedBase$_ {
        constructor(t, s) {
            super(), this._$_runtime$_ = t, this._$_jobPromises$_ = new Map(), this._$_nextJobId$_ = 0, 
            this._$_inputPort$_ = s.inputPort, s.outputPort.onmessage = t => this._$_OnJobWorkerMessage$_(t), 
            this._$_maxNumWorkers$_ = s.maxNumWorkers, this._$_jobWorkerCount$_ = 1, 
            this._$_isCreatingWorker$_ = !1, this._$_hadErrorCreatingWorker$_ = !1;
        }
        _$GetMaxNumWorkers$_() {
            return this._$_maxNumWorkers$_;
        }
        _$ImportScriptsToJobWorkers$_(t) {
            this._$_inputPort$_.postMessage({
                type: "_import_scripts",
                scripts: t
            });
        }
        _$SendBlobToJobWorkers$_(t, s) {
            this._$_inputPort$_.postMessage({
                type: "_send_blob",
                blob: t,
                id: s
            });
        }
        _$SendBufferToJobWorkers$_(t, s) {
            this._$_inputPort$_.postMessage({
                type: "_send_buffer",
                buffer: t,
                id: s
            }, [ t ]);
        }
        _$AddJob$_(t, s, i, e, n, h) {
            if (i = i || [], "number" == typeof h && (h = Math.floor(h)) <= 0) throw new Error("invalid maxWorkerNum");
            const r = this._$_nextJobId$_++, o = {
                type: t,
                isBroadcast: !1,
                maxWorkerNum: h,
                jobId: r,
                params: s,
                transferables: i
            }, a = new Promise((t, s) => {
                this._$_jobPromises$_.set(r, {
                    resolve: t,
                    progress: e,
                    reject: s,
                    _$cancelled$_: !1,
                    maxWorkerNum: h
                });
            });
            return n && n._$SetAction$_(() => this._$_CancelJob$_(r)), this._$_inputPort$_.postMessage(o, i), 
            this._$_MaybeCreateExtraWorker$_(), a;
        }
        _$BroadcastJob$_(t, s, i, e) {
            if (i = i || [], "number" == typeof e && (e = Math.floor(e)) <= 0) throw new Error("invalid maxWorkerNum");
            const n = this._$_nextJobId$_++, h = {
                type: t,
                isBroadcast: !0,
                maxWorkerNum: e,
                jobId: n,
                params: s,
                transferables: i
            };
            this._$_inputPort$_.postMessage(h, i);
        }
        _$_CancelJob$_(t) {
            const s = this._$_jobPromises$_.get(t);
            s && (s._$cancelled$_ = !0, s.resolve = null, s.progress = null, s.reject = null, 
            this._$_inputPort$_.postMessage({
                type: "_cancel",
                jobId: t
            }));
        }
        _$_OnJobWorkerMessage$_(t) {
            const s = t.data, i = s.type, e = s.jobId;
            switch (i) {
              case "result":
                this._$_OnJobResult$_(e, s.result);
                break;

              case "progress":
                this._$_OnJobProgress$_(e, s.progress);
                break;

              case "error":
                this._$_OnJobError$_(e, s.error);
                break;

              case "ready":
                this._$_OnJobWorkerReady$_();
                break;

              default:
                throw new Error(`unknown message from worker '${i}'`);
            }
        }
        _$_OnJobResult$_(t, s) {
            const i = this._$_jobPromises$_.get(t);
            if (!i) throw new Error("invalid job ID");
            i._$cancelled$_ || i.resolve(s), this._$_jobPromises$_.delete(t);
        }
        _$_OnJobProgress$_(t, s) {
            const i = this._$_jobPromises$_.get(t);
            if (!i) throw new Error("invalid job ID");
            !i._$cancelled$_ && i.progress && i.progress(s);
        }
        _$_OnJobError$_(t, s) {
            const i = this._$_jobPromises$_.get(t);
            if (!i) throw new Error("invalid job ID");
            i._$cancelled$_ || i.reject(s), this._$_jobPromises$_.delete(t);
        }
        _$_OnJobWorkerReady$_() {
            this._$_isCreatingWorker$_ && (this._$_isCreatingWorker$_ = !1, this._$_jobWorkerCount$_++, 
            this._$_jobWorkerCount$_ < this._$_maxNumWorkers$_ ? this._$_MaybeCreateExtraWorker$_() : this._$_inputPort$_.postMessage({
                type: "_no_more_workers"
            }));
        }
        _$_GetWorkerCountNeededForPendingJobs$_() {
            let t = 0, s = [ ...this._$_jobPromises$_.values() ].sort((t, s) => {
                const i = t.maxWorkerNum || 1 / 0, e = s.maxWorkerNum || 1 / 0;
                return i - e;
            });
            for (const i of s) {
                const e = i.maxWorkerNum || 1 / 0;
                t < e && t++;
            }
            return t;
        }
        async _$_MaybeCreateExtraWorker$_() {
            if (!(this._$_jobWorkerCount$_ >= this._$_maxNumWorkers$_ || this._$_isCreatingWorker$_ || this._$_hadErrorCreatingWorker$_ || this._$_GetWorkerCountNeededForPendingJobs$_() <= this._$_jobWorkerCount$_)) try {
                this._$_isCreatingWorker$_ = !0;
                const t = await this._$_runtime$_._$PostComponentMessageToDOMAsync$_("runtime", "create-job-worker");
                t.outputPort.onmessage = t => this._$_OnJobWorkerMessage$_(t);
            } catch (t) {
                this._$_hadErrorCreatingWorker$_ = !0, this._$_isCreatingWorker$_ = !1, 
                console.error(`[Construct] Failed to create job worker; stopping creating any more (created ${this._$_jobWorkerCount$_} so far)`, t);
            }
        }
    };
}

self.C3_Shaders = {}, self.C3_Shaders.alpharamp = {
    _$glsl$_: "precision mediump float;\nvarying mediump vec2 vTex;\nuniform lowp sampler2D samplerFront;\nuniform lowp float upperthreshold;\nuniform lowp float lowerthreshold;\nuniform lowp float postopacity;\nvoid main(void)\n{\nlowp vec4 front = texture2D(samplerFront, vTex);\nlowp float a = front.a;\nlowp vec3 unpremultiplied = front.rgb / a;\na = smoothstep(lowerthreshold, upperthreshold, a);\ngl_FragColor = vec4(unpremultiplied * a, a) * postopacity;\n}",
    _$glslWebGL2$_: "",
    _$wgsl$_: "%%SAMPLERFRONT_BINDING%% var samplerFront : sampler;\n%%TEXTUREFRONT_BINDING%% var textureFront : texture_2d<f32>;\nstruct ShaderParams {\nupperthreshold : f32,\nlowerthreshold : f32,\npostopacity : f32\n};\n%%SHADERPARAMS_BINDING%% var<uniform> shaderParams : ShaderParams;\n%%C3_UTILITY_FUNCTIONS%%\n%%FRAGMENTINPUT_STRUCT%%\n%%FRAGMENTOUTPUT_STRUCT%%\n@fragment\nfn main(input : FragmentInput) -> FragmentOutput\n{\nvar front : vec4<f32> = c3_unpremultiply(textureSample(textureFront, samplerFront, input.fragUV));\nfront.a = smoothstep(shaderParams.lowerthreshold, shaderParams.upperthreshold, front.a);\nvar output : FragmentOutput;\noutput.color = vec4<f32>(front.rgb * front.a, front.a) * shaderParams.postopacity;\nreturn output;\n}",
    _$blendsBackground$_: !1,
    _$usesDepth$_: !1,
    _$extendBoxHorizontal$_: 0,
    _$extendBoxVertical$_: 0,
    _$crossSampling$_: !1,
    _$mustPreDraw$_: !1,
    _$preservesOpaqueness$_: !0,
    _$supports3dDirectRendering$_: !1,
    _$animated$_: !1,
    parameters: [ [ "upperthreshold", 0, "percent" ], [ "lowerthreshold", 0, "percent" ], [ "postopacity", 0, "percent" ] ]
};

{
    let w = function(t, s) {
        const i = t[1], e = s[1];
        if ("number" == typeof i && "number" == typeof e) return i - e;
        {
            const n = "" + i, h = "" + e;
            return n < h ? -1 : h < n ? 1 : 0;
        }
    }, x = (w, self._$C3$_), i = null, e = "", n = "", h = [], r = "", o = "", a = "", S = x._$New$_(x._$ArrayStack$_);
    x._$Plugins$_._$System$_ = class extends x._$SDKPluginBase$_ {
        constructor(t) {
            super(t), this._$_loopStack$_ = this._$_runtime$_._$GetEventSheetManager$_()._$GetLoopStack$_(), 
            this._$_eventStack$_ = this._$_runtime$_._$GetEventSheetManager$_()._$GetEventStack$_(), 
            this._$_imagesLoadingTotal$_ = 0, this._$_imagesLoadingComplete$_ = 0, 
            this._$_functionMaps$_ = new Map();
        }
        _$Release$_() {
            super._$Release$_();
        }
        _$UpdateRender$_() {
            this._$_runtime$_._$UpdateRender$_();
        }
        _$Trigger$_(t) {
            this._$_runtime$_._$Trigger$_(t, null, null);
        }
        _$GetRegex$_(t, s) {
            return i && t === e && s === n || (i = new RegExp(t, s), e = t, n = s), 
            i.lastIndex = 0, i;
        }
        _$GetRegexMatches$_(t, s, i) {
            if (t !== r || s !== o || i !== a) {
                const e = this._$GetRegex$_(s, i);
                h = t.match(e), r = t, o = s, a = i;
            }
            return h;
        }
        async _$_LoadTexturesForObjectClasses$_(t, s) {
            if (s.length) {
                this._$_imagesLoadingTotal$_ += s.length;
                const i = [];
                for (const e of s) i.push(t._$MaybeLoadTexturesFor$_(e));
                await x._$PromiseAllWithProgress$_(i, () => {
                    this._$_imagesLoadingComplete$_++;
                }), this._$_imagesLoadingComplete$_++, this._$_imagesLoadingComplete$_ === this._$_imagesLoadingTotal$_ && (this._$_imagesLoadingComplete$_ = 0, 
                this._$_imagesLoadingTotal$_ = 0, this._$_runtime$_._$Trigger$_(x._$Plugins$_._$System$_._$Cnds$_._$OnImageLoadingComplete$_, null, null));
            }
        }
        _$GetImageLoadingProgress$_() {
            return 0 === this._$_imagesLoadingTotal$_ ? 1 : this._$_imagesLoadingComplete$_ / this._$_imagesLoadingTotal$_;
        }
        _$_UnloadTexturesForObjectClasses$_(t, s) {
            for (const i of s) 0 === i._$GetInstanceCount$_() && t._$MaybeUnloadTexturesFor$_(i);
        }
        _$_GetForEachStack$_() {
            return S;
        }
        _$_Repeat$_(s) {
            const i = this._$_runtime$_._$GetEventSheetManager$_(), t = i._$GetEventStack$_(), e = t._$GetCurrentStackFrame$_(), n = e._$GetCurrentEvent$_(), h = n._$GetSolModifiers$_(), r = e._$IsSolModifierAfterCnds$_(), o = t._$Push$_(n), a = i._$GetLoopStack$_(), l = a._$Push$_();
            if (l._$SetEnd$_(s), r) for (let t = 0; t < s && !l._$IsStopped$_(); ++t) i._$PushCopySol$_(h), 
            l._$SetIndex$_(t), n._$Retrigger$_(e, o), i._$PopSol$_(h); else for (let t = 0; t < s && !l._$IsStopped$_(); ++t) l._$SetIndex$_(t), 
            n._$Retrigger$_(e, o);
            return t._$Pop$_(), a._$Pop$_(), !1;
        }
        *_$_DebugRepeat$_(s) {
            const i = this._$_runtime$_._$GetEventSheetManager$_(), t = i._$GetEventStack$_(), e = t._$GetCurrentStackFrame$_(), n = e._$GetCurrentEvent$_(), h = n._$GetSolModifiers$_(), r = e._$IsSolModifierAfterCnds$_(), o = t._$Push$_(n), a = i._$GetLoopStack$_(), l = a._$Push$_();
            if (l._$SetEnd$_(s), r) for (let t = 0; t < s && !l._$IsStopped$_(); ++t) i._$PushCopySol$_(h), 
            l._$SetIndex$_(t), yield* n._$DebugRetrigger$_(e, o), i._$PopSol$_(h); else for (let t = 0; t < s && !l._$IsStopped$_(); ++t) l._$SetIndex$_(t), 
            yield* n._$DebugRetrigger$_(e, o);
            return t._$Pop$_(), a._$Pop$_(), !1;
        }
        _$_While$_() {
            const s = this._$_runtime$_._$GetEventSheetManager$_(), t = s._$GetEventStack$_(), i = t._$GetCurrentStackFrame$_(), e = i._$GetCurrentEvent$_(), n = e._$GetSolModifiers$_(), h = i._$IsSolModifierAfterCnds$_(), r = t._$Push$_(e), o = s._$GetLoopStack$_(), a = o._$Push$_();
            if (h) for (let t = 0; !a._$IsStopped$_(); ++t) s._$PushCopySol$_(n), 
            a._$SetIndex$_(t), e._$Retrigger$_(i, r) || a._$Stop$_(), s._$PopSol$_(n); else for (let t = 0; !a._$IsStopped$_(); ++t) a._$SetIndex$_(t), 
            e._$Retrigger$_(i, r) || a._$Stop$_();
            return t._$Pop$_(), o._$Pop$_(), !1;
        }
        *_$_DebugWhile$_() {
            const s = this._$_runtime$_._$GetEventSheetManager$_(), t = s._$GetEventStack$_(), i = t._$GetCurrentStackFrame$_(), e = i._$GetCurrentEvent$_(), n = e._$GetSolModifiers$_(), h = i._$IsSolModifierAfterCnds$_(), r = t._$Push$_(e), o = s._$GetLoopStack$_(), a = o._$Push$_();
            if (h) for (let t = 0; !a._$IsStopped$_(); ++t) {
                s._$PushCopySol$_(n), a._$SetIndex$_(t);
                const l = yield* e._$DebugRetrigger$_(i, r);
                l || a._$Stop$_(), s._$PopSol$_(n);
            } else for (let t = 0; !a._$IsStopped$_(); ++t) {
                a._$SetIndex$_(t);
                const u = yield* e._$DebugRetrigger$_(i, r);
                u || a._$Stop$_();
            }
            return t._$Pop$_(), o._$Pop$_(), !1;
        }
        _$_For$_(t, s, i) {
            const e = this._$_runtime$_._$GetEventSheetManager$_(), n = e._$GetEventStack$_(), h = n._$GetCurrentStackFrame$_(), r = h._$GetCurrentEvent$_(), o = r._$GetSolModifiers$_(), a = h._$IsSolModifierAfterCnds$_(), l = n._$Push$_(r), u = e._$GetLoopStack$_(), c = u._$Push$_();
            if (c._$SetName$_(t), c._$SetEnd$_(i), i < s) if (a) for (let t = s; t >= i && !c._$IsStopped$_(); --t) e._$PushCopySol$_(o), 
            c._$SetIndex$_(t), r._$Retrigger$_(h, l), e._$PopSol$_(o); else for (let t = s; t >= i && !c._$IsStopped$_(); --t) c._$SetIndex$_(t), 
            r._$Retrigger$_(h, l); else if (a) for (let t = s; t <= i && !c._$IsStopped$_(); ++t) e._$PushCopySol$_(o), 
            c._$SetIndex$_(t), r._$Retrigger$_(h, l), e._$PopSol$_(o); else for (let t = s; t <= i && !c._$IsStopped$_(); ++t) c._$SetIndex$_(t), 
            r._$Retrigger$_(h, l);
            return n._$Pop$_(), u._$Pop$_(), !1;
        }
        *_$_DebugFor$_(t, s, i) {
            const e = this._$_runtime$_._$GetEventSheetManager$_(), n = e._$GetEventStack$_(), h = n._$GetCurrentStackFrame$_(), r = h._$GetCurrentEvent$_(), o = r._$GetSolModifiers$_(), a = h._$IsSolModifierAfterCnds$_(), l = n._$Push$_(r), u = e._$GetLoopStack$_(), c = u._$Push$_();
            if (c._$SetName$_(t), c._$SetEnd$_(i), i < s) if (a) for (let t = s; t >= i && !c._$IsStopped$_(); --t) e._$PushCopySol$_(o), 
            c._$SetIndex$_(t), yield* r._$DebugRetrigger$_(h, l), e._$PopSol$_(o); else for (let t = s; t >= i && !c._$IsStopped$_(); --t) c._$SetIndex$_(t), 
            yield* r._$DebugRetrigger$_(h, l); else if (a) for (let t = s; t <= i && !c._$IsStopped$_(); ++t) e._$PushCopySol$_(o), 
            c._$SetIndex$_(t), yield* r._$DebugRetrigger$_(h, l), e._$PopSol$_(o); else for (let t = s; t <= i && !c._$IsStopped$_(); ++t) c._$SetIndex$_(t), 
            yield* r._$DebugRetrigger$_(h, l);
            return n._$Pop$_(), u._$Pop$_(), !1;
        }
        _$_ForEach$_(i) {
            const t = i._$GetCurrentSol$_(), s = t._$GetInstances$_();
            if (0 !== s.length) {
                const e = this._$_runtime$_._$GetEventSheetManager$_(), n = e._$GetEventStack$_(), h = n._$GetCurrentStackFrame$_(), r = h._$GetCurrentEvent$_(), o = r._$GetSolModifiers$_(), a = h._$IsSolModifierAfterCnds$_(), l = n._$Push$_(r), u = e._$GetLoopStack$_(), c = u._$Push$_(), f = i._$IsInContainer$_(), d = S._$Push$_();
                if (x._$shallowAssignArray$_(d, s), c._$SetEnd$_(d.length), a) for (let t = 0, s = d.length; t < s && !c._$IsStopped$_(); ++t) {
                    e._$PushCopySol$_(o);
                    const p = d[t];
                    i._$GetCurrentSol$_()._$SetSinglePicked$_(p), f && p._$SetSiblingsSinglePicked$_(), 
                    c._$SetIndex$_(t), r._$Retrigger$_(h, l), e._$PopSol$_(o);
                } else {
                    t._$_SetSelectAll$_(!1);
                    const m = t._$_GetOwnInstances$_();
                    x._$clearArray$_(m), m.push(null);
                    for (let t = 0, s = d.length; t < s && !c._$IsStopped$_(); ++t) {
                        const g = d[t];
                        m[0] = g, f && g._$SetSiblingsSinglePicked$_(), c._$SetIndex$_(t), 
                        r._$Retrigger$_(h, l);
                    }
                }
                n._$Pop$_(), u._$Pop$_(), x._$clearArray$_(d), S._$Pop$_();
            }
            return !1;
        }
        *_$_DebugForEach$_(i) {
            const t = i._$GetCurrentSol$_(), s = t._$GetInstances$_();
            if (0 !== s.length) {
                const e = this._$_runtime$_._$GetEventSheetManager$_(), n = e._$GetEventStack$_(), h = n._$GetCurrentStackFrame$_(), r = h._$GetCurrentEvent$_(), o = r._$GetSolModifiers$_(), a = h._$IsSolModifierAfterCnds$_(), l = n._$Push$_(r), u = e._$GetLoopStack$_(), c = u._$Push$_(), f = i._$IsInContainer$_(), d = S._$Push$_();
                if (x._$shallowAssignArray$_(d, s), c._$SetEnd$_(d.length), a) for (let t = 0, s = d.length; t < s && !c._$IsStopped$_(); ++t) {
                    e._$PushCopySol$_(o);
                    const p = d[t];
                    i._$GetCurrentSol$_()._$SetSinglePicked$_(p), f && p._$SetSiblingsSinglePicked$_(), 
                    c._$SetIndex$_(t), yield* r._$DebugRetrigger$_(h, l), e._$PopSol$_(o);
                } else {
                    t._$_SetSelectAll$_(!1);
                    const m = t._$_GetOwnInstances$_();
                    x._$clearArray$_(m), m.push(null);
                    for (let t = 0, s = d.length; t < s && !c._$IsStopped$_(); ++t) {
                        const g = d[t];
                        m[0] = g, f && g._$SetSiblingsSinglePicked$_(), c._$SetIndex$_(t), 
                        yield* r._$DebugRetrigger$_(h, l);
                    }
                }
                n._$Pop$_(), u._$Pop$_(), x._$clearArray$_(d), S._$Pop$_();
            }
            return !1;
        }
        _$_ForEachOrdered$_(i, t) {
            const s = i._$GetCurrentSol$_(), e = s._$GetInstances$_();
            if (0 !== e.length) {
                const n = this._$_runtime$_._$GetEventSheetManager$_(), h = n._$GetEventStack$_(), r = n._$GetCurrentCondition$_(), o = h._$GetCurrentStackFrame$_(), a = o._$GetCurrentEvent$_(), l = a._$GetSolModifiers$_(), u = o._$IsSolModifierAfterCnds$_(), c = h._$Push$_(a), f = n._$GetLoopStack$_(), d = f._$Push$_(), p = i._$IsInContainer$_(), m = S._$Push$_();
                x._$clearArray$_(m), d._$SetEnd$_(e.length);
                for (let t = 0, s = e.length; t < s; ++t) m.push([ e[t], r._$ReevaluateParameter$_(1, t) ]);
                if (m.sort(w), 1 === t && m.reverse(), u) for (let t = 0, s = m.length; t < s && !d._$IsStopped$_(); ++t) {
                    n._$PushCopySol$_(l);
                    const g = m[t][0];
                    i._$GetCurrentSol$_()._$SetSinglePicked$_(g), p && g._$SetSiblingsSinglePicked$_(), 
                    d._$SetIndex$_(t), a._$Retrigger$_(o, c), n._$PopSol$_(l);
                } else {
                    s._$_SetSelectAll$_(!1);
                    const y = s._$_GetOwnInstances$_();
                    x._$clearArray$_(y), y.push(null);
                    for (let t = 0, s = m.length; t < s && !d._$IsStopped$_(); ++t) {
                        const M = m[t][0];
                        y[0] = M, p && M._$SetSiblingsSinglePicked$_(), d._$SetIndex$_(t), 
                        a._$Retrigger$_(o, c);
                    }
                }
                h._$Pop$_(), f._$Pop$_(), x._$clearArray$_(m), S._$Pop$_();
            }
            return !1;
        }
        *_$_DebugForEachOrdered$_(i, t) {
            const s = i._$GetCurrentSol$_(), e = s._$GetInstances$_();
            if (0 !== e.length) {
                const n = this._$_runtime$_._$GetEventSheetManager$_(), h = n._$GetEventStack$_(), r = n._$GetCurrentCondition$_(), o = h._$GetCurrentStackFrame$_(), a = o._$GetCurrentEvent$_(), l = a._$GetSolModifiers$_(), u = o._$IsSolModifierAfterCnds$_(), c = h._$Push$_(a), f = n._$GetLoopStack$_(), d = f._$Push$_(), p = i._$IsInContainer$_(), m = S._$Push$_();
                x._$clearArray$_(m), d._$SetEnd$_(e.length);
                for (let t = 0, s = e.length; t < s; ++t) m.push([ e[t], r._$ReevaluateParameter$_(1, t) ]);
                if (m.sort(w), 1 === t && m.reverse(), u) for (let t = 0, s = m.length; t < s && !d._$IsStopped$_(); ++t) {
                    n._$PushCopySol$_(l);
                    const g = m[t][0];
                    i._$GetCurrentSol$_()._$SetSinglePicked$_(g), p && g._$SetSiblingsSinglePicked$_(), 
                    d._$SetIndex$_(t), yield* a._$DebugRetrigger$_(o, c), n._$PopSol$_(l);
                } else {
                    s._$_SetSelectAll$_(!1);
                    const y = s._$_GetOwnInstances$_();
                    x._$clearArray$_(y), y.push(null);
                    for (let t = 0, s = m.length; t < s && !d._$IsStopped$_(); ++t) {
                        const M = m[t][0];
                        y[0] = M, p && M._$SetSiblingsSinglePicked$_(), d._$SetIndex$_(t), 
                        yield* a._$DebugRetrigger$_(o, c);
                    }
                }
                h._$Pop$_(), f._$Pop$_(), x._$clearArray$_(m), S._$Pop$_();
            }
            return !1;
        }
        _$_GetFunctionMap$_(t, s) {
            let i = this._$_functionMaps$_.get(t);
            if (!i) {
                if (!s) return null;
                i = {
                    _$defaultFunc$_: null,
                    _$strMap$_: new Map()
                }, this._$_functionMaps$_.set(t, i);
            }
            return i;
        }
        _$_DoCallMappedFunction$_(t, s, i, e, n) {
            s._$GetEventBlock$_()._$RunAsMappedFunctionCall$_(i, s._$IsCopyPicked$_()), 
            e && t._$PopSol$_(n);
        }
        *_$_DebugDoCallMappedFunction$_(t, s, i, e, n) {
            yield* s._$GetEventBlock$_()._$DebugRunAsMappedFunctionCall$_(i, s._$IsCopyPicked$_()), 
            e && t._$PopSol$_(n);
        }
    };
}

{
    const Pa = self._$C3$_;
    Pa._$Plugins$_._$System$_._$Type$_ = class extends Pa._$DefendedBase$_ {
        constructor(t) {
            super(), this._$_objectClass$_ = t, this._$_runtime$_ = t._$GetRuntime$_(), 
            this._$_plugin$_ = t._$GetPlugin$_();
        }
        _$OnCreate$_() {}
        _$Release$_() {
            this._$_objectClass$_ = null, this._$_runtime$_ = null, this._$_plugin$_ = null;
        }
    };
}

{
    const Ra = self._$C3$_;
    Ra._$Plugins$_._$System$_.Instance = class extends Ra._$DefendedBase$_ {
        constructor(t, s) {
            super(), this._$_inst$_ = t, this._$_objectClass$_ = this._$_inst$_._$GetObjectClass$_(), 
            this._$_sdkType$_ = this._$_objectClass$_._$GetSdkType$_(), this._$_runtime$_ = this._$_inst$_._$GetRuntime$_();
        }
        _$Release$_() {
            this._$_inst$_ = null, this._$_objectClass$_ = null, this._$_sdkType$_ = null, 
            this._$_runtime$_ = null;
        }
    };
}

{
    const I = self._$C3$_, ka = [];
    I._$Plugins$_._$System$_._$Cnds$_ = {
        _$EveryTick$_() {
            return !0;
        },
        _$OnLayoutStart$_() {
            return !0;
        },
        _$OnLayoutEnd$_() {
            return !0;
        },
        _$OnSuspend$_() {
            return !0;
        },
        _$OnResume$_() {
            return !0;
        },
        _$IsSuspended$_() {
            return this._$_runtime$_._$IsSuspended$_();
        },
        _$Else$_() {
            const t = this._$_runtime$_._$GetCurrentEventStackFrame$_();
            return !t._$GetElseBranchRan$_() && !t._$GetLastEventTrue$_();
        },
        _$TriggerOnce$_() {
            let t = this._$_runtime$_._$GetCurrentCondition$_(), s = t._$GetSavedDataMap$_(), i = s.get("TriggerOnce_lastTick");
            void 0 === i && (i = -1, s.set("TriggerOnce_lastTick", -1));
            const e = this._$_runtime$_._$GetTickCount$_();
            return s.set("TriggerOnce_lastTick", e), this._$_runtime$_._$IsLayoutFirstTick$_() || i !== e - 1;
        },
        _$Every$_(t) {
            const s = this._$_runtime$_._$GetCurrentCondition$_(), i = s._$GetSavedDataMap$_(), e = i.get("Every_lastTime") || 0, n = this._$_runtime$_._$GetGameTime$_(), h = (i.has("Every_seconds") || i.set("Every_seconds", t), 
            i.get("Every_seconds"));
            return e + h <= n ? (i.set("Every_lastTime", e + h), n >= i.get("Every_lastTime") + .04 && i.set("Every_lastTime", n), 
            i.set("Every_seconds", t), !0) : (n < e - .1 && i.set("Every_lastTime", n), 
            !1);
        },
        _$IsGroupActive$_(t) {
            const s = this._$_runtime$_._$GetEventSheetManager$_()._$GetEventGroupByName$_(t);
            return s && s._$IsGroupActive$_();
        },
        _$IsPreview$_() {
            return this._$_runtime$_._$IsPreview$_();
        },
        _$IsMobile$_() {
            return I._$Platform$_._$IsMobile$_;
        },
        _$OnLoadFinished$_() {
            return !0;
        },
        _$OnCanvasSnapshot$_() {
            return !0;
        },
        _$EffectsSupported$_() {
            return !0;
        },
        _$OnSaveComplete$_() {
            return !0;
        },
        _$OnSaveFailed$_() {
            return !0;
        },
        _$OnLoadComplete$_() {
            return !0;
        },
        _$OnLoadFailed$_() {
            return !0;
        },
        _$ObjectUIDExists$_(t) {
            return !!this._$_runtime$_._$GetInstanceByUID$_(t);
        },
        _$IsOnPlatform$_(t) {
            switch (t) {
              case 0:
                return "browser" === I._$Platform$_._$Context$_;

              case 1:
                return "iOS" === I._$Platform$_._$OS$_;

              case 2:
                return "Android" === I._$Platform$_._$OS$_;

              case 8:
                return "cordova" === I._$Platform$_._$Context$_;

              case 9:
                return "scirra-arcade" === this._$_runtime$_._$GetExportType$_();

              case 10:
                return "nwjs" === I._$Platform$_._$Context$_;

              case 13:
                return "windows-uwp" === this._$_runtime$_._$GetExportType$_();

              default:
                return !1;
            }
        },
        _$RegexTest$_(t, s, i) {
            const e = this._$GetRegex$_(s, i);
            return e.test(t);
        },
        _$Compare$_(t, s, i) {
            return I.compare(t, s, i);
        },
        _$CompareBetween$_(t, s, i) {
            return s <= t && t <= i;
        },
        _$CompareVar$_(t, s, i) {
            return I.compare(t._$GetValue$_(), s, i);
        },
        _$CompareBoolVar$_(t) {
            return !!t._$GetValue$_();
        },
        _$CompareTime$_(t, s) {
            const i = this._$_runtime$_._$GetGameTime$_();
            if (0 !== t) return I.compare(i, t, s);
            {
                const e = this._$_runtime$_._$GetCurrentCondition$_(), n = e._$GetSavedDataMap$_();
                return !n.get("CompareTime_executed") && s <= i && (n.set("CompareTime_executed", !0), 
                !0);
            }
        },
        _$IsNaN$_(t) {
            return isNaN(t);
        },
        _$AngleWithin$_(t, s, i) {
            return I._$angleDiff$_(I._$toRadians$_(t), I._$toRadians$_(i)) <= I._$toRadians$_(s);
        },
        _$IsClockwiseFrom$_(t, s) {
            return I._$angleClockwise$_(I._$toRadians$_(t), I._$toRadians$_(s));
        },
        _$IsBetweenAngles$_(t, s, i) {
            let e = I._$toRadians$_(t), n = I._$toRadians$_(s), h = I._$toRadians$_(i), r = !I._$angleClockwise$_(h, n);
            return r ? !(!I._$angleClockwise$_(e, n) && I._$angleClockwise$_(e, h)) : I._$angleClockwise$_(e, n) && !I._$angleClockwise$_(e, h);
        },
        _$IsValueType$_(t, s) {
            return "number" == typeof t ? 0 === s : 1 === s;
        },
        _$EvaluateExpression$_(t) {
            return !!t;
        },
        _$OnSignal$_(t) {
            return t.toLowerCase() === this._$_runtime$_._$GetEventSheetManager$_()._$GetCurrentSignalTag$_();
        },
        _$PickByComparison$_(t, i, e, n) {
            if (!t) return !1;
            let s = this._$_GetForEachStack$_(), h = s._$Push$_(), r = t._$GetCurrentSol$_(), o = (I._$shallowAssignArray$_(h, r._$GetInstances$_()), 
            r._$IsSelectAll$_() && I._$clearArray$_(r._$_GetOwnElseInstances$_()), 
            this._$_runtime$_._$GetCurrentCondition$_()), a = 0;
            for (let t = 0, s = h.length; t < s; ++t) {
                const u = h[t];
                h[a] = u, i = o._$ReevaluateParameter$_(1, t), n = o._$ReevaluateParameter$_(3, t), 
                I.compare(i, e, n) ? ++a : r._$_PushElseInstance$_(u);
            }
            I._$truncateArray$_(h, a), r._$SetArrayPicked$_(h);
            const l = !!h.length;
            return I._$clearArray$_(h), s._$Pop$_(), t._$ApplySolToContainer$_(), 
            l;
        },
        _$PickByEvaluate$_(t, s) {
            if (!t) return !1;
            let i = this._$_GetForEachStack$_(), e = i._$Push$_(), n = t._$GetCurrentSol$_(), h = (I._$shallowAssignArray$_(e, n._$GetInstances$_()), 
            n._$IsSelectAll$_() && I._$clearArray$_(n._$_GetOwnElseInstances$_()), 
            this._$_runtime$_._$GetCurrentCondition$_()), r = 0;
            for (let t = 0, s = e.length; t < s; ++t) {
                const a = e[t];
                e[r] = a, h._$ReevaluateParameter$_(1, t) ? ++r : n._$_PushElseInstance$_(a);
            }
            I._$truncateArray$_(e, r), n._$SetArrayPicked$_(e);
            const o = !!e.length;
            return I._$clearArray$_(e), i._$Pop$_(), t._$ApplySolToContainer$_(), 
            o;
        },
        _$PickByHighestLowestValue$_(t, i, e) {
            if (!t) return !1;
            const s = t._$GetCurrentSol$_(), n = s._$GetInstances$_();
            if (0 === n.length) return !1;
            let h = this._$_runtime$_._$GetCurrentCondition$_(), r = null, o = 0;
            for (let t = 0, s = n.length; t < s; ++t) {
                const a = n[t];
                e = h._$ReevaluateParameter$_(2, t), (null === r || 0 === i && e < o || 1 === i && e > o) && (o = e, 
                r = a);
            }
            return s._$PickOne$_(r), t._$ApplySolToContainer$_(), !0;
        },
        _$PickNth$_(t, s) {
            if (!t) return !1;
            const i = t._$GetCurrentSol$_(), e = i._$GetInstances$_();
            if ((s = Math.floor(s)) >= e.length) return !1;
            const n = e[s];
            return i._$PickOne$_(n), t._$ApplySolToContainer$_(), !0;
        },
        _$PickRandom$_(t) {
            if (!t) return !1;
            const s = t._$GetCurrentSol$_(), i = s._$GetInstances$_(), e = Math.floor(this._$_runtime$_._$Random$_() * i.length);
            if (e >= i.length) return !1;
            const n = i[e];
            return s._$PickOne$_(n), t._$ApplySolToContainer$_(), !0;
        },
        _$PickAll$_(t) {
            if (!t) return !1;
            if (!t._$GetInstanceCount$_()) return !1;
            const s = t._$GetCurrentSol$_();
            return s._$_SetSelectAll$_(!0), t._$ApplySolToContainer$_(), !0;
        },
        _$PickOverlappingPoint$_(t, i, e) {
            if (!t) return !1;
            const n = t._$GetCurrentSol$_(), s = n._$GetInstances$_(), h = this._$_runtime$_._$GetCurrentEvent$_(), r = h._$IsOrBlock$_(), o = this._$_runtime$_._$GetCurrentCondition$_()._$IsInverted$_();
            n._$IsSelectAll$_() ? (I._$shallowAssignArray$_(ka, s), n._$ClearArrays$_(), 
            n._$_SetSelectAll$_(!1)) : r ? (I._$shallowAssignArray$_(ka, n._$_GetOwnElseInstances$_()), 
            I._$clearArray$_(n._$_GetOwnElseInstances$_())) : (I._$shallowAssignArray$_(ka, n._$_GetOwnInstances$_()), 
            I._$clearArray$_(n._$_GetOwnInstances$_()));
            for (let t = 0, s = ka.length; t < s; ++t) {
                const a = ka[t];
                I.xor(a._$GetWorldInfo$_()._$ContainsPoint$_(i, e), o) ? n._$_PushInstance$_(a) : n._$_PushElseInstance$_(a);
            }
            return t._$ApplySolToContainer$_(), I.xor(!!n._$_GetOwnInstances$_().length, o);
        },
        _$PickLastCreated$_(s) {
            if (!s) return !1;
            let i = s._$IsFamily$_(), e = null, n = this._$_runtime$_._$_GetInstancesPendingCreate$_();
            for (let t = n.length - 1; 0 <= t; --t) {
                const h = n[t];
                if (i) {
                    if (h._$GetObjectClass$_()._$BelongsToFamily$_(s)) {
                        e = h;
                        break;
                    }
                } else if (h._$GetObjectClass$_() === s) {
                    e = h;
                    break;
                }
            }
            if (!e) {
                const r = s._$GetInstances$_();
                r.length && (e = r.at(-1));
            }
            if (!e) return !1;
            const t = s._$GetCurrentSol$_();
            return t._$PickOne$_(e), s._$ApplySolToContainer$_(), !0;
        },
        _$Repeat$_(t) {
            return this._$_runtime$_._$IsDebugging$_() ? this._$_DebugRepeat$_(t) : this._$_Repeat$_(t);
        },
        _$While$_() {
            return this._$_runtime$_._$IsDebugging$_() ? this._$_DebugWhile$_() : this._$_While$_();
        },
        _$For$_(t, s, i) {
            return this._$_runtime$_._$IsDebugging$_() ? this._$_DebugFor$_(t, s, i) : this._$_For$_(t, s, i);
        },
        _$ForEach$_(t) {
            return this._$_runtime$_._$IsDebugging$_() ? this._$_DebugForEach$_(t) : this._$_ForEach$_(t);
        },
        _$ForEachOrdered$_(t, s, i) {
            return this._$_runtime$_._$IsDebugging$_() ? this._$_DebugForEachOrdered$_(t, i) : this._$_ForEachOrdered$_(t, i);
        },
        _$LayerVisible$_(t) {
            return !!t && t._$IsVisible$_();
        },
        _$LayerInteractive$_(t) {
            return !!t && t._$IsSelfAndParentsInteractive$_();
        },
        _$LayerIsHTML$_(t) {
            return !!t && t._$IsHTMLElementsLayer$_();
        },
        _$LayerEmpty$_(t) {
            return !!t && !t._$GetInstanceCount$_();
        },
        _$LayerCmpOpacity$_(t, s, i) {
            return !!t && I.compare(100 * t._$GetOpacity$_(), s, i);
        },
        _$LayerNameExists$_(t) {
            const s = this._$_runtime$_._$GetMainRunningLayout$_();
            return !!s && s._$HasLayerByName$_(t);
        },
        _$OnImageLoadingComplete$_() {
            return !0;
        },
        _$IsLoadingImages$_() {
            return 0 < this._$_imagesLoadingTotal$_;
        },
        _$TemplateExists$_(t, s) {
            const i = this._$_runtime$_._$GetTemplateManager$_();
            return !!i && !!s && !!i._$GetTemplateData$_(t, s);
        }
    };
}

{
    let m = function(t, s) {
        const i = t[0], e = s[0], n = i - e;
        if (0 != n) return n;
        const h = t[1], r = s[1];
        return h - r;
    }, g = function(t, s) {
        return t[1] - s[1];
    };
    m, g;
    const Fa = self._$C3$_, ja = [], za = [], Ba = Fa._$New$_(Fa.Rect), Ua = Fa._$New$_(Fa._$Color$_), Wa = [];
    Fa._$Plugins$_._$System$_._$Acts$_ = {
        _$SetVar$_(t, s) {
            t._$SetValue$_(s);
        },
        _$AddVar$_(t, s) {
            t._$IsNumber$_() && "number" != typeof s && (s = parseFloat(s)), t._$SetValue$_(t._$GetValue$_() + s);
        },
        _$SubVar$_(t, s) {
            t._$IsNumber$_() && t._$SetValue$_(t._$GetValue$_() - s);
        },
        _$SetBoolVar$_(t, s) {
            t._$SetValue$_(!!s);
        },
        _$ToggleBoolVar$_(t) {
            t._$SetValue$_(!t._$GetValue$_());
        },
        _$ResetEventVar$_(t) {
            t._$SetValue$_(t._$GetInitialValue$_());
        },
        _$ResetGlobals$_(t) {
            this._$_runtime$_._$GetEventSheetManager$_()._$ResetAllGlobalsToInitialValue$_(t);
        },
        _$CreateObject$_(t, s, i, e, n, h) {
            if (t && s) {
                const r = this._$_runtime$_._$CreateInstance$_(t, s, i, e, n, h);
                if (r) {
                    n && s._$SortAndAddInstancesByZIndex$_(r);
                    const o = this._$_runtime$_._$GetEventSheetManager$_(), a = (o._$BlockFlushingInstances$_(!0), 
                    r._$_TriggerOnCreatedOnSelfAndRelated$_(), o._$BlockFlushingInstances$_(!1), 
                    new Map());
                    r._$CollectInstancesToPick$_(a, t, n);
                    for (const [ l, u ] of a) l._$GetCurrentSol$_()._$SetSetPicked$_(u);
                }
            }
        },
        _$CreateObjectByName$_(t, s, i, e, n, h) {
            if (t && s) {
                const r = this._$_runtime$_._$GetObjectClassByName$_(t);
                r && Fa._$Plugins$_._$System$_._$Acts$_._$CreateObject$_.call(this, r, s, i, e, n, h);
            }
        },
        _$RecreateInitialObjects$_(n, h, r, o, a, t, l, u, c, f, d) {
            if (n) {
                let s = this._$_runtime$_._$GetCurrentLayout$_(), i = s;
                if (t) {
                    const p = this._$_runtime$_._$GetLayoutManager$_()._$GetLayoutByName$_(t);
                    if (!p) return;
                    i = p;
                }
                let e = null;
                if (!("number" != typeof l || 0 <= l) || (e = i._$GetLayer$_(l))) {
                    let t = null;
                    if (!("number" != typeof u || 0 <= u) || (t = s._$GetLayer$_(u))) {
                        Ba.set(h, r, o, a);
                        const m = i._$RecreateInitialObjects$_(n, Ba, e, t, c, f, d);
                        n._$GetCurrentSol$_()._$SetArrayPicked$_(m), n._$ApplySolToContainer$_();
                    }
                }
            }
        },
        _$StopLoop$_() {
            const t = this._$_loopStack$_;
            t._$IsInLoop$_() && t._$GetCurrent$_()._$Stop$_();
        },
        _$SetGroupActive$_(t, s) {
            const i = this._$_runtime$_._$GetEventSheetManager$_()._$GetEventGroupByName$_(t);
            i && (0 === s ? i._$SetGroupActive$_(!1) : 1 === s ? i._$SetGroupActive$_(!0) : i._$SetGroupActive$_(!i._$IsGroupActive$_()));
        },
        _$SetTimescale$_(t) {
            this._$_runtime$_._$SetTimeScale$_(t);
        },
        _$SetObjectTimescale$_(t, s) {
            if (s < 0 && (s = 0), t) {
                const i = t._$GetCurrentSol$_(), e = i._$GetInstances$_();
                for (const n of e) n._$SetTimeScale$_(s);
            }
        },
        _$RestoreObjectTimescale$_(t) {
            if (t) {
                const s = t._$GetCurrentSol$_(), i = s._$GetInstances$_();
                for (const e of i) e._$RestoreTimeScale$_();
            }
        },
        _$Wait$_(t, s) {
            if (!(t < 0)) {
                const i = this._$_runtime$_._$GetEventSheetManager$_()._$AddScheduledWait$_();
                return s ? i._$InitTimer$_(t) : i._$InitWallTimer$_(t), !0;
            }
        },
        _$WaitForSignal$_(t) {
            return this._$_runtime$_._$GetEventSheetManager$_()._$AddScheduledWait$_()._$InitSignal$_(t), 
            !0;
        },
        _$WaitForPreviousActions$_() {
            const t = this._$_runtime$_._$GetEventSheetManager$_();
            return t._$AddScheduledWait$_()._$InitPromise$_(t._$GetPromiseForAllAsyncActions$_()), 
            !0;
        },
        _$Signal$_(t) {
            this._$_runtime$_._$GetEventSheetManager$_()._$Signal$_(t);
        },
        async _$SnapshotCanvas$_(t, s, i, e, n, h) {
            const r = this._$_runtime$_._$GetCanvasManager$_();
            r && (this._$UpdateRender$_(), await r._$SnapshotCanvas$_(0 === t ? "image/png" : "image/jpeg", s / 100, i, e, n, h), 
            await this._$_runtime$_._$TriggerAsync$_(Fa._$Plugins$_._$System$_._$Cnds$_._$OnCanvasSnapshot$_, null));
        },
        _$SetCanvasSize$_(t, s) {
            if (!(t <= 0 || s <= 0)) {
                this._$_runtime$_._$SetViewportSize$_(t, s), this._$_runtime$_._$GetCurrentLayout$_()._$BoundScrolling$_();
                const i = this._$_runtime$_._$GetCanvasManager$_();
                i && ("off" !== i._$GetCurrentFullscreenMode$_() && this._$_runtime$_._$SetOriginalViewportSize$_(t, s), 
                i._$SetSize$_(i._$GetLastWidth$_(), i._$GetLastHeight$_(), !0), 
                this._$_runtime$_._$UpdateRender$_());
            }
        },
        _$SetFullscreenQuality$_(t) {
            const s = this._$_runtime$_._$GetCanvasManager$_();
            s && "off" !== s._$GetCurrentFullscreenMode$_() && (s._$SetFullscreenScalingQuality$_(0 !== t ? "high" : "low"), 
            s._$SetSize$_(s._$GetLastWidth$_(), s._$GetLastHeight$_(), !0));
        },
        _$SaveState$_(t) {
            this._$_runtime$_._$SaveToSlot$_(t);
        },
        _$SaveStateJSON$_() {
            this._$_runtime$_._$SaveToJsonString$_();
        },
        _$LoadState$_(t) {
            this._$_runtime$_._$LoadFromSlot$_(t);
        },
        _$LoadStateJSON$_(t) {
            this._$_runtime$_._$LoadFromJsonString$_(t);
        },
        _$SetHalfFramerateMode$_(t) {},
        _$ResetPersisted$_() {
            for (const t of this._$_runtime$_._$GetLayoutManager$_()._$GetAllLayouts$_()) t._$ResetPersistData$_();
        },
        _$SetPixelRounding$_(t) {
            this._$_runtime$_._$SetPixelRoundingEnabled$_(0 !== t);
        },
        _$SetFramerateMinMax$_(t, s) {
            this._$_runtime$_._$SetMaxDt$_(1 / t), this._$_runtime$_._$SetMinDt$_(1 / s);
        },
        _$SetDeltaTimeMinMax$_(t, s) {
            this._$_runtime$_._$SetMinDt$_(t), this._$_runtime$_._$SetMaxDt$_(s);
        },
        _$SetFramerateMode$_(t) {
            this._$_runtime$_._$_SetFramerateMode$_([ "vsync", "unlimited-tick", "unlimited-frame" ][t]);
        },
        _$SortZOrderByInstVar$_(t, i) {
            if (t) {
                const s = t._$GetCurrentSol$_(), e = s._$GetInstances$_(), n = ja, h = za, r = this._$_runtime$_._$GetCurrentLayout$_(), o = t._$IsFamily$_(), a = t._$GetFamilyIndex$_();
                for (let t = 0, s = e.length; t < s; ++t) {
                    const l = e[t], u = l._$GetWorldInfo$_();
                    if (u) {
                        let t;
                        t = o ? l._$GetInstanceVariableValue$_(i + l._$GetObjectClass$_()._$GetFamilyInstanceVariableOffset$_(a)) : l._$GetInstanceVariableValue$_(i), 
                        n.push([ u._$GetLayer$_()._$GetIndex$_(), u._$GetZIndex$_() ]), 
                        h.push([ l, t ]);
                    }
                }
                if (n.length) {
                    n.sort(m), h.sort(g);
                    let i = !1;
                    for (let t = 0, s = n.length; t < s; ++t) {
                        const c = h[t][0], f = r._$GetLayerByIndex$_(n[t][0]), d = n[t][1], p = f._$_GetInstances$_();
                        p[d] !== c && ((p[d] = c)._$GetWorldInfo$_()._$_SetLayer$_(f, !0), 
                        f._$SetZIndicesChanged$_(c), i = !0);
                    }
                    i && this._$_runtime$_._$UpdateRender$_(), Fa._$clearArray$_(ja), 
                    Fa._$clearArray$_(za);
                }
            }
        },
        _$SetCollisionCellSize$_(t, s) {
            t = Math.floor(t), s = Math.floor(s), t <= 0 || s <= 0 || !Number.isFinite(t) || !Number.isFinite(s) || this._$_runtime$_._$GetCollisionEngine$_()._$SetCollisionCellSize$_(t, s);
        },
        _$GoToLayout$_(t) {
            if (!this._$_runtime$_._$IsLoading$_()) {
                const s = this._$_runtime$_._$GetLayoutManager$_();
                s._$IsPendingChangeMainLayout$_() || s._$ChangeMainLayout$_(t);
            }
        },
        _$GoToLayoutByName$_(t) {
            if (!this._$_runtime$_._$IsLoading$_()) {
                const s = this._$_runtime$_._$GetLayoutManager$_();
                if (!s._$IsPendingChangeMainLayout$_()) {
                    const i = s._$GetLayoutByName$_(t);
                    i && s._$ChangeMainLayout$_(i);
                }
            }
        },
        _$NextPrevLayout$_(t) {
            if (!this._$_runtime$_._$IsLoading$_()) {
                const s = this._$_runtime$_._$GetLayoutManager$_();
                if (!s._$IsPendingChangeMainLayout$_()) {
                    const i = s._$GetAllLayouts$_(), e = i.indexOf(s._$GetMainRunningLayout$_());
                    if ((!t || 0 !== e) && (t || e !== i.length - 1)) {
                        const n = i[e + (t ? -1 : 1)];
                        s._$ChangeMainLayout$_(n);
                    }
                }
            }
        },
        _$RestartLayout$_() {
            if (!this._$_runtime$_._$IsLoading$_()) {
                const t = this._$_runtime$_._$GetLayoutManager$_();
                t._$IsPendingChangeMainLayout$_() || (t._$ChangeMainLayout$_(t._$GetMainRunningLayout$_()), 
                this._$_runtime$_._$GetEventSheetManager$_()._$ResetAllGroupsInitialActivation$_());
            }
        },
        _$SetLayerVisible$_(t, s) {
            t && t._$SetVisible$_(s);
        },
        _$SetLayerInteractive$_(t, s) {
            t && t._$SetInteractive$_(s);
        },
        _$SetLayerHTML$_(t, s) {
            t && t._$SetIsHTMLElementsLayer$_(s);
        },
        _$SetLayerOpacity$_(t, s) {
            t && t._$SetOpacity$_(s / 100);
        },
        _$SetLayerScale$_(t, s) {
            t && t._$SetOwnScale$_(s);
        },
        _$SetLayerScaleRate$_(t, s) {
            t && t._$SetScaleRate$_(s);
        },
        _$SetLayerAngle$_(t, s) {
            t && t._$SetAngle$_(Fa._$toRadians$_(+s));
        },
        _$SetLayerScroll$_(t, s, i) {
            t && (t._$SetOwnScrollPositionEnabled$_(!0), t._$SetScrollX$_(s), t._$SetScrollY$_(i));
        },
        _$RestoreLayerScroll$_(t) {
            t && t._$SetOwnScrollPositionEnabled$_(!1);
        },
        _$SetLayerParallax$_(t, s, i) {
            t && t._$SetParallax$_(s / 100, i / 100);
        },
        _$SetLayerZElevation$_(t, s) {
            t && t._$SetZElevation$_(+s);
        },
        _$SetLayerBackground$_(t, s) {
            if (t) {
                Ua._$setFromRgbValue$_(s), Ua._$clamp$_();
                const i = t._$GetBackgroundColor$_();
                i._$equalsIgnoringAlpha$_(Ua) || (i._$copyRgb$_(Ua), this._$UpdateRender$_());
            }
        },
        _$SetLayerTransparent$_(t, s) {
            t && t._$SetTransparent$_(s);
        },
        _$SetLayerBlendMode$_(t, s) {
            t && t._$SetBlendMode$_(s);
        },
        _$SetLayerEffectEnabled$_(t, s, i) {
            if (t) {
                const e = t._$GetEffectList$_(), n = e._$GetEffectTypeByName$_(i);
                if (n) {
                    const h = 1 === s;
                    n._$IsActive$_() !== h && (n._$SetActive$_(h), t._$UpdateActiveEffects$_(), 
                    this._$_runtime$_._$UpdateRender$_());
                }
            }
        },
        _$SetLayerEffectParam$_(t, s, i, e) {
            if (t) {
                const n = t._$GetEffectList$_(), h = n._$GetEffectTypeByName$_(s);
                if (h) {
                    i = Math.floor(i);
                    const r = h._$GetShaderProgram$_()._$GetParameterType$_(i);
                    if (r) {
                        "color" === r ? (Ua._$setFromRgbValue$_(e), e = Ua) : "percent" === r && (e /= 100);
                        const o = n._$SetEffectParameter$_(h._$GetIndex$_(), i, e);
                        o && h._$IsActive$_() && this._$_runtime$_._$UpdateRender$_();
                    }
                }
            }
        },
        _$SetLayerForceOwnTexture$_(t, s) {
            t && t._$SetForceOwnTexture$_(s);
        },
        _$SetLayoutScale$_(t) {
            this._$_runtime$_._$GetCurrentLayout$_()._$SetScale$_(+t);
        },
        _$SetLayoutAngle$_(t) {
            this._$_runtime$_._$GetCurrentLayout$_()._$SetAngle$_(Fa._$toRadians$_(+t));
        },
        _$SetLayoutEffectEnabled$_(t, s) {
            const i = this._$_runtime$_._$GetCurrentLayout$_(), e = i._$GetEffectList$_(), n = e._$GetEffectTypeByName$_(s);
            if (n) {
                const h = 1 === t;
                n._$IsActive$_() !== h && (n._$SetActive$_(h), i._$UpdateActiveEffects$_(), 
                this._$_runtime$_._$UpdateRender$_());
            }
        },
        _$SetLayoutEffectParam$_(t, s, i) {
            const e = this._$_runtime$_._$GetCurrentLayout$_(), n = e._$GetEffectList$_(), h = n._$GetEffectTypeByName$_(t);
            if (h) {
                s = Math.floor(s);
                const r = h._$GetShaderProgram$_()._$GetParameterType$_(s);
                if (r) {
                    "color" === r ? (Ua._$setFromRgbValue$_(i), i = Ua) : "percent" === r && (i /= 100);
                    const o = n._$SetEffectParameter$_(h._$GetIndex$_(), s, i);
                    o && h._$IsActive$_() && this._$_runtime$_._$UpdateRender$_();
                }
            }
        },
        _$SetLayoutVanishingPoint$_(t, s) {
            const i = this._$_runtime$_._$GetCurrentLayout$_();
            i._$SetVanishingPointXY$_(t / 100, s / 100);
        },
        _$SetLayoutProjection$_(t) {
            const s = this._$_runtime$_._$GetCurrentLayout$_();
            0 === t ? s._$SetPerspectiveProjection$_() : s._$SetOrthographicProjection$_();
        },
        _$ScrollX$_(t) {
            const s = this._$_runtime$_._$GetCurrentLayout$_();
            s._$SetScrollX$_(t);
        },
        _$ScrollY$_(t) {
            const s = this._$_runtime$_._$GetCurrentLayout$_();
            s._$SetScrollY$_(t);
        },
        _$Scroll$_(t, s) {
            const i = this._$_runtime$_._$GetCurrentLayout$_();
            i._$SetScrollX$_(t), i._$SetScrollY$_(s);
        },
        _$ScrollToObject$_(t) {
            if (t) {
                const s = t._$GetFirstPicked$_();
                if (s) {
                    const i = s._$GetWorldInfo$_();
                    if (i) {
                        const e = this._$_runtime$_._$GetCurrentLayout$_();
                        e._$SetScrollX$_(i._$GetX$_()), e._$SetScrollY$_(i._$GetY$_());
                    }
                }
            }
        },
        _$AddLayer$_(t, s, i) {
            const e = this._$_runtime$_._$GetCurrentLayout$_();
            try {
                e._$AddLayer$_(t, s, i);
            } catch (t) {
                console.warn("[Construct] Cannot add layer: ", t);
            }
        },
        _$MoveLayer$_(t, s, i) {
            if (t) {
                const e = this._$_runtime$_._$GetCurrentLayout$_();
                try {
                    e._$MoveLayer$_(t, s, i);
                } catch (t) {
                    console.warn("[Construct] Cannot move layer: ", t);
                }
            }
        },
        _$RemoveLayer$_(t) {
            if (t) {
                const s = this._$_runtime$_._$GetCurrentLayout$_();
                s._$RemoveLayer$_(t);
            }
        },
        _$RemoveAllDynamicLayers$_() {
            this._$_runtime$_._$GetCurrentLayout$_()._$RemoveAllDynamicLayers$_();
        },
        async _$LoadObjectTextures$_(t) {
            const s = this._$_runtime$_._$GetMainRunningLayout$_();
            if (s && t && !this._$_runtime$_._$IsLoading$_()) {
                const i = t._$IsFamily$_() ? t._$GetFamilyMembers$_() : [ t ];
                await this._$_LoadTexturesForObjectClasses$_(s, i);
            }
        },
        async _$LoadObjectTexturesByName$_(t) {
            await Fa._$Plugins$_._$System$_._$Acts$_._$LoadObjectTextures$_.call(this, this._$_runtime$_._$GetObjectClassByName$_(t));
        },
        _$UnloadObjectTextures$_(t) {
            const s = this._$_runtime$_._$GetMainRunningLayout$_();
            if (s && t) {
                const i = t._$IsFamily$_() ? t._$GetFamilyMembers$_() : [ t ];
                this._$_UnloadTexturesForObjectClasses$_(s, i);
            }
        },
        _$UnloadObjectTexturesByName$_(t) {
            Fa._$Plugins$_._$System$_._$Acts$_._$UnloadObjectTextures$_.call(this, this._$_runtime$_._$GetObjectClassByName$_(t));
        },
        _$UnloadUnusedTextures$_() {
            const t = this._$_runtime$_._$GetMainRunningLayout$_();
            if (t) {
                const s = t._$_GetTextureLoadedObjectTypes$_();
                this._$_UnloadTexturesForObjectClasses$_(t, s);
            }
        },
        async _$LoadLayoutTextures$_(t) {
            const s = this._$_runtime$_._$GetMainRunningLayout$_();
            t && s && !this._$_runtime$_._$IsLoading$_() && await this._$_LoadTexturesForObjectClasses$_(s, t._$_GetInitialObjectClasses$_());
        },
        async _$LoadLayoutTexturesByName$_(t) {
            const s = this._$_runtime$_._$GetMainRunningLayout$_(), i = this._$_runtime$_._$GetLayoutManager$_()._$GetLayoutByName$_(t);
            i && s && !this._$_runtime$_._$IsLoading$_() && await this._$_LoadTexturesForObjectClasses$_(s, i._$_GetInitialObjectClasses$_());
        },
        _$SetFunctionReturnValue$_(t) {
            const s = this._$_eventStack$_._$GetCurrentExpFuncStackFrame$_();
            if (s) switch (s._$GetFunctionReturnType$_()) {
              case 1:
                "number" == typeof t && s._$SetFunctionReturnValue$_(t);
                break;

              case 2:
                "string" == typeof t && s._$SetFunctionReturnValue$_(t);
                break;

              case 3:
                s._$SetFunctionReturnValue$_(t);
            }
        },
        _$MapFunction$_(t, s, i) {
            const e = this._$_GetFunctionMap$_(t.toLowerCase(), !0), n = e._$strMap$_, h = s.toLowerCase(), r = (n.has(h) && console.warn(`[Construct] Function map '${t}' string '${s}' already in map; overwriting entry`), 
            Fa.first(n.values()) || e._$defaultFunc$_);
            if (r) {
                const o = 0 !== r._$GetReturnType$_(), a = 0 !== i._$GetReturnType$_();
                if (o != a) return void console.error(`[Construct] Function map '${t}' string '${s}' function return type not compatible with other functions in the map; entry ignored`);
            }
            n.set(h, i);
        },
        _$MapFunctionDefault$_(t, s) {
            const i = this._$_GetFunctionMap$_(t.toLowerCase(), !0), e = (i._$defaultFunc$_ && console.warn(`[Construct] Function map '${t}' already has a default; overwriting entry`), 
            Fa.first(i._$strMap$_.values()) || i._$defaultFunc$_);
            if (e) {
                const n = 0 !== e._$GetReturnType$_(), h = 0 !== s._$GetReturnType$_();
                if (n != h) return void console.error(`[Construct] Function map '${t}' default: function return type not compatible with other functions in the map; entry ignored`);
            }
            i._$defaultFunc$_ = s;
        },
        _$CallMappedFunction$_(t, s, i) {
            const e = this._$_runtime$_, n = e._$IsDebugging$_() ? Wa : null, h = (i = Math.floor(i), 
            this._$_GetFunctionMap$_(t.toLowerCase(), !1));
            if (!h) return console.warn(`[Construct] Call mapped function: map name '${t}' not found; call ignored`), 
            n;
            let r = h._$strMap$_.get(s.toLowerCase());
            if (!r) {
                if (!h._$defaultFunc$_) return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; call ignored (consider setting a default)`), 
                n;
                r = h._$defaultFunc$_, i = 0;
            }
            if (!r._$IsEnabled$_()) return n;
            if (0 !== r._$GetReturnType$_()) return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has a return type so cannot be called`), 
            n;
            const o = e._$GetEventSheetManager$_(), a = o._$GetCurrentEvent$_(), l = a._$GetSolModifiersIncludingParents$_(), u = 0 < l.length, c = (u && (r._$IsCopyPicked$_() ? o._$PushCopySol$_(l) : o._$PushCleanSol$_(l)), 
            []), f = o._$FindFirstFunctionBlockParent$_(a);
            if (f) {
                const p = f._$GetFunctionParameters$_();
                for (let t = i, s = p.length; t < s; ++t) c.push(p[t]._$GetValue$_());
            }
            const d = r._$GetFunctionParameters$_();
            for (let t = c.length, s = d.length; t < s; ++t) c.push(d[t]._$GetInitialValue$_());
            return e._$IsDebugging$_() ? this._$_DebugDoCallMappedFunction$_(o, r, c, u, l) : this._$_DoCallMappedFunction$_(o, r, c, u, l);
        }
    };
}

{
    const _ = self._$C3$_;
    _._$Plugins$_._$System$_._$Exps$_ = {
        _$int$_: function(t) {
            return "string" == typeof t && (t = parseInt(t, 10), isNaN(t)) && (t = 0), 
            Math.floor(t);
        },
        float: function(t) {
            return "string" == typeof t && (t = parseFloat(t), isNaN(t)) ? 0 : t;
        },
        _$str$_(t) {
            return t.toString();
        },
        _$len$_(t) {
            return "string" == typeof t ? t.length : 0;
        },
        random(t, s) {
            return void 0 === s ? this._$_runtime$_._$Random$_() * t : this._$_runtime$_._$Random$_() * (s - t) + t;
        },
        _$choose$_(...t) {
            const s = Math.floor(this._$_runtime$_._$Random$_() * t.length);
            return t[s];
        },
        _$chooseindex$_(t, ...s) {
            return "number" != typeof t && (t = 0), s[t = _._$clamp$_(Math.floor(t), 0, s.length - 1)];
        },
        pi() {
            return Math.PI;
        },
        _$infinity$_() {
            return 1 / 0;
        },
        sqrt(t) {
            return Math.sqrt(t);
        },
        abs(t) {
            return Math.abs(t);
        },
        round(t) {
            return Math.round(t);
        },
        _$roundtodp$_(t, s) {
            s = Math.max(Math.floor(s), 0);
            const i = Math.pow(10, s);
            return Math.round((t + Number.EPSILON) * i) / i;
        },
        floor(t) {
            return Math.floor(t);
        },
        ceil(t) {
            return Math.ceil(t);
        },
        sign(t) {
            return Math.sign(t);
        },
        sin(t) {
            return Math.sin(_._$toRadians$_(t));
        },
        cos(t) {
            return Math.cos(_._$toRadians$_(t));
        },
        tan(t) {
            return Math.tan(_._$toRadians$_(t));
        },
        asin(t) {
            return _._$toDegrees$_(Math.asin(t));
        },
        acos(t) {
            return _._$toDegrees$_(Math.acos(t));
        },
        atan(t) {
            return _._$toDegrees$_(Math.atan(t));
        },
        exp(t) {
            return Math.exp(t);
        },
        _$ln$_(t) {
            return Math.log(t);
        },
        log10(t) {
            return Math.log10(t);
        },
        max(...i) {
            let e = i[0];
            "number" != typeof e && (e = 0);
            for (let s = 1, t = i.length; s < t; ++s) {
                let t = i[s];
                "number" == typeof t && e < t && (e = t);
            }
            return e;
        },
        min(...i) {
            let e = i[0];
            "number" != typeof e && (e = 0);
            for (let s = 1, t = i.length; s < t; ++s) {
                let t = i[s];
                "number" == typeof t && e > t && (e = t);
            }
            return e;
        },
        _$clamp$_(t, s, i) {
            return _._$clamp$_(t, s, i);
        },
        _$distance$_(t, s, i, e) {
            return _._$distanceTo$_(t, s, i, e);
        },
        angle(t, s, i, e) {
            return _._$toDegrees$_(_._$angleTo$_(t, s, i, e));
        },
        _$lerp$_(t, s, i) {
            return _._$lerp$_(t, s, i);
        },
        _$unlerp$_(t, s, i) {
            return _._$unlerp$_(t, s, i);
        },
        _$qarp$_(t, s, i, e) {
            return _._$qarp$_(t, s, i, e);
        },
        _$cubic$_(t, s, i, e, n) {
            return _._$cubic$_(t, s, i, e, n);
        },
        _$cosp$_(t, s, i) {
            return _._$cosp$_(t, s, i);
        },
        _$anglediff$_(t, s) {
            return _._$toDegrees$_(_._$angleDiff$_(_._$toRadians$_(t), _._$toRadians$_(s)));
        },
        _$anglelerp$_(t, s, i) {
            return _._$toDegrees$_(_._$angleLerp$_(_._$toRadians$_(t), _._$toRadians$_(s), i));
        },
        _$anglerotate$_(t, s, i) {
            return _._$toDegrees$_(_._$angleRotate$_(_._$toRadians$_(t), _._$toRadians$_(s), _._$toRadians$_(i)));
        },
        _$setbit$_(t, s, i) {
            return (t |= 0) & ~(1 << (s |= 0)) | (i = 0 !== i ? 1 : 0) << s;
        },
        _$togglebit$_(t, s) {
            return (t |= 0) ^ 1 << (0 | s);
        },
        _$getbit$_(t, s) {
            return (t |= 0) & 1 << (0 | s) ? 1 : 0;
        },
        _$newline$_() {
            return "\n";
        },
        _$uppercase$_(t) {
            return "string" == typeof t ? t.toUpperCase() : "";
        },
        _$lowercase$_(t) {
            return "string" == typeof t ? t.toLowerCase() : "";
        },
        left(t, s) {
            return "string" == typeof t ? t.substr(0, s) : "";
        },
        mid(t, s, i) {
            return "string" != typeof t ? "" : i < 0 ? t.substr(s) : t.substr(s, i);
        },
        right(t, s) {
            return "string" == typeof t ? t.substr(Math.max(t.length - s, 0)) : "";
        },
        trim(t) {
            return "string" == typeof t ? t.trim() : "";
        },
        _$tokenat$_(t, s, i) {
            if ("string" != typeof t || "string" != typeof i) return "";
            let e = t.split(i);
            return (s = Math.floor(s)) < 0 || s >= e.length ? "" : e[s];
        },
        _$tokencount$_(t, s) {
            return "string" == typeof t && "string" == typeof s && t.length ? t.split(s).length : 0;
        },
        find(t, s) {
            return "string" == typeof t && "string" == typeof s ? t.search(new RegExp(_._$EscapeRegex$_(s), "i")) : -1;
        },
        _$findcase$_(t, s) {
            return "string" == typeof t && "string" == typeof s ? t.search(new RegExp(_._$EscapeRegex$_(s), "")) : -1;
        },
        replace(t, s, i) {
            return "string" == typeof t && "string" == typeof s && "string" == typeof i ? t.replace(new RegExp(_._$EscapeRegex$_(s), "gi"), i) : "string" == typeof t ? t : "";
        },
        _$stringsub$_(t, ...i) {
            let e = t;
            for (let t = 0, s = i.length; t < s; ++t) e = e.replaceAll(`{${t}}`, i[t].toString());
            return e;
        },
        _$regexsearch$_(t, s, i) {
            const e = this._$GetRegex$_(s, i);
            return t ? t.search(e) : -1;
        },
        _$regexreplace$_(t, s, i, e) {
            const n = this._$GetRegex$_(s, i);
            return t ? t.replace(n, e) : "";
        },
        _$regexmatchcount$_(t, s, i) {
            const e = this._$GetRegexMatches$_(t.toString(), s, i);
            return e ? e.length : 0;
        },
        _$regexmatchat$_(t, s, i, e) {
            e = Math.floor(e);
            const n = this._$GetRegexMatches$_(t.toString(), s, i);
            return !n || e < 0 || e >= n.length ? "" : n[e];
        },
        _$zeropad$_(t, s) {
            let i = t < 0 ? "-" : "", e = s - (t = t < 0 ? -t : t).toString().length;
            return (i += "0".repeat(Math.max(e, 0))) + t.toString();
        },
        _$urlencode$_(t) {
            return encodeURIComponent(t);
        },
        _$urldecode$_(t) {
            return decodeURIComponent(t);
        },
        _$dt$_() {
            return this._$_runtime$_._$_GetDtFast$_();
        },
        _$wallclockdt$_() {
            return this._$_runtime$_._$GetDt1$_();
        },
        timescale() {
            return this._$_runtime$_._$GetTimeScale$_();
        },
        _$wallclocktime$_() {
            return (Date.now() - this._$_runtime$_._$GetStartTime$_()) / 1e3;
        },
        _$unixtime$_() {
            return Date.now();
        },
        time() {
            return this._$_runtime$_._$GetGameTime$_();
        },
        tickcount() {
            return this._$_runtime$_._$GetTickCount$_();
        },
        _$objectcount$_() {
            return this._$_runtime$_._$GetObjectCount$_();
        },
        fps() {
            return this._$_runtime$_._$GetFramesPerSecond$_();
        },
        _$cpuutilisation$_() {
            return this._$_runtime$_._$GetMainThreadTime$_();
        },
        _$gpuutilisation$_() {
            return this._$_runtime$_._$GetGPUUtilisation$_();
        },
        _$windowwidth$_() {
            return this._$_runtime$_._$GetCanvasManager$_()._$GetDeviceWidth$_();
        },
        _$windowheight$_() {
            return this._$_runtime$_._$GetCanvasManager$_()._$GetDeviceHeight$_();
        },
        _$originalwindowwidth$_() {
            return this._$_runtime$_._$GetOriginalViewportWidth$_();
        },
        _$originalwindowheight$_() {
            return this._$_runtime$_._$GetOriginalViewportHeight$_();
        },
        _$originalviewportwidth$_() {
            return this._$_runtime$_._$GetOriginalViewportWidth$_();
        },
        _$originalviewportheight$_() {
            return this._$_runtime$_._$GetOriginalViewportHeight$_();
        },
        _$scrollx$_() {
            return this._$_runtime$_._$GetCurrentLayout$_()._$GetScrollX$_();
        },
        _$scrolly$_() {
            return this._$_runtime$_._$GetCurrentLayout$_()._$GetScrollY$_();
        },
        _$layoutname$_() {
            return this._$_runtime$_._$GetCurrentLayout$_()._$GetName$_();
        },
        _$layoutscale$_() {
            return this._$_runtime$_._$GetCurrentLayout$_()._$GetScale$_();
        },
        _$layoutangle$_() {
            return _._$toDegrees$_(this._$_runtime$_._$GetCurrentLayout$_()._$GetAngle$_());
        },
        _$layoutwidth$_() {
            return this._$_runtime$_._$GetCurrentLayout$_()._$GetWidth$_();
        },
        _$layoutheight$_() {
            return this._$_runtime$_._$GetCurrentLayout$_()._$GetHeight$_();
        },
        _$vanishingpointx$_() {
            return 100 * this._$_runtime$_._$GetCurrentLayout$_()._$GetVanishingPointX$_();
        },
        _$vanishingpointy$_() {
            return 100 * this._$_runtime$_._$GetCurrentLayout$_()._$GetVanishingPointY$_();
        },
        _$viewportleft$_(t) {
            const s = this._$_runtime$_._$GetCurrentLayout$_()._$GetLayer$_(t);
            return s ? s._$GetViewport3D$_()._$getLeft$_() : 0;
        },
        _$viewporttop$_(t) {
            const s = this._$_runtime$_._$GetCurrentLayout$_()._$GetLayer$_(t);
            return s ? s._$GetViewport3D$_()._$getTop$_() : 0;
        },
        _$viewportright$_(t) {
            const s = this._$_runtime$_._$GetCurrentLayout$_()._$GetLayer$_(t);
            return s ? s._$GetViewport3D$_()._$getRight$_() : 0;
        },
        _$viewportbottom$_(t) {
            const s = this._$_runtime$_._$GetCurrentLayout$_()._$GetLayer$_(t);
            return s ? s._$GetViewport3D$_()._$getBottom$_() : 0;
        },
        _$viewportwidth$_(t) {
            const s = this._$_runtime$_._$GetCurrentLayout$_()._$GetLayer$_(t);
            return s ? s._$GetViewport3D$_().width() : 0;
        },
        _$viewportheight$_(t) {
            const s = this._$_runtime$_._$GetCurrentLayout$_()._$GetLayer$_(t);
            return s ? s._$GetViewport3D$_().height() : 0;
        },
        _$viewportmidx$_(t) {
            const s = this._$_runtime$_._$GetCurrentLayout$_()._$GetLayer$_(t);
            if (s) {
                const i = s._$GetViewport3D$_();
                return (i._$getLeft$_() + i._$getRight$_()) / 2;
            }
            return 0;
        },
        _$viewportmidy$_(t) {
            const s = this._$_runtime$_._$GetCurrentLayout$_()._$GetLayer$_(t);
            if (s) {
                const i = s._$GetViewport3D$_();
                return (i._$getTop$_() + i._$getBottom$_()) / 2;
            }
            return 0;
        },
        _$canvastolayerx$_(t, s, i) {
            const e = this._$_runtime$_._$GetCurrentLayout$_()._$GetLayer$_(t);
            return e ? e._$CanvasCssToLayer$_(s, i)[0] : 0;
        },
        _$canvastolayery$_(t, s, i) {
            const e = this._$_runtime$_._$GetCurrentLayout$_()._$GetLayer$_(t);
            return e ? e._$CanvasCssToLayer$_(s, i)[1] : 0;
        },
        _$layertocanvasx$_(t, s, i) {
            const e = this._$_runtime$_._$GetCurrentLayout$_()._$GetLayer$_(t);
            return e ? e._$LayerToCanvasCss$_(s, i)[0] : 0;
        },
        _$layertocanvasy$_(t, s, i) {
            const e = this._$_runtime$_._$GetCurrentLayout$_()._$GetLayer$_(t);
            return e ? e._$LayerToCanvasCss$_(s, i)[1] : 0;
        },
        _$layertolayerx$_(t, s, i, e) {
            const n = this._$_runtime$_._$GetCurrentLayout$_(), h = n._$GetLayer$_(t), r = n._$GetLayer$_(s);
            if (!h || !r || h === r) return i;
            const [ o, a ] = h._$LayerToCanvasCss$_(i, e);
            return r._$CanvasCssToLayer$_(o, a)[0];
        },
        _$layertolayery$_(t, s, i, e) {
            const n = this._$_runtime$_._$GetCurrentLayout$_(), h = n._$GetLayer$_(t), r = n._$GetLayer$_(s);
            if (!h || !r || h === r) return e;
            const [ o, a ] = h._$LayerToCanvasCss$_(i, e);
            return r._$CanvasCssToLayer$_(o, a)[1];
        },
        _$layerscale$_(t) {
            const s = this._$_runtime$_._$GetCurrentLayout$_()._$GetLayer$_(t);
            return s ? s._$GetOwnScale$_() : 0;
        },
        _$layerangle$_(t) {
            const s = this._$_runtime$_._$GetCurrentLayout$_()._$GetLayer$_(t);
            return s ? _._$toDegrees$_(s._$GetOwnAngle$_()) : 0;
        },
        _$layeropacity$_(t) {
            const s = this._$_runtime$_._$GetCurrentLayout$_()._$GetLayer$_(t);
            return s ? 100 * s._$GetOpacity$_() : 0;
        },
        _$layerscalerate$_(t) {
            const s = this._$_runtime$_._$GetCurrentLayout$_()._$GetLayer$_(t);
            return s ? s._$GetScaleRate$_() : 0;
        },
        _$layerscrollx$_(t) {
            const s = this._$_runtime$_._$GetCurrentLayout$_()._$GetLayer$_(t);
            return s ? s._$GetScrollX$_() : 0;
        },
        _$layerscrolly$_(t) {
            const s = this._$_runtime$_._$GetCurrentLayout$_()._$GetLayer$_(t);
            return s ? s._$GetScrollY$_() : 0;
        },
        _$layerparallaxx$_(t) {
            const s = this._$_runtime$_._$GetCurrentLayout$_()._$GetLayer$_(t);
            return s ? 100 * s._$GetParallaxX$_() : 0;
        },
        _$layerparallaxy$_(t) {
            const s = this._$_runtime$_._$GetCurrentLayout$_()._$GetLayer$_(t);
            return s ? 100 * s._$GetParallaxY$_() : 0;
        },
        _$layerzelevation$_(t) {
            const s = this._$_runtime$_._$GetCurrentLayout$_()._$GetLayer$_(t);
            return s ? s._$GetZElevation$_() : 0;
        },
        _$layerindex$_(t) {
            const s = this._$_runtime$_._$GetCurrentLayout$_()._$GetLayer$_(t);
            return s ? s._$GetIndex$_() : -1;
        },
        _$canvassnapshot$_() {
            const t = this._$_runtime$_._$GetCanvasManager$_();
            return t ? t._$GetCanvasSnapshotUrl$_() : "";
        },
        _$loopindex$_(t) {
            const s = this._$_loopStack$_;
            if (!s._$IsInLoop$_()) return 0;
            if (t) {
                const i = s._$FindByName$_(t);
                return i ? i._$GetIndex$_() : 0;
            }
            return s._$GetCurrent$_()._$GetIndex$_();
        },
        _$savestatejson$_() {
            return this._$_runtime$_._$GetLastSaveJsonString$_();
        },
        _$callmapped$_(t, s, ...i) {
            const e = this._$_GetFunctionMap$_(t.toLowerCase(), !1);
            if (!e) return console.warn(`[Construct] Call mapped function: map name '${t}' not found; returning 0`), 
            0;
            let n = e._$strMap$_.get(s.toLowerCase());
            if (!n) {
                if (!e._$defaultFunc$_) return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; returning 0 (consider setting a default)`), 
                0;
                n = e._$defaultFunc$_;
            }
            const h = n._$GetReturnType$_(), r = n._$GetDefaultReturnValue$_();
            if (0 === h) return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has no return type so cannot be called from an expression; returning 0`), 
            0;
            if (!n._$IsEnabled$_()) return r;
            const o = this._$_runtime$_, a = o._$GetEventSheetManager$_(), l = a._$GetCurrentEvent$_(), u = l._$GetSolModifiersIncludingParents$_(), c = 0 < u.length, f = (c && (n._$IsCopyPicked$_() ? a._$PushCopySol$_(u) : a._$PushCleanSol$_(u)), 
            n._$GetFunctionParameters$_());
            for (let t = i.length, s = f.length; t < s; ++t) i.push(f[t]._$GetInitialValue$_());
            const d = n._$GetEventBlock$_(), p = d._$RunAsExpressionFunctionCall$_(d._$GetSolModifiersIncludingParents$_(), n._$IsCopyPicked$_(), h, r, ...i);
            return c && a._$PopSol$_(u), p;
        },
        _$loadingprogress$_() {
            return this._$_runtime$_._$GetAssetManager$_()._$GetLoadProgress$_();
        },
        _$imageloadingprogress$_() {
            return this._$GetImageLoadingProgress$_();
        },
        renderer() {
            return this._$_runtime$_._$GetWebGPURenderer$_() ? "webgpu" : "webgl";
        },
        _$rendererdetail$_() {
            return this._$_runtime$_._$GetWebGPURenderer$_() ? this._$_runtime$_._$GetWebGPURenderer$_().GetAdapterInfoString() : this._$_runtime$_._$GetWebGLRenderer$_()._$GetUnmaskedRenderer$_();
        },
        _$imagememoryusage$_() {
            let t = this._$_runtime$_._$GetRenderer$_()._$GetEstimatedTextureMemoryUsage$_();
            return Math.round(100 * t / 1048576) / 100;
        },
        _$rgb$_(t, s, i) {
            return _._$PackRGB$_(t, s, i);
        },
        _$rgbex$_(t, s, i) {
            return _._$PackRGBEx$_(t / 100, s / 100, i / 100);
        },
        _$rgba$_(t, s, i, e) {
            return _._$PackRGBAEx$_(t / 100, s / 100, i / 100, e / 100);
        },
        _$rgbex255$_(t, s, i) {
            return _._$PackRGBEx$_(t / 255, s / 255, i / 255);
        },
        _$rgba255$_(t, s, i, e) {
            return _._$PackRGBAEx$_(t / 255, s / 255, i / 255, e / 255);
        },
        _$projectname$_() {
            return this._$_runtime$_._$GetProjectName$_();
        },
        _$projectversion$_() {
            return this._$_runtime$_._$GetProjectVersion$_();
        },
        _$currenteventsheetname$_() {
            return this._$_runtime$_._$GetCurrentEvent$_()._$GetEventSheet$_()._$GetName$_();
        },
        _$currenteventnumber$_() {
            return this._$_runtime$_._$GetCurrentEvent$_()._$GetDisplayNumber$_();
        }
    };
}

{
    const Qa = self._$C3$_;
    Qa._$Plugins$_._$Sprite$_ = class extends Qa._$SDKPluginBase$_ {
        constructor(t) {
            super(t);
        }
        _$Release$_() {
            super._$Release$_();
        }
    };
}

{
    const Va = self._$C3$_, Ja = self._$C3X$_, Ya = [], Ha = (Va._$Plugins$_._$Sprite$_._$Type$_ = class extends Va._$SDKTypeBase$_ {
        constructor(t) {
            super(t), this._$_animations$_ = t._$GetAnimations$_();
        }
        _$Release$_() {
            Va._$clearArray$_(this._$_animations$_), super._$Release$_();
        }
        _$OnCreate$_() {
            for (const t of this._$_animations$_) t._$LoadAllAssets$_(this._$_runtime$_);
        }
        _$LoadTextures$_(s) {
            const i = {
                _$sampling$_: this._$_runtime$_._$GetSampling$_()
            };
            return Promise.all(this._$_animations$_.map(t => t._$LoadAllTextures$_(s, i)));
        }
        _$ReleaseTextures$_() {
            for (const t of this._$_animations$_) t._$ReleaseAllTextures$_();
        }
        _$OnDynamicTextureLoadComplete$_() {
            this._$_UpdateAllCurrentTexture$_();
        }
        _$_UpdateAllCurrentTexture$_() {
            for (const t of this._$_objectClass$_._$instancesIncludingPendingCreate$_()) t._$GetSdkInstance$_()._$_UpdateCurrentTexture$_();
        }
        _$FinishCondition$_(t) {
            Va._$Plugins$_._$Sprite$_._$FinishCollisionCondition$_(this, t);
        }
        _$BeforeRunAction$_(t) {
            Ya.push({
                _$objectClass$_: null,
                _$createHierarchy$_: !1,
                instances: []
            });
        }
        _$_SpawnPickInstance$_(t, s, i) {
            const e = Ya.at(-1);
            e._$objectClass$_ = t, e._$createHierarchy$_ = i, e.instances.push(s);
        }
        _$AfterRunAction$_(t) {
            const s = Ya.pop(), i = s._$objectClass$_, e = s._$createHierarchy$_;
            if (i) {
                const n = new Map();
                for (const h of s.instances) h._$CollectInstancesToPick$_(n, i, e);
                for (const [ r, o ] of n) r._$GetCurrentSol$_()._$SetSetPicked$_(o);
            }
        }
        _$_AddAnimation$_(t) {
            const s = this._$GetObjectClass$_()._$AddAnimation$_(t), i = this._$GetRuntime$_(), e = s._$GetFrameAt$_(0);
            return e._$GetImageInfo$_()._$LoadStaticTexture$_(i._$GetRenderer$_(), {
                _$sampling$_: i._$GetSampling$_()
            }).then(() => this._$_UpdateAllCurrentTexture$_()), s;
        }
        _$_RemoveAnimation$_(t) {
            for (const s of this._$_objectClass$_._$instancesIncludingPendingCreate$_()) s._$GetSdkInstance$_()._$_OnAnimationRemoved$_(t);
            this._$GetObjectClass$_()._$RemoveAnimation$_(t);
        }
        _$_AddAnimationFrame$_(t, s) {
            const i = this._$_objectClass$_._$GetAnimationByName$_(t);
            if (!i) throw new Error(`cannot find animation name '${t}'`);
            let e = i._$FrameTagOrIndexToIndex$_(s);
            e < 0 && (e += i._$GetFrameCount$_() + 1);
            const n = Va._$AnimationFrameInfo$_._$CreateDynamic$_(this._$GetRuntime$_()), h = (i._$InsertFrameAt$_(n, e), 
            this._$GetRuntime$_());
            n._$GetImageInfo$_()._$LoadStaticTexture$_(h._$GetRenderer$_(), {
                _$sampling$_: h._$GetSampling$_()
            }).then(() => this._$_UpdateAllCurrentTexture$_());
            for (const r of this._$_objectClass$_._$instancesIncludingPendingCreate$_()) r._$GetSdkInstance$_()._$_OnAnimationFramesChanged$_();
            return n;
        }
        _$_RemoveAnimationFrame$_(t, s) {
            const i = this._$_objectClass$_._$GetAnimationByName$_(t);
            if (!i) throw new Error(`cannot find animation name '${t}'`);
            if (1 === i._$GetFrameCount$_()) throw new Error(`cannot remove last frame from animation '${t}'`);
            let e = i._$FrameTagOrIndexToIndex$_(s);
            e < 0 && (e += i._$GetFrameCount$_()), i._$RemoveFrameAt$_(e);
            for (const n of this._$_objectClass$_._$instancesIncludingPendingCreate$_()) n._$GetSdkInstance$_()._$_OnAnimationFramesChanged$_();
        }
        _$GetScriptInterfaceClass$_() {
            return self._$ISpriteObjectType$_;
        }
    }, new WeakMap());
    self._$ISpriteObjectType$_ = class extends self._$IObjectClass$_ {
        constructor(t) {
            super(t), Ha.set(this, t._$GetSdkType$_());
        }
        _$getAnimation$_(t) {
            Ja._$RequireString$_(t);
            const s = Ha.get(this)._$GetObjectClass$_()._$GetAnimationByName$_(t);
            return s ? s._$GetIAnimation$_() : null;
        }
        _$getAllAnimations$_() {
            return Ha.get(this)._$GetObjectClass$_()._$GetAllAnimations$_().map(t => t._$GetIAnimation$_());
        }
        _$addAnimation$_(t) {
            return Ja._$RequireString$_(t), Ha.get(this)._$_AddAnimation$_(t)._$GetIAnimation$_();
        }
        _$removeAnimation$_(t) {
            Ja._$RequireString$_(t), Ha.get(this)._$_RemoveAnimation$_(t);
        }
        _$addAnimationFrame$_(t, s) {
            if (Ja._$RequireString$_(t), "number" != typeof s && "string" != typeof s) throw new TypeError("invalid insert location");
            return Ha.get(this)._$_AddAnimationFrame$_(t, s)._$GetIAnimationFrame$_();
        }
        _$removeAnimationFrame$_(t, s) {
            if (Ja._$RequireString$_(t), "number" != typeof s && "string" != typeof s) throw new TypeError("invalid insert location");
            Ha.get(this)._$_RemoveAnimationFrame$_(t, s);
        }
    };
}

{
    const E = self._$C3$_, qa = self._$C3X$_, Za = E._$New$_(E.Rect), Xa = E._$New$_(E._$Quad$_), Ka = E._$New$_(E._$Vector2$_), N = (E._$Plugins$_._$Sprite$_.Instance = class extends E._$SDKWorldInstanceBase$_ {
        constructor(t, s) {
            super(t);
            let i = !0, e = "", n = 0, h = !0;
            s && (i = !!s[0], e = s[1], n = s[2], h = s[3]), this._$_currentAnimation$_ = this._$_objectClass$_._$GetAnimationByName$_(e) || this._$_objectClass$_._$GetAnimations$_()[0], 
            this._$_currentFrameIndex$_ = E._$clamp$_(n, 0, this._$_currentAnimation$_._$GetFrameCount$_() - 1), 
            this._$_currentAnimationFrame$_ = this._$_currentAnimation$_._$GetFrameAt$_(this._$_currentFrameIndex$_);
            const r = this._$_currentAnimationFrame$_._$GetImageInfo$_(), o = (this._$_currentTexture$_ = r._$GetTexture$_(), 
            this._$_currentRcTex$_ = r._$GetTexRect$_(), this._$_currentQuadTex$_ = r._$GetTexQuad$_(), 
            this._$HandleRendererContextLoss$_(), t._$SetFlag$_(2, !0), t._$SetFlag$_(1, 0 <= this._$_currentAnimation$_._$GetSpeed$_()), 
            this._$_currentAnimationSpeed$_ = Math.abs(this._$_currentAnimation$_._$GetSpeed$_()), 
            this._$_currentAnimationRepeatTo$_ = this._$_currentAnimation$_._$GetRepeatTo$_(), 
            this._$_animationTimer$_ = E._$New$_(E._$KahanSum$_), this._$_frameStartTime$_ = 0, 
            this._$_animationRepeats$_ = 0, this._$_animTriggerName$_ = "", this._$_changeAnimFrameIndex$_ = -1, 
            this._$_changeAnimationName$_ = "", this._$_changeAnimationFrom$_ = 0, 
            this._$GetWorldInfo$_());
            this._$_bquadRef$_ = o._$GetBoundingQuad$_(), o._$SetVisible$_(i), o._$SetCollisionEnabled$_(h), 
            o._$SetOriginX$_(this._$_currentAnimationFrame$_._$GetOriginX$_()), 
            o._$SetOriginY$_(this._$_currentAnimationFrame$_._$GetOriginY$_()), 
            o._$SetSourceCollisionPoly$_(this._$_currentAnimationFrame$_._$GetCollisionPoly$_()), 
            o._$SetBboxChanged$_(), 1 === this._$_objectClass$_._$GetAnimationCount$_() && 1 === this._$_objectClass$_._$GetAnimations$_()[0]._$GetFrameCount$_() || 0 === this._$_currentAnimationSpeed$_ || this._$_StartTicking$_();
        }
        _$Release$_() {
            this._$_currentAnimation$_ = null, this._$_currentAnimationFrame$_ = null, 
            this._$_currentTexture$_ = null, this._$_animationTimer$_ = null, super._$Release$_();
        }
        _$GetCurrentImageInfo$_() {
            return this._$_currentAnimationFrame$_._$GetImageInfo$_();
        }
        _$IsOriginalSizeKnown$_() {
            return !0;
        }
        _$OnRendererContextLost$_() {
            this._$_currentTexture$_ = null;
        }
        _$OnRendererContextRestored$_() {
            this._$_UpdateCurrentTexture$_();
        }
        _$Draw$_(t) {
            const s = this._$_currentTexture$_;
            if (null !== s) {
                t._$SetTexture$_(s);
                const i = this._$GetWorldInfo$_();
                i._$HasMesh$_() ? this._$_DrawMesh$_(i, t) : this._$_DrawStandard$_(i, t);
            }
        }
        _$_DrawStandard$_(t, s) {
            let i = this._$_bquadRef$_;
            this._$_runtime$_._$IsPixelRoundingEnabled$_() && (i = t._$PixelRoundQuad$_(i)), 
            s._$Quad4$_(i, this._$_currentQuadTex$_);
        }
        _$_DrawMesh$_(s, t) {
            const i = s._$GetTransformedMesh$_();
            if (s._$IsMeshChanged$_()) {
                s._$CalculateBbox$_(Za, Xa, !1);
                let t = Xa;
                this._$_runtime$_._$IsPixelRoundingEnabled$_() && (t = s._$PixelRoundQuad$_(t)), 
                i._$CalculateTransformedMesh$_(s._$GetSourceMesh$_(), t, this._$_currentQuadTex$_), 
                s._$SetMeshChanged$_(!1);
            }
            i._$Draw$_(t);
        }
        _$GetAnimationTime$_() {
            return this._$_animationTimer$_._$Get$_();
        }
        _$IsAnimationPlaying$_() {
            return this._$_inst$_._$GetFlag$_(2);
        }
        _$SetAnimationPlaying$_(t) {
            this._$_inst$_._$SetFlag$_(2, t);
        }
        _$IsPlayingForwards$_() {
            return this._$_inst$_._$GetFlag$_(1);
        }
        _$SetPlayingForwards$_(t) {
            this._$_inst$_._$SetFlag$_(1, t);
        }
        _$IsInAnimationTrigger$_() {
            return this._$_inst$_._$GetFlag$_(4);
        }
        _$SetInAnimationTrigger$_(t) {
            this._$_inst$_._$SetFlag$_(4, t);
        }
        _$Tick$_() {
            this._$_changeAnimationName$_ && this._$_DoChangeAnimation$_(), 0 <= this._$_changeAnimFrameIndex$_ && this._$_DoChangeAnimFrame$_();
            const t = this._$_currentAnimationSpeed$_;
            if (this._$IsAnimationPlaying$_() && 0 !== t) {
                const s = this._$_runtime$_._$GetDt$_(this._$_inst$_), i = (this._$_animationTimer$_._$Add$_(s), 
                this._$GetAnimationTime$_()), e = this._$_currentAnimationFrame$_, n = e._$GetDuration$_() / t;
                if (!(i < this._$_frameStartTime$_ + n)) {
                    const h = this._$_currentAnimation$_, r = this._$_currentAnimationRepeatTo$_, o = h._$GetFrameCount$_(), a = h._$GetRepeatCount$_(), l = h._$IsLooping$_(), u = h._$IsPingPong$_(), c = (this._$IsPlayingForwards$_() ? this._$_currentFrameIndex$_++ : this._$_currentFrameIndex$_--, 
                    this._$_frameStartTime$_ += n, this._$_currentFrameIndex$_ >= o && (u ? (this._$SetPlayingForwards$_(!1), 
                    this._$_currentFrameIndex$_ = o - 2) : !l && (this._$_animationRepeats$_++, 
                    this._$_animationRepeats$_ >= a) ? this._$_FinishAnimation$_(!1) : this._$_currentFrameIndex$_ = r), 
                    this._$_currentFrameIndex$_ < 0 && (u ? (this._$_currentFrameIndex$_ = 1, 
                    this._$SetPlayingForwards$_(!0), l || (this._$_animationRepeats$_++, 
                    this._$_animationRepeats$_ >= a && this._$_FinishAnimation$_(!0))) : !l && (this._$_animationRepeats$_++, 
                    this._$_animationRepeats$_ >= a) ? this._$_FinishAnimation$_(!0) : this._$_currentFrameIndex$_ = r), 
                    this._$_currentFrameIndex$_ = E._$clamp$_(this._$_currentFrameIndex$_, 0, o - 1), 
                    h._$GetFrameAt$_(this._$_currentFrameIndex$_));
                    i > this._$_frameStartTime$_ + c._$GetDuration$_() / t && (this._$_frameStartTime$_ = i), 
                    this._$_OnFrameChanged$_(e, c);
                }
            } else this._$_StopTicking$_();
        }
        _$_FinishAnimation$_(t) {
            this._$_currentFrameIndex$_ = t ? 0 : this._$_currentAnimation$_._$GetFrameCount$_() - 1, 
            this._$SetAnimationPlaying$_(!1), this._$_animTriggerName$_ = this._$_currentAnimation$_._$GetName$_(), 
            this._$SetInAnimationTrigger$_(!0), this._$DispatchScriptEvent$_("animationend", !1, {
                animationName: this._$_animTriggerName$_
            }), this._$Trigger$_(E._$Plugins$_._$Sprite$_._$Cnds$_._$OnAnyAnimFinished$_), 
            this._$Trigger$_(E._$Plugins$_._$Sprite$_._$Cnds$_._$OnAnimFinished$_), 
            this._$SetInAnimationTrigger$_(!1), this._$_animationRepeats$_ = 0;
        }
        _$_OnFrameChanged$_(i, e, t) {
            if (i !== e) {
                const s = this._$GetWorldInfo$_(), n = i._$GetImageInfo$_(), h = e._$GetImageInfo$_(), r = n._$GetWidth$_(), o = n._$GetHeight$_(), a = h._$GetWidth$_(), l = h._$GetHeight$_(), u = (t && t.onFrameChange ? t.onFrameChange(s, r, o, a, l) : (r !== a && s._$SetWidth$_(s._$GetWidth$_() * (a / r)), 
                o !== l && s._$SetHeight$_(s._$GetHeight$_() * (l / o))), s._$SetOriginX$_(e._$GetOriginX$_()), 
                s._$SetOriginY$_(e._$GetOriginY$_()), s._$SetSourceCollisionPoly$_(e._$GetCollisionPoly$_()), 
                s._$SetBboxChanged$_(), this._$_currentAnimationFrame$_ = e, this._$_currentTexture$_ = h._$GetTexture$_(), 
                this._$_currentRcTex$_ = h._$GetTexRect$_(), this._$_currentQuadTex$_ = h._$GetTexQuad$_(), 
                this._$GetInstance$_()._$GetBehaviorInstances$_());
                for (let t = 0, s = u.length; t < s; ++t) u[t]._$OnSpriteFrameChanged$_(i, e);
                this._$DispatchScriptEvent$_("framechange", !1, {
                    animationName: this._$_currentAnimation$_._$GetName$_(),
                    _$animationFrame$_: this._$_currentFrameIndex$_
                }), this._$Trigger$_(E._$Plugins$_._$Sprite$_._$Cnds$_._$OnFrameChanged$_), 
                this._$_runtime$_._$UpdateRender$_();
            }
        }
        _$_StartAnim$_(t) {
            this._$SetAnimationPlaying$_(!0), this._$_frameStartTime$_ = this._$GetAnimationTime$_(), 
            1 === t && 0 !== this._$_currentFrameIndex$_ && (this._$_changeAnimFrameIndex$_ = 0, 
            this._$IsInAnimationTrigger$_() || this._$_DoChangeAnimFrame$_()), this._$_StartTicking$_();
        }
        _$_SetAnim$_(t, s, i) {
            this._$_changeAnimationName$_ = t, this._$_changeAnimationFrom$_ = s, 
            this._$_StartTicking$_(), !i && this._$IsInAnimationTrigger$_() || this._$_DoChangeAnimation$_();
        }
        _$_GetCurrentAnimation$_() {
            return this._$_currentAnimation$_;
        }
        _$_GetCurrentAnimationName$_() {
            return this._$_changeAnimationName$_ || this._$_currentAnimation$_._$GetName$_();
        }
        _$_OnAnimationRemoved$_(t) {
            E._$equalsNoCase$_(t, this._$_GetCurrentAnimationName$_()) && this._$_SetAnim$_(this._$_objectClass$_._$GetFirstAnimation$_()._$GetName$_(), 1, !0);
        }
        _$_SetAnimFrame$_(t) {
            if ("string" == typeof t) if (String(Number(t)) === t) t = Number(t); else {
                const s = this._$_objectClass$_._$GetAnimationByName$_(this._$_GetCurrentAnimationName$_());
                if (!s) return;
                if (-1 === (t = s._$GetFrameIndexByTag$_(t))) return;
            }
            isFinite(t) && (this._$_changeAnimFrameIndex$_ = t, this._$IsInAnimationTrigger$_() || this._$_DoChangeAnimFrame$_());
        }
        _$_OnAnimationFramesChanged$_() {
            if (!this._$_changeAnimationName$_ && -1 === this._$_changeAnimFrameIndex$_) {
                const t = this._$_currentAnimationFrame$_, s = this._$_currentAnimation$_._$GetFrameAt$_(E._$clamp$_(this._$_currentFrameIndex$_, 0, this._$_currentAnimation$_._$GetFrameCount$_() - 1));
                t !== s && this._$_OnFrameChanged$_(t, s), 1 < this._$_currentAnimation$_._$GetFrameCount$_() && 0 < this._$_currentAnimationSpeed$_ && this._$_StartTicking$_();
            }
        }
        _$_GetAnimFrame$_() {
            return this._$_currentFrameIndex$_;
        }
        _$_GetAnimFrameTag$_() {
            return this._$_currentAnimationFrame$_._$GetTag$_();
        }
        _$_SetAnimSpeed$_(t) {
            this._$_currentAnimationSpeed$_ = Math.abs(t), this._$SetPlayingForwards$_(0 <= t), 
            0 < this._$_currentAnimationSpeed$_ && this._$_StartTicking$_();
        }
        _$_GetAnimSpeed$_() {
            return this._$IsPlayingForwards$_() ? this._$_currentAnimationSpeed$_ : -this._$_currentAnimationSpeed$_;
        }
        _$_SetAnimRepeatToFrame$_(t) {
            "string" == typeof t && -1 === (t = this._$_currentAnimation$_._$GetFrameIndexByTag$_(t)) || (t = E._$clamp$_(Math.floor(t), 0, this._$_currentAnimation$_._$GetFrameCount$_() - 1), 
            this._$_currentAnimationRepeatTo$_ = t);
        }
        _$_GetAnimRepeatToFrame$_() {
            return this._$_currentAnimationRepeatTo$_;
        }
        _$_DoChangeAnimation$_(t) {
            const s = this._$_currentAnimationFrame$_, i = this._$_objectClass$_._$GetAnimationByName$_(this._$_changeAnimationName$_);
            if (this._$_changeAnimationName$_ = "", i && (i !== this._$_currentAnimation$_ || !this._$IsAnimationPlaying$_())) {
                this._$_currentAnimation$_ = i, this._$SetPlayingForwards$_(0 <= i._$GetSpeed$_()), 
                this._$_currentAnimationSpeed$_ = Math.abs(i._$GetSpeed$_()), this._$_currentAnimationRepeatTo$_ = i._$GetRepeatTo$_(), 
                this._$_currentFrameIndex$_ = E._$clamp$_(this._$_currentFrameIndex$_, 0, this._$_currentAnimation$_._$GetFrameCount$_() - 1), 
                1 === this._$_changeAnimationFrom$_ && (this._$_currentFrameIndex$_ = 0), 
                this._$SetAnimationPlaying$_(!0), this._$_frameStartTime$_ = this._$GetAnimationTime$_();
                const e = this._$_currentAnimation$_._$GetFrameAt$_(this._$_currentFrameIndex$_);
                this._$_OnFrameChanged$_(s, e, t);
            }
        }
        _$_DoChangeAnimFrame$_(t) {
            const s = this._$_currentAnimationFrame$_, i = this._$_currentFrameIndex$_;
            if (this._$_currentFrameIndex$_ = E._$clamp$_(Math.floor(this._$_changeAnimFrameIndex$_), 0, this._$_currentAnimation$_._$GetFrameCount$_() - 1), 
            this._$_changeAnimFrameIndex$_ = -1, t || i !== this._$_currentFrameIndex$_) {
                const e = this._$_currentAnimation$_._$GetFrameAt$_(this._$_currentFrameIndex$_);
                this._$_OnFrameChanged$_(s, e), this._$_frameStartTime$_ = this._$GetAnimationTime$_();
            }
        }
        _$_UpdateCurrentTexture$_() {
            const t = this._$_currentAnimationFrame$_._$GetImageInfo$_();
            this._$_currentTexture$_ = t._$GetTexture$_(), this._$_currentRcTex$_ = t._$GetTexRect$_(), 
            this._$_currentQuadTex$_ = t._$GetTexQuad$_(), this._$GetWorldInfo$_()._$SetMeshChanged$_(!0);
        }
        _$GetTexture$_() {
            return this._$_currentTexture$_;
        }
        _$GetTexRect$_() {
            return this._$_currentRcTex$_;
        }
        _$GetTexQuad$_() {
            return this._$_currentQuadTex$_;
        }
        _$GetImagePointCount$_() {
            return this._$_currentAnimationFrame$_._$GetImagePointCount$_();
        }
        _$GetImagePoint$_(t) {
            let s = this._$_currentAnimationFrame$_, i = this._$GetWorldInfo$_(), e = null;
            if ("string" == typeof t) e = s._$GetImagePointByName$_(t); else {
                if ("number" != typeof t) throw new TypeError("expected string or number");
                e = s._$GetImagePointByIndex$_(t - 1);
            }
            let n = i._$GetTotalZElevation$_();
            if (!e) return [ i._$GetX$_(), i._$GetY$_(), n ];
            if (Ka._$copy$_(e._$GetVec2$_()), i._$HasMesh$_()) {
                const [ h, r, o ] = i._$GetSourceMesh$_()._$TransformPoint$_(Ka._$getX$_(), Ka._$getY$_());
                Ka.set(h, r), n += o;
            }
            return Ka.offset(-s._$GetOriginX$_(), -s._$GetOriginY$_()), Ka.scale(i._$GetWidth$_(), i._$GetHeight$_()), 
            Ka.rotate(i._$GetAngle$_()), Ka.offset(i._$GetX$_(), i._$GetY$_()), 
            [ Ka._$getX$_(), Ka._$getY$_(), n ];
        }
        _$GetCollisionPolyPointCount$_() {
            return this._$GetWorldInfo$_()._$GetTransformedCollisionPoly$_()._$pointCount$_();
        }
        _$GetCollisionPolyPoint$_(t) {
            t = Math.floor(t);
            const s = this._$GetWorldInfo$_(), i = s._$GetTransformedCollisionPoly$_(), e = i._$pointCount$_();
            if ((t = t === e ? 0 : t) < 0 || e <= t) return [ 0, 0 ];
            const n = i._$pointsArr$_();
            return [ n[2 * t + 0] + s._$GetX$_(), n[2 * t + 1] + s._$GetY$_() ];
        }
        _$GetDebuggerProperties$_() {
            const s = E._$Plugins$_._$Sprite$_._$Acts$_, t = "plugins.sprite.debugger.animation-properties";
            return [ {
                title: t + ".title",
                properties: [ {
                    name: t + ".current-animation",
                    value: this._$_currentAnimation$_._$GetName$_(),
                    _$onedit$_: t => this._$CallAction$_(s._$SetAnim$_, t, 0)
                }, {
                    name: t + ".current-frame",
                    value: this._$_currentFrameIndex$_,
                    _$onedit$_: t => this._$CallAction$_(s._$SetAnimFrame$_, t)
                }, {
                    name: t + ".is-playing",
                    value: this._$IsAnimationPlaying$_(),
                    _$onedit$_: t => t ? this._$CallAction$_(s._$StartAnim$_, 0) : this._$CallAction$_(s._$StopAnim$_)
                }, {
                    name: t + ".speed",
                    value: this._$_currentAnimationSpeed$_,
                    _$onedit$_: t => this._$CallAction$_(s._$SetAnimSpeed$_, t)
                }, {
                    name: t + ".repeats",
                    value: this._$_animationRepeats$_,
                    _$onedit$_: t => this._$_animationRepeats$_ = t
                } ]
            } ];
        }
        _$SaveToJson$_() {
            const t = {
                a: this._$_currentAnimation$_._$GetSID$_()
            }, s = (0 !== this._$_frameStartTime$_ && (t.fs = this._$_frameStartTime$_), 
            this._$GetAnimationTime$_()), i = (0 !== s && (t.at = s), 0 !== this._$_currentFrameIndex$_ && (t.f = this._$_currentFrameIndex$_), 
            0 !== this._$_currentAnimationSpeed$_ && (t.cas = this._$_currentAnimationSpeed$_), 
            1 !== this._$_animationRepeats$_ && (t.ar = this._$_animationRepeats$_), 
            0 !== this._$_currentAnimationRepeatTo$_ && (t.rt = this._$_currentAnimationRepeatTo$_), 
            this._$IsAnimationPlaying$_() || (t.ap = this._$IsAnimationPlaying$_()), 
            this._$IsPlayingForwards$_() || (t.af = this._$IsPlayingForwards$_()), 
            this._$GetWorldInfo$_());
            return i._$IsCollisionEnabled$_() && (t.ce = i._$IsCollisionEnabled$_()), 
            t;
        }
        _$LoadFromJson$_(t) {
            const s = this._$GetObjectClass$_()._$GetAnimationBySID$_(t.a), i = (s && (this._$_currentAnimation$_ = s), 
            this._$_frameStartTime$_ = t.hasOwnProperty("fs") ? t.fs : 0, this._$_animationTimer$_.Set(t.hasOwnProperty("at") ? t.at : 0), 
            t.hasOwnProperty("f") ? t.f : 0), e = (this._$_currentFrameIndex$_ = E._$clamp$_(i, 0, this._$_currentAnimation$_._$GetFrameCount$_() - 1), 
            this._$_currentAnimationSpeed$_ = t.hasOwnProperty("cas") ? t.cas : 0, 
            this._$_animationRepeats$_ = t.hasOwnProperty("ar") ? t.ar : 1, t.hasOwnProperty("rt") ? t.rt : 0), n = (this._$_currentAnimationRepeatTo$_ = E._$clamp$_(e, 0, this._$_currentAnimation$_._$GetFrameCount$_() - 1), 
            this._$SetAnimationPlaying$_(!t.hasOwnProperty("ap") || !!t.ap), this._$SetPlayingForwards$_(!t.hasOwnProperty("af") || !!t.af), 
            this._$_currentAnimation$_._$GetFrameAt$_(this._$_currentFrameIndex$_)), h = (this._$_currentAnimationFrame$_ = n, 
            this._$_UpdateCurrentTexture$_(), this._$GetWorldInfo$_());
            h._$SetOriginX$_(n._$GetOriginX$_()), h._$SetOriginY$_(n._$GetOriginY$_()), 
            h._$SetSourceCollisionPoly$_(n._$GetCollisionPoly$_()), h._$SetCollisionEnabled$_(!!t.ce), 
            this._$IsAnimationPlaying$_() && this._$_StartTicking$_();
        }
        _$GetPropertyValueByIndex$_(t) {
            const s = this._$GetWorldInfo$_();
            switch (t) {
              case 3:
                return s._$IsCollisionEnabled$_();

              case 2:
                return E._$clamp$_(this._$_currentFrameIndex$_, 0, this._$_currentAnimation$_._$GetFrameCount$_() - 1);

              case 1:
                return this._$_currentAnimation$_._$GetName$_();
            }
        }
        _$SetPropertyValueByIndex$_(t, s, i) {
            const e = this._$GetWorldInfo$_();
            switch (t) {
              case 3:
                e._$SetCollisionEnabled$_(!!s);
                break;

              case 2:
                {
                    this._$SetAnimationPlaying$_(!1);
                    const n = this._$_currentAnimation$_._$GetFrameCount$_() - 1, h = s = E._$clamp$_(s, 0, n), r = this._$_currentAnimation$_._$GetFrameAt$_(this._$_currentFrameIndex$_), o = this._$_currentAnimation$_._$GetFrameAt$_(h);
                    this._$_OnFrameChanged$_(r, o, i), this._$_currentFrameIndex$_ = E._$clamp$_(h, 0, n);
                    break;
                }

              case 1:
                {
                    this._$_changeAnimationName$_ = s, this._$_DoChangeAnimation$_(i);
                    const a = this._$_currentAnimation$_._$GetFrameCount$_();
                    1 < a && 0 < this._$_currentAnimation$_._$GetSpeed$_() ? this._$_StartTicking$_() : this._$_StopTicking$_();
                    break;
                }
            }
        }
        _$GetScriptInterfaceClass$_() {
            return self._$ISpriteInstance$_;
        }
    }, new WeakMap()), $a = new Map([ [ "current-frame", 0 ], [ "beginning", 1 ] ]);
    self._$ISpriteInstance$_ = class extends self._$IWorldInstance$_ {
        constructor() {
            super(), N.set(this, self._$IInstance$_._$_GetInitInst$_()._$GetSdkInstance$_());
        }
        _$getImagePointCount$_() {
            return N.get(this)._$GetImagePointCount$_();
        }
        _$getImagePointX$_(t) {
            return this._$getImagePoint$_(t)[0];
        }
        _$getImagePointY$_(t) {
            return this._$getImagePoint$_(t)[1];
        }
        _$getImagePointZ$_(t) {
            return this._$getImagePoint$_(t)[2];
        }
        _$getImagePoint$_(t) {
            if ("string" != typeof t && "number" != typeof t) throw new TypeError("expected string or number");
            return N.get(this)._$GetImagePoint$_(t);
        }
        _$getPolyPointCount$_() {
            return N.get(this)._$GetCollisionPolyPointCount$_();
        }
        _$getPolyPointX$_(t) {
            return qa._$RequireFiniteNumber$_(t), N.get(this)._$GetCollisionPolyPoint$_(t)[0];
        }
        _$getPolyPointY$_(t) {
            return qa._$RequireFiniteNumber$_(t), N.get(this)._$GetCollisionPolyPoint$_(t)[1];
        }
        _$getPolyPoint$_(t) {
            return qa._$RequireFiniteNumber$_(t), N.get(this)._$GetCollisionPolyPoint$_(t);
        }
        _$stopAnimation$_() {
            N.get(this)._$SetAnimationPlaying$_(!1);
        }
        _$startAnimation$_(t = "current-frame") {
            qa._$RequireString$_(t);
            const s = $a.get(t);
            if (void 0 === s) throw new Error("invalid mode");
            N.get(this)._$_StartAnim$_(s);
        }
        _$setAnimation$_(t, s = "beginning") {
            qa._$RequireString$_(t), qa._$RequireString$_(s);
            const i = $a.get(s);
            if (void 0 === i) throw new Error("invalid mode");
            const e = N.get(this);
            if (!e._$GetObjectClass$_()._$GetAnimationByName$_(t)) throw new Error(`animation name "${t}" does not exist`);
            e._$_SetAnim$_(t, i);
        }
        _$getAnimation$_(t) {
            qa._$RequireString$_(t);
            const s = N.get(this)._$GetObjectClass$_()._$GetAnimationByName$_(t);
            return s ? s._$GetIAnimation$_() : null;
        }
        get animation() {
            return N.get(this)._$_GetCurrentAnimation$_()._$GetIAnimation$_();
        }
        get animationName() {
            return N.get(this)._$_GetCurrentAnimationName$_();
        }
        set _$animationFrame$_(t) {
            qa._$RequireFiniteNumber$_(t), N.get(this)._$_SetAnimFrame$_(t);
        }
        get _$animationFrame$_() {
            return N.get(this)._$_GetAnimFrame$_();
        }
        set _$animationFrameTag$_(t) {
            qa._$RequireString$_(t), N.get(this)._$_SetAnimFrame$_(t);
        }
        get _$animationFrameTag$_() {
            return N.get(this)._$_GetAnimFrameTag$_();
        }
        set _$animationSpeed$_(t) {
            qa._$RequireFiniteNumber$_(t), N.get(this)._$_SetAnimSpeed$_(t);
        }
        get _$animationSpeed$_() {
            return N.get(this)._$_GetAnimSpeed$_();
        }
        set _$animationRepeatToFrame$_(t) {
            qa._$RequireFiniteNumber$_(t), N.get(this)._$_SetAnimRepeatToFrame$_(t);
        }
        get _$animationRepeatToFrame$_() {
            return N.get(this)._$_GetAnimRepeatToFrame$_();
        }
        get imageWidth() {
            return N.get(this)._$GetCurrentImageInfo$_()._$GetWidth$_();
        }
        get imageHeight() {
            return N.get(this)._$GetCurrentImageInfo$_()._$GetHeight$_();
        }
        _$getImageSize$_() {
            const t = N.get(this)._$GetCurrentImageInfo$_();
            return [ t._$GetWidth$_(), t._$GetHeight$_() ];
        }
        async _$replaceCurrentAnimationFrame$_(t) {
            qa._$RequireInstanceOf$_(t, Blob);
            const s = N.get(this), i = s._$GetRuntime$_(), e = s._$GetCurrentImageInfo$_(), n = E._$New$_(E._$ImageInfo$_);
            if (n._$LoadDynamicBlobAsset$_(i, t), await n._$LoadStaticTexture$_(i._$GetRenderer$_(), {
                _$sampling$_: i._$GetSampling$_()
            }), s._$WasReleased$_()) n._$Release$_(); else {
                e._$ReplaceWith$_(n);
                const h = s._$GetSdkType$_();
                h._$_UpdateAllCurrentTexture$_(), h._$GetObjectClass$_()._$Dispatcher$_().dispatchEvent(new E.Event("animationframeimagechange")), 
                i._$UpdateRender$_();
            }
        }
        _$setSolidCollisionFilter$_(t, s) {
            qa._$RequireString$_(s), N.get(this)._$GetWorldInfo$_()._$SetSolidCollisionFilter$_(!!t, s);
        }
    };
}

{
    const tl = self._$C3$_;
    tl._$Plugins$_._$Sprite$_._$Cnds$_ = {
        _$IsAnimPlaying$_(t) {
            return tl._$equalsNoCase$_(this._$_GetCurrentAnimationName$_(), t);
        },
        _$CompareFrame$_(t, s) {
            return tl.compare(this._$_currentFrameIndex$_, t, s);
        },
        _$CompareFrameTag$_(t, s) {
            if ("string" != typeof s) return !1;
            const i = this._$_currentAnimationFrame$_._$GetTag$_();
            return tl.compare(i.toLowerCase(), t, s.toLowerCase());
        },
        _$CompareAnimSpeed$_(t, s) {
            return tl.compare(this._$_GetAnimSpeed$_(), t, s);
        },
        _$OnAnimFinished$_(t) {
            return tl._$equalsNoCase$_(this._$_animTriggerName$_, t);
        },
        _$OnAnyAnimFinished$_() {
            return !0;
        },
        _$OnFrameChanged$_() {
            return !0;
        },
        _$IsMirrored$_() {
            return this._$GetWorldInfo$_()._$GetWidth$_() < 0;
        },
        _$IsFlipped$_() {
            return this._$GetWorldInfo$_()._$GetHeight$_() < 0;
        },
        _$OnURLLoaded$_() {
            return !0;
        },
        _$OnURLFailed$_() {
            return !0;
        },
        _$IsCollisionEnabled$_() {
            return this._$GetWorldInfo$_()._$IsCollisionEnabled$_();
        }
    };
}

{
    const sl = self._$C3$_;
    sl._$Plugins$_._$Sprite$_._$Acts$_ = {
        _$Spawn$_(t, s, i, e, n) {
            if (t && s) {
                const [ h, r ] = this._$GetImagePoint$_(i), o = this._$_runtime$_._$CreateInstance$_(t, s, h, r, e, n);
                if (o) {
                    if (e && s._$SortAndAddInstancesByZIndex$_(o), t._$GetPlugin$_()._$IsRotatable$_()) {
                        const l = o._$GetWorldInfo$_();
                        l._$SetAngle$_(this._$GetWorldInfo$_()._$GetAngle$_()), 
                        l._$SetBboxChanged$_();
                    }
                    const a = this._$_runtime$_._$GetEventSheetManager$_();
                    a._$BlockFlushingInstances$_(!0), o._$_TriggerOnCreatedOnSelfAndRelated$_(), 
                    a._$BlockFlushingInstances$_(!1), t !== this._$_runtime$_._$GetCurrentAction$_()._$GetObjectClass$_() && this._$_sdkType$_._$_SpawnPickInstance$_(t, o, e);
                }
            }
        },
        _$StopAnim$_() {
            this._$SetAnimationPlaying$_(!1);
        },
        _$StartAnim$_(t) {
            this._$_StartAnim$_(t);
        },
        _$SetAnim$_(t, s) {
            this._$_SetAnim$_(t, s);
        },
        _$SetAnimFrame$_(t) {
            this._$_SetAnimFrame$_(t);
        },
        _$SetAnimSpeed$_(t) {
            this._$_SetAnimSpeed$_(t);
        },
        _$SetAnimRepeatToFrame$_(t) {
            this._$_SetAnimRepeatToFrame$_(t);
        },
        _$AddRemoveAnimation$_(s, t) {
            try {
                0 === s ? this._$GetSdkType$_()._$_AddAnimation$_(t) : this._$GetSdkType$_()._$_RemoveAnimation$_(t);
            } catch (t) {
                console.error(`[Construct] Error ${0 === s ? "adding" : "removing"} animation: `, t);
            }
        },
        _$AddRemoveAnimationFrame$_(s, t, i) {
            try {
                0 === s ? this._$GetSdkType$_()._$_AddAnimationFrame$_(t, i) : this._$GetSdkType$_()._$_RemoveAnimationFrame$_(t, i);
            } catch (t) {
                console.error(`[Construct] Error ${0 === s ? "adding" : "removing"} animation frame: `, t);
            }
        },
        _$SetMirrored$_(t) {
            const s = this._$GetWorldInfo$_(), i = s._$GetWidth$_(), e = Math.abs(i) * (0 === t ? -1 : 1);
            i !== e && (s._$SetWidth$_(e), s._$SetBboxChanged$_());
        },
        _$SetFlipped$_(t) {
            const s = this._$GetWorldInfo$_(), i = s._$GetHeight$_(), e = Math.abs(i) * (0 === t ? -1 : 1);
            i !== e && (s._$SetHeight$_(e), s._$SetBboxChanged$_());
        },
        _$SetScale$_(t) {
            const s = this._$_currentAnimationFrame$_, i = s._$GetImageInfo$_(), e = this._$GetWorldInfo$_(), n = e._$GetWidth$_() < 0 ? -1 : 1, h = e._$GetHeight$_() < 0 ? -1 : 1, r = i._$GetWidth$_() * t * n, o = i._$GetHeight$_() * t * h;
            e._$GetWidth$_() === r && e._$GetHeight$_() === o || (e._$SetSize$_(r, o), 
            e._$SetBboxChanged$_());
        },
        async _$LoadURL$_(t, s, i) {
            const e = this._$_currentAnimationFrame$_, n = e._$GetImageInfo$_(), h = this._$GetWorldInfo$_(), r = this._$_runtime$_, o = this._$_sdkType$_;
            if (n._$GetURL$_() === t) 0 === s && (h._$SetSize$_(n._$GetWidth$_(), n._$GetHeight$_()), 
            h._$SetBboxChanged$_()), this._$Trigger$_(sl._$Plugins$_._$Sprite$_._$Cnds$_._$OnURLLoaded$_); else {
                const a = sl._$New$_(sl._$ImageInfo$_);
                try {
                    if (await a._$LoadDynamicAsset$_(r, t), !a._$IsLoaded$_()) throw new Error("image failed to load");
                    if (this._$WasReleased$_()) return void a._$Release$_();
                    await a._$LoadStaticTexture$_(r._$GetRenderer$_(), {
                        _$sampling$_: r._$GetSampling$_()
                    });
                } catch (t) {
                    return console.error("Load image from URL failed: ", t), void (this._$WasReleased$_() || this._$Trigger$_(sl._$Plugins$_._$Sprite$_._$Cnds$_._$OnURLFailed$_));
                }
                this._$WasReleased$_() ? a._$Release$_() : (n._$ReplaceWith$_(a), 
                o._$_UpdateAllCurrentTexture$_(), o._$GetObjectClass$_()._$Dispatcher$_().dispatchEvent(new sl.Event("animationframeimagechange")), 
                r._$UpdateRender$_(), 0 === s && (h._$SetSize$_(n._$GetWidth$_(), n._$GetHeight$_()), 
                h._$SetBboxChanged$_()), await this._$TriggerAsync$_(sl._$Plugins$_._$Sprite$_._$Cnds$_._$OnURLLoaded$_));
            }
        },
        _$SetCollisions$_(t) {
            this._$GetWorldInfo$_()._$SetCollisionEnabled$_(t);
        },
        _$SetSolidCollisionFilter$_(t, s) {
            this._$GetWorldInfo$_()._$SetSolidCollisionFilter$_(0 === t, s);
        },
        _$SetEffect$_(t) {
            this._$GetWorldInfo$_()._$SetBlendMode$_(t), this._$_runtime$_._$UpdateRender$_();
        }
    };
}

{
    const il = self._$C3$_;
    il._$Plugins$_._$Sprite$_._$Exps$_ = {
        _$AnimationFrame$_() {
            return this._$_GetAnimFrame$_();
        },
        _$AnimationFrameTag$_() {
            return this._$_GetAnimFrameTag$_();
        },
        _$AnimationFrameCount$_() {
            return this._$_currentAnimation$_._$GetFrameCount$_();
        },
        _$AnimationName$_() {
            return this._$_currentAnimation$_._$GetName$_();
        },
        _$AnimationSpeed$_() {
            return this._$_GetAnimSpeed$_();
        },
        _$OriginalAnimationSpeed$_() {
            return this._$_currentAnimation$_._$GetSpeed$_();
        },
        _$ImagePointX$_(t) {
            return this._$GetImagePoint$_(t)[0];
        },
        _$ImagePointY$_(t) {
            return this._$GetImagePoint$_(t)[1];
        },
        _$ImagePointZ$_(t) {
            return this._$GetImagePoint$_(t)[2];
        },
        _$ImagePointCount$_() {
            return this._$GetImagePointCount$_();
        },
        _$ImageWidth$_() {
            return this._$GetCurrentImageInfo$_()._$GetWidth$_();
        },
        _$ImageHeight$_() {
            return this._$GetCurrentImageInfo$_()._$GetHeight$_();
        },
        _$PolyPointXAt$_(t) {
            return this._$GetCollisionPolyPoint$_(t)[0];
        },
        _$PolyPointYAt$_(t) {
            return this._$GetCollisionPolyPoint$_(t)[1];
        },
        _$PolyPointCount$_() {
            return this._$GetCollisionPolyPointCount$_();
        }
    };
}

{
    let r = function(t) {
        t && t.close && t.close();
    };
    r;
    const el = self._$C3$_;
    el._$Plugins$_.video = class extends el._$SDKDOMPluginBase$_ {
        constructor(t) {
            super(t, "video"), this._$_postImageBitmaps$_ = !1, this._$_supportedFormats$_ = {}, 
            this._$_lastStateSequenceNumber$_ = -1, this._$_videoState$_ = new Map(), 
            this._$_runtime$_._$AddLoadPromise$_(this._$_runtime$_._$PostComponentMessageToDOMAsync$_("video", "init", {
                isInWorker: this._$_runtime$_._$IsInWorker$_()
            }).then(t => {
                this._$_postImageBitmaps$_ = t.postImageBitmaps, this._$_supportedFormats$_ = t.supportedFormats;
            })), this._$AddElementMessageHandler$_("playback-event", (t, s) => t._$_OnPlaybackEvent$_(s)), 
            this._$_runtime$_._$AddDOMComponentMessageHandler$_("video", "state", t => this._$_OnUpdateState$_(t));
        }
        _$Release$_() {
            super._$Release$_();
        }
        _$IsPostImageBitmapsMode$_() {
            return this._$_postImageBitmaps$_;
        }
        _$IsFormatSupported$_(t) {
            return !!this._$_supportedFormats$_[t];
        }
        _$_OnUpdateState$_(t) {
            const s = t.sequenceNumber;
            if (s <= this._$_lastStateSequenceNumber$_) for (const i of Object.values(t.videoData)) r(i.imageBitmap); else {
                this._$_lastStateSequenceNumber$_ = s;
                for (const e of this._$_videoState$_.values()) r(e.imageBitmap);
                this._$_videoState$_.clear();
                for (const [ n, h ] of Object.entries(t.videoData)) this._$_videoState$_.set(parseInt(n, 10), h);
            }
        }
        _$_DeleteVideoState$_(t) {
            this._$_videoState$_.delete(t);
        }
        _$GetVideoState$_(t) {
            return this._$_videoState$_.get(t) || null;
        }
    };
}

{
    const nl = self._$C3$_;
    nl._$Plugins$_.video._$Type$_ = class extends nl._$SDKTypeBase$_ {
        constructor(t) {
            super(t);
        }
        _$Release$_() {
            super._$Release$_();
        }
        _$OnCreate$_() {}
    };
}

{
    const hl = self._$C3$_, rl = hl._$New$_(hl.Rect), ol = hl._$New$_(hl._$Quad$_), al = [ "webm-vp8", "webm-vp9", "webm-av1", "mp4-h264", "mp4-h265", "mp4-av1" ];
    hl._$Plugins$_.video.Instance = class extends hl._$SDKDOMInstanceBase$_ {
        constructor(t, s) {
            super(t, "video"), this._$_primarySrc$_ = "", this._$_primaryFormat$_ = "mp4-h264", 
            this._$_secondarySrc$_ = "", this._$_secondaryFormat$_ = "webm-vp9", 
            this._$_autoplay$_ = 2, this._$_playInBackground$_ = !1, this._$_videoWasPlayingOnSuspend$_ = !1, 
            this._$_webGLTexture$_ = null, this._$_currentTrigger$_ = -1, this._$_isSettingSource$_ = 0, 
            this._$_isPlaying$_ = !1, this._$_isPaused$_ = !1, this._$_hasEnded$_ = !1, 
            this._$_isLooping$_ = !1, this._$_isMuted$_ = !1, this._$_volume$_ = 0, 
            s && (this._$_primarySrc$_ = s[0], this._$_primaryFormat$_ = al[s[1]], 
            this._$_secondarySrc$_ = s[2], this._$_secondaryFormat$_ = al[s[3]], 
            this._$_autoplay$_ = s[4], this._$_playInBackground$_ = s[5], this._$GetWorldInfo$_()._$SetVisible$_(s[6]));
            const i = this._$_runtime$_._$Dispatcher$_();
            this._$_disposables$_ = new hl._$CompositeDisposable$_(hl._$Disposable$_._$From$_(i, "renderercontextlost", () => this._$_OnRendererContextLost$_()), hl._$Disposable$_._$From$_(i, "suspend", () => this._$_OnSuspend$_()), hl._$Disposable$_._$From$_(i, "resume", () => this._$_OnResume$_())), 
            this._$CreateElement$_({
                src: this._$GetVideoSource$_(),
                autoplay: this._$_autoplay$_
            });
        }
        _$Release$_() {
            this._$GetPlugin$_()._$_DeleteVideoState$_(this._$GetElementId$_()), 
            this._$_ReleaseTexture$_(), super._$Release$_();
        }
        _$_MaybeCreateTexture$_(t, s, i) {
            if (this._$_webGLTexture$_) {
                if (this._$_webGLTexture$_._$GetWidth$_() === s || this._$_webGLTexture$_._$GetHeight$_() === i) return;
                this._$_ReleaseTexture$_();
            }
            this._$_webGLTexture$_ = t._$CreateDynamicTexture$_(s, i, {
                _$sampling$_: this._$_runtime$_._$GetSampling$_(),
                _$mipMap$_: !1
            });
        }
        _$_ReleaseTexture$_() {
            this._$_webGLTexture$_ && (this._$_runtime$_._$GetRenderer$_()._$DeleteTexture$_(this._$_webGLTexture$_), 
            this._$_webGLTexture$_ = null);
        }
        _$GetElementState$_() {
            return {};
        }
        _$DbToLinearNoCap$_(t) {
            return Math.pow(10, t / 20);
        }
        _$DbToLinear$_(t) {
            const s = this._$DbToLinearNoCap$_(t);
            return isFinite(s) ? Math.max(Math.min(s, 1), 0) : 0;
        }
        _$LinearToDbNoCap$_(t) {
            return Math.log(t) / Math.log(10) * 20;
        }
        _$LinearToDb$_(t) {
            return this._$LinearToDbNoCap$_(Math.max(Math.min(t, 1), 0));
        }
        _$GetVideoSource$_() {
            let t = "", s = this._$GetPlugin$_();
            return s._$IsFormatSupported$_(this._$_primaryFormat$_) && this._$_primarySrc$_ ? t = this._$_primarySrc$_ : s._$IsFormatSupported$_(this._$_secondaryFormat$_) && this._$_secondarySrc$_ && (t = this._$_secondarySrc$_), 
            t && (hl._$IsRelativeURL$_(t) ? this._$_runtime$_._$GetAssetManager$_()._$GetMediaFileUrl$_(t) : t);
        }
        _$_OnRendererContextLost$_() {
            this._$_webGLTexture$_ = null;
        }
        async _$_OnPlaybackEvent$_(t) {
            const s = t.type;
            5 === s ? this._$_SetIsPlaying$_(!0) : 2 === s ? (this._$_SetIsPlaying$_(!1), 
            this._$_hasEnded$_ = !0, this._$_isPaused$_ = !1) : 6 === s && (this._$_SetIsPlaying$_(!1), 
            this._$_isPaused$_ = !0, this._$_hasEnded$_ = !1), this._$_currentTrigger$_ = s, 
            await this._$TriggerAsync$_(hl._$Plugins$_.video._$Cnds$_._$OnPlaybackEvent$_);
        }
        _$_SetIsPlaying$_(t) {
            this._$_isPlaying$_ = !!t, this._$_isPlaying$_ ? (this._$_StartTicking$_(), 
            this._$_isPaused$_ = !1, this._$_hasEnded$_ = !1) : this._$_StopTicking$_();
        }
        _$_OnSuspend$_() {
            this._$_playInBackground$_ || this._$_isPlaying$_ && (this._$_videoWasPlayingOnSuspend$_ = !0, 
            this._$PostToDOMElement$_("pause"));
        }
        _$_OnResume$_() {
            this._$_playInBackground$_ || this._$_videoWasPlayingOnSuspend$_ && (this._$PostToDOMElement$_("play"), 
            this._$_videoWasPlayingOnSuspend$_ = !1);
        }
        _$Draw$_(a) {
            let l = this._$GetWorldInfo$_(), u = 0, c = 0, f = null, d = this._$GetPlugin$_()._$IsPostImageBitmapsMode$_();
            if (d) {
                const t = this._$GetMyState$_();
                if (!t) return;
                f = t.imageBitmap, t.imageBitmap = null, u = t.videoWidth, c = t.videoHeight;
            } else {
                const s = self.C3Video_GetElement(this._$GetElementId$_());
                if (!s) return;
                u = s.videoWidth, c = s.videoHeight, f = s;
            }
            if (!(u <= 0 || c <= 0)) {
                this._$_MaybeCreateTexture$_(a, u, c), f && (a._$UpdateTexture$_(f, this._$_webGLTexture$_), 
                d) && f.close && f.close();
                let t = u / c, s = l._$GetWidth$_(), i = l._$GetHeight$_(), e = s / i, n = 0, h = 0, r = 0, o = 0;
                t < e ? (r = i * t, o = i, n = Math.max(Math.floor((s - r) / 2), 0)) : (r = s, 
                o = s / t, h = Math.max(Math.floor((i - o) / 2), 0)), a._$SetTexture$_(this._$_webGLTexture$_), 
                rl._$setWH$_(l._$GetX$_() + n, l._$GetY$_() + h, r, o), ol._$setFromRect$_(rl), 
                a._$Quad$_(ol);
            }
        }
        _$Tick$_() {
            this._$_runtime$_._$UpdateRender$_();
        }
        _$GetMyState$_() {
            return this._$GetPlugin$_()._$GetVideoState$_(this._$GetElementId$_());
        }
    };
}

{
    const ll = self._$C3$_;
    ll._$Plugins$_.video._$Cnds$_ = {
        IsPlaying() {
            return this._$_isPlaying$_;
        },
        _$IsPaused$_() {
            return this._$_isPaused$_;
        },
        _$HasEnded$_() {
            return this._$_hasEnded$_;
        },
        _$IsMuted$_() {
            return this._$_isMuted$_;
        },
        _$OnPlaybackEvent$_(t) {
            return this._$_currentTrigger$_ === t;
        }
    };
}

{
    const ul = self._$C3$_, cl = [ "webm-vp8", "webm-vp9", "webm-av1", "mp4-h264", "mp4-h265", "mp4-av1" ];
    ul._$Plugins$_.video._$Acts$_ = {
        _$SetSource$_(t, s) {
            this._$_primarySrc$_ = t, this._$_primaryFormat$_ = "webm-vp8", this._$_secondarySrc$_ = s, 
            this._$_secondaryFormat$_ = "mp4-h264", this._$PostToDOMElement$_("set-source", {
                src: this._$GetVideoSource$_()
            }), this._$_ReleaseTexture$_();
        },
        _$SetSource2$_(t, s, i, e) {
            this._$_primarySrc$_ = t, this._$_primaryFormat$_ = cl[s], this._$_secondarySrc$_ = i, 
            this._$_secondaryFormat$_ = cl[e], this._$PostToDOMElement$_("set-source", {
                src: this._$GetVideoSource$_()
            }), this._$_ReleaseTexture$_();
        },
        _$SetPlaybackTime$_(t) {
            this._$PostToDOMElement$_("set-playback-time", {
                time: t
            });
        },
        _$SetPlaybackRate$_(t) {
            this._$PostToDOMElement$_("set-playback-rate", {
                rate: t
            });
        },
        _$SetLooping$_(t) {
            this._$_isLooping$_ !== (t = 0 !== t) && (this._$_isLooping$_ = t, this._$PostToDOMElement$_("set-looping", {
                isLooping: t
            }));
        },
        _$SetMuted$_(t) {
            this._$_isMuted$_ !== (t = 0 !== t) && (this._$_isMuted$_ = t, this._$PostToDOMElement$_("set-muted", {
                isMuted: t
            }));
        },
        _$SetVolume$_(t) {
            this._$_volume$_ !== t && (this._$_volume$_ = t, this._$PostToDOMElement$_("set-volume", {
                volume: this._$DbToLinear$_(t)
            }));
        },
        _$Pause$_() {
            this._$PostToDOMElement$_("pause");
        },
        Play() {
            this._$_PostToDOMElementMaybeSync$_("play");
        }
    };
}

{
    const fl = self._$C3$_;
    fl._$Plugins$_.video._$Exps$_ = {
        _$PlaybackTime$_() {
            const t = this._$GetMyState$_();
            return t ? t.currentTime : 0;
        },
        _$PlaybackRate$_() {
            const t = this._$GetMyState$_();
            return t ? t.playbackRate : 1;
        },
        _$Duration$_() {
            const t = this._$GetMyState$_();
            return t ? t.duration : 0;
        },
        _$Volume$_() {
            return this._$_volume$_;
        },
        _$VideoWidth$_() {
            const t = this._$GetMyState$_();
            return t ? t.videoWidth : 0;
        },
        _$VideoHeight$_() {
            const t = this._$GetMyState$_();
            return t ? t.videoHeight : 0;
        }
    };
}

{
    const dl = self._$C3$_;
    dl._$Plugins$_.Text = class extends dl._$SDKPluginBase$_ {
        constructor(t) {
            super(t);
        }
        _$Release$_() {
            super._$Release$_();
        }
    };
}

{
    const pl = self._$C3$_;
    pl._$Plugins$_.Text._$Type$_ = class extends pl._$SDKTypeBase$_ {
        constructor(t) {
            super(t);
        }
        _$Release$_() {
            super._$Release$_();
        }
        _$OnCreate$_() {}
        _$LoadTextures$_(t) {}
        _$ReleaseTextures$_() {}
    };
}

{
    const ml = self._$C3$_, gl = self._$C3X$_, yl = [ 0, 0, 0 ], Ml = [ "left", "center", "right" ], wl = [ "top", "center", "bottom" ], xl = [ "ltr", "rtl" ], Sl = [ "word", "cjk", "character" ], Tl = new ml.Rect(), bl = new ml._$Quad$_(), vl = new ml._$Color$_(), Cl = ml._$New$_(ml._$Vector2$_), Gl = new Map([ [ "b", "strong" ], [ "i", "em" ], [ "s", "s" ], [ "u", "u" ], [ "iconoffsety", null ] ]), D = (ml._$Plugins$_.Text.Instance = class extends ml._$SDKWorldInstanceBase$_ {
        constructor(t, s) {
            if (super(t), this._$_text$_ = "", this._$_enableBBcode$_ = !0, this._$_faceName$_ = "Arial", 
            this._$_ptSize$_ = 12, this._$_lineHeightOffset$_ = 0, this._$_isBold$_ = !1, 
            this._$_isItalic$_ = !1, this._$_color$_ = ml._$New$_(ml._$Color$_), 
            this._$_horizontalAlign$_ = 0, this._$_verticalAlign$_ = 0, this._$_wrapMode$_ = "word", 
            this._$_textDirection$_ = 0, this._$_resolutionMode$_ = "auto", this._$_fixedScaleFactor$_ = 1, 
            this._$_iconObjectClass$_ = null, this._$_htmlString$_ = "", this._$_isHtmlStringUpToDate$_ = !1, 
            this._$_readAloud$_ = !1, this._$_screenReaderText$_ = null, this._$_typewriterStartTime$_ = -1, 
            this._$_typewriterEndTime$_ = -1, this._$_typewriterLength$_ = 0, this._$_rendererText$_ = ml._$New$_(ml._$Gfx$_._$RendererText$_, this._$_runtime$_._$GetRenderer$_(), {
                timeout: 5
            }), this._$_rendererText$_._$ontextureupdate$_ = () => this._$_runtime$_._$UpdateRender$_(), 
            this._$_animationframeimagechange_handler$_ = () => this._$_OnIconObjectClassImageChanged$_(), 
            this._$_pendingUpdateIconSet$_ = !1, s) {
                this._$_text$_ = s[0], this._$_enableBBcode$_ = !!s[1], this._$_faceName$_ = s[2], 
                this._$_ptSize$_ = s[3], this._$_lineHeightOffset$_ = s[4], this._$_isBold$_ = !!s[5], 
                this._$_isItalic$_ = !!s[6], this._$_horizontalAlign$_ = s[8], this._$_verticalAlign$_ = s[9], 
                this._$_wrapMode$_ = Sl[s[10]], this._$_textDirection$_ = s[11], 
                this._$_SetIconObjectClass$_(this._$_runtime$_._$GetObjectClassBySID$_(s[12]));
                const i = s[7];
                this._$_color$_._$setRgb$_(i[0], i[1], i[2]), this._$GetWorldInfo$_()._$SetVisible$_(s[13]), 
                this._$_readAloud$_ = !!s[15];
            }
            this._$_UpdateTextSettings$_(), this._$_UpdateScreenReaderText$_();
        }
        _$Release$_() {
            this._$_SetIconObjectClass$_(null), this._$_CancelTypewriter$_(), this._$_screenReaderText$_ && (this._$_screenReaderText$_._$Release$_(), 
            this._$_screenReaderText$_ = null), this._$_rendererText$_._$Release$_(), 
            this._$_rendererText$_ = null, super._$Release$_();
        }
        _$_UpdateTextSettings$_() {
            const t = this._$_rendererText$_;
            t._$SetText$_(this._$_text$_), t._$SetBBCodeEnabled$_(this._$_enableBBcode$_), 
            this._$_rendererText$_._$IsBBCodeEnabled$_() && this._$_iconObjectClass$_ ? this._$_rendererText$_._$SetIconSet$_(this._$GetRuntime$_()._$GetTextIconSet$_(this._$_iconObjectClass$_)) : this._$_rendererText$_._$SetIconSet$_(null), 
            t._$SetIconSmoothing$_("nearest" !== this._$_runtime$_._$GetSampling$_()), 
            t._$SetFontName$_(this._$_faceName$_), t._$SetLineHeight$_(this._$_lineHeightOffset$_), 
            t._$SetBold$_(this._$_isBold$_), t._$SetItalic$_(this._$_isItalic$_), 
            t._$SetColor$_(this._$_color$_), t._$SetHorizontalAlignment$_(Ml[this._$_horizontalAlign$_]), 
            t._$SetVerticalAlignment$_(wl[this._$_verticalAlign$_]), t._$SetWordWrapMode$_(this._$_wrapMode$_), 
            t._$SetTextDirection$_(xl[this._$_textDirection$_]);
        }
        _$_UpdateTextSize$_() {
            let t = this._$GetWorldInfo$_(), s = (this._$_rendererText$_._$SetFontSize$_(this._$_ptSize$_), 
            this._$_rendererText$_._$SetFontSizeScale$_(t._$GetSceneGraphScale$_()), 
            t._$GetLayer$_()), i;
            "auto" === this._$_resolutionMode$_ ? i = s._$GetResolutionScaleFactorToZ$_(t._$GetTotalZElevation$_()) : "fixed" === this._$_resolutionMode$_ && (i = this._$_fixedScaleFactor$_), 
            t._$HasMesh$_() && i !== this._$_rendererText$_._$GetZoom$_() && t._$SetMeshChanged$_(!0), 
            this._$_rendererText$_._$SetSize$_(t._$GetWidth$_(), t._$GetHeight$_(), i);
        }
        _$_SetIconObjectClass$_(t) {
            t && (t._$IsFamily$_() || t._$GetPlugin$_().constructor !== ml._$Plugins$_._$Sprite$_) || t !== this._$_iconObjectClass$_ && (this._$_iconObjectClass$_ && this._$_iconObjectClass$_._$Dispatcher$_().removeEventListener("animationframeimagechange", this._$_animationframeimagechange_handler$_), 
            this._$_iconObjectClass$_ = t, this._$_iconObjectClass$_ && this._$_iconObjectClass$_._$Dispatcher$_().addEventListener("animationframeimagechange", this._$_animationframeimagechange_handler$_), 
            this._$_UpdateTextSettings$_(), this._$_isHtmlStringUpToDate$_ = !1, 
            this._$_runtime$_._$UpdateRender$_());
        }
        _$_OnIconObjectClassImageChanged$_() {
            this._$_runtime$_._$DeleteTextIconSet$_(this._$_iconObjectClass$_), 
            this._$_runtime$_._$UpdateRender$_(), this._$_pendingUpdateIconSet$_ = !0;
        }
        _$_UpdateScreenReaderText$_() {
            if (this._$_readAloud$_) {
                let t = this._$_text$_;
                this._$_enableBBcode$_ && (t = ml._$BBString$_._$StripAnyTags$_(t)), 
                this._$_screenReaderText$_ ? this._$_screenReaderText$_._$SetText$_(t) : this._$_screenReaderText$_ = ml._$New$_(ml._$ScreenReaderText$_, this._$_runtime$_, t);
            } else this._$_screenReaderText$_ && (this._$_screenReaderText$_._$Release$_(), 
            this._$_screenReaderText$_ = null);
        }
        _$Draw$_(t) {
            const s = this._$GetWorldInfo$_(), i = (this._$_UpdateTextSize$_(), 
            this._$_pendingUpdateIconSet$_ && (this._$_pendingUpdateIconSet$_ = !1, 
            this._$_rendererText$_._$IsBBCodeEnabled$_()) && this._$_iconObjectClass$_ && this._$_rendererText$_._$SetIconSet$_(this._$GetRuntime$_()._$GetTextIconSet$_(this._$_iconObjectClass$_)), 
            this._$_rendererText$_._$GetTexture$_());
            if (i) {
                const e = s._$GetLayer$_();
                if (0 === s._$GetAngle$_() && 0 === e._$GetAngle$_() && 0 === s._$GetTotalZElevation$_() && !s._$HasMesh$_() && e._$RendersIn2DMode$_()) {
                    const n = s._$GetBoundingQuad$_(), [ h, r ] = e._$LayerToDrawSurface$_(n._$getTlx$_(), n._$getTly$_()), [ o, a ] = e._$LayerToDrawSurface$_(n._$getBrx$_(), n._$getBry$_()), l = h - Math.round(h), u = r - Math.round(r), [ c, f ] = (Tl.set(h, r, o, a), 
                    Tl.offset(-l, -u), bl._$setFromRect$_(Tl), t._$GetRenderTargetSize$_(t._$GetRenderTarget$_()));
                    this._$_runtime$_._$GetCanvasManager$_()._$SetDeviceTransform$_(t, c, f), 
                    t._$SetTexture$_(i), t._$Quad3$_(bl, this._$_rendererText$_._$GetTexRect$_()), 
                    e._$_SetTransform$_(t);
                } else t._$SetTexture$_(i), s._$HasMesh$_() ? this._$_DrawMesh$_(s, t) : this._$_DrawStandard$_(s, t);
            }
        }
        _$_DrawStandard$_(t, s) {
            let i = t._$GetBoundingQuad$_();
            this._$_runtime$_._$IsPixelRoundingEnabled$_() && (i = this._$_PixelRoundQuad$_(i)), 
            s._$Quad3$_(i, this._$_rendererText$_._$GetTexRect$_());
        }
        _$_DrawMesh$_(s, t) {
            const i = s._$GetTransformedMesh$_();
            if (s._$IsMeshChanged$_()) {
                s._$CalculateBbox$_(Tl, bl, !1);
                let t = bl;
                this._$_runtime$_._$IsPixelRoundingEnabled$_() && (t = this._$_PixelRoundQuad$_(t)), 
                i._$CalculateTransformedMesh$_(s._$GetSourceMesh$_(), t, this._$_rendererText$_._$GetTexRect$_()), 
                s._$SetMeshChanged$_(!1);
            }
            i._$Draw$_(t);
        }
        _$_PixelRoundQuad$_(t) {
            const s = t._$getTlx$_() - Math.round(t._$getTlx$_()), i = t._$getTly$_() - Math.round(t._$getTly$_());
            return 0 == s && 0 == i ? t : (bl._$copy$_(t), bl.offset(-s, -i), bl);
        }
        _$GetCurrentSurfaceSize$_() {
            const t = this._$_rendererText$_._$GetTexture$_();
            return t ? [ t._$GetWidth$_(), t._$GetHeight$_() ] : [ 100, 100 ];
        }
        _$GetCurrentTexRect$_() {
            return this._$_rendererText$_._$GetTexRect$_();
        }
        _$IsCurrentTexRotated$_() {
            return !1;
        }
        _$SaveToJson$_() {
            const t = {
                t: this._$_text$_,
                c: this._$_color$_.toJSON(),
                fn: this._$_faceName$_,
                ps: this._$_ptSize$_
            };
            return this._$_enableBBcode$_ && (t.bbc = this._$_enableBBcode$_), 0 !== this._$_horizontalAlign$_ && (t.ha = this._$_horizontalAlign$_), 
            0 !== this._$_verticalAlign$_ && (t.va = this._$_verticalAlign$_), "word" !== this._$_wrapMode$_ && (t.wr = this._$_wrapMode$_), 
            0 !== this._$_lineHeightOffset$_ && (t.lho = this._$_lineHeightOffset$_), 
            this._$_isBold$_ && (t.b = this._$_isBold$_), this._$_isItalic$_ && (t.i = this._$_isItalic$_), 
            -1 !== this._$_typewriterEndTime$_ && (t.tw = {
                st: this._$_typewriterStartTime$_,
                en: this._$_typewriterEndTime$_,
                l: this._$_typewriterLength$_
            }), this._$_iconObjectClass$_ && (t.ioc = this._$_iconObjectClass$_._$GetSID$_()), 
            "fixed" === this._$_resolutionMode$_ && (t.fs = this._$_fixedScaleFactor$_), 
            t;
        }
        _$LoadFromJson$_(t) {
            if (this._$_CancelTypewriter$_(), this._$_text$_ = t.t, this._$_color$_._$setFromJSON$_(t.c), 
            this._$_faceName$_ = t.fn, this._$_ptSize$_ = t.ps, this._$_enableBBcode$_ = !!t.hasOwnProperty("bbc") && t.bbc, 
            this._$_horizontalAlign$_ = t.hasOwnProperty("ha") ? t.ha : 0, this._$_verticalAlign$_ = t.hasOwnProperty("va") ? t.va : 0, 
            t.hasOwnProperty("wr")) {
                const s = t.wr;
                this._$_wrapMode$_ = "boolean" == typeof s ? s ? "word" : "character" : s;
            } else this._$_wrapMode$_ = "word";
            if (this._$_lineHeightOffset$_ = t.hasOwnProperty("lho") ? t.lho : 0, 
            this._$_isBold$_ = !!t.hasOwnProperty("b") && t.b, this._$_isItalic$_ = !!t.hasOwnProperty("i") && t.i, 
            t.hasOwnProperty("tw")) {
                const i = t.tw;
                this._$_typewriterStartTime$_ = i.st, this._$_typewriterEndTime$_ = i.en, 
                this._$_typewriterLength$_ = i.l;
            }
            if (t.hasOwnProperty("ioc")) {
                const e = this._$GetRuntime$_()._$GetObjectClassBySID$_(t.ioc);
                e && this._$_SetIconObjectClass$_(e);
            } else this._$_SetIconObjectClass$_(null);
            t.hasOwnProperty("fs") ? (this._$_resolutionMode$_ = "fixed", this._$_fixedScaleFactor$_ = t.fs) : this._$_resolutionMode$_ = "auto", 
            this._$_UpdateTextSettings$_(), this._$_UpdateScreenReaderText$_(), 
            this._$_isHtmlStringUpToDate$_ = !1, -1 !== this._$_typewriterEndTime$_ && this._$_StartTicking$_();
        }
        _$GetPropertyValueByIndex$_(t) {
            switch (t) {
              case 0:
                return this._$GetText$_();

              case 1:
                return this._$_enableBBcode$_;

              case 2:
                return this._$_GetFontFace$_();

              case 3:
                return this._$_GetFontSize$_();

              case 4:
                return this._$_GetLineHeight$_();

              case 5:
                return this._$_IsBold$_();

              case 6:
                return this._$_IsItalic$_();

              case 7:
                return yl[0] = this._$_color$_._$getR$_(), yl[1] = this._$_color$_._$getG$_(), 
                yl[2] = this._$_color$_._$getB$_(), yl;

              case 8:
                return this._$_GetHAlign$_();

              case 9:
                return this._$_GetVAlign$_();

              case 10:
                return this._$_GetWrapMode$_();

              case 15:
                return this._$_IsReadAloud$_();
            }
        }
        _$SetPropertyValueByIndex$_(t, s) {
            switch (t) {
              case 0:
                this._$_SetText$_(s);
                break;

              case 1:
                this._$_enableBBcode$_ !== !!s && (this._$_enableBBcode$_ = !!s, 
                this._$_UpdateTextSettings$_());
                break;

              case 2:
                this._$_SetFontFace$_(s);
                break;

              case 3:
                this._$_SetFontSize$_(s);
                break;

              case 4:
                this._$_SetLineHeight$_(s);
                break;

              case 5:
                this._$_SetBold$_(s);
                break;

              case 6:
                this._$_SetItalic$_(s);
                break;

              case 7:
                const i = this._$_color$_, e = s;
                i._$getR$_() === e[0] && i._$getG$_() === e[1] && i._$getB$_() === e[2] || (this._$_color$_._$setRgb$_(e[0], e[1], e[2]), 
                this._$_UpdateTextSettings$_());
                break;

              case 8:
                this._$_SetHAlign$_(s);
                break;

              case 9:
                this._$_SetVAlign$_(s);
                break;

              case 10:
                this._$_SetWrapMode$_(s);
            }
        }
        _$SetPropertyColorOffsetValueByIndex$_(t, s, i, e) {
            0 === s && 0 === i && 0 === e || 7 === t && (this._$_color$_._$addRgb$_(s, i, e), 
            this._$_UpdateTextSettings$_());
        }
        _$_SetText$_(t) {
            this._$_text$_ !== t && (this._$_text$_ = t, this._$_rendererText$_._$SetText$_(t), 
            this._$_UpdateScreenReaderText$_(), this._$_isHtmlStringUpToDate$_ = !1, 
            this._$_runtime$_._$UpdateRender$_());
        }
        _$GetText$_() {
            return this._$_text$_;
        }
        _$_StartTypewriter$_(t, s) {
            this._$_UpdateTextSize$_(), this._$_SetText$_(t), this._$_typewriterStartTime$_ = this._$_runtime$_._$GetWallTime$_(), 
            this._$_typewriterEndTime$_ = this._$_typewriterStartTime$_ + s / this._$GetInstance$_()._$GetActiveTimeScale$_(), 
            this._$_typewriterLength$_ = this._$_rendererText$_._$GetLengthInGraphemes$_(), 
            this._$_rendererText$_._$SetDrawMaxCharacterCount$_(0), this._$_StartTicking$_();
        }
        _$_CancelTypewriter$_() {
            this._$_typewriterStartTime$_ = -1, this._$_typewriterEndTime$_ = -1, 
            this._$_typewriterLength$_ = 0, this._$_rendererText$_._$SetDrawMaxCharacterCount$_(-1), 
            this._$_StopTicking$_();
        }
        _$_FinishTypewriter$_() {
            -1 !== this._$_typewriterEndTime$_ && (this._$_CancelTypewriter$_(), 
            this._$Trigger$_(ml._$Plugins$_.Text._$Cnds$_._$OnTypewriterTextFinished$_), 
            this._$_runtime$_._$UpdateRender$_());
        }
        _$_SetFontFace$_(t) {
            this._$_faceName$_ !== t && (this._$_faceName$_ = t, this._$_rendererText$_._$SetFontName$_(t), 
            this._$_runtime$_._$UpdateRender$_());
        }
        _$_GetFontFace$_() {
            return this._$_faceName$_;
        }
        _$_SetBold$_(t) {
            this._$_isBold$_ !== (t = !!t) && (this._$_isBold$_ = t, this._$_rendererText$_._$SetBold$_(t), 
            this._$_runtime$_._$UpdateRender$_());
        }
        _$_IsBold$_() {
            return this._$_isBold$_;
        }
        _$_SetItalic$_(t) {
            this._$_isItalic$_ !== (t = !!t) && (this._$_isItalic$_ = t, this._$_rendererText$_._$SetItalic$_(t), 
            this._$_runtime$_._$UpdateRender$_());
        }
        _$_IsItalic$_() {
            return this._$_isItalic$_;
        }
        _$_SetFontSize$_(t) {
            this._$_ptSize$_ !== t && (this._$_ptSize$_ = t, this._$_runtime$_._$UpdateRender$_());
        }
        _$_GetFontSize$_() {
            return this._$_ptSize$_;
        }
        _$_SetFontColor$_(t) {
            this._$_color$_._$equalsIgnoringAlpha$_(t) || (this._$_color$_._$copyRgb$_(t), 
            this._$_rendererText$_._$SetColor$_(this._$_color$_), this._$_runtime$_._$UpdateRender$_());
        }
        _$_GetFontColor$_() {
            return this._$_color$_;
        }
        _$_SetLineHeight$_(t) {
            this._$_lineHeightOffset$_ !== t && (this._$_lineHeightOffset$_ = t, 
            this._$_UpdateTextSettings$_(), this._$_runtime$_._$UpdateRender$_());
        }
        _$_GetLineHeight$_() {
            return this._$_lineHeightOffset$_;
        }
        _$_SetHAlign$_(t) {
            this._$_horizontalAlign$_ !== t && (this._$_horizontalAlign$_ = t, this._$_UpdateTextSettings$_(), 
            this._$_runtime$_._$UpdateRender$_());
        }
        _$_GetHAlign$_() {
            return this._$_horizontalAlign$_;
        }
        _$_SetVAlign$_(t) {
            this._$_verticalAlign$_ !== t && (this._$_verticalAlign$_ = t, this._$_UpdateTextSettings$_(), 
            this._$_runtime$_._$UpdateRender$_());
        }
        _$_GetVAlign$_() {
            return this._$_verticalAlign$_;
        }
        _$_SetWrapModeByIndex$_(t) {
            this._$_SetWrapMode$_(Sl[t]);
        }
        _$_SetWrapMode$_(t) {
            this._$_wrapMode$_ !== t && (this._$_wrapMode$_ = t, this._$_UpdateTextSettings$_(), 
            this._$_runtime$_._$UpdateRender$_());
        }
        _$_GetWrapMode$_() {
            return this._$_wrapMode$_;
        }
        _$_SetTextDirection$_(t) {
            this._$_textDirection$_ !== t && (this._$_textDirection$_ = t, this._$_UpdateTextSettings$_(), 
            this._$_runtime$_._$UpdateRender$_());
        }
        _$_GetTextDirection$_() {
            return this._$_textDirection$_;
        }
        _$_SetReadAloud$_(t) {
            this._$_readAloud$_ = !!t, this._$_UpdateScreenReaderText$_();
        }
        _$_IsReadAloud$_() {
            return this._$_readAloud$_;
        }
        _$_SetResolutionMode$_(t) {
            this._$_resolutionMode$_ !== t && (this._$_resolutionMode$_ = t, this._$_runtime$_._$UpdateRender$_());
        }
        _$_GetResolutionMode$_() {
            return this._$_resolutionMode$_;
        }
        _$_SetFixedScaleFactor$_(t) {
            this._$_fixedScaleFactor$_ !== t && (this._$_fixedScaleFactor$_ = t, 
            "fixed" === this._$_resolutionMode$_) && this._$_runtime$_._$UpdateRender$_();
        }
        _$_GetFixedScaleFactor$_() {
            return this._$_fixedScaleFactor$_;
        }
        _$_GetTextWidth$_() {
            return this._$_UpdateTextSize$_(), this._$_rendererText$_._$GetTextWidth$_();
        }
        _$_GetTextHeight$_() {
            return this._$_UpdateTextSize$_(), this._$_rendererText$_._$GetTextHeight$_();
        }
        _$_GetTagAtPosition$_(t, s) {
            this._$_UpdateTextSize$_();
            const i = this._$GetWorldInfo$_(), e = (Cl.set(t - i._$GetX$_(), s - i._$GetY$_()), 
            Cl.rotate(-i._$GetAngle$_()), Cl.offset(i._$GetWidth$_() * i._$GetOriginX$_(), i._$GetHeight$_() * i._$GetOriginY$_()), 
            Cl._$divide$_(i._$GetWidth$_(), i._$GetHeight$_()), Cl.scale(this._$_rendererText$_._$GetWidth$_(), this._$_rendererText$_._$GetHeight$_()), 
            this._$_rendererText$_._$HitTestFragment$_(Cl._$getX$_(), Cl._$getY$_()));
            if (e) {
                const n = e._$GetStyleTag$_("tag");
                if (n) return n.param;
            }
            return "";
        }
        _$_HasTagAtPosition$_(t, s, i) {
            const e = this._$_GetTagAtPosition$_(s, i);
            return e && ml._$equalsNoCase$_(t, e);
        }
        _$_GetTagPosition$_(t, s) {
            this._$_UpdateTextSize$_(), s = Math.floor(s);
            const i = this._$_rendererText$_._$FindFragmentWithTag$_(t, s);
            if (!i) return null;
            const e = this._$GetWorldInfo$_(), n = this._$_rendererText$_._$GetDrawScale$_(), h = i._$GetPosX$_(), r = i._$GetPosY$_() - (i._$GetHeight$_() - i._$GetFontBoundingBoxDescent$_()) * n, o = i._$GetWidth$_() * n / this._$_rendererText$_._$GetWidth$_() * e._$GetWidth$_(), a = i._$GetHeight$_() * n / this._$_rendererText$_._$GetHeight$_() * e._$GetHeight$_();
            return Cl.set(h, r), Cl._$divide$_(this._$_rendererText$_._$GetWidth$_(), this._$_rendererText$_._$GetHeight$_()), 
            Cl.scale(e._$GetWidth$_(), e._$GetHeight$_()), Cl.offset(-e._$GetWidth$_() * e._$GetOriginX$_(), -e._$GetHeight$_() * e._$GetOriginY$_()), 
            Cl.rotate(e._$GetAngle$_()), Cl.offset(e._$GetX$_(), e._$GetY$_()), 
            {
                x: Cl._$getX$_(),
                y: Cl._$getY$_(),
                width: o,
                height: a
            };
        }
        _$_GetTagCount$_(t) {
            return this._$_UpdateTextSize$_(), this._$_rendererText$_._$CountFragmentsWithTag$_(t);
        }
        _$_GetHTMLCloseTag$_(t) {
            let s = Gl.get(t);
            return null === s ? "" : `</${s || "span" || "span"}>`;
        }
        _$_GetHTMLOpenTag$_(t, s) {
            let i = Gl.get(t);
            if (null === i) return "";
            switch (i = i || "span", t) {
              case "color":
                return `<${i} style="color: ${s}">`;

              case "font":
                return `<${i} style="font-family: '${s}'">`;

              case "opacity":
                return `<${i} style="opacity: ${s}%">`;

              case "size":
                return `<${i} style="font-size: ${s}pt">`;

              case "background":
                return `<${i} style="background-color: ${s}">`;

              case "hide":
                return `<${i} style="visibility: hidden">`;

              case "class":
                return `<${i} class="${s}">`;

              case "tag":
                return `<${i} data-tag="${s}">`;

              default:
                return `<${i}>`;
            }
        }
        async _$_UpdateHTMLString$_() {
            if (!this._$_isHtmlStringUpToDate$_) {
                let t = new ml._$BBString$_(this._$_text$_, {
                    _$noEscape$_: !0
                })._$toFragmentList$_(), s = new Map(), n = '<span class="c3-text"', i = [], h = (i.push(`font-family: '${this._$_GetFontFace$_()}';`), 
                this._$_IsBold$_() && i.push("font-weight: bold;"), this._$_IsItalic$_() && i.push("font-style: italic;"), 
                "character" === this._$_GetWrapMode$_() && i.push("word-break: break-all;"), 
                n += ` style="${i.join(" ")}">`, this._$_iconObjectClass$_ ? this._$GetRuntime$_()._$GetTextIconSet$_(this._$_iconObjectClass$_) : null);
                if (this._$_iconObjectClass$_) {
                    const o = ml._$New$_(ml._$PromiseThrottle$_), a = [], l = new Map();
                    for (const c of t) if (c._$IsIcon$_()) {
                        const f = c._$GetTextIcon$_(h);
                        if (f) {
                            const d = f._$GetSource$_(), p = d._$GetImageInfo$_()._$GetImageAsset$_();
                            l.has(p) || (l.set(p, null), a.push(o._$Add$_(async () => {
                                const t = await p._$LoadToDrawable$_();
                                l.set(p, t);
                            })));
                        }
                    }
                    await Promise.all(a);
                    const u = [];
                    for (const m of t) if (m._$IsIcon$_()) {
                        const g = m._$GetTextIcon$_(h);
                        if (g) {
                            const y = g._$GetSource$_(), M = y._$GetImageInfo$_()._$GetImageAsset$_();
                            u.push(o._$Add$_(async () => {
                                const t = await y._$GetImageInfo$_()._$ExtractImageToBlobURL$_(l.get(M));
                                s.set(g, t);
                            }));
                        }
                    }
                    await Promise.all(u);
                    for (const w of l.values()) w instanceof ImageBitmap && w.close && w.close();
                }
                const r = new Map();
                for (const x of t) {
                    let e = x._$GetStyleMap$_(), t = [ ...r.keys() ];
                    t.reverse();
                    for (const S of t) e.has(S) && e.get(S) === r.get(S) || (r.delete(S), 
                    n += this._$_GetHTMLCloseTag$_(S));
                    for (const [ T, b ] of e) r.has(T) || (r.set(T, b), n += this._$_GetHTMLOpenTag$_(T, b));
                    if (x._$IsText$_() && (n += ml._$ReplaceAll$_(ml._$EscapeHTML$_(x._$GetCharacterArray$_().join("")), "\n", "<br>")), 
                    x._$IsIcon$_() && h) {
                        const v = x._$GetTextIcon$_(h);
                        if (v) {
                            const C = s.get(v);
                            if (C) {
                                let t = [], s = "0.2em", i = e.get("iconoffsety");
                                if (i) {
                                    let t = i.trim();
                                    s = t.endsWith("%") ? parseFloat(t) / 100 + "em" : t + "px";
                                }
                                t.push("top: " + s), "nearest" === this._$_runtime$_._$GetSampling$_() && t.push("image-rendering: pixelated"), 
                                n += `<img class="c3-text-icon" data-icon="${x._$GetIconParameter$_()}" width="${v._$GetWidth$_()}" height="${v._$GetHeight$_()}" style="${t.join(";")}" src="${C}">`;
                            }
                        }
                    }
                }
                const e = [ ...r.keys() ];
                e.reverse();
                for (const G of e) n += this._$_GetHTMLCloseTag$_(G);
                n += "</span>", this._$_htmlString$_ = n, this._$_isHtmlStringUpToDate$_ = !0;
            }
            return this._$_htmlString$_;
        }
        _$Tick$_() {
            const s = this._$_runtime$_._$GetWallTime$_();
            if (s >= this._$_typewriterEndTime$_) this._$_CancelTypewriter$_(), 
            this._$Trigger$_(ml._$Plugins$_.Text._$Cnds$_._$OnTypewriterTextFinished$_), 
            this._$_runtime$_._$UpdateRender$_(); else {
                let t = ml._$relerp$_(this._$_typewriterStartTime$_, this._$_typewriterEndTime$_, s, 0, this._$_typewriterLength$_);
                (t = Math.floor(t)) !== this._$_rendererText$_._$GetDrawMaxCharacterCount$_() && (this._$_rendererText$_._$SetDrawMaxCharacterCount$_(t), 
                this._$_runtime$_._$UpdateRender$_());
            }
        }
        _$GetDebuggerProperties$_() {
            const t = "plugins.text";
            return [ {
                title: t + ".name",
                properties: [ {
                    name: t + ".properties.text.name",
                    value: this._$GetText$_(),
                    _$onedit$_: t => this._$_SetText$_(t)
                }, {
                    name: t + ".properties.font.name",
                    value: this._$_GetFontFace$_(),
                    _$onedit$_: t => this._$_SetFontFace$_(t)
                }, {
                    name: t + ".properties.size.name",
                    value: this._$_GetFontSize$_(),
                    _$onedit$_: t => this._$_SetFontSize$_(t)
                }, {
                    name: t + ".properties.line-height.name",
                    value: this._$_GetLineHeight$_(),
                    _$onedit$_: t => this._$_SetLineHeight$_(t)
                }, {
                    name: t + ".properties.bold.name",
                    value: this._$_IsBold$_(),
                    _$onedit$_: t => this._$_SetBold$_(t)
                }, {
                    name: t + ".properties.italic.name",
                    value: this._$_IsItalic$_(),
                    _$onedit$_: t => this._$_SetItalic$_(t)
                } ]
            } ];
        }
        _$GetScriptInterfaceClass$_() {
            return self._$ITextInstance$_;
        }
    }, new WeakMap()), Il = new Map([ [ "left", 0 ], [ "center", 1 ], [ "right", 2 ] ]), _l = new Map([ [ "top", 0 ], [ "center", 1 ], [ "bottom", 2 ] ]), El = [ "ltr", "rtl" ];
    new Set([ "auto", "fixed" ]);
    self._$ITextInstance$_ = class extends self._$IWorldInstance$_ {
        constructor() {
            super(), D.set(this, self._$IInstance$_._$_GetInitInst$_()._$GetSdkInstance$_());
        }
        get text() {
            return D.get(this)._$GetText$_();
        }
        set text(t) {
            gl._$RequireString$_(t);
            const s = D.get(this);
            s._$_CancelTypewriter$_(), s._$_SetText$_(t);
        }
        _$typewriterText$_(t, s) {
            gl._$RequireString$_(t), gl._$RequireFiniteNumber$_(s);
            const i = D.get(this);
            i._$_CancelTypewriter$_(), i._$_StartTypewriter$_(t, s);
        }
        _$typewriterFinish$_() {
            D.get(this)._$_FinishTypewriter$_();
        }
        set _$fontFace$_(t) {
            gl._$RequireString$_(t), D.get(this)._$_SetFontFace$_(t);
        }
        get _$fontFace$_() {
            return D.get(this)._$_GetFontFace$_();
        }
        set _$isBold$_(t) {
            D.get(this)._$_SetBold$_(t);
        }
        get _$isBold$_() {
            return D.get(this)._$_IsBold$_();
        }
        set _$isItalic$_(t) {
            D.get(this)._$_SetItalic$_(t);
        }
        get _$isItalic$_() {
            return D.get(this)._$_IsItalic$_();
        }
        set _$sizePt$_(t) {
            gl._$RequireFiniteNumber$_(t), D.get(this)._$_SetFontSize$_(t);
        }
        get _$sizePt$_() {
            return D.get(this)._$_GetFontSize$_();
        }
        set _$fontColor$_(t) {
            if (gl._$RequireArray$_(t), t.length < 3) throw new Error("expected 3 elements");
            vl._$setRgb$_(t[0], t[1], t[2]), D.get(this)._$_SetFontColor$_(vl);
        }
        get _$fontColor$_() {
            const t = D.get(this)._$_GetFontColor$_();
            return [ t._$getR$_(), t._$getG$_(), t._$getB$_() ];
        }
        set lineHeight(t) {
            gl._$RequireFiniteNumber$_(t), D.get(this)._$_SetLineHeight$_(t);
        }
        get lineHeight() {
            return D.get(this)._$_GetLineHeight$_();
        }
        set _$horizontalAlign$_(t) {
            gl._$RequireString$_(t);
            const s = Il.get(t);
            if (void 0 === s) throw new Error("invalid mode");
            D.get(this)._$_SetHAlign$_(s);
        }
        get _$horizontalAlign$_() {
            return Ml[D.get(this)._$_GetHAlign$_()];
        }
        set verticalAlign(t) {
            gl._$RequireString$_(t);
            const s = _l.get(t);
            if (void 0 === s) throw new Error("invalid mode");
            D.get(this)._$_SetVAlign$_(s);
        }
        get verticalAlign() {
            return wl[D.get(this)._$_GetVAlign$_()];
        }
        set _$wordWrapMode$_(t) {
            if (!Sl.includes(t)) throw new Error("invalid mode");
            D.get(this)._$_SetWrapMode$_(t);
        }
        get _$wordWrapMode$_() {
            return D.get(this)._$_GetWrapMode$_();
        }
        set _$textDirection$_(t) {
            gl._$RequireString$_(t);
            const s = El.indexOf(t);
            if (-1 === s) throw new Error("invalid text direction");
            D.get(this)._$_SetTextDirection$_(s);
        }
        get _$textDirection$_() {
            return El[D.get(this)._$_GetTextDirection$_()];
        }
        set _$readAloud$_(t) {
            D.get(this)._$_SetReadAloud$_(!!t);
        }
        get _$readAloud$_() {
            return D.get(this)._$_IsReadAloud$_();
        }
        _$setFixedResolutionMode$_(t) {
            gl._$RequireFiniteNumber$_(t);
            const s = D.get(this);
            s._$_SetResolutionMode$_("fixed"), s._$_SetFixedScaleFactor$_(t);
        }
        _$setAutoResolutionMode$_() {
            D.get(this)._$_SetResolutionMode$_("auto");
        }
        get _$textWidth$_() {
            return D.get(this)._$_GetTextWidth$_();
        }
        get _$textHeight$_() {
            return D.get(this)._$_GetTextHeight$_();
        }
        _$getTextSize$_() {
            const t = D.get(this);
            return [ t._$_GetTextWidth$_(), t._$_GetTextHeight$_() ];
        }
        _$hasTagAtPosition$_(t, s, i) {
            return gl._$RequireString$_(t), gl._$RequireFiniteNumber$_(s), gl._$RequireFiniteNumber$_(i), 
            D.get(this)._$_HasTagAtPosition$_(t, s, i);
        }
        _$getTagAtPosition$_(t, s) {
            return gl._$RequireFiniteNumber$_(t), gl._$RequireFiniteNumber$_(s), 
            D.get(this)._$_GetTagAtPosition$_(t, s);
        }
        _$getTagPositionAndSize$_(t, s = 0) {
            return gl._$RequireString$_(t), gl._$RequireFiniteNumber$_(s), D.get(this)._$_GetTagPosition$_(t, s);
        }
        _$getTagCount$_(t) {
            return gl._$RequireString$_(t), D.get(this)._$_GetTagCount$_(t);
        }
        _$changeIconSet$_(t) {
            const s = D.get(this), i = s._$GetRuntime$_()._$_UnwrapIObjectClass$_(t);
            s._$_SetIconObjectClass$_(i);
        }
        _$getAsHtmlString$_() {
            return D.get(this)._$_UpdateHTMLString$_();
        }
    };
}

{
    const Nl = self._$C3$_;
    Nl._$Plugins$_.Text._$Cnds$_ = {
        _$CompareText$_(t, s) {
            return s ? this._$_text$_ === t : Nl._$equalsNoCase$_(this._$_text$_, t);
        },
        _$IsRunningTypewriterText$_() {
            return -1 !== this._$_typewriterEndTime$_;
        },
        _$OnTypewriterTextFinished$_() {
            return !0;
        },
        _$HasTagAtPosition$_(t, s, i) {
            return this._$_HasTagAtPosition$_(t, s, i);
        }
    };
}

{
    const Dl = self._$C3$_, Al = Dl._$New$_(Dl._$Color$_);
    Dl._$Plugins$_.Text._$Acts$_ = {
        _$SetText$_(t) {
            this._$_CancelTypewriter$_(), "number" == typeof t && t < 1e9 && (t = Math.round(1e10 * t) / 1e10), 
            this._$_SetText$_(t.toString());
        },
        _$AppendText$_(t) {
            this._$_CancelTypewriter$_(), (t = (t = "number" == typeof t && t < 1e9 ? Math.round(1e10 * t) / 1e10 : t).toString()) && this._$_SetText$_(this._$_text$_ + t);
        },
        _$TypewriterText$_(t, s) {
            this._$_CancelTypewriter$_(), "number" == typeof t && t < 1e9 && (t = Math.round(1e10 * t) / 1e10), 
            this._$_StartTypewriter$_(t.toString(), s);
        },
        _$SetFontFace$_(t, s) {
            let i = !1, e = !1;
            switch (s) {
              case 1:
                i = !0;
                break;

              case 2:
                e = !0;
                break;

              case 3:
                i = !0, e = !0;
            }
            t === this._$_faceName$_ && i === this._$_isBold$_ && e === this._$_isItalic$_ || (this._$_SetFontFace$_(t), 
            this._$_SetBold$_(i), this._$_SetItalic$_(e));
        },
        _$SetFontSize$_(t) {
            this._$_SetFontSize$_(t);
        },
        _$SetFontColor$_(t) {
            Al._$setFromRgbValue$_(t), Al._$clamp$_(), this._$_SetFontColor$_(Al);
        },
        _$SetWebFont$_(t, s) {
            console.warn("[Text] 'Set web font' action is deprecated and no longer has any effect");
        },
        _$SetEffect$_(t) {
            this._$GetWorldInfo$_()._$SetBlendMode$_(t), this._$_runtime$_._$UpdateRender$_();
        },
        _$TypewriterFinish$_() {
            this._$_FinishTypewriter$_();
        },
        _$SetLineHeight$_(t) {
            this._$_SetLineHeight$_(t);
        },
        _$SetHAlign$_(t) {
            this._$_SetHAlign$_(t);
        },
        _$SetVAlign$_(t) {
            this._$_SetVAlign$_(t);
        },
        _$SetWrapping$_(t) {
            this._$_SetWrapModeByIndex$_(t);
        },
        _$SetTextDirection$_(t) {
            this._$_SetTextDirection$_(t);
        },
        _$ChangeIconSet$_(t) {
            this._$_SetIconObjectClass$_(t);
        },
        _$UpdateHTML$_() {
            return this._$_UpdateHTMLString$_();
        },
        _$SetReadAloud$_(t) {
            this._$_SetReadAloud$_(t);
        },
        _$SetResolutionMode$_(t, s) {
            this._$_SetResolutionMode$_([ "auto", "fixed" ][t]), this._$_SetFixedScaleFactor$_(s);
        }
    };
}

{
    const Ll = self._$C3$_;
    Ll._$Plugins$_.Text._$Exps$_ = {
        Text() {
            return this._$_text$_;
        },
        _$PlainText$_() {
            return this._$_enableBBcode$_ ? Ll._$BBString$_._$StripAnyTags$_(this._$_text$_) : this._$_text$_;
        },
        _$FaceName$_() {
            return this._$_faceName$_;
        },
        _$FaceSize$_() {
            return this._$_ptSize$_;
        },
        _$TextWidth$_() {
            return this._$_GetTextWidth$_();
        },
        _$TextHeight$_() {
            return this._$_GetTextHeight$_();
        },
        _$LineHeight$_() {
            return this._$_lineHeightOffset$_;
        },
        _$TagAtPosition$_(t, s) {
            return this._$_GetTagAtPosition$_(t, s);
        },
        _$TagCount$_(t) {
            return this._$_GetTagCount$_(t);
        },
        _$TagX$_(t, s) {
            const i = this._$_GetTagPosition$_(t, s);
            return i ? i.x : 0;
        },
        _$TagY$_(t, s) {
            const i = this._$_GetTagPosition$_(t, s);
            return i ? i.y : 0;
        },
        _$TagWidth$_(t, s) {
            const i = this._$_GetTagPosition$_(t, s);
            return i ? i.width : 0;
        },
        _$TagHeight$_(t, s) {
            const i = this._$_GetTagPosition$_(t, s);
            return i ? i.height : 0;
        },
        _$AsHTML$_() {
            return this._$_htmlString$_;
        }
    };
}

{
    const Ol = self._$C3$_;
    Ol._$Plugins$_._$Mouse$_ = class extends Ol._$SDKPluginBase$_ {
        constructor(t) {
            super(t);
        }
        _$Release$_() {
            super._$Release$_();
        }
    };
}

{
    let n = function() {
        return s._$GetSingleGlobalInstance$_()._$GetSdkInstance$_();
    };
    n;
    const Pl = self._$C3$_, Rl = self._$C3X$_;
    Pl._$Plugins$_._$Mouse$_._$Type$_ = class extends Pl._$SDKTypeBase$_ {
        constructor(t) {
            super(t);
        }
        _$Release$_() {
            super._$Release$_();
        }
        _$OnCreate$_() {}
        _$GetScriptInterfaceClass$_() {
            return self._$IMouseObjectType$_;
        }
    };
    let s = null;
    self._$IMouseObjectType$_ = class extends self._$IObjectClass$_ {
        constructor(t) {
            super(t), (s = t)._$GetRuntime$_()._$_GetCommonScriptInterfaces$_()._$mouse$_ = this;
        }
        _$getMouseX$_(t) {
            return n()._$GetMousePositionForLayer$_(t)[0];
        }
        _$getMouseY$_(t) {
            return n()._$GetMousePositionForLayer$_(t)[1];
        }
        _$getMousePosition$_(t) {
            return n()._$GetMousePositionForLayer$_(t);
        }
        _$isMouseButtonDown$_(t) {
            return n()._$IsMouseButtonDown$_(t);
        }
        _$setCursorStyle$_(t) {
            Rl._$RequireString$_(t), n()._$SetCursorStyle$_(t);
        }
        _$setCursorObjectClass$_(t) {
            const s = n(), i = s._$GetRuntime$_(), e = i._$_UnwrapIObjectClass$_(t);
            s._$SetCursorObjectClass$_(e);
        }
    };
}

{
    let r = self._$C3$_, o = null;
    r._$Plugins$_._$Mouse$_.Instance = class extends r._$SDKInstanceBase$_ {
        constructor(t, s) {
            super(t, "mouse"), this._$_buttonMap$_ = [ !1, !1, !1, !1, !1 ], this._$_mouseXcanvas$_ = 0, 
            this._$_mouseYcanvas$_ = 0, this._$_triggerButton$_ = 0, this._$_triggerType$_ = 0, 
            this._$_triggerDir$_ = 0, this._$_wheelDeltaX$_ = 0, this._$_wheelDeltaY$_ = 0, 
            this._$_wheelDeltaZ$_ = 0, this._$_hasPointerLock$_ = !1, this._$_movementX$_ = 0, 
            this._$_movementY$_ = 0, this._$AddDOMMessageHandlers$_([ [ "pointer-lock-change", t => this._$_OnPointerLockChange$_(t) ], [ "pointer-lock-error", t => this._$_OnPointerLockError$_(t) ] ]);
            const i = this._$GetRuntime$_()._$Dispatcher$_();
            this._$_disposables$_ = new r._$CompositeDisposable$_(r._$Disposable$_._$From$_(i, "pointermove", t => this._$_OnPointerMove$_(t.data)), r._$Disposable$_._$From$_(i, "pointerdown", t => this._$_OnPointerDown$_(t.data)), r._$Disposable$_._$From$_(i, "pointerup", t => this._$_OnPointerUp$_(t.data)), r._$Disposable$_._$From$_(i, "dblclick", t => this._$_OnDoubleClick$_(t.data)), r._$Disposable$_._$From$_(i, "wheel", t => this._$_OnMouseWheel$_(t.data)), r._$Disposable$_._$From$_(i, "window-blur", () => this._$_OnWindowBlur$_()));
        }
        _$Release$_() {
            super._$Release$_();
        }
        _$_OnPointerDown$_(t) {
            "mouse" === t.pointerType && (this._$_mouseXcanvas$_ = t.pageX - this._$_runtime$_._$GetCanvasClientX$_(), 
            this._$_mouseYcanvas$_ = t.pageY - this._$_runtime$_._$GetCanvasClientY$_(), 
            this._$_CheckButtonChanges$_(t.lastButtons, t.buttons));
        }
        _$_OnPointerMove$_(t) {
            this._$_movementX$_ = t.movementX, this._$_movementY$_ = t.movementY, 
            this._$Trigger$_(r._$Plugins$_._$Mouse$_._$Cnds$_._$OnMovement$_), this._$_movementX$_ = 0, 
            this._$_movementY$_ = 0, "mouse" === t.pointerType && (this._$_mouseXcanvas$_ = t.pageX - this._$_runtime$_._$GetCanvasClientX$_(), 
            this._$_mouseYcanvas$_ = t.pageY - this._$_runtime$_._$GetCanvasClientY$_(), 
            this._$_CheckButtonChanges$_(t.lastButtons, t.buttons));
        }
        _$_OnPointerUp$_(t) {
            "mouse" === t.pointerType && this._$_CheckButtonChanges$_(t.lastButtons, t.buttons);
        }
        _$_CheckButtonChanges$_(t, s) {
            this._$_CheckButtonChange$_(t, s, 1, 0), this._$_CheckButtonChange$_(t, s, 4, 1), 
            this._$_CheckButtonChange$_(t, s, 2, 2), this._$_CheckButtonChange$_(t, s, 8, 3), 
            this._$_CheckButtonChange$_(t, s, 16, 4);
        }
        _$_CheckButtonChange$_(t, s, i, e) {
            !(t & i) && s & i ? this._$_OnMouseDown$_(e) : t & i && !(s & i) && this._$_OnMouseUp$_(e);
        }
        _$_OnMouseDown$_(t) {
            this._$_buttonMap$_[t] = !0, this._$Trigger$_(r._$Plugins$_._$Mouse$_._$Cnds$_._$OnAnyClick$_), 
            this._$_triggerButton$_ = t, this._$_triggerType$_ = 0, this._$Trigger$_(r._$Plugins$_._$Mouse$_._$Cnds$_._$OnClick$_), 
            this._$Trigger$_(r._$Plugins$_._$Mouse$_._$Cnds$_._$OnObjectClicked$_);
        }
        _$_OnMouseUp$_(t) {
            this._$_buttonMap$_[t] && (this._$_buttonMap$_[t] = !1, this._$_triggerButton$_ = t, 
            this._$Trigger$_(r._$Plugins$_._$Mouse$_._$Cnds$_._$OnRelease$_));
        }
        _$_OnDoubleClick$_(t) {
            this._$_triggerButton$_ = t.button, this._$_triggerType$_ = 1, this._$Trigger$_(r._$Plugins$_._$Mouse$_._$Cnds$_._$OnClick$_), 
            this._$Trigger$_(r._$Plugins$_._$Mouse$_._$Cnds$_._$OnObjectClicked$_);
        }
        _$_OnMouseWheel$_(t) {
            this._$_triggerDir$_ = t.deltaY < 0 ? 1 : 0, this._$_wheelDeltaX$_ = t.deltaX, 
            this._$_wheelDeltaY$_ = t.deltaY, this._$_wheelDeltaZ$_ = t.deltaZ, 
            this._$Trigger$_(r._$Plugins$_._$Mouse$_._$Cnds$_._$OnWheel$_);
        }
        _$_OnWindowBlur$_() {
            for (let t = 0, s = this._$_buttonMap$_.length; t < s; ++t) {
                if (!this._$_buttonMap$_[t]) return;
                this._$_buttonMap$_[t] = !1, this._$_triggerButton$_ = t, this._$Trigger$_(r._$Plugins$_._$Mouse$_._$Cnds$_._$OnRelease$_);
            }
        }
        _$GetMousePositionForLayer$_(t) {
            const s = this._$_runtime$_._$GetMainRunningLayout$_(), i = this._$_mouseXcanvas$_, e = this._$_mouseYcanvas$_;
            if (void 0 === t) {
                const n = s._$GetLayerByIndex$_(0);
                return n._$CanvasCssToLayer_DefaultTransform$_(i, e);
            }
            {
                const h = s._$GetLayer$_(t);
                return h ? h._$CanvasCssToLayer$_(i, e) : [ 0, 0 ];
            }
        }
        _$IsMouseButtonDown$_(t) {
            return t = Math.floor(t), !!this._$_buttonMap$_[t];
        }
        _$_IsMouseOverCanvas$_() {
            return 0 <= this._$_mouseXcanvas$_ && 0 <= this._$_mouseYcanvas$_ && this._$_mouseXcanvas$_ < this._$_runtime$_._$GetCanvasCssWidth$_() && this._$_mouseYcanvas$_ < this._$_runtime$_._$GetCanvasCssHeight$_();
        }
        _$SetCursorStyle$_(t) {
            o !== t && (o = t, this._$PostToDOM$_("cursor", t));
        }
        async _$SetCursorObjectClass$_(t) {
            if (!r._$Platform$_._$IsMobile$_ && t) {
                const s = t._$GetFirstPicked$_();
                if (s) {
                    const i = s._$GetWorldInfo$_(), e = s._$GetCurrentImageInfo$_();
                    if (i && e && o !== e) {
                        const n = await (o = e)._$ExtractImageToBlobURL$_(), h = `url(${n}) ${Math.round(i._$GetOriginX$_() * e._$GetWidth$_())} ${Math.round(i._$GetOriginY$_() * e._$GetHeight$_())}, auto`;
                        this._$PostToDOM$_("cursor", h);
                    }
                }
            }
        }
        _$_OnPointerLockChange$_(t) {
            this._$_UpdatePointerLockState$_(t["has-pointer-lock"]);
        }
        _$_OnPointerLockError$_(t) {
            this._$_UpdatePointerLockState$_(t["has-pointer-lock"]), this._$Trigger$_(r._$Plugins$_._$Mouse$_._$Cnds$_._$OnPointerLockError$_);
        }
        _$_UpdatePointerLockState$_(t) {
            this._$_hasPointerLock$_ !== t && (this._$_hasPointerLock$_ = t, this._$_hasPointerLock$_ ? this._$Trigger$_(r._$Plugins$_._$Mouse$_._$Cnds$_._$OnPointerLocked$_) : this._$Trigger$_(r._$Plugins$_._$Mouse$_._$Cnds$_._$OnPointerUnlocked$_));
        }
        _$GetDebuggerProperties$_() {
            const t = "plugins.mouse";
            return [ {
                title: t + ".name",
                properties: [ {
                    name: t + ".debugger.absolute-position",
                    value: this._$_mouseXcanvas$_ + "," + this._$_mouseYcanvas$_
                }, {
                    name: t + ".debugger.left-button",
                    value: this._$_buttonMap$_[0]
                }, {
                    name: t + ".debugger.middle-button",
                    value: this._$_buttonMap$_[1]
                }, {
                    name: t + ".debugger.right-button",
                    value: this._$_buttonMap$_[2]
                }, {
                    name: t + ".debugger.button-4",
                    value: this._$_buttonMap$_[3]
                }, {
                    name: t + ".debugger.button-5",
                    value: this._$_buttonMap$_[4]
                } ]
            }, {
                title: t + ".debugger.position-on-each-layer",
                properties: this._$_runtime$_._$GetMainRunningLayout$_()._$GetLayers$_().map(t => ({
                    name: "$" + t._$GetName$_(),
                    value: t._$CanvasCssToLayer$_(this._$_mouseXcanvas$_, this._$_mouseYcanvas$_).join(", ")
                }))
            } ];
        }
    };
}

{
    const kl = self._$C3$_;
    kl._$Plugins$_._$Mouse$_._$Cnds$_ = {
        _$OnClick$_(t, s) {
            return this._$_triggerButton$_ === t && this._$_triggerType$_ === s;
        },
        _$OnAnyClick$_() {
            return !0;
        },
        _$IsButtonDown$_(t) {
            return this._$_buttonMap$_[t];
        },
        _$OnRelease$_(t) {
            return this._$_triggerButton$_ === t;
        },
        _$IsOverObject$_(t) {
            const s = this._$_runtime$_._$GetCurrentCondition$_(), i = s._$IsInverted$_(), e = [];
            return this._$_IsMouseOverCanvas$_() && e.push([ this._$_mouseXcanvas$_, this._$_mouseYcanvas$_ ]), 
            kl.xor(this._$_runtime$_._$GetCollisionEngine$_()._$TestAndSelectCanvasPointOverlap$_(t, e, i), i);
        },
        _$OnObjectClicked$_(t, s, i) {
            if (t !== this._$_triggerButton$_ || s !== this._$_triggerType$_) return !1;
            if (!this._$_IsMouseOverCanvas$_()) return !1;
            const e = this._$_mouseXcanvas$_, n = this._$_mouseYcanvas$_;
            return this._$_runtime$_._$GetCollisionEngine$_()._$TestAndSelectCanvasPointOverlap$_(i, [ [ e, n ] ], !1);
        },
        _$OnWheel$_(t) {
            return 2 === t || this._$_triggerDir$_ === t;
        },
        _$OnPointerLocked$_() {
            return !0;
        },
        _$OnPointerUnlocked$_() {
            return !0;
        },
        _$OnPointerLockError$_() {
            return !0;
        },
        _$HasPointerLock$_() {
            return this._$_hasPointerLock$_;
        },
        _$OnMovement$_() {
            return !0;
        }
    };
}

{
    const Fl = self._$C3$_, jl = [ "auto", "pointer", "text", "crosshair", "move", "help", "wait", "none" ], zl = [ "auto", "all-scroll", "none", "help", "pointer", "progress", "wait", "cell", "crosshair", "text", "vertical-text", "alias", "copy", "move", "not-allowed", "grab", "grabbing", "col-resize", "row-resize", "ew-resize", "ns-resize", "nesw-resize", "nwse-resize", "zoom-in", "zoom-out" ];
    Fl._$Plugins$_._$Mouse$_._$Acts$_ = {
        _$SetCursor$_(t) {
            this._$SetCursorStyle$_(jl[t]);
        },
        _$SetCursor2$_(t) {
            this._$SetCursorStyle$_(zl[t]);
        },
        _$SetCursorSprite$_(t) {
            this._$SetCursorObjectClass$_(t);
        },
        _$RequestPointerLock$_(t) {
            this._$_PostToDOMMaybeSync$_("request-pointer-lock", {
                unadjustedMovement: t
            });
        },
        _$ReleasePointerLock$_() {
            this._$PostToDOM$_("release-pointer-lock");
        }
    };
}

{
    const Bl = self._$C3$_;
    Bl._$Plugins$_._$Mouse$_._$Exps$_ = {
        _$X$_(t) {
            return this._$GetMousePositionForLayer$_(t)[0];
        },
        _$Y$_(t) {
            return this._$GetMousePositionForLayer$_(t)[1];
        },
        _$AbsoluteX$_() {
            return this._$_mouseXcanvas$_;
        },
        _$AbsoluteY$_() {
            return this._$_mouseYcanvas$_;
        },
        _$MovementX$_() {
            return this._$_movementX$_;
        },
        _$MovementY$_() {
            return this._$_movementY$_;
        },
        _$WheelDeltaX$_() {
            return this._$_wheelDeltaX$_;
        },
        _$WheelDeltaY$_() {
            return this._$_wheelDeltaY$_;
        },
        _$WheelDeltaZ$_() {
            return this._$_wheelDeltaZ$_;
        }
    };
}

{
    const Ul = self._$C3$_;
    Ul._$Plugins$_.Touch = class extends Ul._$SDKPluginBase$_ {
        constructor(t) {
            super(t);
        }
        _$Release$_() {
            super._$Release$_();
        }
    };
}

{
    let i = function() {
        return s._$GetSingleGlobalInstance$_()._$GetSdkInstance$_();
    };
    i;
    const Wl = self._$C3$_, Ql = self._$C3X$_;
    Wl._$Plugins$_.Touch._$Type$_ = class extends Wl._$SDKTypeBase$_ {
        constructor(t) {
            super(t);
        }
        _$Release$_() {
            super._$Release$_();
        }
        _$OnCreate$_() {}
        _$GetScriptInterfaceClass$_() {
            return self._$ITouchObjectType$_;
        }
    };
    let s = null;
    self._$ITouchObjectType$_ = class extends self._$IObjectClass$_ {
        constructor(t) {
            super(t), (s = t)._$GetRuntime$_()._$_GetCommonScriptInterfaces$_()._$touch$_ = this;
        }
        requestPermission(t) {
            Ql._$RequireString$_(t);
            const s = i();
            if ("orientation" === t) return s._$_RequestPermission$_(0);
            if ("motion" === t) return s._$_RequestPermission$_(1);
            throw new Error("invalid type");
        }
    };
}

{
    const A = self._$C3$_;
    A._$Plugins$_.Touch.Instance = class extends A._$SDKInstanceBase$_ {
        constructor(t, s) {
            super(t, "touch"), this._$_touches$_ = new Map(), this._$_useMouseInput$_ = !1, 
            this._$_isMouseDown$_ = !1, this._$_orientCompassHeading$_ = 0, this._$_orientAlpha$_ = 0, 
            this._$_orientBeta$_ = 0, this._$_orientGamma$_ = 0, this._$_accX$_ = 0, 
            this._$_accY$_ = 0, this._$_accZ$_ = 0, this._$_accWithGX$_ = 0, this._$_accWithGY$_ = 0, 
            this._$_accWithGZ$_ = 0, this._$_triggerIndex$_ = 0, this._$_triggerId$_ = 0, 
            this._$_triggerPermission$_ = 0, this._$_curTouchX$_ = 0, this._$_curTouchY$_ = 0, 
            this._$_getTouchIndex$_ = 0, this._$_triggerType$_ = 0, this._$_permissionPromises$_ = [], 
            s && (this._$_useMouseInput$_ = s[0]), this._$AddDOMMessageHandler$_("permission-result", t => this._$_OnPermissionResult$_(t));
            const i = this._$GetRuntime$_()._$Dispatcher$_();
            this._$_disposables$_ = new A._$CompositeDisposable$_(A._$Disposable$_._$From$_(i, "pointerdown", t => this._$_OnPointerDown$_(t.data)), A._$Disposable$_._$From$_(i, "pointermove", t => this._$_OnPointerMove$_(t.data)), A._$Disposable$_._$From$_(i, "pointerup", t => this._$_OnPointerUp$_(t.data, !1)), A._$Disposable$_._$From$_(i, "pointercancel", t => this._$_OnPointerUp$_(t.data, !0)), A._$Disposable$_._$From$_(i, "deviceorientation", t => this._$_OnDeviceOrientation$_(t.data)), A._$Disposable$_._$From$_(i, "deviceorientationabsolute", t => this._$_OnDeviceOrientationAbsolute$_(t.data)), A._$Disposable$_._$From$_(i, "devicemotion", t => this._$_OnDeviceMotion$_(t.data)), A._$Disposable$_._$From$_(i, "tick2", t => this._$_OnTick2$_()));
        }
        _$Release$_() {
            this._$_touches$_.clear(), super._$Release$_();
        }
        _$_OnPointerDown$_(t) {
            if ("mouse" === t.pointerType) {
                if (!this._$_useMouseInput$_) return;
                this._$_isMouseDown$_ = !0;
            }
            const s = t.pointerId;
            if (!this._$_touches$_.has(s)) {
                const i = t.pageX - this._$_runtime$_._$GetCanvasClientX$_(), e = t.pageY - this._$_runtime$_._$GetCanvasClientY$_(), n = performance.now(), h = this._$_touches$_.size, r = (this._$_triggerIndex$_ = h, 
                this._$_triggerId$_ = s, A._$New$_(A._$Plugins$_.Touch._$TouchInfo$_));
                r._$Init$_(n, i, e, s, h), this._$_touches$_.set(s, r), this._$Trigger$_(A._$Plugins$_.Touch._$Cnds$_._$OnNthTouchStart$_), 
                this._$Trigger$_(A._$Plugins$_.Touch._$Cnds$_._$OnTouchStart$_), 
                this._$_curTouchX$_ = i, this._$_curTouchY$_ = e, this._$_triggerType$_ = 0, 
                this._$Trigger$_(A._$Plugins$_.Touch._$Cnds$_._$OnTouchObject$_);
            }
        }
        _$_OnPointerMove$_(t) {
            if ("mouse" !== t.pointerType || this._$_isMouseDown$_) {
                const s = this._$_touches$_.get(t.pointerId);
                if (s) {
                    const i = performance.now();
                    if (!(i - s._$GetTime$_() < 2)) {
                        const e = t.pageX - this._$_runtime$_._$GetCanvasClientX$_(), n = t.pageY - this._$_runtime$_._$GetCanvasClientY$_();
                        s._$Update$_(i, e, n, t.width, t.height, t.pressure);
                    }
                }
            }
        }
        _$_OnPointerUp$_(t, s) {
            if ("mouse" === t.pointerType) {
                if (!this._$_isMouseDown$_) return;
                this._$_isMouseDown$_ = !1;
            }
            const i = performance.now(), e = t.pointerId, n = this._$_touches$_.get(e);
            if (n) {
                if (this._$_triggerIndex$_ = n._$GetStartIndex$_(), this._$_triggerId$_ = n._$GetId$_(), 
                !s) {
                    const h = t.pageX - this._$_runtime$_._$GetCanvasClientX$_(), r = t.pageY - this._$_runtime$_._$GetCanvasClientY$_();
                    this._$_curTouchX$_ = h, this._$_curTouchY$_ = r, this._$_triggerType$_ = 1, 
                    this._$Trigger$_(A._$Plugins$_.Touch._$Cnds$_._$OnTouchObject$_);
                }
                if (this._$Trigger$_(A._$Plugins$_.Touch._$Cnds$_._$OnNthTouchEnd$_), 
                this._$Trigger$_(A._$Plugins$_.Touch._$Cnds$_._$OnTouchEnd$_), !s) {
                    const o = n._$ShouldTriggerTap$_(i);
                    "single-tap" === o ? (this._$Trigger$_(A._$Plugins$_.Touch._$Cnds$_._$OnTapGesture$_), 
                    this._$_curTouchX$_ = n._$GetX$_(), this._$_curTouchY$_ = n._$GetY$_(), 
                    this._$Trigger$_(A._$Plugins$_.Touch._$Cnds$_._$OnTapGestureObject$_)) : "double-tap" === o && (this._$Trigger$_(A._$Plugins$_.Touch._$Cnds$_._$OnDoubleTapGesture$_), 
                    this._$_curTouchX$_ = n._$GetX$_(), this._$_curTouchY$_ = n._$GetY$_(), 
                    this._$Trigger$_(A._$Plugins$_.Touch._$Cnds$_._$OnDoubleTapGestureObject$_));
                }
                n._$Release$_(), this._$_touches$_.delete(e);
            }
        }
        _$_RequestPermission$_(i) {
            return this._$_PostToDOMMaybeSync$_("request-permission", {
                type: i
            }), new Promise((t, s) => {
                this._$_permissionPromises$_.push({
                    type: i,
                    resolve: t,
                    reject: s
                });
            });
        }
        _$_OnPermissionResult$_(t) {
            const s = t.result, i = t.type, e = (this._$_triggerPermission$_ = i, 
            this._$_permissionPromises$_.filter(t => t.type === i));
            for (const n of e) n.resolve(s ? "granted" : "denied");
            this._$_permissionPromises$_ = this._$_permissionPromises$_.filter(t => t.type !== i), 
            s ? (this._$Trigger$_(A._$Plugins$_.Touch._$Cnds$_._$OnPermissionGranted$_), 
            0 === i ? this._$_runtime$_._$RequestDeviceOrientationEvent$_() : this._$_runtime$_._$RequestDeviceMotionEvent$_()) : this._$Trigger$_(A._$Plugins$_.Touch._$Cnds$_._$OnPermissionDenied$_);
        }
        _$_OnDeviceOrientation$_(t) {
            "number" == typeof t.webkitCompassHeading ? this._$_orientCompassHeading$_ = t.webkitCompassHeading : t.absolute && (this._$_orientCompassHeading$_ = t.alpha), 
            this._$_orientAlpha$_ = t.alpha, this._$_orientBeta$_ = t.beta, this._$_orientGamma$_ = t.gamma;
        }
        _$_OnDeviceOrientationAbsolute$_(t) {
            this._$_orientCompassHeading$_ = t.alpha;
        }
        _$_OnDeviceMotion$_(t) {
            const s = t.acceleration, i = (s && (this._$_accX$_ = s.x, this._$_accY$_ = s.y, 
            this._$_accZ$_ = s.z), t.accelerationIncludingGravity);
            i && (this._$_accWithGX$_ = i.x, this._$_accWithGY$_ = i.y, this._$_accWithGZ$_ = i.z);
        }
        _$_OnTick2$_() {
            let t = performance.now(), s = 0;
            for (const i of this._$_touches$_.values()) i._$GetTime$_() <= t - 50 && i._$_SetLastTime$_(t), 
            i._$ShouldTriggerHold$_(t) && (this._$_triggerIndex$_ = i._$GetStartIndex$_(), 
            this._$_triggerId$_ = i._$GetId$_(), this._$_getTouchIndex$_ = s, this._$Trigger$_(A._$Plugins$_.Touch._$Cnds$_._$OnHoldGesture$_), 
            this._$_curTouchX$_ = i._$GetX$_(), this._$_curTouchY$_ = i._$GetY$_(), 
            this._$Trigger$_(A._$Plugins$_.Touch._$Cnds$_._$OnHoldGestureObject$_), 
            this._$_getTouchIndex$_ = 0), ++s;
        }
        _$_GetTouchByIndex$_(t) {
            t = Math.floor(t);
            for (const s of this._$_touches$_.values()) {
                if (0 === t) return s;
                --t;
            }
            return null;
        }
        _$_IsClientPosOnCanvas$_(t, s) {
            return 0 <= t && 0 <= s && t < this._$_runtime$_._$GetCanvasCssWidth$_() && s < this._$_runtime$_._$GetCanvasCssHeight$_();
        }
        _$GetDebuggerProperties$_() {
            return [ {
                title: "plugins.touch.debugger.touches",
                properties: [ ...this._$_touches$_.values() ].map(t => ({
                    name: "$" + t._$GetId$_(),
                    value: t._$GetX$_() + ", " + t._$GetY$_()
                }))
            } ];
        }
    };
}

{
    const Vl = self._$C3$_;
    Vl._$Plugins$_.Touch._$Cnds$_ = {
        _$OnTouchStart$_() {
            return !0;
        },
        _$OnTouchEnd$_() {
            return !0;
        },
        _$IsInTouch$_() {
            return 0 < this._$_touches$_.size;
        },
        _$OnTouchObject$_(t, s) {
            return !!t && s === this._$_triggerType$_ && !!this._$_IsClientPosOnCanvas$_(this._$_curTouchX$_, this._$_curTouchY$_) && this._$_runtime$_._$GetCollisionEngine$_()._$TestAndSelectCanvasPointOverlap$_(t, [ [ this._$_curTouchX$_, this._$_curTouchY$_ ] ], !1);
        },
        _$IsTouchingObject$_(t) {
            if (!t) return !1;
            const s = this._$_runtime$_._$GetCurrentCondition$_(), i = s._$IsInverted$_(), e = [ ...this._$_touches$_.values() ].filter(t => this._$_IsClientPosOnCanvas$_(t._$GetX$_(), t._$GetY$_())).map(t => [ t._$GetX$_(), t._$GetY$_() ]);
            return Vl.xor(this._$_runtime$_._$GetCollisionEngine$_()._$TestAndSelectCanvasPointOverlap$_(t, e, i), i);
        },
        _$CompareTouchSpeed$_(t, s, i) {
            const e = this._$_GetTouchByIndex$_(t);
            return !!e && Vl.compare(e._$GetSpeed$_(), s, i);
        },
        _$OrientationSupported$_() {
            return !0;
        },
        _$MotionSupported$_() {
            return !0;
        },
        _$CompareOrientation$_(t, s, i) {
            this._$_runtime$_._$RequestDeviceOrientationEvent$_();
            let e;
            return e = 0 === t ? this._$_orientAlpha$_ : 1 === t ? this._$_orientBeta$_ : this._$_orientGamma$_, 
            Vl.compare(e, s, i);
        },
        _$CompareAcceleration$_(t, s, i) {
            this._$_runtime$_._$RequestDeviceMotionEvent$_();
            let e;
            return e = 0 === t ? this._$_accWithGX$_ : 1 === t ? this._$_accWithGY$_ : 2 === t ? this._$_accWithGZ$_ : 3 === t ? this._$_accX$_ : 4 === t ? this._$_accY$_ : this._$_accZ$_, 
            Vl.compare(e, s, i);
        },
        _$OnNthTouchStart$_(t) {
            return (t = Math.floor(t)) === this._$_triggerIndex$_;
        },
        _$OnNthTouchEnd$_(t) {
            return (t = Math.floor(t)) === this._$_triggerIndex$_;
        },
        _$HasNthTouch$_(t) {
            return t = Math.floor(t), this._$_touches$_.size >= t + 1;
        },
        _$OnHoldGesture$_() {
            return !0;
        },
        _$OnTapGesture$_() {
            return !0;
        },
        _$OnDoubleTapGesture$_() {
            return !0;
        },
        _$OnHoldGestureObject$_(t) {
            return !!t && !!this._$_IsClientPosOnCanvas$_(this._$_curTouchX$_, this._$_curTouchY$_) && this._$_runtime$_._$GetCollisionEngine$_()._$TestAndSelectCanvasPointOverlap$_(t, [ [ this._$_curTouchX$_, this._$_curTouchY$_ ] ], !1);
        },
        _$OnTapGestureObject$_(t) {
            return !!t && !!this._$_IsClientPosOnCanvas$_(this._$_curTouchX$_, this._$_curTouchY$_) && this._$_runtime$_._$GetCollisionEngine$_()._$TestAndSelectCanvasPointOverlap$_(t, [ [ this._$_curTouchX$_, this._$_curTouchY$_ ] ], !1);
        },
        _$OnDoubleTapGestureObject$_(t) {
            return !!t && !!this._$_IsClientPosOnCanvas$_(this._$_curTouchX$_, this._$_curTouchY$_) && this._$_runtime$_._$GetCollisionEngine$_()._$TestAndSelectCanvasPointOverlap$_(t, [ [ this._$_curTouchX$_, this._$_curTouchY$_ ] ], !1);
        },
        _$OnPermissionGranted$_(t) {
            return this._$_triggerPermission$_ === t;
        },
        _$OnPermissionDenied$_(t) {
            return this._$_triggerPermission$_ === t;
        }
    };
}

{
    const Jl = self._$C3$_;
    Jl._$Plugins$_.Touch._$Acts$_ = {
        _$RequestPermission$_(t) {
            this._$_RequestPermission$_(t);
        }
    };
}

{
    const Yl = self._$C3$_;
    Yl._$Plugins$_.Touch._$Exps$_ = {
        _$TouchCount$_() {
            return this._$_touches$_.size;
        },
        _$X$_(t) {
            const s = this._$_GetTouchByIndex$_(this._$_getTouchIndex$_);
            return s ? s._$GetPositionForLayer$_(this._$_runtime$_._$GetCurrentLayout$_(), t, !0) : 0;
        },
        _$Y$_(t) {
            const s = this._$_GetTouchByIndex$_(this._$_getTouchIndex$_);
            return s ? s._$GetPositionForLayer$_(this._$_runtime$_._$GetCurrentLayout$_(), t, !1) : 0;
        },
        _$XAt$_(t, s) {
            const i = this._$_GetTouchByIndex$_(t);
            return i ? i._$GetPositionForLayer$_(this._$_runtime$_._$GetCurrentLayout$_(), s, !0) : 0;
        },
        _$YAt$_(t, s) {
            const i = this._$_GetTouchByIndex$_(t);
            return i ? i._$GetPositionForLayer$_(this._$_runtime$_._$GetCurrentLayout$_(), s, !1) : 0;
        },
        _$XForID$_(t, s) {
            const i = this._$_touches$_.get(t);
            return i ? i._$GetPositionForLayer$_(this._$_runtime$_._$GetCurrentLayout$_(), s, !0) : 0;
        },
        _$YForID$_(t, s) {
            const i = this._$_touches$_.get(t);
            return i ? i._$GetPositionForLayer$_(this._$_runtime$_._$GetCurrentLayout$_(), s, !1) : 0;
        },
        _$AbsoluteX$_() {
            const t = this._$_GetTouchByIndex$_(0);
            return t ? t._$GetX$_() : 0;
        },
        _$AbsoluteY$_() {
            const t = this._$_GetTouchByIndex$_(0);
            return t ? t._$GetY$_() : 0;
        },
        _$AbsoluteXAt$_(t) {
            const s = this._$_GetTouchByIndex$_(t);
            return s ? s._$GetX$_() : 0;
        },
        _$AbsoluteYAt$_(t) {
            const s = this._$_GetTouchByIndex$_(t);
            return s ? s._$GetY$_() : 0;
        },
        _$AbsoluteXForID$_(t) {
            const s = this._$_touches$_.get(t);
            return s ? s._$GetX$_() : 0;
        },
        _$AbsoluteYForID$_(t) {
            const s = this._$_touches$_.get(t);
            return s ? s._$GetY$_() : 0;
        },
        _$SpeedAt$_(t) {
            const s = this._$_GetTouchByIndex$_(t);
            return s ? s._$GetSpeed$_() : 0;
        },
        _$SpeedForID$_(t) {
            const s = this._$_touches$_.get(t);
            return s ? s._$GetSpeed$_() : 0;
        },
        _$AngleAt$_(t) {
            const s = this._$_GetTouchByIndex$_(t);
            return s ? Yl._$toDegrees$_(s._$GetAngle$_()) : 0;
        },
        _$AngleForID$_(t) {
            const s = this._$_touches$_.get(t);
            return s ? Yl._$toDegrees$_(s._$GetAngle$_()) : 0;
        },
        _$CompassHeading$_() {
            return this._$_runtime$_._$RequestDeviceOrientationEvent$_(), this._$_orientCompassHeading$_;
        },
        _$Alpha$_() {
            return this._$_runtime$_._$RequestDeviceOrientationEvent$_(), this._$_orientAlpha$_;
        },
        _$Beta$_() {
            return this._$_runtime$_._$RequestDeviceOrientationEvent$_(), this._$_orientBeta$_;
        },
        _$Gamma$_() {
            return this._$_runtime$_._$RequestDeviceOrientationEvent$_(), this._$_orientGamma$_;
        },
        _$AccelerationXWithG$_() {
            return this._$_runtime$_._$RequestDeviceMotionEvent$_(), this._$_accWithGX$_;
        },
        _$AccelerationYWithG$_() {
            return this._$_runtime$_._$RequestDeviceMotionEvent$_(), this._$_accWithGY$_;
        },
        _$AccelerationZWithG$_() {
            return this._$_runtime$_._$RequestDeviceMotionEvent$_(), this._$_accWithGZ$_;
        },
        _$AccelerationX$_() {
            return this._$_runtime$_._$RequestDeviceMotionEvent$_(), this._$_accX$_;
        },
        _$AccelerationY$_() {
            return this._$_runtime$_._$RequestDeviceMotionEvent$_(), this._$_accY$_;
        },
        _$AccelerationZ$_() {
            return this._$_runtime$_._$RequestDeviceMotionEvent$_(), this._$_accZ$_;
        },
        _$TouchIndex$_() {
            return this._$_triggerIndex$_;
        },
        _$TouchID$_() {
            return this._$_triggerId$_;
        },
        _$WidthForID$_(t) {
            const s = this._$_touches$_.get(t);
            return s ? s._$GetWidth$_() : 0;
        },
        _$HeightForID$_(t) {
            const s = this._$_touches$_.get(t);
            return s ? s._$GetHeight$_() : 0;
        },
        _$PressureForID$_(t) {
            const s = this._$_touches$_.get(t);
            return s ? s._$GetPressure$_() : 0;
        }
    };
}

{
    let r = self._$C3$_, s = -1e3, i = -1e3, e = -1e4;
    r._$Plugins$_.Touch._$TouchInfo$_ = class extends r._$DefendedBase$_ {
        constructor() {
            super(), this._$_pointerId$_ = 0, this._$_startIndex$_ = 0, this._$_startTime$_ = 0, 
            this._$_time$_ = 0, this._$_lastTime$_ = 0, this._$_startX$_ = 0, this._$_startY$_ = 0, 
            this._$_x$_ = 0, this._$_y$_ = 0, this._$_lastX$_ = 0, this._$_lastY$_ = 0, 
            this._$_width$_ = 0, this._$_height$_ = 0, this._$_pressure$_ = 0, this._$_hasTriggeredHold$_ = !1, 
            this._$_isTooFarForHold$_ = !1;
        }
        _$Release$_() {}
        _$Init$_(t, s, i, e, n) {
            this._$_pointerId$_ = e, this._$_startIndex$_ = n, this._$_time$_ = t, 
            this._$_lastTime$_ = t, this._$_startTime$_ = t, this._$_startX$_ = s, 
            this._$_startY$_ = i, this._$_x$_ = s, this._$_y$_ = i, this._$_lastX$_ = s, 
            this._$_lastY$_ = i;
        }
        _$Update$_(t, s, i, e, n, h) {
            this._$_lastTime$_ = this._$_time$_, this._$_time$_ = t, this._$_lastX$_ = this._$_x$_, 
            this._$_lastY$_ = this._$_y$_, this._$_x$_ = s, this._$_y$_ = i, this._$_width$_ = e, 
            this._$_height$_ = n, this._$_pressure$_ = h, !this._$_isTooFarForHold$_ && 15 <= r._$distanceTo$_(this._$_startX$_, this._$_startY$_, this._$_x$_, this._$_y$_) && (this._$_isTooFarForHold$_ = !0);
        }
        _$GetId$_() {
            return this._$_pointerId$_;
        }
        _$GetStartIndex$_() {
            return this._$_startIndex$_;
        }
        _$GetTime$_() {
            return this._$_time$_;
        }
        _$_SetLastTime$_(t) {
            this._$_lastTime$_ = t;
        }
        _$GetX$_() {
            return this._$_x$_;
        }
        _$GetY$_() {
            return this._$_y$_;
        }
        _$GetSpeed$_() {
            const t = r._$distanceTo$_(this._$_x$_, this._$_y$_, this._$_lastX$_, this._$_lastY$_), s = (this._$_time$_ - this._$_lastTime$_) / 1e3;
            return 0 < s ? t / s : 0;
        }
        _$GetAngle$_() {
            return r._$angleTo$_(this._$_lastX$_, this._$_lastY$_, this._$_x$_, this._$_y$_);
        }
        _$GetWidth$_() {
            return this._$_width$_;
        }
        _$GetHeight$_() {
            return this._$_height$_;
        }
        _$GetPressure$_() {
            return this._$_pressure$_;
        }
        _$ShouldTriggerHold$_(t) {
            return !this._$_hasTriggeredHold$_ && 500 <= t - this._$_startTime$_ && !this._$_isTooFarForHold$_ && r._$distanceTo$_(this._$_startX$_, this._$_startY$_, this._$_x$_, this._$_y$_) < 15 && (this._$_hasTriggeredHold$_ = !0);
        }
        _$ShouldTriggerTap$_(t) {
            return !this._$_hasTriggeredHold$_ && t - this._$_startTime$_ <= 333 && !this._$_isTooFarForHold$_ && r._$distanceTo$_(this._$_startX$_, this._$_startY$_, this._$_x$_, this._$_y$_) < 15 ? t - e <= 666 && r._$distanceTo$_(s, i, this._$_x$_, this._$_y$_) < 25 ? (s = -1e3, 
            i = -1e3, e = -1e4, "double-tap") : (s = this._$_x$_, i = this._$_y$_, 
            e = t, "single-tap") : "";
        }
        _$GetPositionForLayer$_(t, s, i) {
            if (void 0 === s) {
                const e = t._$GetLayerByIndex$_(0);
                return e._$CanvasCssToLayer_DefaultTransform$_(this._$_x$_, this._$_y$_)[i ? 0 : 1];
            }
            {
                const n = t._$GetLayer$_(s);
                return n ? n._$CanvasCssToLayer$_(this._$_x$_, this._$_y$_)[i ? 0 : 1] : 0;
            }
        }
    };
}

{
    const Hl = self._$C3$_, ql = [];
    Hl._$Plugins$_.Audio = class extends Hl._$SDKPluginBase$_ {
        constructor(t) {
            super(t);
        }
        _$_AddActionPromise$_(t) {
            ql.push(t);
        }
        static async _$WaitForAllActionPromises$_() {
            await Promise.all(ql), Hl._$clearArray$_(ql);
        }
        _$Release$_() {
            super._$Release$_();
        }
    };
}

{
    let s = function() {
        return i._$GetSingleGlobalInstance$_()._$GetSdkInstance$_();
    }, t = function() {
        if (self.C3Audio_DOMInterface) return self.C3Audio_DOMInterface;
        throw new Error("audio scripting API cannot be used here - make sure the project is using DOM mode, not worker mode");
    };
    s, t;
    const Zl = self._$C3$_, Xl = self._$C3X$_;
    Zl._$Plugins$_.Audio._$Type$_ = class extends Zl._$SDKTypeBase$_ {
        constructor(t) {
            super(t);
        }
        _$Release$_() {
            super._$Release$_();
        }
        _$OnCreate$_() {}
        _$GetScriptInterfaceClass$_() {
            return self._$IAudioObjectType$_;
        }
    };
    let i = null;
    self._$IAudioObjectType$_ = class extends self._$IObjectClass$_ {
        constructor(t) {
            super(t), i = t;
        }
        get _$audioContext$_() {
            return t().GetAudioContextExtern();
        }
        get _$destinationNode$_() {
            return t().GetDestinationNodeExtern();
        }
        get isSilent() {
            return s()._$_IsSilent$_();
        }
        set isSilent(t) {
            s()._$_SetSilent$_(t);
        }
        get masterVolume() {
            return s()._$_GetMasterVolume$_();
        }
        set masterVolume(t) {
            Xl._$RequireFiniteNumber$_(t), s()._$_SetMasterVolume$_(t);
        }
        _$stopAll$_() {
            s()._$_StopAll$_();
        }
    };
}

{
    const Kl = self._$C3$_, $l = [ "interactive", "balanced", "playback" ];
    Kl._$Plugins$_.Audio.Instance = class extends Kl._$SDKInstanceBase$_ {
        constructor(t, s) {
            super(t, "audio"), this._$_nextPlayTime$_ = 0, this._$_triggerTags$_ = [], 
            this._$_enableMultiTags$_ = !0, this._$_timeScaleMode$_ = 0, this._$_saveLoadMode$_ = 0, 
            this._$_playInBackground$_ = !1, this._$_panningModel$_ = 1, this._$_distanceModel$_ = 1, 
            this._$_listenerPos$_ = [ this._$_runtime$_._$GetViewportWidth$_() / 2, this._$_runtime$_._$GetViewportHeight$_() / 2, 600 ], 
            this._$_listenerForwardVec$_ = [ 0, 0, -1 ], this._$_listenerUpVec$_ = [ 0, 1, 0 ], 
            this._$_referenceDistance$_ = 600, this._$_maxDistance$_ = 1e4, this._$_rolloffFactor$_ = 1, 
            this._$_listenerInst$_ = null, this._$_loadListenerUid$_ = -1, this._$_masterVolume$_ = 1, 
            this._$_isSilent$_ = !1, this._$_sampleRate$_ = 0, this._$_audioContextState$_ = "suspended", 
            this._$_outputLatency$_ = 0, this._$_effectCount$_ = new Map(), this._$_preloadTotal$_ = 0, 
            this._$_preloadCount$_ = 0, this._$_bufferMetadata$_ = new Map(), this._$_remoteUrls$_ = new Map();
            let i = "interactive";
            s && (this._$_timeScaleMode$_ = s[0], this._$_saveLoadMode$_ = s[1], 
            this._$_playInBackground$_ = s[2], i = $l[s[3]], this._$_enableMultiTags$_ = s[4], 
            this._$_panningModel$_ = s[5], this._$_distanceModel$_ = s[6], this._$_listenerPos$_[2] = s[7], 
            this._$_referenceDistance$_ = s[8], this._$_maxDistance$_ = s[9], this._$_rolloffFactor$_ = s[10]), 
            this._$_lastAIState$_ = [], this._$_lastFxState$_ = [], this._$_lastAnalysersData$_ = [], 
            this._$AddDOMMessageHandlers$_([ [ "state", t => this._$_OnUpdateState$_(t) ], [ "audiocontext-state", t => this._$_OnAudioContextStateChanged$_(t) ], [ "fxstate", t => this._$_OnUpdateFxState$_(t) ], [ "trigger", t => this._$_OnTrigger$_(t) ], [ "buffer-metadata", t => this._$_OnBufferMetadata$_(t) ] ]);
            const e = this._$GetRuntime$_()._$Dispatcher$_(), n = (this._$_disposables$_ = new Kl._$CompositeDisposable$_(Kl._$Disposable$_._$From$_(e, "instancedestroy", t => this._$_OnInstanceDestroyed$_(t._$instance$_)), Kl._$Disposable$_._$From$_(e, "afterload", () => this._$_OnAfterLoad$_()), Kl._$Disposable$_._$From$_(e, "suspend", () => this._$_OnSuspend$_()), Kl._$Disposable$_._$From$_(e, "resume", () => this._$_OnResume$_())), 
            this._$_runtime$_._$GetExportType$_()), h = "Safari" === Kl._$Platform$_._$Browser$_, r = this._$_runtime$_._$IsiOSWebView$_() || "macos-wkwebview" === n, o = this._$_runtime$_._$GetAssetManager$_()._$IsFileProtocol$_(), a = "playable-ad-single-file" === this._$_runtime$_._$GetExportType$_(), l = h || r || o || a;
            this._$_runtime$_._$AddLoadPromise$_(this._$PostToDOMAsync$_("create-audio-context", {
                preloadList: this._$_runtime$_._$GetAssetManager$_()._$GetAudioToPreload$_().map(t => ({
                    originalUrl: t.originalUrl,
                    url: t.url,
                    type: t.type,
                    fileSize: t.fileSize
                })),
                timeScaleMode: this._$_timeScaleMode$_,
                latencyHint: i,
                panningModel: this._$_panningModel$_,
                distanceModel: this._$_distanceModel$_,
                refDistance: this._$_referenceDistance$_,
                maxDistance: this._$_maxDistance$_,
                rolloffFactor: this._$_rolloffFactor$_,
                listenerPos: this._$_listenerPos$_,
                usePlayMusicAsSoundWorkaround: l
            }).then(t => {
                this._$_sampleRate$_ = t.sampleRate, this._$_audioContextState$_ = t.audioContextState, 
                this._$_outputLatency$_ = t.outputLatency;
            })), this._$_StartTicking$_();
        }
        _$Release$_() {
            this._$_listenerInst$_ = null, super._$Release$_();
        }
        _$_SplitTags$_(t) {
            return this._$_enableMultiTags$_ ? t.split(" ").filter(t => !!t) : t ? [ t ] : [];
        }
        _$_MatchTagLists$_(s, t) {
            for (const i of t) {
                let t = !1;
                for (const e of s) if (Kl._$equalsNoCase$_(e, i)) {
                    t = !0;
                    break;
                }
                if (!t) return !1;
            }
            return !0;
        }
        _$_MatchTagListToStr$_(t, s) {
            return this._$_MatchTagLists$_(t, this._$_SplitTags$_(s));
        }
        _$_AddActionPromise$_(t) {
            this._$GetPlugin$_()._$_AddActionPromise$_(t);
        }
        _$_OnInstanceDestroyed$_(t) {
            this._$_listenerInst$_ === t && (this._$_listenerInst$_ = null);
        }
        _$DbToLinearNoCap$_(t) {
            return Math.pow(10, t / 20);
        }
        _$DbToLinear$_(t) {
            const s = this._$DbToLinearNoCap$_(t);
            return isFinite(s) ? Math.max(Math.min(s, 1), 0) : 0;
        }
        _$LinearToDbNoCap$_(t) {
            return Math.log(t) / Math.log(10) * 20;
        }
        _$LinearToDb$_(t) {
            return this._$LinearToDbNoCap$_(Math.max(Math.min(t, 1), 0));
        }
        _$_OnSuspend$_() {
            this._$_playInBackground$_ || this._$PostToDOM$_("set-suspended", {
                isSuspended: !0
            });
        }
        _$_OnResume$_() {
            this._$_playInBackground$_ || this._$PostToDOM$_("set-suspended", {
                isSuspended: !1
            });
        }
        _$_OnUpdateState$_(t) {
            const s = t.tickCount, i = (this._$_outputLatency$_ = t.outputLatency, 
            this._$_lastAIState$_.filter(t => t.hasOwnProperty("placeholder") && (t.placeholder > s || -1 === t.placeholder)));
            this._$_lastAIState$_ = t.audioInstances, this._$_lastAnalysersData$_ = t.analysers, 
            0 < i.length && Kl._$appendArray$_(this._$_lastAIState$_, i);
        }
        _$_OnBufferMetadata$_(t) {
            this._$_bufferMetadata$_.set(t.originalUrl, {
                duration: t.duration
            });
        }
        _$_OnAudioContextStateChanged$_(t) {
            this._$_audioContextState$_ = t.audioContextState;
        }
        _$GetAudioContextState$_() {
            return this._$_runtime$_._$IsExportToVideo$_() ? "running" : this._$_audioContextState$_;
        }
        _$_OnUpdateFxState$_(t) {
            this._$_lastFxState$_ = t.fxstate;
        }
        _$_GetFirstAudioStateByTags$_(t) {
            const s = this._$_SplitTags$_(t);
            for (const i of this._$_lastAIState$_) if (this._$_MatchTagLists$_(i.tags, s)) return i;
            return null;
        }
        _$_IsTagPlaying$_(t) {
            const s = this._$_SplitTags$_(t);
            return this._$_lastAIState$_.some(t => this._$_MatchTagLists$_(t.tags, s) && t.isPlaying);
        }
        _$_MaybeMarkAsPlaying$_(t, s, i, e, n) {
            if (this._$_IsTagPlaying$_(s)) return null;
            const h = this._$_bufferMetadata$_.get(t), r = {
                tags: this._$_SplitTags$_(s),
                duration: h ? h.duration : 0,
                volume: n,
                isPlaying: !0,
                playbackTime: 0,
                playbackRate: 1,
                uid: -1,
                bufferOriginalUrl: t,
                bufferUrl: "",
                bufferType: "",
                isMusic: i,
                isLooping: e,
                isMuted: !1,
                resumePosition: 0,
                pan: null,
                placeholder: -1
            };
            return this._$_lastAIState$_.push(r), r;
        }
        _$_MaybeMarkAsStopped$_(t) {
            const s = this._$_SplitTags$_(t);
            for (const i of this._$_lastAIState$_) this._$_MatchTagLists$_(i.tags, s) && (i.isPlaying = !1);
        }
        async _$_OnTrigger$_(t) {
            const s = t.type, i = (this._$_triggerTags$_ = t.tags, t.aiid);
            if ("ended" === s) {
                for (const e of this._$_lastAIState$_) if (e.aiid === i) {
                    e.isPlaying = !1;
                    break;
                }
                await this._$TriggerAsync$_(Kl._$Plugins$_.Audio._$Cnds$_._$OnEnded$_);
            } else "fade-ended" === s && await this._$TriggerAsync$_(Kl._$Plugins$_.Audio._$Cnds$_._$OnFadeEnded$_);
        }
        _$_MatchTriggerTag$_(t) {
            return this._$_MatchTagListToStr$_(this._$_triggerTags$_, t);
        }
        _$Tick$_() {
            const t = {
                timeScale: this._$_runtime$_._$GetTimeScale$_(),
                gameTime: this._$_runtime$_._$GetGameTimeRaw$_(),
                instPans: this._$GetInstancePans$_(),
                tickCount: this._$_runtime$_._$GetTickCountNoSave$_()
            };
            if (this._$_listenerInst$_) {
                const s = this._$_listenerInst$_._$GetWorldInfo$_();
                this._$_listenerPos$_[0] = s._$GetX$_(), this._$_listenerPos$_[1] = s._$GetY$_(), 
                t.listenerPos = this._$_listenerPos$_, t.listenerOrientation = [ ...this._$_listenerForwardVec$_, ...this._$_listenerUpVec$_ ];
            }
            this._$PostToDOM$_("tick", t);
        }
        _$rotatePtAround$_(t, s, i, e, n) {
            if (0 !== i) {
                const h = Math.sin(i), r = Math.cos(i), o = (t -= e) * h, a = (s -= n) * h, l = t * r, u = s * r;
                t = l - a, s = u + o, t += e, s += n;
            }
            return [ t, s ];
        }
        _$GetInstancePans$_() {
            return this._$_lastAIState$_.filter(t => -1 !== t.uid).map(t => this._$_runtime$_._$GetInstanceByUID$_(t.uid)).filter(t => t).map(t => {
                const s = t._$GetWorldInfo$_(), i = s._$GetLayer$_()._$GetAngle$_(), [ e, n ] = this._$rotatePtAround$_(s._$GetX$_(), s._$GetY$_(), -i, this._$_listenerPos$_[0], this._$_listenerPos$_[1]);
                return {
                    uid: t._$GetUID$_(),
                    x: e,
                    y: n,
                    z: s._$GetTotalZElevation$_(),
                    angle: s._$GetAngle$_() - i
                };
            });
        }
        _$GetAnalyserData$_(t, s) {
            for (const i of this._$_lastAnalysersData$_) if (i.index === s && Kl._$equalsNoCase$_(i.tag, t)) return i;
            return null;
        }
        _$_IncrementEffectCount$_(t) {
            for (const s of this._$_SplitTags$_(t)) {
                const i = s.toLowerCase();
                this._$_effectCount$_.set(i, (this._$_effectCount$_.get(i) || 0) + 1);
            }
        }
        _$_IsSilent$_() {
            return this._$_isSilent$_;
        }
        _$_SetSilent$_(t) {
            this._$_isSilent$_ !== (t = !!t) && (this._$_isSilent$_ = t, this._$PostToDOM$_("set-silent", {
                isSilent: t
            }));
        }
        _$_GetMasterVolume$_() {
            return this._$_masterVolume$_;
        }
        _$_SetMasterVolume$_(t) {
            this._$_masterVolume$_ !== t && (this._$_masterVolume$_ = t, this._$PostToDOM$_("set-master-volume", {
                vol: t
            }));
        }
        _$_StopAll$_() {
            this._$PostToDOM$_("stop-all");
            for (const t of this._$_lastAIState$_) t.isPlaying = !1;
        }
        _$_ShouldSave$_(t) {
            return !t.hasOwnProperty("placeholder") && 3 !== this._$_saveLoadMode$_ && !(t.isMusic && 1 === this._$_saveLoadMode$_ || !t.isMusic && 2 === this._$_saveLoadMode$_);
        }
        _$SaveToJson$_() {
            return {
                isSilent: this._$_isSilent$_,
                masterVolume: this._$_masterVolume$_,
                listenerZ: this._$_listenerPos$_[2],
                listenerForwardVec: this._$_listenerForwardVec$_,
                listenerUpVec: this._$_listenerUpVec$_,
                listenerUid: this._$_listenerInst$_ ? this._$_listenerInst$_._$GetUID$_() : -1,
                remoteUrls: [ ...this._$_remoteUrls$_.entries() ],
                playing: this._$_lastAIState$_.filter(t => this._$_ShouldSave$_(t)),
                effects: this._$_lastFxState$_,
                analysers: this._$_lastAnalysersData$_
            };
        }
        _$LoadFromJson$_(t) {
            if (this._$_isSilent$_ = t.isSilent, this._$_masterVolume$_ = t.masterVolume, 
            this._$_listenerPos$_[2] = t.listenerZ, this._$_listenerInst$_ = null, 
            this._$_loadListenerUid$_ = t.listenerUid, t.hasOwnProperty("listenerForwardVec") ? this._$_listenerForwardVec$_ = t.listenerForwardVec : this._$_listenerForwardVec$_ = [ 0, 0, -1 ], 
            t.hasOwnProperty("listenerUpVec") ? this._$_listenerUpVec$_ = t.listenerUpVec : this._$_listenerUpVec$_ = [ 0, 1, 0 ], 
            this._$_remoteUrls$_.clear(), t.remoteUrls) for (const [ s, i ] of t.remoteUrls) this._$_remoteUrls$_.set(s, i);
            this._$_lastAIState$_ = t.playing;
            for (const e of this._$_lastAIState$_) e.hasOwnProperty("tag") && !e.hasOwnProperty("tags") && (e.tags = [ e.tag ].filter(t => !!t));
            this._$_lastFxState$_ = t.effects, this._$_lastAnalysersData$_ = t.analysers;
        }
        _$_OnAfterLoad$_() {
            if (-1 !== this._$_loadListenerUid$_ && (this._$_listenerInst$_ = this._$_runtime$_._$GetInstanceByUID$_(this._$_loadListenerUid$_), 
            this._$_loadListenerUid$_ = -1, this._$_listenerInst$_)) {
                const t = this._$_listenerInst$_._$GetWorldInfo$_();
                this._$_listenerPos$_[0] = t._$GetX$_(), this._$_listenerPos$_[1] = t._$GetY$_();
            }
            for (const s of this._$_lastAIState$_) {
                const i = this._$_runtime$_._$GetAssetManager$_()._$GetProjectAudioFileUrl$_(s.bufferOriginalUrl);
                i ? (s.bufferUrl = i.url, s.bufferType = i.type) : s.bufferUrl = null;
            }
            for (const e of Object.values(this._$_lastFxState$_)) for (const n of e) if (n.hasOwnProperty("bufferOriginalUrl")) {
                const h = this._$_runtime$_._$GetAssetManager$_()._$GetProjectAudioFileUrl$_(n.bufferOriginalUrl);
                h && (n.bufferUrl = h.url, n.bufferType = h.type);
            }
            this._$PostToDOM$_("load-state", {
                saveLoadMode: this._$_saveLoadMode$_,
                timeScale: this._$_runtime$_._$GetTimeScale$_(),
                gameTime: this._$_runtime$_._$GetGameTimeRaw$_(),
                listenerPos: this._$_listenerPos$_,
                listenerOrientation: [ ...this._$_listenerForwardVec$_, ...this._$_listenerUpVec$_ ],
                isSilent: this._$_isSilent$_,
                masterVolume: this._$_masterVolume$_,
                playing: this._$_lastAIState$_.filter(t => null !== t.bufferUrl),
                effects: this._$_lastFxState$_
            });
        }
        _$GetDebuggerProperties$_() {
            const t = [];
            for (const [ i, e ] of Object.entries(this._$_lastFxState$_)) t.push({
                name: "$" + i,
                value: e.map(t => t.type).join(", ")
            });
            const s = "plugins.audio.debugger";
            return [ {
                title: s + ".tag-effects",
                properties: t
            }, {
                title: s + ".currently-playing",
                properties: [ {
                    name: s + ".currently-playing-count",
                    value: this._$_lastAIState$_.length
                }, ...this._$_lastAIState$_.map((t, s) => ({
                    name: "$#" + s,
                    value: `${t.bufferOriginalUrl} ("${t.tags}") ${Math.round(10 * t.playbackTime) / 10} / ` + Math.round(10 * t.duration) / 10
                })) ]
            } ];
        }
    };
}

{
    const tu = self._$C3$_;
    tu._$Plugins$_.Audio._$Cnds$_ = {
        _$OnEnded$_(t) {
            return this._$_MatchTriggerTag$_(t);
        },
        _$OnFadeEnded$_(t) {
            return this._$_MatchTriggerTag$_(t);
        },
        _$PreloadsComplete$_() {
            return this._$_preloadCount$_ === this._$_preloadTotal$_;
        },
        _$AdvancedAudioSupported$_() {
            return !0;
        },
        _$IsSilent$_() {
            return this._$_IsSilent$_();
        },
        _$IsAnyPlaying$_() {
            for (const t of this._$_lastAIState$_) if (t.isPlaying) return !0;
            return !1;
        },
        _$IsTagPlaying$_(t) {
            return this._$_IsTagPlaying$_(t);
        }
    };
}

{
    const L = self._$C3$_, su = [ "lowpass", "highpass", "bandpass", "lowshelf", "highshelf", "peaking", "notch", "allpass" ];
    L._$Plugins$_.Audio._$Acts$_ = {
        Play(t, s, i, e, n) {
            const h = L._$Plugins$_.Audio._$Acts$_._$_DoPlay$_.call(this, t, s, i, e, n);
            return this._$_AddActionPromise$_(h), h;
        },
        _$PlayFromTimeline$_(t, s, i, e) {
            L._$Plugins$_.Audio._$Acts$_._$_DoPlay$_.call(this, t, 0, s, 0, i, e);
        },
        async _$_DoPlay$_(t, s, i, e, n, h) {
            if (!this._$_isSilent$_) {
                const r = t[1], o = this._$_runtime$_._$GetAssetManager$_()._$GetProjectAudioFileUrl$_(t[0]);
                if (o) {
                    const a = this._$_nextPlayTime$_, l = (this._$_nextPlayTime$_ = 0, 
                    this._$_MaybeMarkAsPlaying$_(t[0], n, r, 0 !== s, this._$DbToLinear$_(i)));
                    try {
                        await this._$PostToDOMAsync$_("play", {
                            originalUrl: t[0],
                            url: o.url,
                            type: o.type,
                            isMusic: r,
                            tags: this._$_SplitTags$_(n),
                            isLooping: 0 !== s,
                            vol: this._$DbToLinear$_(i),
                            stereoPan: L._$clamp$_(e / 100, -1, 1),
                            pos: h || 0,
                            off: a,
                            trueClock: !!self.C3_GetAudioContextCurrentTime
                        });
                    } finally {
                        l && (l.placeholder = this._$_runtime$_._$GetTickCountNoSave$_());
                    }
                }
            }
        },
        async _$PlayAtPosition$_(t, s, i, e, n, h, r, o, a, l, u) {
            if (!this._$_isSilent$_) {
                const c = t[1], f = this._$_runtime$_._$GetAssetManager$_()._$GetProjectAudioFileUrl$_(t[0]);
                if (f) {
                    const d = this._$_nextPlayTime$_, p = (this._$_nextPlayTime$_ = 0, 
                    this._$_MaybeMarkAsPlaying$_(t[0], u, c, 0 !== s, this._$DbToLinear$_(i)));
                    try {
                        await this._$PostToDOMAsync$_("play", {
                            originalUrl: t[0],
                            url: f.url,
                            type: f.type,
                            isMusic: c,
                            tags: this._$_SplitTags$_(u),
                            isLooping: 0 !== s,
                            vol: this._$DbToLinear$_(i),
                            pos: 0,
                            off: d,
                            trueClock: !!self.C3_GetAudioContextCurrentTime,
                            panning: {
                                x: e,
                                y: n,
                                z: h,
                                angle: L._$toRadians$_(r),
                                innerAngle: L._$toRadians$_(o),
                                outerAngle: L._$toRadians$_(a),
                                outerGain: this._$DbToLinear$_(l)
                            }
                        });
                    } finally {
                        p && (p.placeholder = this._$_runtime$_._$GetTickCountNoSave$_());
                    }
                }
            }
        },
        async _$PlayAtObject$_(t, s, i, e, n, h, r, o) {
            if (!this._$_isSilent$_ && e) {
                const a = e._$GetFirstPicked$_();
                if (a && a._$GetWorldInfo$_()) {
                    const l = a._$GetWorldInfo$_(), u = l._$GetLayer$_()._$GetAngle$_(), [ c, f ] = this._$rotatePtAround$_(l._$GetX$_(), l._$GetY$_(), -u, this._$_listenerPos$_[0], this._$_listenerPos$_[1]), d = t[1], p = this._$_runtime$_._$GetAssetManager$_()._$GetProjectAudioFileUrl$_(t[0]);
                    if (p) {
                        const m = this._$_nextPlayTime$_, g = (this._$_nextPlayTime$_ = 0, 
                        this._$_MaybeMarkAsPlaying$_(t[0], o, d, 0 !== s, this._$DbToLinear$_(i)));
                        try {
                            await this._$PostToDOMAsync$_("play", {
                                originalUrl: t[0],
                                url: p.url,
                                type: p.type,
                                isMusic: d,
                                tags: this._$_SplitTags$_(o),
                                isLooping: 0 !== s,
                                vol: this._$DbToLinear$_(i),
                                pos: 0,
                                off: m,
                                trueClock: !!self.C3_GetAudioContextCurrentTime,
                                panning: {
                                    x: c,
                                    y: f,
                                    z: l._$GetTotalZElevation$_(),
                                    angle: l._$GetAngle$_() - u,
                                    innerAngle: L._$toRadians$_(n),
                                    outerAngle: L._$toRadians$_(h),
                                    outerGain: this._$DbToLinear$_(r),
                                    uid: a._$GetUID$_()
                                }
                            });
                        } finally {
                            g && (g.placeholder = this._$_runtime$_._$GetTickCountNoSave$_());
                        }
                    }
                }
            }
        },
        async _$PlayByName$_(t, s, i, e, n, h) {
            if (!this._$_isSilent$_) {
                const r = 1 === t, o = this._$_runtime$_._$GetAssetManager$_()._$GetProjectAudioFileUrl$_(s) || this._$_remoteUrls$_.get(s.toLowerCase());
                if (o) {
                    const a = this._$_nextPlayTime$_, l = (this._$_nextPlayTime$_ = 0, 
                    this._$_MaybeMarkAsPlaying$_(s, h, r, 0 !== i, this._$DbToLinear$_(e)));
                    try {
                        await this._$PostToDOMAsync$_("play", {
                            originalUrl: s,
                            url: o.url,
                            type: o.type,
                            isMusic: r,
                            tags: this._$_SplitTags$_(h),
                            isLooping: 0 !== i,
                            vol: this._$DbToLinear$_(e),
                            stereoPan: L._$clamp$_(n / 100, -1, 1),
                            pos: 0,
                            off: a,
                            trueClock: !!self.C3_GetAudioContextCurrentTime
                        });
                    } finally {
                        l && (l.placeholder = this._$_runtime$_._$GetTickCountNoSave$_());
                    }
                }
            }
        },
        async _$PlayAtPositionByName$_(t, s, i, e, n, h, r, o, a, l, u, c) {
            if (!this._$_isSilent$_) {
                const f = 1 === t, d = this._$_runtime$_._$GetAssetManager$_()._$GetProjectAudioFileUrl$_(s) || this._$_remoteUrls$_.get(s.toLowerCase());
                if (d) {
                    const p = this._$_nextPlayTime$_, m = (this._$_nextPlayTime$_ = 0, 
                    this._$_MaybeMarkAsPlaying$_(s, c, f, 0 !== i, this._$DbToLinear$_(e)));
                    try {
                        await this._$PostToDOMAsync$_("play", {
                            originalUrl: s,
                            url: d.url,
                            type: d.type,
                            isMusic: f,
                            tags: this._$_SplitTags$_(c),
                            isLooping: 0 !== i,
                            vol: this._$DbToLinear$_(e),
                            pos: 0,
                            off: p,
                            trueClock: !!self.C3_GetAudioContextCurrentTime,
                            panning: {
                                x: n,
                                y: h,
                                z: r,
                                angle: L._$toRadians$_(o),
                                innerAngle: L._$toRadians$_(a),
                                outerAngle: L._$toRadians$_(l),
                                outerGain: this._$DbToLinear$_(u)
                            }
                        });
                    } finally {
                        m && (m.placeholder = this._$_runtime$_._$GetTickCountNoSave$_());
                    }
                }
            }
        },
        async _$PlayAtObjectByName$_(t, s, i, e, n, h, r, o, a) {
            if (!this._$_isSilent$_ && !this._$_isSilent$_ && n) {
                const l = n._$GetFirstPicked$_();
                if (l && l._$GetWorldInfo$_()) {
                    const u = l._$GetWorldInfo$_(), c = u._$GetLayer$_()._$GetAngle$_(), [ f, d ] = this._$rotatePtAround$_(u._$GetX$_(), u._$GetY$_(), -c, this._$_listenerPos$_[0], this._$_listenerPos$_[1]), p = 1 === t, m = this._$_runtime$_._$GetAssetManager$_()._$GetProjectAudioFileUrl$_(s) || this._$_remoteUrls$_.get(s.toLowerCase());
                    if (m) {
                        const g = this._$_nextPlayTime$_, y = (this._$_nextPlayTime$_ = 0, 
                        this._$_MaybeMarkAsPlaying$_(s, a, p, 0 !== i, this._$DbToLinear$_(e)));
                        try {
                            await this._$PostToDOMAsync$_("play", {
                                originalUrl: s,
                                url: m.url,
                                type: m.type,
                                isMusic: p,
                                tags: this._$_SplitTags$_(a),
                                isLooping: 0 !== i,
                                vol: this._$DbToLinear$_(e),
                                pos: 0,
                                off: g,
                                trueClock: !!self.C3_GetAudioContextCurrentTime,
                                panning: {
                                    x: f,
                                    y: d,
                                    z: u._$GetTotalZElevation$_(),
                                    angle: u._$GetAngle$_() - c,
                                    innerAngle: L._$toRadians$_(h),
                                    outerAngle: L._$toRadians$_(r),
                                    outerGain: this._$DbToLinear$_(o),
                                    uid: l._$GetUID$_()
                                }
                            });
                        } finally {
                            y && (y.placeholder = this._$_runtime$_._$GetTickCountNoSave$_());
                        }
                    }
                }
            }
        },
        _$SetLooping$_(t, s) {
            this._$PostToDOM$_("set-looping", {
                tags: this._$_SplitTags$_(t),
                isLooping: 0 === s
            });
        },
        _$SetMuted$_(t, s) {
            this._$PostToDOM$_("set-muted", {
                tags: this._$_SplitTags$_(t),
                isMuted: 0 === s
            });
        },
        _$SetVolume$_(t, s) {
            this._$PostToDOM$_("set-volume", {
                tags: this._$_SplitTags$_(t),
                vol: this._$DbToLinear$_(s)
            });
        },
        _$FadeVolume$_(t, s, i, e) {
            this._$PostToDOM$_("fade-volume", {
                tags: this._$_SplitTags$_(t),
                vol: this._$DbToLinear$_(s),
                duration: i,
                stopOnEnd: 0 === e
            });
        },
        _$SetStereoPan$_(t, s) {
            this._$PostToDOM$_("set-stereo-pan", {
                tags: this._$_SplitTags$_(t),
                p: L._$clamp$_(s / 100, -1, 1)
            });
        },
        async _$Preload$_(t) {
            const s = t[1], i = this._$_runtime$_._$GetAssetManager$_()._$GetProjectAudioFileUrl$_(t[0]);
            i && (this._$_preloadTotal$_++, await this._$PostToDOMAsync$_("preload", {
                originalUrl: t[0],
                url: i.url,
                type: i.type,
                isMusic: s
            }), this._$_preloadCount$_++);
        },
        async _$PreloadByName$_(t, s) {
            const i = 1 === t, e = this._$_runtime$_._$GetAssetManager$_()._$GetProjectAudioFileUrl$_(s) || this._$_remoteUrls$_.get(s.toLowerCase());
            e && (this._$_preloadTotal$_++, await this._$PostToDOMAsync$_("preload", {
                originalUrl: s,
                url: e.url,
                type: e.type,
                isMusic: i
            }), this._$_preloadCount$_++);
        },
        _$SetPlaybackRate$_(t, s) {
            this._$PostToDOM$_("set-playback-rate", {
                tags: this._$_SplitTags$_(t),
                rate: Math.max(s, 0)
            });
        },
        _$Stop$_(t) {
            this._$_MaybeMarkAsStopped$_(t), this._$PostToDOM$_("stop", {
                tags: this._$_SplitTags$_(t)
            });
        },
        _$StopAll$_() {
            this._$_StopAll$_();
        },
        _$SetPaused$_(t, s) {
            this._$PostToDOM$_("set-paused", {
                tags: this._$_SplitTags$_(t),
                paused: 0 === s
            });
        },
        _$Seek$_(t, s) {
            this._$PostToDOM$_("seek", {
                tags: this._$_SplitTags$_(t),
                pos: s
            });
        },
        _$SetSilent$_(t) {
            2 === t && (t = this._$_IsSilent$_() ? 1 : 0), this._$_SetSilent$_(0 === t);
        },
        _$SetMasterVolume$_(t) {
            const s = this._$DbToLinear$_(t);
            this._$_SetMasterVolume$_(s);
        },
        _$AddFilterEffect$_(t, s, i, e, n, h, r) {
            const o = su[s];
            this._$_IncrementEffectCount$_(t), this._$PostToDOM$_("add-effect", {
                type: "filter",
                tags: this._$_SplitTags$_(t),
                params: [ o, i, e, n, h, L._$clamp$_(r / 100, 0, 1) ]
            });
        },
        _$AddDelayEffect$_(t, s, i, e) {
            this._$_IncrementEffectCount$_(t), this._$PostToDOM$_("add-effect", {
                type: "delay",
                tags: this._$_SplitTags$_(t),
                params: [ s, this._$DbToLinear$_(i), L._$clamp$_(e / 100, 0, 1) ]
            });
        },
        _$AddFlangerEffect$_(t, s, i, e, n, h) {
            this._$_IncrementEffectCount$_(t), this._$PostToDOM$_("add-effect", {
                type: "flanger",
                tags: this._$_SplitTags$_(t),
                params: [ s / 1e3, i / 1e3, e, n / 100, L._$clamp$_(h / 100, 0, 1) ]
            });
        },
        _$AddPhaserEffect$_(t, s, i, e, n, h, r) {
            this._$_IncrementEffectCount$_(t), this._$PostToDOM$_("add-effect", {
                type: "phaser",
                tags: this._$_SplitTags$_(t),
                params: [ s, i, e, n, h, L._$clamp$_(r / 100, 0, 1) ]
            });
        },
        _$AddConvolutionEffect$_(t, s, i, e) {
            const n = this._$_runtime$_._$GetAssetManager$_()._$GetProjectAudioFileUrl$_(s[0]);
            n && (this._$_IncrementEffectCount$_(t), this._$PostToDOM$_("add-effect", {
                type: "convolution",
                tags: this._$_SplitTags$_(t),
                bufferOriginalUrl: s[0],
                bufferUrl: n.url,
                bufferType: n.type,
                params: [ 0 === i, L._$clamp$_(e / 100, 0, 1) ]
            }));
        },
        _$AddGainEffect$_(t, s) {
            this._$_IncrementEffectCount$_(t), this._$PostToDOM$_("add-effect", {
                type: "gain",
                tags: this._$_SplitTags$_(t),
                params: [ this._$DbToLinear$_(s) ]
            });
        },
        _$AddStereoPanEffect$_(t, s) {
            this._$_IncrementEffectCount$_(t), this._$PostToDOM$_("add-effect", {
                type: "stereopan",
                tags: this._$_SplitTags$_(t),
                params: [ L._$clamp$_(s / 100, -1, 1) ]
            });
        },
        _$AddMuteEffect$_(t) {
            this._$_IncrementEffectCount$_(t), this._$PostToDOM$_("add-effect", {
                type: "gain",
                tags: this._$_SplitTags$_(t),
                params: [ 0 ]
            });
        },
        _$AddTremoloEffect$_(t, s, i) {
            this._$_IncrementEffectCount$_(t), this._$PostToDOM$_("add-effect", {
                type: "tremolo",
                tags: this._$_SplitTags$_(t),
                params: [ s, L._$clamp$_(i / 100, 0, 1) ]
            });
        },
        _$AddRingModEffect$_(t, s, i) {
            this._$_IncrementEffectCount$_(t), this._$PostToDOM$_("add-effect", {
                type: "ringmod",
                tags: this._$_SplitTags$_(t),
                params: [ s, L._$clamp$_(i / 100, 0, 1) ]
            });
        },
        _$AddDistortionEffect$_(t, s, i, e, n, h) {
            this._$_IncrementEffectCount$_(t), this._$PostToDOM$_("add-effect", {
                type: "distortion",
                tags: this._$_SplitTags$_(t),
                params: [ this._$DbToLinearNoCap$_(s), this._$DbToLinearNoCap$_(i), e, this._$DbToLinearNoCap$_(n), L._$clamp$_(h / 100, 0, 1) ]
            });
        },
        _$AddCompressorEffect$_(t, s, i, e, n, h) {
            this._$_IncrementEffectCount$_(t), this._$PostToDOM$_("add-effect", {
                type: "compressor",
                tags: this._$_SplitTags$_(t),
                params: [ s, i, e, n / 1e3, h / 1e3 ]
            });
        },
        _$AddAnalyserEffect$_(t, s, i) {
            this._$_IncrementEffectCount$_(t), this._$PostToDOM$_("add-effect", {
                type: "analyser",
                tags: this._$_SplitTags$_(t),
                params: [ s, i ]
            });
        },
        _$RemoveEffects$_(t) {
            const s = this._$_SplitTags$_(t);
            for (const i of s) this._$_effectCount$_.set(i.toLowerCase(), 0);
            this._$PostToDOM$_("remove-effects", {
                tags: s
            }), this._$_lastFxState$_ = {};
        },
        _$SetEffectParameter$_(t, s, i, e, n, h) {
            this._$PostToDOM$_("set-effect-param", {
                tags: this._$_SplitTags$_(t),
                index: Math.floor(s),
                param: i,
                value: e,
                ramp: n,
                time: h
            });
        },
        _$SetListenerObject$_(t) {
            if (t) {
                const s = t._$GetFirstPicked$_();
                s && s._$GetWorldInfo$_() && (this._$_listenerInst$_ = s);
            }
        },
        _$SetListenerZ$_(t) {
            this._$_listenerPos$_[2] = t;
        },
        _$SetListenerOrientation$_(t, s, i, e, n, h) {
            this._$_listenerForwardVec$_[0] = t, this._$_listenerForwardVec$_[1] = s, 
            this._$_listenerForwardVec$_[2] = -i, this._$_listenerUpVec$_[0] = e, 
            this._$_listenerUpVec$_[1] = n, this._$_listenerUpVec$_[2] = -h;
        },
        _$ScheduleNextPlay$_(t) {
            this._$_nextPlayTime$_ = Math.max(t, 0);
        },
        _$UnloadAudio$_(t) {
            const s = t[1], i = this._$_runtime$_._$GetAssetManager$_()._$GetProjectAudioFileUrl$_(t[0]);
            i && this._$PostToDOM$_("unload", {
                url: i.url,
                type: i.type,
                isMusic: s
            });
        },
        _$UnloadAudioByName$_(t, s) {
            const i = 1 === t, e = this._$_runtime$_._$GetAssetManager$_()._$GetProjectAudioFileUrl$_(s) || this._$_remoteUrls$_.get(s.toLowerCase());
            e && this._$PostToDOM$_("unload", {
                url: e.url,
                type: e.type,
                isMusic: i
            });
        },
        _$UnloadAll$_() {
            this._$PostToDOM$_("unload-all");
        },
        _$AddRemoteURL$_(t, s, i) {
            this._$_remoteUrls$_.set(i.toLowerCase(), {
                url: t,
                type: s
            });
        }
    };
}

{
    const iu = self._$C3$_;
    iu._$Plugins$_.Audio._$Exps$_ = {
        _$Duration$_(t) {
            const s = this._$_GetFirstAudioStateByTags$_(t);
            return s ? s.duration : 0;
        },
        _$PlaybackTime$_(t) {
            const s = this._$_GetFirstAudioStateByTags$_(t);
            return s ? s.playbackTime : 0;
        },
        _$PlaybackRate$_(t) {
            const s = this._$_GetFirstAudioStateByTags$_(t);
            return s ? s.playbackRate : 0;
        },
        _$Volume$_(t) {
            const s = this._$_GetFirstAudioStateByTags$_(t);
            return s ? this._$LinearToDb$_(s.volume) : 0;
        },
        _$MasterVolume$_() {
            return this._$LinearToDb$_(this._$_GetMasterVolume$_());
        },
        _$EffectCount$_(t) {
            return this._$_effectCount$_.get(t.toLowerCase()) || 0;
        },
        _$AnalyserFreqBinCount$_(t, s) {
            const i = this._$GetAnalyserData$_(t, Math.floor(s));
            return i ? i.binCount : 0;
        },
        _$AnalyserFreqBinAt$_(t, s, i) {
            const e = this._$GetAnalyserData$_(t, Math.floor(s));
            return !e || (i = Math.floor(i)) < 0 || i >= e.binCount ? 0 : e.freqBins[i];
        },
        _$AnalyserPeakLevel$_(t, s) {
            const i = this._$GetAnalyserData$_(t, Math.floor(s));
            return i ? i.peak : 0;
        },
        _$AnalyserRMSLevel$_(t, s) {
            const i = this._$GetAnalyserData$_(t, Math.floor(s));
            return i ? i.rms : 0;
        },
        _$SampleRate$_() {
            return this._$_sampleRate$_;
        },
        _$CurrentTime$_() {
            return self.C3_GetAudioContextCurrentTime ? self.C3_GetAudioContextCurrentTime() : performance.now() / 1e3;
        },
        _$OutputLatency$_() {
            return this._$_outputLatency$_;
        },
        _$NormalizedVolume$_(t, s) {
            return 0 == (t = iu._$clamp$_(+t, 0, 100) / 100) ? -1 / 0 : t < .1 ? this._$LinearToDb$_(iu._$lerp$_(0, this._$DbToLinear$_(s), 10 * t)) : iu._$lerp$_(s, 0, (t - .1) / .9);
        }
    };
}

{
    const eu = self._$C3$_;
    eu._$Plugins$_._$NinePatch$_ = class extends eu._$SDKPluginBase$_ {
        constructor(t) {
            super(t);
        }
        _$Release$_() {
            super._$Release$_();
        }
    };
}

{
    const nu = self._$C3$_;
    nu._$Plugins$_._$NinePatch$_._$Type$_ = class extends nu._$SDKTypeBase$_ {
        constructor(t) {
            super(t), this._$_textureSet$_ = null, this._$_drawable$_ = null;
        }
        _$Release$_() {
            this._$ReleaseTextures$_(), super._$Release$_();
        }
        _$OnCreate$_() {
            this._$GetImageInfo$_()._$LoadAsset$_(this._$_runtime$_);
        }
        async _$LoadTextures$_(t) {
            const s = this._$GetImageInfo$_();
            this._$_drawable$_ = await s._$ExtractImageToCanvas$_();
        }
        _$CreatePatch$_(t, s, i, e) {
            !this._$_textureSet$_ && this._$_drawable$_ && (this._$_textureSet$_ = new self._$NinePatchTextureSet$_(this), 
            this._$_textureSet$_._$CreateTextures$_(this._$_drawable$_, t, s, i, e));
        }
        _$ReleaseTextures$_() {
            this._$_textureSet$_ && (this._$_textureSet$_._$Release$_(), this._$_textureSet$_ = null);
        }
        _$GetTextureSet$_() {
            return this._$_textureSet$_;
        }
    };
}

{
    const hu = self._$C3$_, ru = hu._$New$_(hu.Rect), ou = hu._$New$_(hu.Rect), au = hu._$New$_(hu._$Quad$_);
    hu._$Plugins$_._$NinePatch$_.Instance = class extends hu._$SDKWorldInstanceBase$_ {
        constructor(t, s) {
            super(t), this._$_leftMargin$_ = 16, this._$_rightMargin$_ = 16, this._$_topMargin$_ = 16, 
            this._$_bottomMargin$_ = 16, this._$_edges$_ = 1, this._$_fill$_ = 1, 
            this._$_isSeamless$_ = !0, this._$_callback3d$_ = null, s && (this._$_leftMargin$_ = s[0], 
            this._$_rightMargin$_ = s[1], this._$_topMargin$_ = s[2], this._$_bottomMargin$_ = s[3], 
            this._$_edges$_ = s[4], this._$_fill$_ = s[5], this._$_isSeamless$_ = !!s[8], 
            this._$GetWorldInfo$_()._$SetVisible$_(!!s[6])), this._$_sdkType$_._$CreatePatch$_(this._$_leftMargin$_, this._$_rightMargin$_, this._$_topMargin$_, this._$_bottomMargin$_);
        }
        _$Release$_() {
            super._$Release$_();
        }
        _$_Set3DCallback$_(t) {
            this._$_callback3d$_ = t;
        }
        _$Draw$_(t) {
            const s = this._$GetWorldInfo$_(), i = s._$GetBoundingQuad$_();
            this._$_Draw$_(t, i._$getTlx$_(), i._$getTly$_(), s._$GetWidth$_(), s._$GetHeight$_());
        }
        _$_Draw$_(t, s, i, e, n) {
            let h = this._$_sdkType$_._$GetTextureSet$_();
            if (h || (this._$_sdkType$_._$CreatePatch$_(this._$_leftMargin$_, this._$_rightMargin$_, this._$_topMargin$_, this._$_bottomMargin$_), 
            h = this._$_sdkType$_._$GetTextureSet$_())) {
                const r = h._$GetImageWidth$_(), o = h._$GetImageHeight$_(), a = Math.min(this._$_leftMargin$_, r), l = Math.min(this._$_rightMargin$_, r), u = Math.min(this._$_topMargin$_, o), c = Math.min(this._$_bottomMargin$_, o), f = r - l, d = o - c, p = this._$_isSeamless$_ ? 1 : 0, m = this._$_edges$_, g = this._$_fill$_;
                if (0 < a && 0 < u && this._$_DrawPatch$_(t, h._$GetTexture$_(), 0, 0, a + p, u + p, s, i, a + p, u + p), 
                0 < l && 0 < u && this._$_DrawPatch$_(t, h._$GetTexture$_(), f - p, 0, l + p, u + p, s + e - l - p, i, l + p, u + p), 
                0 < l && 0 < c && this._$_DrawPatch$_(t, h._$GetTexture$_(), f - p, d - p, l + p, c + p, s + e - l - p, i + n - c - p, l + p, c + p), 
                0 < a && 0 < c && this._$_DrawPatch$_(t, h._$GetTexture$_(), 0, d - p, a + p, c + p, s, i + n - c - p, a + p, c + p), 
                0 === m) {
                    const y = 2 === g ? 0 : p;
                    0 < a && u < d && this._$_TilePatch$_(t, h._$GetLeftTexture$_(), s, i + u, a + y, n - u - c, 0, 0), 
                    0 < l && u < d && this._$_TilePatch$_(t, h._$GetRightTexture$_(), s + e - l - y, i + u, l + y, n - u - c, y, 0), 
                    0 < u && a < f && this._$_TilePatch$_(t, h._$GetTopTexture$_(), s + a, i, e - a - l, u + y, 0, 0), 
                    0 < c && a < f && this._$_TilePatch$_(t, h._$GetBottomTexture$_(), s + a, i + n - c - y, e - a - l, c + y, 0, y);
                } else 1 === m && (0 < a && u < d && this._$_DrawPatch$_(t, h._$GetTexture$_(), 0, u, a, d - u, s, i + u, a, n - u - c), 
                0 < l && u < d && this._$_DrawPatch$_(t, h._$GetTexture$_(), f, u, l, d - u, s + e - l, i + u, l, n - u - c), 
                0 < u && a < f && this._$_DrawPatch$_(t, h._$GetTexture$_(), a, 0, f - a, u, s + a, i, e - a - l, u), 
                0 < c) && a < f && this._$_DrawPatch$_(t, h._$GetTexture$_(), a, d, f - a, c, s + a, i + n - c, e - a - l, c);
                u < d && a < f && (0 === g ? this._$_TilePatch$_(t, h._$GetFillTexture$_(), s + a, i + u, e - a - l, n - u - c, 0, 0) : 1 === g && this._$_DrawPatch$_(t, h._$GetTexture$_(), a, u, f - a, d - u, s + a, i + u, e - a - l, n - u - c));
            }
        }
        _$_DrawPatch$_(t, s, i, e, n, h, r, o, a, l) {
            const u = s._$GetWidth$_(), c = s._$GetHeight$_();
            if (t._$SetTexture$_(s), ru.set(r, o, r + a, o + l), ou.set(i / u, e / c, (i + n) / u, (e + h) / c), 
            null === this._$_callback3d$_) {
                const f = this._$GetWorldInfo$_(), d = f._$GetBoundingQuad$_(), p = d._$getTlx$_(), m = d._$getTly$_();
                ru.offset(-p, -m), au._$setFromRotatedRect$_(ru, f._$GetAngle$_()), 
                au.offset(p, m), t._$Quad3$_(au, ou);
            } else this._$_callback3d$_(ru, ou);
        }
        _$_TilePatch$_(t, s, i, e, n, h, r, o) {
            const a = s._$GetWidth$_(), l = s._$GetHeight$_();
            if (t._$SetTexture$_(s), ru.set(i, e, i + n, e + h), ou.set(-r / a, -o / l, (n - r) / a, (h - o) / l), 
            null === this._$_callback3d$_) {
                const u = this._$GetWorldInfo$_(), c = u._$GetBoundingQuad$_(), f = c._$getTlx$_(), d = c._$getTly$_();
                ru.offset(-f, -d), au._$setFromRotatedRect$_(ru, u._$GetAngle$_()), 
                au.offset(f, d), t._$Quad3$_(au, ou);
            } else this._$_callback3d$_(ru, ou);
        }
        _$GetCurrentImageInfo$_() {
            this._$_objectClass$_._$GetImageInfo$_();
        }
        _$GetPropertyValueByIndex$_(t) {}
        _$SetPropertyValueByIndex$_(t, s) {}
    };
}

{
    const lu = self._$C3$_;
    lu._$Plugins$_._$NinePatch$_._$Cnds$_ = {};
}

{
    const uu = self._$C3$_;
    uu._$Plugins$_._$NinePatch$_._$Acts$_ = {
        _$SetEffect$_(t) {
            this._$GetWorldInfo$_()._$SetBlendMode$_(t), this._$_runtime$_._$UpdateRender$_();
        }
    };
}

{
    const cu = self._$C3$_;
    cu._$Plugins$_._$NinePatch$_._$Exps$_ = {};
}

{
    let c = function(t) {
        const s = fu._$CreateCanvas$_(t.width, t.height), i = s.getContext("2d");
        return i.drawImage(t, 0, 0), s;
    };
    c;
    const fu = self._$C3$_;
    self._$NinePatchTextureSet$_ = class {
        constructor(t) {
            this._$_sdkType$_ = t, this._$_runtime$_ = this._$_sdkType$_._$GetRuntime$_(), 
            this._$_texture$_ = null, this._$_fillTexture$_ = null, this._$_leftTexture$_ = null, 
            this._$_rightTexture$_ = null, this._$_topTexture$_ = null, this._$_bottomTexture$_ = null, 
            this._$_imageWidth$_ = 0, this._$_imageHeight$_ = 0, this._$_renderer$_ = this._$_runtime$_._$GetRenderer$_(), 
            this._$_isLoading$_ = !1, this._$_wasReleased$_ = !1;
        }
        _$Release$_() {
            this._$_renderer$_._$IsContextLost$_() || (this._$_renderer$_._$DeleteTexture$_(this._$_texture$_), 
            this._$_renderer$_._$DeleteTexture$_(this._$_fillTexture$_), this._$_renderer$_._$DeleteTexture$_(this._$_leftTexture$_), 
            this._$_renderer$_._$DeleteTexture$_(this._$_rightTexture$_), this._$_renderer$_._$DeleteTexture$_(this._$_topTexture$_), 
            this._$_renderer$_._$DeleteTexture$_(this._$_bottomTexture$_)), this._$_texture$_ = null, 
            this._$_fillTexture$_ = null, this._$_leftTexture$_ = null, this._$_rightTexture$_ = null, 
            this._$_topTexture$_ = null, this._$_bottomTexture$_ = null, this._$_sdkType$_ = null, 
            this._$_renderer$_ = null, this._$_wasReleased$_ = !0;
        }
        _$WasReleased$_() {
            return this._$_wasReleased$_;
        }
        _$CreateTextures$_(t, s, i, e, n) {
            this._$_SliceImage$_(t, s, i, e, n);
        }
        _$HasCreatedTextures$_() {
            return !!this._$_texture$_;
        }
        _$_SliceImage$_(t, s, i, e, n) {
            if (!this._$_wasReleased$_) {
                const h = t.width, r = t.height, o = (this._$_imageWidth$_ = h, 
                this._$_imageHeight$_ = r, s = Math.min(Math.floor(s), h), i = Math.min(Math.floor(i), h), 
                e = Math.min(Math.floor(e), r), h - i), a = r - (n = Math.min(Math.floor(n), r)), l = this._$_runtime$_._$GetSampling$_(), u = this._$_runtime$_._$GetCanvasManager$_()._$GetTextureAnisotropy$_();
                this._$_texture$_ = this._$_renderer$_._$CreateStaticTexture$_(c(t), {
                    _$sampling$_: l,
                    _$anisotropy$_: u
                }), s < o && e < a && (this._$_fillTexture$_ = this._$_renderer$_._$CreateStaticTexture$_(this._$_SliceSubImage$_(c(t), s, e, o, a), {
                    _$wrapX$_: "repeat",
                    _$wrapY$_: "repeat",
                    _$sampling$_: l,
                    _$anisotropy$_: u
                })), 0 < s && e < a && (this._$_leftTexture$_ = this._$_renderer$_._$CreateStaticTexture$_(this._$_SliceSubImage$_(c(t), 0, e, s, a), {
                    _$wrapY$_: "repeat",
                    _$sampling$_: l,
                    _$anisotropy$_: u
                })), 0 < i && e < a && (this._$_rightTexture$_ = this._$_renderer$_._$CreateStaticTexture$_(this._$_SliceSubImage$_(c(t), o, e, h, a), {
                    _$wrapY$_: "repeat",
                    _$sampling$_: l,
                    _$anisotropy$_: u
                })), 0 < e && s < o && (this._$_topTexture$_ = this._$_renderer$_._$CreateStaticTexture$_(this._$_SliceSubImage$_(c(t), s, 0, o, e), {
                    _$wrapX$_: "repeat",
                    _$sampling$_: l,
                    _$anisotropy$_: u
                })), 0 < n && s < o && (this._$_bottomTexture$_ = this._$_renderer$_._$CreateStaticTexture$_(this._$_SliceSubImage$_(c(t), s, a, o, r), {
                    _$wrapX$_: "repeat",
                    _$sampling$_: l,
                    _$anisotropy$_: u
                }));
            }
        }
        _$_SliceSubImage$_(t, s, i, e, n) {
            const h = e - s, r = n - i, o = fu._$CreateCanvas$_(h, r), a = o.getContext("2d");
            return a.drawImage(t, s, i, h, r, 0, 0, h, r), o;
        }
        _$GetImageWidth$_() {
            return this._$_imageWidth$_;
        }
        _$GetImageHeight$_() {
            return this._$_imageHeight$_;
        }
        _$GetTexture$_() {
            return this._$_texture$_;
        }
        _$GetFillTexture$_() {
            return this._$_fillTexture$_;
        }
        _$GetLeftTexture$_() {
            return this._$_leftTexture$_;
        }
        _$GetRightTexture$_() {
            return this._$_rightTexture$_;
        }
        _$GetTopTexture$_() {
            return this._$_topTexture$_;
        }
        _$GetBottomTexture$_() {
            return this._$_bottomTexture$_;
        }
    };
}

{
    const du = self._$C3$_;
    du._$Behaviors$_._$Fade$_ = class extends du._$SDKBehaviorBase$_ {
        constructor(t) {
            super(t);
        }
        _$Release$_() {
            super._$Release$_();
        }
    };
}

{
    const pu = self._$C3$_;
    pu._$Behaviors$_._$Fade$_._$Type$_ = class extends pu._$SDKBehaviorTypeBase$_ {
        constructor(t) {
            super(t);
        }
        _$Release$_() {
            super._$Release$_();
        }
        _$OnCreate$_() {}
    };
}

{
    const mu = self._$C3$_, gu = self._$C3X$_, yu = self._$IBehaviorInstance$_, Mu = (mu._$Behaviors$_._$Fade$_.Instance = class extends mu._$SDKBehaviorInstanceBase$_ {
        constructor(t, s) {
            super(t), this._$_fadeInTime$_ = 0, this._$_waitTime$_ = 0, this._$_fadeOutTime$_ = 0, 
            this._$_destroy$_ = !0, this._$_activeAtStart$_ = !0, this._$_setMaxOpacity$_ = !1, 
            this._$_stage$_ = 0, this._$_stageTime$_ = mu._$New$_(mu._$KahanSum$_), 
            this._$_maxOpacity$_ = this._$_inst$_._$GetWorldInfo$_()._$GetOpacity$_() || 1, 
            s && (this._$_fadeInTime$_ = s[0], this._$_waitTime$_ = s[1], this._$_fadeOutTime$_ = s[2], 
            this._$_destroy$_ = !!s[3], this._$_activeAtStart$_ = !!s[4], this._$_stage$_ = this._$_activeAtStart$_ ? 0 : 3), 
            this._$_activeAtStart$_ && (0 === this._$_fadeInTime$_ ? (this._$_stage$_ = 1, 
            0 === this._$_waitTime$_ && (this._$_stage$_ = 2)) : (this._$_inst$_._$GetWorldInfo$_()._$SetOpacity$_(0), 
            this._$_runtime$_._$UpdateRender$_())), this._$_StartTicking$_();
        }
        _$Release$_() {
            super._$Release$_();
        }
        _$SaveToJson$_() {
            return {
                fit: this._$_fadeInTime$_,
                wt: this._$_waitTime$_,
                fot: this._$_fadeOutTime$_,
                d: this._$_destroy$_,
                s: this._$_stage$_,
                st: this._$_stageTime$_._$Get$_(),
                mo: this._$_maxOpacity$_
            };
        }
        _$LoadFromJson$_(t) {
            this._$_fadeInTime$_ = t.fit, this._$_waitTime$_ = t.wt, this._$_fadeOutTime$_ = t.fot, 
            this._$_destroy$_ = t.d, this._$_stage$_ = t.s, this._$_stageTime$_.Set(t.st), 
            this._$_maxOpacity$_ = t.mo, 3 === this._$_stage$_ ? this._$_StopTicking$_() : this._$_StartTicking$_();
        }
        _$Tick$_() {
            const t = this._$_runtime$_._$GetDt$_(this._$_inst$_), s = (this._$_stageTime$_._$Add$_(t), 
            this._$_inst$_._$GetWorldInfo$_());
            0 === this._$_stage$_ && (s._$SetOpacity$_(this._$_stageTime$_._$Get$_() / this._$_fadeInTime$_ * this._$_maxOpacity$_), 
            this._$_runtime$_._$UpdateRender$_(), s._$GetOpacity$_() >= this._$_maxOpacity$_) && (s._$SetOpacity$_(this._$_maxOpacity$_), 
            this._$_stage$_ = 1, this._$_stageTime$_._$Reset$_(), this._$DispatchScriptEvent$_("fadeinend"), 
            this._$Trigger$_(mu._$Behaviors$_._$Fade$_._$Cnds$_._$OnFadeInEnd$_)), 
            1 === this._$_stage$_ && this._$_stageTime$_._$Get$_() >= this._$_waitTime$_ && (this._$_stage$_ = 2, 
            this._$_stageTime$_._$Reset$_(), this._$DispatchScriptEvent$_("waitend"), 
            this._$Trigger$_(mu._$Behaviors$_._$Fade$_._$Cnds$_._$OnWaitEnd$_)), 
            2 === this._$_stage$_ && (0 !== this._$_fadeOutTime$_ ? (s._$SetOpacity$_(this._$_maxOpacity$_ - this._$_stageTime$_._$Get$_() / this._$_fadeOutTime$_ * this._$_maxOpacity$_), 
            this._$_runtime$_._$UpdateRender$_(), s._$GetOpacity$_() <= 0 && (this._$_stage$_ = 3, 
            this._$_stageTime$_._$Reset$_(), this._$DispatchScriptEvent$_("fadeoutend"), 
            this._$Trigger$_(mu._$Behaviors$_._$Fade$_._$Cnds$_._$OnFadeOutEnd$_), 
            this._$_destroy$_) && this._$_runtime$_._$DestroyInstance$_(this._$_inst$_)) : (this._$_stage$_ = 3, 
            this._$_stageTime$_._$Reset$_())), 3 === this._$_stage$_ && this._$_StopTicking$_();
        }
        _$_StartFade$_() {
            this._$_activeAtStart$_ || this._$_setMaxOpacity$_ || (this._$_maxOpacity$_ = this._$_inst$_._$GetWorldInfo$_()._$GetOpacity$_() || 1, 
            this._$_setMaxOpacity$_ = !0), 3 === this._$_stage$_ && this._$Start$_();
        }
        _$_RestartFade$_() {
            this._$Start$_();
        }
        _$Start$_() {
            this._$_stage$_ = 0, this._$_stageTime$_._$Reset$_(), 0 === this._$_fadeInTime$_ ? (this._$_stage$_ = 1, 
            0 === this._$_waitTime$_ && (this._$_stage$_ = 2)) : (this._$_inst$_._$GetWorldInfo$_()._$SetOpacity$_(0), 
            this._$_runtime$_._$UpdateRender$_()), this._$_StartTicking$_();
        }
        _$_SetFadeInTime$_(t) {
            this._$_fadeInTime$_ = Math.max(t, 0);
        }
        _$_GetFadeInTime$_() {
            return this._$_fadeInTime$_;
        }
        _$_SetWaitTime$_(t) {
            this._$_waitTime$_ = Math.max(t, 0);
        }
        _$_GetWaitTime$_() {
            return this._$_waitTime$_;
        }
        _$_SetFadeOutTime$_(t) {
            this._$_fadeOutTime$_ = Math.max(t, 0);
        }
        _$_GetFadeOutTime$_() {
            return this._$_fadeOutTime$_;
        }
        _$GetPropertyValueByIndex$_(t) {
            switch (t) {
              case 0:
                return this._$_GetFadeInTime$_();

              case 1:
                return this._$_GetWaitTime$_();

              case 2:
                return this._$_GetFadeOutTime$_();

              case 3:
                return this._$_destroy$_;
            }
        }
        _$SetPropertyValueByIndex$_(t, s) {
            switch (t) {
              case 0:
                this._$_SetFadeInTime$_(s);
                break;

              case 1:
                this._$_SetWaitTime$_(s);
                break;

              case 2:
                this._$_SetFadeOutTime$_(s);
                break;

              case 3:
                this._$_destroy$_ = !!s;
            }
        }
        _$GetDebuggerProperties$_() {
            const t = "behaviors.fade";
            return [ {
                title: "$" + this._$GetBehaviorType$_()._$GetName$_(),
                properties: [ {
                    name: t + ".properties.fade-in-time.name",
                    value: this._$_GetFadeInTime$_(),
                    _$onedit$_: t => this._$_SetFadeInTime$_(t)
                }, {
                    name: t + ".properties.wait-time.name",
                    value: this._$_GetWaitTime$_(),
                    _$onedit$_: t => this._$_SetWaitTime$_(t)
                }, {
                    name: t + ".properties.fade-out-time.name",
                    value: this._$_GetFadeOutTime$_(),
                    _$onedit$_: t => this._$_SetFadeOutTime$_(t)
                }, {
                    name: t + ".debugger.stage",
                    value: [ t + ".debugger." + [ "fade-in", "wait", "fade-out", "done" ][this._$_stage$_] ]
                } ]
            } ];
        }
        _$GetScriptInterfaceClass$_() {
            return self._$IFadeBehaviorInstance$_;
        }
    }, new WeakMap());
    self._$IFadeBehaviorInstance$_ = class extends yu {
        constructor() {
            super(), Mu.set(this, yu._$_GetInitInst$_()._$GetSdkInstance$_());
        }
        _$startFade$_() {
            Mu.get(this)._$_StartFade$_();
        }
        _$restartFade$_() {
            Mu.get(this)._$_RestartFade$_();
        }
        set _$fadeInTime$_(t) {
            gu._$RequireFiniteNumber$_(t), Mu.get(this)._$_SetFadeInTime$_(t);
        }
        get _$fadeInTime$_() {
            return Mu.get(this)._$_GetFadeInTime$_();
        }
        set _$waitTime$_(t) {
            gu._$RequireFiniteNumber$_(t), Mu.get(this)._$_SetWaitTime$_(t);
        }
        get _$waitTime$_() {
            return Mu.get(this)._$_GetWaitTime$_();
        }
        set _$fadeOutTime$_(t) {
            gu._$RequireFiniteNumber$_(t), Mu.get(this)._$_SetFadeOutTime$_(t);
        }
        get _$fadeOutTime$_() {
            return Mu.get(this)._$_GetFadeOutTime$_();
        }
    };
}

{
    const wu = self._$C3$_;
    wu._$Behaviors$_._$Fade$_._$Cnds$_ = {
        _$OnFadeOutEnd$_() {
            return !0;
        },
        _$OnFadeInEnd$_() {
            return !0;
        },
        _$OnWaitEnd$_() {
            return !0;
        }
    };
}

{
    const xu = self._$C3$_;
    xu._$Behaviors$_._$Fade$_._$Acts$_ = {
        _$StartFade$_() {
            this._$_StartFade$_();
        },
        _$RestartFade$_() {
            this._$_RestartFade$_();
        },
        _$SetFadeInTime$_(t) {
            this._$_SetFadeInTime$_(t);
        },
        _$SetWaitTime$_(t) {
            this._$_SetWaitTime$_(t);
        },
        _$SetFadeOutTime$_(t) {
            this._$_SetFadeOutTime$_(t);
        }
    };
}

{
    const Su = self._$C3$_;
    Su._$Behaviors$_._$Fade$_._$Exps$_ = {
        _$FadeInTime$_() {
            return this._$_GetFadeInTime$_();
        },
        _$WaitTime$_() {
            return this._$_GetWaitTime$_();
        },
        _$FadeOutTime$_() {
            return this._$_GetFadeOutTime$_();
        }
    };
}

{
    let t = function(t, s) {
        return "number" == typeof t && "number" == typeof s;
    }, i = function(i, e) {
        if ("string" != typeof i && "string" != typeof e) return i && e ? 1 : 0;
        {
            let t, s;
            return t = "number" == typeof i ? (Math.round(1e10 * i) / 1e10).toString() : i, 
            s = "number" == typeof e ? (Math.round(1e10 * e) / 1e10).toString() : e, 
            t + s;
        }
    };
    t, i, 0;
    self._$C3_ExpressionFuncs$_ = [ () => .5, () => 20, () => 0, () => "", () => -12, () => "", () => "pic7.AnimationFrameTag", () => "", () => "Bubbles", () => "", () => "", () => "A...", () => 1.5, () => .85, () => 1, () => .8, () => 2, () => 3, () => 4, () => "", () => .7, () => "...", () => 1.6, () => "A", () => .9, () => "", () => 1.3, () => -100, () => .78, () => 30, () => "", () => .3, () => "", () => "", () => .1, () => "...", () => "", () => .47, () => "i", () => .2, () => "", () => "C", () => .87, () => "Bpptpre", () => "", () => 1.2, () => 99, () => " ", () => .4, () => 98, () => 11, () => 22, () => "...", () => "", () => .45, () => "ii", () => 1.99, () => "e", () => 1.12, () => 32, () => "presentation", () => "", () => "", () => "...", () => "", () => 1.25, () => "", () => ",", () => "...", () => "...", () => .53, () => "", () => "10...", () => 1.1, () => "", () => .75, () => "", () => 1.4, () => 50, () => "3...", () => .55, () => "", () => "...", () => 1.35, () => "", () => 1.45, () => "", () => "Q...", () => "", () => "...", () => .67, () => "", () => .76, () => "...", () => .97, () => 44, () => "...", () => "", () => .81, () => "", () => 1.64, () => "", () => "", () => .71, () => "", () => .89, () => "D...", () => 1.53, () => "", () => 1.93, () => "", () => .64, () => "", () => 1.87, () => "", () => 1.54, () => "", () => 1.98, () => "...", () => "...", () => "", () => 1.85, () => 33, () => "", () => 1.32, () => 21, () => "", () => .74, () => "...", () => 1.36, () => "", () => "", () => "...", () => 1.37, () => "D...", () => "", () => 1.47, () => "", () => "", () => "", () => "...", () => "", () => "", () => .54, () => 34, t => {
        const s = t._$_GetNode$_(0)._$GetVar$_();
        return () => i(": ", s._$GetValue$_());
    }, () => "", () => "", () => 2.5, () => 35, () => 49, () => "", () => "", () => 69, () => "", () => "", () => 70, () => "", () => "", () => 12, () => 13, () => 14, () => ":\n: ", () => 2.3, () => ":\n:", () => 2.37, () => "(CBT):CBT\n: ", () => 2.43, () => "\n:!", () => 2.49, () => "", t => {
        const s = t._$_GetNode$_(0)._$GetBoundMethod$_(), i = t._$_GetNode$_(1);
        return () => s(i._$ExpObject$_()) / 11;
    }, () => "", () => "", () => "", () => "", () => "", () => "", () => "" ];
}

var t = self._$C3$_;

self._$C3_GetObjectRefTable$_ = function() {
    return [ t._$Plugins$_._$Sprite$_, t._$Behaviors$_._$Fade$_, t._$Plugins$_.video, t._$Plugins$_.Text, t._$Plugins$_._$Mouse$_, t._$Plugins$_.Touch, t._$Plugins$_.Audio, t._$Plugins$_._$NinePatch$_, t._$Plugins$_._$System$_._$Cnds$_._$OnLayoutStart$_, t._$Plugins$_._$System$_._$Acts$_._$Wait$_, t._$Plugins$_.video._$Acts$_._$SetVisible$_, t._$Behaviors$_._$Fade$_._$Acts$_._$StartFade$_, t._$Plugins$_.video._$Acts$_._$SetMuted$_, t._$Plugins$_.video._$Acts$_.Play, t._$Plugins$_.Audio._$Acts$_.Play, t._$Plugins$_.Touch._$Cnds$_._$OnTapGesture$_, t._$Plugins$_.Touch._$Cnds$_._$OnTapGestureObject$_, t._$Plugins$_.video._$Cnds$_.IsPlaying, t._$Plugins$_.video._$Acts$_._$Pause$_, t._$Plugins$_.Audio._$Acts$_._$Stop$_, t._$Plugins$_._$Sprite$_._$Acts$_._$SetVisible$_, t._$Plugins$_.video._$Cnds$_._$HasEnded$_, t._$Plugins$_._$Sprite$_._$Cnds$_._$IsVisible$_, t._$Plugins$_._$Sprite$_._$Cnds$_._$CompareOpacity$_, t._$Plugins$_._$Sprite$_._$Acts$_._$StopAnim$_, t._$Behaviors$_._$Fade$_._$Cnds$_._$OnFadeOutEnd$_, t._$Plugins$_._$Sprite$_._$Acts$_._$SetOpacity$_, t._$Plugins$_._$Sprite$_._$Acts$_._$AddRemoveAnimation$_, t._$Plugins$_._$Sprite$_._$Acts$_._$StartAnim$_, t._$Plugins$_._$System$_._$Acts$_._$GoToLayout$_, t._$Plugins$_.Audio._$Acts$_._$PlayByName$_, t._$Plugins$_.Audio._$Cnds$_._$IsTagPlaying$_, t._$Plugins$_.Audio._$Acts$_._$SetPaused$_, t._$Plugins$_._$System$_._$Acts$_._$SetLayoutEffectEnabled$_, t._$Plugins$_.Text._$Acts$_._$SetVisible$_, t._$Plugins$_.Text._$Acts$_._$TypewriterText$_, t._$Plugins$_.Touch._$Cnds$_._$OnDoubleTapGesture$_, t._$Plugins$_.Text._$Cnds$_._$IsRunningTypewriterText$_, t._$Plugins$_.Text._$Acts$_._$TypewriterFinish$_, t._$Plugins$_.Text._$Cnds$_._$OnTypewriterTextFinished$_, t._$Plugins$_._$System$_._$Cnds$_._$CompareBoolVar$_, t._$Plugins$_._$System$_._$Acts$_._$AddVar$_, t._$Plugins$_._$System$_._$Acts$_._$SetBoolVar$_, t._$Plugins$_.Text._$Cnds$_._$IsVisible$_, t._$Plugins$_.Touch._$Cnds$_._$OnDoubleTapGestureObject$_, t._$Plugins$_._$Sprite$_._$Acts$_._$Destroy$_, t._$Plugins$_.video._$Cnds$_._$IsVisible$_, t._$Plugins$_.Text._$Acts$_._$SetWrapping$_, t._$Plugins$_.Audio._$Acts$_._$FadeVolume$_, t._$Plugins$_.video._$Acts$_._$SetVolume$_, t._$Behaviors$_._$Fade$_._$Acts$_._$SetFadeOutTime$_, t._$Plugins$_._$System$_._$Cnds$_._$CompareVar$_, t._$Plugins$_.Text._$Acts$_._$SetText$_, t._$Plugins$_._$System$_._$Exps$_._$len$_, t._$Plugins$_.Text._$Exps$_._$PlainText$_, t._$Behaviors$_._$Fade$_._$Acts$_._$SetFadeInTime$_ ];
}, self._$C3_JsPropNameTable$_ = [ {
    "_$$_": 0
}, {
    "_$$_": 0
}, {
    "_$$_": 0
}, {
    "_$$_": 0
}, {
    "_$$_": 0
}, {
    "_$$_": 0
}, {
    "_$$_": 0
}, {
    "_$$_": 0
}, {
    "_$$_": 0
}, {
    _$mdx$_: 0
}, {
    _$mdx2$_: 0
}, {
    "_$$_": 0
}, {
    "_$$_": 0
}, {
    "_$$_": 0
}, {
    "_$$_": 0
}, {
    "_$$_": 0
}, {
    "_$$_": 0
}, {
    "_$2$_": 0
}, {
    "_$3$_": 0
}, {
    "_$1$_": 0
}, {
    "_$$_": 0
}, {
    "_$$_": 0
}, {
    "_$$_": 0
}, {
    "_$$_": 0
}, {
    "_$1$_": 0
}, {
    "_$$_": 0
}, {
    "_$$_": 0
}, {
    "_$$_": 0
}, {
    "_$$_": 0
}, {
    "_$$_": 0
}, {
    "_$$_": 0
}, {
    "_$$_": 0
}, {
    "_$$_": 0
}, {
    "_$$_": 0
}, {
    "_$$_": 0
}, {
    "_$$_": 0
}, {
    "_$2$_": 0
}, {
    "9a2": 0
}, {
    "9b2": 0
}, {
    "9c2": 0
}, {
    "9d2": 0
}, {
    "9a2": 0
}, {
    "9b2": 0
}, {
    "9c2": 0
}, {
    "9d2": 0
}, {
    "_$xl10$_": 0
}, {
    "_$xl9$_": 0
}, {
    "_$xl12$_": 0
}, {
    "_$9$_": 0
}, {
    "_$5$_": 0
}, {
    "_$xl5$_": 0
}, {
    "_$2$_": 0
}, {
    "_$2$_": 0
}, {
    "_$2$_": 0
}, {
    "_$xl13$_": 0
}, {
    "_$xl12$_": 0
}, {
    "_$xl17$_": 0
}, {
    "_$xl6$_": 0
}, {
    "10a2": 0
}, {
    "10a2": 0
}, {
    "10b2": 0
}, {
    "10b2": 0
}, {
    "10c2": 0
}, {
    "10c2": 0
}, {
    "10d2": 0
}, {
    "10d2": 0
}, {
    "_$2$_": 0
}, {
    "_$xl14$_": 0
}, {
    "_$xl13$_": 0
}, {
    "_$10$_": 0
}, {
    "_$11$_": 0
}, {
    "_$xl18$_": 0
}, {
    "_$xl7$_": 0
}, {
    "11a2": 0
}, {
    "11b2": 0
}, {
    "11c2": 0
}, {
    "11d2": 0
}, {
    "11a2": 0
}, {
    "11b2": 0
}, {
    "11c2": 0
}, {
    "11d2": 0
}, {
    "_$xl15$_": 0
}, {
    "_$xl14$_": 0
}, {
    "_$xl8$_": 0
}, {
    "12a2": 0
}, {
    "12b2": 0
}, {
    "12c2": 0
}, {
    "12d2": 0
}, {
    "12a2": 0
}, {
    "12b2": 0
}, {
    "12c2": 0
}, {
    "12d2": 0
}, {
    "_$xl19$_": 0
}, {
    "_$xl20$_": 0
}, {
    "_$xl16$_": 0
}, {
    "_$xl15$_": 0
}, {
    "_$12$_": 0
}, {
    "_$10$_": 0
}, {
    "_$6$_": 0
}, {
    "_$16$_": 0
}, {
    "_$12$_": 0
}, {
    "_$3$_": 0
}, {
    "13a2": 0
}, {
    "13b2": 0
}, {
    "13c2": 0
}, {
    "13d2": 0
}, {
    "_$xl21$_": 0
}, {
    "_$xl17$_": 0
}, {
    "_$xl16$_": 0
}, {
    "_$11$_": 0
}, {
    "_$7$_": 0
}, {
    "_$13$_": 0
}, {
    "_$xl22$_": 0
}, {
    "_$xl23$_": 0
}, {
    "_$2$_": 0
}, {
    "_$2$_": 0
}, {
    "_$2$_": 0
}, {
    "_$os2$_": 0
}, {
    "14a2": 0
}, {
    "14b2": 0
}, {
    "14c2": 0
}, {
    "14d2": 0
}, {
    "_$xl18$_": 0
}, {
    "_$xl17$_": 0
}, {
    "_$8$_": 0
}, {
    "_$12$_": 0
}, {
    "_$14$_": 0
}, {
    "_$15$_": 0
}, {
    "_$16$_": 0
}, {
    "_$17$_": 0
}, {
    "_$18$_": 0
}, {
    "_$17$_": 0
}, {
    "15a2": 0
}, {
    "15b2": 0
}, {
    "15c2": 0
}, {
    "15d2": 0
}, {
    "_$xl24$_": 0
}, {
    "_$19$_": 0
}, {
    "_$xl19$_": 0
}, {
    "_$xl18$_": 0
}, {
    "_$12$_": 0
}, {
    "_$13$_": 0
}, {
    "_$25$_": 0
}, {
    "_$4$_": 0
}, {
    "_$22$_": 0
}, {
    "_$2$_": 0
}, {
    "_$5$_": 0
}, {
    "_$6$_": 0
}, {
    "_$7$_": 0
}, {
    "_$xl25$_": 0
}, {
    "16a2": 0
}, {
    "16c2": 0
}, {
    "16b2": 0
}, {
    "16d2": 0
}, {
    "_$xl20$_": 0
}, {
    "_$xl19$_": 0
}, {
    "_$18$_": 0
}, {
    "_$19$_": 0
}, {
    "_$110$_": 0
}, {
    "_$26$_": 0
}, {
    "_$xl26$_": 0
}, {
    "17a2": 0
}, {
    "17b2": 0
}, {
    "17c2": 0
}, {
    "17d2": 0
}, {
    "_$14$_": 0
}, {
    "_$xl21$_": 0
}, {
    "_$27$_": 0
}, {
    "_$15$_": 0
}, {
    "_$xl27$_": 0
}, {
    "18a2": 0
}, {
    "18b2": 0
}, {
    "18c2": 0
}, {
    "18d2": 0
}, {
    "_$xl22$_": 0
}, {
    "_$xl20$_": 0
}, {
    "_$xl28$_": 0
}, {
    "_$28$_": 0
}, {
    "_$16$_": 0
}, {
    "_$10$_": 0
}, {
    "_$xl29$_": 0
}, {
    "_$8$_": 0
}, {
    "_$3$_": 0
}, {
    "_$4$_": 0
}, {
    "_$3$_": 0
}, {
    "_$4$_": 0
}, {
    "_$xl30$_": 0
}, {
    "_$xl31$_": 0
}, {
    "_$2$_": 0
}, {
    "_$3$_": 0
}, {
    "_$4$_": 0
}, {
    "_$3$_": 0
}, {
    "_$4$_": 0
}, {
    "_$11$_": 0
}, {
    "_$4$_": 0
}, {
    "_$5$_": 0
}, {
    "_$6$_": 0
}, {
    "_$12$_": 0
}, {
    "_$$_": 0
}, {
    "_$$_": 0
}, {
    "_$$_": 0
}, {
    "_$C$_": 0
}, {
    "_$A$_": 0
}, {
    "_$$_": 0
}, {
    "_$$_": 0
}, {
    "_$$_": 0
}, {
    "_$$_": 0
}, {
    "_$1$_": 0
}, {
    "1a": 0
}, {
    "1b": 0
}, {
    "1c": 0
}, {
    "1a": 0
}, {
    "1b": 0
}, {
    "1c": 0
}, {
    "_$$_": 0
}, {
    "_$2$_": 0
}, {
    "_$2$_": 0
}, {
    "_$2$_": 0
}, {
    "_$a1$_": 0
}, {
    "_$2$_": 0
}, {
    "_$$_": 0
}, {
    "_$a$_": 0
}, {
    "_$$_": 0
}, {
    "1d": 0
}, {
    "1d": 0
}, {
    "_$$_": 0
}, {
    "2a": 0
}, {
    "2a": 0
}, {
    "2d": 0
}, {
    "2b": 0
}, {
    "2c": 0
}, {
    "2c": 0
}, {
    "2b": 0
}, {
    "2d": 0
}, {
    "_$2$_": 0
}, {
    "_$2$_": 0
}, {
    "_$3$_": 0
}, {
    "_$3$_": 0
}, {
    "_$$_": 0
}, {
    "_$$_": 0
}, {
    "_$$_": 0
}, {
    "_$$_": 0
}, {
    "_$$_": 0
}, {
    "_$$_": 0
}, {
    "_$$_": 0
}, {
    "_$$_": 0
}, {
    "_$$_": 0
}, {
    "_$$_": 0
}, {
    "_$$_": 0
}, {
    _$QLS$_: 0
}, {
    _$isClickable$_: 0
}, {
    "_$2$_": 0
}, {
    "_$$_": 0
}, {
    "_$3$_": 0
}, {
    "_$$_": 0
}, {
    "_$4$_": 0
}, {
    "_$3$_": 0
}, {
    "_$4$_": 0
}, {
    "_$3$_": 0
}, {
    "_$$_": 0
}, {
    "_$$_": 0
}, {
    "_$$_": 0
}, {
    "_$$_": 0
}, {
    "_$$_": 0
}, {
    "_$$_": 0
}, {
    "_$q4$_": 0
}, {
    "_$q4$_": 0
}, {
    "_$q4$_": 0
}, {
    "_$q4$_": 0
}, {
    "4a": 0
}, {
    "4a": 0
}, {
    "4b": 0
}, {
    "4d": 0
}, {
    "_$q3$_": 0
}, {
    "_$2$_": 0
}, {
    "_$q3$_": 0
}, {
    "_$q3$_": 0
}, {
    "_$q3$_": 0
}, {
    "3b": 0
}, {
    "3b": 0
}, {
    "3d": 0
}, {
    "3c": 0
}, {
    "3a": 0
}, {
    "3d": 0
}, {
    "3c": 0
}, {
    "3a": 0
}, {
    "4b": 0
}, {
    "4c": 0
}, {
    "4d": 0
}, {
    "4c": 0
}, {
    "_$i$_": 0
}, {
    "_$i$_": 0
}, {
    "_$i$_": 0
}, {
    "_$C$_": 0
}, {
    "_$C$_": 0
}, {
    "_$$_": 0
}, {
    "_$q42$_": 0
}, {
    "_$q43$_": 0
}, {
    "_$q42$_": 0
}, {
    "_$q42$_": 0
}, {
    "_$q5$_": 0
}, {
    "_$q5$_": 0
}, {
    "_$q5$_": 0
}, {
    "5d": 0
}, {
    "_$q6$_": 0
}, {
    "_$a$_": 0
}, {
    "_$c$_": 0
}, {
    "_$d$_": 0
}, {
    "_$b$_": 0
}, {
    "5c": 0
}, {
    "5b": 0
}, {
    "5a": 0
}, {
    "_$$_": 0
}, {
    "_$B$_": 0
}, {
    "_$B$_": 0
}, {
    "_$$_": 0
}, {
    "_$2$_": 0
}, {
    "_$Bcue$_": 0
}, {
    "_$$_": 0
}, {
    "_$$_": 0
}, {
    "_$pre$_": 0
}, {
    "_$pre$_": 0
}, {
    "_$c$_": 0
}, {
    "_$b$_": 0
}, {
    "_$forq5$_": 0
}, {
    "_$$_": 0
}, {
    "_$2$_": 0
}, {
    "_$4$_": 0
}, {
    "_$5$_": 0
}, {
    "_$6$_": 0
}, {
    "_$$_": 0
}, {
    "_$$_": 0
}, {
    "6a": 0
}, {
    "6b": 0
}, {
    "6c": 0
}, {
    "6d": 0
}, {
    "_$$_": 0
}, {
    "_$$_": 0
}, {
    "_$$_": 0
}, {
    "_$C3$_": 0
}, {
    "_$q52$_": 0
}, {
    "_$$_": 0
}, {
    "_$7$_": 0
}, {
    "_$$_": 0
}, {
    "_$3$_": 0
}, {
    "_$$_": 0
}, {
    "_$$_": 0
}, {
    "_$q6$_": 0
}, {
    "7b": 0
}, {
    "7a": 0
}, {
    "7c": 0
}, {
    "7d": 0
}, {
    "_$$_": 0
}, {
    "_$8$_": 0
}, {
    "_$X$_": 0
}, {
    "_$$_": 0
}, {
    "8a": 0
}, {
    "8b": 0
}, {
    "8c": 0
}, {
    "8d": 0
}, {
    "_$9$_": 0
}, {
    "_$$_": 0
}, {
    _$OS$_: 0
}, {
    "_$$_": 0
}, {
    "_$$_": 0
}, {
    "9a": 0
}, {
    "9b": 0
}, {
    "9c": 0
}, {
    "9d": 0
}, {
    "_$$_": 0
}, {
    "_$$_": 0
}, {
    "_$1$_": 0
}, {
    "_$xl13$_": 0
}, {
    "_$24$_": 0
}, {
    "_$2$_": 0
}, {
    "_$4$_": 0
}, {
    "_$xl11$_": 0
}, {
    "_$23$_": 0
}, {
    "_$xl12$_": 0
}, {
    "18a": 0
}, {
    "18b": 0
}, {
    "18c": 0
}, {
    "18d": 0
}, {
    "_$13$_": 0
}, {
    "_$14$_": 0
}, {
    "_$15$_": 0
}, {
    "_$22$_": 0
}, {
    "_$xl9$_": 0
}, {
    "17a": 0
}, {
    "17b": 0
}, {
    "17c": 0
}, {
    "17d": 0
}, {
    "_$1$_": 0
}, {
    "_$1$_": 0
}, {
    "_$12$_": 0
}, {
    "_$21$_": 0
}, {
    "_$1$_": 0
}, {
    "_$2$_": 0
}, {
    "_$3$_": 0
}, {
    "16a": 0
}, {
    "16b": 0
}, {
    "16c": 0
}, {
    "16d": 0
}, {
    "_$4$_": 0
}, {
    "_$5$_": 0
}, {
    "_$6$_": 0
}, {
    "_$7$_": 0
}, {
    "_$8$_": 0
}, {
    "_$9$_": 0
}, {
    "15a": 0
}, {
    "15b": 0
}, {
    "15c": 0
}, {
    "15d": 0
}, {
    "_$xl14$_": 0
}, {
    "_$3$_": 0
}, {
    "_$4$_": 0
}, {
    "_$xl7$_": 0
}, {
    "_$$_": 0
}, {
    "_$1$_": 0
}, {
    "_$os1$_": 0
}, {
    "_$xl8$_": 0
}, {
    "14a": 0
}, {
    "14b": 0
}, {
    "14c": 0
}, {
    "14d": 0
}, {
    "_$3$_": 0
}, {
    "_$2$_": 0
}, {
    "_$11$_": 0
}, {
    "13a": 0
}, {
    "13b": 0
}, {
    "13c": 0
}, {
    "13d": 0
}, {
    "_$xl6$_": 0
}, {
    "12a": 0
}, {
    "12b": 0
}, {
    "12c": 0
}, {
    "12d": 0
}, {
    "_$xl4$_": 0
}, {
    "_$xl5$_": 0
}, {
    "_$$_": 0
}, {
    "_$1$_": 0
}, {
    "_$2$_": 0
}, {
    "_$xl3$_": 0
}, {
    "11a": 0
}, {
    "11b": 0
}, {
    "11c": 0
}, {
    "11d": 0
}, {
    "_$$_": 0
}, {
    "_$xl2$_": 0
}, {
    "10a": 0
}, {
    "10b": 0
}, {
    "10c": 0
}, {
    "10d": 0
}, {
    "_$2$_": 0
}, {
    "_$$_": 0
}, {
    "_$xl1$_": 0
}, {
    "_$xl15$_": 0
}, {
    "_$xl16$_": 0
}, {
    "_$xl11$_": 0
}, {
    "_$xl11$_": 0
}, {
    "_$2$_": 0
}, {
    "_$8$_": 0
}, {
    "_$xl4$_": 0
}, {
    "_$xl10$_": 0
}, {
    "_$xl10$_": 0
}, {
    "_$7$_": 0
}, {
    "12a": 0
}, {
    "12b": 0
}, {
    "12c": 0
}, {
    "12d": 0
}, {
    "_$xl9$_": 0
}, {
    "_$1$_": 0
}, {
    "_$6$_": 0
}, {
    "_$xl8$_": 0
}, {
    "_$xl8$_": 0
}, {
    "_$5$_": 0
}, {
    "_$xl7$_": 0
}, {
    "_$xl7$_": 0
}, {
    "_$4$_": 0
}, {
    "_$$_": 0
}, {
    "_$xl6$_": 0
}, {
    "_$xl6$_": 0
}, {
    "_$3$_": 0
}, {
    "_$xl5$_": 0
}, {
    "_$xl5$_": 0
}, {
    "_$2$_": 0
}, {
    "_$xl4$_": 0
}, {
    "_$xl4$_": 0
}, {
    "_$xl3$_": 0
}, {
    "_$xl3$_": 0
}, {
    "_$$_": 0
}, {
    "_$xl3$_": 0
}, {
    "11a": 0
}, {
    "11b": 0
}, {
    "11c": 0
}, {
    "11d": 0
}, {
    "_$xl2$_": 0
}, {
    "_$xl2$_": 0
}, {
    "_$xl2$_": 0
}, {
    "10a": 0
}, {
    "10b": 0
}, {
    "10c": 0
}, {
    "10d": 0
}, {
    "_$2$_": 0
}, {
    "_$$_": 0
}, {
    "_$xl1$_": 0
}, {
    "_$xl1$_": 0
}, {
    "_$xl1$_": 0
}, {
    "9a": 0
}, {
    "9b": 0
}, {
    "9c": 0
}, {
    "9d": 0
}, {
    "_$$_": 0
}, {
    "_$$_": 0
}, {
    "_$1$_": 0
}, {
    "_$2$_": 0
}, {
    "_$$_": 0
}, {
    "_$2$_": 0
}, {
    "_$$_": 0
}, {
    "_$1$_": 0
}, {
    "_$$_": 0
}, {
    "_$$_": 0
}, {
    "_$$_": 0
}, {
    "_$$_": 0
}, {
    "_$$_": 0
}, {
    "_$$_": 0
}, {
    "19a": 0
}, {
    "10a4": 0
}, {
    "19b": 0
}, {
    "19c": 0
}, {
    "19d": 0
}, {
    "_$$_": 0
}, {
    "_$13$_": 0
}, {
    "_$14$_": 0
}, {
    "_$15$_": 0
}, {
    "_$$_": 0
}, {
    "_$$_": 0
}, {
    "_$$_": 0
}, {
    "_$$_": 0
}, {
    "_$$_": 0
}, {
    "_$16$_": 0
}, {
    "_$2$_": 0
}, {
    "_$3$_": 0
}, {
    "_$4$_": 0
}, {
    "_$17$_": 0
}, {
    "_$2$_": 0
}, {
    "_$1$_": 0
}, {
    "_$2$_": 0
}, {
    "_$3$_": 0
}, {
    "_$4$_": 0
}, {
    "_$$_": 0
}, {
    "_$$_": 0
}, {
    "_$1$_": 0
}, {
    "_$2$_": 0
}, {
    "_$3$_": 0
}, {
    "_$18$_": 0
}, {
    "_$4$_": 0
}, {
    "_$5$_": 0
}, {
    "_$6$_": 0
}, {
    "_$7$_": 0
}, {
    "_$8$_": 0
}, {
    "_$9$_": 0
}, {
    "_$19$_": 0
}, {
    "_$20$_": 0
}, {
    _$pic$_: 0
}, {
    "_$d$_": 0
}, {
    _$pic3$_: 0
}, {
    _$Clicked$_: 0
} ], self._$InstanceType$_ = {
    "_$$_": class extends self._$ISpriteInstance$_ {},
    "_$$_": class extends self._$ISpriteInstance$_ {},
    "_$$_": class extends self._$ISpriteInstance$_ {},
    "_$$_": class extends self._$ISpriteInstance$_ {},
    "_$$_": class extends self._$ISpriteInstance$_ {},
    "_$$_": class extends self._$IWorldInstance$_ {},
    "_$$_": class extends self._$ISpriteInstance$_ {},
    "_$$_": class extends self._$ISpriteInstance$_ {},
    _$mdx$_: class extends self._$ITextInstance$_ {},
    _$mdx2$_: class extends self._$ITextInstance$_ {},
    "_$$_": class extends self._$ITextInstance$_ {},
    "_$$_": class extends self._$ISpriteInstance$_ {},
    "_$$_": class extends self._$ISpriteInstance$_ {},
    "_$$_": class extends self._$ISpriteInstance$_ {},
    "_$$_": class extends self._$ISpriteInstance$_ {},
    "_$$_": class extends self._$ISpriteInstance$_ {},
    "_$2$_": class extends self._$ISpriteInstance$_ {},
    "_$3$_": class extends self._$ISpriteInstance$_ {},
    "_$1$_": class extends self._$ITextInstance$_ {},
    "_$$_": class extends self._$ITextInstance$_ {},
    "_$$_": class extends self._$ITextInstance$_ {},
    "_$$_": class extends self._$ISpriteInstance$_ {},
    "_$$_": class extends self._$ISpriteInstance$_ {},
    "_$1$_": class extends self._$ITextInstance$_ {},
    "_$$_": class extends self._$ISpriteInstance$_ {},
    "_$$_": class extends self._$ITextInstance$_ {},
    "_$$_": class extends self._$ITextInstance$_ {},
    "_$$_": class extends self._$ISpriteInstance$_ {},
    "_$$_": class extends self._$ISpriteInstance$_ {},
    "_$$_": class extends self._$ISpriteInstance$_ {},
    "_$$_": class extends self._$ISpriteInstance$_ {},
    "_$$_": class extends self._$ITextInstance$_ {},
    "_$$_": class extends self._$ITextInstance$_ {},
    "_$$_": class extends self._$ISpriteInstance$_ {},
    "_$$_": class extends self._$ISpriteInstance$_ {},
    "_$2$_": class extends self._$ISpriteInstance$_ {},
    "_$_9a2$_": class extends self._$ISpriteInstance$_ {},
    "_$_9b2$_": class extends self._$ISpriteInstance$_ {},
    "_$_9c2$_": class extends self._$ISpriteInstance$_ {},
    "_$_9d2$_": class extends self._$ISpriteInstance$_ {},
    _$_9a2$_: class extends self._$ITextInstance$_ {},
    _$_9b2$_: class extends self._$ITextInstance$_ {},
    _$_9c2$_: class extends self._$ITextInstance$_ {},
    _$_9d2$_: class extends self._$ITextInstance$_ {},
    "_$xl10$_": class extends self._$ITextInstance$_ {},
    "_$xl9$_": class extends self._$ISpriteInstance$_ {},
    "_$xl12$_": class extends self._$ISpriteInstance$_ {},
    "_$9$_": class extends self._$ISpriteInstance$_ {},
    "_$5$_": class extends self._$ITextInstance$_ {},
    "_$xl5$_": class extends self._$ISpriteInstance$_ {},
    "_$2$_": class extends self._$ISpriteInstance$_ {},
    "_$2$_": class extends self._$ISpriteInstance$_ {},
    "_$2$_": class extends self._$IWorldInstance$_ {},
    "_$xl13$_": class extends self._$ISpriteInstance$_ {},
    "_$xl12$_": class extends self._$ISpriteInstance$_ {},
    "_$xl17$_": class extends self._$ITextInstance$_ {},
    "_$xl6$_": class extends self._$ISpriteInstance$_ {},
    _$_10a2$_: class extends self._$ITextInstance$_ {},
    "_$_10a2$_": class extends self._$ISpriteInstance$_ {},
    _$_10b2$_: class extends self._$ITextInstance$_ {},
    "_$_10b2$_": class extends self._$ISpriteInstance$_ {},
    _$_10c2$_: class extends self._$ITextInstance$_ {},
    "_$_10c2$_": class extends self._$ISpriteInstance$_ {},
    _$_10d2$_: class extends self._$ITextInstance$_ {},
    "_$_10d2$_": class extends self._$ISpriteInstance$_ {},
    "_$2$_": class extends self._$ISpriteInstance$_ {},
    "_$xl14$_": class extends self._$ISpriteInstance$_ {},
    "_$xl13$_": class extends self._$ISpriteInstance$_ {},
    "_$10$_": class extends self._$ITextInstance$_ {},
    "_$11$_": class extends self._$ITextInstance$_ {},
    "_$xl18$_": class extends self._$ITextInstance$_ {},
    "_$xl7$_": class extends self._$ISpriteInstance$_ {},
    _$_11a2$_: class extends self._$ITextInstance$_ {},
    _$_11b2$_: class extends self._$ITextInstance$_ {},
    _$_11c2$_: class extends self._$ITextInstance$_ {},
    _$_11d2$_: class extends self._$ITextInstance$_ {},
    "_$_11a2$_": class extends self._$ISpriteInstance$_ {},
    "_$_11b2$_": class extends self._$ISpriteInstance$_ {},
    "_$_11c2$_": class extends self._$ISpriteInstance$_ {},
    "_$_11d2$_": class extends self._$ISpriteInstance$_ {},
    "_$xl15$_": class extends self._$ISpriteInstance$_ {},
    "_$xl14$_": class extends self._$ISpriteInstance$_ {},
    "_$xl8$_": class extends self._$ISpriteInstance$_ {},
    _$_12a2$_: class extends self._$ITextInstance$_ {},
    _$_12b2$_: class extends self._$ITextInstance$_ {},
    _$_12c2$_: class extends self._$ITextInstance$_ {},
    _$_12d2$_: class extends self._$ITextInstance$_ {},
    "_$_12a2$_": class extends self._$ISpriteInstance$_ {},
    "_$_12b2$_": class extends self._$ISpriteInstance$_ {},
    "_$_12c2$_": class extends self._$ISpriteInstance$_ {},
    "_$_12d2$_": class extends self._$ISpriteInstance$_ {},
    "_$xl19$_": class extends self._$ITextInstance$_ {},
    "_$xl20$_": class extends self._$ITextInstance$_ {},
    "_$xl16$_": class extends self._$ISpriteInstance$_ {},
    "_$xl15$_": class extends self._$ISpriteInstance$_ {},
    "_$12$_": class extends self._$ITextInstance$_ {},
    "_$10$_": class extends self._$ISpriteInstance$_ {},
    "_$6$_": class extends self._$ITextInstance$_ {},
    "_$16$_": class extends self._$ITextInstance$_ {},
    "_$12$_": class extends self._$ISpriteInstance$_ {},
    "_$3$_": class extends self._$ITextInstance$_ {},
    _$_13a2$_: class extends self._$ITextInstance$_ {},
    _$_13b2$_: class extends self._$ITextInstance$_ {},
    _$_13c2$_: class extends self._$ITextInstance$_ {},
    _$_13d2$_: class extends self._$ITextInstance$_ {},
    "_$xl21$_": class extends self._$ITextInstance$_ {},
    "_$xl17$_": class extends self._$ISpriteInstance$_ {},
    "_$xl16$_": class extends self._$ISpriteInstance$_ {},
    "_$11$_": class extends self._$ISpriteInstance$_ {},
    "_$7$_": class extends self._$ITextInstance$_ {},
    "_$13$_": class extends self._$ITextInstance$_ {},
    "_$xl22$_": class extends self._$ITextInstance$_ {},
    "_$xl23$_": class extends self._$ITextInstance$_ {},
    "_$2$_": class extends self._$ISpriteInstance$_ {},
    "_$2$_": class extends self._$ITextInstance$_ {},
    "_$2$_": class extends self._$ITextInstance$_ {},
    "_$os2$_": class extends self._$ITextInstance$_ {},
    _$_14a2$_: class extends self._$ITextInstance$_ {},
    _$_14b2$_: class extends self._$ITextInstance$_ {},
    _$_14c2$_: class extends self._$ITextInstance$_ {},
    _$_14d2$_: class extends self._$ITextInstance$_ {},
    "_$xl18$_": class extends self._$ISpriteInstance$_ {},
    "_$xl17$_": class extends self._$ISpriteInstance$_ {},
    "_$8$_": class extends self._$ITextInstance$_ {},
    "_$12$_": class extends self._$ISpriteInstance$_ {},
    "_$14$_": class extends self._$ITextInstance$_ {},
    "_$15$_": class extends self._$ITextInstance$_ {},
    "_$16$_": class extends self._$ITextInstance$_ {},
    "_$17$_": class extends self._$ITextInstance$_ {},
    "_$18$_": class extends self._$ITextInstance$_ {},
    "_$17$_": class extends self._$ITextInstance$_ {},
    _$_15a2$_: class extends self._$ITextInstance$_ {},
    _$_15b2$_: class extends self._$ITextInstance$_ {},
    _$_15c2$_: class extends self._$ITextInstance$_ {},
    _$_15d2$_: class extends self._$ITextInstance$_ {},
    "_$xl24$_": class extends self._$ITextInstance$_ {},
    "_$19$_": class extends self._$ITextInstance$_ {},
    "_$xl19$_": class extends self._$ISpriteInstance$_ {},
    "_$xl18$_": class extends self._$ISpriteInstance$_ {},
    "_$12$_": class extends self._$ITextInstance$_ {},
    "_$13$_": class extends self._$ISpriteInstance$_ {},
    "_$25$_": class extends self._$ITextInstance$_ {},
    "_$4$_": class extends self._$ITextInstance$_ {},
    "_$22$_": class extends self._$ISpriteInstance$_ {},
    "_$2$_": class extends self._$ISpriteInstance$_ {},
    "_$5$_": class extends self._$ITextInstance$_ {},
    "_$6$_": class extends self._$ITextInstance$_ {},
    "_$7$_": class extends self._$ITextInstance$_ {},
    "_$xl25$_": class extends self._$ITextInstance$_ {},
    _$_16a2$_: class extends self._$ITextInstance$_ {},
    _$_16c2$_: class extends self._$ITextInstance$_ {},
    _$_16b2$_: class extends self._$ITextInstance$_ {},
    _$_16d2$_: class extends self._$ITextInstance$_ {},
    "_$xl20$_": class extends self._$ISpriteInstance$_ {},
    "_$xl19$_": class extends self._$ISpriteInstance$_ {},
    "_$18$_": class extends self._$ITextInstance$_ {},
    "_$19$_": class extends self._$ITextInstance$_ {},
    "_$110$_": class extends self._$ITextInstance$_ {},
    "_$26$_": class extends self._$ITextInstance$_ {},
    "_$xl26$_": class extends self._$ITextInstance$_ {},
    _$_17a2$_: class extends self._$ITextInstance$_ {},
    _$_17b2$_: class extends self._$ITextInstance$_ {},
    _$_17c2$_: class extends self._$ITextInstance$_ {},
    _$_17d2$_: class extends self._$ITextInstance$_ {},
    "_$14$_": class extends self._$ISpriteInstance$_ {},
    "_$xl21$_": class extends self._$ISpriteInstance$_ {},
    "_$27$_": class extends self._$ITextInstance$_ {},
    "_$15$_": class extends self._$ISpriteInstance$_ {},
    "_$xl27$_": class extends self._$ITextInstance$_ {},
    _$_18a2$_: class extends self._$ITextInstance$_ {},
    _$_18b2$_: class extends self._$ITextInstance$_ {},
    _$_18c2$_: class extends self._$ITextInstance$_ {},
    _$_18d2$_: class extends self._$ITextInstance$_ {},
    "_$xl22$_": class extends self._$ISpriteInstance$_ {},
    "_$xl20$_": class extends self._$ISpriteInstance$_ {},
    "_$xl28$_": class extends self._$ITextInstance$_ {},
    "_$28$_": class extends self._$ITextInstance$_ {},
    "_$16$_": class extends self._$ISpriteInstance$_ {},
    "_$10$_": class extends self._$ISpriteInstance$_ {},
    "_$xl29$_": class extends self._$ITextInstance$_ {},
    "_$8$_": class extends self._$ITextInstance$_ {},
    "_$3$_": class extends self._$ISpriteInstance$_ {},
    "_$4$_": class extends self._$ISpriteInstance$_ {},
    "_$3$_": class extends self._$ISpriteInstance$_ {},
    "_$4$_": class extends self._$ISpriteInstance$_ {},
    "_$xl30$_": class extends self._$ITextInstance$_ {},
    "_$xl31$_": class extends self._$ITextInstance$_ {},
    "_$2$_": class extends self._$ISpriteInstance$_ {},
    "_$3$_": class extends self._$ITextInstance$_ {},
    "_$4$_": class extends self._$ITextInstance$_ {},
    "_$3$_": class extends self._$ISpriteInstance$_ {},
    "_$4$_": class extends self._$ISpriteInstance$_ {},
    "_$11$_": class extends self._$ISpriteInstance$_ {},
    "_$4$_": class extends self._$ITextInstance$_ {},
    "_$5$_": class extends self._$ITextInstance$_ {},
    "_$6$_": class extends self._$ITextInstance$_ {},
    "_$12$_": class extends self._$ISpriteInstance$_ {},
    "_$$_": class extends self._$IInstance$_ {},
    "_$$_": class extends self._$IInstance$_ {},
    "_$$_": class extends self._$ISpriteInstance$_ {},
    "_$C$_": class extends self._$ISpriteInstance$_ {},
    "_$A$_": class extends self._$ISpriteInstance$_ {},
    "_$$_": class extends self._$ISpriteInstance$_ {},
    "_$$_": class extends self._$ISpriteInstance$_ {},
    "_$$_": class extends self._$ISpriteInstance$_ {},
    "_$$_": class extends self._$ISpriteInstance$_ {},
    "_$1$_": class extends self._$ITextInstance$_ {},
    _$_1a$_: class extends self._$ITextInstance$_ {},
    _$_1b$_: class extends self._$ITextInstance$_ {},
    _$_1c$_: class extends self._$ITextInstance$_ {},
    "_$_1a$_": class extends self._$ISpriteInstance$_ {},
    "_$_1b$_": class extends self._$ISpriteInstance$_ {},
    "_$_1c$_": class extends self._$ISpriteInstance$_ {},
    "_$$_": class extends self._$ISpriteInstance$_ {},
    "_$2$_": class extends self._$ISpriteInstance$_ {},
    "_$2$_": class extends self._$ISpriteInstance$_ {},
    "_$2$_": class extends self._$ISpriteInstance$_ {},
    "_$a1$_": class extends self._$ITextInstance$_ {},
    "_$2$_": class extends self._$ISpriteInstance$_ {},
    "_$$_": class extends self._$ISpriteInstance$_ {},
    "_$a$_": class extends self._$ITextInstance$_ {},
    "_$$_": class extends self._$IInstance$_ {},
    "_$_1d$_": class extends self._$ISpriteInstance$_ {},
    _$_1d$_: class extends self._$ITextInstance$_ {},
    "_$$_": class extends self._$ISpriteInstance$_ {},
    _$_2a$_: class extends self._$ITextInstance$_ {},
    "_$_2a$_": class extends self._$ISpriteInstance$_ {},
    "_$_2d$_": class extends self._$ISpriteInstance$_ {},
    _$_2b$_: class extends self._$ITextInstance$_ {},
    _$_2c$_: class extends self._$ITextInstance$_ {},
    "_$_2c$_": class extends self._$ISpriteInstance$_ {},
    "_$_2b$_": class extends self._$ISpriteInstance$_ {},
    _$_2d$_: class extends self._$ITextInstance$_ {},
    "_$2$_": class extends self._$ITextInstance$_ {},
    "_$2$_": class extends self._$ISpriteInstance$_ {},
    "_$3$_": class extends self._$ISpriteInstance$_ {},
    "_$3$_": class extends self._$ITextInstance$_ {},
    "_$$_": class extends self._$ISpriteInstance$_ {},
    "_$$_": class extends self._$ITextInstance$_ {},
    "_$$_": class extends self._$ISpriteInstance$_ {},
    "_$$_": class extends self._$ISpriteInstance$_ {},
    "_$$_": class extends self._$ISpriteInstance$_ {},
    "_$$_": class extends self._$ISpriteInstance$_ {},
    "_$$_": class extends self._$ISpriteInstance$_ {},
    "_$$_": class extends self._$ITextInstance$_ {},
    "_$$_": class extends self._$IWorldInstance$_ {},
    "_$$_": class extends self._$ISpriteInstance$_ {},
    "_$$_": class extends self._$ISpriteInstance$_ {},
    _$QLS$_: class extends self._$ITextInstance$_ {},
    "_$2$_": class extends self._$IWorldInstance$_ {},
    "_$$_": class extends self._$ITextInstance$_ {},
    "_$3$_": class extends self._$ISpriteInstance$_ {},
    "_$$_": class extends self._$IWorldInstance$_ {},
    "_$4$_": class extends self._$ISpriteInstance$_ {},
    "_$3$_": class extends self._$ISpriteInstance$_ {},
    "_$4$_": class extends self._$ISpriteInstance$_ {},
    "_$3$_": class extends self._$ISpriteInstance$_ {},
    "_$$_": class extends self._$ITextInstance$_ {},
    "_$$_": class extends self._$ITextInstance$_ {},
    "_$$_": class extends self._$ISpriteInstance$_ {},
    "_$$_": class extends self._$ISpriteInstance$_ {},
    "_$$_": class extends self._$ITextInstance$_ {},
    "_$$_": class extends self._$ITextInstance$_ {},
    "_$q4$_": class extends self._$ISpriteInstance$_ {},
    "_$q4$_": class extends self._$ISpriteInstance$_ {},
    "_$q4$_": class extends self._$ITextInstance$_ {},
    "_$q4$_": class extends self._$ISpriteInstance$_ {},
    "_$_4a$_": class extends self._$ISpriteInstance$_ {},
    _$_4a$_: class extends self._$ITextInstance$_ {},
    _$_4b$_: class extends self._$ITextInstance$_ {},
    _$_4d$_: class extends self._$ITextInstance$_ {},
    "_$q3$_": class extends self._$ISpriteInstance$_ {},
    "_$2$_": class extends self._$ISpriteInstance$_ {},
    "_$q3$_": class extends self._$ISpriteInstance$_ {},
    "_$q3$_": class extends self._$ITextInstance$_ {},
    "_$q3$_": class extends self._$ISpriteInstance$_ {},
    "_$_3b$_": class extends self._$ISpriteInstance$_ {},
    _$_3b$_: class extends self._$ITextInstance$_ {},
    "_$_3d$_": class extends self._$ISpriteInstance$_ {},
    "_$_3c$_": class extends self._$ISpriteInstance$_ {},
    "_$_3a$_": class extends self._$ISpriteInstance$_ {},
    _$_3d$_: class extends self._$ITextInstance$_ {},
    _$_3c$_: class extends self._$ITextInstance$_ {},
    _$_3a$_: class extends self._$ITextInstance$_ {},
    "_$_4b$_": class extends self._$ISpriteInstance$_ {},
    "_$_4c$_": class extends self._$ISpriteInstance$_ {},
    "_$_4d$_": class extends self._$ISpriteInstance$_ {},
    _$_4c$_: class extends self._$ITextInstance$_ {},
    "_$i$_": class extends self._$ISpriteInstance$_ {},
    "_$i$_": class extends self._$ISpriteInstance$_ {},
    "_$i$_": class extends self._$ITextInstance$_ {},
    "_$C$_": class extends self._$ISpriteInstance$_ {},
    "_$C$_": class extends self._$ITextInstance$_ {},
    "_$$_": class extends self._$ITextInstance$_ {},
    "_$q42$_": class extends self._$ITextInstance$_ {},
    "_$q43$_": class extends self._$ITextInstance$_ {},
    "_$q42$_": class extends self._$ISpriteInstance$_ {},
    "_$q42$_": class extends self._$ISpriteInstance$_ {},
    "_$q5$_": class extends self._$ITextInstance$_ {},
    "_$q5$_": class extends self._$ISpriteInstance$_ {},
    "_$q5$_": class extends self._$ISpriteInstance$_ {},
    _$_5d$_: class extends self._$ITextInstance$_ {},
    "_$q6$_": class extends self._$ISpriteInstance$_ {},
    "_$a$_": class extends self._$ISpriteInstance$_ {},
    "_$c$_": class extends self._$ISpriteInstance$_ {},
    "_$d$_": class extends self._$ISpriteInstance$_ {},
    "_$b$_": class extends self._$ISpriteInstance$_ {},
    _$_5c$_: class extends self._$ITextInstance$_ {},
    _$_5b$_: class extends self._$ITextInstance$_ {},
    _$_5a$_: class extends self._$ITextInstance$_ {},
    "_$$_": class extends self._$ITextInstance$_ {},
    "_$B$_": class extends self._$ITextInstance$_ {},
    "_$B$_": class extends self._$ISpriteInstance$_ {},
    "_$$_": class extends self._$ISpriteInstance$_ {},
    "_$2$_": class extends self._$ITextInstance$_ {},
    "_$Bcue$_": class extends self._$ITextInstance$_ {},
    "_$$_": class extends self._$ITextInstance$_ {},
    "_$$_": class extends self._$ITextInstance$_ {},
    "_$pre$_": class extends self._$ISpriteInstance$_ {},
    "_$pre$_": class extends self._$ITextInstance$_ {},
    "_$c$_": class extends self._$ITextInstance$_ {},
    "_$b$_": class extends self._$ITextInstance$_ {},
    "_$forq5$_": class extends self._$ISpriteInstance$_ {},
    "_$$_": class extends self._$ITextInstance$_ {},
    "_$2$_": class extends self._$ISpriteInstance$_ {},
    "_$4$_": class extends self._$ISpriteInstance$_ {},
    "_$5$_": class extends self._$ISpriteInstance$_ {},
    "_$6$_": class extends self._$ISpriteInstance$_ {},
    "_$$_": class extends self._$ISpriteInstance$_ {},
    "_$$_": class extends self._$ISpriteInstance$_ {},
    _$_6a$_: class extends self._$ITextInstance$_ {},
    _$_6b$_: class extends self._$ITextInstance$_ {},
    _$_6c$_: class extends self._$ITextInstance$_ {},
    _$_6d$_: class extends self._$ITextInstance$_ {},
    "_$$_": class extends self._$ISpriteInstance$_ {},
    "_$$_": class extends self._$ISpriteInstance$_ {},
    "_$$_": class extends self._$ISpriteInstance$_ {},
    "_$C3$_": class extends self._$ISpriteInstance$_ {},
    "_$q52$_": class extends self._$ISpriteInstance$_ {},
    "_$$_": class extends self._$ISpriteInstance$_ {},
    "_$7$_": class extends self._$ISpriteInstance$_ {},
    "_$$_": class extends self._$ISpriteInstance$_ {},
    "_$3$_": class extends self._$ITextInstance$_ {},
    "_$$_": class extends self._$ITextInstance$_ {},
    "_$$_": class extends self._$ITextInstance$_ {},
    "_$q6$_": class extends self._$ITextInstance$_ {},
    _$_7b$_: class extends self._$ITextInstance$_ {},
    _$_7a$_: class extends self._$ITextInstance$_ {},
    _$_7c$_: class extends self._$ITextInstance$_ {},
    _$_7d$_: class extends self._$ITextInstance$_ {},
    "_$$_": class extends self._$ISpriteInstance$_ {},
    "_$8$_": class extends self._$ISpriteInstance$_ {},
    "_$X$_": class extends self._$ITextInstance$_ {},
    "_$$_": class extends self._$ITextInstance$_ {},
    _$_8a$_: class extends self._$ITextInstance$_ {},
    _$_8b$_: class extends self._$ITextInstance$_ {},
    _$_8c$_: class extends self._$ITextInstance$_ {},
    _$_8d$_: class extends self._$ITextInstance$_ {},
    "_$9$_": class extends self._$ISpriteInstance$_ {},
    "_$$_": class extends self._$ITextInstance$_ {},
    _$OS$_: class extends self._$ITextInstance$_ {},
    "_$$_": class extends self._$ITextInstance$_ {},
    "_$$_": class extends self._$ISpriteInstance$_ {},
    _$_9a$_: class extends self._$ITextInstance$_ {},
    _$_9b$_: class extends self._$ITextInstance$_ {},
    _$_9c$_: class extends self._$ITextInstance$_ {},
    _$_9d$_: class extends self._$ITextInstance$_ {},
    "_$$_": class extends self._$ITextInstance$_ {},
    "_$$_": class extends self._$ITextInstance$_ {},
    "_$1$_": class extends self._$ITextInstance$_ {},
    "_$xl13$_": class extends self._$ITextInstance$_ {},
    "_$24$_": class extends self._$ITextInstance$_ {},
    "_$2$_": class extends self._$ITextInstance$_ {},
    "_$4$_": class extends self._$ITextInstance$_ {},
    "_$xl11$_": class extends self._$ITextInstance$_ {},
    "_$23$_": class extends self._$ITextInstance$_ {},
    "_$xl12$_": class extends self._$ITextInstance$_ {},
    _$_18a$_: class extends self._$ITextInstance$_ {},
    _$_18b$_: class extends self._$ITextInstance$_ {},
    _$_18c$_: class extends self._$ITextInstance$_ {},
    _$_18d$_: class extends self._$ITextInstance$_ {},
    "_$13$_": class extends self._$ITextInstance$_ {},
    "_$14$_": class extends self._$ITextInstance$_ {},
    "_$15$_": class extends self._$ITextInstance$_ {},
    "_$22$_": class extends self._$ITextInstance$_ {},
    "_$xl9$_": class extends self._$ITextInstance$_ {},
    _$_17a$_: class extends self._$ITextInstance$_ {},
    _$_17b$_: class extends self._$ITextInstance$_ {},
    _$_17c$_: class extends self._$ITextInstance$_ {},
    _$_17d$_: class extends self._$ITextInstance$_ {},
    "_$1$_": class extends self._$ITextInstance$_ {},
    "_$1$_": class extends self._$ITextInstance$_ {},
    "_$12$_": class extends self._$ITextInstance$_ {},
    "_$21$_": class extends self._$ITextInstance$_ {},
    "_$1$_": class extends self._$ITextInstance$_ {},
    "_$2$_": class extends self._$ITextInstance$_ {},
    "_$3$_": class extends self._$ITextInstance$_ {},
    _$_16a$_: class extends self._$ITextInstance$_ {},
    _$_16b$_: class extends self._$ITextInstance$_ {},
    _$_16c$_: class extends self._$ITextInstance$_ {},
    _$_16d$_: class extends self._$ITextInstance$_ {},
    "_$4$_": class extends self._$ITextInstance$_ {},
    "_$5$_": class extends self._$ITextInstance$_ {},
    "_$6$_": class extends self._$ITextInstance$_ {},
    "_$7$_": class extends self._$ITextInstance$_ {},
    "_$8$_": class extends self._$ITextInstance$_ {},
    "_$9$_": class extends self._$ITextInstance$_ {},
    _$_15a$_: class extends self._$ITextInstance$_ {},
    _$_15b$_: class extends self._$ITextInstance$_ {},
    _$_15c$_: class extends self._$ITextInstance$_ {},
    _$_15d$_: class extends self._$ITextInstance$_ {},
    "_$xl14$_": class extends self._$ITextInstance$_ {},
    "_$3$_": class extends self._$ITextInstance$_ {},
    "_$4$_": class extends self._$ITextInstance$_ {},
    "_$xl7$_": class extends self._$ITextInstance$_ {},
    "_$$_": class extends self._$ITextInstance$_ {},
    "_$1$_": class extends self._$ITextInstance$_ {},
    "_$os1$_": class extends self._$ITextInstance$_ {},
    "_$xl8$_": class extends self._$ITextInstance$_ {},
    _$_14a$_: class extends self._$ITextInstance$_ {},
    _$_14b$_: class extends self._$ITextInstance$_ {},
    _$_14c$_: class extends self._$ITextInstance$_ {},
    _$_14d$_: class extends self._$ITextInstance$_ {},
    "_$3$_": class extends self._$ITextInstance$_ {},
    "_$2$_": class extends self._$ITextInstance$_ {},
    "_$11$_": class extends self._$ITextInstance$_ {},
    _$_13a$_: class extends self._$ITextInstance$_ {},
    _$_13b$_: class extends self._$ITextInstance$_ {},
    _$_13c$_: class extends self._$ITextInstance$_ {},
    _$_13d$_: class extends self._$ITextInstance$_ {},
    "_$xl6$_": class extends self._$ITextInstance$_ {},
    _$_12a$_: class extends self._$ITextInstance$_ {},
    _$_12b$_: class extends self._$ITextInstance$_ {},
    _$_12c$_: class extends self._$ITextInstance$_ {},
    _$_12d$_: class extends self._$ITextInstance$_ {},
    "_$xl4$_": class extends self._$ITextInstance$_ {},
    "_$xl5$_": class extends self._$ITextInstance$_ {},
    "_$$_": class extends self._$ITextInstance$_ {},
    "_$1$_": class extends self._$ITextInstance$_ {},
    "_$2$_": class extends self._$ITextInstance$_ {},
    "_$xl3$_": class extends self._$ITextInstance$_ {},
    _$_11a$_: class extends self._$ITextInstance$_ {},
    _$_11b$_: class extends self._$ITextInstance$_ {},
    _$_11c$_: class extends self._$ITextInstance$_ {},
    _$_11d$_: class extends self._$ITextInstance$_ {},
    "_$$_": class extends self._$IWorldInstance$_ {},
    "_$xl2$_": class extends self._$ITextInstance$_ {},
    _$_10a$_: class extends self._$ITextInstance$_ {},
    _$_10b$_: class extends self._$ITextInstance$_ {},
    _$_10c$_: class extends self._$ITextInstance$_ {},
    _$_10d$_: class extends self._$ITextInstance$_ {},
    "_$2$_": class extends self._$ITextInstance$_ {},
    "_$$_": class extends self._$ITextInstance$_ {},
    "_$xl1$_": class extends self._$ITextInstance$_ {},
    "_$xl15$_": class extends self._$ITextInstance$_ {},
    "_$xl16$_": class extends self._$ITextInstance$_ {},
    "_$xl11$_": class extends self._$ISpriteInstance$_ {},
    "_$xl11$_": class extends self._$ISpriteInstance$_ {},
    "_$2$_": class extends self._$ISpriteInstance$_ {},
    "_$8$_": class extends self._$ISpriteInstance$_ {},
    "_$xl4$_": class extends self._$ISpriteInstance$_ {},
    "_$xl10$_": class extends self._$ISpriteInstance$_ {},
    "_$xl10$_": class extends self._$ISpriteInstance$_ {},
    "_$7$_": class extends self._$ISpriteInstance$_ {},
    "_$_12a$_": class extends self._$ISpriteInstance$_ {},
    "_$_12b$_": class extends self._$ISpriteInstance$_ {},
    "_$_12c$_": class extends self._$ISpriteInstance$_ {},
    "_$_12d$_": class extends self._$ISpriteInstance$_ {},
    "_$xl9$_": class extends self._$ISpriteInstance$_ {},
    "_$1$_": class extends self._$ISpriteInstance$_ {},
    "_$6$_": class extends self._$ISpriteInstance$_ {},
    "_$xl8$_": class extends self._$ISpriteInstance$_ {},
    "_$xl8$_": class extends self._$ISpriteInstance$_ {},
    "_$5$_": class extends self._$ISpriteInstance$_ {},
    "_$xl7$_": class extends self._$ISpriteInstance$_ {},
    "_$xl7$_": class extends self._$ISpriteInstance$_ {},
    "_$4$_": class extends self._$ISpriteInstance$_ {},
    "_$$_": class extends self._$ISpriteInstance$_ {},
    "_$xl6$_": class extends self._$ISpriteInstance$_ {},
    "_$xl6$_": class extends self._$ISpriteInstance$_ {},
    "_$3$_": class extends self._$ISpriteInstance$_ {},
    "_$xl5$_": class extends self._$ISpriteInstance$_ {},
    "_$xl5$_": class extends self._$ISpriteInstance$_ {},
    "_$2$_": class extends self._$ISpriteInstance$_ {},
    "_$xl4$_": class extends self._$ISpriteInstance$_ {},
    "_$xl4$_": class extends self._$ISpriteInstance$_ {},
    "_$xl3$_": class extends self._$ISpriteInstance$_ {},
    "_$xl3$_": class extends self._$ISpriteInstance$_ {},
    "_$$_": class extends self._$ISpriteInstance$_ {},
    "_$xl3$_": class extends self._$ISpriteInstance$_ {},
    "_$_11a$_": class extends self._$ISpriteInstance$_ {},
    "_$_11b$_": class extends self._$ISpriteInstance$_ {},
    "_$_11c$_": class extends self._$ISpriteInstance$_ {},
    "_$_11d$_": class extends self._$ISpriteInstance$_ {},
    "_$xl2$_": class extends self._$ISpriteInstance$_ {},
    "_$xl2$_": class extends self._$ISpriteInstance$_ {},
    "_$xl2$_": class extends self._$ISpriteInstance$_ {},
    "_$_10a$_": class extends self._$ISpriteInstance$_ {},
    "_$_10b$_": class extends self._$ISpriteInstance$_ {},
    "_$_10c$_": class extends self._$ISpriteInstance$_ {},
    "_$_10d$_": class extends self._$ISpriteInstance$_ {},
    "_$2$_": class extends self._$ISpriteInstance$_ {},
    "_$$_": class extends self._$ISpriteInstance$_ {},
    "_$xl1$_": class extends self._$ISpriteInstance$_ {},
    "_$xl1$_": class extends self._$ISpriteInstance$_ {},
    "_$xl1$_": class extends self._$ISpriteInstance$_ {},
    "_$_9a$_": class extends self._$ISpriteInstance$_ {},
    "_$_9b$_": class extends self._$ISpriteInstance$_ {},
    "_$_9c$_": class extends self._$ISpriteInstance$_ {},
    "_$_9d$_": class extends self._$ISpriteInstance$_ {},
    "_$$_": class extends self._$ISpriteInstance$_ {},
    "_$$_": class extends self._$ISpriteInstance$_ {},
    "_$1$_": class extends self._$ISpriteInstance$_ {},
    "_$2$_": class extends self._$ISpriteInstance$_ {},
    "_$$_": class extends self._$ISpriteInstance$_ {},
    "_$2$_": class extends self._$ISpriteInstance$_ {},
    "_$$_": class extends self._$ISpriteInstance$_ {},
    "_$1$_": class extends self._$ISpriteInstance$_ {},
    "_$$_": class extends self._$ISpriteInstance$_ {},
    "_$$_": class extends self._$ISpriteInstance$_ {},
    "_$$_": class extends self._$ISpriteInstance$_ {},
    "_$$_": class extends self._$ITextInstance$_ {},
    "_$$_": class extends self._$ITextInstance$_ {},
    "_$$_": class extends self._$ITextInstance$_ {},
    _$_19a$_: class extends self._$ITextInstance$_ {},
    _$_10a4$_: class extends self._$ITextInstance$_ {},
    _$_19b$_: class extends self._$ITextInstance$_ {},
    _$_19c$_: class extends self._$ITextInstance$_ {},
    _$_19d$_: class extends self._$ITextInstance$_ {},
    "_$$_": class extends self._$ISpriteInstance$_ {},
    "_$13$_": class extends self._$ISpriteInstance$_ {},
    "_$14$_": class extends self._$ISpriteInstance$_ {},
    "_$15$_": class extends self._$ISpriteInstance$_ {},
    "_$$_": class extends self._$ISpriteInstance$_ {},
    "_$$_": class extends self._$ITextInstance$_ {},
    "_$$_": class extends self._$ISpriteInstance$_ {},
    "_$$_": class extends self._$ISpriteInstance$_ {},
    "_$$_": class extends self._$ITextInstance$_ {},
    "_$16$_": class extends self._$ISpriteInstance$_ {},
    "_$2$_": class extends self._$ITextInstance$_ {},
    "_$3$_": class extends self._$ITextInstance$_ {},
    "_$4$_": class extends self._$ITextInstance$_ {},
    "_$17$_": class extends self._$ISpriteInstance$_ {},
    "_$2$_": class extends self._$ITextInstance$_ {},
    "_$1$_": class extends self._$ITextInstance$_ {},
    "_$2$_": class extends self._$ITextInstance$_ {},
    "_$3$_": class extends self._$ITextInstance$_ {},
    "_$4$_": class extends self._$ITextInstance$_ {},
    "_$$_": class extends self._$ITextInstance$_ {},
    "_$$_": class extends self._$ISpriteInstance$_ {},
    "_$1$_": class extends self._$ITextInstance$_ {},
    "_$2$_": class extends self._$ITextInstance$_ {},
    "_$3$_": class extends self._$ITextInstance$_ {},
    "_$18$_": class extends self._$ISpriteInstance$_ {},
    "_$4$_": class extends self._$ITextInstance$_ {},
    "_$5$_": class extends self._$ITextInstance$_ {},
    "_$6$_": class extends self._$ITextInstance$_ {},
    "_$7$_": class extends self._$ITextInstance$_ {},
    "_$8$_": class extends self._$ITextInstance$_ {},
    "_$9$_": class extends self._$ITextInstance$_ {},
    "_$19$_": class extends self._$ISpriteInstance$_ {},
    "_$20$_": class extends self._$ISpriteInstance$_ {},
    _$pic$_: class extends self._$ISpriteInstance$_ {},
    "_$d$_": class extends self._$ISpriteInstance$_ {},
    _$pic3$_: class extends self._$ISpriteInstance$_ {}
};